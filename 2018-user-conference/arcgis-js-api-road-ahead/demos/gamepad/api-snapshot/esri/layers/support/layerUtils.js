// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define([],function(){return{_serializeLayerDefinitions:function(b){var a=[],c=!1,e=/[:;]/;if(b&&(b.forEach(function(b,d){a.push([d,b]);!c&&e.test(b)&&(c=!0)}),0<a.length)){var d;c?(d={},a.forEach(function(a){d[a[0]]=a[1]}),d=JSON.stringify(d)):(d=[],a.forEach(function(a){d.push(a[0]+":"+a[1])}),d=d.join(";"));return d}return null},_serializeTimeOptions:function(b,a){if(b){var c=[];b.forEach(function(b,d){b=b.toJSON();a&&-1!==a.indexOf(d)&&(b.useTime=!1);c.push('"'+d+'":'+JSON.stringify(b))});if(c.length)return"{"+
c.join(",")+"}"}},_getVisibleLayers:function(b,a){var c=[],e,d;if(!b)return c;if(a)for(c=a.concat(),d=0;d<b.length;d++)a=b[d],e=b.indexOf(a.id),a.subLayerIds&&-1<e&&(c.splice(e,1),c=c.concat(a.subLayerIds));else c=this._getDefaultVisibleLayers(b);return c},_getDefaultVisibleLayers:function(b){var a=[],c;if(!b)return a;for(c=0;c<b.length;c++)0<=b[c].parentLayerId&&-1===a.indexOf(b[c].parentLayerId)&&b.some(function(a){return a.id===b[c].parentLayerId})||b[c].defaultVisibility&&a.push(b[c].id);return a},
_getLayersForScale:function(b,a){var c=[];if(0<b&&a){var e;for(e=0;e<a.length;e++)if(!(0<=a[e].parentLayerId&&-1===c.indexOf(a[e].parentLayerId)&&a.some(function(b){return b.id===a[e].parentLayerId}))&&0<=a[e].id){var d=!0,f=a[e].maxScale,g=a[e].minScale;if(0<f||0<g)0<f&&0<g?d=f<=b&&b<=g:0<f?d=f<=b:0<g&&(d=b<=g);d&&c.push(a[e].id)}}return c}}});