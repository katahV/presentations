// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/vectorTileLayerLoader":function(){define("require exports dojo/has dojo/_base/lang ../../config ../../request ../../core/promiseUtils ../../core/urlUtils".split(" "),function(m,f,h,d,a,b,n,g){function k(c){if(c){var e=g.getOrigin(c);g.canUseXhr(e)||-1!==q.indexOf(e)||q.push(e);return c}}function e(e,b){var k=e.parsedUrl;if(null!=b.sources){var a=null;k&&(a=k.path.substring(0,k.path.lastIndexOf("/")),e.styleUrl=k.path);a||(a=(a=r(b,k))&&a.url);b.jsonUrl&&(e.styleUrl=
b.jsonUrl);var k=b.sprite||null,d=b.glyphs||null;a&&(k&&!g.isAbsolute(k)&&(k=g.normalize(g.join(a,k))),d&&!g.isAbsolute(d)&&(d=g.normalize(g.join(a,d))));e.style=b;e.spriteUrl=k;e.glyphsUrl=d;return l(e,b)}if(b.hasOwnProperty("tileInfo"))return e.layerDefinition=b,e.serviceUrl=k.path,c(e,b)}function c(c,e){var a=c.parsedUrl;e=e.defaultStyles;g.isAbsolute(e)?c.styleUrl=g.normalize(e):c.styleUrl=g.normalize(g.join(a.path,e,"root.json"));k(c.styleUrl);return b(c.styleUrl,{responseType:"json"}).then(function(e){var b=
e.data.sprite||null,k=e.data.glyphs||null,a=g.removeFile(c.styleUrl);b&&!g.isAbsolute(b)&&(b=g.normalize(g.join(a,b)));k&&!g.isAbsolute(k)&&(k=g.normalize(g.join(a,k)));c.spriteUrl=b;c.glyphsUrl=k;return c.style=e.data})}function l(c,e){var a=c.parsedUrl;(e=r(e,a))||n.reject("Source isn't available in the style object!");if(e.url)return c.serviceUrl=e.url,g.isAbsolute(c.serviceUrl)||(c.serviceUrl=g.join(a.path,c.serviceUrl)),k(c.serviceUrl),b(c.serviceUrl,{query:{f:"json"},responseType:"json"}).then(function(e){c.layerDefinition=
t(e.data);return c});c.layerDefinition=t(e);return n.resolve(c)}function r(c,e){if(!c.sources)return null;var b=c.sources;c=null;if(b.esri)c=b.esri,e&&c.url&&!g.isAbsolute(c.url)&&(b=e.path.substring(0,e.path.lastIndexOf("/")),c.url=g.join(b,c.url));else{for(var k=0,a=Object.keys(b);k<a.length;k++)if(e=a[k],-1!==e.toLocaleLowerCase().indexOf("street")&&"vector"===c.type){c=b[e];break}if(!c)for(k=0,a=Object.keys(b);k<a.length&&(e=a[k],c=b[e],"vector"!==c.type);k++);}return c}function t(c){if(c.hasOwnProperty("tileInfo"))return c;
for(var e={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100}},b=(e.xmax-e.xmin)/512,g=[],a=c.hasOwnProperty("minzoom")?parseFloat(c.minzoom):0,d=c.hasOwnProperty("maxzoom")?parseFloat(c.maxzoom):16;a<d;a++){var n=b/Math.pow(2,a);g.push({level:a,scale:Math.floor(3779.527559055118*n),resolution:n})}c.tiles.forEach(k);return{capabilities:"TilesOnly",initialExtent:e,fullExtent:e,minScale:g[0].scale,maxScale:g[g.length-
1].scale,tiles:c.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:g,spatialReference:{wkid:102100}}}}Object.defineProperty(f,"__esModule",{value:!0});var q=a.defaults&&a.defaults.io.corsEnabledServers||a.request.corsEnabledServers;f.loadMetadata=function(c){if(!c)return n.reject("invalid input URL!");var a={layerDefinition:null,parsedUrl:null,serviceUrl:null,style:null,styleUrl:null,url:null,spriteUrl:null,glyphsUrl:null};if("string"!==typeof c)return e(a,
c).then(function(){return a});c=a.url=g.normalize(c);var l=a.parsedUrl=g.urlToObject(c);k(c);return b(l.path,{responseType:"json",query:d.mixin({f:"json"},l.query)}).then(function(c){return e(a,c.data)}).then(function(){return a})}})},"esri/portal/support/jsonContext":function(){define(["require","exports","../../core/urlUtils","../Portal"],function(m,f,h,d){Object.defineProperty(f,"__esModule",{value:!0});f.createForItem=function(a){return{origin:"portal-item",url:h.urlToObject(a.itemUrl),portal:a.portal||
d.getDefault()}}})},"esri/views/vectorTiles/SchemaHelper":function(){define(["require","exports"],function(m,f){return function(){function h(d,a){this.lockedSchemaPixelSize=d;this.isWGS84=a}h.prototype.getCompatibleLevelRowCol=function(d){var a=d[0],b=d[1];d=d[2];this.isWGS84?(b>>=1,d>>=1):256===this.lockedSchemaPixelSize&&0<a&&(a--,b>>=1,d>>=1);return[a,b,d]};h.prototype.getSchemaShift=function(d,a){var b=0,n=0;if(256===this.lockedSchemaPixelSize||this.isWGS84)d[2]%2&&(b=2*a),d[1]%2&&(n=2*a);return[b,
n]};h.prototype.adjustLevel=function(d){return this.isWGS84?d:256===this.lockedSchemaPixelSize?0<d?d-1:0:d};h.create256x256CompatibleTileInfo=function(d){if(!d)return null;if(256===d.rows&&256===d.cols)return d;for(var a=d.format,b=d.compressionQuality,n=d.dpi,g=d.origin,k=d.spatialReference,e=4326===k.wkid,c=[],l,h,f=d.lods.length,m=0;m<f;m++){var p=d.lods[m];l=p.scale;h=e?p.resolution:2*p.resolution;c.push({level:p.level,scale:l,resolution:h})}return{rows:256,cols:256,dpi:n,format:a,compressionQuality:b,
origin:g,spatialReference:k,lods:c}};h.create512x512CompatibleTileInfo=function(d){if(!d||256===d.rows||256===d.cols)return null;for(var a=d.format,b=d.compressionQuality,n=d.dpi,g=d.origin,k=d.spatialReference,e=[],c,l,h=d.lods.length,f=0;f<h;f++){var m=d.lods[f];c=m.scale;l=.5*m.resolution;e.push({level:m.level,scale:c,resolution:l})}return{rows:512,cols:512,dpi:n,format:a,compressionQuality:b,origin:g,spatialReference:k,lods:e}};return h}()})},"esri/views/vectorTiles/style/StyleRepository":function(){define(["require",
"exports","dojo/has","./StyleLayer"],function(m,f,h,d){return function(){function a(b,d){this.styleJSON=b;this.version=parseFloat(b.version);this.sprite=d?d.spriteUrl:b.sprite;this.glyphs=d?d.glyphsUrl:b.glyphs;this.layers=(b.layers||[]).map(a._create);this._identifyRefLayers()}a.prototype._identifyRefLayers=function(){for(var b=[],a=[],g=0,k=0,e=this.layers;k<e.length;k++){var c=e[k];if(1===c.type){var d=c,h=c.sourceLayer,h=h+("|"+JSON.stringify(c.minzoom)),h=h+("|"+JSON.stringify(c.maxzoom)),h=
h+("|"+JSON.stringify(c.filter));if(d.hasDataDrivenFill||d.hasDataDrivenOutline)h+="|"+JSON.stringify(g);b.push({key:h,layer:c})}2===c.type&&(d=c,h=c.sourceLayer,h+="|"+JSON.stringify(c.minzoom),h+="|"+JSON.stringify(c.maxzoom),h+="|"+JSON.stringify(c.filter),h+="|"+JSON.stringify(c.layout&&c.layout["line-cap"]),h+="|"+JSON.stringify(c.layout&&c.layout["line-join"]),d.hasDataDrivenLine&&(h+="|"+JSON.stringify(g)),a.push({key:h,layer:c}));++g}this._assignRefLayers(b);this._assignRefLayers(a)};a.prototype._assignRefLayers=
function(b){b.sort(function(c,e){return c.key<e.key?-1:c.key>e.key?1:0});for(var a,g,k=b.length,e=0;e<k;e++){var c=b[e];if(c.key===a)c.layer.refLayerId=g;else if(a=c.key,g=c.layer.id,1===c.layer.type&&!c.layer.getPaintProperty("fill-outline-color"))for(var d=e+1;d<k;d++){var h=b[d];if(h.key===a){if(h.layer.getPaintProperty("fill-outline-color")){b[e]=h;b[d]=c;g=h.layer.id;break}}else break}}};a._create=function(b,a,g){a=1-1/(g.length+1)*(1+a);switch(b.type){case "background":return new d.BackgroundStyleLayer(0,
b,a);case "fill":return new d.FillStyleLayer(1,b,a);case "line":return new d.LineStyleLayer(2,b,a);case "symbol":return new d.SymbolStyleLayer(3,b,a);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new d.CircleStyleLayer(4,b,a)}throw Error("Unknown vector tile layer");};return a}()})},"esri/views/vectorTiles/style/StyleLayer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./Filter ./StyleDefinition ./StyleProperty".split(" "),
function(m,f,h,d,a,b,n){Object.defineProperty(f,"__esModule",{value:!0});m=function(){function g(a,e,c){this.type=a;this.id=e.id;this.source=e.source;this.sourceLayer=e["source-layer"];this.minzoom=e.minzoom;this.maxzoom=e.maxzoom;this.filter=e.filter;this.layout=e.layout;this.paint=e.paint;this.z=c;switch(a){case 0:this._layoutDefinition=b.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=b.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=b.StyleDefinition.fillLayoutDefinition;
this._paintDefinition=b.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=b.StyleDefinition.lineLayoutDefinition;this._paintDefinition=b.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=b.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=b.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=b.StyleDefinition.circleLayoutDefinition,this._paintDefinition=b.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);
this._paintProperties=this._parsePaint(this.paint)}g.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=a.createFilter(this.filter)};g.prototype.getLayoutProperty=function(b){var e=this._layoutProperties;if(e)return e[b]};g.prototype.getPaintProperty=function(b){var e=this._paintProperties;if(e)return e[b]};g.prototype.getLayoutValue=function(b,e,c){var a,g=this._layoutProperties;g&&(g=g[b])&&(a=g.getValue(e,c));b=this._layoutDefinition[b];
void 0===a&&(a=b["default"]);"enum"===b.type&&(a=b.values.indexOf(a));return a};g.prototype.getPaintValue=function(b,e,c){var a,g=this._paintProperties;g&&(g=g[b])&&(a=g.getValue(e,c));b=this._paintDefinition[b];void 0===a&&(a=b["default"]);"enum"===b.type&&(a=b.values.indexOf(a));return a};g.prototype._parseLayout=function(b){var e={},c;for(c in b){var a=this._layoutDefinition[c];a&&(e[c]=new n(c,a,b[c]))}return e};g.prototype._parsePaint=function(b){var e={},c;for(c in b){var a=this._paintDefinition[c];
a&&(e[c]=new n(c,a,b[c]))}return e};return g}();f.StyleLayer=m;d=function(b){function a(e,c,a){return b.call(this,e,c,a)||this}h(a,b);return a}(m);f.BackgroundStyleLayer=d;d=function(b){function a(e,c,a){e=b.call(this,e,c,a)||this;c=e.getPaintProperty("fill-color");e.hasDataDrivenColor=c?c.isDataDriven:!1;c=e.getPaintProperty("fill-opacity");e.hasDataDrivenOpacity=c?c.isDataDriven:!1;e.hasDataDrivenFill=e.hasDataDrivenColor||e.hasDataDrivenOpacity;c=e.getPaintProperty("fill-outline-color");e.outlineUsesFillColor=
!c;e.hasDataDrivenOutlineColor=c?c.isDataDriven:!1;e.hasDataDrivenOutline=(c?e.hasDataDrivenOutlineColor:e.hasDataDrivenColor)||e.hasDataDrivenOpacity;return e}h(a,b);return a}(m);f.FillStyleLayer=d;d=function(b){function a(e,c,a){e=b.call(this,e,c,a)||this;c=e.getPaintProperty("line-color");e.hasDataDrivenColor=c?c.isDataDriven:!1;c=e.getPaintProperty("line-opacity");e.hasDataDrivenOpacity=c?c.isDataDriven:!1;c=e.getPaintProperty("line-width");e.hasDataDrivenWidth=c?c.isDataDriven:!1;e.hasDataDrivenLine=
e.hasDataDrivenColor||e.hasDataDrivenOpacity||e.hasDataDrivenWidth;return e}h(a,b);return a}(m);f.LineStyleLayer=d;d=function(a){function b(b,c,g){b=a.call(this,b,c,g)||this;c=b.getPaintProperty("icon-color");b.hasDataDrivenIconColor=c?c.isDataDriven:!1;c=b.getPaintProperty("icon-opacity");b.hasDataDrivenIconOpacity=c?c.isDataDriven:!1;c=b.getLayoutProperty("icon-size");b.hasDataDrivenIconSize=c?c.isDataDriven:!1;b.hasDataDrivenIcon=b.hasDataDrivenIconColor||b.hasDataDrivenIconOpacity||b.hasDataDrivenIconSize;
c=b.getPaintProperty("text-color");b.hasDataDrivenTextColor=c?c.isDataDriven:!1;c=b.getPaintProperty("text-opacity");b.hasDataDrivenTextOpacity=c?c.isDataDriven:!1;c=b.getLayoutProperty("text-size");b.hasDataDrivenTextSize=c?c.isDataDriven:!1;b.hasDataDrivenText=b.hasDataDrivenTextColor||b.hasDataDrivenTextOpacity||b.hasDataDrivenTextSize;return b}h(b,a);return b}(m);f.SymbolStyleLayer=d;m=function(b){function a(a,c,g){a=b.call(this,a,c,g)||this;c=a.getPaintProperty("circle-radius");a.hasDataDrivenRadius=
c?c.isDataDriven:!1;c=a.getPaintProperty("circle-color");a.hasDataDrivenColor=c?c.isDataDriven:!1;c=a.getPaintProperty("circle-opacity");a.hasDataDrivenOpacity=c?c.isDataDriven:!1;c=a.getPaintProperty("circle-stroke-width");a.hasDataDrivenStrokeWidth=c?c.isDataDriven:!1;c=a.getPaintProperty("circle-stroke-color");a.hasDataDrivenStrokeColor=c?c.isDataDriven:!1;c=a.getPaintProperty("circle-stroke-opacity");a.hasDataDrivenStrokeOpacity=c?c.isDataDriven:!1;c=a.getPaintProperty("circle-blur");a.hasDataDrivenBlur=
c?c.isDataDriven:!1;return a}h(a,b);return a}(m);f.CircleStyleLayer=m;m=function(){return function(b,a,e){this.cap=b.getLayoutValue("line-cap",a,e);this.join=b.getLayoutValue("line-join",a,e);this.miterLimit=b.getLayoutValue("line-miter-limit",a,e);this.roundLimit=b.getLayoutValue("line-round-limit",a,e)}}();f.LineLayout=m;m=function(){return function(b,a,e,c){this.allowOverlap=b.getLayoutValue("icon-allow-overlap",a,c);this.ignorePlacement=b.getLayoutValue("icon-ignore-placement",a,c);this.optional=
b.getLayoutValue("icon-optional",a,c);this.rotationAlignment=b.getLayoutValue("icon-rotation-alignment",a,c);this.size=b.getLayoutValue("icon-size",a,c);this.rotate=b.getLayoutValue("icon-rotate",a,c);this.padding=b.getLayoutValue("icon-padding",a,c);this.keepUpright=b.getLayoutValue("icon-keep-upright",a,c);this.offset=b.getLayoutValue("icon-offset",a,c);2===this.rotationAlignment&&(this.rotationAlignment=e?0:1)}}();f.IconLayout=m;m=function(){return function(b,a,e,c){this.allowOverlap=b.getLayoutValue("text-allow-overlap",
a,c);this.ignorePlacement=b.getLayoutValue("text-ignore-placement",a,c);this.optional=b.getLayoutValue("text-optional",a,c);this.rotationAlignment=b.getLayoutValue("text-rotation-alignment",a,c);this.fontArray=b.getLayoutValue("text-font",a,c);this.maxWidth=b.getLayoutValue("text-max-width",a,c);this.lineHeight=b.getLayoutValue("text-line-height",a,c);this.letterSpacing=b.getLayoutValue("text-letter-spacing",a,c);this.justify=b.getLayoutValue("text-justify",a,c);this.anchor=b.getLayoutValue("text-anchor",
a,c);this.maxAngle=b.getLayoutValue("text-max-angle",a,c);this.size=b.getLayoutValue("text-size",a,c);this.rotate=b.getLayoutValue("text-rotate",a,c);this.padding=b.getLayoutValue("text-padding",a,c);this.keepUpright=b.getLayoutValue("text-keep-upright",a,c);this.transform=b.getLayoutValue("text-transform",a,c);this.offset=b.getLayoutValue("text-offset",a,c);2===this.rotationAlignment&&(this.rotationAlignment=e?0:1)}}();f.TextLayout=m})},"esri/views/vectorTiles/style/Filter":function(){define(["require",
"exports"],function(m,f){return function(){function h(d,a,b){this._op=d;"$type"===a?(this._val=b instanceof Array?b.map(function(b){return h._types.indexOf(b)}):h._types.indexOf(b),this._op+=11):(this._key=a,this._val=b)}h.prototype.filter=function(d){switch(this._op){case 0:return this._val;case 1:return d.values[this._key]===this._val;case 2:return d.values[this._key]!==this._val;case 3:return d.values[this._key]<this._val;case 4:return d.values[this._key]>this._val;case 5:return d.values[this._key]<=
this._val;case 6:return d.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(d.values[this._key]);case 8:return-1===this._val.indexOf(d.values[this._key]);case 9:for(var a=0,b=this._val;a<b.length;a++){var h=b[a];if(h.filter(d))return!0}return!1;case 10:a=0;for(b=this._val;a<b.length;a++)if(h=b[a],!h.filter(d))return!1;return!0;case 11:a=0;for(b=this._val;a<b.length;a++)if(h=b[a],h.filter(d))return!1;return!0;case 12:return d.type===this._val;case 13:return d.type!==this._val;case 14:return d.type<
this._val;case 15:return d.type>this._val;case 16:return d.type>=this._val;case 17:return d.type<=this._val;case 18:return-1!==this._val.indexOf(d.type);case 19:return-1===this._val.indexOf(d.type)}};h.createFilter=function(d){if(!d)return new h(0,void 0,!0);var a=d[0];if(1>=d.length)return new h(0,void 0,"any"!==a);switch(a){case "\x3d\x3d":return new h(1,d[1],d[2]);case "!\x3d":return new h(2,d[1],d[2]);case "\x3e":return new h(4,d[1],d[2]);case "\x3c":return new h(3,d[1],d[2]);case "\x3e\x3d":return new h(6,
d[1],d[2]);case "\x3c\x3d":return new h(5,d[1],d[2]);case "in":return new h(7,d[1],d.slice(2));case "!in":return new h(8,d[1],d.slice(2));case "any":return new h(9,void 0,d.slice(1).map(h.createFilter.bind(this)));case "all":return new h(10,void 0,d.slice(1).map(h.createFilter.bind(this)));case "none":return new h(11,void 0,d.slice(1).map(h.createFilter.bind(this)));default:throw Error("invalid operator: "+a);}};h._types=["Unknown","Point","LineString","Polygon"];return h}()})},"esri/views/vectorTiles/style/StyleDefinition":function(){define(["require",
"exports"],function(m,f){Object.defineProperty(f,"__esModule",{value:!0});m=function(){function h(){}h.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};h.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};h.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"line-cap":{type:"enum",values:["butt","round","square"],default:"butt"},"line-join":{type:"enum",values:["bevel",
"round","miter"],default:"miter"},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}};h.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"symbol-placement":{type:"enum",values:["point","line"],default:"point"},"symbol-spacing":{type:"number",minimum:1,default:250},"symbol-avoid-edges":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean",default:!1},"icon-ignore-placement":{type:"boolean",
default:!1},"icon-optional":{type:"boolean",default:!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"icon-size":{type:"number",minimum:0,default:1},"icon-rotate":{type:"number",default:0},"icon-padding":{type:"number",minimum:0,default:2},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},
"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,default:16},"text-max-width":{type:"number",minimum:0,default:10},"text-line-height":{type:"number",default:1.2},"text-letter-spacing":{type:"number",default:0},"text-justify":{type:"enum",values:["left","center","right"],default:"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:"center"},
"text-max-angle":{type:"number",minimum:0,default:45},"text-rotate":{type:"number",default:0},"text-padding":{type:"number",minimum:0,default:2},"text-keep-upright":{type:"boolean",default:!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:"none"},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-allow-overlap":{type:"boolean",default:!1},"text-ignore-placement":{type:"boolean",default:!1},"text-optional":{type:"boolean",default:!1}};h.circleLayoutDefinition=
{visibility:{type:"enum",values:["visible","none"],default:"visible"}};h.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-color":{type:"color",default:[0,0,0,1]},"background-pattern":{type:"string"}};h.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-translate":{type:"array",
value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"fill-pattern":{type:"string"}};h.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-color":{type:"color",default:[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"line-width":{type:"number",minimum:0,default:1},"line-gap-width":{type:"number",
minimum:0,default:0},"line-offset":{type:"number",default:0},"line-blur":{type:"number",minimum:0,default:0},"line-dasharray":{type:"array",value:"number",default:[]},"line-pattern":{type:"string"}};h.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-translate":{type:"array",
value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-halo-blur":{type:"number",minimum:0,default:0},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map",
"viewport"],default:"map"}};h.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}};h.circlePaintDefinition=
{"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-color":{type:"color",default:[0,0,0,1]},"circle-blur":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",
minimum:0,maximum:1,default:1}};return h}();f.StyleDefinition=m})},"esri/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(m,f,h,d){return function(){function a(b,d,g){this.isDataDriven=!1;switch(d.type){case "number":b=!0;break;case "color":b=!0;g=a._parseColor(g);break;case "array":b="number"===d.value;break;default:b=!1}null==g&&(g=d.default);b&&"interval"===g.type&&(b=!1);var h=g&&g.stops&&0<g.stops.length;if(h)for(var e=
0,c=g.stops;e<c.length;e++){var n=c[e];n[1]=this._validate(n[1],d)}if(this.isDataDriven=g&&!!g.property)if(void 0!==g.default&&(g.default=this._validate(g.default,d)),h)switch(g.type){case "identity":this.getValue=this._buildIdentity(g,d);break;case "categorical":this.getValue=this._buildCategorical(g,d);break;default:this.getValue=b?this._buildInterpolate(g,d):this._buildInterval(g,d)}else this.getValue=this._buildIdentity(g,d);else h?this.getValue=b?this._buildZoomInterpolate(g):this._buildZoomInterval(g):
(g=this._validate(g,d),this.getValue=this._buildSimple(g))}a.prototype._validate=function(b,a){if("number"===a.type){if(b<a.minimum)return a.minimum;if(b>a.maximum)return a.maximum}return b};a.prototype._buildSimple=function(b){return function(){return b}};a.prototype._buildIdentity=function(b,d){var g=this;return function(h,e){var c;e&&(c=e.values[b.property],"color"===d.type&&(c=a._parseColor(c)));void 0===c&&(c=b.default);return void 0!==c?g._validate(c,d):d.default}};a.prototype._buildCategorical=
function(b,a){var d=this;return function(g,e){var c;e&&(c=e.values[b.property]);c=d._categorical(c,b.stops);return void 0!==c?c:void 0!==b.default?b.default:a.default}};a.prototype._buildInterval=function(a,d){var b=this;return function(g,e){var c;e&&(c=e.values[a.property]);return"number"===typeof c?b._interval(c,a.stops):void 0!==a.default?a.default:d.default}};a.prototype._buildInterpolate=function(a,d){var b=this;return function(g,e){var c;e&&(c=e.values[a.property]);return"number"===typeof c?
b._interpolate(c,a.stops,a.base||1):void 0!==a.default?a.default:d.default}};a.prototype._buildZoomInterpolate=function(a){var b=this;return function(d){return b._interpolate(d,a.stops,a.base||1)}};a.prototype._buildZoomInterval=function(a){var b=this;return function(d){return b._interval(d,a.stops)}};a.prototype._categorical=function(a,d){for(var b=d.length,h=0;h<b;h++)if(d[h][0]===a)return d[h][1]};a.prototype._interval=function(a,d){for(var b=d.length,h=0,e=0;e<b;e++)if(d[e][0]<=a)h=e;else break;
return d[h][1]};a.prototype._interpolate=function(a,h,g){for(var b,e,c=h.length,f=0;f<c;f++){var m=h[f];if(m[0]<=a)b=m;else{e=m;break}}if(b&&e){f=e[0]-b[0];a-=b[0];g=1===g?a/f:(Math.pow(g,a)-1)/(Math.pow(g,f)-1);if(Array.isArray(b[1])){b=b[1];e=e[1];a=[];for(f=0;f<b.length;f++)a.push(d.interpolate(b[f],e[f],g));return a}return d.interpolate(b[1],e[1],g)}if(b)return b[1];if(e)return e[1]};a._isEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};a._parseColor=function(b){if(Array.isArray(b))return b;
if("string"===typeof b){if(b=new h(b),!this._isEmpty(b))return h.toUnitRGBA(b)}else return b&&b.default&&(b.default=a._parseColor(b.default)),b&&b.stops&&(b.stops=b.stops.map(function(b){return[b[0],a._parseColor(b[1])]})),b};return a}()})},"esri/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(m,f){function h(a,b){a%=b;return 0<=a?a:a+b}Object.defineProperty(f,"__esModule",{value:!0});f.C_INFINITY=Number.POSITIVE_INFINITY;f.C_PI=Math.PI;f.C_2PI=2*f.C_PI;f.C_PI_BY_2=
f.C_PI/2;f.C_RAD_TO_256=128/f.C_PI;f.C_256_TO_RAD=f.C_PI/128;f.C_DEG_TO_256=256/360;f.C_DEG_TO_RAD=f.C_PI/180;f.C_SQRT2=1.414213562;f.C_SQRT2_INV=1/f.C_SQRT2;var d=1/Math.LN2;f.positiveMod=h;f.radToByte=function(a){return h(a*f.C_RAD_TO_256,256)};f.degToByte=function(a){return h(a*f.C_DEG_TO_256,256)};f.log2=function(a){return Math.log(a)*d};f.sqr=function(a){return a*a};f.clamp=function(a,b,d){return Math.min(Math.max(a,b),d)};f.interpolate=function(a,b,d){return a*(1-d)+b*d};f.between=function(a,
b,d){return a>=b&&a<=d||a>=d&&a<=b}})},"*noref":1}});
define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../request ../core/Error ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/Extent ../geometry/SpatialReference ./TiledLayer ./mixins/ArcGISCachedService ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/ScaleRangeLayer ./support/TileInfo ./support/TilemapCache ./support/vectorTileLayerLoader ../portal/support/jsonContext ../views/vectorTiles/SchemaHelper ../views/vectorTiles/style/StyleRepository".split(" "),function(m,
f,h,d,a,b,n,g,k,e,c,l,r,t,q,p,x,y,z,u,v,A,B,w,C){return function(g){function f(a,b){a=g.call(this)||this;a.capabilities=null;a.currentStyleInfo=null;a.fullExtent=null;a.style=null;a.operationalLayerType="VectorTileLayer";a.tileInfo=null;a.tilemapCache=null;a.type="vector-tile";a.url=null;return a}d(f,g);f.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?h({url:a},b):a};f.prototype.load=function(){var a=this,c=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1}).then(function(){if(a.portalItem&&
a.portalItem.id){var c=a.portalItem.itemUrl+"/resources/styles/root.json";return b(c,{query:{f:"json"}}).then(function(b){b.data&&a.read({url:c},B.createForItem(a.portalItem))})}}).always(function(){return a.loadStyle()});this.addResolvingPromise(c);return this.when()};Object.defineProperty(f.prototype,"attributionDataUrl",{get:function(){var a=this.currentStyleInfo;return(a=a&&a.serviceUrl&&c.urlToObject(a.serviceUrl))?this._getDefaultAttribution(a.path):null},enumerable:!0,configurable:!0});f.prototype.readCapabilities=
function(a,b){return{supportsExportTiles:!!(b&&b.hasOwnProperty("exportTilesAllowed")&&b.exportTilesAllowed),supportsTileMapIndexing:b.capabilities?-1!==b.capabilities.toLowerCase().indexOf("tilemap"):!1}};Object.defineProperty(f.prototype,"parsedUrl",{get:function(){return this.serviceUrl?e.urlToObject(this.serviceUrl):null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"serviceUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null},enumerable:!0,
configurable:!0});Object.defineProperty(f.prototype,"spatialReference",{get:function(){return this.tileInfo&&this.tileInfo.spatialReference||null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"styleUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null},enumerable:!0,configurable:!0});f.prototype.writeStyleUrl=function(a,b){a&&c.isProtocolRelative(a)&&(a="https:"+a);b.styleUrl=a};f.prototype.readTileIndexType=function(a,b){return b.type};f.prototype.readTileIndexUrl=
function(a,b){return c.join(this.serviceUrl,b.tileMap)};f.prototype.readTilemapCache=function(a,b){return b.capabilities&&-1<b.capabilities.indexOf("Tilemap")?new v({layer:this}):null};f.prototype.readTileServers=function(a,b){var d=this;a=b.tiles;this.serviceUrl&&a.forEach(function(a,b,e){e[b]=c.join(d.serviceUrl,a)});return a};f.prototype.readVersion=function(a,b){return b.version?parseFloat(b.version):parseFloat(b.currentVersion)};f.prototype.readCompatibleTileInfo256=function(a,b){return u.fromJSON(w.create256x256CompatibleTileInfo(b.tileInfo))};
f.prototype.readCompatibleTileInfo512=function(a,b){return u.fromJSON(w.create512x512CompatibleTileInfo(b.tileInfo))};f.prototype.loadStyle=function(a){a=a||this.style||this.url;if(this._loadingPromise&&"string"===typeof a&&this.url===a)return this._loadingPromise;var b=this._loadingPromise;this._loadingPromise=this._getSourceAndStyle(a);b&&!b.isFulfilled()&&b.cancel();return this._loadingPromise};f.prototype.getTileUrl=function(a,b,c){var d=this.tileServers[b%this.tileServers.length];return d=d.replace(/\{z\}/gi,
a.toString()).replace(/\{y\}/gi,b.toString()).replace(/\{x\}/gi,c.toString())};f.prototype.write=function(a,b){return b&&b.origin&&!this.styleUrl?(b.messages&&b.messages.push(new n("vectortilelayer:unsupported","VectorTileLayer ("+this.title+", "+this.id+") with style defined by JSON only are not supported",{layer:this})),null):this.inherited(arguments,[a,b])};f.prototype.importLayerViewModule=function(a){switch(a.type){case "2d":return k.create(function(a){return m(["../views/2d/layers/VectorTileLayerView2D"],
a)});case "3d":return k.create(function(a){return m(["../views/3d/layers/VectorTileLayerView3D"],a)})}};f.prototype._getSourceAndStyle=function(a){var b=this;return a?A.loadMetadata(a).then(function(c){b._set("currentStyleInfo",{serviceUrl:c.serviceUrl,styleUrl:c.styleUrl,spriteUrl:c.spriteUrl,glyphsUrl:c.glyphsUrl,style:c.style,layerDefinition:c.layerDefinition});"string"===typeof a?(b.url=a,b.style=null):(b.url=null,b.style=a);b._set("styleRepository",new C(c.style,c));b.read(c.layerDefinition)}):
k.reject(Error("invalid style!"))};f.prototype._getDefaultAttribution=function(a){var b=a.match(/^https?:\/\/(basemaps|basemapsbeta|basemapsdev)\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);if(b&&(a=b[3]&&b[3].toLowerCase()))for(var b=b[2]||"",d=0,e=["World_Basemap","World_Basemap_v2","World_Basemap_GCS_v2","World_Basemap_WGS84"];d<e.length;d++){var f=e[d];if(-1<f.toLowerCase().indexOf(a))return c.normalize("//static.arcgis.com/attribution/Vector"+b+"/"+
f)}};a([l.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],f.prototype,"attributionDataUrl",null);a([l.property({readOnly:!0})],f.prototype,"capabilities",void 0);a([l.reader("capabilities",["exportTilesAllowed","capabilities"])],f.prototype,"readCapabilities",null);a([l.property({readOnly:!0})],f.prototype,"currentStyleInfo",void 0);a([l.property({type:r,readOnly:!0})],f.prototype,"fullExtent",void 0);a([l.property()],f.prototype,"style",void 0);a([l.property({readOnly:!0,dependsOn:["serviceUrl"]})],
f.prototype,"parsedUrl",null);a([l.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],f.prototype,"serviceUrl",null);a([l.property({type:t,dependsOn:["tileInfo"],readOnly:!0})],f.prototype,"spatialReference",null);a([l.property({readOnly:!0})],f.prototype,"styleRepository",void 0);a([l.property({type:String,readOnly:!0,dependsOn:["currentStyleInfo"],json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],f.prototype,"styleUrl",null);a([l.writer(["portal-item",
"web-document"],"styleUrl")],f.prototype,"writeStyleUrl",null);a([l.property({readOnly:!0})],f.prototype,"tileIndexType",void 0);a([l.reader("tileIndexType",["tileIndexType","type"])],f.prototype,"readTileIndexType",null);a([l.property({readOnly:!0})],f.prototype,"tileIndexUrl",void 0);a([l.reader("tileIndexUrl",["tileIndexUrl","tileMap"])],f.prototype,"readTileIndexUrl",null);a([l.property({readOnly:!0,type:u})],f.prototype,"tileInfo",void 0);a([l.property({readOnly:!0,type:v})],f.prototype,"tilemapCache",
void 0);a([l.reader("tilemapCache",["capabilities"])],f.prototype,"readTilemapCache",null);a([l.property({readOnly:!0})],f.prototype,"tileServers",void 0);a([l.reader("tileServers",["tiles"])],f.prototype,"readTileServers",null);a([l.property({json:{read:!1},readOnly:!0,value:"vector-tile"})],f.prototype,"type",void 0);a([l.property({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],f.prototype,"url",void 0);a([l.property({readOnly:!0})],
f.prototype,"version",void 0);a([l.reader("version",["version","currentVersion"])],f.prototype,"readVersion",null);a([l.property({readOnly:!0})],f.prototype,"compatibleTileInfo256",void 0);a([l.reader("compatibleTileInfo256",["tileInfo"])],f.prototype,"readCompatibleTileInfo256",null);a([l.property({readOnly:!0})],f.prototype,"compatibleTileInfo512",void 0);a([l.reader("compatibleTileInfo512",["tileInfo"])],f.prototype,"readCompatibleTileInfo512",null);return f=a([l.subclass("esri.layers.VectorTileLayer")],
f)}(l.declared(q,x,y,z,g,p))});