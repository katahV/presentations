// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/workers":function(){define(["require","exports","./workers/workers"],function(n,g,b){Object.defineProperty(g,"__esModule",{value:!0});for(var a in b)g.hasOwnProperty(a)||(g[a]=b[a])})},"esri/core/workers/workers":function(){define("require exports dojo/sniff dojo/promise/all ../Logger ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),function(n,g,b,a,f,d,k,e,c){function l(){if(q)return q;for(var b=h+m,d=[],e=function(a){var b=c.create(a).then(function(b){return t[a]=
b});d.push(b)},k=0;k<b;k++)e(k);return q=a(d).then(function(){})}Object.defineProperty(g,"__esModule",{value:!0});g.Connection=k;g.RemoteClient=e;(k=b("host-browser")?navigator.hardwareConcurrency:0)||(k=b("safari")&&b("mac")||b("trident")?8:2);var h=b("esri-workers-debug")?1:Math.max(1,Math.ceil(k/2)),m=b("esri-workers-debug")?1:Math.max(1,Math.floor(k/2)),p=f.getLogger("esri.core.workers"),r=0,t=[];g.initialize=function(){l()};g.open=function(a,b,c){void 0===b&&(b={});if(Array.isArray(a))return new g.Connection(a.map(function(a){return new g.RemoteClient(a,
b.client)}));if("string"!==typeof a){p.warn("workers-open:signature-deprecated","DEPRECATED: workers.open() changed signature.");var e=a;a=b;b={client:e,strategy:c?"dedicated":"distributed"}}var k=b.strategy||"distributed";return"local"===k?d.create(function(b){n([a],function(a){b(g.RemoteClient.connect(a))})}).then(function(a){return new g.Connection([new g.RemoteClient(a,b.client)])}):l().then(function(){if("dedicated"===k){var c=h+r++;r%=m;return t[c].open(a).then(function(a){return new g.Connection([new g.RemoteClient(a,
b.client)])})}return d.all(t.map(function(b){return b.open(a)})).then(function(a){return new g.Connection(a.map(function(a){return new g.RemoteClient(a,b.client)}))})})};g.terminate=function(){for(var a=0;a<t.length;a++)t[a]&&t[a].terminate();t.length=0};var q})},"esri/core/workers/Connection":function(){define(["require","exports","../promiseUtils"],function(n,g,b){return function(){function a(a){this._clientIdx=0;this._clients=a}a.prototype.broadcast=function(a,b,k){for(var d=[],c=0,f=this._clients;c<
f.length;c++)d.push(f[c].invoke(a,b,k));return d};a.prototype.close=function(){for(var a=0,b=this._clients;a<b.length;a++)b[a].close();this._clients=[]};a.prototype.invoke=function(a,d,k,e){var c=e&&e.client;if(!this._clients||!this._clients.length)return b.reject(Error("Connection closed"));null!=c&&-1!==this._clients.indexOf(c)||this._clients.some(function(a){return a.isBusy()?!1:(c=a,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,c=this._clients[this._clientIdx]);a=c.invoke(a,
d,k);e&&(e.client=c);return a};a.prototype.openPorts=function(){return b.all(this._clients.map(function(a){return a.openPort()}))};return a}()})},"esri/core/workers/RemoteClient":function(){define("require exports dojo/Deferred ../Error ../promiseUtils ./utils".split(" "),function(n,g,b,a,f,d){function k(a,b){a["delete"](b)}var e=d.MessageType.CLOSE,c=d.MessageType.CANCEL,l=d.MessageType.INVOKE,h=d.MessageType.RESPONSE,m=d.MessageType.OPEN_PORT,p=function(){function a(a){this._timer=null;this._cancelledJobIds=
new Set;this._invokeMessages=[];this._invoke=a;this._timer=null;this._process=this._process.bind(this)}a.prototype.push=function(a){a.type===d.MessageType.CANCEL?this._cancelledJobIds.add(a.jobId):(this._invokeMessages.push(a),null===this._timer&&(this._timer=setTimeout(this._process,0)))};a.prototype.clear=function(){this._invokeMessages.length=0;this._cancelledJobIds.clear();this._timer=null};a.prototype._process=function(){this._timer=null;for(var a=0,b=this._invokeMessages;a<b.length;a++){var c=
b[a];this._cancelledJobIds.has(c.jobId)||this._invoke(c)}this._cancelledJobIds.clear();this._invokeMessages.length=0};return a}();return function(){function r(a,b,c){this._outJobs=new Map;this._inJobs=new Map;this._queue=new p(this._onInvoke.bind(this));this._onMessage=this._onMessage.bind(this);this._client=b;this._port=a;this._port.addEventListener("message",this._onMessage);this._port.start();this._channel=c}r.connect=function(a){var b=new MessageChannel;a="function"===typeof a?new a:"default"in
a&&"function"===typeof a.default?new a.default:a;a.remoteClient=new r(b.port1,a,b);return b.port2};r.prototype.close=function(){this._post({type:e});this._close()};r.prototype.isBusy=function(){return 0<this._outJobs.size};r.prototype.invoke=function(a,e,h){var f=this,m=d.newJobId(),p=new b(function(){k(f._outJobs,m);f._post({type:c,jobId:m})});this._outJobs.set(m,p);this._post({type:l,jobId:m,methodName:a},e,h);return p.promise};r.prototype.openPort=function(){var a=this,e=d.newJobId(),h=new b(function(){k(a._outJobs,
e);a._post({type:c,jobId:e})});this._outJobs.set(e,h);this._post({type:m,jobId:e});return h.promise};r.prototype._close=function(){this._channel&&(this._channel=null);this._port.removeEventListener("message",this._onMessage);this._port.close();this._outJobs.forEach(function(a){a.cancel()});this._inJobs.clear();this._outJobs.clear();this._queue.clear();this._port=this._client=null};r.prototype._onMessage=function(a){if(a=d.receiveMessage(a))switch(a.type){case h:this._onResponse(a);break;case l:this._queue.push(a);
break;case c:this._onCancel(a);break;case e:this._close();break;case m:this._onOpenPort(a)}};r.prototype._onCancel=function(a){var b=this._inJobs,c=a.jobId,d=b.get(c);this._queue.push(a);d&&(k(b,c),d.cancel())};r.prototype._onInvoke=function(a){var b=this,c=a.methodName,e=a.jobId;a=a.data;var l=this._inJobs,m=this._client,p=m[c],r;try{if(!p&&c&&-1!==c.indexOf("."))for(var t=c.split("."),g=0;g<t.length-1;g++)m=m[t[g]],p=m[t[g+1]];if("function"!==typeof p)throw new TypeError(c+" is not a function");
r=p.call(m,a,this)}catch(C){this._post({type:h,jobId:e,error:d.toInvokeError(C)});return}f.isThenable(r)?(l.set(e,r),r.then(function(a){l.has(e)&&(k(l,e),b._post({type:h,jobId:e},a))}).catch(function(a){l.has(e)&&(k(l,e),a&&"cancel"===a.dojoType||b._post({type:h,jobId:e,error:d.toInvokeError(a||{message:"Error encountered at method "+c})}))})):this._post({type:h,jobId:e},r)};r.prototype._onOpenPort=function(a){var b=new MessageChannel;new r(b.port1,this._client);this._post({type:h,jobId:a.jobId},
b.port2,[b.port2])};r.prototype._onResponse=function(b){var c=b.jobId,d=b.error;b=b.data;var e=this._outJobs;if(e.has(c)){var h=e.get(c);k(e,c);d?h.reject(a.fromJSON(JSON.parse(d))):h.resolve(b)}};r.prototype._post=function(a,b,c){return d.postMessage(this._port,a,b,c)};return r}()})},"esri/core/workers/utils":function(){define(["require","exports","dojo/has"],function(n,g,b){function a(a){return a&&"object"===typeof a&&("result"in a||"transferList"in a)}Object.defineProperty(g,"__esModule",{value:!0});
(function(a){a[a.HANDSHAKE=0]="HANDSHAKE";a[a.CONFIGURE=1]="CONFIGURE";a[a.CONFIGURED=2]="CONFIGURED";a[a.OPEN=3]="OPEN";a[a.OPENED=4]="OPENED";a[a.RESPONSE=5]="RESPONSE";a[a.INVOKE=6]="INVOKE";a[a.CANCEL=7]="CANCEL";a[a.CLOSE=8]="CLOSE";a[a.OPEN_PORT=9]="OPEN_PORT"})(g.MessageType||(g.MessageType={}));var f=0;g.newJobId=function(){return f++};g.isTranferableResult=a;g.toInvokeError=function(a){return a?a.toJSON?JSON.stringify(a):JSON.stringify({name:a.name,message:a.message,details:a.details,stack:a.stack}):
null};g.postMessage=function(d,k,e,c){2===arguments.length||void 0===e&&void 0===c?d.postMessage(k):(b("esri-workers-supports-transfer-arraybuffer")||(c?(c=c.filter(function(a){return!(a instanceof ArrayBuffer)}),c.length||(c=null)):a(e)&&e.transferList&&(e.transferList=e.transferList.filter(function(a){return!(a instanceof ArrayBuffer)}),e.transferList.length||(e.transferList=null))),c?(k.data=e,d.postMessage(k,c)):a(e)?(k.data=e.result,e.transferList?d.postMessage(k,e.transferList):d.postMessage(k)):
(k.data=e,d.postMessage(k)))};g.receiveMessage=function(a){return a?(a=a.data)?"string"===typeof a?JSON.parse(a):a:null:null}})},"esri/core/workers/WorkerOwner":function(){define("require exports dojo/Deferred ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),function(n,g,b,a,f,d,k,e,c){var l=d.getLogger("esri.core.workers"),h=e.MessageType.CANCEL,m=e.MessageType.INVOKE,p=e.MessageType.OPEN,r=e.MessageType.OPENED,t=e.MessageType.RESPONSE;return function(){function d(a,
b){this._outJobs=new Map;this._inJobs=new Map;this.worker=a;this.id=b;a.addEventListener("message",this._onMessage.bind(this));a.addEventListener("error",function(a){a.preventDefault();l.error(a)})}d.create=function(a){return c.createWorker().then(function(b){return new d(b,a)})};d.prototype.terminate=function(){this.worker.terminate()};d.prototype.open=function(a){var c=this,d=e.newJobId(),k=new b(function(a){c._outJobs["delete"](d);c._post({type:h,jobId:d})});this._outJobs.set(d,k);this._post({type:p,
jobId:d,modulePath:a});return k.promise};d.prototype._onMessage=function(a){if(a=e.receiveMessage(a))switch(a.type){case r:case t:this._onResponse(a);break;case h:this._onCancel(a);break;case m:this._onInvoke(a)}};d.prototype._onCancel=function(a){(a=this._inJobs.get(a.jobId))&&a.cancel()};d.prototype._onInvoke=function(b){var c=this,d=b.methodName,h=b.jobId;b=b.data;var f=this._inJobs,l=a.workerMessages[d],m;try{if("function"!==typeof l)throw new TypeError(d+" is not a function");m=l.call(null,b)}catch(z){this._post({type:t,
jobId:h,error:e.toInvokeError(z)});return}k.isThenable(m)?(f.set(h,m),m.then(function(a){f["delete"](h);c._post({type:t,jobId:h},a)}).catch(function(a){f["delete"](h);a||(a={message:"Error encountered at method"+d});a.dojoType&&"cancel"===a.dojoType||c._post({type:t,jobId:h,error:e.toInvokeError(a)})})):this._post({type:t,jobId:h},m)};d.prototype._onResponse=function(a){var b=a.jobId,c=a.error;a=a.data;var d=this._outJobs.get(b);d&&(this._outJobs["delete"](b),c?d.reject(f.fromJSON(JSON.parse(c))):
d.resolve(a))};d.prototype._post=function(a,b,c){return e.postMessage(this.worker,a,b,c)};return d}()})},"esri/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper dojo/_base/kernel ../../config ../../request ../Logger ../promiseUtils ../sniff ../urlUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),function(n,g,b,a,f,d,k,e,c,l,h,m,p){function r(){return B?B:B=e.create(function(a){var b=new MessageChannel,d=b.port1,e=b.port2,h=function(b){c.add("esri-workers-supports-transfer-arraybuffer",
Number(null!=b.data));d.removeEventListener("message",h);d.close();e.close();c("esri-workers-supports-transfer-arraybuffer")||x.warn("This browser doesn't support ArrayBuffer transfer.");a()};d.addEventListener("message",h);d.start();e.start();b=new ArrayBuffer(0);e.postMessage(b,[b])})}function t(d){return r().then(function(){return e.create(function(e){function k(p){if(p=m.receiveMessage(p))switch(p.type){case A:p=d;var r=f.workers.loaderUrl||h.DEFAULT_LOADER_URL,t;null!=f["default"]?(t=b({},f),
delete t["default"],t=JSON.parse(JSON.stringify(t))):t=JSON.parse(JSON.stringify(f));var q=f.workers.loaderConfig,q=h.default({baseUrl:q.baseUrl,locale:a.locale,has:b({"esri-cors":1,"dojo-test-sniff":0,"config-deferredInstrumentation":0,"host-webworker":1,"events-keypress-typed":0,"esri-workers-supports-transfer-arraybuffer":c("esri-workers-supports-transfer-arraybuffer")},q.has),map:b({},q.map),paths:b({},q.paths),packages:q.packages||[]});p.postMessage({type:w,configure:{esriConfig:t,loaderUrl:r,
loaderConfig:q}});break;case y:d.removeEventListener("message",k),d.removeEventListener("error",l),e(d)}}function l(a){a.preventDefault();d.removeEventListener("message",k);d.removeEventListener("error",l);x.warn("Failed to create Worker. Fallback to execute module in main thread",a);d=new p;d.addEventListener("message",k);d.addEventListener("error",l)}d.addEventListener("message",k);d.addEventListener("error",l)})})}Object.defineProperty(g,"__esModule",{value:!0});var q=l.normalize(n.toUrl("./worker.js")),
u=!l.hasSameOrigin(q,location.href),x=k.getLogger("esri.core.workers"),v=null,y=m.MessageType.CONFIGURED,w=m.MessageType.CONFIGURE,A=m.MessageType.HANDSHAKE,B=null;g.createWorker=function(){if(!c("esri-workers"))return t(new p);if(!u){var a=void 0;try{a=new Worker(q)}catch(C){x.warn("Failed to create Worker. Fallback to execute module in main thread",event),a=new p}return t(a)}v||(v=d(q,{responseType:"text"}));return v.then(function(a){return new Worker(URL.createObjectURL(new Blob([a.data],{type:"text/javascript"})))}).catch(function(a){x.warn("Failed to create Worker. Fallback to execute module in main thread",
a);return new p}).then(function(a){return t(a)})}})},"esri/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper","dojo/has","../urlUtils"],function(n,g,b,a,f){Object.defineProperty(g,"__esModule",{value:!0});a=a("esri-built")?"dojo/dojo-lite.js":"dojo/dojo.js";g.DEFAULT_LOADER_URL=f.makeAbsolute(f.removeQueryParameters(n.toUrl(a)));g.DEFAULT_CONFIG={baseUrl:function(){var a=f.removeQueryParameters(n.toUrl("dojo/x.js"));return f.makeAbsolute(a.slice(0,a.length-
5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},{name:"globalize",main:"dist/globalize"},{name:"maquette",main:"dist/maquette.umd"},{name:"maquette-css-transitions",main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental",
"cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}};g.default=function(a){var d={async:a.async,isDebug:a.isDebug,locale:a.locale,baseUrl:a.baseUrl,has:b({},a.has),map:b({},a.map),packages:a.packages&&a.packages.concat()||[],paths:b({},a.paths)};a.hasOwnProperty("async")||(d.async=!0);a.hasOwnProperty("isDebug")||(d.isDebug=!1);a.baseUrl||(d.baseUrl=g.DEFAULT_CONFIG.baseUrl);g.DEFAULT_CONFIG.packages.forEach(function(a){a:{for(var c=d.packages,e=0;e<c.length;e++)if(c[e].name===a.name)break a;a=b({},
a);e=f.removeQueryParameters(n.toUrl(a.name+"/x.js"));e=e.slice(0,e.length-5);a.location=f.makeAbsolute(e);c.push(a)}});a=d.map=d.map||{};for(var e=0,c=Object.keys(g.DEFAULT_CONFIG.map);e<c.length;e++){var l=c[e];a[l]||(a[l]=g.DEFAULT_CONFIG.map[l])}return d}})},"esri/core/workers/WorkerFallback":function(){define(["require","exports","dojo/has","../global","./utils"],function(n,g,b,a,f){var d=function(){return function(){var a=this,b=document.createDocumentFragment();["addEventListener","dispatchEvent",
"removeEventListener"].forEach(function(c){a[c]=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];return b[c].apply(b,a)}})}}(),k=a.MutationObserver||a.WebKitMutationObserver,e=function(){var b;if(a.process&&a.process.nextTick)b=function(b){a.process.nextTick(b)};else if(a.Promise)b=function(b){a.Promise.resolve().then(b)};else if(k){var d=[],e=document.createElement("div");(new k(function(){for(;0<d.length;)d.shift()()})).observe(e,{attributes:!0});b=function(a){d.push(a);e.setAttribute("queueStatus",
"1")}}return b}();return function(){function a(){this._dispatcher=new d;this._isInitialized=!1;this._workerPostMessage({type:f.MessageType.HANDSHAKE})}a.prototype.terminate=function(){};Object.defineProperty(a.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(a){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=a)&&this.addEventListener("message",a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"onerror",{get:function(){return this._onerrorHandler},set:function(a){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=a)&&this.addEventListener("error",a)},enumerable:!0,configurable:!0});a.prototype.postMessage=function(a,b){var c=this;e(function(){c._workerMessageHandler(new MessageEvent("message",{data:a}))})};a.prototype.dispatchEvent=function(a){return this._dispatcher.dispatchEvent(a)};a.prototype.addEventListener=function(a,b,c){this._dispatcher.addEventListener(a,
b,c)};a.prototype.removeEventListener=function(a,b,c){this._dispatcher.removeEventListener(a,b,c)};a.prototype._workerPostMessage=function(a,b){var c=this;e(function(){c.dispatchEvent(new MessageEvent("message",{data:a}))})};a.prototype._workerMessageHandler=function(a){var b=this;if(a=f.receiveMessage(a)){var c=a.jobId;switch(a.type){case f.MessageType.CONFIGURE:this._isInitialized||this._workerPostMessage({type:f.MessageType.CONFIGURED});break;case f.MessageType.OPEN:n(["esri/core/workers/RemoteClient",
a.modulePath],function(a,d){a=a.connect(d);b._workerPostMessage({type:f.MessageType.OPENED,jobId:c,data:a})})}}};return a}()})},"esri/views/BreakpointsOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper dojo/dom-class ../core/Accessor ../core/ArrayPool ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators ./DOMContainer".split(" "),function(n,g,b,a,f,d,k,e,c,l,h,m){var p={widthBreakpoint:{getValue:function(a){var b=
a.viewSize[0];a=a.breakpoints;var c=this.values;return b<=a.xsmall?c.xsmall:b<=a.small?c.small:b<=a.medium?c.medium:b<=a.large?c.large:c.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},
heightBreakpoint:{getValue:function(a){var b=a.viewSize[1];a=a.breakpoints;var c=this.values;return b<=a.xsmall?c.xsmall:b<=a.small?c.small:b<=a.medium?c.medium:b<=a.large?c.large:c.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},
orientation:{getValue:function(a){a=a.viewSize;var b=this.values;return a[1]>=a[0]?b.portrait:b.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},r={xsmall:544,small:768,medium:992,large:1200};return function(k){function m(){var a=null!==k&&k.apply(this,arguments)||this;a._breakpointsHandles=new c;a.breakpoints=r;a.orientation=null;a.widthBreakpoint=null;a.heightBreakpoint=null;return a}
b(m,k);m.prototype.initialize=function(){this._breakpointsHandles.add([l.init(this,["breakpoints","size"],this._updateClassNames)])};m.prototype.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null)};m.prototype._updateClassNames=function(){if(this.container){var a=e.acquire(),b=e.acquire(),c=!1,d,h,k;for(d in p)h=this[d],k=p[d].getValue({viewSize:this.size,breakpoints:this.breakpoints}),h!==k&&(c=!0,this[d]=k,b.push(p[d].valueToClassName[h]),
a.push(p[d].valueToClassName[k]));c&&(this._applyClassNameChanges(a,b),e.release(a),e.release(b))}};m.prototype._applyClassNameChanges=function(a,b){var c=this.container;c&&(d.remove(c,b),d.add(c,a))};m.prototype._removeActiveClassNames=function(){var a=this.container;if(a)for(var b in p)d.remove(a,p[b].valueToClassName[this[b]])};a([h.property({set:function(a){var b=this._get("breakpoints");if(a!==b){b=(b=a)&&b.xsmall<b.small&&b.small<b.medium&&b.medium<b.large;if(!b){var c=JSON.stringify(r,null,
2);console.warn("provided breakpoints are not valid, using defaults:"+c)}a=b?a:r;this._set("breakpoints",f({},a))}}})],m.prototype,"breakpoints",void 0);a([h.property()],m.prototype,"orientation",void 0);a([h.property()],m.prototype,"widthBreakpoint",void 0);a([h.property()],m.prototype,"heightBreakpoint",void 0);return m=a([h.subclass("esri.views.BreakpointsOwner")],m)}(h.declared(k,m))})},"esri/views/DOMContainer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/dom dojo/dom-construct dojo/on ../core/Accessor ../core/Evented ../core/Handles ../core/scheduling ../core/watchUtils ../core/accessorSupport/decorators ./PopupManager ./overlay/ViewOverlay ../widgets/Popup".split(" "),
function(n,g,b,a,f,d,k,e,c,l,h,m,p,r,t,q){var u=[0,0];return function(c){function e(){var a=c.call(this)||this;a._domHandles=new l;a._freqInfo={freq:16,time:750};a._overlayRenderTaskHandle=null;a.height=0;a.popup=new q({view:a});a.position=null;a.resizing=!1;a.root=null;a.surface=null;a.suspended=!0;a.ui=null;a.userContent=null;a.width=0;a.watch("cursor",function(b){var c=a.surface;c&&c.setAttribute("data-cursor",b)});a.watch("interacting",function(b){var c=a.surface;c&&c.setAttribute("data-interacting",
b.toString())});a._focusEvent=a._focusEvent.bind(a);a._blurEvent=a._blurEvent.bind(a);return a}b(e,c);e.prototype.initialize=function(){this.watch("ui",this._handleUIChange);this._wireUI(this.ui)};e.prototype.destroy=function(){this.ui.destroy();this.popup&&!this.popup.destroyed&&this.popup.destroy();this.container=null;this._domHandles.destroy()};Object.defineProperty(e.prototype,"container",{set:function(a){var b=this,c=this._get("container");if(c!==a){this._domHandles.remove("dom-size");this._stopMeasuring();
if(c){var e=this.surface;e&&(e.removeEventListener("focus",this._focusEvent),e.removeEventListener("blur",this._blurEvent));c.classList.remove("esri-view");this.popupManager.destroy();this._set("popupManager",null);this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null);this.overlay.destroy();this._set("overlay",null);d.destroy(this.root);this._set("root",null);d.destroy(this.userContent);this._set("userContent",null)}if(a){a.classList.add("esri-view");
c=document.createElement("div");for(c.className="esri-view-user-storage";a.hasChildNodes();)c.appendChild(a.firstChild);a.appendChild(c);c=document.createElement("div");c.className="esri-view-root";a.insertBefore(c,a.firstChild);this._set("root",c);var k=document.createElement("div");k.className="esri-view-surface";k.setAttribute("role","application");k.tabIndex=0;k.addEventListener("focus",this._focusEvent);k.addEventListener("blur",this._blurEvent);f.setSelectable(k,!1);c.appendChild(k);this._set("surface",
k);e=new t;c.appendChild(e.surface);this._set("overlay",e);e.watch("needsRender",function(a){a&&!b._overlayRenderTaskHandle?b._overlayRenderTaskHandle=h.addFrameTask({render:function(){b.overlay.render()}}):b._overlayRenderTaskHandle&&(b._overlayRenderTaskHandle.remove(),b._overlayRenderTaskHandle=null)});this._forceReadyCycle();this._domHandles.add(m.init(this,"size",function(a){var b=a[1];k.classList.toggle("esri-view-surface--inset-outline",a[0]>=document.body.clientWidth||b>=document.body.clientHeight)}),
"dom-size");this._set("container",a);this._startMeasuring();a=new r({enabled:!0,view:this});this._set("popupManager",a)}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"focused",{get:function(){return document.activeElement===this.surface},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"size",{get:function(){return[this.width,
this.height]},enumerable:!0,configurable:!0});e.prototype.blur=function(){this.surface&&this.surface.blur()};e.prototype.focus=function(){this.surface&&this.surface.focus()};e.prototype.pageToContainer=function(a,b,c){var d=this.position;a-=d[0];b-=d[1];c?(c[0]=a,c[1]=b):c=[a,b];return c};e.prototype.containerToPage=function(a,b,c){var d=this.position;a+=d[0];b+=d[1];c?(c[0]=a,c[1]=b):c=[a,b];return c};e.prototype._handleUIChange=function(a,b){b&&(this._domHandles.remove("ui"),b.destroy());a&&this._wireUI(a);
this._set("ui",a)};e.prototype._wireUI=function(a){this._domHandles.remove("ui");a&&(a.view=this,this._domHandles.add([m.init(this,"root",function(b){a.container=b?d.create("div",null,b):null}),m.init(this,"popup",function(b,c){c&&(a.remove(c,"popup"),c!==b&&c.destroy());b&&(b.view=a.view,a.add(b,{key:"popup",position:"manual"}))})],"ui"))};e.prototype._focusEvent=function(a){this.notifyChange("focused");this.emit("focus",{native:a})};e.prototype._blurEvent=function(a){this.notifyChange("focused");
this.emit("blur",{native:a})};e.prototype._stopMeasuring=function(){this._domHandles.remove("measuring");this._get("resizing")&&this._set("resizing",!1)};e.prototype._startMeasuring=function(){var a=this,b=this._freqInfo;b.freq=16;b.time=750;this._domHandles.add([k(window,"resize",function(){b.freq=16;b.time=750}),h.addFrameTask({prepare:function(b){var c=a._measure(),d=a._freqInfo;d.time+=b.deltaTime;c&&(d.freq=16,a._get("resizing")||a._set("resizing",!0));d.time<d.freq||(d.time=0,a._position()||
c?d.freq=16:d.freq=Math.min(750,2*d.freq),!c&&512<=d.freq&&a._get("resizing")&&a._set("resizing",!1))}})],"measuring");this._measure();this._position()};e.prototype._measure=function(){var a=this.container,b=a?a.clientWidth:0,c=a?a.clientHeight:0;if(0===b||0===c||"hidden"===window.getComputedStyle(a).visibility)return this.suspended||this._set("suspended",!0),!1;var a=this.width,d=this.height;if(b===a&&c===d)return this.suspended&&this._set("suspended",!1),!1;this._set("width",b);this._set("height",
c);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:a,oldHeight:d,width:b,height:c});return!0};e.prototype._position=function(){var a=this.container,b=this.position,c=(a.ownerDocument||window.document).defaultView,a=a.getBoundingClientRect();u[0]=a.left+c.pageXOffset;u[1]=a.top+c.pageYOffset;return b&&u[0]===b[0]&&u[1]===b[1]?!1:(this._set("position",u.slice()),!0)};a([p.property({value:null,cast:function(a){return f.byId(a)}})],e.prototype,"container",null);a([p.property({readOnly:!0,
dependsOn:["surface"]})],e.prototype,"focused",null);a([p.property({readOnly:!0})],e.prototype,"height",void 0);a([p.property({type:q})],e.prototype,"popup",void 0);a([p.property({type:r})],e.prototype,"popupManager",void 0);a([p.property({type:t})],e.prototype,"overlay",void 0);a([p.property({readOnly:!0})],e.prototype,"position",void 0);a([p.property({readOnly:!0})],e.prototype,"resizing",void 0);a([p.property({readOnly:!0})],e.prototype,"root",void 0);a([p.property({value:null,dependsOn:["width",
"height"],readOnly:!0})],e.prototype,"size",null);a([p.property({readOnly:!0})],e.prototype,"surface",void 0);a([p.property({readOnly:!0})],e.prototype,"suspended",void 0);a([p.property()],e.prototype,"ui",void 0);a([p.property({readOnly:!0})],e.prototype,"userContent",void 0);a([p.property({readOnly:!0})],e.prototype,"width",void 0);return e=a([p.subclass("esri.views.DOMContainer")],e)}(p.declared(e,c))})},"esri/views/overlay/ViewOverlay":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/dom ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators maquette".split(" "),
function(n,g,b,a,f,d,k,e,c){return function(d){function h(){var a=null!==d&&d.apply(this,arguments)||this;a.items=new k;a._callbacks=new Map;a._projector=c.createProjector();a._hiddenProjector=c.createProjector();return a}b(h,d);Object.defineProperty(h.prototype,"needsRender",{get:function(){return 0<this.items.length},enumerable:!0,configurable:!0});h.prototype.initialize=function(){var a=this,b=document.createElement("div");b.className="esri-overlay-surface";f.setSelectable(b,!1);this._set("surface",
b);this._hiddenSurface=document.createElement("div");this._hiddenSurface.setAttribute("style","visibility: hidden;");b.appendChild(this._hiddenSurface);this._itemsChangeHandle=this.items.on("change",function(b){b.added.map(function(b){var c=function(){return b.render()};a._callbacks.set(b,c);a._projector.append(a.surface,c)});b.removed.map(function(b){var c=a._projector.detach(a._callbacks.get(b));a.surface.removeChild(c.domNode);a._callbacks.delete(b)})})};h.prototype.addItem=function(a){this.items.add(a)};
h.prototype.removeItem=function(a){this.items.remove(a)};h.prototype.destroy=function(){this.items.removeAll();this._itemsChangeHandle.remove();this._projector=this._callbacks=null};h.prototype.render=function(){this._projector.renderNow()};h.prototype.computeBoundingRect=function(a){var b=this._hiddenSurface,c=this._hiddenProjector,d=null,e=function(){return d=a.render()};c.append(b,e);c.renderNow();var h={left:0,top:0,right:0,bottom:0};if(d&&d.domNode){var k=d.domNode.getBoundingClientRect();h.left=
k.left;h.top=k.top;h.right=k.right;h.bottom=k.bottom}for(c.detach(e);b.firstChild;)b.removeChild(b.firstChild);return h};h.prototype.overlaps=function(a,b){a=this.computeBoundingRect(a);b=this.computeBoundingRect(b);return Math.max(a.left,b.left)<=Math.min(a.right,b.right)&&Math.max(a.top,b.top)<=Math.min(a.bottom,b.bottom)};a([e.property({readOnly:!0})],h.prototype,"surface",void 0);a([e.property({readOnly:!0})],h.prototype,"items",void 0);a([e.property({readOnly:!0,dependsOn:["items.length"]})],
h.prototype,"needsRender",null);return h=a([e.subclass("esri.views.overlay.ViewOverlay")],h)}(e.declared(d))})},"esri/widgets/Popup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper dojo/dom-geometry dojo/i18n!./Popup/nls/Popup dojo/keys ../core/Handles ../core/lang ../core/Logger ../core/watchUtils ../core/accessorSupport/decorators ./Feature ./Spinner ./Widget ./Popup/PopupViewModel ../widgets/support/widgetUtils ./support/widget".split(" "),
function(n,g,b,a,f,d,k,e,c,l,h,m,p,r,t,q,u,x,v){function y(a,b){return void 0===b?"esri-popup__"+a:"esri-popup__"+a+"-"+b}var w=n.toUrl("./Popup/images/default-action.svg"),A={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},B=h.getLogger("esri.widgets.Popup");return function(h){function q(a){a=h.call(this)||this;a._blurContainer=!1;a._containerNode=null;a._mainContainerNode=null;a._featureMenuNode=null;a._focusContainer=!1;a._focusDockButton=!1;a._focusFeatureMenuButton=!1;a._focusFirstFeature=
!1;a._handles=new c;a._displayActionTextLimit=2;a._pointerOffsetInPx=16;a._spinner=null;a.actions=null;a.alignment="auto";a.autoCloseEnabled=null;a.content=null;a.collapsed=!1;a.collapseEnabled=!0;a.dockEnabled=!1;a.featureCount=null;a.features=null;a.featureNavigationEnabled=!0;a.goToOverride=null;a.highlightEnabled=null;a.location=null;a.featureWidgets=[];a.promises=null;a.selectedFeature=null;a.selectedFeatureIndex=null;a.selectedFeatureWidget=null;a.spinnerEnabled=!0;a.title=null;a.updateLocationEnabled=
null;a.view=null;a.viewModel=new u;a.visible=null;return a}b(q,h);q.prototype.postInitialize=function(){var a=this;this._addSelectedFeatureIndexHandle();this.own(m.watch(this,"viewModel.screenLocation",function(){return a._positionContainer()}),m.watch(this,["viewModel.visible","dockEnabled"],function(){return a._toggleScreenLocationEnabled()}),m.watch(this,"viewModel.screenLocation",function(b,c){!!b!==!!c&&a.reposition()}),m.watch(this,"viewModel.features",function(b){return a._createFeatureWidgets(b)}),
m.watch(this,"viewModel.view.padding viewModel.view.size viewModel.visible viewModel.waitingForResult viewModel.location alignment".split(" "),function(){return a.reposition()}),m.watch(this,"spinnerEnabled",function(b){return a._spinnerEnabledChange(b)}),m.watch(this,"viewModel.view.size",function(b,c){return a._updateDockEnabledForViewSize(b,c)}),m.watch(this,"viewModel.view",function(b,c){return a._viewChange(b,c)}),m.watch(this,"viewModel.view.ready",function(b,c){return a._viewReadyChange(b,
c)}),m.watch(this,["viewModel.waitingForResult","viewModel.location"],function(){return a._displaySpinner()}),m.watch(this,["featureWidgets","viewModel.selectedFeatureIndex"],function(){return a._updateFeatureWidget()}),m.watch(this,"selectedFeatureWidget.viewModel.title",function(b){return a._setTitleFromFeatureWidget(b)}),m.watch(this,["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.waitingForContent"],function(){return a._setContentFromFeatureWidget()}),m.on(this,"viewModel",
"trigger-action",function(b){return a._zoomToAction(b)}))};q.prototype.destroy=function(){this._destroyFeatureWidgets();this._destroySpinner();this._handles&&this._handles.destroy();this._handles=null};Object.defineProperty(q.prototype,"currentAlignment",{get:function(){return this._getCurrentAlignment()},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"currentDockPosition",{get:function(){return this._getCurrentDockPosition()},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,
"dockOptions",{get:function(){return this._get("dockOptions")||A},set:function(a){var b=f({},A),c=this.get("viewModel.view.breakpoints"),d={};c&&(d.width=c.xsmall,d.height=c.xsmall);a=f({},b,a);b=f({},b.breakpoint,d);d=a.breakpoint;!0===d?a.breakpoint=b:"object"===typeof d&&(a.breakpoint=f({},b,d));this._set("dockOptions",a);this._setCurrentDockPosition();this.reposition()},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"featureMenuOpen",{get:function(){return this.viewModel.visible?
this._get("featureMenuOpen"):!1},set:function(a){this._set("featureMenuOpen",!!a)},enumerable:!0,configurable:!0});q.prototype.blur=function(){this.visible||B.warn("Popup cannot be blurred while visible is false");this._blurContainer=!0;this.scheduleRender()};q.prototype.clear=function(){};q.prototype.close=function(){this.visible=!1};q.prototype.focus=function(){this.visible||B.warn("Popup cannot be focused while visible is false");this._focusContainer=!0;this.scheduleRender()};q.prototype.next=
function(){return null};q.prototype.open=function(a){this._handles.remove("selected-index");this.set({featureMenuOpen:a?!!a.featureMenuOpen:!1});this.viewModel.open(a);this._addSelectedFeatureIndexHandle()};q.prototype.previous=function(){return null};q.prototype.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};q.prototype.triggerAction=function(a){return null};q.prototype.render=function(){var a=this.collapsed,b=this.collapseEnabled,c=this.dockEnabled,
d=this.actions,e=this.featureMenuOpen,h=this.featureNavigationEnabled,f=this.featureWidgets,m=this.visible,p=this.viewModel,r=p.content,t=p.featureCount,q=p.pendingPromisesCount,u=p.selectedFeatureIndex,w=p.title,p=1<t&&h,h=1<t&&e,g=b&&!h&&a,a=d&&d.length,B=p&&this._getPageText(t,u),A=this._renderContent(),z=x.isRtl(),n=this.get("selectedFeatureWidget")?this.get("selectedFeatureWidget.viewModel.waitingForContent")||this.get("selectedFeatureWidget.viewModel.content"):A,S=c?k.undock:k.dock,t=this.currentAlignment,
d=this.currentDockPosition,q=q?v.tsx("div",{key:y("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":k.loading,title:k.loading},v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-loading-indicator","esri-rotating")})):null,C=(P={},P["esri-icon-layer-list"]=!h,P["esri-icon-close"]=h,P),P=v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",C)}),C=(K={},K["esri-icon-right-triangle-arrow"]=z,K["esri-popup__pagination-previous-icon--rtl"]=
z,K["esri-icon-left-triangle-arrow"]=!z,K["esri-popup__pagination-previous-icon"]=!z,K),K=v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",C)}),C=v.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes("esri-popup__button","esri-popup__pagination-previous"),"aria-label":k.previous,title:k.previous},K),K=(N={},N["esri-icon-left-triangle-arrow"]=z,N["esri-popup__pagination-next-icon--rtl"]=z,N["esri-icon-right-triangle-arrow"]=
!z,N["esri-popup__pagination-next-icon"]=!z,N),N=v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",K)}),z=v.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes("esri-popup__button","esri-popup__pagination-next"),"aria-label":k.next,title:k.next},N),K=x.cssTransition("enter","esri-popup--feature-updated"),N=this.id+"-feature-menu",e=v.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,
afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes("esri-popup__button","esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":N,"aria-expanded":e,"aria-label":k.menu,title:k.menu},P),B=v.tsx("div",{class:"esri-popup__pagination-page-text"},B),e=p?v.tsx("div",{class:"esri-popup__navigation-buttons",enterAnimation:K},C,B,z,q||e):null,B=this._wouldDockTo(),B=(M={},M["esri-icon-minimize"]=c,M["esri-popup__icon--dock-icon"]=
!c,M["esri-icon-dock-right"]=!c&&("top-right"===B||"bottom-right"===B),M["esri-icon-dock-left"]=!c&&("top-left"===B||"bottom-left"===B),M["esri-icon-maximize"]=!c&&"top-center"===B,M["esri-icon-dock-bottom"]=!c&&"bottom-center"===B,M),M=v.tsx("span",{"aria-hidden":"true",class:this.classes(B,"esri-popup__icon")}),M=this.get("dockOptions.buttonEnabled")?v.tsx("div",{role:"button","aria-label":S,title:S,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,
afterUpdate:this._focusDockButtonNode,class:this.classes("esri-popup__button","esri-popup__button--dock")},M):null,b=b&&w&&(n||a||p),S=(R={},R["esri-popup__header-title--button"]=b,R),B=b?"button":"heading",q=b?g?k.expand:k.collapse:"",R=this.id+"-popup-title",w=w?v.tsx("h2",{class:this.classes("esri-popup__header-title",S),key:w,enterAnimation:K,id:R,role:B,"aria-label":q,title:q,bind:this,tabIndex:b?0:-1,onclick:this._toggleCollapsed,onkeydown:this._toggleCollapsed,innerHTML:w}):null,b=v.tsx("span",
{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-close")}),b=v.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:"esri-popup__button","aria-label":k.close,title:k.close},b),b=v.tsx("header",{class:"esri-popup__header"},w,v.tsx("div",{class:"esri-popup__header-buttons"},M,b)),M=this.id+"-popup-content",r=n&&!g?v.tsx("article",{key:r,enterAnimation:K,id:M,class:"esri-popup__content"},A):null,A=!g&&("bottom-left"===t||"bottom-center"===
t||"bottom-right"===t||"top-left"===d||"top-center"===d||"top-right"===d),g=!g&&("top-left"===t||"top-center"===t||"top-right"===t||"bottom-left"===d||"bottom-center"===d||"bottom-right"===d),n=h?null:v.tsx("div",{key:y("actions"),class:"esri-popup__actions"},this._renderActions()),K=v.tsx("section",{key:y("navigation"),class:"esri-popup__navigation"},e),p=p||a?v.tsx("div",{key:y("feature-buttons"),class:"esri-popup__feature-buttons"},n,K):null,u=this._renderFeatureMenuNode(f,u,h,N),f=l.substitute({total:f.length},
k.selectedFeatures),N=v.tsx("section",{key:y("menu"),class:"esri-popup__feature-menu"},v.tsx("h2",{class:"esri-popup__feature-menu-header"},f),v.tsx("nav",{class:"esri-popup__feature-menu-viewport",afterCreate:this._featureMenuViewportNodeUpdated,afterUpdate:this._featureMenuViewportNodeUpdated},u)),f=c?null:v.tsx("div",{key:y("pointer"),class:"esri-popup__pointer",role:"presentation"},v.tsx("div",{class:this.classes("esri-popup__pointer-direction","esri-popup--shadow")})),u=this.get("selectedFeature.layer.title"),
a=this.get("selectedFeature.layer.id"),n=(T={},T["esri-popup--shadow"]=c,T),c=(I={},I["esri-popup--aligned-top-center"]=m&&"top-center"===t,I["esri-popup--aligned-bottom-center"]=m&&"bottom-center"===t,I["esri-popup--aligned-top-left"]=m&&"top-left"===t,I["esri-popup--aligned-bottom-left"]=m&&"bottom-left"===t,I["esri-popup--aligned-top-right"]=m&&"top-right"===t,I["esri-popup--aligned-bottom-right"]="bottom-right"===t,I["esri-popup--is-docked"]=m&&c,I["esri-popup--shadow"]=m&&!c,I["esri-popup--is-docked-top-left"]=
m&&"top-left"===d,I["esri-popup--is-docked-top-center"]=m&&"top-center"===d,I["esri-popup--is-docked-top-right"]=m&&"top-right"===d,I["esri-popup--is-docked-bottom-left"]=m&&"bottom-left"===d,I["esri-popup--is-docked-bottom-center"]=m&&"bottom-center"===d,I["esri-popup--is-docked-bottom-right"]=m&&"bottom-right"===d,I["esri-popup--feature-menu-open"]=m&&h,I),I=A?N:null,T=g?N:null,h=A?p:null,t=g?p:null,I=v.tsx("div",{class:this.classes("esri-popup__main-container","esri-widget",n),tabIndex:-1,role:"dialog",
"aria-labelledby":w?R:"","aria-describedby":r?M:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},h,I,b,r,t,T);return v.tsx("div",{key:y("base"),class:this.classes("esri-popup",c),role:"presentation","data-layer-title":u,"data-layer-id":a,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},m?[I,f]:null);var P,K,N,M,R,T,I};q.prototype._featureMenuOpenChanged=function(a){a?this._focusFirstFeature=
!0:this._focusFeatureMenuButton=!0};q.prototype._setTitleFromFeatureWidget=function(a){this.selectedFeatureWidget&&(this.viewModel.title=a||"")};q.prototype._setContentFromFeatureWidget=function(){var a=this.selectedFeatureWidget;a&&(this.viewModel.content=a)};q.prototype._handleFeatureMenuKeyup=function(a){a.keyCode===e.ESCAPE&&(a.stopPropagation(),this.featureMenuOpen=!1)};q.prototype._handleFeatureMenuItemKeyup=function(a){var b=a.keyCode,c=this._featureMenuNode,d=this.get("features.length"),h=
a.currentTarget["data-feature-index"];c&&(c=c.querySelectorAll("li"),b===e.UP_ARROW?(a.stopPropagation(),c[(h-1+d)%d].focus()):b===e.DOWN_ARROW?(a.stopPropagation(),c[(h+1+d)%d].focus()):b===e.HOME?(a.stopPropagation(),c[0].focus()):b===e.END&&(a.stopPropagation(),c[c.length-1].focus()))};q.prototype._handleMainKeyup=function(a){var b=a.keyCode;b===e.LEFT_ARROW&&(a.stopPropagation(),this.previous());b===e.RIGHT_ARROW&&(a.stopPropagation(),this.next())};q.prototype._zoomToAction=function(a){a.action&&
"zoom-to"===a.action.id&&this.viewModel.zoomToLocation()};q.prototype._spinnerEnabledChange=function(a){this._destroySpinner();a&&(a=this.get("viewModel.view"),this._createSpinner(a))};q.prototype._displaySpinner=function(){var a=this._spinner;if(a){var b=this.viewModel,c=b.location;b.waitingForResult?a.show({location:c}):a.hide()}};q.prototype._getIconStyles=function(a){return{"background-image":a?"url("+a+")":""}};q.prototype._renderAction=function(a,b,c,d){var e=this,h=m.watch(a,["id","className",
"title","image","visible"],function(){return e.scheduleRender()});this._handles.add(h,d);h=this.get("selectedFeature.attributes");"zoom-to"===a.id&&(a.title=k.zoom,this._handles.add(m.init(this,"view.animation.state",function(b){a.className="waiting-for-target"===b?e.classes("esri-popup__icon","esri-icon-loading-indicator","esri-rotating"):e.classes("esri-popup__icon","esri-icon-zoom-in-magnifying-glass")}),d));d=a.title;var f=a.className,p=a.image||f?a.image:w;d=d&&h?l.substitute(h,d):d;f=f&&h?l.substitute(h,
f):f;h=p&&h?l.substitute(h,p):p;p=f||"esri-popup__icon";f=(r={},r["esri-popup__action-image"]=!!h,r);r=(t={},t["esri-popup__button--disabled"]=-1!==p.indexOf("esri-icon-loading-indicator"),t);c=c<=this._displayActionTextLimit?v.tsx("span",{key:y("action-text-"+b+"-"+a.uid),class:"esri-popup__action-text"},d):null;return a.visible?v.tsx("div",{key:y("action-"+b+"-"+a.uid),role:"button",tabIndex:0,title:d,"aria-label":d,class:this.classes("esri-popup__button","esri-popup__action",r),bind:this,"data-action-index":b,
onclick:this._triggerAction,onkeydown:this._triggerAction},v.tsx("span",{key:y("action-icon-"+b+"-"+a.uid+"-"+p),"aria-hidden":"true",class:this.classes(p,f),styles:this._getIconStyles(h)}),c):null;var r,t};q.prototype._renderActions=function(){var a=this;this._handles.remove("actions");var b=this.actions;if(b){var c=b.length;return b.toArray().map(function(b,d){return a._renderAction(b,d,c,"actions")})}};q.prototype._addSelectedFeatureIndexHandle=function(){var a=this,b=m.watch(this,"viewModel.selectedFeatureIndex",
function(b,c){return a._selectedFeatureIndexUpdated(b,c)});this._handles.add(b,"selected-index")};q.prototype._selectedFeatureIndexUpdated=function(a,b){var c=this.featureMenuOpen;this.featureCount&&c&&a!==b&&-1!==a&&(this.featureMenuOpen=!1)};q.prototype._updateFeatureWidget=function(){var a=this.featureWidgets[this.viewModel.selectedFeatureIndex]||null;a&&!a.contentEnabled&&(a.contentEnabled=!0);this._set("selectedFeatureWidget",a)};q.prototype._destroyFeatureWidgets=function(){this.featureWidgets.forEach(function(a){return a.destroy()});
this._set("featureWidgets",[])};q.prototype._createFeatureWidgets=function(a){var b=this.featureWidgets.slice(0),c=this.get("viewModel.view"),d=[];a.forEach(function(a,e){if(a){var h=null;b.some(function(c,d){c&&c.graphic===a&&(h=c,b.splice(d,1));return!!h});d[e]=h||new r({contentEnabled:!1,graphic:a,view:c})}});b.forEach(function(a){return a&&a.destroy()});this._set("featureWidgets",d)};q.prototype._isScreenLocationWithinView=function(a,b){return-1<a.x&&-1<a.y&&a.x<=b.width&&a.y<=b.height};q.prototype._isOutsideView=
function(a){var b=a.popupHeight,c=a.popupWidth,d=a.screenLocation,e=a.side;a=a.view;if(isNaN(c)||isNaN(b)||!a||!d)return!1;var h=a.padding;return"right"===e&&d.x+c/2>a.width-h.right||"left"===e&&d.x-c/2<h.left||"top"===e&&d.y-b<h.top||"bottom"===e&&d.y+b>a.height-h.bottom?!0:!1};q.prototype._determineCurrentAlignment=function(){var a=this._pointerOffsetInPx,b=this._containerNode,c=this._mainContainerNode,e=this.viewModel,h=e.screenLocation,e=e.view;if(!h||!e||!b)return"top-center";if(!this._isScreenLocationWithinView(h,
e))return this._get("currentAlignment")||"top-center";var k=c?window.getComputedStyle(c,null):null,c=k?parseInt(k.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,k=k?parseInt(k.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0,f=d.getContentBox(b),b=f.w+a,f=Math.max(f.h,c,k)+a,a=this._isOutsideView({popupHeight:f,popupWidth:b,screenLocation:h,side:"right",view:e}),c=this._isOutsideView({popupHeight:f,popupWidth:b,screenLocation:h,side:"left",view:e}),k=this._isOutsideView({popupHeight:f,
popupWidth:b,screenLocation:h,side:"top",view:e}),h=this._isOutsideView({popupHeight:f,popupWidth:b,screenLocation:h,side:"bottom",view:e});return c?k?"bottom-right":"top-right":a?k?"bottom-left":"top-left":k?h?"top-center":"bottom-center":"top-center"};q.prototype._getCurrentAlignment=function(){var a=this.alignment;return this.dockEnabled?null:"auto"===a?this._determineCurrentAlignment():"function"===typeof a?a.call(this):a};q.prototype._setCurrentAlignment=function(){this._set("currentAlignment",
this._getCurrentAlignment())};q.prototype._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};q.prototype._getDockPosition=function(){var a=this.get("dockOptions.position");return"auto"===a?this._determineCurrentDockPosition():"function"===typeof a?a.call(this):a};q.prototype._getCurrentDockPosition=function(){return this.dockEnabled?this._getDockPosition():null};q.prototype._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};
q.prototype._renderFeatureMenuItemNode=function(a,b,c,d){var e=b===c;d=(h={},h["esri-popup__feature-menu-item--selected"]=e,h);h=e?v.tsx("span",{key:y("feature-menu-selected-feature-"+c),title:k.selectedFeature,"aria-label":k.selectedFeature,class:"esri-icon-check-mark"}):null;a=v.tsx("span",{innerHTML:a.title||k.untitled});return v.tsx("li",{role:"menuitem",tabIndex:-1,key:y("feature-menu-feature-"+c),class:this.classes(d,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":b,onkeyup:this._handleFeatureMenuItemKeyup,
onclick:this._selectFeature,onkeydown:this._selectFeature},v.tsx("span",{class:"esri-popup__feature-menu-title"},a,h));var h};q.prototype._renderFeatureMenuNode=function(a,b,c,d){var e=this;return 1<a.length?v.tsx("ol",{class:"esri-popup__feature-menu-list",id:d,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},a.map(function(a,d){return e._renderFeatureMenuItemNode(a,d,b,c)})):null};q.prototype._determineCurrentDockPosition=
function(){var a=this.get("viewModel.view"),b=x.isRtl()?"top-left":"top-right";if(!a)return b;var c=a.padding||{left:0,right:0,top:0,bottom:0},c=a.width-c.left-c.right;return(a=a.get("breakpoints"))&&c<=a.xsmall?"bottom-center":b};q.prototype._renderContent=function(){var a=this.get("viewModel.content");if("string"===typeof a)return v.tsx("div",{key:a,innerHTML:a});if(v.isWidget(a))return v.tsx("div",{key:a},a.render());if(a instanceof HTMLElement)return v.tsx("div",{key:a,bind:a,afterCreate:this._attachToNode});
if(v.isWidgetBase(a))return v.tsx("div",{key:a,bind:a.domNode,afterCreate:this._attachToNode})};q.prototype._attachToNode=function(a){a.appendChild(this)};q.prototype._positionContainer=function(a){void 0===a&&(a=this._containerNode);a&&(this._containerNode=a);if(a){var b=this.viewModel.screenLocation,c=d.getContentBox(a);if(b=this._calculatePositionStyle(b,c))a.style.top=b.top,a.style.left=b.left,a.style.bottom=b.bottom,a.style.right=b.right}};q.prototype._calculateFullWidth=function(a){var b=this.currentAlignment,
c=this._pointerOffsetInPx;return"top-left"===b||"bottom-left"===b||"top-right"===b||"bottom-right"===b?a+c:a};q.prototype._calculateAlignmentPosition=function(a,b,c,d){var e=this.currentAlignment,h=this._pointerOffsetInPx;d/=2;var k=c.height-b;c=c.width-a;var f=this.view.padding;if("bottom-center"===e)return{top:b+h-f.top,left:a-d-f.left};if("top-left"===e)return{bottom:k+h-f.bottom,right:c+h-f.right};if("bottom-left"===e)return{top:b+h-f.top,right:c+h-f.right};if("top-right"===e)return{bottom:k+
h-f.bottom,left:a+h-f.left};if("bottom-right"===e)return{top:b+h-f.top,left:a+h-f.left};if("top-center"===e)return{bottom:k+h-f.bottom,left:a-d-f.left}};q.prototype._calculatePositionStyle=function(a,b){var c=this.view;if(c){if(this.dockEnabled)return{left:"",top:"",right:"",bottom:""};if(a&&b&&(b=this._calculateFullWidth(b.w),a=this._calculateAlignmentPosition(a.x,a.y,c,b)))return{top:void 0!==a.top?a.top+"px":"auto",left:void 0!==a.left?a.left+"px":"auto",bottom:void 0!==a.bottom?a.bottom+"px":
"auto",right:void 0!==a.right?a.right+"px":"auto"}}};q.prototype._viewChange=function(a,b){a&&b&&(this.close(),this.clear())};q.prototype._viewReadyChange=function(a,b){a?(a=this.get("viewModel.view"),this._wireUpView(a)):b&&(this.close(),this.clear())};q.prototype._wireUpView=function(a){this._destroySpinner();a&&(this.spinnerEnabled&&this._createSpinner(a),this._setDockEnabledForViewSize(this.dockOptions))};q.prototype._dockingThresholdCrossed=function(a,b,c){var d=a[0];a=a[1];var e=b[0];b=b[1];
var h=c.width;c=c.height;return d<=h&&e>h||d>h&&e<=h||a<=c&&b>c||a>c&&b<=c};q.prototype._updateDockEnabledForViewSize=function(a,b){if(a&&b){var c=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},d=c.left+c.right,e=c.top+c.bottom,c=[],h=[];c[0]=a[0]-d;c[1]=a[1]-e;h[0]=b[0]-d;h[1]=b[1]-e;a=this.dockOptions;this._dockingThresholdCrossed(c,h,a.breakpoint)&&this._setDockEnabledForViewSize(a);this._setCurrentDockPosition()}};q.prototype._focusDockButtonNode=function(a){this._focusDockButton&&
(this._focusDockButton=!1,a.focus())};q.prototype._mainContainerNodeUpdated=function(a){this._mainContainerNode=a;this._focusContainer?(this._focusContainer=!1,a.focus()):this._blurContainer&&(this._blurContainer=!1,a.blur())};q.prototype._featureMenuNodeUpdated=function(a){(this._featureMenuNode=a)&&this._focusFirstFeature&&(this._focusFirstFeature=!1,a=a.querySelectorAll("li"),a.length&&a[0].focus())};q.prototype._focusFeatureMenuButtonNode=function(a){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=
!1,a.focus())};q.prototype._featureMenuViewportNodeUpdated=function(a){a&&(a.scrollTop=0)};q.prototype._toggleScreenLocationEnabled=function(){var a=this.dockEnabled,b=this.viewModel;b&&(b.screenLocationEnabled=this.visible&&!a)};q.prototype._shouldDockAtCurrentViewSize=function(a){a=a.breakpoint;var b=this.get("viewModel.view.ui"),c=b.width,b=b.height;if(isNaN(c)||isNaN(b))return!1;c=a.hasOwnProperty("width")&&c<=a.width;a=a.hasOwnProperty("height")&&b<=a.height;return c||a};q.prototype._setDockEnabledForViewSize=
function(a){a.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(a))};q.prototype._getPageText=function(a,b){return l.substitute({index:b+1,total:a},k.pageText)};q.prototype._destroySpinner=function(){var a=this._spinner,b=this.view;a&&(b&&b.ui.remove(this._spinner,"popup-spinner"),a.destroy(),this._spinner=null)};q.prototype._createSpinner=function(a){a&&(this._spinner=new t({view:a}),a.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};q.prototype._toggleCollapsed=function(){this.collapsed=
!this.collapsed};q.prototype._close=function(){this.close();this.view&&this.view.focus()};q.prototype._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};q.prototype._toggleFeatureMenu=function(){var a=!this.featureMenuOpen;this._featureMenuOpenChanged(a);this.featureMenuOpen=a};q.prototype._triggerAction=function(a){this.viewModel.triggerAction(a.currentTarget["data-action-index"])};q.prototype._selectFeature=function(a){a=a.currentTarget["data-feature-index"];
isNaN(a)||(this.viewModel.selectedFeatureIndex=a)};q.prototype._next=function(){this.next()};q.prototype._previous=function(){this.previous()};a([p.aliasOf("viewModel.actions"),v.renderable()],q.prototype,"actions",void 0);a([p.property()],q.prototype,"alignment",void 0);a([p.aliasOf("viewModel.autoCloseEnabled")],q.prototype,"autoCloseEnabled",void 0);a([p.aliasOf("viewModel.content"),v.renderable()],q.prototype,"content",void 0);a([p.property(),v.renderable()],q.prototype,"collapsed",void 0);a([p.property(),
v.renderable()],q.prototype,"collapseEnabled",void 0);a([p.property({readOnly:!0,dependsOn:["dockEnabled","alignment"]}),v.renderable()],q.prototype,"currentAlignment",null);a([p.property({readOnly:!0,dependsOn:["viewModel.view.ready","dockEnabled","dockOptions"]}),v.renderable()],q.prototype,"currentDockPosition",null);a([p.property(),v.renderable()],q.prototype,"dockOptions",null);a([p.property(),v.renderable()],q.prototype,"dockEnabled",void 0);a([p.aliasOf("viewModel.featureCount"),v.renderable()],
q.prototype,"featureCount",void 0);a([p.property({dependsOn:["viewModel.visible"]}),v.renderable()],q.prototype,"featureMenuOpen",null);a([p.aliasOf("viewModel.features"),v.renderable()],q.prototype,"features",void 0);a([p.property(),v.renderable()],q.prototype,"featureNavigationEnabled",void 0);a([p.aliasOf("viewModel.goToOverride")],q.prototype,"goToOverride",void 0);a([p.aliasOf("viewModel.highlightEnabled")],q.prototype,"highlightEnabled",void 0);a([p.aliasOf("viewModel.location"),v.renderable()],
q.prototype,"location",void 0);a([p.property({readOnly:!0}),v.renderable()],q.prototype,"featureWidgets",void 0);a([p.aliasOf("viewModel.promises")],q.prototype,"promises",void 0);a([p.aliasOf("viewModel.selectedFeature"),v.renderable()],q.prototype,"selectedFeature",void 0);a([p.aliasOf("viewModel.selectedFeatureIndex"),v.renderable()],q.prototype,"selectedFeatureIndex",void 0);a([p.property({readOnly:!0}),v.renderable()],q.prototype,"selectedFeatureWidget",void 0);a([p.property()],q.prototype,"spinnerEnabled",
void 0);a([p.aliasOf("viewModel.title"),v.renderable()],q.prototype,"title",void 0);a([p.aliasOf("viewModel.updateLocationEnabled")],q.prototype,"updateLocationEnabled",void 0);a([p.aliasOf("viewModel.view")],q.prototype,"view",void 0);a([p.property({type:u}),v.renderable("viewModel.screenLocation viewModel.screenLocationEnabled viewModel.state viewModel.pendingPromisesCount viewModel.promiseCount viewModel.waitingForResult".split(" ")),v.vmEvent(["triggerAction","trigger-action"])],q.prototype,"viewModel",
void 0);a([p.aliasOf("viewModel.visible"),v.renderable()],q.prototype,"visible",void 0);a([p.aliasOf("viewModel.clear")],q.prototype,"clear",null);a([p.aliasOf("viewModel.next")],q.prototype,"next",null);a([p.aliasOf("viewModel.previous")],q.prototype,"previous",null);a([p.aliasOf("viewModel.triggerAction")],q.prototype,"triggerAction",null);a([v.accessibleHandler()],q.prototype,"_toggleCollapsed",null);a([v.accessibleHandler()],q.prototype,"_close",null);a([v.accessibleHandler()],q.prototype,"_toggleDockEnabled",
null);a([v.accessibleHandler()],q.prototype,"_toggleFeatureMenu",null);a([v.accessibleHandler()],q.prototype,"_triggerAction",null);a([v.accessibleHandler()],q.prototype,"_selectFeature",null);a([v.accessibleHandler()],q.prototype,"_next",null);a([v.accessibleHandler()],q.prototype,"_previous",null);return q=a([p.subclass("esri.widgets.Popup")],q)}(p.declared(q))})},"esri/widgets/Feature":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Feature/nls/Feature dojo/keys ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Feature/FeatureViewModel ./Feature/support/attachmentUtils ./support/uriUtils ./support/widget".split(" "),
function(n,g,b,a,f,d,k,e,c,l,h,m,p,r){function t(a,b){return void 0===b?"esri-feature__"+a:"esri-feature__"+a+"-"+b}return function(l){function q(a){a=l.call(this)||this;a._chartMap=new Map;a._activeMediaMap=new Map;a._chartRequirePromise=null;a._refreshTimers=new Map;a._mediaInfo=new Map;a.contentEnabled=null;a.graphic=null;a.title=null;a.view=null;a.viewModel=new h;return a}b(q,l);q.prototype.postInitialize=function(){var a=this;this.own(e.init(this,"viewModel.content",function(){return a._setupMediaRefreshTimers()}))};
q.prototype.destroy=function(){this._clearMediaRefreshTimers();this._activeMediaMap.clear();this._activeMediaMap=null;this._cancelChartModules();this._destroyCharts()};q.prototype.render=function(){var a=r.tsx("div",{key:t("loading-container"),class:"esri-feature__loading-container"},r.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")})),a=this.viewModel.waitingForContent?a:this._renderContent();return r.tsx("div",{class:"esri-feature"},r.tsx("div",
{class:"esri-feature__size-container"},r.tsx("div",{class:"esri-feature__main-container"},a)))};q.prototype.goToMedia=function(a,b){this._setContentElementMedia(a,b)};q.prototype.nextMedia=function(a){this._pageContentElementMedia(a,"next")};q.prototype.previousMedia=function(a){this._pageContentElementMedia(a,"previous")};q.prototype._cancelChartModules=function(){this._chartRequirePromise&&this._chartRequirePromise.cancel()};q.prototype._destroyChart=function(a){var b=this._chartMap.get(a);b&&(b.chart.destroy(),
b.tooltip.destroy());this._chartMap.delete(a)};q.prototype._destroyCharts=function(){this._chartMap.forEach(function(a){a.chart.destroy();a.tooltip.destroy()});this._chartMap.clear()};q.prototype._renderContent=function(){this._destroyCharts();var a=this.viewModel.content;if("string"===typeof a)return r.tsx("div",{key:t("content-string"),innerHTML:a});if(r.isWidget(a))return r.tsx("div",{key:t("content-widget")},a.render());if(a instanceof HTMLElement)return r.tsx("div",{key:t("content-html-element"),
bind:a,afterCreate:this._attachToNode});if(r.isWidgetBase(a))return r.tsx("div",{key:t("content-dijit"),bind:a.domNode,afterCreate:this._attachToNode});if(Array.isArray(a))return a.length?r.tsx("div",{key:t("content-content-elements")},a.map(this._renderContentElement,this)):null};q.prototype._renderContentElement=function(a,b){switch(a.type){case "attachments":return this._renderAttachments(a,b);case "fields":return this._renderFields(a,b);case "media":return this._renderMedia(a,b);case "text":return this._renderText(a,
b);default:return null}};q.prototype._renderAttachmentInfo=function(a){var b=a.attachmentInfo,c=a.supportsResizeAttachments,d=b.contentType;a=b.name;var e=b.url,h=c&&m.isSupportedImage(d),k=-1===e.indexOf("?")?"?":"\x26",d=h?""+e+k+"w\x3d48":m.getIconPath(d),h=(l={},l["esri-feature__attachment-item-mask--icon"]=!h,l),l=(p={},p["esri-feature__attachments-image--resizable"]=c,p);return r.tsx("li",{class:"esri-feature__attachments-item",key:b},r.tsx("a",{class:"esri-feature__attachments-item-link",href:e,
target:"_blank"},r.tsx("div",{class:this.classes(h,"esri-feature__attachment-item-mask")},r.tsx("img",{alt:a,class:this.classes(l,"esri-feature__attachments-image"),title:a,src:d}),r.tsx("span",{class:"esri-feature__attachments-image-overlay"},r.tsx("span",{"aria-hidden":"true",class:"esri-feature__attachments-link-icon esri-icon-link-external"}))),r.tsx("span",{class:"esri-feature__attachments-filename"},a||f.noTitle)));var l,p};q.prototype._renderAttachments=function(a,b){var c=this,d=a.displayType,
e=(b=a.attachmentInfos)&&b.length,h=this.get("graphic.layer.capabilities.operations.supportsResizeAttachments"),d=(k={},k["esri-feature__attachments--list"]="preview"!==d,k["esri-feature__attachments--preview"]="preview"===d,k);return e?r.tsx("div",{key:t("attachments-element"),class:this.classes("esri-feature__attachments","esri-feature__content-element",d)},r.tsx("div",{class:"esri-feature__attachments-title"},f.attach),r.tsx("ul",{class:"esri-feature__attachments-items"},b.map(function(b,d){return c._renderAttachmentInfo({attachmentInfo:b,
attachmentInfoIndex:d,supportsResizeAttachments:h,contentElement:a})}))):null;var k};q.prototype._forceLTR=function(a){return"\x26lrm;"+a};q.prototype._renderFieldInfo=function(a,b){var c=this.viewModel.formattedAttributes,d=c?c.content[b]||c.global:null,e=a.fieldName,c=a.label||e,d=d?null==d[e]?"":d[e]:"";a=!(!a.format||!a.format.dateFormat);d="number"!==typeof d||a?p.autoLink(d):this._forceLTR(d);a=(h={},h["esri-feature__field-data--date"]=a,h);return r.tsx("tr",{key:t("fields-element-info-row",
b)},r.tsx("th",{key:t("fields-element-info-row-header",b),class:"esri-feature__field-header",innerHTML:c}),r.tsx("td",{key:t("fields-element-info-row-data",b),class:this.classes("esri-feature__field-data",a),innerHTML:d}));var h};q.prototype._renderFields=function(a,b){var c=this;return(a=a.fieldInfos)?r.tsx("div",{key:t("fields-element",b),class:this.classes("esri-feature__fields","esri-feature__content-element")},r.tsx("table",{class:"esri-table",summary:f.fieldsSummary,key:t("fields-element-table",
b)},r.tsx("tbody",{key:t("fields-element-table-body",b)},a.map(function(a){return c._renderFieldInfo(a,b)})))):null};q.prototype._shouldOpenInNewTab=function(a){void 0===a&&(a="");return!/^(?:mailto:|tel:)/.test(a.trim().toLowerCase())};q.prototype._clearMediaRefreshTimers=function(){this._refreshTimers.forEach(function(a){return clearTimeout(a)});this._refreshTimers.clear()};q.prototype._clearMediaRefreshTimer=function(a){var b=this._refreshTimers.get(a);b&&(clearTimeout(b),this._refreshTimers.delete(a))};
q.prototype._getImageSource=function(a,b){var c=-1!==a.indexOf("?")?"\x26":"?";a=a.split("#");var d=a[1],d=void 0===d?"":d;return""+a[0]+c+"timestamp\x3d"+b+(d?"#":"")+d};q.prototype._setupMediaRefreshTimer=function(a){var b=this.get("viewModel.content");if(Array.isArray(b)&&(b=b[a])&&"media"===b.type){var c=this._activeMediaMap.get(a);isNaN(c)&&(c=0);(b=b.mediaInfos[c])&&"image"===b.type&&b.refreshInterval&&this._setRefreshTimeout(a,b)}};q.prototype._setupMediaRefreshTimers=function(){var a=this;
this._clearMediaRefreshTimers();var b=this.get("viewModel.content");Array.isArray(b)&&b.forEach(function(b,c){return a._setupMediaRefreshTimer(c)})};q.prototype._updateMediaInfoTimestamp=function(a,b){var c=Date.now();this._mediaInfo.set(b,{timestamp:c,sourceURL:this._getImageSource(a,c)});this.scheduleRender()};q.prototype._setRefreshTimeout=function(a,b){var c=this,d=b.refreshInterval,e=b.value;d&&(b=6E4*d,this._updateMediaInfoTimestamp(e.sourceURL,a),b=setInterval(function(){c._updateMediaInfoTimestamp(e.sourceURL,
a)},b),this._refreshTimers.set(a,b))};q.prototype._renderMediaInfoType=function(a,b){var c=a.value,d=a.title,d=void 0===d?"":d,e=a.type,h=a.refreshInterval,k=c.sourceURL,c=c.linkURL;if("image"===e)return a=this._shouldOpenInNewTab(c)?"_self":"_blank",k=(h=h?this._mediaInfo.get(b):null)?h.sourceURL:k,b=r.tsx("img",{alt:d,key:t("media-image-"+(h?h.timestamp:0),b),src:k}),(d=c?r.tsx("a",{title:d,href:c,target:a},b):null)?d:b;if(-1!==e.indexOf("chart"))return r.tsx("div",{key:t("chart",b),bind:this,"data-media-info":a,
"data-content-element-index":b,class:"esri-feature__media-chart",afterCreate:this._getChartDependencies,afterUpdate:this._getChartDependencies})};q.prototype._getChartDependencies=function(a){var b=this,c=a["data-media-info"],d=a["data-content-element-index"],e=c.value,h=e.theme||"Claro",f=c.type,l=h;"string"===typeof h&&(l=h.replace(/\./g,"/"));this._cancelChartModules();this._chartRequirePromise=k.create(function(a){return n(["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip","dojox/charting/themes/"+
l],function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return a(b)})}).then(function(c){b._renderChart(a,d,f,e,c[0],c[1],c[2]);b._chartRequirePromise=null})};q.prototype._renderChart=function(a,b,c,d,e,h,k){a=new e(a,{margins:{l:4,t:4,r:4,b:4}});k&&a.setTheme(k);switch(c){case "pie-chart":a.addPlot("default",{type:"Pie",labels:!1});a.addSeries("Series A",d.chartOptions);break;case "line-chart":a.addPlot("default",{type:"Markers"});a.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,
majorLabels:!1,minorLabels:!1});a.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});d.chartOptions.forEach(function(a,b){a.x=b+1});a.addSeries("Series A",d.chartOptions);break;case "column-chart":a.addPlot("default",{type:"Columns",gap:3});a.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});a.addSeries("Series A",d.chartOptions);break;case "bar-chart":a.addPlot("default",{type:"Bars",gap:3}),a.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),a.addAxis("y",{vertical:!0,
majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),a.addSeries("Series A",d.chartOptions)}c=new h(a);a.render();this._chartMap.set(b,{chart:a,tooltip:c})};q.prototype._renderMediaInfo=function(a,b){this._destroyChart(b);var c=this._renderMediaInfoType(a,b),d=a.title?r.tsx("div",{key:t("media-title",b),class:"esri-feature__media-item-title",innerHTML:a.title}):null;a=a.caption?r.tsx("div",{key:t("media-caption",b),class:"esri-feature__media-item-caption",innerHTML:a.caption}):null;return r.tsx("div",
{key:t("media-container",b),class:"esri-feature__media-item-container"},r.tsx("div",{key:t("media-item-container",b),class:"esri-feature__media-item"},c),d,a)};q.prototype._renderMediaStatsItem=function(a,b,c){c="chart"===c?this.classes("esri-feature__media-chart-icon","esri-icon-chart"):this.classes("esri-feature__media-image-icon","esri-icon-media");return r.tsx("li",{class:"esri-feature__media-image-summary"},r.tsx("span",{"aria-hidden":"true",class:c}),r.tsx("span",{class:"esri-feature__media-count",
"aria-label":a},"("+b+")"))};q.prototype._renderMediaPageButton=function(a,b){var c=(a="previous"===a)?f.previous:f.next,d=a?this.classes("esri-feature__button","esri-feature__media-previous"):this.classes("esri-feature__button","esri-feature__media-next"),e=a?this.classes("esri-feature__icon","esri-feature__media-previous-icon","esri-icon-left-triangle-arrow"):this.classes("esri-feature__icon","esri-feature__media-next-icon","esri-icon-right-triangle-arrow"),h=a?this.classes("esri-feature__icon",
"esri-feature__media-previous-icon--rtl","esri-icon-right-triangle-arrow"):this.classes("esri-feature__icon","esri-feature__media-next-icon--rtl","esri-icon-left-triangle-arrow"),k=a?this._previousClick:this._nextClick;return r.tsx("div",{key:t(a?"previous":"next",b),title:c,tabIndex:0,role:"button",class:d,"data-content-element-index":b,bind:this,onkeydown:k,onclick:k},r.tsx("span",{"aria-hidden":"true",class:e}),r.tsx("span",{"aria-hidden":"true",class:h}),r.tsx("span",{class:"esri-icon-font-fallback-text"},
c))};q.prototype._handleMediaKeyup=function(a){var b=a.currentTarget["data-content-element-index"],c=a.keyCode;c===d.LEFT_ARROW&&(a.stopPropagation(),this.previousMedia(b));c===d.RIGHT_ARROW&&(a.stopPropagation(),this.nextMedia(b))};q.prototype._renderMedia=function(a,b){a=a.mediaInfos;var c=this._getMediaStats(a),d=c.total,e=(h={},h["esri-feature--media-pagination-visible"]=1<c.total,h),h=this._renderMediaStatsItem(f.numImages,c.images,"image"),c=this._renderMediaStatsItem(f.numCharts,c.charts,"chart"),
k=this._renderMediaPageButton("previous",b),l=this._renderMediaPageButton("next",b),m=this._activeMediaMap.get(b);isNaN(m)&&(this._activeMediaMap.set(b,0),m=0);return d?r.tsx("div",{key:t("media-element",b),"data-content-element-index":b,bind:this,onkeyup:this._handleMediaKeyup,class:this.classes("esri-feature__media","esri-feature__content-element",e)},r.tsx("ul",{class:"esri-feature__media-summary"},h,c),r.tsx("div",{key:t("media-element-container",b),class:"esri-feature__media-container"},k,this._renderMediaInfo(a[m],
b),l)):null;var h};q.prototype._renderText=function(a,b){return a.text?r.tsx("div",{key:t("text-element",b),innerHTML:a.text,class:this.classes("esri-feature__text","esri-feature__content-element")}):null};q.prototype._attachToNode=function(a){a.appendChild(this)};q.prototype._getMediaStats=function(a){var b=0,c=0;a.forEach(function(a){a=a.type;"image"===a?b++:-1!==a.indexOf("chart")&&c++});return{total:c+b,images:b,charts:c}};q.prototype._setContentElementMedia=function(a,b){this._clearMediaRefreshTimer(a);
var c=this.viewModel.content;(c=(c=c&&c[a])&&c.mediaInfos)&&c.length&&(this._activeMediaMap.set(a,(b+c.length)%c.length),this._setupMediaRefreshTimer(a),this.scheduleRender())};q.prototype._pageContentElementMedia=function(a,b){b="previous"===b?-1:1;b=this._activeMediaMap.get(a)+b;this._setContentElementMedia(a,b)};q.prototype._previousClick=function(a){this.previousMedia(a.currentTarget["data-content-element-index"])};q.prototype._nextClick=function(a){this.nextMedia(a.currentTarget["data-content-element-index"])};
a([c.aliasOf("viewModel.contentEnabled")],q.prototype,"contentEnabled",void 0);a([c.aliasOf("viewModel.graphic")],q.prototype,"graphic",void 0);a([c.aliasOf("viewModel.title")],q.prototype,"title",void 0);a([c.aliasOf("viewModel.view")],q.prototype,"view",void 0);a([c.property({type:h}),r.renderable(["viewModel.waitingForContent","viewModel.content"])],q.prototype,"viewModel",void 0);a([r.accessibleHandler()],q.prototype,"_previousClick",null);a([r.accessibleHandler()],q.prototype,"_nextClick",null);
return q=a([c.subclass("esri.widgets.Feature")],q)}(c.declared(l))})},"esri/widgets/Feature/FeatureViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper dojo/i18n!dojo/cldr/nls/number ../../Graphic ../../core/date ../../core/Error ../../core/Handles ../../core/lang ../../core/Logger ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../support/arcadeUtils ./support/featureUtils ./support/RelatedFeatures ../support/widget".split(" "),
function(n,g,b,a,f,d,k,e,c,l,h,m,p,r,t,q,u,x,v){function y(a,b){return a&&"feature"===a.type?a.getField(b):null}function w(a){return a.replace(/[\u00A0-\u99999<>\&]/gim,function(a){return"\x26#"+a.charCodeAt(0)+";"})}var A=m.getLogger("esri.widgets.FeatureViewModel"),B=/^\s*expression\//i,z="/"+d.group+"/g",C=new c("cancelled-query","cancelled feature query"),E=e.getFormat("short-date-short-time"),D="DateFormat"+E;return function(c){function f(a){a=c.call(this)||this;a._handles=new l;a._featurePromise=
void 0;a._layerDateFields=[];a.content=null;a.contentEnabled=!0;a.formattedAttributes=null;a.title="";a.view=null;return a}b(f,c);f.prototype.destroy=function(){this._clear();this._handles.destroy();this.graphic=this.view=this._handles=null};Object.defineProperty(f.prototype,"graphic",{get:function(){return this._get("graphic")||null},set:function(a){if(a){var b=u.getSourceLayer(a);this._layerDateFields=b?this._getDateFields(b):[]}this._set("graphic",a);this._graphicChanged(a)},enumerable:!0,configurable:!0});
Object.defineProperty(f.prototype,"waitingForContent",{get:function(){var a=this._featurePromise;return a?!a.isFulfilled():!1},enumerable:!0,configurable:!0});f.prototype._clear=function(){this._cancelFeatureQuery();this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};f.prototype._graphicChanged=function(a){var b=this,c=this._handles;c&&(c.remove("graphic"),this._clear(),a&&(c.add(r.watch(this,["graphic.popupTemplate.title","graphic.popupTemplate.content","graphic.popupTemplate.fieldInfos",
"contentEnabled"],function(){b._graphicChanged(b.graphic)}),"graphic"),this._featurePromise=this._queryFeature().then(function(){b.notifyChange("waitingForContent")}).catch(function(a){b.notifyChange("waitingForContent");a!==C&&A.log("error","error loading template",a);throw a;}),this.notifyChange("waitingForContent")))};f.prototype._cancelFeatureQuery=function(){var a=this._featurePromise;a&&!a.isFulfilled()&&a.cancel(C)};f.prototype._compileContent=function(a,b){var c=this;if(a&&(a.nodeName||a&&
v.isWidgetBase(a)||v.isWidget(a)))return a;if("string"===typeof a)return this._compileText({type:"text",text:a}).text;if(Array.isArray(a))return a.map(function(a,d){d=(d=b&&b[d])&&d.value;var e=a.type;if("attachments"===e)return c._compileAttachments(a,d);if("fields"===e)return c._compileFields(a);if("media"===e)return c._compileMedia(a);if("text"===e)return c._compileText(a)});a&&A.warn("invalid content type.")};f.prototype._compileFields=function(a){var b=this,c=this.graphic;a=h.clone(a);var d=
c.get("popupTemplate.expressionInfos"),c=a.fieldInfos?void 0:c.get("popupTemplate.fieldInfos"),c=a.fieldInfos||h.clone(c),e=[];c&&c.forEach(function(a){var c=a.fieldName.toLowerCase();if(!a.hasOwnProperty("visible")||a.visible)c=b._isExpressionField(c)?b._getExpressionInfo(d,c):null,a.label=c?c.title:a.label,e.push(a)});a.fieldInfos=e;return a};f.prototype._setImageValue=function(a){var b=a.value,c=a.formattedAttributes;a=a.layer;var d=b.linkURL,e=b.sourceURL;e&&(b.sourceURL=h.substitute(c,this._fixTokens(e,
a)));d&&(b.linkURL=(""+h.substitute(c,this._fixTokens(d,a))).trim())};f.prototype._compileMedia=function(a){var b=this,c=this._layerDateFields,d=this.graphic;a=h.clone(a);var e=a.mediaInfos||[],f=d.attributes,k=u.getSourceLayer(d),l=this.formattedAttributes.global,m={dateFormat:{properties:c,formatter:D}};a.mediaInfos=e.map(function(a){if(a=h.clone(a)){var c=a.value,d=a.type,e=a.title?b._processFieldsInLinks(b._fixTokens(a.title,k),f):"",p=a.caption?b._processFieldsInLinks(b._fixTokens(a.caption,
k),f):"";a.title=e?(""+h.substitute(l,e,m)).trim():"";a.caption=p?(""+h.substitute(l,p,m)).trim():"";if("image"===d)return b._setImageValue({value:c,formattedAttributes:l,layer:k}),a.value.sourceURL?a:void 0;if("pie-chart"===d||"line-chart"===d||"column-chart"===d||"bar-chart"===d)return b._setChartValue({value:c,attributes:f,formattedAttributes:l,layer:k}),a}}).filter(Boolean);return a};f.prototype._compileText=function(a){var b=this._layerDateFields,c=this.graphic;if((a=h.clone(a))&&a.text){var d=
u.getSourceLayer(c),e=c.attributes,c=this.formattedAttributes.global,b={dateFormat:{properties:b,formatter:D}},d=this._processFieldsInLinks(this._fixTokens(a.text,d),e);a.text=(""+h.substitute(c,d,b)).trim()}return a};f.prototype._compileTitle=function(){var a=this._layerDateFields,b=this.graphic,c=b.get("popupTemplate.title"),d=b.attributes,e=u.getSourceLayer(b),a={dateFormat:{properties:a,formatter:D}},f=this.formattedAttributes.global;return"function"===typeof c?c.call(null,{graphic:b}):"string"===
typeof c&&c?(b=this._processFieldsInLinks(this._fixTokens(c,e),d),(""+h.substitute(f,b,a)).trim()):""};f.prototype._getExpressionInfo=function(a,b){if(this._isExpressionField(b)){var c=b.replace(B,"").toLowerCase(),d;a.some(function(a){if(a.name.toLowerCase()===c)return d=a,!0});return d}};f.prototype._fixTokens=function(a,b){return a.replace(/(\{([^\{\r\n]+)\})/g,function(a,c,d){return(a=y(b,d))?"{"+a.name+"}":c})};f.prototype._encodeAttributes=function(a){var b=a?h.clone(a):{};Object.keys(b).forEach(function(a){var c=
b[a];"string"===typeof c&&(c=encodeURIComponent(c).replace(/\'/g,"\x26apos;"),b[a]=c)});return b};f.prototype._formatAttributesToFieldInfos=function(a,b,c){var d=this,e=h.clone(this._layerDateFields);a.forEach(function(h){var f=d._getFixedFieldName(h.fieldName,b);h.fieldName=f;c[f]=d._formatValue(c[f],{fieldInfos:a,fieldName:f,layer:b});e&&h.format&&h.format.dateFormat&&(h=e.indexOf(f),-1<h&&e.splice(h,1))})};f.prototype._getArcadeViewingMode=function(a){return a&&"local"===a.viewingMode?"localScene":
"globalScene"};f.prototype._getViewInfo=function(){var a=this.view;if(a){var b="3d"===a.type?this._getArcadeViewingMode(a):"map";return q.getViewInfo({viewingMode:b,scale:a.scale,spatialReference:a.spatialReference})}};f.prototype._formatAttributes=function(a,b,c){var d=this,e=this.graphic,f=e.attributes,k=u.getSourceLayer(e),l=f?h.clone(f):{};b&&b.forEach(function(a){var b="expression/"+a.name;a=c.get(a.name);var h=d._getViewInfo();a=q.executeFunction(a,q.createExecContext(e,h));l[b]="string"===
typeof a?w(a):a});this.addRelatedFeatureAttributes(l);a&&this._formatAttributesToFieldInfos(a,k,l);if(k){var m=k.typeIdField;f&&Object.keys(f).forEach(function(a){if(!d.isRelatedField(a)){var b=f[a];h.isDefined(b)&&(b=d._getDomainName(a,b),h.isDefined(b)?l[a]=b:a===m&&(b=d._getTypeName(),h.isDefined(b)&&(l[a]=b)))}})}return l};f.prototype._formatValue=function(a,b){var c={dateFormat:{properties:this._layerDateFields,formatter:D}},f=b.fieldName,k=this._getFieldInfo(b.fieldInfos,f),l=h.clone(k),k=b.preventPlacesFormatting;
(b=y(b.layer,f))&&"date"===b.type&&(b=l.format||{},b.dateFormat=b.dateFormat||"short-date-short-time",l.format=b);f=l&&l.format;if(!h.isDefined(a)||!l||!h.isDefined(f))return a;var m=[],l=f.hasOwnProperty("places")||f.hasOwnProperty("digitSeparator");b=f.hasOwnProperty("digitSeparator")?f.digitSeparator:!0;k=h.isDefined(f.places)&&(!k||0<f.places);l&&k&&m.push("places: "+Number(f.places));k=l?k?"NumberFormat("+m.join(",")+")":"NumberFormat":f.dateFormat?"DateFormat"+(e.getFormat(f.dateFormat)||E):
void 0;if(!k)return a;a=h.substitute({myKey:a},"{myKey:"+k+"}",c)||"";return l&&!b&&d.group?a.replace(z,""):a};f.prototype._getDomainName=function(a,b){var c=this.graphic,d=u.getSourceLayer(c);return d&&"feature"===d.type?(a=d.getFieldDomain(a,{feature:c}))&&"coded-value"===a.type?a.getName(b):null:null};f.prototype._getFieldInfo=function(a,b){if(a&&a.length&&b){var c=b.toLowerCase(),d=void 0;a.some(function(a){if(a.fieldName&&a.fieldName.toLowerCase()===c)return d=a,!0});return d}};f.prototype._getTypeName=
function(){var a=this.graphic,b=u.getSourceLayer(a);if(b&&"feature"===b.type&&(a=b.getFeatureType(a)))return a.name};f.prototype._processFieldsInLinks=function(a,b){var c=this._encodeAttributes(b),d=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi;return a?a.replace(d,function(a,d,e){d=(""+(d||e)).trim();return h.substitute(d&&"{"===d[0]?b:c,a)}):a};f.prototype._compileAttachments=function(a,b){a=h.clone(a);if(!b)return a;a.attachmentInfos=b;return a};f.prototype._queryAttachments=function(){var a=this.graphic,
b=u.getSourceLayer(a);return b?(b="scene"===b.type&&b.associatedLayer?b.associatedLayer:b)&&"feature"===b.type?b.queryFeatureAttachments(a):p.resolve([]):p.resolve([])};f.prototype._queryContentElements=function(a){var b=this;if(!Array.isArray(a))return p.resolve();var c={};a.forEach(function(a,d){"attachments"===a.type&&(a=b._queryAttachments())&&(c[d]=a)});return Object.keys(c).length?p.eachAlways(c):p.resolve()};f.prototype._getContent=function(){var a=this.graphic;if(!this.contentEnabled)return p.resolve();
var b=a.get("popupTemplate.content"),a="function"===typeof b?b.call(null,{graphic:a}):b;return p.isThenable(a)?a:p.resolve(a)};f.prototype._queryFeature=function(){var a=this;return this._getContent().then(function(b){return a._checkForRelatedFeatures(b).then(function(){a._set("formattedAttributes",a._createFormattedAttributes(b));a._set("title",a._compileTitle());return a._queryContentElements(b).then(function(c){c=a._compileContent(b,c);a._set("content",c||null);return c})})})};f.prototype._isExpressionField=
function(a){return B.test(a)};f.prototype._createCompiledExpressionDictionary=function(a){var b=new Map;if(!a)return b;a.forEach(function(a){return b.set(a.name,q.createFunction(a.expression))});return b};f.prototype._getDateFields=function(a){return(a=a.fields)?a.filter(function(a){return"date"===a.type}).map(function(a){return a.name}):[]};f.prototype._createFormattedAttributes=function(a){var b=this,c=this.graphic,d=c.get("popupTemplate.fieldInfos"),e=c.get("popupTemplate.expressionInfos"),h=this._createCompiledExpressionDictionary(e),
f={global:this._formatAttributes(d,e,h),content:[]};Array.isArray(a)&&a.forEach(function(a,c){"fields"===a.type&&a.fieldInfos&&(f.content[c]=b._formatAttributes(a.fieldInfos,e,h))});return f};f.prototype._getAllFieldInfos=function(a){var b=[],c=this.graphic.get("popupTemplate.fieldInfos");c&&b.push.apply(b,c);if(!a||!Array.isArray(a))return b;a.forEach(function(a){b.push.apply(b,a&&a.fieldInfos)});return b};f.prototype._checkForRelatedFeatures=function(a){var b=this.graphic;a=this._getAllFieldInfos(a);
return this.queryRelatedInfos(b,a)};f.prototype._getChartOption=function(a){var b=a.value,c=a.attributes,e=a.formattedAttributes,h=a.fieldName,f=a.relatedFieldName,k=a.fieldInfos;a=u.getSourceLayer(this.graphic);var l=b.normalizeField,m=b.tooltipField,l=l?this.isRelatedField(l)?c[this.getRelatedFieldInfo(l).fieldName]:c[l]:null,b=f&&void 0!==c[f]?c[f]:void 0!==c[h]?c[h]:e[h],b="string"===typeof b&&d.group?parseFloat(b.replace(z,"")):b,p=void 0===b?null:b&&l?b/l:b,b={y:p};if(this.isRelatedField(h))return e=
this.getRelatedFieldInfo(h),h=(h=this.getRelatedFieldInfo(m))?h.fieldName:null,a=this._formatValue(p,{fieldInfos:k,fieldName:f,layer:a,preventPlacesFormatting:!!l}),f=e?e.label||e.fieldName:f,b.tooltip=(h&&void 0!==c[h]?c[h]:f)+": "+a,b;c=this._getFieldInfo(k,h);f=this._getFixedFieldName(h,a);c=c?c.label||c.fieldName:h;b.tooltip=(m&&void 0!==e[m]?e[m]:c)+": "+e[f];return b};f.prototype._getFixedFieldName=function(a,b){return(b=y(b,a))?b.name:a};f.prototype._getFixedFieldNames=function(a,b){var c=
this;return a&&a.map(function(a){return c._getFixedFieldName(a,b)})};f.prototype._setChartValue=function(a){var b=this,c=a.value,d=a.attributes,e=a.formattedAttributes;a=a.layer;var f=this.graphic,k=this.relatedInfoCount,l=c.fields,m=c.normalizeField;c.fields=this._getFixedFieldNames(l,a);m&&(c.normalizeField=this._getFixedFieldName(m,a));if(l.some(function(a){return!!(h.isDefined(e[a])||b.isRelatedField(a)&&k)})){var p=f.get("popupTemplate.fieldInfos");c.chartOptions=c.chartOptions||[];l.forEach(function(a){b.isRelatedField(a)?
c.chartOptions=c.chartOptions.concat(b._getRelatedChartInfos({fieldInfos:p,fieldName:a,formattedAttributes:e,value:c})):(a=b._getChartOption({value:c,attributes:d,formattedAttributes:e,fieldName:a,fieldInfos:p}),c.chartOptions.push(a))})}};f.prototype._getRelatedChartInfos=function(a){var b=this,c=a.fieldInfos,d=a.fieldName,e=a.formattedAttributes,h=a.value,f=[];a=this.getRelatedFieldInfo(d);var k=a.fieldName,l=this.getRelatedInfo(a.layerId);if(!l)return f;a=l.relatedFeatures;l=l.relation;if(!l||
!a)return f;l=l.cardinality;a.forEach(function(a){var l=a.attributes;l&&Object.keys(l).forEach(function(a){a===k&&f.push(b._getChartOption({value:h,attributes:l,formattedAttributes:e,fieldName:d,relatedFieldName:a,fieldInfos:c}))})});return"one-to-many"===l||"many-to-many"===l?f:[f[0]]};a([t.property({readOnly:!0})],f.prototype,"content",void 0);a([t.property()],f.prototype,"contentEnabled",void 0);a([t.property({readOnly:!0})],f.prototype,"formattedAttributes",void 0);a([t.property({type:k})],f.prototype,
"graphic",null);a([t.property({readOnly:!0})],f.prototype,"title",void 0);a([t.property()],f.prototype,"view",void 0);a([t.property({readOnly:!0})],f.prototype,"waitingForContent",null);return f=a([t.subclass("esri.widgets.FeatureViewModel")],f)}(t.declared(x))})},"esri/widgets/Feature/support/featureUtils":function(){define(["require","exports"],function(n,g){Object.defineProperty(g,"__esModule",{value:!0});g.getSourceLayer=function(b){if(b)return b.get("sourceLayer")||b.get("layer")}})},"esri/widgets/Feature/support/RelatedFeatures":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../request ../../../core/Accessor ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../core/accessorSupport/decorators ../../../tasks/QueryTask ../../../tasks/support/Query ../../../tasks/support/StatisticDefinition ./featureUtils".split(" "),
function(n,g,b,a,f,d,k,e,c,l,h,m,p,r){var t=new Map,q=e.getLogger("esri.widgets.Popup.support.RelatedFeatures");return function(d){function e(a){a=d.call(this)||this;a.relatedInfoCount=null;a.relatedInfos=new Map;return a}b(e,d);e.prototype.destroy=function(){this.relatedInfos.clear()};e.prototype.addRelatedFeatureAttributes=function(a){var b=this;this.relatedInfos.forEach(function(c){return b._addRelatedFeatureAttribute(a,c)})};e.prototype.getRelatedFieldInfo=function(a){if(-1===a.indexOf("relationships/"))return null;
a=a.split("/").slice(1);return{layerId:a[0],fieldName:a[1]}};e.prototype.getRelatedInfo=function(a){return this.relatedInfos.get(a.toString())};e.prototype.isRelatedField=function(a){void 0===a&&(a="");return a?-1!==a.indexOf("relationships/"):!1};e.prototype.queryRelatedInfos=function(a,b){var d=this;this.relatedInfos.clear();var e=r.getSourceLayer(a);if(!e)return c.resolve();var h=b.filter(function(a){return a&&d.isRelatedField(a.fieldName)});if(!h||!h.length)return c.resolve();this._createRelatedInfos(b,
e);return this._queryLayerInfos(e,b).then(function(b){d._updateRelatedInfoLayerInfos(b);return d._queryRelatedFeatureMap(a).then(function(a){Object.keys(a).forEach(function(b){d._setRelatedFeatures(a[b],b.toString())});return a})})};e.prototype._addRelatedFeatureAttribute=function(a,b){var c=this;a&&b&&("one-to-one"===b.relation.cardinality&&b.relatedFeatures&&b.relatedFeatures.forEach(function(d){return c._addAttributesFromFeature(a,d,b)}),b.relatedStatsFeatures&&b.relatedStatsFeatures.forEach(function(d){return c._addAttributesFromFeature(a,
d,b)}))};e.prototype._updateRelatedInfoLayerInfo=function(a,b){if(a=a.value)this.getRelatedInfo(b).layerInfo=a.data};e.prototype._updateRelatedInfoLayerInfos=function(a){var b=this;Object.keys(a).forEach(function(c){return b._updateRelatedInfoLayerInfo(a[c],c.toString())})};e.prototype._addAttributesFromFeature=function(a,b,c){var d=this;a&&b&&c&&Object.keys(b.attributes).forEach(function(e){var h=d._relatedFieldInfoToString({layerId:c.relation.id.toString(),fieldName:e});a[h]=b.attributes[e]})};
e.prototype._relatedFieldInfoToString=function(a){return a?"relationships/"+a.layerId+"/"+a.fieldName:""};e.prototype._createRelatedInfoForFieldInfo=function(a,b){var c=this.getRelatedFieldInfo(a.fieldName);if(c){var d=c.layerId,c=c.fieldName;d&&(b=this.getRelatedInfo(d)||this._createRelatedInfo(d,b))&&(b.relatedFields.push(c),a.statisticType&&(a=new p({statisticType:a.statisticType,onStatisticField:c,outStatisticFieldName:c}),b.outStatistics.push(a)))}};e.prototype._createRelatedInfos=function(a,
b){var c=this;a.forEach(function(a){return c._createRelatedInfoForFieldInfo(a,b)})};e.prototype._queryRelatedFeatureMap=function(a){var b=this,d={};this.relatedInfos.forEach(function(c,e){d[e]=b._queryRelatedLayerFeatures(a,c)});return c.eachAlways(d)};e.prototype._queryLayerInfos=function(a,b){var d=this,e={};this.relatedInfos.forEach(function(b,h){b=b.relation;if(!b)return h=new k("relation-required","A relation is required on a layer to retrieve related records."),q.error(h),c.reject(h);b=b.relatedTableId;
if(!b)return h=new k("A related table ID is required on a layer to retrieve related records."),q.error(h),c.reject(h);b=a.url+"/"+b;var f=t.get(b),l=f?f:d._queryLayerInfo(b);f||t.set(b,l);e[h]=l});return c.eachAlways(e)};e.prototype._queryLayerInfo=function(a){return f(a,{query:{f:"json"},callbackParamName:"callback"})};e.prototype._queryRelatedLayerFeatures=function(a,b){var d=r.getSourceLayer(a).layerId.toString(),e=b.layerInfo,h=b.queryTask,f=b.relation;if(d=this._getDestinationRelation(e,d)){var f=
f.keyField,k=d.keyField,d="string"===this._getDestinationFieldType(e,d)?k+"\x3d'"+a.attributes[f]+"'":k+"\x3d"+a.attributes[f];a=h.execute(new m({where:d,outFields:b.relatedFields}));b=b.outStatistics&&0<b.outStatistics.length&&e.supportsStatistics?h.execute(new m({where:d,outFields:b.relatedFields,outStatistics:b.outStatistics})):null;return c.eachAlways({features:a,statsFeatures:b?b:c.resolve()})}return c.resolve()};e.prototype._setRelatedFeatures=function(a,b){if(b=this.getRelatedInfo(b)){var c=
a.value;c&&(a=c.features,c=c.statsFeatures,a=a&&a.value,b.relatedFeatures=a?a.features:[],a=c&&c.value,b.relatedStatsFeatures=a?a.features:[])}};e.prototype._getRelation=function(a,b){if("feature"!==b.type)return null;var c=null;b.relationships.some(function(b){if(b.id===parseInt(a,10))return c=b,!0});return c};e.prototype._createRelatedInfo=function(a,b){var c=this._getRelation(a,b);if(c){b=b.url+"/"+c.relatedTableId;var d=new h({url:b}),c={url:b,queryTask:d,relation:c,relatedFields:[],outStatistics:[]};
this.relatedInfos.set(a,c);return c}};e.prototype._getDestinationRelation=function(a,b){var c;a&&a.relationships&&a.relationships.some(function(a){if(""+a.relatedTableId===b)return c=a,!0});return c};e.prototype._getDestinationFieldType=function(a,b){var c=void 0;a.fields.some(function(a){if(a.name===b.keyField)return c=-1!==["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"].indexOf(a.type)?"number":"string",!0});return c};a([l.aliasOf("relatedInfos.size")],
e.prototype,"relatedInfoCount",void 0);a([l.property()],e.prototype,"relatedInfos",void 0);return e=a([l.subclass("esri.widgets.Popup.support.RelatedFeatures")],e)}(l.declared(d))})},"esri/widgets/Feature/support/attachmentUtils":function(){define(["require","exports"],function(n,g){Object.defineProperty(g,"__esModule",{value:!0});var b=n.toUrl("../../../themes/base/images/files/");g.isSupportedImage=function(a){a=a.toLowerCase();return"image/bmp"===a||"image/emf"===a||"image/exif"===a||"image/gif"===
a||"image/x-icon"===a||"image/jpeg"===a||"image/png"===a||"image/tiff"===a||"image/x-wmf"===a};g.getIconPath=function(a){return"text/plain"===a?b+"text-32.svg":"application/pdf"===a?b+"pdf-32.svg":"text/csv"===a?b+"csv-32.svg":"application/gpx+xml"===a?b+"gpx-32.svg":"application/x-dwf"===a?b+"cad-32.svg":"application/postscript"===a||"application/json"===a||"text/xml"===a||"model/vrml"===a?b+"code-32.svg":"application/x-zip-compressed"===a||"application/x-7z-compressed"===a||"application/x-gzip"===
a||"application/x-tar"===a||"application/x-gtar"===a||"application/x-bzip2"===a||"application/gzip"===a||"application/x-compress"===a||"application/x-apple-diskimage"===a||"application/x-rar-compressed"===a||"application/zip"===a?b+"zip-32.svg":-1!==a.indexOf("image/")?b+"image-32.svg":-1!==a.indexOf("audio/")?b+"sound-32.svg":-1!==a.indexOf("video/")?b+"video-32.svg":-1!==a.indexOf("msexcel")||-1!==a.indexOf("ms-excel")||-1!==a.indexOf("spreadsheetml")?b+"excel-32.svg":-1!==a.indexOf("msword")||
-1!==a.indexOf("ms-word")||-1!==a.indexOf("wordprocessingml")?b+"word-32.svg":-1!==a.indexOf("powerpoint")||-1!==a.indexOf("presentationml")?b+"report-32.svg":b+"generic-32.svg"}})},"esri/widgets/support/uriUtils":function(){define(["require","exports","dojo/i18n!./nls/uriUtils","../../core/lang"],function(n,g,b,a){function f(a){var b=null;d.some(function(c){c.pattern.test(a)&&(b=c);return!!b});return b}Object.defineProperty(g,"__esModule",{value:!0});var d=[{id:"http",pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,
target:"_blank",label:b.view},{id:"tel",pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{id:"mailto",pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{id:"arcgis-appstudio-player",pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:b.openInApp,appName:"App Studio Player"},{id:"arcgis-collector",pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:b.openInApp,appName:"Collector"},{id:"arcgis-explorer",pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:b.openInApp,
appName:"Explorer"},{id:"arcgis-navigator",pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:b.openInApp,appName:"Navigator"},{id:"arcgis-survey123",pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:b.openInApp,appName:"Survey123"},{id:"arcgis-trek2there",pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:b.openInApp,appName:"Trek2There"},{id:"arcgis-workforce",pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:b.openInApp,appName:b.workforce},{id:"iform",pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,
label:b.openInApp,appName:"iForm"},{id:"flow",pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:b.openInApp,appName:"FlowFinity"},{id:"lfmobile",pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:b.openInApp,appName:"Laserfische"},{id:"mspbi",pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:b.openInApp,appName:"Microsoft Power Bi"}];g.autoLink=function(b){if("string"!==typeof b||!b)return b;var d=f(b);if(!d)return b;var c=b.match(d.pattern),c=a.substitute({appName:d.appName,hierPart:c&&c[2]},d.label);return b.replace(d.pattern,
"\x3ca "+(d.target?'target\x3d"'+d.target+'"':"")+'" href\x3d"$1"\x3e'+c+"\x3c/a\x3e")}})},"esri/widgets/Spinner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./support/AnchorElementViewModel ./support/widget".split(" "),function(n,g,b,a,f,d,k,e,c,l){return function(e){function h(a){a=e.call(this)||this;a._animationDelay=500;a._animationPromise=null;a.location=
null;a.view=null;a.visible=!1;a.viewModel=new c;return a}b(h,e);h.prototype.postInitialize=function(){var a=this;this.own([d.watch(this,"visible",function(b){return a._visibleChange(b)})])};h.prototype.destroy=function(){this._cancelAnimationPromise()};h.prototype.show=function(a){var b=this,c=a.location;a=a.promise;c&&(this.viewModel.location=c);this.visible=!0;a&&a.always(function(){return b.hide()})};h.prototype.hide=function(){this.visible=!1};h.prototype.render=function(){var a=this.visible,
b=!!this.viewModel.screenLocation,a=(c={},c["esri-spinner--start"]=a&&b,c["esri-spinner--finish"]=!a&&b,c),c=this._getPositionStyles();return l.tsx("div",{class:this.classes("esri-spinner",a),styles:c});var c};h.prototype._cancelAnimationPromise=function(){this._animationPromise&&(this._animationPromise.cancel(),this._animationPromise=null)};h.prototype._visibleChange=function(a){var b=this;a?this.viewModel.screenLocationEnabled=!0:(this._cancelAnimationPromise(),this._animationPromise=f.after(this._animationDelay).then(function(){b.viewModel.screenLocationEnabled=
!1;b._animationPromise=null}))};h.prototype._getPositionStyles=function(){var a=this.viewModel,b=a.screenLocation,a=a.view;if(!a||!b)return{};a=a.padding;return{left:b.x-a.left+"px",top:b.y-a.top+"px"}};a([k.aliasOf("viewModel.location")],h.prototype,"location",void 0);a([k.aliasOf("viewModel.view")],h.prototype,"view",void 0);a([k.property(),l.renderable()],h.prototype,"visible",void 0);a([k.property({type:c}),l.renderable(["viewModel.screenLocation","viewModel.screenLocationEnabled"])],h.prototype,
"viewModel",void 0);return h=a([k.subclass("esri.widgets.Spinner")],h)}(k.declared(e))})},"esri/widgets/support/AnchorElementViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),function(n,g,b,a,f,d,k,e,c,l){return function(d){function h(){var a=d.call(this)||this;a._anchorHandles=
new k;a.location=null;a.screenLocation=null;a.screenLocationEnabled=!1;a.view=null;a._anchorHandles.add([c.watch(a,"screenLocationEnabled,location,view.size",function(){return a._updateScreenPointAndHandle()}),c.watch(a,"view, view.ready",function(){return a._wireUpView()})]);return a}b(h,d);h.prototype.destroy=function(){this.view=null;this._anchorHandles&&this._anchorHandles.destroy();this._viewpointHandle=this._anchorHandles=null};h.prototype._wireUpView=function(){var a=this;this._anchorHandles.remove("view");
this._viewpointHandle=null;if(this.get("view.ready")){this._setScreenLocation();var b=this.view,b=e.pausable(b,"3d"===b.type?"camera":"viewpoint",function(){return a._viewpointChange()});this._anchorHandles.add(b,"view");this._viewpointHandle=b;this._toggleWatchingViewpoint()}};h.prototype._viewpointChange=function(){this._setScreenLocation();this.emit("view-change")};h.prototype._updateScreenPointAndHandle=function(){this._setScreenLocation();this._toggleWatchingViewpoint()};h.prototype._toggleWatchingViewpoint=
function(){var a=this._viewpointHandle,b=this.screenLocationEnabled;a&&(this.location&&b?a.resume():a.pause())};h.prototype._setScreenLocation=function(){var a=this.location,b=this.view,c=this.screenLocationEnabled,d=this.get("view.ready"),a=c&&a&&d?b.toScreen(a):null;this._set("screenLocation",a)};a([l.property()],h.prototype,"location",void 0);a([l.property({readOnly:!0})],h.prototype,"screenLocation",void 0);a([l.property()],h.prototype,"screenLocationEnabled",void 0);a([l.property()],h.prototype,
"view",void 0);return h=a([l.subclass("esri.widgets.support.AnchorElementViewModel")],h)}(l.declared(f,d))})},"esri/widgets/Popup/PopupViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/Collection ../../core/Error ../../core/Handles ../../core/Logger ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/Point ../../geometry/support/webMercatorUtils ../../support/Action ../support/AnchorElementViewModel ../support/GoTo".split(" "),
function(n,g,b,a,f,d,k,e,c,l,h,m,p,r,t,q,u){function x(a,b){return b.allLayerViews.find(function(b){return b.layer===a})}n=new t({id:"zoom-to"});var v=new (d.ofType(t))([n]),y=c.getLogger("esri.widgets.Popup.PopupViewModel");return function(c){function q(a){a=c.call(this)||this;a._handles=new e;a._originalActions=null;a._pendingPromises=new Set;a.actions=v;a.autoCloseEnabled=!1;a.content=null;a.highlightEnabled=!0;a.title=null;a.updateLocationEnabled=!1;a.view=null;a.visible=!1;a.zoomFactor=4;return a}
b(q,c);q.prototype.initialize=function(){this._handles.add([this.on("view-change",this._autoClose),h.watch(this,["highlightEnabled","selectedFeature","visible","view"],this._highlightFeature),h.watch(this,"selectedFeature.popupTemplate.actions",this._getSelectedFeatureActions),h.watch(this,"selectedFeature.popupTemplate.overwriteActions",this._getSelectedFeatureActions)])};q.prototype.destroy=function(){this._handles.destroy();this._handles=null;this._pendingPromises.clear();this.view=null};Object.defineProperty(q.prototype,
"featureCount",{get:function(){return this.features.length},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"features",{get:function(){return this._get("features")||[]},set:function(a){a=a||[];this._set("features",a);var b=this.pendingPromisesCount,c=this.selectedFeatureIndex,d=this.promiseCount&&a.length;d&&b&&-1===c?this.selectedFeatureIndex=0:d&&-1!==c||(this.selectedFeatureIndex=a.length?0:-1)},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"location",{get:function(){return this._get("location")||
null},set:function(a){var b=this.get("location"),c=this.get("view.spatialReference.isWebMercator");a&&a.get("spatialReference.isWGS84")&&c&&(a=r.geographicToWebMercator(a));this._set("location",a);a!==b&&this._centerAtLocation()},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"pendingPromisesCount",{get:function(){return this._pendingPromises.size},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"waitingForResult",{get:function(){return 0<this.pendingPromisesCount&&
0===this.featureCount},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"promiseCount",{get:function(){return this.promises.length},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"promises",{get:function(){return this._get("promises")||[]},set:function(a){var b=this,c=this._get("promises");c&&c.forEach(function(a){a&&"function"===typeof a.cancel&&a.cancel()});this._pendingPromises.clear();this.features=[];Array.isArray(a)&&a.length?(this._set("promises",a),a=a.slice(0),
a.forEach(function(a){b._pendingPromises.add(a);a.then(function(c){b._updatePendingPromises(a);b._updateFeatures(c)},function(){return b._updatePendingPromises(a)})})):this._set("promises",[]);this.notifyChange("pendingPromisesCount")},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"selectedFeature",{get:function(){var a=this.selectedFeatureIndex;if(-1===a)return null;a=this.features[a];if(!a)return null;this.updateLocationEnabled&&(this.location=this._getPointFromGeometry(a.geometry));
return a},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"selectedFeatureIndex",{get:function(){var a=this._get("selectedFeatureIndex");return"number"===typeof a?a:-1},set:function(a){var b=this.featureCount;a=isNaN(a)||-1>a||!b?-1:(a+b)%b;this._set("selectedFeatureIndex",a)},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});q.prototype.centerAtLocation=function(){var a=
this.location,b=this.view;return a&&b?this.callGoTo({target:{target:a,scale:b.scale}}):(a=new k("center-at-location:invalid-location-or-view","Cannot center at a location without a location and view.",{location:a,view:b}),y.error(a),l.reject(a))};q.prototype.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null})};q.prototype.open=function(a){this.set(f({visible:!1},{updateLocationEnabled:!1,promises:[]},a));this._setVisibleWhenContentExists()};q.prototype.triggerAction=
function(a){(a=this.actions.getItemAt(a))&&this.emit("trigger-action",{action:a})};q.prototype.next=function(){this.selectedFeatureIndex+=1;return this};q.prototype.previous=function(){--this.selectedFeatureIndex;return this};q.prototype.zoomToLocation=function(){var a=this,b=this.location,c=this.selectedFeature,d=this.view,e=this.zoomFactor;if(!b||!d)return c=new k("zoom-to:invalid-location-or-view","Cannot zoom to location without a location and view.",{location:b,view:d}),y.error(c),l.reject(c);
var e=d.scale/e,h=this.get("selectedFeature.geometry"),d=c&&"3d"===d.type,b=(d=h||d)?c:b,f=d&&h&&"point"===h.type&&this._isScreenSize(c);return this.callGoTo({target:{target:b,scale:f?e:void 0}}).then(function(){f&&"point"===h.type&&(a.location=h)})};q.prototype._updatePendingPromises=function(a){a&&this._pendingPromises.has(a)&&(this._pendingPromises.delete(a),this.notifyChange("pendingPromisesCount"))};q.prototype._setVisibleWhenContentExists=function(){var a=this,b=this._handles,c=this.promiseCount;
b.remove("pendingVisible");c?(c=h.init(this,"pendingPromisesCount",function(c){a.featureCount&&(a.set("visible",!0),b.remove("pendingVisible"));c||b.remove("pendingVisible")}),b.add(c,"pendingVisible")):this.set("visible",!0)};q.prototype._autoClose=function(){this.autoCloseEnabled&&(this.visible=!1)};q.prototype._isScreenSize=function(a){var b=this.view;if("3d"!==b.type||"esri.Graphic"!==a.declaredClass)return!0;if((b=b.getViewForGraphic(a))&&b.whenGraphicBounds){var c=!1;b.whenGraphicBounds(a,{useViewElevation:!0}).then(function(a){c=
!a||!a.boundingBox||a.boundingBox[0]===a.boundingBox[3]&&a.boundingBox[1]===a.boundingBox[4]&&a.boundingBox[2]===a.boundingBox[5]});return c}return!0};q.prototype._getSelectedFeatureActions=function(){this._originalActions&&(this.actions=this._originalActions,this._originalActions=null);var a=this.actions.filter(function(a){return!a.temporary}),b=this.get("selectedFeature.popupTemplate");b&&b.overwriteActions&&(this._originalActions=a);this.actions=this._getNewActions(b,a)};q.prototype._getNewActions=
function(a,b){if(!a||!a.actions)return b;var c=a.actions;c.forEach(function(a){a.temporary=!0});return a.overwriteActions?c:b.concat(c)};q.prototype._getPointFromGeometry=function(a){return a?"point"===a.type?a:"extent"===a.type?a.center:"polygon"===a.type?a.centroid:"multipoint"===a.type||"polyline"===a.type?a.extent.center:null:null};q.prototype._centerAtLocation=function(){var a=this.location,b=this.updateLocationEnabled,c=this.get("view.extent");b&&c&&a&&!c.contains(a)&&this.centerAtLocation()};
q.prototype._highlightFeature=function(){this._handles.remove("highlight");var a=this.selectedFeature,b=this.highlightEnabled,c=this.view,d=this.visible;a&&c&&b&&d&&(b=a.layer)&&(c=x(b,c))&&"function"===typeof c.highlight&&(b=b.objectIdField,d=a.attributes,a=c.highlight(d&&d[b]||a,{}),this._handles.add(a,"highlight"))};q.prototype._updateFeatures=function(a){var b=this.features;a&&a.length&&(b.length?(a=a.filter(function(a){return-1===b.indexOf(a)}),this.features=b.concat(a)):this.features=a)};a([m.property({type:d.ofType(t)})],
q.prototype,"actions",void 0);a([m.property()],q.prototype,"autoCloseEnabled",void 0);a([m.property()],q.prototype,"content",void 0);a([m.property({readOnly:!0,dependsOn:["features"]})],q.prototype,"featureCount",null);a([m.property()],q.prototype,"features",null);a([m.property()],q.prototype,"highlightEnabled",void 0);a([m.property({type:p})],q.prototype,"location",null);a([m.property({readOnly:!0,dependsOn:["promises"]})],q.prototype,"pendingPromisesCount",null);a([m.property({readOnly:!0,dependsOn:["featureCount",
"pendingPromisesCount"]})],q.prototype,"waitingForResult",null);a([m.property({readOnly:!0,dependsOn:["promises"]})],q.prototype,"promiseCount",null);a([m.property()],q.prototype,"promises",null);a([m.property({value:null,readOnly:!0,dependsOn:["features","selectedFeatureIndex","updateLocationEnabled"]})],q.prototype,"selectedFeature",null);a([m.property({value:-1})],q.prototype,"selectedFeatureIndex",null);a([m.property({readOnly:!0,dependsOn:["view.ready"]})],q.prototype,"state",null);a([m.property()],
q.prototype,"title",void 0);a([m.property()],q.prototype,"updateLocationEnabled",void 0);a([m.property()],q.prototype,"view",void 0);a([m.property()],q.prototype,"visible",void 0);a([m.property()],q.prototype,"zoomFactor",void 0);a([m.property()],q.prototype,"centerAtLocation",null);a([m.property()],q.prototype,"clear",null);a([m.property()],q.prototype,"triggerAction",null);a([m.property()],q.prototype,"next",null);a([m.property()],q.prototype,"previous",null);a([m.property()],q.prototype,"zoomToLocation",
null);return q=a([m.subclass("esri.widgets.Popup.PopupViewModel")],q)}(m.declared(q,u))})},"esri/widgets/support/GoTo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(n,g,b,a,f,d){return function(f){function e(){var a=null!==f&&f.apply(this,arguments)||this;a.goToOverride=null;a.view=null;return a}b(e,f);e.prototype.callGoTo=function(a){var b=this.view;return this.goToOverride?
this.goToOverride(b,a):b.goTo(a.target,a.options)};a([d.property()],e.prototype,"goToOverride",void 0);a([d.property()],e.prototype,"view",void 0);return e=a([d.subclass("esri.widgets.support.GoTo")],e)}(d.declared(f))})},"esri/views/MapViewBase":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/_base/lang ../geometry ../Viewpoint ../core/Error ../core/Handles ../core/Logger ../core/promiseUtils ../core/accessorSupport/decorators ../geometry/support/webMercatorUtils ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/viewpointUtils".split(" "),
function(n,g,b,a,f,d,k,e,c,l,h,m,p,r,t,q,u,x,v,y){var w=l.getLogger("esri.views.MapView");return function(l){function r(a){var b=l.call(this,a)||this;b._frameTask=new u(b);b._mapViewBaseHandles=new c;b._setup=!1;b.fullOpacity=1;b.interacting=!1;b.initialExtent=null;b.resizeAlign="center";b.type="2d";b.constraints=new x;b.padding={top:0,right:0,bottom:0,left:0};var d=function(){this._set("updating",this.layerViewManager.factory.working||this.allLayerViews.some(function(a){return!0===a.updating}))}.bind(b),
e=b._mapViewBaseHandles;e.add([b.watch("viewpoint",function(a){return b._flipStationary()},!0),b.on("resize",function(a){return b._resizeHandler(a)}),b.watch("animationManager.animation",function(a){b.animation=a}),b.allLayerViews.on("change",function(){d();e.remove("layerViewsUpdating");e.add(b.allLayerViews.map(function(a){return a.watch("updating",d)}).toArray(),"layerViewsUpdating")})]);b.watch("ready",function(a){a?b._startup():b._tearDown()});return b}b(r,l);r.prototype.destroy=function(){this.destroyed||
(this._set("ready",!1),this._mapViewBaseHandles.removeAll(),this.layerViewManager.clear(),this._frameTask.destroy(),this._tearDown(),this._gotoTask=this._mapViewBaseHandles=this._frameTask=null)};Object.defineProperty(r.prototype,"animation",{set:function(a){var b=this,c=this._get("animation");a!==c&&(c&&c.stop(),!a||a.isFulfilled()?this._set("animation",null):(this._set("animation",a),c=function(){a===b._get("animation")&&(b._set("animation",null),b._frameTask.requestFrame())},a.when(c,c,function(a){b.state&&
(b.state.viewpoint=a)})))},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"center",{get:function(){if(!this._setup)return this._get("center");var a=this.content.center;return new d.Point({x:a[0],y:a[1],spatialReference:this.content.spatialReference})},set:function(a){if(null!=a)if(this._normalizeInput(a))if(this._setup){var b=this.viewpoint;y.centerAt(b,b,a);this.viewpoint=b}else this._set("center",a),this.notifyChange("initialExtentRequired");else w.error("#center","incompatible spatialReference "+
JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"constraints",{set:function(a){var b=this,c=this._get("constraints");c&&(this._mapViewBaseHandles.remove("constraints"),c.destroy());this._set("constraints",a);a&&(this._setup&&(a.view=this,this.state.viewpoint=a.fit(this.content.viewpoint)),this._mapViewBaseHandles.add(a.on("update",function(){b._setup&&b.state&&(b.state.viewpoint=
a.fit(b.content.viewpoint))}),"constraints"))},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"extent",{get:function(){return this._setup?this.content.extent.clone():this._get("extent")},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?b.width&&b.height?this._setup?(a=this.viewpoint,y.setExtent(a,a,b,this.size,{constraints:this.constraints}),this.viewpoint=a):(this._set("extent",b),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",
-1),this.notifyChange("initialExtentRequired")):w.error("#extent","invalid extent size"):w.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))}},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"initialExtentRequired",{get:function(){var a=this.extent,b=this.center,c=this.scale,d=this.viewpoint,e=this.zoom;return this.get("map.initialViewProperties.viewpoint")||a||b&&(0!==c||-1!==
e)||d?!1:!0},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"padding",{get:function(){return this._setup?this.state.padding:this._get("padding")},set:function(a){this._setup?(this.state.padding=a,this._set("padding",this.state.padding)):this._set("padding",a)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"rotation",{get:function(){return this._setup?this.content.rotation:this._get("rotation")},set:function(a){if(!isNaN(a))if(this._setup){var b=this.viewpoint;
y.rotateTo(b,b,a);this.viewpoint=b}else this._set("rotation",a)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"scale",{get:function(){return this._setup?this.content.scale:this._get("scale")},set:function(a){if(a&&!isNaN(a))if(this._setup){var b=this.viewpoint;y.scaleTo(b,b,a);this.viewpoint=b}else{this._set("scale",a);this._set("zoom",-1);if(a=this._get("extent"))this._set("extent",null),this._set("center",a.center);this.notifyChange("initialExtentRequired")}},enumerable:!0,
configurable:!0});Object.defineProperty(r.prototype,"stationary",{get:function(){return!this.animation&&!this.interacting&&!this._get("resizing")&&!this._stationaryTimer},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"viewpoint",{get:function(){if(!this._setup)return this._get("viewpoint");var a=this.content;return a&&a.viewpoint.clone()},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?this._setup?(a=y.create(),y.copy(a,b),this.constraints.constrain(a,this.content.viewpoint),
this.state.viewpoint=a,this._frameTask.requestFrame(),this._set("viewpoint",a)):(this._set("viewpoint",b),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!a.scale||isNaN(a.scale)?w.error("#viewpoint","invalid scale value of "+a.scale):a.targetGeometry?w.error("#viewpoint","incompatible spatialReference "+JSON.stringify(a.targetGeometry.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference)):
w.error("#viewpoint","geometry not defined")}},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"zoom",{get:function(){return this._setup?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(a){if(null!=a){if(!this._setup){this.notifyChange("initialExtentRequired");this._set("zoom",a);this._set("scale",0);var b=this._get("extent");b&&(this._set("extent",null),this._set("center",b.center))}this.constraints.effectiveLODs&&(b=this.viewpoint,y.scaleTo(b,b,this.constraints.zoomToScale(a)),
this.viewpoint=b,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}},enumerable:!0,configurable:!0});r.prototype.goTo=function(a,b){this.animation&&(this.animation=null);if(this._setup)return b=f.mixin({animate:!0},b),a=y.createAsync(a,this),this._gotoTask={},b.animate?this._gotoAnimated(a,b):this._gotoImmediate(a,b);w.error("#goTo()","MapView cannot be used before it is ready")};r.prototype.hitTest=function(a,b){return h.reject("Should be implemented by subclasses")};r.prototype.toMap=
function(a,b,c){if(!this._setup)return null;a&&null!=a.x&&(c=b,b=a.y,a=a.x);var e=[0,0];this.state.toMap(e,[a,b]);c=c||new d.Point;c.x=e[0];c.y=e[1];c.spatialReference=this.spatialReference;return c};r.prototype.isTileInfoRequired=function(){return!0};r.prototype.toScreen=function(a,b,c,e){if(!this._setup)return null;a&&"object"===typeof a?(e=b||new d.ScreenPoint,a=this._normalizeInput(a),b=a.y,a=a.x):e="number"===typeof c||null==c?e||new d.ScreenPoint:c||new d.ScreenPoint;a=[a,b];this.state.toScreen(a,
a);e.x=a[0];e.y=a[1];return e};r.prototype.pixelSizeAt=function(a,b){if(!this._setup)return NaN;a&&null!=a.x&&(b=a.y,a=a.x);return this.content.pixelSizeAt([a,b])};r.prototype.requestLayerViewUpdate=function(a){this._setup&&this._frameTask.requestLayerViewUpdate(a)};r.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null};r.prototype.isSpatialReferenceSupported=function(a,b){if(b||this._get("ready"))return!0;
b=this._normalizeInput(this._get("center"),a);var c=this._normalizeInput(this._get("extent"),a),d=this._normalizeInput(this._get("viewpoint"),a),e=this._userSpatialReference,h=null,f=null;(d=d&&d.targetGeometry)&&("extent"===d.type?h=d:"point"===d.type&&(f=d));d=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"),a);a=this._normalizeInput(this.initialExtent,a);a=c||h||d||a;return b||f||a&&a.center?!0:(e&&w.error("The view could not be initialized with the spatialReference "+
e.wkid+".","Try specifying an extent or a center and scale"),!1)};r.prototype._createOrReplaceAnimation=function(a){if(!this.animation||this.animation.done)this.animation=new t;this.animation.update(a);return this.animation};r.prototype._cancellableGoTo=function(a,b,c){var d=this,e=c.then(function(){a===d._gotoTask&&(d.animation=null)}).catch(function(c){a===d._gotoTask&&(d.animation=null,b.done||b.stop());throw c;}),f=h.create(function(a){return a(e)},function(){a!==d._gotoTask||b.done||b.stop()});
b.catch(function(){a===d._gotoTask&&f.cancel()});return f};r.prototype._gotoImmediate=function(a,b){var c=this,d=this._gotoTask,h=this._createOrReplaceAnimation(a);a=a.then(function(a){if(d!==c._gotoTask)throw new e("view:goto-interrupted","Goto was interrupted");c.viewpoint=h.target=a;h.finish()});return this._cancellableGoTo(d,h,a)};r.prototype._gotoAnimated=function(a,b){var c=this,d=this._gotoTask,h=this._createOrReplaceAnimation(a);a=a.then(function(a){if(d!==c._gotoTask)throw new e("view:goto-interrupted",
"Goto was interrupted");h.update(a);c.animationManager.animate(h,c.viewpoint,b);return h.when().then(function(){})});return this._cancellableGoTo(d,h,a)};r.prototype._resizeHandler=function(a){var b=this.state;if(b){var c=this.content.viewpoint,d=this.content.size.concat();b.size=[a.width,a.height];y.resize(c,c,d,this.content.size,this.resizeAlign);c=this.constraints.constrain(c,null);this.state.viewpoint=c}};r.prototype._startup=function(){if(!this._setup){var a=this.constraints,b=this._get("zoom"),
c=this._get("scale"),d=this._normalizeInput(this._get("center")),e=this._normalizeInput(this._get("extent")),h=this._get("rotation"),f=this._normalizeInput(this._get("viewpoint"));a.view=this;a.effectiveLODs?-1!==b&&(c=a.zoomToScale(b)):b=-1;var l=null,m=null,p=0,b=f&&f.rotation,r=f&&f.targetGeometry;r&&("extent"===r.type?l=r:"point"===r.type&&(m=r,p=f.scale));f=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));r=this._normalizeInput(this.initialExtent);e=
e||l||f||r;d=d||m||e&&e.center;c=c||p||e&&y.extentToScale(e,this.size);h=new k({targetGeometry:d,scale:c,rotation:h||b||0});a.fit(h);this._set("animationManager",new q);this._set("state",new v({padding:this._get("padding"),size:this.size,viewpoint:h}));this._set("content",this.state.content);this._setup=!0}};r.prototype._tearDown=function(){if(this._setup){this._setup=!1;this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null,this.notifyChange("stationary"));var a=this._get("content"),
b=a.center,c=a.spatialReference,b=new d.Point({x:b[0],y:b[1],spatialReference:c});this._set("viewpoint",null);this._set("extent",null);this._set("center",b);this._set("zoom",-1);this._set("rotation",a.rotation);this._set("scale",a.scale);this._set("spatialReference",c);this.constraints.view=null;this.animationManager.destroy();this._set("animationManager",null);this._set("state",null);this._set("content",null);this.animation=null}};r.prototype._flipStationary=function(){var a=this;this._stationaryTimer&&
clearTimeout(this._stationaryTimer);this._stationaryTimer=setTimeout(function(){a._stationaryTimer=null;a.notifyChange("stationary")},160);this.notifyChange("stationary")};r.prototype._normalizeInput=function(a,b){void 0===b&&(b=this.spatialReference);var c=a&&a.targetGeometry||a;return b?c?b.equals(c.spatialReference)?a:p.canProject(c,b)?a&&"esri.Viewpoint"===a.declaredClass?(a.targetGeometry=p.project(c,b),a):p.project(c,b):null:null:a};a([m.property()],r.prototype,"animation",null);a([m.property({readOnly:!0})],
r.prototype,"animationManager",void 0);a([m.property({value:null,type:d.Point,dependsOn:["content.center"]})],r.prototype,"center",null);a([m.property({type:x})],r.prototype,"constraints",null);a([m.property({readOnly:!0})],r.prototype,"content",void 0);a([m.property({value:null,type:d.Extent,dependsOn:["content.extent"]})],r.prototype,"extent",null);a([m.property()],r.prototype,"fullOpacity",void 0);a([m.property({readOnly:!0})],r.prototype,"interacting",void 0);a([m.property({type:d.Extent})],r.prototype,
"initialExtent",void 0);a([m.property({dependsOn:["map.initialViewProperties.viewpoint"]})],r.prototype,"initialExtentRequired",null);a([m.property({value:{top:0,right:0,bottom:0,left:0},cast:function(a){return f.mixin({top:0,right:0,bottom:0,left:0},a)}})],r.prototype,"padding",null);a([m.property()],r.prototype,"resizeAlign",void 0);a([m.property({value:0,type:Number,dependsOn:["content.rotation"]})],r.prototype,"rotation",null);a([m.property({value:0,type:Number,dependsOn:["content.scale"]})],
r.prototype,"scale",null);a([m.property({type:d.SpatialReference,dependsOn:["map.initialViewProperties.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],r.prototype,"spatialReference",void 0);a([m.property({readOnly:!0})],r.prototype,"state",void 0);a([m.property()],r.prototype,"stationary",null);a([m.property({readOnly:!0})],r.prototype,"type",void 0);a([m.property({value:null,type:k,dependsOn:["content.viewpoint"]})],r.prototype,"viewpoint",null);a([m.property({value:-1,dependsOn:["content.scale"]})],
r.prototype,"zoom",null);return r=a([m.subclass("esri.views.MapViewBase")],r)}(m.declared(r))})},"esri/views/2d/AnimationManager":function(){define("../../core/Accessor ../../core/scheduling ../../core/now ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),function(n,g,b,a,f,d){var k=function(a,b,d,h){var c=a.targetGeometry,e=b.targetGeometry;h?"string"===typeof h&&(h=f.parse(h)||f.ease):h=f.ease;this.easing=h;this.duration=d;this.sCenterX=c.x;this.sCenterY=c.y;this.sScale=a.scale;this.sRotation=
a.rotation;this.tCenterX=e.x;this.tCenterY=e.y;this.tScale=b.scale;this.tRotation=b.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)};k.prototype.applyRatio=function(a,b){var c=this.easing(b),d,e;1<=b?(b=this.tCenterX,d=this.tCenterY,e=this.tRotation,c=this.tScale):(b=this.sCenterX+c*this.dCenterX,
d=this.sCenterY+c*this.dCenterY,e=this.sRotation+c*this.dRotation,c=this.sScale+c*this.dScale);a.targetGeometry.x=b;a.targetGeometry.y=d;a.scale=c;a.rotation=e};return n.createSubclass({constructor:function(){this._updateTask=g.addFrameTask({postRender:this._postRender.bind(this)});this._updateTask.pause()},getDefaults:function(){return{viewpoint:d.create()}},properties:{animation:null,duration:{value:200},transition:{value:null},easing:{value:f.ease},viewpoint:null},animate:function(a,c,f){this.stop();
d.copy(this.viewpoint,c);this.transition=new k(this.viewpoint,a.target,f&&f.duration||this.duration,f&&f.easing||this.easing);a.always(function(){this.animation===a&&this._updateTask&&("finished"===a.state&&(this.transition.applyRatio(this.viewpoint,1),this.animation._dfd.progress(this.viewpoint)),this._updateTask.pause(),this.updateFunction=this.animation=null)}.bind(this));this._startTime=b();this._updateTask.resume();return this.animation=a},animateContinous:function(d,c){this.stop();this.updateFunction=
c;this.viewpoint=d;var e=new a({target:d.clone()});e.always(function(){this.animation===e&&this._updateTask&&(this._updateTask.pause(),this.updateFunction=this.animation=null)}.bind(this));this._startTime=b();this._updateTask.resume();return this.animation=e},stop:function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)},_postRender:function(d){var c=this.animation;c&&c.state!==a.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,d.deltaTime):(d=(b()-
this._startTime)/this.transition.duration,c=1<=d,this.transition.applyRatio(this.viewpoint,d),c&&this.animation.finish()),this.animation._dfd.progress(this.viewpoint)):this._updateTask.pause()}})})},"esri/views/2d/unitBezier":function(){define([],function(){var n=function(b,a,f,d){function k(a,b){var d,h,f,k;b=null==b?1E-6:b;f=a;for(h=0;8>h;h++){k=((l*f+c)*f+e)*f-a;if(Math.abs(k)<b)return f;d=(3*l*f+2*c)*f+e;if(1E-6>Math.abs(d))break;f-=k/d}d=0;h=1;f=a;if(f<d)return d;if(f>h)return h;for(;d<h;){k=
((l*f+c)*f+e)*f;if(Math.abs(k-a)<b)break;a>k?d=f:h=f;f=.5*(h-d)+d}return f}var e=3*b,c=3*(f-b)-e,l=1-e-c,h=3*a,m=3*(d-a)-h,p=1-h-m;return function(a,b){a=k(a,b);return((p*a+m)*a+h)*a}},g=/^cubic-bezier\((.*)\)/;n.parse=function(b){var a=n[b]||null;!a&&(b=g.exec(b))&&(b=b[1].split(",").map(function(a){return parseFloat(a.trim())}),4!==b.length||b.some(function(a){return isNaN(a)})||(a=n.apply(n,b)));return a};n.ease=n(.25,.1,.25,1);n.linear=n(0,0,1,1);n.easeIn=n["ease-in"]=n(.42,0,1,1);n.easeOut=n["ease-out"]=
n(0,0,.58,1);n.easeInOut=n["ease-in-out"]=n(.42,0,.58,1);return n})},"esri/views/2d/viewpointUtils":function(){define("require exports ../../Viewpoint ../../core/Error ../../core/promiseUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils ./libs/gl-matrix/common ./libs/gl-matrix/mat2d ./libs/gl-matrix/vec2".split(" "),
function(n,g,b,a,f,d,k,e,c,l,h,m,p,r,t,q){function u(a,b,c,d){return d&&c&&!d.equals(c)&&m.canProject(d,c)&&d.isWebMercator?(d.isWebMercator?(c=b[1],89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c=Math.sin(r.toRadian(c)),a=q.set(a,6378137*r.toRadian(b[0]),3189068.5*Math.log((1+c)/(1-c)))):(c=r.toDegree(b[0]/6378137),a=q.set(a,c-360*Math.floor((c+180)/360),r.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*b[1]/6378137))))),a):q.copy(a,b)}function x(a){return a.wkid?a:a.spatialReference||c.WGS84}function v(a,
b){return b.type?q.set(a,b.x,b.y):q.copy(a,b)}function y(a,b){return Math.max(a.width/b[0],a.height/b[1])*G(a.spatialReference)}function w(a,b,c){var h;if(!a)return null;if(Array.isArray(a)&&2===a.length&&"number"===typeof a[0]&&"number"===typeof a[1])return new e(a);if(a.reduce)return a.reduce(function(a,c){return w(c,b,a)},c);a instanceof k?h=a:a.geometry&&(h=a.geometry);if(!h)return null;a="point"===h.type?new d({xmin:h.x,ymin:h.y,xmax:h.x,ymax:h.y,spatialReference:h.spatialReference}):h.extent;
if(!a)return null;h=m.canProject(a,b);if(!a.spatialReference.equals(b)&&h)a=m.project(a,b);else if(!h)return null;return c=c?c.union(a):a.clone()}function A(a,c){if(!a)return new b({targetGeometry:new e,scale:0,rotation:0});var h=c.spatialReference,f=c.size,k=c.viewpoint,l=c.constraints,r=null;"esri.Viewpoint"===a.declaredClass?r=a:a.viewpoint?r=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(r=a.target);var t=null;if(r&&r.targetGeometry)t=r.targetGeometry;else if(a instanceof d)t=
a;else if(a||a&&(a.hasOwnProperty("center")||a.hasOwnProperty("extent")||a.hasOwnProperty("target")))t=w(a.center,h)||w(a.extent,h)||w(a.target,h)||w(a,h);!t&&k&&k.targetGeometry?t=k.targetGeometry:!t&&c.extent&&(t=c.extent);var g=x(t);h||(h=x(c.spatialReference||c.extent||t));if(!p.canProject(t,h)&&g&&!g.equals(h))return null;var B=v(q.create(),t.center?t.center:t),g=new e(u(B,B,g,h),h),B=null,B=r&&r.targetGeometry&&"point"===r.targetGeometry.type?r.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:
a.hasOwnProperty("zoom")&&-1!==a.zoom&&l&&l.effectiveLODs?l.zoomToScale(a.zoom):Array.isArray(t)||"point"===t.type||"extent"===t.type&&0===t.width&&0===t.height?c.extent&&m.canProject(c.extent,h)?y(m.project(c.extent,h),f):c.extent?y(c.extent,f):k.scale:m.canProject(t.extent,h)?y(m.project(t.extent,h),f):y(t.extent,f);c=0;r?c=r.rotation:a.hasOwnProperty("rotation")?c=a.rotation:k&&(c=k.rotation);a=new b({targetGeometry:g,scale:B,rotation:c});l&&(a=l.fit(a),l.rotationEnabled||(a.rotation=c));return a}
function B(a,b){var c=a.targetGeometry,d=b.targetGeometry;c.x=d.x;c.y=d.y;c.spatialReference=d.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function z(a,b,c){return c?q.set(a,.5*(b[0]-c.right+c.left),.5*(b[1]-c.bottom+c.top)):q.scale(a,b,.5)}function C(a,b,c,d){g.getTransform(a,b,c,d);return t.invert(a,a)}function E(a,b,c){var d=r.toRadian(b.rotation)||0;b=Math.abs(Math.cos(d));d=Math.abs(Math.sin(d));return q.set(a,Math.round(c[1]*d+c[0]*b),Math.round(c[1]*b+c[0]*d))}function D(a){return a.scale*
(1/(39.37*l.getMetersPerUnitForSR(a.targetGeometry.spatialReference)*96))}function G(a){return 39.37*l.getMetersPerUnitForSR(a)*96}function F(a){return a.isWrappable?(a=h.getInfo(a),a.valid[1]-a.valid[0]):0}function L(a,b){return Math.round(F(a)/b)}Object.defineProperty(g,"__esModule",{value:!0});var J=180/Math.PI;g.extentToScale=y;g.create=A;g.copy=B;g.getAnchor=z;g.getExtent=function(){var a=q.create();return function(b,c,d){var e=c.targetGeometry;v(a,e);c=.5*D(c);b.xmin=a[0]-c*d[0];b.ymin=a[1]-
c*d[1];b.xmax=a[0]+c*d[0];b.ymax=a[1]+c*d[1];b.spatialReference=e.spatialReference;return b}}();g.setExtent=function(a,b,c,d,e){g.centerAt(a,b,c.center);a.scale=y(c,d);e&&e.constraints&&e.constraints.constrain(a);return a};g.getOuterExtent=function(){var a=q.create(),b=q.create();return function(c,d,e){v(a,d.targetGeometry);E(b,d,e);e=.5*D(d);c.set({xmin:a[0]-e*b[0],ymin:a[1]-e*b[1],xmax:a[0]+e*b[0],ymax:a[1]+e*b[1],spatialReference:d.targetGeometry.spatialReference});return c}}();g.getClippedExtent=
function(){var a=q.create(),b=q.create();return function(c,d,e){var h=D(d),f=d.targetGeometry.spatialReference,k=L(f,h);v(a,d.targetGeometry);E(b,d,e);f.isWrappable&&b[0]>k&&(b[0]=k);d=.5*h;c.set({xmin:a[0]-d*b[0],ymin:a[1]-d*b[1],xmax:a[0]+d*b[0],ymax:a[1]+d*b[1],spatialReference:f});return c}}();g.getOuterSize=E;g.getPaddingScreenTranslation=function(){var a=q.create();return function(b,c,d){return q.sub(b,q.scale(b,c,.5),z(a,c,d))}}();var H=function(){var a=t.create(),b=q.create();return function(c,
d,e,h){var f=D(d);d=r.toRadian(d.rotation)||0;q.set(b,f,f);t.fromScaling(a,b);t.rotate(a,a,d);t.translate(a,a,g.getPaddingScreenTranslation(b,e,h));t.translate(a,a,[0,h.top-h.bottom]);return q.set(c,a[4],a[5])}}();g.getResolution=D;g.getResolutionToScaleFactor=G;g.getMatrix=function(){var a=q.create(),b=q.create(),c=q.create();return function(d,e,h,f,k,l){q.negate(a,e);q.scale(b,h,.5*l);q.set(c,1/f*l,-1/f*l);t.identity(d);t.translate(d,d,b);k&&t.rotate(d,d,k);t.scale(d,d,c);t.translate(d,d,a);return d}}();
g.getTransform=function(){var a=q.create();return function(b,c,d,e){var h=D(c),f=r.toRadian(c.rotation)||0;v(a,c.targetGeometry);return g.getMatrix(b,a,d,h,f,e)}}();g.getTransformNoRotation=function(){var a=q.create();return function(b,c,d,e){var h=D(c);v(a,c.targetGeometry);return g.getMatrix(b,a,d,h,0,e)}}();g.getWorldWidth=F;g.getWorldScreenWidth=L;g.createAsync=function(b,c){if(b=A(b,c))return f.resolve(b);b=new a("viewpointUtils-createAsync:different-spatialReference","Target spatialReference cannot be projected and is different from out spatialReference");
return f.reject(b)};g.angleBetween=function(){var a=q.create(),b=q.create(),c=q.create();return function(d,e,h){q.subtract(a,d,e);q.normalize(a,a);q.subtract(b,d,h);q.normalize(b,b);q.cross(c,a,b);d=Math.acos(q.dot(a,b)/(q.length(a)*q.length(b)))*J;0>c[2]&&(d=-d);isNaN(d)&&(d=0);return d}}();g.addPadding=function(){var a=q.create();return function(b,c,d,e){var h=b.targetGeometry;B(b,c);H(a,c,d,e);h.x+=a[0];h.y+=a[1];return b}}();g.removePadding=function(){var a=q.create();return function(b,c,d,e){var h=
b.targetGeometry;B(b,c);H(a,c,d,e);h.x-=a[0];h.y-=a[1];return b}}();g.centerAt=function(){var a=q.create();return function(b,c,d){B(b,c);c=b.targetGeometry;var e=x(d),h=x(c);v(a,d);u(a,a,e,h);c.x=a[0];c.y=a[1];return b}}();g.pixelSizeAt=function(a,b,c){return D(b)};g.resize=function(){var a=q.create();return function(b,c,d,e,h){h||(h="center");q.sub(a,d,e);q.scale(a,a,.5);d=a[0];e=a[1];switch(h){case "center":q.set(a,0,0);break;case "left":q.set(a,-d,0);break;case "top":q.set(a,0,e);break;case "right":q.set(a,
d,0);break;case "bottom":q.set(a,0,-e);break;case "top-left":q.set(a,-d,e);break;case "bottom-left":q.set(a,-d,-e);break;case "top-right":q.set(a,d,e);break;case "bottom-right":q.set(a,d,-e)}g.translateBy(b,c,a);return b}}();g.rotateBy=function(a,b,c){B(a,b);a.rotation+=c;return a};g.rotateTo=function(a,b,c){B(a,b);a.rotation=c;return a};g.scaleBy=function(){var a=q.create();return function(b,c,d,e,h){B(b,c);isNaN(d)||0===d||(g.toMap(a,e,c,h),b.scale=c.scale*d,g.toScreen(a,a,b,h),g.translateBy(b,
b,q.set(a,a[0]-e[0],e[1]-a[1])));return b}}();g.scaleTo=function(a,b,c){B(a,b);a.scale=c;return a};g.scaleAndRotateBy=function(){var a=q.create();return function(b,c,d,e,h,f){B(b,c);isNaN(d)||0===d||(g.toMap(a,h,c,f),b.scale=c.scale*d,b.rotation+=e,g.toScreen(a,a,b,f),g.translateBy(b,b,q.set(a,a[0]-h[0],h[1]-a[1])));return b}}();g.padAndScaleAndRotateBy=function(){var a=q.create(),b=q.create();return function(c,d,e,h,f,k,l){g.getPaddingScreenTranslation(b,k,l);q.add(a,f,b);return h?g.scaleAndRotateBy(c,
d,e,h,a,k):g.scaleBy(c,d,e,a,k)}}();g.toMap=function(){var a=t.create();return function(b,c,d,e){return q.transformMat2d(b,c,C(a,d,e,1))}}();g.toScreen=function(){var a=t.create();return function(b,c,d,e){return q.transformMat2d(b,c,g.getTransform(a,d,e,1))}}();g.translateBy=function(){var a=q.create(),b=t.create();return function(c,d,e){B(c,d);var h=D(d),f=c.targetGeometry;t.fromRotation(b,r.toRadian(d.rotation)||0);t.scale(b,b,q.fromValues(h,h));q.transformMat2d(a,e,b);f.x+=a[0];f.y+=a[1];return c}}()})},
"esri/views/2d/libs/gl-matrix/common":function(){define([],function(){if(!n)var n=1E-6;if(!g)var g="undefined"!==typeof Float32Array?Float32Array:Array;if(!b)var b=Math.random;var a={GLMAT_EPSILON:n,GLMAT_ARRAY_TYPE:g,GLMAT_RANDOM:b,setMatrixArrayType:function(b){a.GLMAT_ARRAY_TYPE=b}},f=Math.PI/180,d=180/Math.PI;a.toRadian=function(a){return a*f};a.toDegree=function(a){return a*d};a.setMatrixArrayType(Array);return a})},"esri/views/2d/libs/gl-matrix/mat2d":function(){define(["./common"],function(n){var g=
n.GLMAT_ARRAY_TYPE;n={create:function(){var b=new g(6);b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=0;b[5]=0;return b},clone:function(b){var a=new g(6);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},copy:function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},identity:function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=0;b[5]=0;return b},invert:function(b,a){var f=a[0],d=a[1],k=a[2],e=a[3],c=a[4];a=a[5];var l=f*e-d*k;if(!l)return null;l=1/l;b[0]=e*l;b[1]=-d*l;b[2]=
-k*l;b[3]=f*l;b[4]=(k*a-e*c)*l;b[5]=(d*c-f*a)*l;return b},determinant:function(b){return b[0]*b[3]-b[1]*b[2]},multiply:function(b,a,f){var d=a[0],k=a[1],e=a[2],c=a[3],l=a[4];a=a[5];var h=f[0],m=f[1],p=f[2],r=f[3],t=f[4];f=f[5];b[0]=d*h+e*m;b[1]=k*h+c*m;b[2]=d*p+e*r;b[3]=k*p+c*r;b[4]=d*t+e*f+l;b[5]=k*t+c*f+a;return b}};n.mul=n.multiply;n.rotate=function(b,a,f){var d=a[0],k=a[1],e=a[2],c=a[3],l=a[4];a=a[5];var h=Math.sin(f);f=Math.cos(f);b[0]=d*f+e*h;b[1]=k*f+c*h;b[2]=d*-h+e*f;b[3]=k*-h+c*f;b[4]=l;
b[5]=a;return b};n.scale=function(b,a,f){var d=a[1],k=a[2],e=a[3],c=a[4],l=a[5],h=f[0];f=f[1];b[0]=a[0]*h;b[1]=d*h;b[2]=k*f;b[3]=e*f;b[4]=c;b[5]=l;return b};n.translate=function(b,a,f){var d=a[0],k=a[1],e=a[2],c=a[3],l=a[4];a=a[5];var h=f[0];f=f[1];b[0]=d;b[1]=k;b[2]=e;b[3]=c;b[4]=d*h+e*f+l;b[5]=k*h+c*f+a;return b};n.fromRotation=function(b,a){var f=Math.sin(a);a=Math.cos(a);b[0]=a;b[1]=f;b[2]=-f;b[3]=a;b[4]=0;b[5]=0;return b};n.fromScaling=function(b,a){b[0]=a[0];b[1]=0;b[2]=0;b[3]=a[1];b[4]=0;b[5]=
0;return b};n.fromTranslation=function(b,a){b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=a[0];b[5]=a[1];return b};n.str=function(b){return"mat2d("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+")"};n.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+1)};return n})},"esri/views/2d/libs/gl-matrix/vec2":function(){define(["./common"],function(n){var g=n.GLMAT_ARRAY_TYPE,b=n.GLMAT_RANDOM,a={create:function(){var a=new g(2);
a[0]=0;a[1]=0;return a},clone:function(a){var b=new g(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,b){var d=new g(2);d[0]=a;d[1]=b;return d},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,k){a[0]=b;a[1]=k;return a},add:function(a,b,k){a[0]=b[0]+k[0];a[1]=b[1]+k[1];return a},subtract:function(a,b,k){a[0]=b[0]-k[0];a[1]=b[1]-k[1];return a}};a.sub=a.subtract;a.multiply=function(a,b,k){a[0]=b[0]*k[0];a[1]=b[1]*k[1];return a};a.mul=a.multiply;a.divide=function(a,b,k){a[0]=
b[0]/k[0];a[1]=b[1]/k[1];return a};a.div=a.divide;a.min=function(a,b,k){a[0]=Math.min(b[0],k[0]);a[1]=Math.min(b[1],k[1]);return a};a.max=function(a,b,k){a[0]=Math.max(b[0],k[0]);a[1]=Math.max(b[1],k[1]);return a};a.scale=function(a,b,k){a[0]=b[0]*k;a[1]=b[1]*k;return a};a.scaleAndAdd=function(a,b,k,e){a[0]=b[0]+k[0]*e;a[1]=b[1]+k[1]*e;return a};a.distance=function(a,b){var d=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(d*d+a*a)};a.dist=a.distance;a.squaredDistance=function(a,b){var d=b[0]-a[0];a=b[1]-
a[1];return d*d+a*a};a.sqrDist=a.squaredDistance;a.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};a.len=a.length;a.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};a.sqrLen=a.squaredLength;a.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};a.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};a.normalize=function(a,b){var d=b[0],e=b[1],d=d*d+e*e;0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d);return a};a.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};a.cross=function(a,
b,k){b=b[0]*k[1]-b[1]*k[0];a[0]=a[1]=0;a[2]=b;return a};a.lerp=function(a,b,k,e){var c=b[0];b=b[1];a[0]=c+e*(k[0]-c);a[1]=b+e*(k[1]-b);return a};a.random=function(a,d){d=d||1;var f=2*b()*Math.PI;a[0]=Math.cos(f)*d;a[1]=Math.sin(f)*d;return a};a.transformMat2=function(a,b,k){var d=b[0];b=b[1];a[0]=k[0]*d+k[2]*b;a[1]=k[1]*d+k[3]*b;return a};a.transformMat2d=function(a,b,k){var d=b[0];b=b[1];a[0]=k[0]*d+k[2]*b+k[4];a[1]=k[1]*d+k[3]*b+k[5];return a};a.transformMat3=function(a,b,k){var d=b[0];b=b[1];a[0]=
k[0]*d+k[3]*b+k[6];a[1]=k[1]*d+k[4]*b+k[7];return a};a.transformMat4=function(a,b,k){var d=b[0];b=b[1];a[0]=k[0]*d+k[4]*b+k[12];a[1]=k[1]*d+k[5]*b+k[13];return a};a.forEach=function(){var b=a.create();return function(a,f,e,c,l,h){f||(f=2);e||(e=0);for(c=c?Math.min(c*f+e,a.length):a.length;e<c;e+=f)b[0]=a[e],b[1]=a[e+1],l(b,b,h),a[e]=b[0],a[e+1]=b[1];return a}}();a.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};return a})},"esri/views/2d/FrameTask":function(){define(["require","exports","../../core/scheduling"],
function(n,g,b){return function(){function a(a){var b=this;this.view=a;this._frameTaskHandle=null;this.updateEnabled=this.stationary=!0;this.prepare=function(){b._updateParameters.state=b.view.state;b._updateParameters.stationary=b.view.stationary;b._updateParameters.pixelRatio=window.devicePixelRatio};this.update=function(){if(b.updateEnabled){for(var a=b.view,d=a.allLayerViews.toArray().filter(function(a){return a.isFulfilled()&&null==a.layerViews}),c=d.length,f=a.state,h=0;h<d.length;h++)if(a=
d[h],a.attached){var m=b._layerViewsState[a.uid];if(null==m||!b.stationary&&!a.moving)a.moving=!0,a.moveStart();m!==f.id&&a.viewChange();b.stationary&&a.moving&&(a.moving=!1,a.moveEnd());b._layerViewsState[a.uid]=f.id}f=b._layerViewsTrash;for(h=0;h<f.length;h++)a=f[h],b._detachLayerView(a);for(h=f.length=0;h<c;h++)a=d[h],a.isFulfilled()&&!a.attached&&b._attachLayerView(a);d=b._layerViewsToUpdate;c=d.slice();h=b._updateParameters;for(m=d.length=0;m<c.length;m++)a=c[m],a.processUpdate(h);0===d.length&&
0===f.length&&b._frameTaskHandle.pause()}};a.watch("ready",function(a){a?b.start():b.stop()})}a.prototype.destroy=function(){this.stop()};a.prototype.start=function(){var a=this;this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:!0};this._layerViewsTrash=[];this._layerViewsToUpdate=[];this._layerViewsState={};this._allLayerViewsChangeHandle=this.view.allLayerViews.on("change",function(b){Array.prototype.push.apply(a._layerViewsTrash,b.removed);a.requestFrame()});
this._stationaryHandle=this.view.watch("stationary",function(b){a.stationary=b;a.requestFrame()});this._frameTaskHandle=b.addFrameTask(this)};a.prototype.stop=function(){var a=this;this._frameTaskHandle&&(this.view.allLayerViews.forEach(function(b){return a._detachLayerView(b)}),this._stationaryHandle.remove(),this._allLayerViewsChangeHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._allLayerViewsChangeHandle=this._frameTaskHandle=this._layerViewsTrash=
this._layerViewsToUpdate=this._layerViewsState=null,this.stationary=!0)};a.prototype.requestLayerViewUpdate=function(a){this._layerViewsToUpdate.push(a);this.requestFrame()};a.prototype.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};a.prototype._attachLayerView=function(a){a.attached||(a.attached=!0,a.moving=!1,a.attach())};a.prototype._detachLayerView=function(a){a.attached&&(a.detach(),a.attached=!1,a.moving=!1)};return a}()})},"esri/views/2d/MapViewConstraints":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Evented ../../core/accessorSupport/decorators ../../layers/support/LOD ./constraints/RotationConstraint ./constraints/ZoomConstraint".split(" "),
function(n,g,b,a,f,d,k,e,c,l){return function(d){function h(){var a=null!==d&&d.apply(this,arguments)||this;a.enabled=!0;a.lods=null;a.minScale=0;a.maxScale=0;a.minZoom=-1;a.maxZoom=-1;a.rotationEnabled=!0;a.snapToZoom=!0;return a}b(h,d);h.prototype.initialize=function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)};h.prototype.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};Object.defineProperty(h.prototype,"_rotation",{get:function(){return new c({rotationEnabled:this.rotationEnabled})},
enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"_defaultLODs",{get:function(){var a=this.get("view.defaultsFromMap.tileInfo"),b=this.get("view.spatialReference");return a&&b&&a.spatialReference.equals(b)?a.lods:null},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"_zoom",{get:function(){return new l({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})},enumerable:!0,
configurable:!0});h.prototype.canZoomInTo=function(a){var b=this.effectiveMaxScale;return 0===b||a>=b};h.prototype.canZoomOutTo=function(a){var b=this.effectiveMinScale;return 0===b||a<=b};h.prototype.constrain=function(a,b){if(!this.enabled)return a;this._zoom.constrain(a,b);this._rotation.constrain(a,b);return a};h.prototype.fit=function(a){if(!this.enabled||!this.snapToZoom)return a;this._zoom.fit(a);return a};h.prototype.zoomToScale=function(a){return this._zoom.zoomToScale(a)};h.prototype.scaleToZoom=
function(a){return this._zoom.scaleToZoom(a)};h.prototype.snapScale=function(a){return this._zoom.snapToClosestScale(a)};h.prototype.snapToNextScale=function(a){return this._zoom.snapToNextScale(a)};h.prototype.snapToPreviousScale=function(a){return this._zoom.snapToPreviousScale(a)};a([k.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],h.prototype,"effectiveLODs",void 0);a([k.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],h.prototype,"effectiveMinScale",void 0);a([k.property({readOnly:!0,
aliasOf:"_zoom.effectiveMaxScale"})],h.prototype,"effectiveMaxScale",void 0);a([k.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],h.prototype,"effectiveMinZoom",void 0);a([k.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],h.prototype,"effectiveMaxZoom",void 0);a([k.property()],h.prototype,"enabled",void 0);a([k.property({type:[e]})],h.prototype,"lods",void 0);a([k.property()],h.prototype,"minScale",void 0);a([k.property()],h.prototype,"maxScale",void 0);a([k.property()],h.prototype,
"minZoom",void 0);a([k.property()],h.prototype,"maxZoom",void 0);a([k.property()],h.prototype,"rotationEnabled",void 0);a([k.property()],h.prototype,"snapToZoom",void 0);a([k.property()],h.prototype,"view",void 0);a([k.property({type:c,dependsOn:["rotationEnabled"]})],h.prototype,"_rotation",null);a([k.property({dependsOn:["view.spatialReference","view.defaultsFromMap.tileInfo"]})],h.prototype,"_defaultLODs",null);a([k.property({readOnly:!0,type:l,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom _defaultLODs".split(" ")})],
h.prototype,"_zoom",null);return h=a([k.subclass("esri.views.2d.MapViewConstraints")],h)}(k.declared(f,d))})},"esri/views/2d/constraints/RotationConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(n,g,b,a,f,d){return function(f){function e(){var a=null!==f&&f.apply(this,arguments)||this;a.enabled=!0;a.rotationEnabled=!0;return a}b(e,f);
c=e;e.prototype.constrain=function(a,b){if(!this.enabled||!b)return a;this.rotationEnabled||(a.rotation=b.rotation);return a};e.prototype.clone=function(){return new c({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};a([d.property()],e.prototype,"enabled",void 0);a([d.property()],e.prototype,"rotationEnabled",void 0);return e=c=a([d.subclass("esri.views.2d.constraints.RotationConstraint")],e);var c}(d.declared(f))})},"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../layers/support/LOD".split(" "),
function(n,g,b,a,f,d,k){return function(e){function c(){var a=null!==e&&e.apply(this,arguments)||this;a._lodByScale={};a._scales=[];a.effectiveLODs=null;a.effectiveMinZoom=-1;a.effectiveMaxZoom=-1;a.effectiveMinScale=0;a.effectiveMaxScale=0;a.enabled=!0;a.lods=null;a.minZoom=-1;a.maxZoom=-1;a.minScale=0;a.maxScale=0;a.snapToZoom=!0;return a}b(c,e);f=c;c.prototype.initialize=function(){var a=this,b=this.lods,c=this.minScale,d=this.maxScale,e=this.minZoom,f=this.maxZoom,k=-1,l=-1,g=!1,y=!1;0!==c&&0!==
d&&c<d&&(d=[d,c],c=d[0],d=d[1]);if(b&&b.length){b=b.map(function(a){return a.clone()});b.sort(function(a,b){return b.scale-a.scale});b.forEach(function(a,b){return a.level=b});for(var w,A=0,B=b;A<B.length;A++){var n=B[A];!g&&0<c&&c>=n.scale&&(k=n.level,g=!0);!y&&0<d&&d>=n.scale&&(l=w?w.level:-1,y=!0);w=n}-1===e&&(e=0===c?0:k);-1===f&&(f=0===d?b.length-1:l);e=Math.max(e,0);e=Math.min(e,b.length-1);f=Math.max(f,0);f=Math.min(f,b.length-1);e>f&&(c=[f,e],e=c[0],f=c[1]);c=b[e].scale;d=b[f].scale;b.splice(0,
e);b.splice(f-e+1,b.length);b.forEach(function(b,c){a._lodByScale[b.scale]=b;a._scales[c]=b.scale});this._set("effectiveLODs",b);this._set("effectiveMinZoom",e);this._set("effectiveMaxZoom",f)}this._set("effectiveMinScale",c);this._set("effectiveMaxScale",d)};c.prototype.constrain=function(a,b){if(!this.enabled||b&&a.scale===b.scale)return a;var c=this.effectiveMinScale,d=this.effectiveMaxScale,e=a.targetGeometry,h=b&&b.targetGeometry,f=0!==c&&a.scale>c;if(0!==d&&a.scale<d||f)c=f?c:d,h&&(b=(c-b.scale)/
(a.scale-b.scale),e.x=h.x+(e.x-h.x)*b,e.y=h.y+(e.y-h.y)*b),a.scale=c;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));return a};c.prototype.fit=function(a){if(!this.effectiveLODs)return this.constrain(a,null);var b=a.scale,c=this.scaleToZoom(b);a.scale=.99<Math.abs(c-Math.round(c))?this.snapToPreviousScale(b):this.zoomToScale(Math.round(c));return a};c.prototype.zoomToScale=function(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);var b=this._scales;
if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var c=Math.round(a);return b[c]+(c-a)*(b[Math.round(a-.5)]-b[c])};c.prototype.scaleToZoom=function(a){if(!this.effectiveLODs)return-1;var b=this._scales,c=0,d=b.length-1,e,h;for(c;c<d;c++){e=b[c];h=b[c+1];if(e<=a)return c+this.effectiveMinZoom;if(h===a)return c+1+this.effectiveMinZoom;if(e>a&&h<a)return c+1-(a-h)/(e-h)+this.effectiveMinZoom}return c};c.prototype.snapToClosestScale=function(a){if(!this.effectiveLODs)return a;a=this.scaleToZoom(a);
return this.zoomToScale(Math.round(a))};c.prototype.snapToNextScale=function(a,b){void 0===b&&(b=.5);if(!this.effectiveLODs)return a*b;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a+1)};c.prototype.snapToPreviousScale=function(a,b){void 0===b&&(b=2);if(!this.effectiveLODs)return a*b;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)};c.prototype.clone=function(){return new f({enabled:this.enabled,lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,
maxScale:this.maxScale})};c.prototype._getClosestScale=function(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce(function(b,c,d,e){return Math.abs(c-a)<=Math.abs(b-a)?c:b},this._scales[0]);return this._lodByScale[a].scale};a([d.property({readOnly:!0})],c.prototype,"effectiveLODs",void 0);a([d.property({readOnly:!0})],c.prototype,"effectiveMinZoom",void 0);a([d.property({readOnly:!0})],c.prototype,"effectiveMaxZoom",void 0);a([d.property({readOnly:!0})],c.prototype,
"effectiveMinScale",void 0);a([d.property({readOnly:!0})],c.prototype,"effectiveMaxScale",void 0);a([d.property()],c.prototype,"enabled",void 0);a([d.property({type:[k]})],c.prototype,"lods",void 0);a([d.property()],c.prototype,"minZoom",void 0);a([d.property()],c.prototype,"maxZoom",void 0);a([d.property()],c.prototype,"minScale",void 0);a([d.property()],c.prototype,"maxScale",void 0);a([d.property()],c.prototype,"snapToZoom",void 0);return c=f=a([d.subclass("esri.views.2d.constraints.ZoomConstraint")],
c);var f}(d.declared(f))})},"esri/views/2d/PaddedViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ./viewpointUtils ./ViewState ./libs/gl-matrix/common ./libs/gl-matrix/mat2d ./libs/gl-matrix/vec2".split(" "),function(n,g,b,a,f,d,k,e,c,l,h){var m=function(c){function e(){var a=null!==c&&c.apply(this,arguments)||this;a.left=0;a.top=0;a.right=0;a.bottom=0;return a}b(e,
c);a([d.property()],e.prototype,"left",void 0);a([d.property()],e.prototype,"top",void 0);a([d.property()],e.prototype,"right",void 0);a([d.property()],e.prototype,"bottom",void 0);return e=a([d.subclass("esri.views.2d.PaddedViewState.Padding")],e)}(d.declared(f));return function(f){function p(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a=f.apply(this,a)||this;a.content=new e;a.padding=new m;a.size=h.fromValues(0,0);return a}b(p,f);Object.defineProperty(p.prototype,"clipRect",{get:function(){var a=
this.worldScreenWidth;if(!a)return null;var b=c.toRadian(this.rotation),d=this.width*Math.abs(Math.cos(b))+this.height*Math.abs(Math.sin(b));if(a>d)return null;var e=h.clone(this.screenCenter),f=l.fromTranslation(l.create(),e);l.rotate(f,f,b);h.negate(e,e);l.translate(f,f,e);h.transformMat2d(e,this.paddedScreenCenter,f);return{top:-Math.round(d),left:Math.round(e[0]-.5*a),right:Math.round(e[0]+.5*a),bottom:+Math.round(d)}},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"padding",
{set:function(a){this._set("padding",a||new m);this._updateContent()},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"size",{set:function(a){this._set("size",a);this._updateContent()},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"paddedScreenCenter",{get:function(){var a=this.content.size,b=this.padding,a=h.scale(h.create(),a,.5);a[0]+=b.left;a[1]+=b.top;return a},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"viewpoint",{set:function(a){var b=
a.clone();this.content.viewpoint=a;k.addPadding(b,a,this._get("size"),this._get("padding"));this._set("viewpoint",k.addPadding(b.clone(),a,this._get("size"),this._get("padding")))},enumerable:!0,configurable:!0});p.prototype._updateContent=function(){var a=h.create(),b=this._get("size"),c=this._get("padding");if(b&&c){var d=this.content;h.set(a,c.left+c.right,c.top+c.bottom);h.subtract(a,b,a);d.size=a;if(a=d.viewpoint)this.viewpoint=a}};a([d.shared({transform:{dependsOn:["padding"]}})],p.prototype,
"properties",void 0);a([d.property({dependsOn:["worldScreenWidth","rotation","paddedScreenCenter","screenCenter"],readOnly:!0})],p.prototype,"clipRect",null);a([d.property()],p.prototype,"content",void 0);a([d.property({type:m})],p.prototype,"padding",null);a([d.property()],p.prototype,"size",null);a([d.property({dependsOn:["size","padding"],readOnly:!0})],p.prototype,"paddedScreenCenter",null);a([d.property()],p.prototype,"viewpoint",null);return p=a([d.subclass("esri.views.2d.PaddedViewState")],
p)}(d.declared(e))})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ../../geometry/Extent ./viewpointUtils ./libs/gl-matrix/mat2d ./libs/gl-matrix/vec2".split(" "),function(n,g,b,a,f,d,k,e,c,l,h){var m=[0,0];return function(d){function p(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a=d.apply(this,a)||this;a.pixelRatio=
1;a.size=[0,0];return a}b(p,d);t=p;Object.defineProperty(p.prototype,"center",{get:function(){var a=this.viewpoint.targetGeometry;return h.set(h.create(),a.x,a.y)},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"extent",{get:function(){return c.getExtent(new e,this.viewpoint,this.size)},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"height",{get:function(){return this.size?this.size[1]:0},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"id",
{get:function(){return this._get("id")+1},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"inverseTransform",{get:function(){return l.invert(l.create(),this.transform)},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"latitude",{get:function(){return this.viewpoint.targetGeometry.latitude},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"longitude",{get:function(){return this.viewpoint.targetGeometry.longitude},enumerable:!0,configurable:!0});
Object.defineProperty(p.prototype,"resolution",{get:function(){return c.getResolution(this.viewpoint)},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"rotation",{get:function(){return this.viewpoint.rotation},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"scale",{get:function(){return this.viewpoint.scale},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"screenCenter",{get:function(){return h.scale(h.create(),this.size,.5)},enumerable:!0,configurable:!0});
Object.defineProperty(p.prototype,"spatialReference",{get:function(){return this.viewpoint.targetGeometry.spatialReference},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"transform",{get:function(){return c.getTransform(l.create(),this.viewpoint,this.size,this.pixelRatio)},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"transformNoRotation",{get:function(){return c.getTransformNoRotation(l.create(),this.viewpoint,this.size,this.pixelRatio)},enumerable:!0,configurable:!0});
Object.defineProperty(p.prototype,"clippedExtent",{get:function(){return c.getClippedExtent(new e,this.viewpoint,this.size)},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"width",{get:function(){return this.size?this.size[0]:0},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"worldScreenWidth",{get:function(){return c.getWorldScreenWidth(this.spatialReference,this.resolution)},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"worldWidth",{get:function(){return c.getWorldWidth(this.spatialReference)},
enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"wrappable",{get:function(){return!!this.spatialReference&&this.spatialReference.isWrappable},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"x",{get:function(){return this.center[0]},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"y",{get:function(){return this.center[1]},enumerable:!0,configurable:!0});p.prototype.copy=function(a){this.viewpoint&&this.size?(this._set("viewpoint",c.copy(this.viewpoint,
a.viewpoint)),this._set("size",h.copy(this.size,a.size))):(this.viewpoint=a.viewpoint.clone(),h.copy(this.size,a.size));this._set("pixelRatio",a.pixelRatio);return this};p.prototype.clone=function(){return new t({viewpoint:this.viewpoint.clone(),size:h.clone(this.size)})};p.prototype.toMap=function(a,b,c){if(Array.isArray(b))return h.transformMat2d(a,b,this.inverseTransform);m[0]=b;m[1]=c;return h.transformMat2d(a,m,this.inverseTransform)};p.prototype.toScreen=function(a,b,c){if(Array.isArray(b))return h.transformMat2d(a,
b,this.transform);m[0]=b;m[1]=c;return h.transformMat2d(a,m,this.transform)};p.prototype.pixelSizeAt=function(a){return c.pixelSizeAt(a,this.viewpoint,this.size)};a([k.property({dependsOn:["viewpoint"]})],p.prototype,"center",null);a([k.property({readOnly:!0,dependsOn:["viewpoint","size"]})],p.prototype,"extent",null);a([k.property({readOnly:!0,dependsOn:["size"]})],p.prototype,"height",null);a([k.property({value:0,readOnly:!0,dependsOn:["transform"]})],p.prototype,"id",null);a([k.property({readOnly:!0,
dependsOn:["transform"]})],p.prototype,"inverseTransform",null);a([k.property({readOnly:!0,dependsOn:["viewpoint"]})],p.prototype,"latitude",null);a([k.property({readOnly:!0,dependsOn:["viewpoint"]})],p.prototype,"longitude",null);a([k.property({type:Number,json:{write:!0}})],p.prototype,"pixelRatio",void 0);a([k.property({readOnly:!0,dependsOn:["viewpoint"]})],p.prototype,"resolution",null);a([k.property({readOnly:!0,dependsOn:["viewpoint"]})],p.prototype,"rotation",null);a([k.property({readOnly:!0,
dependsOn:["viewpoint"]})],p.prototype,"scale",null);a([k.property({readOnly:!0,dependsOn:["size"]})],p.prototype,"screenCenter",null);a([k.property({json:{write:!0}})],p.prototype,"size",void 0);a([k.property({readOnly:!0,dependsOn:["viewpoint"]})],p.prototype,"spatialReference",null);a([k.property({readOnly:!0,dependsOn:["viewpoint","size","pixelRatio"]})],p.prototype,"transform",null);a([k.property({readOnly:!0,dependsOn:["viewpoint","size","pixelRatio"]})],p.prototype,"transformNoRotation",null);
a([k.property({type:f,json:{write:!0}})],p.prototype,"viewpoint",void 0);a([k.property({readOnly:!0,dependsOn:["viewpoint","size"]})],p.prototype,"clippedExtent",null);a([k.property({readOnly:!0,dependsOn:["size"]})],p.prototype,"width",null);a([k.property({readOnly:!0,dependsOn:["worldWidth","resolution"]})],p.prototype,"worldScreenWidth",null);a([k.property({readOnly:!0,dependsOn:["spatialReference"]})],p.prototype,"worldWidth",null);a([k.property({readOnly:!0,dependsOn:["spatialReference"]})],
p.prototype,"wrappable",null);a([k.property({readOnly:!0,dependsOn:["center"]})],p.prototype,"x",null);a([k.property({readOnly:!0,dependsOn:["center"]})],p.prototype,"y",null);return p=t=a([k.subclass("esri.views.2d.ViewState")],p);var t}(k.declared(d))})},"esri/views/2d/engine/Stage":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/promiseUtils ../../../core/scheduling ./Container ./DOMContainer ./StageGL".split(" "),function(n,g,b,a,f,d,k,e){function c(a){if(a instanceof
e)return a;if(a instanceof d){var b=0;for(a=a.children;b<a.length;b++){var f=c(a[b]);if(f)return f}}return null}return function(d){function e(a){var b=d.call(this)||this;b.element=a;b._renderParameters={state:b.state,pixelRatio:window.devicePixelRatio,stationary:!1};b._renderRequested=!1;b._taskHandle=f.addFrameTask({render:function(){return b.renderFrame()}});b._stationary=!0;b.attached=!0;b._taskHandle.pause();return b}b(e,d);e.prototype.destroy=function(){this.removeAllChildren();this.renderFrame();
this._taskHandle.remove();this._taskHandle=null};Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(a){this._state=a;this.requestRender()},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"stationary",{get:function(){return this._stationary},set:function(a){this._stationary!==a&&(this._stationary=a,this.requestRender())},enumerable:!0,configurable:!0});e.prototype.start=function(){this._taskHandle.resume()};e.prototype.stop=function(){this._taskHandle.pause()};
e.prototype.requestRender=function(){this._renderRequested=!0;this._taskHandle&&this._taskHandle.resume()};e.prototype.takeScreenshot=function(b){var d=c(this);return d?d.takeScreenshot(b):a.reject("Could not find an object capable of capturing screenshot!")};e.prototype.renderFrame=function(){this._renderRequested&&(this._renderRequested=!1,this._renderParameters.state=this._state,this._renderParameters.stationary=this.stationary,this._renderParameters.pixelRatio=window.devicePixelRatio,this.processRender(this._renderParameters));
this._renderRequested||this._taskHandle.pause()};return e}(k)})},"esri/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(n,g,b,a){var f;(function(a){a[a.BEFORE=0]="BEFORE";a[a.ATTACHING=1]="ATTACHING";a[a.DETACHING=2]="DETACHING";a[a.RENDERING=3]="RENDERING";a[a.AFTER=4]="AFTER";a[a.DONE=5]="DONE"})(f||(f={}));return function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b._childrenSet=new Set;b._childrenToAttach=
[];b._childrenToDetach=[];b._renderPhase=f.DONE;b.children=[];return b}b(d,a);Object.defineProperty(d.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0});d.prototype.detach=function(a){var b=this.children.concat(this._childrenToDetach);a=this.prepareChildrenRenderParameters(a);for(var d=0;d<b.length;d++){var e=b[d];e.attached&&(this.detachChild(e,a),e.attached=!1,e.parent=null)}};d.prototype.doRender=function(a){var b=this.prepareChildrenRenderParameters(a);
this._renderPhase=f.BEFORE;this.beforeRenderChildren(a,b);this._renderPhase=f.ATTACHING;this.attachChildren(b);this._renderPhase=f.DETACHING;for(var d=this._childrenToDetach;0<d.length;){var e=d.shift();this.detachChild(e,b);e.attached=!1;e.parent=null}this._renderPhase=f.RENDERING;this.renderChildren(b);this._renderPhase=f.AFTER;this.afterRenderChildren(a,b);this._renderPhase=f.DONE};d.prototype.addChild=function(a){return this.addChildAt(a,this.children.length)};d.prototype.addChildAt=function(a,
b){void 0===b&&(b=this.numChildren);if(!a||this.contains(a))return a;var c=a.parent;c&&c!==this&&c.removeChild(a);b>=this.numChildren?this.children.push(a):this.children.splice(b,0,a);this._childrenSet.add(a);b=this._childrenToDetach.indexOf(a);-1<b&&this._childrenToDetach.splice(b,1);this._childrenToAttach.push(a);this._renderPhase>=f.RENDERING&&this.requestRender();return a};d.prototype.contains=function(a){return this._childrenSet.has(a)};d.prototype.getChildIndex=function(a){return this.children.indexOf(a)};
d.prototype.getChildAt=function(a){return 0>a||a>this.children.length?null:this.children[a]};d.prototype.removeAllChildren=function(){for(var a=this.numChildren;a--;)this.removeChildAt(0)};d.prototype.removeChild=function(a){return this.contains(a)?this.removeChildAt(this.getChildIndex(a)):a};d.prototype.removeChildAt=function(a){if(0>a||a>=this.children.length)return null;a=this.children.splice(a,1)[0];this._childrenSet["delete"](a);if(a.attached)this._childrenToDetach.push(a),this._renderPhase>=
f.RENDERING&&this.requestRender();else{var b=this._childrenToAttach.indexOf(a);-1<b&&this._childrenToAttach.splice(b,1)}return a};d.prototype.requestChildRender=function(a){a&&a.parent===this&&this._renderPhase>=f.RENDERING&&this.requestRender()};d.prototype.setChildIndex=function(a,b){var c=this.getChildIndex(a);-1<c&&(this.children.splice(c,1),this.children.splice(b,0,a),this._renderPhase>=f.RENDERING&&this.requestRender())};d.prototype.sortChildren=function(a){this._renderPhase>f.RENDERING&&this.requestRender();
return this.children.sort(a)};d.prototype.attachChildren=function(a){var b=this._childrenToAttach;if(0!==b.length)for(var d=0,e=!1;!e;)e=b[d],this.attachChild(e,a)?(e.attached=!0,e.parent=this,b.splice(d,1)):++d,e=b.length===d};d.prototype.renderChildren=function(a){for(var b=this.children,d=b.length,e=0;e<d;e++){var f=b[e];f.attached&&this.renderChild(f,a)}};d.prototype.beforeRenderChildren=function(a,b){};d.prototype.attachChild=function(a,b){return a.attach(b)};d.prototype.detachChild=function(a,
b){a.detach(b)};d.prototype.renderChild=function(a,b){a.processRender(b)};d.prototype.afterRenderChildren=function(a,b){};return d}(a)})},"esri/views/2d/engine/DisplayObject":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./Evented"],function(n,g,b,a){return function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b._renderRequestedCalled=!1;b._attached=!1;b._opacity=1;b.renderRequested=!1;b._visible=!0;return b}b(d,a);Object.defineProperty(d.prototype,
"attached",{get:function(){return this._attached},set:function(a){this._attached!==a&&((this._attached=a)?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"opacity",{get:function(){return this._opacity},set:function(a){this._opacity!==a&&(this._opacity=a,this.requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"visible",{get:function(){return this._visible},
set:function(a){this._visible!==a&&(this._visible=a,this.requestRender())},enumerable:!0,configurable:!0});d.prototype.attach=function(a){return!0};d.prototype.detach=function(a){};d.prototype.processRender=function(a){this._renderRequestedCalled=!1;this.doRender(a);this._renderRequestedCalled||(this.renderRequested=!1);this.hasEventListener("post-render")&&this.emit("post-render")};d.prototype.requestRender=function(){var a=this.renderRequested;this.renderRequested=this._renderRequestedCalled=!0;
this.parent&&this.parent.requestChildRender(this);a!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")};d.prototype.dispose=function(){};return d}(a.Evented)})},"esri/views/2d/engine/Evented":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","dojo/aspect","dojo/on"],function(n,g,b,a,f){Object.defineProperty(g,"__esModule",{value:!0});n=function(){function b(){}b.prototype.on=function(b,d){return a.after(this,"on"+b,d,!0)};b.prototype.once=
function(a,b){return f.once(this,a,b)};b.prototype.emit=function(a){f.emit(this,a,this)};b.prototype.hasEventListener=function(a){a="on"+a;return!(!this[a]||!this[a].after)};return b}();g.Evented=n;g.EventedMixin=function(d){return function(d){function e(){return null!==d&&d.apply(this,arguments)||this}b(e,d);e.prototype.on=function(b,d){return a.after(this,"on"+b,d,!0)};e.prototype.once=function(a,b){return f.once(this,a,b)};e.prototype.emit=function(a,b){f.emit(this,a,b)};e.prototype.hasEventListener=
function(a){a="on"+a;return!(!this[a]||!this[a].after)};return e}(d)}})},"esri/views/2d/engine/DOMContainer":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./Container"],function(n,g,b,a){return function(a){function d(){return null!==a&&a.apply(this,arguments)||this}b(d,a);d.prototype.createElement=function(){var a=document.createElement("div");a.setAttribute("class","esri-display-object");return a};d.prototype.setElement=function(a){this.element=a};d.prototype.doRender=
function(b){var d=this.element.style;this.visible?(d.display="block",a.prototype.doRender.call(this,b)):d.display="none"};d.prototype.prepareChildrenRenderParameters=function(a){return a};d.prototype.attachChild=function(a,b){var c=a.element;c||(c=a.createElement(),a.setElement(c));return a.attach(b)};d.prototype.detachChild=function(a,b){a.detach(b);this.element.contains(a.element)&&this.element.removeChild(a.element);a.setElement(null)};d.prototype.renderChildren=function(b){for(var d=this.children,
c=this.element.childNodes,f=0,h=d.length,k=0;k<h;k++)if(d[k].attached){var p=d[k].element;c[f]!==p&&(null!=c[f+1]?this.element.insertBefore(p,c[f]):this.element.appendChild(p));f+=1}a.prototype.renderChildren.call(this,b)};return d}(a)})},"esri/views/2d/engine/StageGL":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/promiseUtils ./Container ./webgl/BitBlitRenderer ./webgl/WGLPainter ./webgl/shaders/glShaderSnippets ../libs/gl-matrix/common ../libs/gl-matrix/mat2d ../libs/gl-matrix/vec2 ../../support/screenshotUtils ../../webgl/BufferObject ../../webgl/context-util ../../webgl/FramebufferObject ../../webgl/Program ../../webgl/RenderingContext ../../webgl/VertexArrayObject".split(" "),
function(n,g,b,a,f,d,k,e,c,l,h,m,p,r,t,q,u,x){function v(a){return{state:a.state,pixelRatio:a.pixelRatio,stationary:a.stationary}}var y={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"};return function(f){function g(){var a=null!==f&&f.apply(this,arguments)||this;a._clipData=new Float32Array(8);a._upperLeft=h.create();a._upperRight=h.create();a._lowerLeft=h.create();a._lowerRight=h.create();a._mat2=l.create();a._clipRendererInitialized=!1;a._contextVersion=null;return a}b(g,f);Object.defineProperty(g.prototype,
"glPainter",{get:function(){return this._painter},enumerable:!0,configurable:!0});g.prototype.createElement=function(){var a=document.createElement("canvas");a.setAttribute("class","esri-display-object");return a};g.prototype.setElement=function(a){this.element=a};g.prototype.useContextVersion=function(a){this._renderingContext||(this._contextVersion=a)};g.prototype.attach=function(a){if(this.attached)return!0;this._resizeCanvas(a);var b=r.createContextOrErrorHTML(this.element,{alpha:!0,antialias:!1,
depth:!0,stencil:!0},this._contextVersion);this._renderingContext=new u(b);this._contextVersion=this._renderingContext.contextVersion;this.attached=!0;this._cachedRenderParams=v(a);this._painter||(this._painter=new k.default,this._painter.initialize(this._renderingContext));return f.prototype.attach.call(this,a)};g.prototype.detach=function(a){f.prototype.detach.call(this,a);this._boundFBO=null;this._clipFBO&&(this._clipFBO.dispose(),this._clipFBO=null);this._blitRenderer&&(this._blitRenderer.dispose(),
this._blitRenderer=null);this._clipVAO&&(this._clipVAO.dispose(),this._clipVBO=this._clipVAO=null);this._painter&&(this._painter.dispose(),this._painter=null);this._clipStencilProgram&&(this._clipStencilProgram.dispose(),this._clipStencilProgram=null);this._renderingContext&&(this._renderingContext.dispose(),this._renderingContext=null);this._cachedRenderParams=null};g.prototype.beforeRenderChildren=function(a,b){var d=a.state,e=this._painter;if(e)if(b=this._renderingContext,b.enforceState(),e.update(d,
a.pixelRatio),d.spatialReference&&(d.spatialReference._isWrappable?d.spatialReference._isWrappable():d.spatialReference.isWrappable)){var f=d.width,e=d.height,k=d.rotation,f=Math.round(f*a.pixelRatio),e=Math.round(e*a.pixelRatio),m=c.toRadian(k),p=Math.abs(Math.cos(m)),r=Math.abs(Math.sin(m)),q=Math.round(d.worldScreenWidth);if(Math.round(f*p+e*r)<=q)this._clipFrame=!1;else{this._clipFBO&&this._clipFBO.width===f&&this._clipFBO.height===e||(this._clipFBO=new t(b,{colorTarget:0,depthStencilTarget:3,
width:f,height:e}));var g=.5*f,u=.5*e,d=1/f,w=1/e;a=.5*q*a.pixelRatio;var v=.5*(f*r+e*p),f=this._upperLeft,p=this._upperRight,r=this._lowerLeft,q=this._lowerRight;h.set(f,-a,-v);h.set(p,a,-v);h.set(r,-a,v);h.set(q,a,v);l.identity(this._mat2);l.translate(this._mat2,this._mat2,[g,u]);0!==k&&l.rotate(this._mat2,this._mat2,m);h.transformMat2d(f,f,this._mat2);h.transformMat2d(p,p,this._mat2);h.transformMat2d(r,r,this._mat2);h.transformMat2d(q,q,this._mat2);k=this._clipData;k.set([2*r[0]*d-1,2*(e-r[1])*
w-1,2*q[0]*d-1,2*(e-q[1])*w-1,2*f[0]*d-1,2*(e-f[1])*w-1,2*p[0]*d-1,2*(e-p[1])*w-1]);this._clipRendererInitialized||this._initializeClipRenderer(b);this._clipVBO.setData(k);this._boundFBO=b.getBoundFramebufferObject();b.bindFramebuffer(this._clipFBO);b.setDepthWriteEnabled(!0);b.setStencilWriteMask(255);b.setClearColor(0,0,0,0);b.setClearDepth(1);b.setClearStencil(0);b.clear(b.gl.COLOR_BUFFER_BIT|b.gl.DEPTH_BUFFER_BIT|b.gl.STENCIL_BUFFER_BIT);b.setDepthWriteEnabled(!1);this._clipFrame=!0}}else this._clipFrame=
!1};g.prototype.afterRenderChildren=function(a,b){this._clipFrame&&this._clipRendererInitialized&&(a=this._renderingContext,a.bindFramebuffer(this._boundFBO),this._boundFBO=null,a.bindVAO(this._clipVAO),a.bindProgram(this._clipStencilProgram),a.setDepthWriteEnabled(!1),a.setDepthTestEnabled(!1),a.setStencilTestEnabled(!0),a.setBlendingEnabled(!1),a.setColorMask(!1,!1,!1,!1),a.setStencilOp(7680,7680,7681),a.setStencilWriteMask(255),a.setStencilFunction(519,1,255),a.drawElements(4,6,5123,0),a.bindVAO(),
a.setColorMask(!0,!0,!0,!0),a.setBlendingEnabled(!0),a.setStencilFunction(514,1,255),this._blitRenderer.render(a,this._clipFBO.colorTexture,9728,1),a.setStencilTestEnabled(!1))};g.prototype.doRender=function(a){var b=this.element.style;this.visible?(b.display="block",b.opacity=""+this.opacity,this._resizeCanvas(a),f.prototype.doRender.call(this,a),this._cachedRenderParams=v(a)):b.display="none"};g.prototype.takeScreenshot=function(b){void 0===b&&(b={});var c=b.pixelRatio||1;this._cachedRenderParams.pixelRatio=
c;var d=Math.round(c*this._cachedRenderParams.state.width),e=Math.round(c*this._cachedRenderParams.state.height),h=0,f=0,k=d,l=e,p=d,r=e;if(p=b.area)h=Math.round(c*p.x),f=Math.round(c*p.y),k=Math.round(c*p.width),l=Math.round(c*p.height);void 0!==b.width&&void 0!==b.height?(p=b.width/b.height,l*p<k?(p*=l,h+=Math.floor((k-p)/2),k=Math.floor(p)):(p=k/p,f+=Math.floor((l-p)/2),l=Math.floor(p)),p=b.width,r=b.height):(p=k,r=l);c=document.createElement("canvas");c.width=p;c.height=r;var q=c.getContext("2d"),
g=new Uint8Array(k*l*4),u=this._renderingContext,w=t.create(u,{colorTarget:1,depthStencilTarget:3,width:d,height:e});u.bindFramebuffer(w);u.setViewport(0,0,d,e);var v=this._cachedRenderParams,x=this._renderingContext.gl;this._renderingContext.setClearColor(0,0,0,0);this._renderingContext.setClearDepth(1);this._renderingContext.setClearStencil(0);this._renderingContext.clear(x.COLOR_BUFFER_BIT|x.DEPTH_BUFFER_BIT|x.STENCIL_BUFFER_BIT);v.context=this._renderingContext;v.painter=this._painter;this.beforeRenderChildren(v,
v);if(void 0!==b.rotation&&null!==b.rotation){var x=v.state,A=x.clone();A.viewpoint.rotation=b.rotation;v.state=A;this.renderChildren(v);v.state=x}else this.renderChildren(v);this.afterRenderChildren(v,v);w.readPixels(h,e-(f+l),k,l,6408,5121,g);u.bindFramebuffer();u=q.getImageData(0,0,p,r);if(0!==h||0!==f||k!==d||l!==e||p!==d||r!==e)m.resampleHermite(g,k,l,u.data,p,r,!0);else{f=l-1;l=0;w=4*k;for(A=x=h=e=d=k=v=void 0;l<f;){x=l*w;A=f*w;for(v=0;v<w;v+=4)k=g[x+v],d=g[x+v+1],e=g[x+v+2],h=g[x+v+3],g[x+
v]=g[A+v],g[x+v+1]=g[A+v+1],g[x+v+2]=g[A+v+2],g[x+v+3]=g[A+v+3],g[A+v]=k,g[A+v+1]=d,g[A+v+2]=e,g[A+v+3]=h;l++;f--}k=u.data;d=g.length;for(f=0;f<d;f++)k[f]=g[f]}g=u.data;l=g.length;for(f=0;f<l;f+=4)h=g[f+3],0<h&&(e=h/255,k=Math.floor(g[f+0]/e),d=Math.floor(g[f+1]/e),e=Math.floor(g[f+2]/e),g[f+0]=255>=k?k:255,g[f+1]=255>=d?d:255,g[f+2]=255>=e?e:255);q.putImageData(u,0,0);q=y[b.format?b.format.toLowerCase():"png"];g=1;void 0!==b.quality&&(g=b.quality/100);b=c.toDataURL(q,g);return a.resolve({dataURL:b,
x:0,y:0,width:p,height:r})};g.prototype.prepareChildrenRenderParameters=function(a){if(!this.attached||!this._renderingContext)return null;a=v(a);var b=this._renderingContext,c=b.gl;b.setDepthWriteEnabled(!0);b.setStencilWriteMask(255);b.setClearColor(0,0,0,0);b.setClearDepth(1);b.setClearStencil(0);b.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT|c.STENCIL_BUFFER_BIT);b.setViewport(0,0,this.element.width,this.element.height);b.setDepthWriteEnabled(!1);a.context=b;a.painter=this._painter;return a};g.prototype.attachChild=
function(a,b){return a.attach(b)};g.prototype.detachChild=function(a,b){return a.detach(b)};g.prototype.renderChild=function(a,b){return a.processRender(b)};g.prototype._resizeCanvas=function(a){var b=this.element,c=b.style,d=a.state,e=a.pixelRatio;a=Math.round(d.width*e);e=Math.round(d.height*e);if(b.width!==a||b.height!==e)b.width=a,b.height=e;c.width=d.width+"px";c.height=d.height+"px"};g.prototype._initializeClipRenderer=function(a){if(this._clipRendererInitialized)return!0;this._blitRenderer=
new d;var b={a_pos:0},c=new q(a,e.stencilVS,e.stencilFS,b);if(!c)return!1;var h=p.createVertex(a,35040,32),f=new Uint16Array([0,1,2,2,1,3]),f=p.createIndex(a,35044,f);a=new x(a,b,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:h},f);this._clipStencilProgram=c;this._clipVBO=h;this._clipVAO=a;return this._clipRendererInitialized=!0};return g}(f)})},"esri/views/2d/engine/webgl/BitBlitRenderer":function(){define("require exports ./shaders/glShaderSnippets ../../../webgl/BufferObject ../../../webgl/Program ../../../webgl/VertexArrayObject".split(" "),
function(n,g,b,a,f,d){return function(){function k(){this._initialized=!1}k.prototype.dispose=function(){this._program&&(this._program.dispose(),this._program=null);this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=null)};k.prototype.render=function(a,b,d,h){a&&(this._initialized||this._initialize(a),a.setBlendFunctionSeparate(1,771,1,771),a.bindVAO(this._vertexArrayObject),a.bindProgram(this._program),b.setSamplingMode(d),a.bindTexture(b,0),this._program.setUniform1i("u_tex",
0),this._program.setUniform1f("u_opacity",h),a.drawArrays(5,0,4),a.bindVAO())};k.prototype._initialize=function(e){if(this._initialized)return!0;var c={a_pos:0,a_tex:1},k=new f(e,b.bitblitVS,b.bitblitFS,c);if(!k)return!1;var h=new Int8Array(16);h[0]=-1;h[1]=-1;h[2]=0;h[3]=0;h[4]=1;h[5]=-1;h[6]=1;h[7]=0;h[8]=-1;h[9]=1;h[10]=0;h[11]=1;h[12]=1;h[13]=1;h[14]=1;h[15]=1;e=new d(e,c,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,
stride:4,normalized:!1,divisor:0}]},{geometry:a.createVertex(e,35044,h)});this._program=k;this._vertexArrayObject=e;return this._initialized=!0};return k}()})},"esri/views/2d/engine/webgl/shaders/glShaderSnippets":function(){define("require exports dojo/text!./backgroundShaders.xml dojo/text!./bitblitShaders.xml dojo/text!./stencilShaders.xml dojo/text!./tileInfo.xml ../../../../webgl/ShaderSnippets".split(" "),function(n,g,b,a,f,d,k){n=new k;k.parse(b,n);k.parse(a,n);k.parse(f,n);k.parse(d,n);return n})},
"esri/views/webgl/ShaderSnippets":function(){define(["require","exports","dojox/xml/parser"],function(n,g,b){return function(){function a(a){if(a)for(var b in a)this[b]=a[b]}a.parse=function(a,d){a=b.parse(a).getElementsByTagName("snippet");for(var f=/\$[a-zA-Z][a-zA-Z0-9]*(?:\([^\(\)]*\))?[ \t]*/,e=/[\$\s]+/g,c=/\(([^\(\)]*)\)/,l=0;l<a.length;l++){for(var h=a[l].getAttribute("name"),m=a[l].textContent;;){var p=m.match(f);if(null==p)break;var r=p[0].replace(e,""),t=r.match(c),q=void 0;t&&(q=t[1].split(",").map(function(a){return a.trim()}));
r=r.replace(c,"");q=d._instantiate(r,q);m=m.replace(p[0],q)}d[h]=m}};a.prototype._instantiate=function(a,b){a=this[a];for(b||(b=[]);;){var d=a.match(/\$(\d+)/);if(null==d)break;var e=parseInt(d[1],10);a=a.replace(d[0],b[e])}return a};return a}()})},"dojox/xml/parser":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(n){n.getObject("xml.parser",!0,dojox);dojox.xml.parser.parse=function(g,b){var a=n.doc,f;b=b||"text/xml";if(g&&
n.trim(g)&&"DOMParser"in n.global){f=(new DOMParser).parseFromString(g,b);g=f.documentElement;if("parsererror"==g.nodeName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"==g.namespaceURI){if(a=g.getElementsByTagNameNS("http://www.mozilla.org/newlayout/xml/parsererror.xml","sourcetext")[0])a=a.firstChild.data;throw Error("Error parsing text "+g.firstChild.data+" \n"+a);}return f}if("ActiveXObject"in n.global){a=function(a){return"MSXML"+a+".DOMDocument"};a=["Microsoft.XMLDOM",a(6),a(4),a(3),
a(2)];n.some(a,function(a){try{f=new ActiveXObject(a)}catch(e){return!1}return!0});if(g&&f&&(f.async=!1,f.loadXML(g),g=f.parseError,0!==g.errorCode))throw Error("Line: "+g.line+"\nCol: "+g.linepos+"\nReason: "+g.reason+"\nError Code: "+g.errorCode+"\nSource: "+g.srcText);if(f)return f}else if(a.implementation&&a.implementation.createDocument){if(g&&n.trim(g)&&a.createElement){b=a.createElement("xml");b.innerHTML=g;var d=a.implementation.createDocument("foo","",null);n.forEach(b.childNodes,function(a){d.importNode(a,
!0)});return d}return a.implementation.createDocument("","",null)}return null};dojox.xml.parser.textContent=function(g,b){if(1<arguments.length)return dojox.xml.parser.replaceChildren(g,(g.ownerDocument||n.doc).createTextNode(b)),b;if(void 0!==g.textContent)return g.textContent;var a="";g&&n.forEach(g.childNodes,function(b){switch(b.nodeType){case 1:case 5:a+=dojox.xml.parser.textContent(b);break;case 3:case 2:case 4:a+=b.nodeValue}});return a};dojox.xml.parser.replaceChildren=function(g,b){var a=
[];n.isIE&&n.forEach(g.childNodes,function(b){a.push(b)});dojox.xml.parser.removeChildren(g);n.forEach(a,n.destroy);n.isArray(b)?n.forEach(b,function(a){g.appendChild(a)}):g.appendChild(b)};dojox.xml.parser.removeChildren=function(g){for(var b=g.childNodes.length;g.hasChildNodes();)g.removeChild(g.firstChild);return b};dojox.xml.parser.innerXML=function(g){return g.innerXML?g.innerXML:g.xml?g.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(g):null};return dojox.xml.parser})},
"esri/views/webgl/BufferObject":function(){define(["require","exports","dojo/has"],function(n,g,b){return function(){function a(b,d,k,e,c){this._glName=this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this._context=b;this._bufferType=d;this._usage=k;this._id=a._nextId++;this._glName=this._context.gl.createBuffer();e&&this.setData(e,c)}a.createIndex=function(b,d,k,e){return new a(b,34963,d,k,e)};a.createVertex=function(b,d,k){return new a(b,34962,d,
k)};Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"usage",{get:function(){return this._usage},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"bufferType",{get:function(){return this._bufferType},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"indexType",{get:function(){return this._indexType},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0});a.prototype.dispose=function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context=null)};a.prototype.setData=
function(a,b){if(a){if("number"===typeof a){if(0>a&&console.error("Buffer size cannot be negative!"),34963===this._bufferType&&b)switch(this._indexType=b,this._size=a,b){case 5123:a*=2;break;case 5125:a*=4}}else b=a.byteLength,a instanceof Uint16Array&&(b/=2,this._indexType=5123),a instanceof Uint32Array&&(b/=4,this._indexType=5125),this._size=b,ArrayBuffer.isView(a)&&(a=a.buffer);b=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,
a,this._usage);this._context.bindVAO(b)}};a.prototype.setSubData=function(a,b,k,e){void 0===b&&(b=0);void 0===k&&(k=0);if(a){(0>b||b>=this._size)&&console.error("offset is out of range!");var c=b,d=k,h=e,f=a.byteLength;a instanceof Uint16Array&&(f/=2,c*=2,d*=2,h*=2);a instanceof Uint32Array&&(f/=4,c*=4,d*=4,h*=4);void 0===e&&(e=f-1);k>=e&&console.error("end must be bigger than start!");b+k-e>this._size&&console.error("An attempt to write beyond the end of the buffer!");b=this._context.getBoundVAO();
this._context.bindVAO(null);this._context.bindBuffer(this);k=this._context.gl;a=ArrayBuffer.isView(a)?a.buffer:a;k.bufferSubData(this._bufferType,c,a.slice(d,h));this._context.bindVAO(b)}};a._nextId=0;return a}()})},"esri/views/webgl/Program":function(){define(["require","exports","dojo/has","./ShaderTranspiler"],function(n,g,b,a){return function(){function b(a,f,e,c,l){void 0===l&&(l={});this._glName=this._context=null;this._locations={};this._id=void 0;this._initialized=!1;this._fShader=this._vShader=
null;this._defines={};this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform2={};this._nameToUniform3={};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};a||console.error("RenderingContext isn't initialized!");0===f.length&&console.error("Shaders source should not be empty!");this._context=a;this._vertexShaderSource=f;this._fragmentShaderSource=e;if(Array.isArray(l))for(a=0;a<l.length;a++)this._defines[l[a]]="1";
else this._defines=l;this._id=b._nextId++;this._locations=c}Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});b.prototype.getDefine=function(a){return this._defines[a]};b.prototype.dispose=function(){if(this._context){var a=
this._context.gl;this._vShader&&(a.deleteShader(this._vShader),this._vShader=null);this._fShader&&(a.deleteShader(this._fShader),this._fShader=null);this._glName&&(a.deleteProgram(this._glName),this._glName=null);this._context=null}};b.prototype.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);this._fShader=this._loadShader(35632);this._vShader&&this._fShader||console.error("Error loading shaders!");var a=this._context.gl,b=a.createProgram();a.attachShader(b,this._vShader);
a.attachShader(b,this._fShader);for(var e in this._locations)a.bindAttribLocation(b,this._locations[e],e);a.linkProgram(b);a.getProgramParameter(b,a.LINK_STATUS)||console.error("Could not initialize shader\nVALIDATE_STATUS: "+a.getProgramParameter(b,a.VALIDATE_STATUS)+", gl error ["+a.getError()+"]infoLog: "+a.getProgramInfoLog(b));this._glName=b;this._initialized=!0}};b.prototype.getUniformLocation=function(a){this.initialize();void 0===this._nameToUniformLocation[a]&&(this._nameToUniformLocation[a]=
this._context.gl.getUniformLocation(this._glName,a));return this._nameToUniformLocation[a]};b.prototype.hasUniform=function(a){return null!==this.getUniformLocation(a)};b.prototype.getAttribLocation=function(a){this.initialize();void 0===this._nameToAttribLocation[a]&&(this._nameToAttribLocation[a]=this._context.gl.getAttribLocation(this._glName,a));return this._nameToAttribLocation[a]};b.prototype.setUniform1i=function(a,b){var d=this._nameToUniform1[a];if(void 0===d||b!==d)this._context.bindProgram(this),
this._context.gl.uniform1i(this.getUniformLocation(a),b),this._nameToUniform1[a]=b};b.prototype.setUniform1f=function(a,b){var d=this._nameToUniform1[a];if(void 0===d||b!==d)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(a),b),this._nameToUniform1[a]=b};b.prototype.setUniform1fv=function(a,f){var d=this._nameToUniform2[a];void 0!==d&&b._arraysEqual(f,d)||(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(a),f),void 0===d?this._nameToUniform2[a]=
new Float32Array(f):d.set(f))};b.prototype.setUniform2f=function(a,b,e){var c=this._nameToUniform2[a];if(void 0===c||b!==c[0]||e!==c[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(a),b,e),void 0===c?this._nameToUniform2[a]=new Float32Array([b,e]):(c[0]=b,c[1]=e)};b.prototype.setUniform2fv=function(a,f){var d=this._nameToUniform2[a];void 0!==d&&b._arraysEqual(f,d)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(a),f),void 0===
d?this._nameToUniform2[a]=new Float32Array(f):d.set(f))};b.prototype.setUniform3f=function(a,b,e,c){var d=this._nameToUniform3[a];if(void 0===d||b!==d[0]||e!==d[1]||c!==d[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(a),b,e,c),void 0===d?this._nameToUniform3[a]=new Float32Array([b,e,c]):(d[0]=b,d[1]=e,d[2]=c)};b.prototype.setUniform3fv=function(a,f){var d=this._nameToUniform3[a];void 0!==d&&b._arraysEqual(f,d)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(a),
f),void 0===d?this._nameToUniform3[a]=new Float32Array(f):d.set(f))};b.prototype.setUniform4f=function(a,b,e,c,f){var d=this._nameToUniform4[a];if(void 0===d||b!==d[0]||e!==d[1]||c!==d[2]||f!==d[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(a),b,e,c,f),void 0===d?this._nameToUniform4[a]=new Float32Array([b,e,c,f]):(d[0]=b,d[1]=e,d[2]=c,d[3]=f)};b.prototype.setUniform4fv=function(a,f){var d=this._nameToUniform4[a];void 0!==d&&b._arraysEqual(f,d)||(this._context.bindProgram(this),
this._context.gl.uniform4fv(this.getUniformLocation(a),f),void 0===d?this._nameToUniform4[a]=new Float32Array(f):d.set(f))};b.prototype.setUniformMatrix3fv=function(a,f,e){void 0===e&&(e=!1);var c=this._nameToUniformMatrix3[a];void 0!==c&&(9===c.length?b._matrix3Equal(c,f):b._arraysEqual(f,c))||(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(a),e,f),void 0===c?this._nameToUniformMatrix3[a]=new Float32Array(f):c.set(f))};b.prototype.setUniformMatrix4fv=function(a,
f,e){void 0===e&&(e=!1);var c=this._nameToUniformMatrix4[a];void 0!==c&&(16===c.length?b._matrix4Equal(c,f):b._arraysEqual(f,c))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(a),e,f),void 0===c?this._nameToUniformMatrix4[a]=new Float32Array(f):c.set(f))};b._padToThree=function(a){var b=a.toString();1E3>a&&(b=("  "+a).slice(-3));return b};b.prototype._addLineNumbers=function(a){var d=2;return a.replace(/\n/g,function(){return"\n"+b._padToThree(d++)+":"})};
b.prototype._loadShader=function(b){var d=35633===b,e=d?this._vertexShaderSource:this._fragmentShaderSource,c;c="";for(var f in this._defines)c+="#define "+f+" "+this._defines[f]+"\n";c+=e;"webgl2"===this._context.contextVersion&&(c=a.transpileShader(c,d?"vertex":"fragment"));d=this._context.gl;b=d.createShader(b);d.shaderSource(b,c);d.compileShader(b);d.getShaderParameter(b,d.COMPILE_STATUS)||(console.error(d.getShaderInfoLog(b)),console.error(this._addLineNumbers(c)),"webgl2"===this._context.contextVersion&&
(console.log("Shader source before transpilation:"),console.log(e)));return b};b._matrix4Equal=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};b._matrix3Equal=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]};b._arraysEqual=
function(a,b){if(a.length!==b.length)return!1;for(var d=0;d<a.length;++d)if(a[d]!==b[d])return!1;return!0};b._nextId=0;return b}()})},"esri/views/webgl/ShaderTranspiler":function(){define(["require","exports","./reservedWordsGLSL3","./lib/glsl-tokenizer/string"],function(n,g,b,a){function f(a){return a.map(function(a){return"eof"!==a.type?a.data:""}).join("")}function d(a,b,e,f){f=f||e;for(var c=0;c<a.length;c++){var h=a[c];if("ident"===h.type&&h.data===e)return f in b?b[f]++:b[f]=0,d(a,b,f+"_"+b[f],
f)}return e}function k(a,b,d){void 0===d&&(d="afterVersion");var c={data:"\n",type:"whitespace"},e=function(b){return b<a.length?/[^\r\n]$/.test(a[b].data):!1},h=function(a){for(var b=-1,c=0,e=-1,h=0;h<a.length;h++){var f=a[h];"preprocessor"===f.type&&(f.data.match(/\#(if|ifdef|ifndef)\s+.+/)?++c:f.data.match(/\#endif\s*.*/)&&--c);("afterVersion"===d||"afterPrecision"===d)&&"preprocessor"===f.type&&/^#version/.test(f.data)&&(e=Math.max(e,h));if("afterPrecision"===d&&"keyword"===f.type&&"precision"===
f.data){a:{for(f=h;f<a.length;f++){var l=a[f];if("operator"===l.type&&";"===l.data)break a}f=null}if(null===f)throw Error("precision statement not followed by any semicolons!");e=Math.max(e,f)}b<e&&0===c&&(b=h)}return b+1}(a);e(h-1)&&a.splice(h++,0,c);for(var f=0;f<b.length;f++){var l=b[f];a.splice(h++,0,l)}e(h-1)&&e(h)&&a.splice(h,0,c)}Object.defineProperty(g,"__esModule",{value:!0});var e=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];g.transpileShader=
function(c,l){c=a(c);var h;a:{h="100";var m="300 es";void 0===h&&(h="100");void 0===m&&(m="300 es");for(var p=/^\s*\#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/,r=0;r<c.length;r++){var t=c[r];if("preprocessor"===t.type){var q=p.exec(t.data);if(q)if(p=q[1].replace(/\s\s+/g," "),p===m){h=p;break a}else if(p===h){t.data="#version "+m;break a}else throw Error("unknown glsl version: "+p);}}c.splice(0,0,{type:"preprocessor",data:"#version "+m},{type:"whitespace",data:"\n"});h=null}if("300 es"===h)throw Error("shader is already glsl 300 es");
p=t=null;r={};q={};for(h=0;h<c.length;++h)switch(m=c[h],m.type){case "keyword":"vertex"===l&&"attribute"===m.data?m.data="in":"varying"===m.data&&(m.data="vertex"===l?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(m.data.trim())&&(m.data=m.data.replace(/(2D|Cube|EXT)/g,""));if("fragment"===l&&"gl_FragColor"===m.data){if(!t){var t=d(c,r,"fragColor"),g=void 0;void 0===g&&(g="lowp");k(c,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:g},
{type:"whitespace",data:" "},{type:"keyword",data:"vec4"},{type:"whitespace",data:" "},{type:"ident",data:t},{type:"operator",data:";"}],"afterPrecision")}m.data=t}else"fragment"===l&&"gl_FragDepthEXT"===m.data&&(p||(p=d(c,r,"gl_FragDepth")),m.data=p);break;case "ident":if(0<=b.indexOf(m.data)){if(g="vertex"===l)a:{for(g=h-1;0<=g;g--){var x=c[g];if("whitespace"!==x.type&&"block-comment"!==x.type)if("keyword"===x.type){if("attribute"===x.data||"in"===x.data){g=!0;break a}}else break}g=!1}if(g)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");
m.data in q||(q[m.data]=d(c,r,m.data));m.data=q[m.data]}}for(h=c.length-1;0<=h;--h)m=c[h],"preprocessor"===m.type&&((l=m.data.match(/\#extension\s+(.*)\:/))&&l[1]&&0<=e.indexOf(l[1].trim())&&(l=c[h+1],c.splice(h,l&&"whitespace"===l.type?2:1)),(l=m.data.match(/\#ifdef\s+(.*)/))&&l[1]&&0<=e.indexOf(l[1].trim())&&(m.data="#if 1"),(l=m.data.match(/\#ifndef\s+(.*)/))&&l[1]&&0<=e.indexOf(l[1].trim())&&(m.data="#if 0"));return f(c)}})},"esri/views/webgl/reservedWordsGLSL3":function(){define(["require","exports"],
function(n,g){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/views/webgl/lib/glsl-tokenizer/string":function(){define(["./index"],function(n){"use strict;";return function(g){var b=n(),a=[],a=a.concat(b(g));return a=a.concat(b(null))}})},"esri/views/webgl/lib/glsl-tokenizer/index":function(){define(["./lib/literals","./lib/operators","./lib/builtins"],function(n,g,b){"use strict;";var a="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");return function(){function f(b){b.length&&x.push({type:a[r],
data:b,position:w,line:v,column:y})}function d(){u=u.length?[]:u;if("/"===q&&"*"===t)return w=p+m-1,r=0,q=t,m+1;if("/"===q&&"/"===t)return w=p+m-1,r=1,q=t,m+1;if("#"===t)return r=2,w=p+m,m;if(/\s/.test(t))return r=9,w=p+m,m;A=/\d/.test(t);B=/[^\w_]/.test(t);w=p+m;r=A?4:B?3:9999;return m}function k(){if(("\r"===t||"\n"===t)&&"\\"!==q)return f(u.join("")),r=999,m;u.push(t);q=t;return m+1}function e(){if("."===q&&/\d/.test(t))return r=5,m;if("/"===q&&"*"===t)return r=0,m;if("/"===q&&"/"===t)return r=
1,m;if("."===t&&u.length){for(;c(u););r=5;return m}if(";"===t||")"===t||"("===t){if(u.length)for(;c(u););f(t);r=999;return m+1}var a=2===u.length&&"\x3d"!==t;if(/[\w_\d\s]/.test(t)||a){for(;c(u););r=999;return m}u.push(t);q=t;return m+1}function c(a){var b=0,c,d;do{c=g.indexOf(a.slice(0,a.length+b).join(""));d=g[c];if(-1===c){if(0<b--+a.length)continue;d=a.slice(0,1).join("")}f(d);w+=d.length;u=u.slice(d.length);return u.length}while(1)}function l(){if("."===t||/[eE]/.test(t))return u.push(t),r=5,
q=t,m+1;if("x"===t&&1===u.length&&"0"===u[0])return r=11,u.push(t),q=t,m+1;if(/[^\d]/.test(t))return f(u.join("")),r=999,m;u.push(t);q=t;return m+1}function h(){"f"===t&&(u.push(t),q=t,m+=1);if(/[eE]/.test(t)||"-"===t&&/[eE]/.test(q))return u.push(t),q=t,m+1;if(/[^\d]/.test(t))return f(u.join("")),r=999,m;u.push(t);q=t;return m+1}var m=0,p=0,r=999,t,q,u=[],x=[],v=1,y=0,w=0,A=!1,B=!1,z="",C;return function(a){x=[];if(null!==a){a=a.replace?a.replace(/\r\n/g,"\n"):a;m=0;z+=a;for(C=z.length;t=z[m],m<
C;){a=m;switch(r){case 0:"/"===t&&"*"===q?(u.push(t),f(u.join("")),r=999):(u.push(t),q=t);m+=1;break;case 1:m=k();break;case 2:m=k();break;case 3:m=e();break;case 4:m=l();break;case 11:/[^a-fA-F0-9]/.test(t)?(f(u.join("")),r=999):(u.push(t),q=t,m+=1);break;case 5:m=h();break;case 9999:if(/[^\d\w_]/.test(t)){var c=u.join("");r=-1<n.indexOf(c)?8:-1<b.indexOf(c)?7:6;f(u.join(""));r=999}else u.push(t),q=t,m+=1;break;case 9:/[^\s]/g.test(t)?(f(u.join("")),r=999):(u.push(t),q=t,m+=1);break;case 999:m=d()}if(a!==
m)switch(z[a]){case "\n":y=0;++v;break;default:++y}}p+=m;z=z.slice(m);return x}u.length&&f(u.join(""));r=10;f("(eof)");return x}}})},"esri/views/webgl/lib/glsl-tokenizer/lib/literals":function(){define([],function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})},
"esri/views/webgl/lib/glsl-tokenizer/lib/operators":function(){define([],function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})},"esri/views/webgl/lib/glsl-tokenizer/lib/builtins":function(){define([],function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})},
"esri/views/webgl/VertexArrayObject":function(){define(["require","exports","dojo/has","./Util"],function(n,g,b,a){return function(){function b(a,f,e,c,l){this._locations=this._layout=this._glName=this._context=null;this._indexBuffer=this._buffers=void 0;this._initialized=!1;this._context=a;this._layout=e;this._buffers=c;this._locations=f;l&&(this._indexBuffer=l);this._id=b._nextId++}Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"size",{get:function(){var a=this;return Object.keys(this._buffers).reduce(function(b,d){return b+a._buffers[d].size},this._indexBuffer?this._indexBuffer.size:
0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});b.prototype.dispose=function(a){void 0===a&&(a=!0);if(this._context){var b=this._context.capabilities.vao;b&&this._glName&&(b.deleteVertexArray(this._glName),this._glName=null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);
if(a){for(var d in this._buffers)this._buffers[d].dispose(),delete this._buffers[d];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}this._context=null}};b.prototype.initialize=function(){if(!this._initialized){var a=this._context.capabilities.vao;if(a){var b=a.createVertexArray();a.bindVertexArray(b);this._bindLayout();a.bindVertexArray(null);this._glName=b}this._initialized=!0}};b.prototype.bind=function(){this.initialize();var a=this._context.capabilities.vao;a?a.bindVertexArray(this.glName):
(this._context.bindVAO(null),this._bindLayout())};b.prototype._bindLayout=function(){var b=this._buffers,f=!!this._context.capabilities.vao,e=this._layout,c=this._indexBuffer;b||console.error("Vertex buffer dictionary is empty!");var l=this._context.gl,h;for(h in b){var m=b[h];m||console.error("Vertex buffer is uninitialized!");var p=e[h];p||console.error("Vertex element descriptor is empty!");a.bindVertexBufferLayout(this._context,this._locations,m,p)}c&&(f?l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,c.glName):
this._context.bindBuffer(c))};b.prototype.unbind=function(){this.initialize();var a=this._context.capabilities.vao;a?a.bindVertexArray(null):this._unbindLayout()};b.prototype._unbindLayout=function(){var b=this._buffers,f=this._layout;b||console.error("Vertex buffer dictionary is empty!");for(var e in b){var c=b[e];c||console.error("Vertex buffer is uninitialized!");a.unbindVertexBufferLayout(this._context,this._locations,c,f[e])}(b=this._indexBuffer)&&this._context.unbindBuffer(b.bufferType)};b._nextId=
0;return b}()})},"esri/views/webgl/Util":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/Error"],function(n,g,b,a){return function(){function f(){}f.vertexCount=function(a,b){return a.vertexBuffers[b].size/f.getStride(a.layout[b])};f.getStride=function(a){return a[0].stride};f.getBytesPerElement=function(a){switch(a){case 5126:return 4;case 5124:return 4;case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");
}};f.addDescriptor=function(a,b,e,c,l,h){var d=f.getBytesPerElement(c);if(0<a.length){var k=a[0].stride,r=k+d*e;a.forEach(function(a){return a.stride=r});a.push({name:b,count:e,type:c,offset:k,stride:r,normalized:l,divisor:h})}else a.push({name:b,count:e,type:c,offset:0,stride:d*e,normalized:l,divisor:h})};f.assertCompatibleVertexAttributeLocations=function(a,b){(a=a.locations===b.locations)||console.error("VertexAttributeLocations are incompatible");return a};f.hasAttribute=function(a,b){for(var d=
0;d<a.length;d++)if(a[d].name===b)return!0;return!1};f.findAttribute=function(a,b){for(var d=0;d<a.length;d++)if(a[d].name===b)return a[d];return null};f.copyFramebufferToTexture=function(a,b,e,c,f){void 0===f&&(f=0);var d=a.getBoundFramebufferObject(),l=a.getBoundTexture(0);a.bindFramebuffer(b);a.bindTexture(e,0);a.gl.copyTexImage2D(a.gl.TEXTURE_2D,f,e.descriptor.pixelFormat,c[0],c[1],c[2],c[3],0);a.gl.flush();a.bindFramebuffer(d);a.bindTexture(l,0)};f.assert=function(b,f){if(!b)throw new a(f);};
f.setBaseInstanceOffset=function(a,f){var d={},c;for(c in a)d[c]=a[c].map(function(a){return a.divisor?b({},a,{baseInstance:f}):a});return d};f.bindVertexBufferLayout=function(a,b,e,c,f){var d=a.gl,l=a.capabilities.instancing;a.bindBuffer(e);c.forEach(function(a){var c=b[a.name],e=(f?f:0+a.baseInstance?a.baseInstance:0)*a.stride;void 0===c&&console.error("There is no location for vertex attribute '"+a.name+"' defined.");a.baseInstance&&!a.divisor&&console.error("Vertex attribute '"+a.name+"' uses baseInstanceOffset without divisor.");
if(4>=a.count)d.vertexAttribPointer(c,a.count,a.type,a.normalized,a.stride,a.offset+e),d.enableVertexAttribArray(c),a.divisor&&0<a.divisor&&l&&l.vertexAttribDivisor(c,a.divisor);else if(9===a.count)for(var h=0;3>h;h++)d.vertexAttribPointer(c+h,3,a.type,a.normalized,a.stride,a.offset+12*h+e),d.enableVertexAttribArray(c+h),a.divisor&&0<a.divisor&&l&&l.vertexAttribDivisor(c+h,a.divisor);else if(16===a.count)for(h=0;4>h;h++)d.vertexAttribPointer(c+h,4,a.type,a.normalized,a.stride,a.offset+16*h+e),d.enableVertexAttribArray(c+
h),a.divisor&&0<a.divisor&&l&&l.vertexAttribDivisor(c+h,a.divisor);else console.error("Unsupported vertex attribute element count: "+a.count)})};f.unbindVertexBufferLayout=function(a,b,e,c){var d=a.gl;a.bindBuffer(e);c.forEach(function(a){var c=b[a.name];if(4>=a.count)d.disableVertexAttribArray(c);else if(9===a.count)for(a=0;3>a;a++)d.disableVertexAttribArray(c+a);else if(16===a.count)for(a=0;4>a;a++)d.disableVertexAttribArray(c+a);else console.error("Unsupported vertex attribute element count: "+
a.count)});a.unbindBuffer(34962)};return f}()})},"esri/views/2d/engine/webgl/WGLPainter":function(){define("require exports ../../../../core/tsSupport/assignHelper dojo/has ../../../../core/libs/gl-matrix/mat4 ./enums ./GeometryUtils ./MaterialManager ./Utils ./brushes/WGLBrushInfo ./brushes/WGLBrushStencil ./brushes/WGLGeometryBrushFill ./brushes/WGLGeometryBrushLine ./brushes/WGLGeometryBrushMarker ./brushes/WGLGeometryBrushText ./painter/WGLHighlightPainter ./../../../webgl/FramebufferObject".split(" "),
function(n,g,b,a,f,d,k,e,c,l,h,m,p,r,t,q,u){Object.defineProperty(g,"__esModule",{value:!0});n=function(){function a(){this._initialized=!1}a.prototype.registerPass=function(a,b){this._initialize();for(var c=0;c<b.length;c++)this._passMap.set(b[c],a);return this};a.prototype.getPaintPassTs=function(a){this._initialize();return this._passMap.has(a)?[this._passMap.get(a)]:[]};a.prototype._initialize=function(){this._initialized||(this._passMap=new Map,this._initialized=!0)};return a}();g.WGLPainterOptions=
n;var x=new Uint8Array(4*c.C_HITTEST_SEARCH_SIZE*c.C_HITTEST_SEARCH_SIZE),v=new Uint32Array(x.buffer);n=function(){function g(){this._hlPainter=new q;this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=new Float32Array(16);this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0;this.materialManager=new e}g.allGeometryPhases=function(){return[d.WGLDrawPhase.FILL,
d.WGLDrawPhase.LINE,d.WGLDrawPhase.MARKER,d.WGLDrawPhase.TEXT]};Object.defineProperty(g.prototype,"extrudeMatrix",{get:function(){return this._extrudeMatrix},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"extrudeNoRotationMatrix",{get:function(){return this._extrudeNoRotationMatrix},enumerable:!0,configurable:!0});g.prototype.dispose=function(){this.materialManager.dispose();this.textureManager=null;this._hlPainter&&(this._hlPainter.dispose(),this._hlPainter=null);this._hittestFBO&&
(this._hittestFBO.dispose(),this._hittestFBO=null);this._passes&&(this._passes.forEach(function(a){return a.dispose()}),this._passes.clear());this._brushes&&(this._brushes.forEach(function(a){return a.forEach(function(a){return a.dispose()})}),this._brushes.clear())};g.prototype.initialize=function(a){this.materialManager.initialize(a)};g.prototype.update=function(a,b){this._state=a;if(this._state.width!==this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)this._extrudeScaleVector[0]=
2/a.width,this._extrudeScaleVector[1]=-2/a.height,f.identity(this._extrudeMatrix),f.rotate(this._extrudeMatrix,this._extrudeMatrix,-a.rotation*k.C_DEG_TO_RAD,this._extrudeRotateVector),f.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),f.transpose(this._extrudeMatrix,this._extrudeMatrix),f.identity(this._extrudeNoRotationMatrix),f.scale(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix,this._extrudeScaleVector),f.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),
this._cachedWidth=this._state.width,this._cachedHeight=this._state.height,this._cachedRotation=this._state.rotation};g.prototype.getBrushes=function(a){if(!this._brushes){var b=new m.default,c=new r.default,e=new p.default,f=new t.default,k=new l.default,q=new h.default;this._brushes=new Map;this._brushes.set(d.WGLDrawPhase.FILL,[b]);this._brushes.set(d.WGLDrawPhase.MARKER,[c]);this._brushes.set(d.WGLDrawPhase.LINE,[e]);this._brushes.set(d.WGLDrawPhase.TEXT,[f]);this._brushes.set(d.WGLDrawPhase.HITTEST,
[b,c,e,f]);this._brushes.set(d.WGLDrawPhase.HIGHLIGHT,[b,c,e,f]);this._brushes.set(d.WGLDrawPhase.CLIP,[q]);this._brushes.set(d.WGLDrawPhase.DEBUG,[k])}if(!this._brushes.has(a))throw Error("WGLPainter: Tried to get brush for unknown phase: "+a);return this._brushes.get(a)};g.prototype.bindTextureManager=function(a){this.textureManager=a};g.prototype.draw=function(a,b,c,d){this._drawClippingRects(a,b);var e=a.context;e.setBlendingEnabled(!0);e.setStencilWriteMask(0);e.setBlendFunctionSeparate(1,771,
1,771);this._drawPhases(a,b,c,d);this._debugTiles(a,b)};g.prototype.setHighlightOptions=function(a){this._hlPainter.setHighlightOptions(a)};g.prototype.highlight=function(a,b){var c=a.context,e=c.getViewport();this._hlPainter.setup(c,e.width,e.height);this._hlPainter.startMaskDraw(c);this._drawClippingRects(a,b);c.setBlendingEnabled(!0);c.setStencilWriteMask(0);c.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(a,b,[d.WGLDrawPhase.HIGHLIGHT]);this._hlPainter.draw(c)};g.prototype.hitTest=function(a,
b){var e=c.C_HITTEST_SEARCH_SIZE,h=[0,0],f=[0,0],l=a.state;l.toMap(h,[0,0]);l.toMap(f,[e,e]);if(0===b.filter(function(a){return!(h[0]>a.bounds[2]||f[0]<a.bounds[0]||h[1]<a.bounds[1]||f[1]>a.bounds[3])}).length)return[];l=a.context;this._hittestFBO||(this._hittestFBO=u.create(l,{colorTarget:0,depthStencilTarget:3,width:e,height:e}));var k=l.getViewport(),m=l.getBoundFramebufferObject();l.bindFramebuffer(this._hittestFBO);l.setViewport(0,0,e,e);this._drawClippingRects(a,b);var p=l.gl;l.setClearColor(1,
1,1,1);l.clear(p.COLOR_BUFFER_BIT);l.setBlendingEnabled(!1);l.setStencilWriteMask(0);this._drawPhases(a,b,[d.WGLDrawPhase.HITTEST]);l.setBlendingEnabled(!0);this._hittestFBO.readPixels(0,0,e,e,6408,5121,x);a=e*e;b=new Set;for(e=0;e<a;e++)p=v[e],4294967295!==p&&b.add(p);l.bindFramebuffer(m);l.setViewport(k.x,k.y,k.width,k.height);var r=[];b.forEach(function(a){r.push(a)});return r};g.prototype._getPaintPass=function(a){this._passes||(this._passes=new Map);if(!this._passes.has(a))try{this._passes.set(a,
new a)}catch(A){throw Error("Tried to instantiate WGLPaintPass with unknown constructor: "+a+",\n"+A);}return this._passes.get(a)};g.prototype._getPaintPasses=function(a,b){var c=this;return b.getPaintPassTs(a).map(function(a){return c._getPaintPass(a)})};g.prototype._drawPhases=function(a,c,d,e){a.context.setStencilTestEnabled(!0);for(var h=0;h<d.length;h++){var f=d[h],l=e?this._getPaintPasses(f,e):[],f=b({},a,{drawPhase:f});l.forEach(function(b){return b.preRender(a,a.rendererInfo)});for(var k=
0,m=c;k<m.length;k++)m[k].doRender(f);l.reverse().forEach(function(b){return b.postRender(a,a.rendererInfo)})}a.context.setStencilTestEnabled(!1)};g.prototype._debugTiles=function(b,c){a("esri-feature-tiles-debug")&&this._drawPhases(b,c,[d.WGLDrawPhase.DEBUG])};g.prototype._drawClippingRects=function(a,b){if(0!==b.length){var c=a.context;c.setDepthWriteEnabled(!1);c.setDepthTestEnabled(!1);c.setStencilTestEnabled(!0);c.setBlendingEnabled(!1);c.setColorMask(!1,!1,!1,!1);c.setStencilOp(7680,7680,7681);
c.setClearStencil(0);c.clear(c.gl.STENCIL_BUFFER_BIT);c.setStencilWriteMask(255);for(var c=0,e=b.length;c<b.length;c++,e--)b[c].stencilRef=e;this._drawPhases(a,b,[d.WGLDrawPhase.CLIP]);a.context.setColorMask(!0,!0,!0,!0)}};return g}();g.default=n})},"esri/core/libs/gl-matrix/mat4":function(){define(["./common"],function(n){var g={scalar:{},SIMD:{},create:function(){var b=new n.ARRAY_TYPE(16);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=
0;b[15]=1;return b},clone:function(b){var a=new n.ARRAY_TYPE(16);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},copy:function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},fromValues:function(b,a,f,d,k,e,c,l,h,m,p,r,t,q,g,x){var u=
new n.ARRAY_TYPE(16);u[0]=b;u[1]=a;u[2]=f;u[3]=d;u[4]=k;u[5]=e;u[6]=c;u[7]=l;u[8]=h;u[9]=m;u[10]=p;u[11]=r;u[12]=t;u[13]=q;u[14]=g;u[15]=x;return u},set:function(b,a,f,d,k,e,c,l,h,m,p,r,t,q,g,x,v){b[0]=a;b[1]=f;b[2]=d;b[3]=k;b[4]=e;b[5]=c;b[6]=l;b[7]=h;b[8]=m;b[9]=p;b[10]=r;b[11]=t;b[12]=q;b[13]=g;b[14]=x;b[15]=v;return b},identity:function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}};g.scalar.transpose=function(b,
a){if(b===a){var f=a[1],d=a[2],k=a[3],e=a[6],c=a[7],l=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=f;b[6]=a[9];b[7]=a[13];b[8]=d;b[9]=e;b[11]=a[14];b[12]=k;b[13]=c;b[14]=l}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};g.SIMD.transpose=function(b,a){var f,d,k,e,c,l;f=SIMD.Float32x4.load(a,0);d=SIMD.Float32x4.load(a,4);k=SIMD.Float32x4.load(a,8);a=SIMD.Float32x4.load(a,
12);e=SIMD.Float32x4.shuffle(f,d,0,1,4,5);c=SIMD.Float32x4.shuffle(k,a,0,1,4,5);l=SIMD.Float32x4.shuffle(e,c,0,2,4,6);e=SIMD.Float32x4.shuffle(e,c,1,3,5,7);SIMD.Float32x4.store(b,0,l);SIMD.Float32x4.store(b,4,e);e=SIMD.Float32x4.shuffle(f,d,2,3,6,7);c=SIMD.Float32x4.shuffle(k,a,2,3,6,7);f=SIMD.Float32x4.shuffle(e,c,0,2,4,6);d=SIMD.Float32x4.shuffle(e,c,1,3,5,7);SIMD.Float32x4.store(b,8,f);SIMD.Float32x4.store(b,12,d);return b};g.transpose=n.USE_SIMD?g.SIMD.transpose:g.scalar.transpose;g.scalar.invert=
function(b,a){var f=a[0],d=a[1],k=a[2],e=a[3],c=a[4],l=a[5],h=a[6],m=a[7],p=a[8],r=a[9],t=a[10],q=a[11],g=a[12],x=a[13],v=a[14];a=a[15];var y=f*l-d*c,w=f*h-k*c,A=f*m-e*c,n=d*h-k*l,z=d*m-e*l,C=k*m-e*h,E=p*x-r*g,D=p*v-t*g,G=p*a-q*g,F=r*v-t*x,L=r*a-q*x,J=t*a-q*v,H=y*J-w*L+A*F+n*G-z*D+C*E;if(!H)return null;H=1/H;b[0]=(l*J-h*L+m*F)*H;b[1]=(k*L-d*J-e*F)*H;b[2]=(x*C-v*z+a*n)*H;b[3]=(t*z-r*C-q*n)*H;b[4]=(h*G-c*J-m*D)*H;b[5]=(f*J-k*G+e*D)*H;b[6]=(v*A-g*C-a*w)*H;b[7]=(p*C-t*A+q*w)*H;b[8]=(c*L-l*G+m*E)*H;b[9]=
(d*G-f*L-e*E)*H;b[10]=(g*z-x*A+a*y)*H;b[11]=(r*A-p*z-q*y)*H;b[12]=(l*D-c*F-h*E)*H;b[13]=(f*F-d*D+k*E)*H;b[14]=(x*w-g*n-v*y)*H;b[15]=(p*n-r*w+t*y)*H;return b};g.SIMD.invert=function(b,a){var f,d,k,e,c,l,h,m;c=SIMD.Float32x4.load(a,0);l=SIMD.Float32x4.load(a,4);h=SIMD.Float32x4.load(a,8);m=SIMD.Float32x4.load(a,12);a=SIMD.Float32x4.shuffle(c,l,0,1,4,5);d=SIMD.Float32x4.shuffle(h,m,0,1,4,5);f=SIMD.Float32x4.shuffle(a,d,0,2,4,6);d=SIMD.Float32x4.shuffle(d,a,1,3,5,7);a=SIMD.Float32x4.shuffle(c,l,2,3,6,
7);e=SIMD.Float32x4.shuffle(h,m,2,3,6,7);k=SIMD.Float32x4.shuffle(a,e,0,2,4,6);e=SIMD.Float32x4.shuffle(e,a,1,3,5,7);a=SIMD.Float32x4.mul(k,e);a=SIMD.Float32x4.swizzle(a,1,0,3,2);c=SIMD.Float32x4.mul(d,a);l=SIMD.Float32x4.mul(f,a);a=SIMD.Float32x4.swizzle(a,2,3,0,1);c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,a),c);l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,a),l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);a=SIMD.Float32x4.mul(d,k);a=SIMD.Float32x4.swizzle(a,1,0,3,2);c=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,
a),c);m=SIMD.Float32x4.mul(f,a);a=SIMD.Float32x4.swizzle(a,2,3,0,1);c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(e,a));m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,a),m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);a=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,3,0,1),e);a=SIMD.Float32x4.swizzle(a,1,0,3,2);k=SIMD.Float32x4.swizzle(k,2,3,0,1);c=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,a),c);h=SIMD.Float32x4.mul(f,a);a=SIMD.Float32x4.swizzle(a,2,3,0,1);c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(k,a));h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,
a),h);h=SIMD.Float32x4.swizzle(h,2,3,0,1);a=SIMD.Float32x4.mul(f,d);a=SIMD.Float32x4.swizzle(a,1,0,3,2);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,a),h);m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,a),m);a=SIMD.Float32x4.swizzle(a,2,3,0,1);h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,a),h);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(k,a));a=SIMD.Float32x4.mul(f,e);a=SIMD.Float32x4.swizzle(a,1,0,3,2);l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(k,a));h=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,a),h);a=SIMD.Float32x4.swizzle(a,
2,3,0,1);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,a),l);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(d,a));a=SIMD.Float32x4.mul(f,k);a=SIMD.Float32x4.swizzle(a,1,0,3,2);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,a),l);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(d,a));a=SIMD.Float32x4.swizzle(a,2,3,0,1);l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(e,a));m=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,a),m);f=SIMD.Float32x4.mul(f,c);f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,2,3,0,1),f);f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,
1,0,3,2),f);a=SIMD.Float32x4.reciprocalApproximation(f);f=SIMD.Float32x4.sub(SIMD.Float32x4.add(a,a),SIMD.Float32x4.mul(f,SIMD.Float32x4.mul(a,a)));f=SIMD.Float32x4.swizzle(f,0,0,0,0);if(!f)return null;SIMD.Float32x4.store(b,0,SIMD.Float32x4.mul(f,c));SIMD.Float32x4.store(b,4,SIMD.Float32x4.mul(f,l));SIMD.Float32x4.store(b,8,SIMD.Float32x4.mul(f,h));SIMD.Float32x4.store(b,12,SIMD.Float32x4.mul(f,m));return b};g.invert=n.USE_SIMD?g.SIMD.invert:g.scalar.invert;g.scalar.adjoint=function(b,a){var f=a[0],
d=a[1],k=a[2],e=a[3],c=a[4],l=a[5],h=a[6],m=a[7],p=a[8],r=a[9],t=a[10],q=a[11],g=a[12],x=a[13],v=a[14];a=a[15];b[0]=l*(t*a-q*v)-r*(h*a-m*v)+x*(h*q-m*t);b[1]=-(d*(t*a-q*v)-r*(k*a-e*v)+x*(k*q-e*t));b[2]=d*(h*a-m*v)-l*(k*a-e*v)+x*(k*m-e*h);b[3]=-(d*(h*q-m*t)-l*(k*q-e*t)+r*(k*m-e*h));b[4]=-(c*(t*a-q*v)-p*(h*a-m*v)+g*(h*q-m*t));b[5]=f*(t*a-q*v)-p*(k*a-e*v)+g*(k*q-e*t);b[6]=-(f*(h*a-m*v)-c*(k*a-e*v)+g*(k*m-e*h));b[7]=f*(h*q-m*t)-c*(k*q-e*t)+p*(k*m-e*h);b[8]=c*(r*a-q*x)-p*(l*a-m*x)+g*(l*q-m*r);b[9]=-(f*
(r*a-q*x)-p*(d*a-e*x)+g*(d*q-e*r));b[10]=f*(l*a-m*x)-c*(d*a-e*x)+g*(d*m-e*l);b[11]=-(f*(l*q-m*r)-c*(d*q-e*r)+p*(d*m-e*l));b[12]=-(c*(r*v-t*x)-p*(l*v-h*x)+g*(l*t-h*r));b[13]=f*(r*v-t*x)-p*(d*v-k*x)+g*(d*t-k*r);b[14]=-(f*(l*v-h*x)-c*(d*v-k*x)+g*(d*h-k*l));b[15]=f*(l*t-h*r)-c*(d*t-k*r)+p*(d*h-k*l);return b};g.SIMD.adjoint=function(b,a){var f,d,k,e,c,l,h,m;f=SIMD.Float32x4.load(a,0);d=SIMD.Float32x4.load(a,4);k=SIMD.Float32x4.load(a,8);e=SIMD.Float32x4.load(a,12);l=SIMD.Float32x4.shuffle(f,d,0,1,4,5);
c=SIMD.Float32x4.shuffle(k,e,0,1,4,5);a=SIMD.Float32x4.shuffle(l,c,0,2,4,6);c=SIMD.Float32x4.shuffle(c,l,1,3,5,7);l=SIMD.Float32x4.shuffle(f,d,2,3,6,7);d=SIMD.Float32x4.shuffle(k,e,2,3,6,7);f=SIMD.Float32x4.shuffle(l,d,0,2,4,6);d=SIMD.Float32x4.shuffle(d,l,1,3,5,7);l=SIMD.Float32x4.mul(f,d);l=SIMD.Float32x4.swizzle(l,1,0,3,2);k=SIMD.Float32x4.mul(c,l);e=SIMD.Float32x4.mul(a,l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,l),k);e=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,
l),e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);l=SIMD.Float32x4.mul(c,f);l=SIMD.Float32x4.swizzle(l,1,0,3,2);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,l),k);m=SIMD.Float32x4.mul(a,l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(d,l));m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,l),m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);l=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,3,0,1),d);l=SIMD.Float32x4.swizzle(l,1,0,3,2);f=SIMD.Float32x4.swizzle(f,2,3,0,1);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,
l),k);h=SIMD.Float32x4.mul(a,l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(f,l));h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,l),h);h=SIMD.Float32x4.swizzle(h,2,3,0,1);l=SIMD.Float32x4.mul(a,c);l=SIMD.Float32x4.swizzle(l,1,0,3,2);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,l),h);m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,l),m);l=SIMD.Float32x4.swizzle(l,2,3,0,1);h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,l),h);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(f,l));l=SIMD.Float32x4.mul(a,
d);l=SIMD.Float32x4.swizzle(l,1,0,3,2);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(f,l));h=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,l),h);l=SIMD.Float32x4.swizzle(l,2,3,0,1);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,l),e);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(c,l));l=SIMD.Float32x4.mul(a,f);l=SIMD.Float32x4.swizzle(l,1,0,3,2);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,l),e);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(c,l));l=SIMD.Float32x4.swizzle(l,2,3,0,1);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(d,
l));m=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,l),m);SIMD.Float32x4.store(b,0,k);SIMD.Float32x4.store(b,4,e);SIMD.Float32x4.store(b,8,h);SIMD.Float32x4.store(b,12,m);return b};g.adjoint=n.USE_SIMD?g.SIMD.adjoint:g.scalar.adjoint;g.determinant=function(b){var a=b[0],f=b[1],d=b[2],k=b[3],e=b[4],c=b[5],l=b[6],h=b[7],m=b[8],p=b[9],r=b[10],t=b[11],q=b[12],g=b[13],x=b[14];b=b[15];return(a*c-f*e)*(r*b-t*x)-(a*l-d*e)*(p*b-t*g)+(a*h-k*e)*(p*x-r*g)+(f*l-d*c)*(m*b-t*q)-(f*h-k*c)*(m*x-r*q)+(d*h-k*l)*(m*g-p*q)};
g.SIMD.multiply=function(b,a,f){var d=SIMD.Float32x4.load(a,0),k=SIMD.Float32x4.load(a,4),e=SIMD.Float32x4.load(a,8);a=SIMD.Float32x4.load(a,12);var c=SIMD.Float32x4.load(f,0),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),k),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),a))));SIMD.Float32x4.store(b,0,c);c=SIMD.Float32x4.load(f,
4);c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),k),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),a))));SIMD.Float32x4.store(b,4,c);c=SIMD.Float32x4.load(f,8);c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),k),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,
2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),a))));SIMD.Float32x4.store(b,8,c);f=SIMD.Float32x4.load(f,12);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),k),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),a))));SIMD.Float32x4.store(b,12,d);return b};g.scalar.multiply=function(b,a,f){var d=a[0],k=a[1],
e=a[2],c=a[3],l=a[4],h=a[5],m=a[6],p=a[7],r=a[8],t=a[9],q=a[10],g=a[11],x=a[12],v=a[13],y=a[14];a=a[15];var w=f[0],A=f[1],n=f[2],z=f[3];b[0]=w*d+A*l+n*r+z*x;b[1]=w*k+A*h+n*t+z*v;b[2]=w*e+A*m+n*q+z*y;b[3]=w*c+A*p+n*g+z*a;w=f[4];A=f[5];n=f[6];z=f[7];b[4]=w*d+A*l+n*r+z*x;b[5]=w*k+A*h+n*t+z*v;b[6]=w*e+A*m+n*q+z*y;b[7]=w*c+A*p+n*g+z*a;w=f[8];A=f[9];n=f[10];z=f[11];b[8]=w*d+A*l+n*r+z*x;b[9]=w*k+A*h+n*t+z*v;b[10]=w*e+A*m+n*q+z*y;b[11]=w*c+A*p+n*g+z*a;w=f[12];A=f[13];n=f[14];z=f[15];b[12]=w*d+A*l+n*r+z*x;
b[13]=w*k+A*h+n*t+z*v;b[14]=w*e+A*m+n*q+z*y;b[15]=w*c+A*p+n*g+z*a;return b};g.multiply=n.USE_SIMD?g.SIMD.multiply:g.scalar.multiply;g.mul=g.multiply;g.scalar.translate=function(b,a,f){var d=f[0],k=f[1];f=f[2];var e,c,l,h,m,p,r,g,q,u,x,v;a===b?(b[12]=a[0]*d+a[4]*k+a[8]*f+a[12],b[13]=a[1]*d+a[5]*k+a[9]*f+a[13],b[14]=a[2]*d+a[6]*k+a[10]*f+a[14],b[15]=a[3]*d+a[7]*k+a[11]*f+a[15]):(e=a[0],c=a[1],l=a[2],h=a[3],m=a[4],p=a[5],r=a[6],g=a[7],q=a[8],u=a[9],x=a[10],v=a[11],b[0]=e,b[1]=c,b[2]=l,b[3]=h,b[4]=m,
b[5]=p,b[6]=r,b[7]=g,b[8]=q,b[9]=u,b[10]=x,b[11]=v,b[12]=e*d+m*k+q*f+a[12],b[13]=c*d+p*k+u*f+a[13],b[14]=l*d+r*k+x*f+a[14],b[15]=h*d+g*k+v*f+a[15]);return b};g.SIMD.translate=function(b,a,f){var d=SIMD.Float32x4.load(a,0),k=SIMD.Float32x4.load(a,4),e=SIMD.Float32x4.load(a,8),c=SIMD.Float32x4.load(a,12);f=SIMD.Float32x4(f[0],f[1],f[2],0);a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11]);d=SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(f,
0,0,0,0));k=SIMD.Float32x4.mul(k,SIMD.Float32x4.swizzle(f,1,1,1,1));e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(f,2,2,2,2));a=SIMD.Float32x4.add(d,SIMD.Float32x4.add(k,SIMD.Float32x4.add(e,c)));SIMD.Float32x4.store(b,12,a);return b};g.translate=n.USE_SIMD?g.SIMD.translate:g.scalar.translate;g.scalar.scale=function(b,a,f){var d=f[0],k=f[1];f=f[2];b[0]=a[0]*d;b[1]=a[1]*d;b[2]=a[2]*d;b[3]=a[3]*d;b[4]=a[4]*k;b[5]=a[5]*k;b[6]=a[6]*k;b[7]=a[7]*k;b[8]=a[8]*f;b[9]=a[9]*f;b[10]=a[10]*f;b[11]=a[11]*f;b[12]=
a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};g.SIMD.scale=function(b,a,f){var d;f=SIMD.Float32x4(f[0],f[1],f[2],0);d=SIMD.Float32x4.load(a,0);SIMD.Float32x4.store(b,0,SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(f,0,0,0,0)));d=SIMD.Float32x4.load(a,4);SIMD.Float32x4.store(b,4,SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(f,1,1,1,1)));d=SIMD.Float32x4.load(a,8);SIMD.Float32x4.store(b,8,SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(f,2,2,2,2)));b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};
g.scale=n.USE_SIMD?g.SIMD.scale:g.scalar.scale;g.rotate=function(b,a,f,d){var k=d[0],e=d[1];d=d[2];var c=Math.sqrt(k*k+e*e+d*d),l,h,m,p,r,g,q,u,x,v,y,w,A,B,z,C,E,D,G,F;if(Math.abs(c)<n.EPSILON)return null;c=1/c;k*=c;e*=c;d*=c;l=Math.sin(f);h=Math.cos(f);m=1-h;f=a[0];c=a[1];p=a[2];r=a[3];g=a[4];q=a[5];u=a[6];x=a[7];v=a[8];y=a[9];w=a[10];A=a[11];B=k*k*m+h;z=e*k*m+d*l;C=d*k*m-e*l;E=k*e*m-d*l;D=e*e*m+h;G=d*e*m+k*l;F=k*d*m+e*l;k=e*d*m-k*l;e=d*d*m+h;b[0]=f*B+g*z+v*C;b[1]=c*B+q*z+y*C;b[2]=p*B+u*z+w*C;b[3]=
r*B+x*z+A*C;b[4]=f*E+g*D+v*G;b[5]=c*E+q*D+y*G;b[6]=p*E+u*D+w*G;b[7]=r*E+x*D+A*G;b[8]=f*F+g*k+v*e;b[9]=c*F+q*k+y*e;b[10]=p*F+u*k+w*e;b[11]=r*F+x*k+A*e;a!==b&&(b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b};g.scalar.rotateX=function(b,a,f){var d=Math.sin(f);f=Math.cos(f);var k=a[4],e=a[5],c=a[6],l=a[7],h=a[8],m=a[9],p=a[10],r=a[11];a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[4]=k*f+h*d;b[5]=e*f+m*d;b[6]=c*f+p*d;b[7]=l*f+r*d;b[8]=h*f-
k*d;b[9]=m*f-e*d;b[10]=p*f-c*d;b[11]=r*f-l*d;return b};g.SIMD.rotateX=function(b,a,f){var d=SIMD.Float32x4.splat(Math.sin(f));f=SIMD.Float32x4.splat(Math.cos(f));a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);var k=SIMD.Float32x4.load(a,4);a=SIMD.Float32x4.load(a,8);SIMD.Float32x4.store(b,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(k,f),SIMD.Float32x4.mul(a,d)));SIMD.Float32x4.store(b,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,f),SIMD.Float32x4.mul(k,d)));
return b};g.rotateX=n.USE_SIMD?g.SIMD.rotateX:g.scalar.rotateX;g.scalar.rotateY=function(b,a,f){var d=Math.sin(f);f=Math.cos(f);var k=a[0],e=a[1],c=a[2],l=a[3],h=a[8],m=a[9],p=a[10],r=a[11];a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=k*f-h*d;b[1]=e*f-m*d;b[2]=c*f-p*d;b[3]=l*f-r*d;b[8]=k*d+h*f;b[9]=e*d+m*f;b[10]=c*d+p*f;b[11]=l*d+r*f;return b};g.SIMD.rotateY=function(b,a,f){var d=SIMD.Float32x4.splat(Math.sin(f));f=SIMD.Float32x4.splat(Math.cos(f));
a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);var k=SIMD.Float32x4.load(a,0);a=SIMD.Float32x4.load(a,8);SIMD.Float32x4.store(b,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,f),SIMD.Float32x4.mul(a,d)));SIMD.Float32x4.store(b,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(k,d),SIMD.Float32x4.mul(a,f)));return b};g.rotateY=n.USE_SIMD?g.SIMD.rotateY:g.scalar.rotateY;g.scalar.rotateZ=function(b,a,f){var d=Math.sin(f);f=Math.cos(f);var k=a[0],e=a[1],c=a[2],l=a[3],
h=a[4],m=a[5],p=a[6],r=a[7];a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=k*f+h*d;b[1]=e*f+m*d;b[2]=c*f+p*d;b[3]=l*f+r*d;b[4]=h*f-k*d;b[5]=m*f-e*d;b[6]=p*f-c*d;b[7]=r*f-l*d;return b};g.SIMD.rotateZ=function(b,a,f){var d=SIMD.Float32x4.splat(Math.sin(f));f=SIMD.Float32x4.splat(Math.cos(f));a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);var k=SIMD.Float32x4.load(a,0);a=SIMD.Float32x4.load(a,
4);SIMD.Float32x4.store(b,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(k,f),SIMD.Float32x4.mul(a,d)));SIMD.Float32x4.store(b,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,f),SIMD.Float32x4.mul(k,d)));return b};g.rotateZ=n.USE_SIMD?g.SIMD.rotateZ:g.scalar.rotateZ;g.fromTranslation=function(b,a){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=a[0];b[13]=a[1];b[14]=a[2];b[15]=1;return b};g.fromScaling=function(b,a){b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a[1];b[6]=
0;b[7]=0;b[8]=0;b[9]=0;b[10]=a[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};g.fromRotation=function(b,a,f){var d=f[0],k=f[1];f=f[2];var e=Math.sqrt(d*d+k*k+f*f),c;if(Math.abs(e)<n.EPSILON)return null;e=1/e;d*=e;k*=e;f*=e;e=Math.sin(a);a=Math.cos(a);c=1-a;b[0]=d*d*c+a;b[1]=k*d*c+f*e;b[2]=f*d*c-k*e;b[3]=0;b[4]=d*k*c-f*e;b[5]=k*k*c+a;b[6]=f*k*c+d*e;b[7]=0;b[8]=d*f*c+k*e;b[9]=k*f*c-d*e;b[10]=f*f*c+a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};g.fromXRotation=function(b,a){var f=Math.sin(a);
a=Math.cos(a);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=f;b[7]=0;b[8]=0;b[9]=-f;b[10]=a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};g.fromYRotation=function(b,a){var f=Math.sin(a);a=Math.cos(a);b[0]=a;b[1]=0;b[2]=-f;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=f;b[9]=0;b[10]=a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};g.fromZRotation=function(b,a){var f=Math.sin(a);a=Math.cos(a);b[0]=a;b[1]=f;b[2]=0;b[3]=0;b[4]=-f;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=
0;b[15]=1;return b};g.fromRotationTranslation=function(b,a,f){var d=a[0],k=a[1],e=a[2],c=a[3],l=d+d,h=k+k,m=e+e;a=d*l;var p=d*h,d=d*m,r=k*h,k=k*m,e=e*m,l=c*l,h=c*h,c=c*m;b[0]=1-(r+e);b[1]=p+c;b[2]=d-h;b[3]=0;b[4]=p-c;b[5]=1-(a+e);b[6]=k+l;b[7]=0;b[8]=d+h;b[9]=k-l;b[10]=1-(a+r);b[11]=0;b[12]=f[0];b[13]=f[1];b[14]=f[2];b[15]=1;return b};g.getTranslation=function(b,a){b[0]=a[12];b[1]=a[13];b[2]=a[14];return b};g.getRotation=function(b,a){var f=a[0]+a[5]+a[10],d=0;0<f?(d=2*Math.sqrt(f+1),b[3]=.25*d,b[0]=
(a[6]-a[9])/d,b[1]=(a[8]-a[2])/d,b[2]=(a[1]-a[4])/d):a[0]>a[5]&a[0]>a[10]?(d=2*Math.sqrt(1+a[0]-a[5]-a[10]),b[3]=(a[6]-a[9])/d,b[0]=.25*d,b[1]=(a[1]+a[4])/d,b[2]=(a[8]+a[2])/d):a[5]>a[10]?(d=2*Math.sqrt(1+a[5]-a[0]-a[10]),b[3]=(a[8]-a[2])/d,b[0]=(a[1]+a[4])/d,b[1]=.25*d,b[2]=(a[6]+a[9])/d):(d=2*Math.sqrt(1+a[10]-a[0]-a[5]),b[3]=(a[1]-a[4])/d,b[0]=(a[8]+a[2])/d,b[1]=(a[6]+a[9])/d,b[2]=.25*d);return b};g.fromRotationTranslationScale=function(b,a,f,d){var k=a[0],e=a[1],c=a[2],l=a[3],h=k+k,m=e+e,p=c+
c;a=k*h;var r=k*m,k=k*p,g=e*m,e=e*p,c=c*p,h=l*h,m=l*m,l=l*p,p=d[0],q=d[1];d=d[2];b[0]=(1-(g+c))*p;b[1]=(r+l)*p;b[2]=(k-m)*p;b[3]=0;b[4]=(r-l)*q;b[5]=(1-(a+c))*q;b[6]=(e+h)*q;b[7]=0;b[8]=(k+m)*d;b[9]=(e-h)*d;b[10]=(1-(a+g))*d;b[11]=0;b[12]=f[0];b[13]=f[1];b[14]=f[2];b[15]=1;return b};g.fromRotationTranslationScaleOrigin=function(b,a,f,d,k){var e=a[0],c=a[1],l=a[2],h=a[3],m=e+e,p=c+c,r=l+l;a=e*m;var g=e*p,e=e*r,q=c*p,c=c*r,l=l*r,m=h*m,p=h*p,h=h*r,r=d[0],u=d[1];d=d[2];var x=k[0],v=k[1];k=k[2];b[0]=(1-
(q+l))*r;b[1]=(g+h)*r;b[2]=(e-p)*r;b[3]=0;b[4]=(g-h)*u;b[5]=(1-(a+l))*u;b[6]=(c+m)*u;b[7]=0;b[8]=(e+p)*d;b[9]=(c-m)*d;b[10]=(1-(a+q))*d;b[11]=0;b[12]=f[0]+x-(b[0]*x+b[4]*v+b[8]*k);b[13]=f[1]+v-(b[1]*x+b[5]*v+b[9]*k);b[14]=f[2]+k-(b[2]*x+b[6]*v+b[10]*k);b[15]=1;return b};g.fromQuat=function(b,a){var f=a[0],d=a[1],k=a[2];a=a[3];var e=f+f,c=d+d,l=k+k,f=f*e,h=d*e,d=d*c,m=k*e,p=k*c,k=k*l,e=a*e,c=a*c;a*=l;b[0]=1-d-k;b[1]=h+a;b[2]=m-c;b[3]=0;b[4]=h-a;b[5]=1-f-k;b[6]=p+e;b[7]=0;b[8]=m+c;b[9]=p-e;b[10]=1-
f-d;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};g.frustum=function(b,a,f,d,k,e,c){var l=1/(f-a),h=1/(k-d),m=1/(e-c);b[0]=2*e*l;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*e*h;b[6]=0;b[7]=0;b[8]=(f+a)*l;b[9]=(k+d)*h;b[10]=(c+e)*m;b[11]=-1;b[12]=0;b[13]=0;b[14]=c*e*2*m;b[15]=0;return b};g.perspective=function(b,a,f,d,k){a=1/Math.tan(a/2);var e=1/(d-k);b[0]=a/f;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=(k+d)*e;b[11]=-1;b[12]=0;b[13]=0;b[14]=2*k*d*e;b[15]=0;return b};g.perspectiveFromFieldOfView=
function(b,a,f,d){var k=Math.tan(a.upDegrees*Math.PI/180),e=Math.tan(a.downDegrees*Math.PI/180),c=Math.tan(a.leftDegrees*Math.PI/180);a=Math.tan(a.rightDegrees*Math.PI/180);var l=2/(c+a),h=2/(k+e);b[0]=l;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=h;b[6]=0;b[7]=0;b[8]=-((c-a)*l*.5);b[9]=(k-e)*h*.5;b[10]=d/(f-d);b[11]=-1;b[12]=0;b[13]=0;b[14]=d*f/(f-d);b[15]=0;return b};g.ortho=function(b,a,f,d,k,e,c){var l=1/(a-f),h=1/(d-k),m=1/(e-c);b[0]=-2*l;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=-2*h;b[6]=0;b[7]=0;b[8]=0;b[9]=
0;b[10]=2*m;b[11]=0;b[12]=(a+f)*l;b[13]=(k+d)*h;b[14]=(c+e)*m;b[15]=1;return b};g.lookAt=function(b,a,f,d){var k,e,c,l,h,m,p,r,t=a[0],q=a[1];a=a[2];c=d[0];l=d[1];e=d[2];p=f[0];d=f[1];k=f[2];if(Math.abs(t-p)<n.EPSILON&&Math.abs(q-d)<n.EPSILON&&Math.abs(a-k)<n.EPSILON)return g.identity(b);f=t-p;d=q-d;p=a-k;r=1/Math.sqrt(f*f+d*d+p*p);f*=r;d*=r;p*=r;k=l*p-e*d;e=e*f-c*p;c=c*d-l*f;(r=Math.sqrt(k*k+e*e+c*c))?(r=1/r,k*=r,e*=r,c*=r):c=e=k=0;l=d*c-p*e;h=p*k-f*c;m=f*e-d*k;(r=Math.sqrt(l*l+h*h+m*m))?(r=1/r,l*=
r,h*=r,m*=r):m=h=l=0;b[0]=k;b[1]=l;b[2]=f;b[3]=0;b[4]=e;b[5]=h;b[6]=d;b[7]=0;b[8]=c;b[9]=m;b[10]=p;b[11]=0;b[12]=-(k*t+e*q+c*a);b[13]=-(l*t+h*q+m*a);b[14]=-(f*t+d*q+p*a);b[15]=1;return b};g.str=function(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"};g.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],
2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2)+Math.pow(b[9],2)+Math.pow(b[10],2)+Math.pow(b[11],2)+Math.pow(b[12],2)+Math.pow(b[13],2)+Math.pow(b[14],2)+Math.pow(b[15],2))};g.add=function(b,a,f){b[0]=a[0]+f[0];b[1]=a[1]+f[1];b[2]=a[2]+f[2];b[3]=a[3]+f[3];b[4]=a[4]+f[4];b[5]=a[5]+f[5];b[6]=a[6]+f[6];b[7]=a[7]+f[7];b[8]=a[8]+f[8];b[9]=a[9]+f[9];b[10]=a[10]+f[10];b[11]=a[11]+f[11];b[12]=a[12]+f[12];b[13]=a[13]+f[13];b[14]=a[14]+f[14];b[15]=a[15]+f[15];return b};g.subtract=function(b,
a,f){b[0]=a[0]-f[0];b[1]=a[1]-f[1];b[2]=a[2]-f[2];b[3]=a[3]-f[3];b[4]=a[4]-f[4];b[5]=a[5]-f[5];b[6]=a[6]-f[6];b[7]=a[7]-f[7];b[8]=a[8]-f[8];b[9]=a[9]-f[9];b[10]=a[10]-f[10];b[11]=a[11]-f[11];b[12]=a[12]-f[12];b[13]=a[13]-f[13];b[14]=a[14]-f[14];b[15]=a[15]-f[15];return b};g.sub=g.subtract;g.multiplyScalar=function(b,a,f){b[0]=a[0]*f;b[1]=a[1]*f;b[2]=a[2]*f;b[3]=a[3]*f;b[4]=a[4]*f;b[5]=a[5]*f;b[6]=a[6]*f;b[7]=a[7]*f;b[8]=a[8]*f;b[9]=a[9]*f;b[10]=a[10]*f;b[11]=a[11]*f;b[12]=a[12]*f;b[13]=a[13]*f;b[14]=
a[14]*f;b[15]=a[15]*f;return b};g.multiplyScalarAndAdd=function(b,a,f,d){b[0]=a[0]+f[0]*d;b[1]=a[1]+f[1]*d;b[2]=a[2]+f[2]*d;b[3]=a[3]+f[3]*d;b[4]=a[4]+f[4]*d;b[5]=a[5]+f[5]*d;b[6]=a[6]+f[6]*d;b[7]=a[7]+f[7]*d;b[8]=a[8]+f[8]*d;b[9]=a[9]+f[9]*d;b[10]=a[10]+f[10]*d;b[11]=a[11]+f[11]*d;b[12]=a[12]+f[12]*d;b[13]=a[13]+f[13]*d;b[14]=a[14]+f[14]*d;b[15]=a[15]+f[15]*d;return b};g.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===
a[7]&&b[8]===a[8]&&b[9]===a[9]&&b[10]===a[10]&&b[11]===a[11]&&b[12]===a[12]&&b[13]===a[13]&&b[14]===a[14]&&b[15]===a[15]};g.equals=function(b,a){var f=b[0],d=b[1],k=b[2],e=b[3],c=b[4],l=b[5],h=b[6],m=b[7],p=b[8],r=b[9],g=b[10],q=b[11],u=b[12],x=b[13],v=b[14];b=b[15];var y=a[0],w=a[1],A=a[2],B=a[3],z=a[4],C=a[5],E=a[6],D=a[7],G=a[8],F=a[9],L=a[10],J=a[11],H=a[12],U=a[13],V=a[14];a=a[15];return Math.abs(f-y)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(y))&&Math.abs(d-w)<=n.EPSILON*Math.max(1,Math.abs(d),
Math.abs(w))&&Math.abs(k-A)<=n.EPSILON*Math.max(1,Math.abs(k),Math.abs(A))&&Math.abs(e-B)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(B))&&Math.abs(c-z)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(z))&&Math.abs(l-C)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(h-E)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(m-D)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(p-G)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(G))&&Math.abs(r-F)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(F))&&
Math.abs(g-L)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(L))&&Math.abs(q-J)<=n.EPSILON*Math.max(1,Math.abs(q),Math.abs(J))&&Math.abs(u-H)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(H))&&Math.abs(x-U)<=n.EPSILON*Math.max(1,Math.abs(x),Math.abs(U))&&Math.abs(v-V)<=n.EPSILON*Math.max(1,Math.abs(v),Math.abs(V))&&Math.abs(b-a)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(a))};return g})},"esri/core/libs/gl-matrix/common":function(){define([],function(){var n={EPSILON:1E-6};n.ARRAY_TYPE="undefined"!==typeof Float32Array?
Float32Array:Array;n.RANDOM=Math.random;n.ENABLE_SIMD=!1;n.SIMD_AVAILABLE=n.ARRAY_TYPE===Float32Array&&"SIMD"in this;n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE;n.setMatrixArrayType=function(b){n.ARRAY_TYPE=b};var g=Math.PI/180;n.toRadian=function(b){return b*g};n.equals=function(b,a){return Math.abs(b-a)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(a))};return n})},"esri/views/2d/engine/webgl/enums":function(){define(["require","exports"],function(n,g){Object.defineProperty(g,"__esModule",{value:!0});
(function(b){b[b.FILL=0]="FILL";b[b.LINE=1]="LINE";b[b.MARKER=2]="MARKER";b[b.TEXT=3]="TEXT";b[b.NONE=4]="NONE";b[b.UNKNOWN=5]="UNKNOWN";b[b.COUNT=5]="COUNT"})(g.WGLGeometryType||(g.WGLGeometryType={}));(function(b){b[b.SUCCEEDED=0]="SUCCEEDED";b[b.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(g.WGLGeometryTransactionStatus||(g.WGLGeometryTransactionStatus={}));(function(b){b[b.NONE=0]="NONE";b[b.FILL=1]="FILL";b[b.LINE=2]="LINE";b[b.MARKER=3]="MARKER";b[b.TEXT=4]="TEXT";b[b.HITTEST=5]="HITTEST";
b[b.HIGHLIGHT=6]="HIGHLIGHT";b[b.CLIP=7]="CLIP";b[b.DEBUG=8]="DEBUG"})(g.WGLDrawPhase||(g.WGLDrawPhase={}));(function(b){b[b.SIZE=0]="SIZE";b[b.COLOR=1]="COLOR";b[b.OPACITY=2]="OPACITY";b[b.ROTATION=3]="ROTATION"})(g.VVType||(g.VVType={}));(function(b){b[b.NONE=0]="NONE";b[b.OPACITY=1]="OPACITY";b[b.COLOR=2]="COLOR";b[b.ROTATION=4]="ROTATION";b[b.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";b[b.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS";b[b.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";b[b.SIZE_UNIT_VALUE=64]=
"SIZE_UNIT_VALUE"})(g.WGLVVFlag||(g.WGLVVFlag={}));(function(b){b[b.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";b[b.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";b[b.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";b[b.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(g.WGLVVTarget||(g.WGLVVTarget={}));(function(b){b[b.INITIALIZED=0]="INITIALIZED";b[b.NO_DATA=1]="NO_DATA";b[b.READY=2]="READY";b[b.MODIFIED=3]="MODIFIED";b[b.INVALID=4]="INVALID"})(g.TileStatus||(g.TileStatus={}));
(function(b){b[b.UNKNOWN=0]="UNKNOWN";b[b.BUTT=1]="BUTT";b[b.ROUND=2]="ROUND";b[b.SQUARE=3]="SQUARE"})(g.CapType||(g.CapType={}));(function(b){b[b.UNKNOWN=0]="UNKNOWN";b[b.MITER=1]="MITER";b[b.BEVEL=2]="BEVEL";b[b.ROUND=3]="ROUND"})(g.JoinType||(g.JoinType={}));(function(b){b.SIMPLE_MARKER="esriSMS";b.SIMPLE_LINE="esriSLS";b.SIMPLE_FILL="esriSFS";b.PICTURE_MARKER="esriPMS";b.PICTURE_FILL="esriPFS";b.TEXT="esriTS"})(g.EsriSymbolType||(g.EsriSymbolType={}));(function(b){b.SIMPLE_MARKER="simple-marker";
b.SIMPLE_LINE="simple-line";b.SIMPLE_FILL="simple-fill";b.PICTURE_MARKER="picture-marker";b.PICTURE_FILL="picture-fill";b.TEXT="text"})(g.EsriSymbolTypeKebab||(g.EsriSymbolTypeKebab={}))})},"esri/views/2d/engine/webgl/GeometryUtils":function(){define(["require","exports"],function(n,g){function b(a,b){a%=b;return 0<=a?a:a+b}Object.defineProperty(g,"__esModule",{value:!0});g.C_INFINITY=Number.POSITIVE_INFINITY;g.C_PI=Math.PI;g.C_2PI=2*g.C_PI;g.C_PI_BY_2=g.C_PI/2;g.C_RAD_TO_256=128/g.C_PI;g.C_256_TO_RAD=
g.C_PI/128;g.C_DEG_TO_256=256/360;g.C_DEG_TO_RAD=g.C_PI/180;g.C_SQRT2=1.414213562;g.C_SQRT2_INV=1/g.C_SQRT2;var a=1/Math.LN2;g.positiveMod=b;g.radToByte=function(a){return b(a*g.C_RAD_TO_256,256)};g.degToByte=function(a){return b(a*g.C_DEG_TO_256,256)};g.log2=function(b){return Math.log(b)*a};g.sqr=function(a){return a*a};g.clamp=function(a,b,k){return Math.min(Math.max(a,b),k)};g.interpolate=function(a,b,k){return a*(1-k)+b*k};g.between=function(a,b,k){return a>=b&&a<=k||a>=k&&a<=b}})},"esri/views/2d/engine/webgl/MaterialManager":function(){define("require exports ./enums ./MaterialInfoUtils ./shaders/fillShaderSnippets ./shaders/iconShaderSnippets ./shaders/lineShaderSnippets ./shaders/textShaderSnippets ../../../webgl/ShaderVariations".split(" "),
function(n,g,b,a,f,d,k,e,c){return function(){function l(){this._programRep=new Map;this.isInitialize=!1}l.prototype.dispose=function(){this._fillShaderVariations&&(this._fillShaderVariations.dispose(),this._fillShaderVariations=null);this._lineShaderVariations&&(this._lineShaderVariations.dispose(),this._lineShaderVariations=null);this._iconShaderVariations&&(this._iconShaderVariations.dispose(),this._iconShaderVariations=null);this._textShaderVariations&&(this._textShaderVariations.dispose(),this._textShaderVariations=
null);0!==this._programRep.size&&(this._programRep.forEach(function(a){return a.dispose()}),this._programRep.clear())};l.prototype.initialize=function(a){if(!this.isInitialize){var b=new c("text",["textVS","textFS"],[],e,a);b.addDefine("ID","ID",[!0,!0],"ID");b.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");b.addDefine("SDF","SDF",[!1,!1],"SDF");b.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");b.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",
[!0,!1],"VV_SIZE_SCALE_STOPS");b.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");b.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");b.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");b.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");b.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");b.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");b.addDefine("PATTERN","PATTERN",[!1,!1],"PATTERN");
b.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var h=new c("icon",["iconVS","iconFS"],[],d,a);h.addDefine("ID","ID",[!0,!0],"ID");h.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");h.addDefine("SDF","SDF",[!0,!0],"SDF");h.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");h.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");h.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");h.addDefine("VV_SIZE_UNIT_VALUE",
"VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");h.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");h.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");h.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");h.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");h.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");h.addDefine("HEATMAP","HEATMAP",[!0,!0],"HEATMAP");var l=new c("fill",["fillVS","fillFS"],[],f,a);l.addDefine("ID","ID",[!0,!0],"ID");l.addDefine("HIGHLIGHT",
"HIGHLIGHT",[!0,!0],"HIGHLIGHT");l.addDefine("SDF","SDF",[!1,!1],"SDF");l.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");l.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");l.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");l.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");l.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");l.addDefine("VV_ROTATION",
"VV_ROTATION",[!1,!1],"VV_ROTATION");l.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");l.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");l.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");l.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");a=new c("line",["lineVS","lineFS"],[],k,a);a.addDefine("ID","ID",[!0,!0],"ID");a.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");a.addDefine("SDF","SDF",[!0,!0],"SDF");a.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",
[!0,!1],"VV_SIZE_MIN_MAX_VALUE");a.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");a.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");a.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");a.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");a.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");a.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");a.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",
[!1,!1],"VERTEX_VISIBILITY");a.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");a.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");this._textShaderVariations=b;this._fillShaderVariations=l;this._iconShaderVariations=h;this._lineShaderVariations=a;this.isInitialize=!0}};l.prototype.getProgram=function(c,d,e){c|=d===b.WGLDrawPhase.HITTEST?4:0;c|=d===b.WGLDrawPhase.HIGHLIGHT?8:0;if(this._programRep[c])return this._programRep[c];if(!this._iconShaderVariations||!this._fillShaderVariations||!this._lineShaderVariations)return null;
d=a.getMaterialVariations(c);var h;switch(d.geometryType){case b.WGLGeometryType.MARKER:h=this._iconShaderVariations.getProgram(d.variations,null,null,e);break;case b.WGLGeometryType.TEXT:h=this._textShaderVariations.getProgram(d.variations,null,null,e);break;case b.WGLGeometryType.FILL:h=this._fillShaderVariations.getProgram(d.variations,null,null,e);break;case b.WGLGeometryType.LINE:h=this._lineShaderVariations.getProgram(d.variations,null,null,e)}h&&(this._programRep[c]=h);return h};return l}()})},
"esri/views/2d/engine/webgl/MaterialInfoUtils":function(){define(["require","exports","./enums","./MaterialInfo","./MaterialKeyInfo"],function(n,g,b,a,f){function d(a){var b=[];b[0]=a.sdf?!0:!1;b[1]=a.vvSizeMinMaxValue?!0:!1;b[2]=a.vvSizeScaleStops?!0:!1;b[3]=a.vvSizeFieldStops?!0:!1;b[4]=a.vvSizeUnitValue?!0:!1;b[5]=a.vvColor?!0:!1;b[6]=a.vvRotation?!0:!1;b[7]=a.vvOpacity?!0:!1;b[8]=a.visibility?!0:!1;b[9]=a.pattern?!0:!1;b[10]=a.heatmap?!0:!1;return b.reduce(function(a,b,c){b&&(a|=1<<c+2);return a},
0)}function k(a){if(a.geometryType===b.WGLGeometryType.UNKNOWN)return-1;var c=d(a)<<2;return a.geometryType+c}Object.defineProperty(g,"__esModule",{value:!0});g.createTextMaterialInfo=function(d,c){var e=new a.default,h=new f;h.geometryType=b.WGLGeometryType.TEXT;h.sdf=!0;h.pattern=!1;h.visibility=!1;h.heatmap=!1;e.texBindingInfo.push(new a.TexBindingInfo(2,d.page,"u_texture"));0===c?h.vvOpacity=h.vvSizeMinMaxValue=h.vvSizeScaleStops=h.vvSizeFieldStops=h.vvSizeUnitValue=h.vvColor=h.vvRotation=!1:
(h.vvOpacity=0!==(c&b.WGLVVFlag.OPACITY),h.vvSizeMinMaxValue=0!==(c&b.WGLVVFlag.SIZE_MINMAX_VALUE),h.vvSizeScaleStops=0!==(c&b.WGLVVFlag.SIZE_SCALE_STOPS),h.vvSizeFieldStops=0!==(c&b.WGLVVFlag.SIZE_FIELD_STOPS),h.vvSizeUnitValue=0!==(c&b.WGLVVFlag.SIZE_UNIT_VALUE),h.vvColor=0!==(c&b.WGLVVFlag.COLOR),h.vvRotation=0!==(c&b.WGLVVFlag.ROTATION));e.materialKey=k(h);e.materialKeyInfo=h;return e};g.createMaterialInfo=function(d,c,l){var e=new a.default,m=new f;m.geometryType=c;d?(d=d.spriteMosaicItem,m.sdf=
d.sdf,m.pattern=!0,e.texBindingInfo.push(new a.TexBindingInfo(1,d.page,"u_texture"))):(m.sdf=!1,m.pattern=!1);0===l?m.vvOpacity=m.vvSizeMinMaxValue=m.vvSizeScaleStops=m.vvSizeFieldStops=m.vvSizeUnitValue=m.vvColor=m.vvRotation=!1:(m.vvOpacity=0!==(l&b.WGLVVFlag.OPACITY),m.vvSizeMinMaxValue=0!==(l&b.WGLVVFlag.SIZE_MINMAX_VALUE),m.vvSizeScaleStops=0!==(l&b.WGLVVFlag.SIZE_SCALE_STOPS),m.vvSizeFieldStops=0!==(l&b.WGLVVFlag.SIZE_FIELD_STOPS),m.vvSizeUnitValue=0!==(l&b.WGLVVFlag.SIZE_UNIT_VALUE),m.vvColor=
0!==(l&b.WGLVVFlag.COLOR),m.vvRotation=0!==(l&b.WGLVVFlag.ROTATION));m.visibility=!1;e.materialKey=k(m);e.materialKeyInfo=m;return e};g.getMaterialKey=k;g.getMaterialVariations=function(a){var b=a&3;a>>=2;return{geometryType:b,variations:[0!==(a&1),0!==(a&2),0!==(a&4),0!==(a&8),0!==(a&16),0!==(a&32),0!==(a&64),0!==(a&128),0!==(a&256),0!==(a&512),0!==(a&1024),0!==(a&2048),0!==(a&4096)]}}})},"esri/views/2d/engine/webgl/MaterialInfo":function(){define("require exports ./enums ./MaterialInfoUtils ./MaterialInfoUtils_updateMaterialVariations ./MaterialKeyInfo ./util/serializationUtils".split(" "),
function(n,g,b,a,f,d,k){Object.defineProperty(g,"__esModule",{value:!0});var e=function(){function a(a,b,c){this.unit=a;this.pageId=b;this.semantic=c}a.prototype.clone=function(){return new a(this.unit,this.pageId,this.semantic)};a.prototype.serialize=function(a){a.writeInt32(this.unit);a.writeInt32(this.pageId);return a};a.deserialize=function(b){var c=b.readInt32();b=b.readInt32();return new a(c,b,"u_texture")};return a}();g.TexBindingInfo=e;var c=function(){function a(a,b){this.name=a;this.value=
b}a.prototype.clone=function(){return new a(this.name,this.value)};a.prototype.serialize=function(a){a.writeInt32(this.value);return a};a.deserialize=function(b){b=b.readInt32();return new a("u_my_param",b)};return a}();g.MaterialParam=c;n=function(){function l(){this.texBindingInfo=[];this.materialParams=[]}l.fromSprite=function(c,f,k){var h=new l,m=new d;m.geometryType=f;c?(m.sdf=c.sdf,m.pattern=!0,h.texBindingInfo.push(new e(1,c.page,"u_texture"))):(m.sdf=!1,m.pattern=!1);0===k?m.vvOpacity=m.vvSizeMinMaxValue=
m.vvSizeScaleStops=m.vvSizeFieldStops=m.vvSizeUnitValue=m.vvColor=m.vvRotation=!1:(m.vvOpacity=0!==(k&b.WGLVVFlag.OPACITY),m.vvSizeMinMaxValue=0!==(k&b.WGLVVFlag.SIZE_MINMAX_VALUE),m.vvSizeScaleStops=0!==(k&b.WGLVVFlag.SIZE_SCALE_STOPS),m.vvSizeFieldStops=0!==(k&b.WGLVVFlag.SIZE_FIELD_STOPS),m.vvSizeUnitValue=0!==(k&b.WGLVVFlag.SIZE_UNIT_VALUE),m.vvColor=0!==(k&b.WGLVVFlag.COLOR),m.vvRotation=0!==(k&b.WGLVVFlag.ROTATION));m.visibility=!1;h.materialKey=a.getMaterialKey(m);h.materialKeyInfo=m;return h};
l.fromGlyph=function(c,f,k){var h=new l,m=new d;m.geometryType=f;m.sdf=!0;m.pattern=!1;m.visibility=!1;m.heatmap=!1;h.texBindingInfo.push(new e(2,c.page,"u_texture"));0===k?m.vvOpacity=m.vvSizeMinMaxValue=m.vvSizeScaleStops=m.vvSizeFieldStops=m.vvSizeUnitValue=m.vvColor=m.vvRotation=!1:(m.vvOpacity=0!==(k&b.WGLVVFlag.OPACITY),m.vvSizeMinMaxValue=0!==(k&b.WGLVVFlag.SIZE_MINMAX_VALUE),m.vvSizeScaleStops=0!==(k&b.WGLVVFlag.SIZE_SCALE_STOPS),m.vvSizeFieldStops=0!==(k&b.WGLVVFlag.SIZE_FIELD_STOPS),m.vvSizeUnitValue=
0!==(k&b.WGLVVFlag.SIZE_UNIT_VALUE),m.vvColor=0!==(k&b.WGLVVFlag.COLOR),m.vvRotation=0!==(k&b.WGLVVFlag.ROTATION));h.materialKey=a.getMaterialKey(m);h.materialKeyInfo=m;return h};l.prototype.copy=function(a){this.materialParams=a.materialParams.map(function(a){return a.clone()});this.texBindingInfo=a.texBindingInfo.map(function(a){return a.clone()});a.materialKeyInfo&&(this.materialKeyInfo=new d,this.materialKeyInfo.copy(a.materialKeyInfo));this.materialKey=a.materialKey};l.prototype.serialize=function(a){a.writeInt32(this.materialKey);
k.serializeList(a,this.texBindingInfo);k.serializeList(a,this.materialParams);return a};l.deserialize=function(a){var b=new l;b.materialKey=a.readInt32();b.texBindingInfo=k.deserializeList(a,e);b.materialParams=k.deserializeList(a,c);b.materialKeyInfo=new d;f(b.materialKeyInfo,b.materialKey);return b};return l}();g.default=n})},"esri/views/2d/engine/webgl/MaterialInfoUtils_updateMaterialVariations":function(){define(["require","exports"],function(n,g){return function(b,a){b.geometryType=a&3;a>>=2;
b.sdf=0!==(a&4);b.vvSizeMinMaxValue=0!==(a&8);b.vvSizeScaleStops=0!==(a&16);b.vvSizeFieldStops=0!==(a&32);b.vvSizeUnitValue=0!==(a&64);b.vvColor=0!==(a&128);b.vvRotation=0!==(a&256);b.vvOpacity=0!==(a&512);b.visibility=0!==(a&1024);b.pattern=0!==(a&2048);b.heatmap=0!==(a&4096);return b}})},"esri/views/2d/engine/webgl/MaterialKeyInfo":function(){define(["require","exports"],function(n,g){return function(){function b(){this.heatmap=this.pattern=this.visibility=this.vvOpacity=this.vvRotation=this.vvColor=
this.vvSizeUnitValue=this.vvSizeFieldStops=this.vvSizeScaleStops=this.vvSizeMinMaxValue=this.sdf=!1}b.prototype.copy=function(a){this.geometryType=a.geometryType;this.sdf=a.sdf;this.vvSizeMinMaxValue=a.vvSizeMinMaxValue;this.vvSizeScaleStops=a.vvSizeScaleStops;this.vvSizeFieldStops=a.vvSizeFieldStops;this.vvSizeUnitValue=a.vvSizeUnitValue;this.vvColor=a.vvColor;this.vvRotation=a.vvRotation;this.vvOpacity=a.vvOpacity;this.visibility=a.visibility;this.pattern=a.pattern;this.heatmap=a.heatmap};b.prototype.hasVV=
function(){void 0===this._hasVV&&(this._hasVV=this.vvColor||this.vvOpacity||this.vvRotation||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue);return this._hasVV};b.prototype.hasVVSize=function(){return this.vvSizeMinMaxValue||this.vvSizeFieldStops||this.vvSizeScaleStops||this.vvSizeUnitValue};b.prototype.hasVVColor=function(){return this.vvColor};b.prototype.hasVVRotation=function(){return this.vvRotation};b.prototype.hasVVOpacity=function(){return this.vvOpacity};
return b}()})},"esri/views/2d/engine/webgl/util/serializationUtils":function(){define(["require","exports"],function(n,g){Object.defineProperty(g,"__esModule",{value:!0});g.serializeList=function(b,a){if(null===a)b.writeInt32(0);else{b.writeInt32(a.length);for(var f=0;f<a.length;f++)a[f].serialize(b);return b}};g.deserializeList=function(b,a,f){for(var d=b.readInt32(),d=Array(d),k=0;k<d.length;k++)d[k]=a.deserialize(b,f);return d}})},"esri/views/2d/engine/webgl/shaders/fillShaderSnippets":function(){define(["require",
"exports","dojo/text!./fillShaders.xml","../../../../webgl/ShaderSnippets"],function(n,g,b,a){n=new a;a.parse(b,n);return n})},"esri/views/2d/engine/webgl/shaders/iconShaderSnippets":function(){define(["require","exports","dojo/text!./iconShaders.xml","../../../../webgl/ShaderSnippets"],function(n,g,b,a){n=new a;a.parse(b,n);return n})},"esri/views/2d/engine/webgl/shaders/lineShaderSnippets":function(){define(["require","exports","dojo/text!./lineShaders.xml","../../../../webgl/ShaderSnippets"],function(n,
g,b,a){n=new a;a.parse(b,n);return n})},"esri/views/2d/engine/webgl/shaders/textShaderSnippets":function(){define(["require","exports","dojo/text!./textShaders.xml","../../../../webgl/ShaderSnippets"],function(n,g,b,a){n=new a;a.parse(b,n);return n})},"esri/views/webgl/ShaderVariations":function(){define(["require","exports","./Program","./ShaderSourceVariator","./Util"],function(n,g,b,a,f){function d(a){return a.reduce(function(a,b,d){b&&(a|=1<<d);return a},0)}return function(){function k(a,b,d,
h,f,k){"string"===typeof a?this._initParams(a,b,d,h,f,k):this._initObject({programNamePrefix:a.programNamePrefix,shaderSnippetPrefixes:a.shaderSnippetPrefixes,baseDefines:a.baseDefines,snippets:a.snippets,rctx:a.rctx,vertexAttribLocs:a.vertexAttribLocs})}k.prototype.dispose=function(){this._programCache&&(this._programCache.forEach(function(a){return a.dispose()}),this._programCache.clear())};k.prototype._initObject=function(a){this._initParams(a.programNamePrefix,a.shaderSnippetPrefixes,a.baseDefines,
a.snippets,a.rctx,a.vertexAttribLocs)};k.prototype._initParams=function(b,c,d,h,f,k){this._defaultSnippets=h;this._defaultRctx=f;this._defaultVertexAttribLocs=k;this._programCache=new Map;this._variationInfo=new Map;this._shaderSourceVariator=new a(b,c,d)};k.prototype.addDefine=function(a,b,d,h){this._shaderSourceVariator.addDefine(a,b,d,h)};k.prototype.addBinaryShaderSnippetSuffix=function(a,b,d){this._shaderSourceVariator.addBinaryShaderSnippetSuffix(a,b,d)};k.prototype.addNaryShaderSnippetSuffix=
function(a,b){this._shaderSourceVariator.addNaryShaderSnippetSuffix(a,b)};k.prototype.getProgram=function(a,c,l,h){c=c||this._defaultSnippets;l=l||this._defaultRctx;h=h||this._defaultVertexAttribLocs;if(!c)throw Error("No ShaderSnippets provided to getProgram nor to ShaderVariations constructor.");if(!l)throw Error("No RenderingContext provided to getProgram nor to ShaderVariations constructor.");if(!h)throw Error("No VertexAttributeLocations provided to getProgram nor to ShaderVariations constructor.");
var e=d(a);if(this._programCache.has(e))return this._programCache.get(e);a=this._shaderSourceVariator.getShaderVariation(a);var k,r;k=a.shaderSnippetNames[0];r=c[k];f.assert(null!=r,"shader snippet '"+k+"' does not exist");k=a.shaderSnippetNames[1];c=c[k];f.assert(null!=c,"shader snippet '"+k+"' does not exist");l=new b(l,r,c,h,a.defines);this._programCache.set(e,l);return l};k.prototype.getProgramByKey=function(a){if(this._programCache.has(a))return this._programCache.get(a);if(!this._variationInfo[a])return null;
var c=this._variationInfo[a],d=this._defaultSnippets,e=this._defaultRctx,k=this._defaultVertexAttribLocs,p,r;p=c.shaderSnippetNames[0];r=d[p];f.assert(null!=r,"shader snippet '"+p+"' does not exist");p=c.shaderSnippetNames[1];d=d[p];f.assert(null!=d,"shader snippet '"+p+"' does not exist");c=new b(e,r,d,k,c.defines);this._programCache.set(a,c);return c};k.prototype.getProgramInfo=function(a){var b=this._shaderSourceVariator.getShaderVariation(a);a=d(a);this._variationInfo[a]||(this._variationInfo[a]=
b);return{name:b.programName,key:a}};return k}()})},"esri/views/webgl/ShaderSourceVariator":function(){define(["require","exports","dojo/_base/lang","./Util"],function(n,g,b,a){return function(){function f(b,f,e){var c;"string"===typeof b?c=b:(c=b.programNamePrefix,f=b.shaderSnippetPrefixes,e=b.baseDefines);a.assert(f,"you must specify shader snippet prefixes");a.assert(2===f.length,"you must specify shader snippet prefixes for vertex and fragment shaders");e&&0!==e.length||(e=[]);this.programNamePrefix=
c;this.shaderSnippetPrefixes=f;this.baseDefines=e;this.variables=[];this.sealed=!1}f.prototype.addDefine=function(b,f,e,c){a.assert(!this.sealed,"you cannot add another variable after the first program has been generated");a.assert(b,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",b],shaderNameSuffixes:c||b,defineStr:f,affectsShaderTypes:e||[!0,!0]})};f.prototype.addBinaryShaderSnippetSuffix=function(b,f,e){a.assert(!this.sealed,"you cannot add another variable after the first program has been generated");
a.assert(b,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",b],shaderSnippetSuffixes:["",f],affectsShaderTypes:e||[!0,!0]})};f.prototype.addNaryShaderSnippetSuffix=function(b,f){a.assert(!this.sealed,"you cannot add another variable after the first program has been generated");var d=b.map(function(b){a.assert(null!=b.value,"value must always be specified");return b.value});this.variables.push({values:d,programNameSuffixes:b.map(function(a,b){return null!=a.programNameSuffix?
a.programNameSuffix:d[b]}),shaderSnippetSuffixes:b.map(function(a,b){return null!=a.shaderSnippetSuffix?a.shaderSnippetSuffix:d[b]}),affectsShaderTypes:f||[!0,!0]})};f.prototype.getShaderVariation=function(d){a.assert(d.length===this.variables.length,"you must specify a value for each variable");for(var f=this.programNamePrefix,e=b.clone(this.shaderSnippetPrefixes),c=b.clone(this.shaderSnippetPrefixes),l=b.clone(this.baseDefines),h=0;h<this.variables.length;h++){var m=this.variables[h],p=d[h],r=void 0;
m.values?(r=m.values.indexOf(p),a.assert(0<=r,"invalid value "+p+" for variable "+h)):r=p?1:0;f+=m.programNameSuffixes[r];for(p=0;2>p;p++)m.affectsShaderTypes[p]&&(m.shaderSnippetSuffixes&&(e[p]+=m.shaderSnippetSuffixes[r],c[p]+=m.shaderSnippetSuffixes[r]),m.defineStr&&r&&(l.push(m.defineStr),c[p]+=m.shaderNameSuffixes))}return{programName:f,shaderSnippetNames:e,shaderNames:c,defines:l}};return f}()})},"esri/views/2d/engine/webgl/Utils":function(){define("require exports ../../../../arcade/Dictionary ../../../../arcade/Feature ../../../../core/Logger ../../../../core/screenUtils ../../../../support/arcadeUtils ./color ./enums ./SymbolProperties".split(" "),
function(n,g,b,a,f,d,k,e,c,l){function h(a){return a.map(function(a){return a.name})}function m(a){for(var b={},c=0;c<a.length;c++){var d=a[c];b[d.name]=d.strideInBytes}return b}function p(a){switch(a){case "esriSMS":return"simple-marker";case "esriPMS":return"picture-marker";case "esriSLS":return"simple-line";case "esriPLS":return"picture-line";case "esriSFS":return"simple-fill";case "esriPFS":return"picture-fill";case "esriTS":return"text"}return a}function r(a){if(a=p(a.type)){switch(a){case "simple-marker":case "picture-marker":return!0;
case "CIMPointSymbol":return!0}return!1}}function t(a){if(a=p(a.type)){switch(a){case "simple-fill":case "picture-fill":return!0;case "CIMPolygonSymbol":return!0}return!1}}function q(a){if(a=p(a.type)){switch(a){case "simple-line":case "picture-line":return!0;case "CIMLineSymbol":return!0}return!1}}function u(a){if(a=p(a.type)){switch(a){case "text":return!0;case "CIMTextSymbol":return!0}return!1}}function x(a){return a&&a.length||0}function v(a){return"string"===typeof a}Object.defineProperty(g,
"__esModule",{value:!0});var y=f.getLogger("esri.views.2d.engine.webgl.Utils");g.C_HITTEST_SEARCH_SIZE=4;g.C_VBO_GEOMETRY="geometry";g.C_VBO_PERINSTANCE="per_instance";g.C_VBO_PERINSTANCE_VV="per_instance_vv";g.C_VBO_VISIBILITY="visibility";g.C_ICON_VERTEX_DEF=[{name:g.C_VBO_GEOMETRY,strideInBytes:24,divisor:0}];g.C_ICON_VERTEX_DEF_VV=[{name:g.C_VBO_GEOMETRY,strideInBytes:40,divisor:0}];g.C_ICON_HEATMAP=[{name:g.C_VBO_GEOMETRY,strideInBytes:28,divisor:0}];g.C_FILL_VERTEX_DEF=[{name:g.C_VBO_GEOMETRY,
strideInBytes:24,divisor:0}];g.C_FILL_VERTEX_DEF_VV=[{name:g.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];g.C_LINE_VERTEX_DEF=[{name:g.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];g.C_LINE_VERTEX_DEF_VV=[{name:g.C_VBO_GEOMETRY,strideInBytes:44,divisor:0}];g.C_TEXT_VERTEX_DEF=[{name:g.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:g.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];g.C_TEXT_VERTEX_DEF_VV=[{name:g.C_VBO_GEOMETRY,strideInBytes:36,divisor:0},{name:g.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];
g.C_ICON_VERTEX_NAMES=h(g.C_ICON_VERTEX_DEF);g.C_ICON_VERTEX_NAMES_VV=h(g.C_ICON_VERTEX_DEF_VV);g.C_FILL_VERTEX_NAMES=h(g.C_FILL_VERTEX_DEF);g.C_FILL_VERTEX_NAMES_VV=h(g.C_FILL_VERTEX_DEF_VV);g.C_LINE_VERTEX_NAMES=h(g.C_LINE_VERTEX_DEF);g.C_LINE_VERTEX_NAMES_VV=h(g.C_LINE_VERTEX_DEF_VV);g.C_TEXT_VERTEX_NAMES=h(g.C_TEXT_VERTEX_DEF);g.C_TEXT_VERTEX_NAMES_VV=h(g.C_TEXT_VERTEX_DEF_VV);g.C_ICON_STRIDE_SPEC=m(g.C_ICON_VERTEX_DEF);g.C_ICON_STRIDE_SPEC_VV=m(g.C_ICON_VERTEX_DEF_VV);g.C_ICON_STRIDE_SPEC_HEATMAP=
m(g.C_ICON_HEATMAP);g.C_FILL_STRIDE_SPEC=m(g.C_FILL_VERTEX_DEF);g.C_FILL_STRIDE_SPEC_VV=m(g.C_FILL_VERTEX_DEF_VV);g.C_LINE_STRIDE_SPEC=m(g.C_LINE_VERTEX_DEF);g.C_LINE_STRIDE_SPEC_VV=m(g.C_LINE_VERTEX_DEF_VV);g.C_TEXT_STRIDE_SPEC=m(g.C_TEXT_VERTEX_DEF);g.C_TEXT_STRIDE_SPEC_VV=m(g.C_TEXT_VERTEX_DEF_VV);g.getStrides=function(a,b,d){void 0===d&&(d=!1);switch(a){case c.WGLGeometryType.MARKER:return b?g.C_ICON_STRIDE_SPEC_VV:d?g.C_ICON_STRIDE_SPEC_HEATMAP:g.C_ICON_STRIDE_SPEC;case c.WGLGeometryType.FILL:return b?
g.C_FILL_STRIDE_SPEC_VV:g.C_FILL_STRIDE_SPEC;case c.WGLGeometryType.LINE:return b?g.C_LINE_STRIDE_SPEC_VV:g.C_LINE_STRIDE_SPEC;case c.WGLGeometryType.TEXT:return b?g.C_TEXT_STRIDE_SPEC_VV:g.C_TEXT_STRIDE_SPEC}return null};g.getSymbolGeometryType=function(a){return r(a)?c.WGLGeometryType.MARKER:q(a)?c.WGLGeometryType.LINE:t(a)?c.WGLGeometryType.FILL:u(a)?c.WGLGeometryType.TEXT:c.WGLGeometryType.UNKNOWN};g.normalizeSymbolType=p;g.isMarkerSymbol=r;g.isFillSymbol=t;g.isLineSymbol=q;g.isPictureSymbol=
function(a){if(a=p(a.type))switch(a){case "picture-marker":case "picture-line":case "picture-fill":return!0}return!1};g.isTextSymbol=u;g.getTextProperties=function(a){return l.TextProperties.pool.acquire(a.color?e.copyAndPremultiply(a.color):[255,255,255,255],a.haloColor?e.copyAndPremultiply(a.haloColor):[255,255,255,255],d.pt2px(a.haloSize),d.pt2px(a.font.size),a.angle*Math.PI/180,a.xoffset/a.font.size,a.yoffset/a.font.size,"left"===a.horizontalAlignment?0:"right"===a.horizontalAlignment?1:.5,"top"===
a.verticalAlignment?0:"bottom"===a.verticalAlignment?1:.5)};g.isSameUniformValue=function(a,b){return!1};g.isSameMaterialInfo=function(a,b){if(a.materialKey!==b.materialKey||x(a.texBindingInfo)!==x(b.texBindingInfo)||x(a.materialParams)!==x(b.materialParams))return!1;for(var c=a.texBindingInfo.length,d=0;d<c;++d){var e=a.texBindingInfo[d],h=b.texBindingInfo[d];if(e.unit!==h.unit||e.pageId!==h.pageId||e.semantic!==h.semantic)return!1}a=a.materialParams.length;for(d=0;d<a;)return!1;return!0};g.serializeString=
function(a,b,c){for(var d=0,e=a.length,h=0;h<e;++h)b&&(b[c+d]=a.charCodeAt(h)),++d;b&&(b[c+d]=0);++d;return d};g.deserializeString=function(a,b,c){var d=0;a.s="";for(var e=!0;e;){var h=b[c+d];++d;0!==h?a.s+=String.fromCharCode(h):e=!1}return d};g.isDefined=function(a){return null!==a&&void 0!==a};g.isNumber=function(a){return"number"===typeof a};g.isString=v;g.isStringOrNull=function(a){return null==a||v(a)};g.lerp=function(a,b,c){return a+(b-a)*c};n=function(){function a(){this._arr=[];this._push=
this._push.bind(this)}a.prototype._push=function(a,b){this._arr.push(b)};a.prototype.getKeys=function(a){this._arr.length=0;a&&a.forEach(this._push);return this._arr};return a}();g.KeysGetter=n;n=function(){function a(){this._arr=[];this._push=this._push.bind(this)}a.prototype._push=function(a,b){this._arr.push(a)};a.prototype.getValues=function(a){this._arr.length=0;a&&a.forEach(this._push);return this._arr};return a}();g.ValuesGetter=n;g.getCapType=function(a){switch(a){case "butt":return c.CapType.BUTT;
case "round":return c.CapType.ROUND;case "square":return c.CapType.SQUARE;default:return y.error("Cannot interpret unknown cap: "+a),c.CapType.UNKNOWN}};g.getJoinType=function(a){switch(a){case "miter":return c.JoinType.MITER;case "bevel":return c.JoinType.BEVEL;case "round":return c.JoinType.ROUND;default:return y.error("Cannot interpret unknown join: "+a),c.JoinType.UNKNOWN}};g.getVVType=function(a){switch(a){case "opacity":return c.VVType.OPACITY;case "color":return c.VVType.COLOR;case "rotation":return c.VVType.ROTATION;
case "size":return c.VVType.SIZE;default:return y.error("Cannot interpret unknown vv: "+a),null}};g.createArcadeFunction=function(c,d){var e=c.spatialReference,h=c.layer,f=k.createFunction(c.valueExpression),l=new a;return function(a,c){l.repurposeFromGraphicLikeObject(a.geometry,a.attributes,h);a=c&&new b({viewingMode:c.viewingMode,scale:c.scale});a=k.executeFunction(f,{vars:{$feature:l,$view:a||{}},spatialReference:e});return d?d(a):a}};g.copyMeshData=function(a,b,c,d,e,h,f){for(var l in h)for(var k=
h[l].stride,m=h[l].data,p=c[l].data,r=k*e.vertexCount/4,q=k*a/4,g=k*e.vertexFrom/4,k=0;k<r;++k)p[k+q]=m[k+g];c=e.indexCount;for(k=0;k<c;++k)d[k+b]=f[k+e.indexFrom]-e.vertexFrom+a}})},"esri/views/2d/engine/webgl/color":function(){define(["require","exports","./number"],function(n,g,b){function a(a,b){Array.isArray(b)?(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]):(a[0]=b.r,a[1]=b.g,a[2]=b.b,a[3]=b.a);return a}function f(a,b,c){void 0===b&&(b=0);void 0===c&&(c=!1);var d=a[b+3];a[b+0]*=d;a[b+1]*=d;a[b+2]*=
d;c||(a[b+3]*=255);return a}Object.defineProperty(g,"__esModule",{value:!0});g.white=[255,255,255,1];var d=[0,0,0,0];g.premultiplyAlpha=f;g.copyAndPremultiply=function(b){return f(a([],b))};g.premultiplyAlphaUint32=function(k){f(a(d,k));return b.i8888to32(d[0],d[1],d[2],d[3])};g.premultiplyAlphaRGBA=function(a){var d=a.a;return b.i8888to32(a.r*d,a.g*d,a.b*d,255*d)}})},"esri/views/2d/engine/webgl/number":function(){define(["require","exports"],function(n,g){Object.defineProperty(g,"__esModule",{value:!0});
var b=new Float32Array(1),a=new Uint32Array(b.buffer);g.nextHighestPowerOfTwo=function(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a};g.toUint32=function(f){b[0]=f;return a[0]};g.i1616to32=function(a,b){return 65535&a|b<<16};g.i8888to32=function(a,b,k,e){return a&255|(b&255)<<8|(k&255)<<16|e<<24};g.i8816to32=function(a,b,k){return a&255|(b&255)<<8|k<<16};g.numTo32=function(a){return a|0}})},"esri/views/2d/engine/webgl/SymbolProperties":function(){define(["require","exports","../../../../core/ObjectPool"],
function(n,g,b){Object.defineProperty(g,"__esModule",{value:!0});n=function(){function a(){this.color=[0,0,0,0];this.haloColor=[0,0,0,0];this.haloSize=0;this.size=12;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=0}a.prototype.acquire=function(a,b,k,e,c,l,h,m,p){this.color=a;this.haloColor=b;this.haloSize=k;this.size=e;this.angle=c;this.offsetX=l;this.offsetY=h;this.hAnchor=m;this.vAnchor=p};a.prototype.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0;this.vAnchor=
this.hAnchor=this.offsetY=this.offsetX=this.angle=this.size=this.haloSize=this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0};a.pool=new b(a);return a}();g.TextProperties=n})},"esri/views/2d/engine/webgl/brushes/WGLBrushInfo":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../GeometryUtils ./WGLBrush ../shaders/glShaderSnippets ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),
function(n,g,b,a,f,d,k,e,c,l){Object.defineProperty(g,"__esModule",{value:!0});n=function(h){function f(){var a=h.call(this)||this;a._initialized=!1;a._maxWidth=0;a._color=new Float32Array([1,0,0,1]);return a}b(f,h);f.prototype.dispose=function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=null);this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null);this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=
null);this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=null);this._canvas=null};f.prototype.draw=function(a,b){a=a.context;this._initialized||this._initialize(a);a.bindVAO(this._outlineVertexArrayObject);a.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord);this._outlineProgram.setUniform1f("u_coord_range",
512);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",this._color);a.setLineWidth(2);a.drawArrays(3,0,4);a.bindVAO();var c=this._getTexture(a,b);c&&(a.bindVAO(this._tileInfoVertexArrayObject),a.bindProgram(this._tileInfoProgram),a.bindTexture(c,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord),this._tileInfoProgram.setUniform1f("u_depth",
0),this._tileInfoProgram.setUniform1f("u_coord_ratio",1),this._tileInfoProgram.setUniform2f("u_delta",8,8),this._tileInfoProgram.setUniform2f("u_dimensions",c.descriptor.width,c.descriptor.height),a.drawArrays(5,0,4),a.bindVAO())};f.prototype._initialize=function(a){if(this._initialized)return!0;var b={a_pos:0},c=new e(a,d.backgroundVS,d.backgroundFS,b),h=new e(a,d.tileInfoVS,d.tileInfoFS,b),f={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},m=new Int8Array([0,
0,1,0,1,1,0,1]),m=k.createVertex(a,35044,m),m=new l(a,b,f,{geometry:m}),p=new Int8Array([0,0,1,0,0,1,1,1]),p=k.createVertex(a,35044,p);a=new l(a,b,f,{geometry:p});this._outlineProgram=c;this._tileInfoProgram=h;this._outlineVertexArrayObject=m;this._tileInfoVertexArrayObject=a;return this._initialized=!0};f.prototype._getTexture=function(b,d){if(d.texture)return d.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","canvas2d"),this._canvas.setAttribute("width",
"256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));var e=d.key.id,h=this._canvas.getContext("2d");h.font="24px sans-serif";h.textAlign="left";h.textBaseline="middle";var f=h.measureText(e),f=Math.pow(2,Math.ceil(a.log2(f.width+2)));f>this._maxWidth&&(this._maxWidth=f);h.clearRect(0,0,this._maxWidth,32);h.fillStyle="blue";h.fillText(e,0,16);d.texture=new c(b,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},this._canvas);return d.texture};
return f}(f.default);g.default=n})},"esri/views/2d/engine/webgl/brushes/WGLBrush":function(){define(["require","exports"],function(n,g){Object.defineProperty(g,"__esModule",{value:!0});n=function(){return function(){}}();g.default=n})},"esri/views/webgl/Texture":function(){define(["require","exports","dojo/has"],function(n,g,b){return function(){function a(b,d,k){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;
this._context=b;this._desc={pixelFormat:d.pixelFormat,internalFormat:d.internalFormat,dataType:d.dataType,target:d.target?d.target:3553,samplingMode:d.samplingMode?d.samplingMode:9729,wrapMode:d.wrapMode?d.wrapMode:10497,maxAnisotropy:d.maxAnisotropy,flipped:void 0!==d.flipped?d.flipped:!1,hasMipmap:void 0!==d.hasMipmap?d.hasMipmap:!1,level:void 0!==d.level?d.level:0,unpackAlignment:d.unpackAlignment?d.unpackAlignment:4,width:d.width,height:d.height,preMultiplyAlpha:void 0!==d.preMultiplyAlpha?d.preMultiplyAlpha:
!1};this._id=++a._nextId;this.setData(k)}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});a.prototype.dispose=function(){var a=this;if(this._context){if(this._glName){var b=this._context.gl;this._boundToUnits.forEach(function(b){a._context.bindTexture(null,
b)});b.deleteTexture(this._glName);this._glName=null}this._context=null}};a.prototype.resize=function(a,b){var d=this._desc;if(d.width!==a||d.height!==b)d.width=a,d.height=b,this.setData(null)};a.prototype.setData=function(b){var d=this._context.gl;this._glName||(this._glName=d.createTexture());void 0===b&&(b=null);null===b&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var f=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var e=this._desc;a._validateTexture(e);
d.pixelStorei(d.UNPACK_ALIGNMENT,e.unpackAlignment);d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,e.flipped?1:0);d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.preMultiplyAlpha);if(b instanceof ImageData||b instanceof HTMLImageElement||b instanceof HTMLCanvasElement||b instanceof HTMLVideoElement)e.width&&e.height&&console.assert(b.width===e.width&&b.height===e.height),d.texImage2D(d.TEXTURE_2D,e.level,e.internalFormat?e.internalFormat:e.pixelFormat,e.pixelFormat,e.dataType,b),void 0===this._desc.width&&
(this._desc.width=b.width),void 0===this._desc.height&&(this._desc.height=b.height);else{null!=e.width&&null!=e.height||console.error("Width and height must be specified!");var c=e.internalFormat?e.internalFormat:e.pixelFormat,l=e.pixelFormat;d.DEPTH24_STENCIL8&&c===d.DEPTH_STENCIL&&(c=d.DEPTH24_STENCIL8);d.texImage2D(d.TEXTURE_2D,e.level,c,e.width,e.height,0,l,e.dataType,b)}e.hasMipmap&&this.generateMipmap();a._applySamplingMode(d,this._desc);a._applyWrapMode(d,this._desc);a._applyAnisotropicFilteringParameters(this._context,
this._desc);this._context.bindTexture(f,0)};a.prototype.updateData=function(a,b,k,e,c,l){l||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");var d=this._context.gl,f=this._desc,p=this._context.getBoundTexture(0);this._context.bindTexture(this,0);(0>b||0>k||e>f.width||c>f.height||b+e>f.width||k+c>f.height)&&console.error("An attempt to update out of bounds of the texture!");l instanceof ImageData||l instanceof HTMLImageElement||
l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement?(console.assert(l.width===e&&l.height===c),d.texSubImage2D(d.TEXTURE_2D,a,b,k,f.pixelFormat,f.dataType,l)):d.texSubImage2D(d.TEXTURE_2D,a,b,k,e,c,f.pixelFormat,f.dataType,l);this._context.bindTexture(p,0)};a.prototype.generateMipmap=function(){var b=this._desc;b.hasMipmap||(b.hasMipmap=!0,a._validateTexture(b));9729===b.samplingMode?(this._samplingModeDirty=!0,b.samplingMode=9985):9728===b.samplingMode&&(this._samplingModeDirty=!0,b.samplingMode=
9984);b=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var d=this._context.gl;d.generateMipmap(d.TEXTURE_2D);this._context.bindTexture(b,0)};a.prototype.setSamplingMode=function(b){b!==this._desc.samplingMode&&(this._desc.samplingMode=b,a._validateTexture(this._desc),this._samplingModeDirty=!0)};a.prototype.setWrapMode=function(b){b!==this._desc.wrapMode&&(this._desc.wrapMode=b,a._validateTexture(this._desc),this._wrapModeDirty=!0)};a.prototype.applyChanges=function(){var b=this._context.gl,
d=this._desc;this._samplingModeDirty&&(a._applySamplingMode(b,d),this._samplingModeDirty=!1);this._wrapModeDirty&&(a._applyWrapMode(b,d),this._wrapModeDirty=!1)};a.prototype.setBoundToUnit=function(a,b){b?this._boundToUnits.add(a):this._boundToUnits.delete(a)};a._isPowerOfTwo=function(a){return 0===(a&a-1)};a._validateTexture=function(b){(0>b.width||0>b.height)&&console.error("Negative dimension parameters are not allowed!");a._isPowerOfTwo(b.width)&&a._isPowerOfTwo(b.height)||(33071!==b.wrapMode&&
console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),b.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};a._applySamplingMode=function(a,b){var d=b.samplingMode;if(9985===d||9987===d)d=9729;else if(9984===d||9986===d)d=9728;a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,d);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,b.samplingMode)};a._applyWrapMode=function(a,b){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,b.wrapMode);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_WRAP_T,b.wrapMode)};a._applyAnisotropicFilteringParameters=function(a,b){if(null!=b.maxAnisotropy){var d=a.capabilities.textureFilterAnisotropic;d&&(a=a.gl,a.texParameterf(a.TEXTURE_2D,d.TEXTURE_MAX_ANISOTROPY,b.maxAnisotropy))}};a._nextId=0;return a}()})},"esri/views/2d/engine/webgl/brushes/WGLBrushStencil":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix/vec4 ./WGLBrush ../shaders/glShaderSnippets ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/VertexArrayObject".split(" "),
function(n,g,b,a,f,d,k,e,c){Object.defineProperty(g,"__esModule",{value:!0});n=function(f){function h(){var b=f.call(this)||this;b._color=a.create();b._initialized=!1;b._color.set([1,0,0,1]);return b}b(h,f);h.prototype.dispose=function(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null);this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)};h.prototype.draw=function(a,b){a=a.context;this._initialized||this._initialize(a);
a.setStencilFunctionSeparate(1032,519,b.stencilRef,255);a.bindVAO(this._solidVertexArrayObject);a.bindProgram(this._solidProgram);this._solidProgram.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform);this._solidProgram.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord);this._solidProgram.setUniform1f("u_coord_range",512);this._solidProgram.setUniform1f("u_depth",0);this._solidProgram.setUniform4fv("u_color",this._color);a.drawArrays(5,0,4);a.bindVAO()};h.prototype._initialize=
function(a){if(this._initialized)return!0;var b={a_pos:0},h=new e(a,d.backgroundVS,d.backgroundFS,b);if(!h)return!1;var f=new Int8Array([0,0,1,0,0,1,1,1]),f=k.createVertex(a,35044,f);a=new c(a,b,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:f});this._solidProgram=h;this._solidVertexArrayObject=a;return this._initialized=!0};return h}(f.default);g.default=n})},"esri/core/libs/gl-matrix/vec4":function(){define(["./common"],function(n){var g={create:function(){var b=
new n.ARRAY_TYPE(4);b[0]=0;b[1]=0;b[2]=0;b[3]=0;return b},clone:function(b){var a=new n.ARRAY_TYPE(4);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},fromValues:function(b,a,f,d){var k=new n.ARRAY_TYPE(4);k[0]=b;k[1]=a;k[2]=f;k[3]=d;return k},copy:function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},set:function(b,a,f,d,k){b[0]=a;b[1]=f;b[2]=d;b[3]=k;return b},add:function(b,a,f){b[0]=a[0]+f[0];b[1]=a[1]+f[1];b[2]=a[2]+f[2];b[3]=a[3]+f[3];return b},subtract:function(b,a,f){b[0]=a[0]-
f[0];b[1]=a[1]-f[1];b[2]=a[2]-f[2];b[3]=a[3]-f[3];return b}};g.sub=g.subtract;g.multiply=function(b,a,f){b[0]=a[0]*f[0];b[1]=a[1]*f[1];b[2]=a[2]*f[2];b[3]=a[3]*f[3];return b};g.mul=g.multiply;g.divide=function(b,a,f){b[0]=a[0]/f[0];b[1]=a[1]/f[1];b[2]=a[2]/f[2];b[3]=a[3]/f[3];return b};g.div=g.divide;g.ceil=function(b,a){b[0]=Math.ceil(a[0]);b[1]=Math.ceil(a[1]);b[2]=Math.ceil(a[2]);b[3]=Math.ceil(a[3]);return b};g.floor=function(b,a){b[0]=Math.floor(a[0]);b[1]=Math.floor(a[1]);b[2]=Math.floor(a[2]);
b[3]=Math.floor(a[3]);return b};g.min=function(b,a,f){b[0]=Math.min(a[0],f[0]);b[1]=Math.min(a[1],f[1]);b[2]=Math.min(a[2],f[2]);b[3]=Math.min(a[3],f[3]);return b};g.max=function(b,a,f){b[0]=Math.max(a[0],f[0]);b[1]=Math.max(a[1],f[1]);b[2]=Math.max(a[2],f[2]);b[3]=Math.max(a[3],f[3]);return b};g.round=function(b,a){b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);b[2]=Math.round(a[2]);b[3]=Math.round(a[3]);return b};g.scale=function(b,a,f){b[0]=a[0]*f;b[1]=a[1]*f;b[2]=a[2]*f;b[3]=a[3]*f;return b};g.scaleAndAdd=
function(b,a,f,d){b[0]=a[0]+f[0]*d;b[1]=a[1]+f[1]*d;b[2]=a[2]+f[2]*d;b[3]=a[3]+f[3]*d;return b};g.distance=function(b,a){var f=a[0]-b[0],d=a[1]-b[1],k=a[2]-b[2];b=a[3]-b[3];return Math.sqrt(f*f+d*d+k*k+b*b)};g.dist=g.distance;g.squaredDistance=function(b,a){var f=a[0]-b[0],d=a[1]-b[1],k=a[2]-b[2];b=a[3]-b[3];return f*f+d*d+k*k+b*b};g.sqrDist=g.squaredDistance;g.length=function(b){var a=b[0],f=b[1],d=b[2];b=b[3];return Math.sqrt(a*a+f*f+d*d+b*b)};g.len=g.length;g.squaredLength=function(b){var a=b[0],
f=b[1],d=b[2];b=b[3];return a*a+f*f+d*d+b*b};g.sqrLen=g.squaredLength;g.negate=function(b,a){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b};g.inverse=function(b,a){b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];b[3]=1/a[3];return b};g.normalize=function(b,a){var f=a[0],d=a[1],k=a[2];a=a[3];var e=f*f+d*d+k*k+a*a;0<e&&(e=1/Math.sqrt(e),b[0]=f*e,b[1]=d*e,b[2]=k*e,b[3]=a*e);return b};g.dot=function(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]+b[3]*a[3]};g.lerp=function(b,a,f,d){var k=a[0],e=a[1],c=a[2];a=a[3];
b[0]=k+d*(f[0]-k);b[1]=e+d*(f[1]-e);b[2]=c+d*(f[2]-c);b[3]=a+d*(f[3]-a);return b};g.random=function(b,a){a=a||1;b[0]=n.RANDOM();b[1]=n.RANDOM();b[2]=n.RANDOM();b[3]=n.RANDOM();g.normalize(b,b);g.scale(b,b,a);return b};g.transformMat4=function(b,a,f){var d=a[0],k=a[1],e=a[2];a=a[3];b[0]=f[0]*d+f[4]*k+f[8]*e+f[12]*a;b[1]=f[1]*d+f[5]*k+f[9]*e+f[13]*a;b[2]=f[2]*d+f[6]*k+f[10]*e+f[14]*a;b[3]=f[3]*d+f[7]*k+f[11]*e+f[15]*a;return b};g.transformQuat=function(b,a,f){var d=a[0],k=a[1],e=a[2],c=f[0],l=f[1],
h=f[2];f=f[3];var m=f*d+l*e-h*k,p=f*k+h*d-c*e,r=f*e+c*k-l*d,d=-c*d-l*k-h*e;b[0]=m*f+d*-c+p*-h-r*-l;b[1]=p*f+d*-l+r*-c-m*-h;b[2]=r*f+d*-h+m*-l-p*-c;b[3]=a[3];return b};g.forEach=function(){var b=g.create();return function(a,f,d,k,e,c){f||(f=4);d||(d=0);for(k=k?Math.min(k*f+d,a.length):a.length;d<k;d+=f)b[0]=a[d],b[1]=a[d+1],b[2]=a[d+2],b[3]=a[d+3],e(b,b,c),a[d]=b[0],a[d+1]=b[1],a[d+2]=b[2],a[d+3]=b[3];return a}}();g.str=function(b){return"vec4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"};g.exactEquals=
function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]};g.equals=function(b,a){var f=b[0],d=b[1],k=b[2];b=b[3];var e=a[0],c=a[1],l=a[2];a=a[3];return Math.abs(f-e)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(e))&&Math.abs(d-c)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(c))&&Math.abs(k-l)<=n.EPSILON*Math.max(1,Math.abs(k),Math.abs(l))&&Math.abs(b-a)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(a))};return g})},"esri/views/2d/engine/webgl/brushes/WGLGeometryBrushFill":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),
function(n,g,b,a,f,d,k){Object.defineProperty(g,"__esModule",{value:!0});n=function(d){function c(){var a=null!==d&&d.apply(this,arguments)||this;a._isInitialized=!1;a._fillAttributeLocations={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4};a._fillAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4,a_vv:5};a._spritesTextureSize=new Float32Array(2);return a}b(c,d);c.prototype.dispose=function(){};c.prototype.getGeometryType=function(){return a.WGLGeometryType.FILL};c.prototype.drawGeometry=
function(a,b,c,d){d=a.context;var e=a.painter,h=a.rendererInfo,f=a.requiredLevel,l=a.stationary,k=c.indexCount,m=c.indexFrom;this._initialize();var p=c.materialInfo.materialKeyInfo,g=p.hasVV()?this._fillAttributeLocationsVV:this._fillAttributeLocations;if(g=a.painter.materialManager.getProgram(c.materialInfo.materialKey,a.drawPhase,g)){d.bindProgram(g);var n=this._getVAO(d,b,p.hasVV());d.bindVAO(n);if(0<c.materialInfo.texBindingInfo.length){c=c.materialInfo.texBindingInfo[0];var n=c.pageId,B=a.painter.textureManager.sprites;
this._spritesTextureSize[0]=B.getWidth(n);this._spritesTextureSize[1]=B.getHeight(n);g.setUniform1f("u_zoomFactor",1/Math.pow(2,f-b.key.level)/a.pixelRatio);e.textureManager.bindSpritePage(d,n,c.unit,l?9728:9729);g.setUniform1i(c.semantic,c.unit);g.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}g.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform);g.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord);g.setUniform1f("u_opacity",1);p.vvColor&&(g.setUniform1fv("u_vvColorValues",
h.vvColorValues),g.setUniform4fv("u_vvColors",h.vvColors));p.vvOpacity&&(g.setUniform1fv("u_vvOpacityValues",h.vvOpacityValues),g.setUniform1fv("u_vvOpacities",h.vvOpacities));d.drawElements(4,k,5125,4*m);d.bindVAO(null)}};c.prototype._initialize=function(){if(this._isInitialized)return!0;this._fillVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:24,normalized:!0,divisor:0},{name:"a_color",count:4,
type:5121,offset:8,stride:24,normalized:!0,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:24,normalized:!1,divisor:0}]};this._fillVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_tlbr",count:4,
type:5123,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_vv",count:2,type:5126,offset:24,stride:32,normalized:!1,divisor:0}]};this._isInitialized=!0};c.prototype._getVAO=function(a,b,c){if(b.fillGeometry.vao)return b.fillGeometry.vao;var d=b.fillGeometry.vertexBufferMap[f.C_VBO_GEOMETRY],e=b.fillGeometry.indexBuffer;if(!d||!e)return null;b.fillGeometry.vao=c?new k(a,this._fillAttributeLocationsVV,this._fillVertexAttributeLayoutVV,
{geometry:d},e):new k(a,this._fillAttributeLocations,this._fillVertexAttributeLayout,{geometry:d},e);return b.fillGeometry.vao};return c}(d.default);g.default=n})},"esri/views/2d/engine/webgl/brushes/WGLGeometryBrush":function(){define(["require","exports","../../../../../core/tsSupport/extendsHelper","./WGLBrush","../util/iterator"],function(n,g,b,a,f){Object.defineProperty(g,"__esModule",{value:!0});n=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}b(d,a);d.prototype.draw=
function(a,b){var c=this;if(b.canDisplay){var d=this.getGeometryType(),e=b.getDisplayList(a.drawPhase),k=b.getGeometry(d);k&&f.forEachIter(e.ofType(d),function(d){return c.drawGeometry(a,b,d,k)})}};return d}(a.default);g.default=n})},"esri/views/2d/engine/webgl/util/iterator":function(){define(["require","exports"],function(n,g){Object.defineProperty(g,"__esModule",{value:!0});g.forEachIter=function(b,a){for(;;){var f=b.next();if(f.done)break;a(f.value)}}})},"esri/views/2d/engine/webgl/brushes/WGLGeometryBrushLine":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),
function(n,g,b,a,f,d,k){Object.defineProperty(g,"__esModule",{value:!0});n=function(d){function c(){var a=null!==d&&d.apply(this,arguments)||this;a._lineAttributeLocations={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6};a._lineAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6,a_vv:7};a._lineVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,
offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:32,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,
type:5120,offset:28,stride:32,normalized:!1,divisor:0}]};a._lineVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:44,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:44,normalized:!0,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:12,stride:44,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:44,normalized:!1,
divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:44,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:44,normalized:!1,divisor:0},{name:"a_vv",count:3,type:5126,offset:32,stride:44,normalized:!1,divisor:0}]};a._spritesTextureSize=new Float32Array(2);return a}b(c,d);c.prototype.dispose=function(){};c.prototype.getGeometryType=function(){return a.WGLGeometryType.LINE};c.prototype.drawGeometry=function(a,b,c,d){d=a.context;var e=a.painter,h=a.rendererInfo,
f=a.requiredLevel,l=a.drawPhase,k=c.indexFrom,m=c.indexCount,p=c.materialInfo;c=p.materialKeyInfo;var g=c.hasVV()?this._lineAttributeLocationsVV:this._lineAttributeLocations;if(l=e.materialManager.getProgram(p.materialKey,l,g)){d.bindProgram(l);g=this._getVAO(d,b,c.hasVV());d.bindVAO(g);g=1/a.pixelRatio;if(0<p.texBindingInfo.length){var p=p.texBindingInfo[0],n=p.pageId,B=e.textureManager.sprites;this._spritesTextureSize[0]=B.getWidth(n);this._spritesTextureSize[1]=B.getHeight(n);e.textureManager.bindSpritePage(d,
n,p.unit);l.setUniform1i(p.semantic,p.unit);l.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}a=Math.pow(2,f-b.key.level)/a.pixelRatio;l.setUniform1f("u_zoomFactor",a);l.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform);l.setUniformMatrix4fv("u_extrudeMatrix",e.extrudeMatrix);l.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord);l.setUniform1f("u_opacity",1);l.setUniform1f("u_blur",0+g);l.setUniform1f("u_antialiasing",g);l.setUniform1f("u_zoomFactor",a);c.vvSizeMinMaxValue&&
l.setUniform4fv("u_vvSizeMinMaxValue",h.vvSizeMinMaxValue);c.vvSizeScaleStops&&l.setUniform1f("u_vvSizeScaleStopsValue",h.vvSizeScaleStopsValue);c.vvSizeFieldStops&&(l.setUniform1fv("u_vvSizeFieldStopsValues",h.vvSizeFieldStopsValues),l.setUniform1fv("u_vvSizeFieldStopsSizes",h.vvSizeFieldStopsSizes));c.vvSizeUnitValue&&l.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",h.vvSizeUnitValueToPixelsRatio);c.vvColor&&(l.setUniform1fv("u_vvColorValues",h.vvColorValues),l.setUniform4fv("u_vvColors",h.vvColors));
c.vvOpacity&&(l.setUniform1fv("u_vvOpacityValues",h.vvOpacityValues),l.setUniform1fv("u_vvOpacities",h.vvOpacities));d.setFaceCullingEnabled(!0);d.setFrontFace(2305);d.setCullFace(1029);d.drawElements(4,m,5125,4*k);d.setFaceCullingEnabled(!1);d.bindVAO(null)}};c.prototype._getVAO=function(a,b,c){if(b.lineGeometry.vao)return b.lineGeometry.vao;var d=b.lineGeometry.vertexBufferMap[f.C_VBO_GEOMETRY],e=b.lineGeometry.indexBuffer;if(!d||!e)return null;b.lineGeometry.vao=c?new k(a,this._lineAttributeLocationsVV,
this._lineVertexAttributeLayoutVV,{geometry:d},e):new k(a,this._lineAttributeLocations,this._lineVertexAttributeLayout,{geometry:d},e);return b.lineGeometry.vao};return c}(d.default);g.default=n})},"esri/views/2d/engine/webgl/brushes/WGLGeometryBrushMarker":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),function(n,g,b,a,f,d,k,e){Object.defineProperty(g,"__esModule",
{value:!0});n=function(c){function d(){var a=null!==c&&c.apply(this,arguments)||this;a._iconAttributeLocations={a_pos:0,a_vertexOffsetAndTex:1,a_id:2,a_color:3,a_outlineColor:4,a_sizeAndOutlineWidth:5};a._iconAttributeLocationsVV={a_pos:0,a_vertexOffsetAndTex:1,a_id:2,a_color:3,a_outlineColor:4,a_sizeAndOutlineWidth:5,a_vv:6};a._iconAttributeLocationsHeatmap={a_pos:0,a_vertexOffsetAndTex:1,a_id:2,a_color:3,a_outlineColor:4,a_sizeAndOutlineWidth:5,a_weight:6};a._iconVertexAttributes={geometry:[{name:"a_pos",
count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_vertexOffsetAndTex",count:4,type:5120,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:8,stride:24,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:24,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:20,stride:24,normalized:!1,divisor:0}]};a._iconVertexAttributesWithVV=
{geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:40,normalized:!1,divisor:0},{name:"a_vertexOffsetAndTex",count:4,type:5120,offset:4,stride:40,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:8,stride:40,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:40,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:16,stride:40,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:20,stride:40,normalized:!1,divisor:0},
{name:"a_vv",count:4,type:5126,offset:24,stride:40,normalized:!1,divisor:0}]};a._iconVertexAttributesWithHeatmap={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:28,normalized:!1,divisor:0},{name:"a_vertexOffsetAndTex",count:4,type:5120,offset:4,stride:28,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:8,stride:28,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:28,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:16,stride:28,
normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:20,stride:28,normalized:!1,divisor:0},{name:"a_weight",count:1,type:5126,offset:24,stride:28,normalized:!1,divisor:0}]};a._spritesTextureSize=new Float32Array(2);return a}b(d,c);d.prototype.dispose=function(){};d.prototype.getGeometryType=function(){return a.WGLGeometryType.MARKER};d.prototype.drawGeometry=function(a,b,c,d){d=a.context;var e=a.painter,h=a.rendererInfo,f=a.drawPhase;a=c.indexCount;var l=c.indexFrom,k=c.materialInfo;
c=k.materialKeyInfo;var m=c.heatmap,p=c.hasVV()?this._iconAttributeLocationsVV:this._iconAttributeLocations;if(f=e.materialManager.getProgram(k.materialKey,f,p))d.bindProgram(f),p=this._getVAO(d,b,c.hasVV(),m),d.bindVAO(p),m?(k=this._getIntensityTexture(d,h.heatmapParameters),d.bindTexture(k,1),f.setUniform1i("u_texture",1),this._spritesTextureSize[0]=Math.round(h.heatmapParameters.radius),this._spritesTextureSize[1]=Math.round(h.heatmapParameters.radius)):(m=k.texBindingInfo[0],k=m.pageId,e.textureManager.bindSpritePage(d,
k,m.unit),f.setUniform1i(m.semantic,m.unit),m=e.textureManager.sprites,this._spritesTextureSize[0]=m.getWidth(k)/4,this._spritesTextureSize[1]=m.getHeight(k)/4),e=h.vvMaterialParameters.vvRotationEnabled&&"geographic"===h.vvMaterialParameters.vvRotationType?e.extrudeMatrix:e.extrudeNoRotationMatrix,f.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform),f.setUniformMatrix4fv("u_extrudeMatrix",e),f.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord),f.setUniform2fv("u_mosaicSize",
this._spritesTextureSize),f.setUniform1f("u_opacity",1),c.vvSizeMinMaxValue&&f.setUniform4fv("u_vvSizeMinMaxValue",h.vvSizeMinMaxValue),c.vvSizeScaleStops&&f.setUniform1f("u_vvSizeScaleStopsValue",h.vvSizeScaleStopsValue),c.vvSizeFieldStops&&(f.setUniform1fv("u_vvSizeFieldStopsValues",h.vvSizeFieldStopsValues),f.setUniform1fv("u_vvSizeFieldStopsSizes",h.vvSizeFieldStopsSizes)),c.vvSizeUnitValue&&f.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",h.vvSizeUnitValueToPixelsRatio),c.vvColor&&(f.setUniform1fv("u_vvColorValues",
h.vvColorValues),f.setUniform4fv("u_vvColors",h.vvColors)),c.vvOpacity&&(f.setUniform1fv("u_vvOpacityValues",h.vvOpacityValues),f.setUniform1fv("u_vvOpacities",h.vvOpacities)),c.vvRotation&&f.setUniform1f("u_vvRotationType","geographic"===h.vvMaterialParameters.vvRotationType?0:1),d.drawElements(4,a,5125,4*l),d.bindVAO(null)};d.prototype._getVAO=function(a,b,c,d){if(b.iconGeometry.vao)return b.iconGeometry.vao;var h=b.iconGeometry.vertexBufferMap[f.C_VBO_GEOMETRY],l=b.iconGeometry.indexBuffer;if(!h||
!l)return null;b.iconGeometry.vao=c?new e(a,this._iconAttributeLocationsVV,this._iconVertexAttributesWithVV,{geometry:h},l):d?new e(a,this._iconAttributeLocationsHeatmap,this._iconVertexAttributesWithHeatmap,{geometry:h},l):new e(a,this._iconAttributeLocations,this._iconVertexAttributes,{geometry:h},l);return b.iconGeometry.vao};d.prototype._getIntensityTexture=function(a,b){if(b.intensityKernel&&!b.refreshIntensityKernel)return b.intensityKernel;b.intensityKernel&&(b.intensityKernel.dispose(),b.intensityKernel=
null);for(var c=b.radius,d=b.kernelSize,e=b.blurRadius,h=c*c,f=[],l=-1;++l<d;)f[l]=Math.exp(-Math.pow(l-e,2)/(2*h))/(c/2*Math.sqrt(2*Math.PI));for(var c=[],m,g=0;g<d;g++)for(h=f[g],l=0;l<d;l++)m=g*d+l,e=f[l],c[4*m+0]=h*e,c[4*m+1]=0,c[4*m+2]=0,c[4*m+3]=1;a=new k(a,{target:3553,pixelFormat:6408,internalFormat:a.capabilities.colorBufferFloat.RGBA32F,dataType:5126,samplingMode:a.capabilities.textureFloatLinear?9729:9728,wrapMode:33071,width:d,height:d},new Float32Array(c));b.intensityKernel=a;b.refreshIntensityKernel=
!1;return a};return d}(d.default);g.default=n})},"esri/views/2d/engine/webgl/brushes/WGLGeometryBrushText":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(n,g,b,a,f,d,k){Object.defineProperty(g,"__esModule",{value:!0});n=function(d){function c(){var a=null!==d&&d.apply(this,arguments)||this;a._attributeLocations={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_visible:5};
a._attributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_vv:5,a_visible:6};a._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,
stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};a._vertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:36,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:36,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:36,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:36,normalized:!1,divisor:0},{name:"a_texFontSize",
count:4,type:5120,offset:16,stride:36,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:20,stride:36,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};a._glyphsTextureSize=new Float32Array(2);return a}b(c,d);c.prototype.dispose=function(){};c.prototype.getGeometryType=function(){return a.WGLGeometryType.TEXT};c.prototype.drawGeometry=function(a,b,c,d){d=a.context;var e=a.painter,h=a.rendererInfo,f=c.materialInfo,k=c.indexCount;
c=c.indexFrom;var l=f.materialKeyInfo,m=l.vvSizeMinMaxValue||l.vvSizeScaleStops||l.vvSizeFieldStops||l.vvSizeUnitValue||l.vvColor||l.vvRotation||l.vvOpacity;if(a=e.materialManager.getProgram(f.materialKey,a.drawPhase,m?this._attributeLocationsVV:this._attributeLocations))d.bindProgram(a),m=this._getVAO(d,b,m),d.bindVAO(m),f=f.texBindingInfo[0],e.textureManager.bindGlyphsPage(d,f.pageId,f.unit),a.setUniform1i(f.semantic,f.unit),f=e.textureManager.glyphs,this._glyphsTextureSize[0]=f.width/4,this._glyphsTextureSize[1]=
f.height/4,e=h.vvMaterialParameters.vvRotationEnabled&&"geographic"===h.vvMaterialParameters.vvRotationType?e.extrudeMatrix:e.extrudeNoRotationMatrix,a.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform),a.setUniformMatrix4fv("u_extrudeMatrix",e),a.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord),a.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),a.setUniform1f("u_pixelRatio",1),a.setUniform1f("u_opacity",1),l.vvSizeMinMaxValue&&a.setUniform4fv("u_vvSizeMinMaxValue",
h.vvSizeMinMaxValue),l.vvSizeScaleStops&&a.setUniform1f("u_vvSizeScaleStopsValue",h.vvSizeScaleStopsValue),l.vvSizeFieldStops&&(a.setUniform1fv("u_vvSizeFieldStopsValues",h.vvSizeFieldStopsValues),a.setUniform1fv("u_vvSizeFieldStopsSizes",h.vvSizeFieldStopsSizes)),l.vvSizeUnitValue&&a.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",h.vvSizeUnitValueToPixelsRatio),l.vvColor&&(a.setUniform1fv("u_vvColorValues",h.vvColorValues),a.setUniform4fv("u_vvColors",h.vvColors)),l.vvOpacity&&(a.setUniform1fv("u_vvOpacityValues",
h.vvOpacityValues),a.setUniform1fv("u_vvOpacities",h.vvOpacities)),l.vvRotation&&a.setUniform1f("u_vvRotationType","geographic"===h.vvMaterialParameters.vvRotationType?0:1),d.drawElements(4,k,5125,4*c),d.bindVAO(null)};c.prototype._getVAO=function(a,b,c){if(b.textGeometry.vao)return b.textGeometry.vao;var d=b.textGeometry.vertexBufferMap[f.C_VBO_GEOMETRY],e=b.textGeometry.vertexBufferMap[f.C_VBO_VISIBILITY],h=b.textGeometry.indexBuffer;if(!d||!h)return null;b.textGeometry.vao=c?new k(a,this._attributeLocationsVV,
this._vertexAttributeLayoutVV,{geometry:d,visibility:e},h):new k(a,this._attributeLocations,this._vertexAttributeLayout,{geometry:d,visibility:e},h);return b.textGeometry.vao};return c}(d.default);g.default=n})},"esri/views/2d/engine/webgl/painter/WGLHighlightPainter":function(){define(["require","exports","dojo/has","./highlight/HighlightRenderer","./highlight/HighlightSurfaces"],function(n,g,b,a,f){return function(){function d(){this._hlRenderer=new a;this._hlSurfaces=new f;this._height=this._width=
void 0}d.prototype.dispose=function(){this._hlSurfaces&&this._hlSurfaces.dispose();this._hlRenderer&&this._hlRenderer.dispose();this._boundFBO=null};d.prototype.setup=function(a,b,c){var d=b%4,e=c%4;b+=2>d?-d:4-d;c+=2>e?-e:4-e;this._width=b;this._height=c;this._boundFBO=a.getBoundFramebufferObject();b=Math.round(.75*b);c=Math.round(.75*c);this._hlRenderer.setup(a,b,c);this._hlSurfaces.setup(a,b,c)};d.prototype.setHighlightOptions=function(a){this._hlRenderer.setHighlightOptions({fillColor:a.fillColor,
outlineColor:a.outlineColor,outlineWidth:.75*a.outlineWidth,outerHaloWidth:.75*a.outerHaloWidth,innerHaloWidth:.75*a.innerHaloWidth,outlinePosition:.75*a.outlinePosition})};d.prototype.startMaskDraw=function(a){a.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo);a.setClearColor(0,0,0,0);a.setClearStencil(0);a.clear(a.gl.COLOR_BUFFER_BIT|a.gl.STENCIL_BUFFER_BIT);a.setViewport(0,0,.75*this._width,.75*this._height)};d.prototype.draw=function(a){a.setStencilTestEnabled(!1);a.setBlendingEnabled(!1);a.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo);
a.setClearColor(0,0,0,0);a.clear(a.gl.COLOR_BUFFER_BIT);this._hlRenderer.preBlur(a,this._hlSurfaces.sharedBlur1Tex);b("esri-feature-highlight-debug")?(a.bindFramebuffer(null),a.clear(a.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(a,this._hlSurfaces.sharedBlur2Tex)):(a.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),a.setClearColor(0,0,0,0),a.clear(a.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(a,this._hlSurfaces.sharedBlur2Tex),a.bindFramebuffer(this._boundFBO),a.setBlendingEnabled(!0),a.setViewport(0,
0,this._width,this._height),this._hlRenderer.renderHighlight(a,this._hlSurfaces.sharedBlur1Tex),this._boundFBO=null)};return d}()})},"esri/views/2d/engine/webgl/painter/highlight/HighlightRenderer":function(){define("require exports ../../shaders/hlShaderSnippets ../../../../../webgl/BufferObject ../../../../../webgl/ShaderVariations ../../../../../webgl/Texture ../../../../../webgl/VertexArrayObject".split(" "),function(n,g,b,a,f,d,k){var e=[void 0,void 0,void 0,1],c=[3,4],l=[0,0,0,0,0,0,0,0,0,0,
0,0,1,1,1,1],h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return function(){function m(){this._height=this._width=void 0;this._highlightOptions={fillColor:[.2,.6,.9,.75],outlineColor:[.2,.6,.9,.9],outlinePosition:0,outlineWidth:3.4,innerHaloWidth:2,outerHaloWidth:3.3};this._resources=null}m.prototype.dispose=function(){this._resources&&(this._resources.quadGeometry.dispose(),this._resources.quadVAO.dispose(),this._resources.highlightProgram.dispose(),this._resources.blurProgram.dispose(),this._resources.shadeTex.dispose(),
this._resources=null)};m.prototype.preBlur=function(a,b){a.bindTexture(b,c[0]);a.bindProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",[1,0,1/this._width,0]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",l);a.bindVAO(this._resources.quadVAO);a.drawArrays(5,0,4);a.bindVAO()};m.prototype.finalBlur=function(a,b){a.bindTexture(b,c[0]);a.bindProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",[0,1,
0,1/this._height]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",h);a.bindVAO(this._resources.quadVAO);a.drawArrays(5,0,4);a.bindVAO()};m.prototype.renderHighlight=function(a,b){a.bindTexture(b,c[0]);a.bindTexture(this._resources.shadeTex,c[1]);a.bindProgram(this._resources.highlightProgram);a.bindVAO(this._resources.quadVAO);a.drawArrays(5,0,4);a.bindVAO()};m.prototype._initialize=function(h,l,m){this._width=l;this._height=m;l=new a(h,34962,35044,(new Int8Array([-128,-128,0,
0,127,-128,255,0,-128,127,0,255,127,127,255,255])).buffer);m=new k(h,{a_position:0,a_texcoord:1},{geometry:[{name:"a_position",count:2,type:5120,offset:0,stride:4,normalized:!0},{name:"a_texcoord",count:2,type:5121,offset:2,stride:4,normalized:!0}]},{geometry:l});var p=(new f("hl",["texturedVS","highlightFS"],[],b,h,{a_position:0,a_texcoord:1})).getProgram([]),g=(new f("hl",["texturedVS","blurFS"],[],b,h,{a_position:0,a_texcoord:1})).getProgram([]);p.setUniform1i("u_texture",c[0]);p.setUniform1i("u_shade",
c[1]);p.setUniform4fv("u_sigmas",e);g.setUniform1i("u_texture",c[0]);g.setUniform4fv("u_sigmas",e);h=new d(h,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:256,height:1,samplingMode:9728});this._resources={quadGeometry:l,quadVAO:m,highlightProgram:p,blurProgram:g,shadeTex:h}};m.prototype.setHighlightOptions=function(a){function b(a,b,c){m[0]=(1-c)*a[0]+c*b[0];m[1]=(1-c)*a[1]+c*b[1];m[2]=(1-c)*a[2]+c*b[2];m[3]=(1-c)*a[3]+c*b[3]}this._highlightOptions=a;if(this._resources){var c=a.outlinePosition-
a.outlineWidth/2-a.outerHaloWidth,d=a.outlinePosition-a.outlineWidth/2,h=a.outlinePosition+a.outlineWidth/2,f=a.outlinePosition+a.outlineWidth/2+a.innerHaloWidth,l=Math.sqrt(Math.PI/2)*e[3],k=Math.abs(c)>l?Math.round(10*(Math.abs(c)-l))/10:0,l=Math.abs(f)>l?Math.round(10*(Math.abs(f)-l))/10:0;k&&!l?console.warn("The outer rim of the highlight is "+k+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!k&&
l?console.warn("The inner rim of the highlight is "+l+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):k&&l&&console.warn("The highlight is "+Math.max(k,l)+"px away from the edge of the feature; consider reducing some width values.");for(var k=new Uint8Array(1024),m=[void 0,void 0,void 0,void 0],p=0;256>p;++p)l=c+p/255*(f-c),l<c?(k[4*p+0]=0,k[4*p+1]=0,k[4*p+2]=0,k[4*p+3]=0):l<d?b([0,0,0,0],a.outlineColor,
(l-c)/(d-c)):l<h?(m[0]=a.outlineColor[0],m[1]=a.outlineColor[1],m[2]=a.outlineColor[2],m[3]=a.outlineColor[3]):l<f?b(a.outlineColor,a.fillColor,(l-h)/(f-h)):(k[4*p+0]=a.fillColor[0],k[4*p+1]=a.fillColor[1],k[4*p+2]=a.fillColor[2],k[4*p+3]=a.fillColor[3]),k[4*p+0]=255*m[0]*m[3],k[4*p+1]=255*m[1]*m[3],k[4*p+2]=255*m[2]*m[3],k[4*p+3]=255*m[3];this._resources.highlightProgram.setUniform2fv("u_minMaxDistance",[c,f]);this._resources.shadeTex.updateData(0,0,0,256,1,k)}};m.prototype.setup=function(a,b,c){this._resources?
(this._width=b,this._height=c):(this._initialize(a,b,c),this.setHighlightOptions(this._highlightOptions))};return m}()})},"esri/views/2d/engine/webgl/shaders/hlShaderSnippets":function(){define(["require","exports","dojo/text!./hlShaders.xml","../../../../webgl/ShaderSnippets"],function(n,g,b,a){n=new a;a.parse(b,n);return n})},"esri/views/2d/engine/webgl/painter/highlight/HighlightSurfaces":function(){define(["require","exports","../../../../../webgl/FramebufferObject","../../../../../webgl/Texture"],
function(n,g,b,a){function f(d,f,e){f=new a(d,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:f,height:e,samplingMode:9729});d=b.createWithAttachments(d,f,{colorTarget:0,depthStencilTarget:2});return[f,d]}return function(){function a(){this._height=this._width=void 0;this._resources=null}a.prototype.dispose=function(){this._resources&&(this._resources.sharedBlur1Tex.dispose(),this._resources.sharedBlur1Fbo.dispose(),this._resources.sharedBlur2Tex.dispose(),this._resources.sharedBlur2Fbo.dispose(),
this._resources=null)};a.prototype._initialize=function(a,b,c){this._width=b;this._height=c;var d=f(a,b,c),e=d[0],d=d[1];a=f(a,b,c);this._resources={sharedBlur1Tex:e,sharedBlur1Fbo:d,sharedBlur2Tex:a[0],sharedBlur2Fbo:a[1]}};a.prototype.setup=function(a,b,c){!this._resources||this._width===b&&this._height===c||this.dispose();this._resources||this._initialize(a,b,c)};Object.defineProperty(a.prototype,"sharedBlur1Tex",{get:function(){return this._resources.sharedBlur1Tex},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"sharedBlur1Fbo",{get:function(){return this._resources.sharedBlur1Fbo},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sharedBlur2Tex",{get:function(){return this._resources.sharedBlur2Tex},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sharedBlur2Fbo",{get:function(){return this._resources.sharedBlur2Fbo},enumerable:!0,configurable:!0});return a}()})},"esri/views/webgl/FramebufferObject":function(){define(["require","exports",
"dojo/has","./Texture"],function(n,g,b,a){return function(){function b(d,f,e,c){this._colorAttachment=this._stencilAttachment=this._depthAttachment=this._glName=this._context=null;this._initialized=!1;this._context=d;this._desc={colorTarget:f.colorTarget,depthStencilTarget:f.depthStencilTarget,width:f.width,height:f.height,multisampled:f.multisampled};this._id=b._nextId++;e&&(d=void 0,e instanceof a?(this._colorAttachment=e,d=e.descriptor):(d=e,this._colorAttachment=new a(this._context,d)),0!==this._desc.colorTarget&&
console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),b._validateTextureDimensions(d,this._desc));c&&(this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),e=void 0,c instanceof a?(this._depthStencilTexture=c,e=this._depthStencilTexture.descriptor):(e=c,this._depthStencilTexture=new a(this._context,
e)),b._validateTextureDimensions(e,this._desc))}b.create=function(a,f){return new b(a,f)};b.createWithAttachments=function(a,f,e,c){return new b(a,e,f,c)};Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"colorTexture",{get:function(){return this._colorAttachment instanceof a?this._colorAttachment:null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"width",{get:function(){return this._desc.width},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0});
b.prototype.dispose=function(){this._context&&(this._disposeColorAttachment(),this._disposeDepthStencilAttachments(),this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),this._context=null)};b.prototype.attachColorTexture=function(a){if(a){b._validateTextureDimensions(a.descriptor,this._desc);this._disposeColorAttachment();if(this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,
a.glName,0)}this._colorAttachment=a}};b.prototype.detachColorTexture=function(){var b=void 0;if(this._colorAttachment instanceof a){b=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var f=this._context.gl;this._context.gl.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,null,0)}this._colorAttachment=null}return b};b.prototype.attachDepthStencilTexture=function(a){if(a){var d=a.descriptor;34041!==d.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!");
34042!==d.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8_WEBGL!");this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!");b._validateTextureDimensions(d,this._desc);4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();this._initialized&&(this._context.bindFramebuffer(this),d=this._context.gl,d.framebufferTexture2D(d.FRAMEBUFFER,
d.DEPTH_STENCIL_ATTACHMENT,d.TEXTURE_2D,a.glName,0));this._depthStencilTexture=a}};b.prototype.detachDepthStencilTexture=function(){var a=this._depthStencilTexture;if(a&&this._initialized){this._context.bindFramebuffer(this);var b=this._context.gl;this._context.gl.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return a};b.prototype.copyToTexture=function(a,b,e,c,f,h,m){(0>a||0>b||0>f||0>h)&&console.error("Offsets cannot be negative!");
(0>=e||0>=c)&&console.error("Copy width and height must be greater than zero!");var d=this._desc,l=m.descriptor;3553!==m.descriptor.target&&console.error("Texture target must be TEXTURE_2D!");(a+e>d.width||b+c>d.height||f+e>l.width||h+c>l.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");d=this._context;d.bindTexture(m);d.bindFramebuffer(this);d.gl.copyTexSubImage2D(3553,0,f,h,a,b,e,c)};b.prototype.readPixels=function(a,b,e,c,f,h,m){(0>=
e||0>=c)&&console.error("Copy width and height must be greater than zero!");m||console.error("Target memory is not initialized!");this._context.bindFramebuffer(this);this._context.gl.readPixels(a,b,e,c,f,h,m)};b.prototype.resize=function(d,f){var e=this._desc;if(e.width!==d||e.height!==f)if(this._initialized)e.width=d,e.height=f,this._colorAttachment instanceof a?(c=this._colorAttachment,e=c.descriptor,e.width=d,e.height=f,this._colorAttachment.dispose(),this._colorAttachment=new a(this._context,
e),b._validateTextureDimensions(c.descriptor,this._desc)):this._colorAttachment&&this._disposeColorAttachment(),null!=this._depthStencilTexture?(e=this._depthStencilTexture.descriptor,e.width=d,e.height=f,this._depthStencilTexture.dispose(),this._depthStencilTexture=new a(this._context,e)):(this._depthAttachment||this._stencilAttachment)&&this._disposeDepthStencilAttachments(),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1;else{e.width=d;
e.height=f;if(this._colorAttachment instanceof a){var c=this._colorAttachment;c.resize(d,f)}this._depthStencilTexture&&this._depthStencilTexture.resize(d,f)}};b.prototype.initialize=function(){if(this._initialized)return!1;var b=this._context.gl;this._glName&&b.deleteFramebuffer(this._glName);var f=b.createFramebuffer(),e=this._desc;b.bindFramebuffer(b.FRAMEBUFFER,f);if(!this._colorAttachment)if(0===e.colorTarget)this._colorAttachment=new a(this._context,{target:3553,pixelFormat:6408,dataType:5121,
samplingMode:9728,wrapMode:33071,width:e.width,height:e.height});else{var c=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,c);b.renderbufferStorage(b.RENDERBUFFER,b.RGBA4,e.width,e.height);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.RENDERBUFFER,c);this._colorAttachment=c}this._colorAttachment instanceof a&&b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,this._colorAttachment.glName,0);switch(e.depthStencilTarget){case 1:case 3:c=b.createRenderbuffer();
b.bindRenderbuffer(b.RENDERBUFFER,c);var l=1===e.depthStencilTarget?b.DEPTH_ATTACHMENT:b.DEPTH_STENCIL_ATTACHMENT;b.renderbufferStorage(b.RENDERBUFFER,1===e.depthStencilTarget?b.DEPTH_COMPONENT16:b.DEPTH_STENCIL,e.width,e.height);b.framebufferRenderbuffer(b.FRAMEBUFFER,l,b.RENDERBUFFER,c);this._depthAttachment=c;break;case 2:c=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,c);b.renderbufferStorage(b.RENDERBUFFER,b.STENCIL_INDEX8,e.width,e.height);b.framebufferRenderbuffer(b.FRAMEBUFFER,
b.STENCIL_ATTACHMENT,b.RENDERBUFFER,c);this._stencilAttachment=c;break;case 4:this._depthStencilTexture||(this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),this._depthStencilTexture=new a(this._context,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:e.width,height:e.height})),b.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,
b.TEXTURE_2D,this._depthStencilTexture.glName,0)}b.checkFramebufferStatus(b.FRAMEBUFFER)!==b.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!");this._glName=f;return this._initialized=!0};b.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof a){var b=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var f=this._context.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,null,0)}b.dispose()}else this._colorAttachment instanceof
WebGLRenderbuffer&&(b=this._colorAttachment,f=this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(b));this._colorAttachment=null};b.prototype._disposeDepthStencilAttachments=function(){var a=this._context.gl;if(this._depthAttachment){if(this._initialized){this._context.bindFramebuffer(this);var b=this._context.gl;b.framebufferRenderbuffer(b.FRAMEBUFFER,1===this._desc.depthStencilTarget?
b.DEPTH_ATTACHMENT:b.DEPTH_STENCIL_ATTACHMENT,b.RENDERBUFFER,null)}a.deleteRenderbuffer(this._depthAttachment);this._depthAttachment=null}this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),b=this._context.gl,b.framebufferRenderbuffer(b.FRAMEBUFFER,b.STENCIL_ATTACHMENT,b.RENDERBUFFER,null)),a.deleteRenderbuffer(this._stencilAttachment),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),a=this._context.gl,
a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)};b._validateTextureDimensions=function(a,b){console.assert(0<=a.width&&0<=a.height);3553!==a.target&&console.error("Texture type must be TEXTURE_2D!");void 0!==b.width&&0<=b.width&&void 0!==b.height&&0<=b.height?b.width===a.width&&b.height===a.height||console.error("Color attachment texture must match the framebuffer's!"):(b.width=a.width,b.height=
a.height)};b._nextId=0;return b}()})},"esri/views/support/screenshotUtils":function(){define(["require","exports","dojo/_base/lang"],function(n,g,b){Object.defineProperty(g,"__esModule",{value:!0});g.adjustScreenshotSettings=function(a,f){a=b.mixin({format:"png",quality:100},a||{});var d,k;a.includePadding?(d=f.width,k=f.height):(d=f.width-f.padding.left-f.padding.right,k=f.height-f.padding.top-f.padding.bottom);var e=d/k;void 0!==a.width&&void 0===a.height?a.height=a.width/e:void 0!==a.height&&void 0===
a.width&&(a.width=e*a.height);void 0!==a.height&&(a.height=Math.floor(a.height));void 0!==a.width&&(a.width=Math.floor(a.width));a.area||a.includePadding||(a.area={x:f.padding.left,y:f.padding.top,width:d,height:k});return a};g.resampleHermite=function(a,b,d,k,e,c,l){void 0===l&&(l=!0);var h=b/e;d/=c;for(var f=Math.ceil(h/2),p=Math.ceil(d/2),g=0;g<c;g++)for(var t=0;t<e;t++){for(var q=4*(t+(l?c-g-1:g)*e),u=0,x=0,v=0,n=0,w=0,A=0,B=0,z=(g+.5)*d,C=Math.floor(g*d);C<(g+1)*d;C++)for(var E=Math.abs(z-(C+
.5))/p,D=(t+.5)*h,E=E*E,G=Math.floor(t*h);G<(t+1)*h;G++){var F=Math.abs(D-(G+.5))/f,u=Math.sqrt(E+F*F);-1<=u&&1>=u&&(u=2*u*u*u-3*u*u+1,0<u&&(F=4*(G+C*b),B+=u*a[F+3],v+=u,255>a[F+3]&&(u=u*a[F+3]/250),n+=u*a[F],w+=u*a[F+1],A+=u*a[F+2],x+=u))}k[q]=n/x;k[q+1]=w/x;k[q+2]=A/x;k[q+3]=B/v}}})},"esri/views/webgl/RenderingContext":function(){define("require exports dojo/has ./enums ./InstanceCounter ./capabilities/isWebGL2Context ./capabilities/load".split(" "),function(n,g,b,a,f,d,k){return function(){function b(a,
b){this.gl=null;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,
zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680};this._lineWidth=1;this._clearColor={r:0,g:0,b:0,a:0};this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap={};this.contextVersion=
d.default(a)?"webgl2":"webgl";this.gl=a;a instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint");this._capabilities=k.loadCapabilities(a,b);a=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:a[0],y:a[1],width:a[2],height:a[3]};a=this.capabilities.textureFilterAnisotropic;this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),
maxMaxAnisotropy:a?this.gl.getParameter(a.MAX_TEXTURE_MAX_ANISOTROPY):void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS)};this.enforceState()}Object.defineProperty(b.prototype,"contextAttributes",{get:function(){return this.gl.getContextAttributes()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0});b.prototype.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);
this.unbindBuffer(34963);this._textureUnitMap={};this.gl=null};b.prototype.setBlendingEnabled=function(a){this._blendEnabled!==a&&(!0===a?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=a)};b.prototype.setBlendColor=function(a,b,d,e){if(a!==this._blendColorState.r||b!==this._blendColorState.g||d!==this._blendColorState.b||e!==this._blendColorState.a)this.gl.blendColor(a,b,d,e),this._blendColorState.r=a,this._blendColorState.g=b,this._blendColorState.b=d,this._blendColorState.a=
e};b.prototype.setBlendFunction=function(a,b){if(a!==this._blendFunctionState.srcRGB||b!==this._blendFunctionState.dstRGB)this.gl.blendFunc(a,b),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=a,this._blendFunctionState.dstRGB=b,this._blendFunctionState.dstAlpha=b};b.prototype.setBlendFunctionSeparate=function(a,b,d,e){if(this._blendFunctionState.srcRGB!==a||this._blendFunctionState.srcAlpha!==d||this._blendFunctionState.dstRGB!==b||this._blendFunctionState.dstAlpha!==e)this.gl.blendFuncSeparate(a,
b,d,e),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=d,this._blendFunctionState.dstRGB=b,this._blendFunctionState.dstAlpha=e};b.prototype.setBlendEquation=function(a){this._blendEquationState.mode!==a&&(this.gl.blendEquation(a),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=a)};b.prototype.setBlendEquationSeparate=function(a,b){if(this._blendEquationState.mode!==a||this._blendEquationState.modeAlpha!==b)this.gl.blendEquationSeparate(a,b),this._blendEquationState.mode=
a,this._blendEquationState.modeAlpha=b};b.prototype.setColorMask=function(a,b,d,e){if(this._colorMaskState.r!==a||this._colorMaskState.g!==b||this._colorMaskState.b!==d||this._colorMaskState.a!==e)this.gl.colorMask(a,b,d,e),this._colorMaskState.r=a,this._colorMaskState.g=b,this._colorMaskState.b=d,this._colorMaskState.a=e};b.prototype.setClearColor=function(a,b,d,e){if(this._clearColor.r!==a||this._clearColor.g!==b||this._clearColor.b!==d||this._clearColor.a!==e)this.gl.clearColor(a,b,d,e),this._clearColor.r=
a,this._clearColor.g=b,this._clearColor.b=d,this._clearColor.a=e};b.prototype.setFaceCullingEnabled=function(a){this._polygonCullingEnabled!==a&&(!0===a?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=a)};b.prototype.setPolygonOffsetFillEnabled=function(a){this._polygonOffsetFillEnabled!==a&&(!0===a?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=a)};b.prototype.setPolygonOffset=
function(a,b){if(this._polygonOffset[0]!==a||this._polygonOffset[1]!==b)this._polygonOffset[0]=a,this._polygonOffset[1]=b,this.gl.polygonOffset(a,b)};b.prototype.setCullFace=function(a){this._cullFace!==a&&(this.gl.cullFace(a),this._cullFace=a)};b.prototype.setFrontFace=function(a){this._frontFace!==a&&(this.gl.frontFace(a),this._frontFace=a)};b.prototype.setScissorTestEnabled=function(a){this._scissorTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),
this._scissorTestEnabled=a)};b.prototype.setScissorRect=function(a,b,d,e){if(this._scissorRect.x!==a||this._scissorRect.y!==b||this._scissorRect.width!==d||this._scissorRect.height!==e)this.gl.scissor(a,b,d,e),this._scissorRect.x=a,this._scissorRect.y=b,this._scissorRect.width=d,this._scissorRect.height=e};b.prototype.setDepthTestEnabled=function(a){this._depthTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=a)};b.prototype.setClearDepth=
function(a){this._clearDepth!==a&&(this.gl.clearDepth(a),this._clearDepth=a)};b.prototype.setDepthFunction=function(a){this._depthFunction!==a&&(this.gl.depthFunc(a),this._depthFunction=a)};b.prototype.setDepthWriteEnabled=function(a){this._depthWriteEnabled!==a&&(this.gl.depthMask(a),this._depthWriteEnabled=a)};b.prototype.setDepthRange=function(a,b){if(this._depthRange.zNear!==a||this._depthRange.zFar!==b)this.gl.depthRange(a,b),this._depthRange.zNear=a,this._depthRange.zFar=b};b.prototype.setStencilTestEnabled=
function(a){this._stencilTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=a)};b.prototype.setClearStencil=function(a){a!==this._clearStencil&&(this.gl.clearStencil(a),this._clearStencil=a)};b.prototype.setStencilFunction=function(a,b,d){if(this._stencilFunction.func!==a||this._stencilFunction.ref!==b||this._stencilFunction.mask!==d)this.gl.stencilFunc(a,b,d),this._stencilFunction.face=1032,this._stencilFunction.func=a,this._stencilFunction.ref=
b,this._stencilFunction.mask=d};b.prototype.setStencilFunctionSeparate=function(a,b,d,e){if(this._stencilFunction.face!==a||this._stencilFunction.func!==b||this._stencilFunction.ref!==d||this._stencilFunction.mask!==e)this.gl.stencilFuncSeparate(a,b,d,e),this._stencilFunction.face=a,this._stencilFunction.func=b,this._stencilFunction.ref=d,this._stencilFunction.mask=e};b.prototype.setStencilWriteMask=function(a){this._stencilWriteMask!==a&&(this.gl.stencilMask(a),this._stencilWriteMask=a)};b.prototype.setStencilOp=
function(a,b,d){if(this._stencilOperation.fail!==a||this._stencilOperation.zFail!==b||this._stencilOperation.zPass!==d)this.gl.stencilOp(a,b,d),this._stencilOperation.face=1032,this._stencilOperation.fail=a,this._stencilOperation.zFail=b,this._stencilOperation.zPass=d};b.prototype.setStencilOpSeparate=function(a,b,d,e){if(this._stencilOperation.face!==a||this._stencilOperation.fail!==b||this._stencilOperation.zFail!==d||this._stencilOperation.zPass!==e)this.gl.stencilOpSeparate(a,b,d,e),this._stencilOperation.face=
a,this._stencilOperation.face=a,this._stencilOperation.fail=b,this._stencilOperation.zFail=d,this._stencilOperation.zPass=e};b.prototype.setLineWidth=function(a){var b=this._lineWidth;this._lineWidth!==a&&(this.gl.lineWidth(a),this._lineWidth=a);return b};b.prototype.setActiveTexture=function(b){var c=this._activeTextureUnit;0<=b&&b!==this._activeTextureUnit&&(this.gl.activeTexture(a.BASE_TEXTURE_UNIT+b),this._activeTextureUnit=b);return c};b.prototype.clear=function(a){a&&this.gl.clear(a)};b.prototype.drawArrays=
function(a,b,d){this.gl.drawArrays(a,b,d)};b.prototype.drawElements=function(a,b,d,e){5123===d?this.gl.drawElements(a,b,d,e):5125===d&&this.gl.drawElements(a,b,d,e)};Object.defineProperty(b.prototype,"capabilities",{get:function(){return this._capabilities},enumerable:!0,configurable:!0});b.prototype.setViewport=function(a,b,d,e){var c=this._viewport;if(c.x!==a||c.y!==b||c.width!==d||c.height!==e)c.x=a,c.y=b,c.width=d,c.height=e,this.gl.viewport(a,b,d,e)};b.prototype.getViewport=function(){return{x:this._viewport.x,
y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};b.prototype.bindProgram=function(a){a?this._activeShaderProgram!==a&&(a.initialize(),this.gl.useProgram(a.glName),this._activeShaderProgram=a):(this.gl.useProgram(null),this._activeShaderProgram=null)};b.prototype.bindTexture=function(a,d){void 0===d&&(d=0);-1===b._MAX_TEXTURE_IMAGE_UNITS&&(b._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));(d>=b._MAX_TEXTURE_IMAGE_UNITS||0>d)&&console.error("Input texture unit is out of range of available units!");
var c=this._textureUnitMap[d];this.setActiveTexture(d);null==a||null==a.glName?(null!=c&&(this.gl.bindTexture(c.descriptor.target,null),c.setBoundToUnit(d,!1)),this._textureUnitMap[d]=null):c&&c.id===a.id?a.applyChanges():(this.gl.bindTexture(a.descriptor.target,a.glName),a.setBoundToUnit(d,!0),a.applyChanges(),this._textureUnitMap[d]=a)};b.prototype.bindFramebuffer=function(a){a?this._activeFramebuffer!==a&&(a.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,a.glName),this._activeFramebuffer=
a):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null)};b.prototype.bindBuffer=function(a){a&&(34962===a.bufferType?this._activeVertexBuffer=b._bindBuffer(this.gl,a,a.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=b._bindBuffer(this.gl,a,a.bufferType,this._activeIndexBuffer))};b.prototype.unbindBuffer=function(a){34962===a?this._activeVertexBuffer=b._bindBuffer(this.gl,null,a,this._activeVertexBuffer):this._activeIndexBuffer=b._bindBuffer(this.gl,null,a,
this._activeIndexBuffer)};b.prototype.bindVAO=function(a){a?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===a.id||(a.bind(),this._activeVertexArrayObject=a):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null)};b.prototype.getBoundTexture=function(a){return this._textureUnitMap[a]};b.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer};b.prototype.getBoundVAO=function(){return this._activeVertexArrayObject};
b.prototype.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(var a=0;a<this.parameters.maxTextureImageUnits;a++)this.bindTexture(null,a);this.setBlendingEnabled(!1);this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);
this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};b.prototype.enforceState=
function(){var b=this.gl,d=this._capabilities.vao;d&&d.bindVertexArray(null);for(var e=0;e<this.parameters.maxVertexAttributes;e++)b.disableVertexAttribArray(e);this._activeVertexBuffer?b.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):b.bindBuffer(34962,null);this._activeIndexBuffer?b.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):b.bindBuffer(34963,null);if(d&&this._activeVertexArrayObject){if(d=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),
this._activeVertexArrayObject=null;this.bindVAO(d)}b.bindFramebuffer(b.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null);b.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);b.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);!0===this._blendEnabled?b.enable(this.gl.BLEND):b.disable(this.gl.BLEND);b.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);b.blendFuncSeparate(this._blendFunctionState.srcRGB,
this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);b.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a);b.clearDepth(this._clearDepth);b.clearStencil(this._clearStencil);b.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);b.cullFace(this._cullFace);b.depthFunc(this._depthFunction);b.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?
b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST);b.depthMask(this._depthWriteEnabled);b.frontFace(this._frontFace);b.lineWidth(this._lineWidth);!0===this._polygonCullingEnabled?b.enable(b.CULL_FACE):b.disable(b.CULL_FACE);b.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?b.enable(b.POLYGON_OFFSET_FILL):b.disable(b.POLYGON_OFFSET_FILL);b.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?
b.enable(b.SCISSOR_TEST):b.disable(b.SCISSOR_TEST);b.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);b.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?b.enable(b.STENCIL_TEST):b.disable(b.STENCIL_TEST);b.stencilMask(this._stencilWriteMask);for(d=0;d<this.parameters.maxTextureImageUnits;d++)b.activeTexture(a.BASE_TEXTURE_UNIT+d),b.bindTexture(3553,
null),(e=this._textureUnitMap[d])&&b.bindTexture(e.descriptor.target,e.glName);b.activeTexture(a.BASE_TEXTURE_UNIT+this._activeTextureUnit);b.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};b._bindBuffer=function(a,b,d,e){if(!b)return a.bindBuffer(d,null),null;if(e===b)return e;a.bindBuffer(d,b.glName);return b};b._MAX_TEXTURE_IMAGE_UNITS=-1;return b}()})},"esri/views/webgl/enums":function(){define(["require","exports"],function(n,g){Object.defineProperty(g,
"__esModule",{value:!0});g.BASE_TEXTURE_UNIT=33984})},"esri/views/webgl/InstanceCounter":function(){define(["require","exports"],function(n,g){return function(){function b(){this._instanceCount={textureCount:0,bufferCount:0,vaoCount:0,programCount:0,framebufferCount:0}}b.prototype.incrementCount=function(a){switch(a){case 0:this._instanceCount.textureCount++;break;case 1:this._instanceCount.bufferCount++;break;case 2:this._instanceCount.vaoCount++;break;case 3:this._instanceCount.programCount++;break;
case 4:this._instanceCount.framebufferCount++}};b.prototype.decrementCount=function(a){switch(a){case 0:this._instanceCount.textureCount--;break;case 1:this._instanceCount.bufferCount--;break;case 2:this._instanceCount.vaoCount--;break;case 3:this._instanceCount.programCount--;break;case 4:this._instanceCount.framebufferCount--}};b.prototype.printResourceCount=function(){console.log("Live objects:");console.log("Textures: "+this._instanceCount.textureCount);console.log("Buffers: "+this._instanceCount.bufferCount);
console.log("VAOs: "+this._instanceCount.vaoCount);console.log("Programs: "+this._instanceCount.programCount);console.log("Framebuffers: "+this._instanceCount.framebufferCount)};return b}()})},"esri/views/webgl/capabilities/isWebGL2Context":function(){define(["require","exports"],function(n,g){Object.defineProperty(g,"__esModule",{value:!0});g.default=function(b){return window.WebGL2RenderingContext&&b instanceof window.WebGL2RenderingContext}})},"esri/views/webgl/capabilities/load":function(){define("require exports ./DisjointTimerQuery ./Instancing ./isWebGL2Context ./VertexArrayObjects".split(" "),
function(n,g,b,a,f,d){function k(a,b,d,h,k){if(h&&f.default(a))return!0;if(b[d])return!1;for(b=0;b<k.length;b++)if(a.getExtension(k[b]))return!0;return!1}Object.defineProperty(g,"__esModule",{value:!0});g.loadCapabilities=function(e,c){c=c&&c.disabledExtensions||{};var l=a.load(e,c),h=d.load(e,c),m;m=c.compressedTextureS3TC?null:(m=e.getExtension("WEBGL_compressed_texture_s3tc"))?{COMPRESSED_RGB_S3TC_DXT1:m.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:m.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:m.COMPRESSED_RGBA_S3TC_DXT3_EXT,
COMPRESSED_RGBA_S3TC_DXT5:m.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null;var p;p=c.textureFilterAnisotropic?null:(p=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))?{MAX_TEXTURE_MAX_ANISOTROPY:p.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:p.TEXTURE_MAX_ANISOTROPY_EXT}:null;var g=b.load(e,c),t;if(f.default(e))t=c.colorBufferFloat||!e.getExtension("EXT_color_buffer_float")?null:{R16F:e.R16F,
RG16F:e.RG16F,RGBA16F:e.RGBA16F,R32F:e.R32F,RG32F:e.RG32F,RGBA32F:e.RGBA32F,R11F_G11F_B10F:e.R11F_G11F_B10F};else if(e instanceof WebGLRenderingContext){t=!c.colorBufferFloat&&e.getExtension("EXT_color_buffer_half_float");var q=!c.colorBufferFloat&&e.getExtension("WEBGL_color_buffer_float");t=t||q?{RGBA16F:t?t.RGBA16F_EXT:void 0,RGBA32F:q?q.RGBA32F_EXT:void 0}:null}else t=void 0;q=f.default(e)?{MIN:e.MIN,MAX:e.MAX}:c.blendMinMax?null:(q=e.getExtension("EXT_blend_minmax"))?{MIN:q.MIN_EXT,MAX:q.MAX_EXT}:
null;return{instancing:l,vao:h,compressedTextureS3TC:m,textureFilterAnisotropic:p,disjointTimerQuery:g,colorBufferFloat:t,blendMinMax:q,depthTexture:k(e,c,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]),standardDerivatives:k(e,c,"standardDerivatives",!0,["OES_standard_derivatives"]),shaderTextureLOD:k(e,c,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]),textureFloatLinear:k(e,c,"textureFloatLinear",!1,["OES_texture_float_linear"]),fragDepth:k(e,c,
"fragDepth",!0,["EXT_frag_depth"])}}})},"esri/views/webgl/capabilities/DisjointTimerQuery":function(){define(["require","exports","./isWebGL2Context"],function(n,g,b){Object.defineProperty(g,"__esModule",{value:!0});g.load=function(a,f){if(f.disjointTimerQuery)return null;var d=a.getExtension("EXT_disjoint_timer_query")||a.getExtension("EXT_disjoint_timer_query_webgl2");return d?b.default(a)?{createQuery:function(){return a.createQuery()},resultAvailable:function(b){return a.getQueryParameter(b,a.QUERY_RESULT_AVAILABLE)},
getResult:function(b){return a.getQueryParameter(b,a.QUERY_RESULT)},disjoint:function(){return a.getParameter(d.GPU_DISJOINT_EXT)},beginTimeElapsed:function(b){return a.beginQuery(d.TIME_ELAPSED_EXT,b)},endTimeElapsed:function(){return a.endQuery(d.TIME_ELAPSED_EXT)},createTimestamp:function(a){return d.queryCounterEXT(a,d.TIMESTAMP_EXT)},timestampBits:function(){return a.getQuery(d.TIMESTAMP_EXT,d.QUERY_COUNTER_BITS_EXT)}}:{createQuery:function(){return d.createQueryEXT()},resultAvailable:function(a){return d.getQueryObjectEXT(a,
d.QUERY_RESULT_AVAILABLE_EXT)},getResult:function(a){return d.getQueryObjectEXT(a,d.QUERY_RESULT_EXT)},disjoint:function(){return a.getParameter(d.GPU_DISJOINT_EXT)},beginTimeElapsed:function(a){return d.beginQueryEXT(d.TIME_ELAPSED_EXT,a)},endTimeElapsed:function(){return d.endQueryEXT(d.TIME_ELAPSED_EXT)},createTimestamp:function(a){return d.queryCounterEXT(a,d.TIMESTAMP_EXT)},timestampBits:function(){return d.getQueryEXT(d.TIMESTAMP_EXT,d.QUERY_COUNTER_BITS_EXT)}}:null}})},"esri/views/webgl/capabilities/Instancing":function(){define(["require",
"exports","./isWebGL2Context"],function(n,g,b){Object.defineProperty(g,"__esModule",{value:!0});g.load=function(a,f){return b.default(a)?{drawArraysInstanced:a.drawArraysInstanced.bind(a),drawElementsInstanced:a.drawElementsInstanced.bind(a),vertexAttribDivisor:a.vertexAttribDivisor.bind(a)}:f.angleInstancedArrays?null:(a=a.getExtension("ANGLE_instanced_arrays"))?{drawArraysInstanced:a.drawArraysInstancedANGLE.bind(a),drawElementsInstanced:a.drawElementsInstancedANGLE.bind(a),vertexAttribDivisor:a.vertexAttribDivisorANGLE.bind(a)}:
null}})},"esri/views/webgl/capabilities/VertexArrayObjects":function(){define(["require","exports","./isWebGL2Context"],function(n,g,b){Object.defineProperty(g,"__esModule",{value:!0});g.load=function(a,f){return b.default(a)?{createVertexArray:a.createVertexArray.bind(a),deleteVertexArray:a.deleteVertexArray.bind(a),bindVertexArray:a.bindVertexArray.bind(a)}:f.vao?null:(a=a.getExtension("OES_vertex_array_object")||a.getExtension("MOZ_OES_vertex_array_object")||a.getExtension("WEBKIT_OES_vertex_array_object"))?
{createVertexArray:a.createVertexArrayOES.bind(a),deleteVertexArray:a.deleteVertexArrayOES.bind(a),bindVertexArray:a.bindVertexArrayOES.bind(a)}:null}})},"esri/views/2d/input/MapViewInputManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators ../input/handlers/DoubleClickZoom ../input/handlers/DragPan ../input/handlers/DragRotate ../input/handlers/GamepadNavigation ../input/handlers/KeyPan ../input/handlers/KeyRotate ../input/handlers/KeyZoom ../input/handlers/MouseWheelZoom ../input/handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/ViewEvents ../../input/handlers/PreventContextMenu".split(" "),
function(n,g,b,a,f,d,k,e,c,l,h,m,p,r,t,q,u,x,v,y,w){var A={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},B={zoomIn:["\x3d","+"],zoomOut:["-","_"]},z={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};return function(f){function g(){var a=null!==f&&f.apply(this,arguments)||this;a._handles=new d;return a}b(g,f);g.prototype.initialize=function(){var a=this;this.viewEvents=new y.ViewEvents(this.view);
this._handles.add([k.whenNot(this.view,"ready",function(){return a._disconnect()}),k.when(this.view,"ready",function(){return a._connect()})])};g.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect();this.viewEvents.destroy();this.viewEvents=null};g.prototype._disconnect=function(){this._inputManager&&(this.viewEvents.disconnect(),this._source.destroy(),this._inputManager.destroy(),this._inputManager=this._source=null)};g.prototype._connect=
function(){var a=new x.BrowserEventSource(this.view.surface),b=new v.InputManager(a);b.installHandlers("prevent-context-menu",[new w.PreventContextMenu]);b.installHandlers("navigation",[new u.PinchRotateAndZoom(this.view),new m.GamepadNavigation(this.view),new q.MouseWheelZoom(this.view),new c.DoubleClickZoom(this.view),new l.DragPan(this.view,"primary"),new p.KeyPan(this.view,A),new t.KeyZoom(this.view,B),new r.KeyRotate(this.view,z),new h.DragRotate(this.view,"secondary"),new c.DoubleClickZoom(this.view,
["Ctrl"])]);this.viewEvents.connect(b);this._source=a;this._inputManager=b};a([e.property()],g.prototype,"view",void 0);return g=a([e.subclass("esri.views.2d.input.MapViewInputManager")],g)}(e.declared(f))})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(n,g,b,a,f){Object.defineProperty(g,"__esModule",{value:!0});n=function(a){function d(b,c){var d=
a.call(this,!0)||this;d.view=b;d.registerIncoming("double-click",c,function(a){return d._handleDoubleClick(a,c)});return d}b(d,a);d.prototype._handleDoubleClick=function(a,b){f.eventMatchesPointerAction(a.data,"primary")&&(a.stopPropagation(),b?this.view.navigation.zoomOut([a.data.x,a.data.y]):this.view.navigation.zoomIn([a.data.x,a.data.y]))};return d}(a.InputHandler);g.DoubleClickZoom=n})},"esri/views/input/InputHandler":function(){define(["require","exports","../../core/Logger","./EventMatch"],
function(n,g,b,a){Object.defineProperty(g,"__esModule",{value:!0});var f=b.getLogger("esri.views.input.InputHandler");n=function(){function b(a){this._manager=null;this._incoming={};this._outgoing={};this._outgoingEventTypes=this._incomingEventTypes=this._incomingEventMatches=null;this._hasSideEffects=a}Object.defineProperty(b.prototype,"incomingEventMatches",{get:function(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(var a in this._incoming)for(var b=0,d=this._incoming[a];b<
d.length;b++)this._incomingEventMatches.push(d[b].match)}return this._incomingEventMatches},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"incomingEventTypes",{get:function(){this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(function(a){return a.eventType}));return this._incomingEventTypes},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"outgoingEventTypes",{get:function(){this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing));
return this._outgoingEventTypes},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hasSideEffects",{get:function(){return this._hasSideEffects},enumerable:!0,configurable:!0});b.prototype.onInstall=function(a){var b=this;this._manager?f.error("This InputHandler has already been registered with an InputManager"):(a.setEventCallback(function(a){return b._handleEvent(a)}),a.setUninstallCallback(function(){return b._onUninstall()}),this._manager=a)};b.prototype.onUninstall=function(){};
b.prototype.registerIncoming=function(b,e,h){var c=this;"function"===typeof e?(h=e,e=[]):e=e||[];b="string"===typeof b?new a.EventMatch(b,e):b;var f=function(){c._incomingEventTypes=null;c._incomingEventMatches=null};e=function(a){var b=c._incoming[a.match.eventType];b&&(a=b.indexOf(a),b.splice(a,1),f(),c._manager&&c._manager.updateDependencies())};h=new d(b,h,{onPause:e,onRemove:e,onResume:function(a){var b=c._incoming[a.match.eventType];b&&-1===b.indexOf(a)&&(b.push(a),f(),c._manager&&c._manager.updateDependencies())}});
e=this._incoming[b.eventType];e||(e=[],this._incoming[b.eventType]=e);e.push(h);f();this._manager&&this._manager.updateDependencies();return h};b.prototype.registerOutgoing=function(a){var b=this;if(this._outgoing[a])throw Error("There is already a callback registered for this outgoing InputEvent: "+a);var c=new k(a,{onEmit:function(a,c,d,e){b._manager.emit(a.eventType,c,d,e)},onRemove:function(a){delete b._outgoing[a.eventType];b._manager.updateDependencies()}});this._outgoing[a]=c;this._outgoingEventTypes=
null;this._manager&&this._manager.updateDependencies();return c};b.prototype.startCapturingPointer=function(a){this._manager.setPointerCapture(a,!0)};b.prototype.stopCapturingPointer=function(a){this._manager.setPointerCapture(a,!1)};b.prototype._onUninstall=function(){this._manager?(this.onUninstall(),this._manager=null):f.error("This InputHandler is not registered with an InputManager")};b.prototype._handleEvent=function(a){var b=this._incoming[a.type];if(b)for(var c=0;c<b.length;c++){var d=b[c];
if(d.match.matches(a)&&(d.callback(a),a.shouldStopPropagation()))break}};return b}();g.InputHandler=n;var d=function(){function a(a,b,d){this.match=a;this._callback=b;this._handler=d}a.prototype.pause=function(){this._handler.onPause(this)};a.prototype.resume=function(){this._handler.onResume(this)};a.prototype.remove=function(){this._handler.onRemove(this)};Object.defineProperty(a.prototype,"callback",{get:function(){return this._callback},enumerable:!0,configurable:!0});return a}(),k=function(){function a(a,
b){this.eventType=a;this._removed=!1;this._handler=b}a.prototype.emit=function(a,b,d){if(!this._removed)this._handler.onEmit(this,a,b,d)};a.prototype.remove=function(){this._removed=!0;this._handler.onRemove(this)};return a}()})},"esri/views/input/EventMatch":function(){define(["require","exports"],function(n,g){Object.defineProperty(g,"__esModule",{value:!0});n=function(){function b(a,b){void 0===b&&(b=[]);this.eventType=a;this.keyModifiers=b}b.prototype.matches=function(a){if(a.type!==this.eventType)return!1;
if(0===this.keyModifiers.length)return!0;a=a.modifiers;for(var b=0,d=this.keyModifiers;b<d.length;b++)if(!a.has(d[b]))return!1;return!0};return b}();g.EventMatch=n})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(n,g){Object.defineProperty(g,"__esModule",{value:!0});g.eventMatchesPointerAction=function(b,a){switch(a){case "primary":return"touch"===b.pointerType||0===b.button;case "secondary":return"touch"!==b.pointerType&&2===b.button;case "tertiary":return"touch"!==
b.pointerType&&1===b.button}};g.eventMatchesMousePointerAction=function(b,a){if("touch"===b.pointerType)return!1;switch(a){case "primary":return 0===b.button;case "secondary":return 2===b.button;case "tertiary":return 1===b.button}}})},"esri/views/2d/input/handlers/DragPan":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(n,g,b,a,f,d){Object.defineProperty(g,
"__esModule",{value:!0});n=function(f){function e(b,e,h){var c=f.call(this,!0)||this;c.view=b;c.pointerAction=e;c.registerIncoming("drag",h,function(a){return c._handleDrag(a)});c.registerIncoming("pointer-down",function(a){return c.stopMomentumNavigation()});var l=c.view.navigation;c.dragEventSeparator=new a.DragEventSeparator({start:function(a,b){l.pan.begin(c.view,b.data);b.stopPropagation()},update:function(a,b){l.pan.update(c.view,b.data);b.stopPropagation()},end:function(a,b){l.pan.end(c.view,
b.data);b.stopPropagation()},condition:function(a,b){return 1===a&&d.eventMatchesPointerAction(b.data,c.pointerAction)}});return c}b(e,f);e.prototype._handleDrag=function(a){var b=this.view.navigation;b.pinch.zoomMomentum||b.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(a)};e.prototype.stopMomentumNavigation=function(){this.view.navigation.pan.stopMomentumNavigation()};return e}(f.InputHandler);g.DragPan=n})},"esri/views/input/DragEventSeparator":function(){define(["require",
"exports"],function(n,g){Object.defineProperty(g,"__esModule",{value:!0});n=function(){function b(a){this.callbacks=a;this.currentCount=0;this.callbacks.condition||(this.callbacks.condition=function(){return!0})}b.prototype.handle=function(a){var b=a.data,d=b.pointers.size;switch(b.action){case "start":this.currentCount=d;this.emitStart(a);break;case "added":this.emitEnd(this.previousEvent);this.currentCount=d;this.emitStart(a);break;case "update":this.emitUpdate(a);break;case "removed":this.startEvent&&
this.emitEnd(this.previousEvent);this.currentCount=d;this.emitStart(a);break;case "end":this.emitEnd(a),this.currentCount=0}this.previousEvent=a};b.prototype.emitStart=function(a){this.startEvent=a;this.callbacks.condition(this.currentCount,a)&&this.callbacks.start(this.currentCount,a,this.startEvent)};b.prototype.emitUpdate=function(a){this.callbacks.condition(this.currentCount,a)&&this.callbacks.update(this.currentCount,a,this.startEvent)};b.prototype.emitEnd=function(a){this.callbacks.condition(this.currentCount,
a)&&this.callbacks.end(this.currentCount,a,this.startEvent);this.startEvent=null};return b}();g.DragEventSeparator=n})},"esri/views/2d/input/handlers/DragRotate":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(n,g,b,a,f,d){Object.defineProperty(g,"__esModule",{value:!0});n=function(f){function e(b,e,h){var c=f.call(this,!0)||this;c.view=b;c.pointerAction=e;
var l=c.view.navigation;c.dragEventSeparator=new a.DragEventSeparator({start:function(a,b){l.rotate.begin(c.view,b.data);b.stopPropagation()},update:function(a,b){l.rotate.update(c.view,b.data);b.stopPropagation()},end:function(a,b){l.rotate.end(c.view,b.data);b.stopPropagation()},condition:function(a,b){return 1===a&&d.eventMatchesPointerAction(b.data,c.pointerAction)}});c.registerIncoming("drag",h,function(a){return c.dragEventSeparator.handle(a)});return c}b(e,f);return e}(f.InputHandler);g.DragRotate=
n})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/scheduling ../../../2d/viewpointUtils ../../../input/InputHandler".split(" "),function(n,g,b,a,f,d){Object.defineProperty(g,"__esModule",{value:!0});var k={translation:[0,0,0],heading:0,tilt:0};n=function(d){function c(b){var c=d.call(this,!0)||this;c.view=b;c._updateFrameTask=null;c.view.gamepad.enabled&&(c._updateFrameTask=a.addFrameTask({update:function(){c._processGamepad()}}));
c.view.gamepad.watch("enabled",function(b){b?c._updateFrameTask=a.addFrameTask({update:function(){c._processGamepad()}}):(c._updateFrameTask.remove(),c._updateFrameTask=null)});return c}b(c,d);c.prototype._processGamepad=function(){this.view.gamepad.updateTransformation(k);if(0!==k.translation[0]||0!==k.translation[1]||0!==k.translation[2]||0!==k.heading||0!==k.tilt){var a=this.view.viewpoint.clone();f.translateBy(a,a,[5*k.translation[0],5*-k.translation[1]]);var b=this.view.size;f.scaleAndRotateBy(a,
a,1+.01*k.translation[2],this.view.constraints.rotationEnabled?1*-k.heading:0,[b[0]/2,b[1]],b);a=this.view.constraints.constrain(a,this.view.viewpoint);this.view.viewpoint=a}};return c}(d.InputHandler);g.GamepadNavigation=n})},"esri/views/2d/input/handlers/KeyPan":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(n,g,b,a){Object.defineProperty(g,"__esModule",{value:!0});n=function(a){function d(b,d,c){var e=a.call(this,!0)||this;
e.view=b;e.keys=d;e._keyMap=(f={},f[d.left]="left",f[d.right]="right",f[d.up]="up",f[d.down]="down",f);e.registerIncoming("key-down",c,function(a){return e._handleKeyDown(a)});e.registerIncoming("key-up",c,function(a){return e._handleKeyUp(a)});return e;var f}b(d,a);d.prototype._handleKeyDown=function(a){a.data.repeat||this._handleKey(a,!0)};d.prototype._handleKeyUp=function(a){this._handleKey(a,!1)};d.prototype._handleKey=function(a,b){var c=this._keyMap[a.data.key];if(null!=c){if(b)switch(c){case "left":this.view.navigation.continousPanLeft();
break;case "right":this.view.navigation.continousPanRight();break;case "up":this.view.navigation.continousPanUp();break;case "down":this.view.navigation.continousPanDown()}else this.view.navigation.stop();a.stopPropagation()}};return d}(a.InputHandler);g.KeyPan=n})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(n,g,b,a){Object.defineProperty(g,"__esModule",{value:!0});n=function(a){function d(b,
d,c){var e=a.call(this,!0)||this;e.view=b;e.keys=d;e._keyToDirection=(f={},f[d.clockwiseOption1]="clockwise",f[d.clockwiseOption2]="clockwise",f[d.counterClockwiseOption1]="counterClockwise",f[d.counterClockwiseOption2]="counterClockwise",f[d.resetOption1]="reset",f[d.resetOption2]="reset",f);e.registerIncoming("key-down",c,function(a){return e._handleKeyDown(a)});e.registerIncoming("key-up",c,function(a){return e._handleKeyUp(a)});return e;var f}b(d,a);d.prototype._handleKeyDown=function(a){a.data.repeat||
this._handleKey(a,!0)};d.prototype._handleKeyUp=function(a){this._handleKey(a,!1)};d.prototype._handleKey=function(a,b){var c=a.modifiers;0<c.size&&!c.has("Shift")||!this.view.constraints.rotationEnabled||!(c=this._keyToDirection[a.data.key])||(b?"clockwise"===c?this.view.navigation.continousRotateClockwise():"counterClockwise"===c?this.view.navigation.continousRotateCounterclockwise():this.view.navigation.resetRotation():this.view.navigation.stop(),a.stopPropagation())};return d}(a.InputHandler);
g.KeyRotate=n})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(n,g,b,a){Object.defineProperty(g,"__esModule",{value:!0});var f;(function(a){a[a.IN=0]="IN";a[a.OUT=1]="OUT"})(f||(f={}));n=function(a){function d(b,c,d){var e=a.call(this,!0)||this;e.view=b;e.keys=c;e._keysToZoomAction={};e.registerIncoming("key-down",d,function(a){return e._handleKeyDown(a)});c.zoomIn.forEach(function(a){return e._keysToZoomAction[a]=
f.IN});c.zoomOut.forEach(function(a){return e._keysToZoomAction[a]=f.OUT});return e}b(d,a);d.prototype._handleKeyDown=function(a){this._handleKey(a)};d.prototype._handleKey=function(a){var b=a.modifiers;0<b.size&&!b.has("Shift")||(b=this._keysToZoomAction[a.data.key],b===f.IN?(this.view.navigation.zoomIn(),a.stopPropagation()):b===f.OUT&&(this.view.navigation.zoomOut(),a.stopPropagation()))};return d}(a.InputHandler);g.KeyZoom=n})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(n,g,b,a){Object.defineProperty(g,"__esModule",{value:!0});n=function(a){function d(b,d){var c=a.call(this,!0)||this;c.view=b;c._canZoom=!0;c.registerIncoming("mouse-wheel",d,function(a){return c._handleMouseWheel(a)});return c}b(d,a);d.prototype._handleMouseWheel=function(a){var b=this;if(this._canZoom){var c=this.view.navigation,d=a.data;if(d=c.zoom(1/Math.pow(.6,1/60*d.deltaY),[d.x,d.y]))this._canZoom=!1,
d.always(function(){b._canZoom=!0;c.end()});a.stopPropagation()}};return d}(a.InputHandler);g.MouseWheelZoom=n})},"esri/views/2d/input/handlers/PinchAction":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/DragEventSeparator","../../../input/InputHandler"],function(n,g,b,a,f){Object.defineProperty(g,"__esModule",{value:!0});n=function(d){function f(b){var c=d.call(this,!0)||this;c.view=b;c.registerIncoming("drag",function(a){return c._handleDrag(a)});
c.registerIncoming("pointer-down",function(a){return c.stopMomentumNavigation()});var e=c.view.navigation;c.dragEventSeparator=new a.DragEventSeparator({start:function(a,b){e.pinch.begin(c.view,b.data);b.stopPropagation()},update:function(a,b){e.pinch.update(c.view,b.data);b.stopPropagation()},end:function(a,b){e.pinch.end(c.view,b.data);b.stopPropagation()},condition:function(a){return 2<=a}});return c}b(f,d);f.prototype._handleDrag=function(a){this.dragEventSeparator.handle(a)};f.prototype.stopMomentumNavigation=
function(){this.view.navigation.pinch.stopMomentumNavigation()};return f}(f.InputHandler);g.PinchRotateAndZoom=n})},"esri/views/input/BrowserEventSource":function(){define(["require","exports","dojo/sniff","../../core/libs/pep/pep","./keys"],function(n,g,b,a,f){Object.defineProperty(g,"__esModule",{value:!0});var d=b("trident"),k=b("edge"),e=b("chrome"),c=b("ff"),l=b("safari");n=function(){function b(b){this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._element=b;
a.applyLocal(b);b.getAttribute("tabindex")||b.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._initialCssTouchAction=b.style.touchAction;b.style.touchAction=
"none";this._element.addEventListener("keydown",this._preventAltKeyDefault)}b.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(b){a._element.releasePointerCapture(b)});this._activePointerCaptures=null;this._element.style.touchAction=this._initialCssTouchAction;this._element.removeEventListener("keydown",this._preventAltKeyDefault)};Object.defineProperty(b.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"activeEvents",{set:function(a){var b=this,c;for(c in this._active)a&&a.has(c)||(this._element.removeEventListener(h[c],this._active[c]),delete this._active[c]);a&&a.forEach(function(a){if(!b._active[a]&&h[a]){var c=(b._eventHandlers[a]||b._handleDefault).bind(b,a);b._element.addEventListener(h[a],c);b._active[a]=c}})},enumerable:!0,configurable:!0});b.prototype.setPointerCapture=function(a,b){b?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):
(this._element.releasePointerCapture(a.pointerId),this._activePointerCaptures.delete(a.pointerId))};b.prototype._updateNormalizedPointerLikeEvent=function(a,b){var c=this._element.getBoundingClientRect();b.x=a.clientX-Math.round(c.left);b.y=a.clientY-Math.round(c.top);return b};b.prototype._handleKey=function(a,b){var c=f.eventKey(b);c&&"key-up"===a&&this._keyDownState.delete(c);b={native:b,key:c,repeat:c&&this._keyDownState.has(c)};c&&"key-down"===a&&this._keyDownState.add(b.key);this._callback(a,
b)};b.prototype._handlePointer=function(a,b){b=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons});this._callback(a,b)};b.prototype._handlePointerPreventDefault=function(a,b){var c=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons});b.preventDefault();this._callback(a,c)};b.prototype._handleMouseWheel=function(a,b){b.preventDefault();var f=b.deltaY;switch(b.deltaMode){case 0:if(d||
k)f=f/document.documentElement.clientHeight*600;break;case 1:f*=30;break;case 2:f*=900}d||k?f*=.7:e||l?f*=.6:c&&(f*=1.375);var h=Math.abs(f);100<h&&(f=f/h*200/(1+Math.exp(-.02*(h-100))));b=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,deltaY:f});this._callback(a,b)};b.prototype._handlePointerCaptureLost=function(a,b){this._activePointerCaptures.delete(b.pointerId);this._handleDefault(a,b)};b.prototype._handleDefault=function(a,b){var c={native:b};b.preventDefault();this._callback(a,c)};
b.prototype._preventAltKeyDefault=function(a){"Alt"===a.key&&a.preventDefault()};return b}();g.BrowserEventSource=n;var h={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave"}})},"esri/core/libs/pep/pep":function(){define(function(){function n(a,
b){b=b||Object.create(null);var c=document.createEvent("Event");c.initEvent(a,b.bubbles||!1,b.cancelable||!1);a=2;for(var d;a<l.length;a++)d=l[a],c[d]=b[d]||h[a];c.buttons=b.buttons||0;a=0;a=b.pressure?b.pressure:c.buttons?.5:0;c.x=c.clientX;c.y=c.clientY;c.pointerId=b.pointerId||0;c.width=b.width||0;c.height=b.height||0;c.pressure=a;c.tiltX=b.tiltX||0;c.tiltY=b.tiltY||0;c.pointerType=b.pointerType||"";c.hwTimestamp=b.hwTimestamp||0;c.isPrimary=b.isPrimary||!1;return c}function g(){this.array=[];
this.size=0}function b(a,b,c,d){this.addCallback=a.bind(d);this.removeCallback=b.bind(d);this.changedCallback=c.bind(d);B&&(this.observer=new B(this.mutationWatcher.bind(this)))}function a(a){return"body /shadow-deep/ "+f(a)}function f(a){return'[touch-action\x3d"'+a+'"]'}function d(a){return"{ -ms-touch-action: "+a+"; touch-action: "+a+"; touch-action-delay: none; }"}function k(){if(D){C.forEach(function(b){String(b)===b?(E+=f(b)+d(b)+"\n",G&&(E+=a(b)+d(b)+"\n")):(E+=b.selectors.map(f)+d(b.rule)+
"\n",G&&(E+=b.selectors.map(a)+d(b.rule)+"\n"))});var b=document.createElement("style");b.textContent=E;document.head.appendChild(b)}}function e(a){if(!u.pointermap.has(a))throw a=Error("InvalidPointerId"),a.name="InvalidPointerId",a;}function c(a){if(!a.ownerDocument.contains(a))throw a=Error("InvalidStateError"),a.name="InvalidStateError",a;}var l="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),h=[!1,!1,
null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],m=window.Map&&window.Map.prototype.forEach?Map:g;g.prototype={set:function(a,b){if(void 0===b)return this.delete(a);this.has(a)||this.size++;this.array[a]=b},has:function(a){return void 0!==this.array[a]},delete:function(a){this.has(a)&&(delete this.array[a],this.size--)},get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(c,d){a.call(b,c,d,this)},this)}};var p="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),
r=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],t={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},q="undefined"!==typeof SVGElementInstance,u={pointermap:new m,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var c=b.events;c&&(c.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b=
this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.register.call(d,a)},unregister:function(a){for(var b=this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.unregister.call(d,a)},contains:function(a,b){try{return a.contains(b)}catch(P){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=
!1;this.fireEvent("pointerenter",a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&
this.eventMap[b])&&b(a);a._handledByPE=!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){this.captureInfo[b.pointerId]&&(b.relatedTarget=null);a=new n(a,b);b.preventDefault&&(a.preventDefault=b.preventDefault);a._target=a._target||b.target;return a},
fireEvent:function(a,b){a=this.makeEvent(a,b);return this.dispatchEvent(a)},cloneEvent:function(a){for(var b=Object.create(null),c,d=0;d<p.length;d++)c=p[d],b[c]=a[c]||r[d],q&&("target"===c||"relatedTarget"===c)&&b[c]instanceof SVGElementInstance&&(b[c]=b[c].correspondingUseElement);a.preventDefault&&(b.preventDefault=function(){a.preventDefault()});return b},getTarget:function(a){var b=this.captureInfo[a.pointerId];if(!b)return a._target;if(a._target===b||!(a.type in t))return b},propagate:function(a,
b,c){for(var d=a.target,e=[];!d.contains(a.relatedTarget)&&d!==document;)e.push(d),d=d.parentNode;c&&e.reverse();e.forEach(function(c){a.target=c;b.call(this,a)},this)},setCapture:function(a,b){this.captureInfo[a]&&this.releaseCapture(a);this.captureInfo[a]=b;var c=new n("gotpointercapture");c.pointerId=a;this.implicitRelease=this.releaseCapture.bind(this,a);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);c._target=b;this.asyncDispatchEvent(c)},
releaseCapture:function(a){var b=this.captureInfo[a];if(b){var c=new n("lostpointercapture");c.pointerId=a;this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);c._target=b;this.asyncDispatchEvent(c)}},dispatchEvent:function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,a))}};u.boundHandler=u.eventHandler.bind(u);
var x={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&!!a.elementFromPoint},targetingShadow:function(a){a=this.shadow(a);if(this.canTarget(a))return a},olderShadow:function(a){var b=a.olderShadowRoot;!b&&(a=a.querySelector("shadow"))&&(b=a.olderShadowRoot);return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,c){if(a){var d=a.elementFromPoint(b,c),e;for(e=this.targetingShadow(d);e;){if(a=
e.elementFromPoint(b,c))return d=this.targetingShadow(a),this.searchRoot(d,b,c)||a;e=this.olderShadow(e)}return d}},owner:function(a){for(;a.parentNode;)a=a.parentNode;a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document);return a},findTarget:function(a){var b=a.clientX,c=a.clientY;a=this.owner(a.target);a.elementFromPoint(b,c)||(a=document);return this.searchRoot(a,b,c)}},v=Array.prototype.forEach.call.bind(Array.prototype.forEach),y=Array.prototype.map.call.bind(Array.prototype.map),
w=Array.prototype.slice.call.bind(Array.prototype.slice),A=Array.prototype.filter.call.bind(Array.prototype.filter),B=window.MutationObserver||window.WebKitMutationObserver,z={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};b.prototype={watchSubtree:function(a){this.observer&&x.canTarget(a)&&this.observer.observe(a,z)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(a)},
installNewSubtree:function(a){v(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(w(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},
isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=y(a,this.findElements,this);b.push(A(a,this.isElement));return b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,this)):"attributes"===a.type&&this.elementChanged(a.target,
a.oldValue)}};var C=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],E="",D=window.PointerEvent||window.MSPointerEvent,G=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,F=u.pointermap,L=[1,4,2,8,16],J=!1;try{J=1===(new MouseEvent("test",{buttons:1})).buttons}catch(S){}var H={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){u.listen(a,this.events)},unregister:function(a){u.unlisten(a,
this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b=this.lastTouches,c=a.clientX;a=a.clientY;for(var d=0,e=b.length,f;d<e&&(f=b[d]);d++){var h=Math.abs(a-f.y);if(25>=Math.abs(c-f.x)&&25>=h)return!0}},prepareEvent:function(a){var b=u.cloneEvent(a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=this.POINTER_ID;b.isPrimary=!0;b.pointerType=this.POINTER_TYPE;return b},prepareButtonsForMove:function(a,b){var c=F.get(this.POINTER_ID);a.buttons=0!==
b.which&&c?c.buttons:0;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=F.get(this.POINTER_ID),c=this.prepareEvent(a);J||(c.buttons=L[c.button],b&&(c.buttons|=b.buttons),a.buttons=c.buttons);F.set(this.POINTER_ID,a);b&&0!==b.buttons?u.move(c):u.down(c)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);J||this.prepareButtonsForMove(b,a);b.button=-1;F.set(this.POINTER_ID,a);u.move(b)}},mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=
F.get(this.POINTER_ID),c=this.prepareEvent(a);if(!J){var d=L[c.button];c.buttons=b?b.buttons&~d:0;a.buttons=c.buttons}F.set(this.POINTER_ID,a);c.buttons&=~L[c.button];0===c.buttons?u.up(c):u.move(c)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);J||this.prepareButtonsForMove(b,a);b.button=-1;F.set(this.POINTER_ID,a);u.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);J||this.prepareButtonsForMove(b,a);b.button=
-1;u.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);u.cancel(a);this.deactivateMouse()},deactivateMouse:function(){F.delete(this.POINTER_ID)}},U=u.captureInfo,V=x.findTarget.bind(x),Y=x.allShadows.bind(x),O=u.pointermap,Z,Q={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){Z.enableOnSubtree(a)},unregister:function(a){},elementAdded:function(a){var b=a.getAttribute("touch-action"),c=this.touchActionToScrollType(b);c&&(a._scrollType=c,u.listen(a,this.events),
Y(a).forEach(function(a){a._scrollType=c;u.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0;u.unlisten(a,this.events);Y(a).forEach(function(a){a._scrollType=void 0;u.unlisten(a,this.events)},this)},elementChanged:function(a,b){var c=a.getAttribute("touch-action"),d=this.touchActionToScrollType(c);b=this.touchActionToScrollType(b);d&&b?(a._scrollType=d,Y(a).forEach(function(a){a._scrollType=d},this)):b?this.elementRemoved(a):d&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",
XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=this.scrollTypes;if("none"===a)return"none";if(a===b.XSCROLLER)return"X";if(a===b.YSCROLLER)return"Y";if(b.SCROLLER.exec(a))return"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(0===O.size||1===O.size&&O.has(1))this.firstTouch=a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=
!1,this.cancelResetClickCount()},removePrimaryPointer:function(a){a.isPrimary&&(this.firstXY=this.firstTouch=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;if("touchstart"===a||"touchmove"===a)b=1;return b},touchToPointer:function(a){var b=this.currentTouchEvent,
c=u.cloneEvent(a),d=c.pointerId=a.identifier+2;c.target=U[d]||V(c);c.bubbles=!0;c.cancelable=!0;c.detail=this.clickCount;c.button=0;c.buttons=this.typeToButtons(b.type);c.width=a.radiusX||a.webkitRadiusX||0;c.height=a.radiusY||a.webkitRadiusY||0;c.pressure=a.force||a.webkitForce||.5;c.isPrimary=this.isPrimaryTouch(a);c.pointerType=this.POINTER_TYPE;c.altKey=b.altKey;c.ctrlKey=b.ctrlKey;c.metaKey=b.metaKey;c.shiftKey=b.shiftKey;var e=this;c.preventDefault=function(){e.scrolling=!1;e.firstXY=null;b.preventDefault()};
return c},processTouches:function(a,b){var c=a.changedTouches;this.currentTouchEvent=a;a=0;for(var d;a<c.length;a++)d=c[a],b.call(this,this.touchToPointer(d))},shouldScroll:function(a){if(this.firstXY){var b;b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var c="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b])>=Math.abs(a["client"+c]-this.firstXY[c])}this.firstXY=null;return b}},findTouch:function(a,b){for(var c=0,d=a.length,e;c<d&&(e=a[c]);c++)if(e.identifier===
b)return!0},vacuumTouches:function(a){var b=a.touches;if(O.size>=b.length){var c=[];O.forEach(function(a,d){1===d||this.findTouch(b,d-2)||c.push(a.out)},this);c.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){O.set(a.pointerId,{target:a.target,out:a,outTarget:a.target});u.enterOver(a);u.down(a)},touchmove:function(a){this.scrolling||
(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=O.get(a.pointerId);if(b){var c=b.out,d=b.outTarget;u.move(a);c&&d!==a.target&&(c.relatedTarget=a.target,a.relatedTarget=d,c.target=d,a.target?(u.leaveOut(c),u.enterOver(a)):(a.target=d,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=a.target}},touchend:function(a){this.dedupSynthMouse(a);this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||
(u.up(a),u.leaveOut(a));this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){u.cancel(a);u.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){O.delete(a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=H.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},b.push(a),b=function(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}.bind(null,b,a),setTimeout(b,2500))}};Z=new b(Q.elementAdded,
Q.elementRemoved,Q.elementChanged,Q);var aa=u.pointermap,ca=window.MSPointerEvent&&"number"===typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,ba={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){u.listen(a,this.events)},unregister:function(a){u.unlisten(a,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;ca&&(b=u.cloneEvent(a),b.pointerType=
this.POINTER_TYPES[a.pointerType]);return b},cleanup:function(a){aa.delete(a)},MSPointerDown:function(a){aa.set(a.pointerId,a);a=this.prepareEvent(a);u.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);u.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);u.up(b);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);u.leaveOut(a)},MSPointerOver:function(a){a=this.prepareEvent(a);u.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);u.cancel(b);
this.cleanup(a.pointerId)},MSLostPointerCapture:function(a){a=u.makeEvent("lostpointercapture",a);u.dispatchEvent(a)},MSGotPointerCapture:function(a){a=u.makeEvent("gotpointercapture",a);u.dispatchEvent(a)}},W,X;window.navigator.msPointerEnabled?(W=function(a){e(a);c(this);0!==u.pointermap.get(a).buttons&&this.msSetPointerCapture(a)},X=function(a){e(a);this.msReleasePointerCapture(a)}):(W=function(a){e(a);c(this);0!==u.pointermap.get(a).buttons&&u.setCapture(a,this)},X=function(a){e(a);u.releaseCapture(a,
this)});var da=window.PointerEvent||window.MSPointerEvent;return{dispatcher:u,Installer:b,PointerEvent:n,PointerMap:m,targetFinding:x,applyGlobal:function(){k();window.PointerEvent||(window.PointerEvent=n,window.navigator.msPointerEnabled?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,enumerable:!0}),u.registerSource("ms",ba)):(u.registerSource("mouse",H),void 0!==window.ontouchstart&&u.registerSource("touch",Q)),u.register(document));window.Element&&
!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:W},releasePointerCapture:{value:X}})},applyLocal:function(a){da||(window.PointerEvent||(window.navigator.msPointerEnabled?u.registerSource("ms",ba):(u.registerSource("mouse",H),void 0!==window.ontouchstart&&u.registerSource("touch",Q)),u.register(document)),window.Element&&!Element.prototype.setPointerCapture&&(a.setPointerCapture=W.bind(a),a.releasePointerCapture=X.bind(a)),a.getAttribute("touch-action")||
a.setAttribute("touch-action","none"))}}})},"esri/views/input/keys":function(){define(["require","exports","../../core/sniff"],function(n,g,b){Object.defineProperty(g,"__esModule",{value:!0});g.primaryKey=b("mac")?"Meta":"Ctrl";var a={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(n=48;58>n;n++)a[n]=String.fromCharCode(n);for(n=1;25>n;n++)a[111+n]="F"+n;for(n=65;91>n;n++)a[n]=
[String.fromCharCode(n+32),String.fromCharCode(n)];var f={Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"};g.eventKey=function(b){if(void 0!==b.key)return f[b.key]||b.key;var d=a[b.keyCode];return Array.isArray(d)?b.shiftKey?d[1]:d[0]:d};g.isSystemModifier=function(a){switch(a){case "Ctrl":case "Alt":case "Shift":case "Meta":case "Primary":return!0}}})},"esri/views/input/InputManager":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Logger ../../core/now ../../core/accessorSupport/decorators ./keys ./recognizers ./handlers/LatestPointerType".split(" "),
function(n,g,b,a,f,d,k,e,c,l,h){Object.defineProperty(g,"__esModule",{value:!0});var m=d.getLogger("esri.views.input.InputManager");n=function(d){function f(a,b){a=d.call(this)||this;a._pointerCaptures=new Map;a._nameToGroup={};a._handlers=[];a._currentPropagation=null;a._sourceEvents=new Set;a._keyModifiers=new Set;a._activeKeyModifiers=new Set;a.primaryKey=c.primaryKey;a.latestPointerType="mouse";a._installRecognizers();return a}b(f,d);f.prototype.normalizeCtorArgs=function(a,b){this._browserEvents=
a;this._browserEvents.onEventReceived=this._onEventReceived.bind(this);this._recognizers=b;this._recognizers||(this._recognizers=l.defaults.map(function(a){return new a}));return{}};f.prototype.destroy=function(){for(var a=0,b=Object.keys(this._nameToGroup);a<b.length;a++)this.uninstallHandlers(b[a])};f.prototype.installHandlers=function(a,b){var c=this;if(this._nameToGroup[a])m.error("There is already an InputHandler group registered under the name `"+a+"`");else if(0===b.length)m.error("Can't register a group of zero handlers");
else{var d={name:a,handlers:b.map(function(a,b){return{handler:a,active:!0,removed:!1,priorityIndex:0,eventCallback:null,uninstallCallback:null}})};this._nameToGroup[a]=d;a=function(a){var b=d.handlers[a];e._handlers.push(b);b.handler.onInstall({updateDependencies:function(){c.updateDependencies()},emit:function(a,d,e,f){c._emitInputEvent(b.priorityIndex,a,d,e,f)},setPointerCapture:function(a,e){c._setPointerCapture(d,b,a,e)},setEventCallback:function(a){b.eventCallback=a},setUninstallCallback:function(a){b.uninstallCallback=
a}})};var e=this;for(b=d.handlers.length-1;0<=b;b--)a(b);this.updateDependencies()}};f.prototype.uninstallHandlers=function(a){var b=this._nameToGroup[a];b?(b.handlers.forEach(function(a){a.removed=!0;a.uninstallCallback()}),delete this._nameToGroup[a],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):m.error("There is no InputHandler group registered under the name `"+a+"`")};f.prototype.hasHandlers=function(a){return void 0!==
this._nameToGroup[a]};f.prototype.updateDependencies=function(){var a=new Set,b=new Set;this._handlersPriority=[];for(var d=this._handlers.length-1;0<=d;d--){var e=this._handlers[d];e.priorityIndex=d;this._handlersPriority.push(e)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(d=this._handlersPriority.length-1;0<=d;d--){e=this._handlersPriority[d];e.priorityIndex=d;var f=e.handler.hasSideEffects;if(!f)for(var h=0,l=e.handler.outgoingEventTypes;h<l.length;h++)if(a.has(l[h])){f=
!0;break}if(f)for(h=0,l=e.handler.incomingEventMatches;h<l.length;h++){var k=l[h];a.add(k.eventType);for(var m=0,k=k.keyModifiers;m<k.length;m++){var g=k[m];c.isSystemModifier(g)||b.add(g)}}e.active=f}this._sourceEvents=a;this._keyModifiers=b;0<this._pointerCaptures.size&&this._sourceEvents.add("pointer-capture-lost");0<this._keyModifiers.size&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up"));this._browserEvents&&(this._browserEvents.activeEvents=this._sourceEvents)};f.prototype._setLatestPointerType=
function(a){this._set("latestPointerType",a)};f.prototype._onEventReceived=function(a,b){"pointer-capture-lost"===a&&this._pointerCaptures.delete(b.native.pointerId);this._updateKeyModifiers(a,b);this._emitInputEventFromSource(a,b,b.native.timestamp)};f.prototype._updateKeyModifiers=function(a,b){var c=this;if(b){var d=!1,e=function(){if(!d){var a=new Set;c._activeKeyModifiers.forEach(function(b){a.add(b)});c._activeKeyModifiers=a;d=!0}},f=function(a,b){b&&!c._activeKeyModifiers.has(a)?(e(),c._activeKeyModifiers.add(a)):
!b&&c._activeKeyModifiers.has(a)&&(e(),c._activeKeyModifiers.delete(a))};if("key-down"===a||"key-up"===a){var h=b.key;this._keyModifiers.has(h)&&f(h,"key-down"===a)}a=b.native;f("Alt",!(!a||!a.altKey));f("Ctrl",!(!a||!a.ctrlKey));f("Shift",!(!a||!a.shiftKey));f("Meta",!(!a||!a.metaKey));f("Primary",this._activeKeyModifiers.has(this.primaryKey))}};f.prototype._installRecognizers=function(){var a=this;this._latestPointerTypeHandler=new h.LatestPointerType(function(b){return a._setLatestPointerType(b)});
0<this._recognizers.length&&this.installHandlers("default",this._recognizers);this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler])};f.prototype._setPointerCapture=function(a,b,c,d){a=a.name+"-"+b.priorityIndex;b=this._pointerCaptures.get(c.pointerId)||new Set;this._pointerCaptures.set(c.pointerId,b);d?(b.add(a),1===b.size&&this._browserEvents&&this._browserEvents.setPointerCapture(c,!0)):b.has(a)&&(b.delete(a),0===b.size&&(this._pointerCaptures.delete(c.pointerId),this._browserEvents&&
this._browserEvents.setPointerCapture(c,!1)))};f.prototype._garbageCollectRemovedHandlers=function(){this._handlers=this._handlers.filter(function(a){return!a.removed});this.updateDependencies()};f.prototype._emitInputEventFromSource=function(a,b,c){this._emitInputEvent(0,a,b,c)};f.prototype._emitInputEvent=function(a,b,c,d,e){d=void 0!==d?d:this._currentPropagation?this._currentPropagation.timestamp:k();b=new p(b,c,d,e||this._activeKeyModifiers);this._currentPropagation?this._currentPropagation.addedEvents.push(b):
this._doNewPropagation(a,b)};f.prototype._doNewPropagation=function(a,b){for(a=this._currentPropagation={events:[b],addedEvents:[],currentHandler:this._handlersPriority[a],needsHandlerGarbageCollect:!1,timestamp:b.timestamp};a.currentHandler;){if(a.currentHandler.removed)a.needsHandlerGarbageCollect=!0;else{b=a.events;var c=[];a.addedEvents=[];for(var d=0;d<b.length;d++){var e=b[d];a.currentHandler.active&&a.currentHandler.eventCallback(e);e.shouldStopPropagation()||c.push(e)}a.events=c.concat(a.addedEvents)}a.currentHandler=
this._handlersPriority[a.currentHandler.priorityIndex+1]}a.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers();this._currentPropagation=null};f.prototype._compareHandlerPriority=function(a,b){if(a.handler.hasSideEffects!==b.handler.hasSideEffects)return a.handler.hasSideEffects?1:-1;for(var c=0,d=a.handler.incomingEventMatches;c<d.length;c++)for(var e=d[c],f=function(a){if(e.eventType!==a.eventType)return"continue";var b=e.keyModifiers.filter(function(b){return-1!==a.keyModifiers.indexOf(b)});
if(b.length===e.keyModifiers.length!==(b.length===a.keyModifiers.length))return{value:e.keyModifiers.length>a.keyModifiers.length?-1:1}},h=0,l=b.handler.incomingEventMatches;h<l.length;h++){var k=f(l[h]);if("object"===typeof k)return k.value}return a.priorityIndex>b.priorityIndex?-1:1};f.prototype._sortHandlersPriority=function(a){for(var b=[],c=0;c<a.length;c++){for(var d=a[c],e=0;e<b.length&&0<=this._compareHandlerPriority(d,b[e]);)e++;b.splice(e,0,d)}return b};a([e.property({readOnly:!0})],f.prototype,
"latestPointerType",void 0);return f=a([e.subclass("esri.views.input.InputManager")],f)}(e.declared(f));g.InputManager=n;var p=function(){function a(a,b,c,d){this.type=a;this.data=b;this.timestamp=c;this.modifiers=d;this._stopPropagation=!1}a.prototype.stopPropagation=function(){this._stopPropagation=!0};a.prototype.shouldStopPropagation=function(){return this._stopPropagation};return a}()})},"esri/views/input/recognizers":function(){define("require exports ./recognizers/Drag ./recognizers/PointerClickHoldAndDrag ./recognizers/SingleAndDoubleClick ./recognizers/VerticalTwoFingerDrag".split(" "),
function(n,g,b,a,f,d){Object.defineProperty(g,"__esModule",{value:!0});g.defaults=[a.PointerClickHoldAndDrag,f.SingleAndDoubleClick,b.Drag,d.VerticalTwoFingerDrag]})},"esri/views/input/recognizers/Drag":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler","./support"],function(n,g,b,a,f){function d(a){var b=[];a.forEach(function(a){b.push(a.event)});return f.fitCircleLSQ(b)}function k(a){var b=d(a),e=0;a.forEach(function(a){for(var d=c(a,b),d=d-a.lastAngle;d>
Math.PI;)d-=2*Math.PI;for(;d<-Math.PI;)d+=2*Math.PI;d=a.lastAngle+d;a.lastAngle=d;e+=d-a.initialAngle});e/=a.size||1;return{angle:e,radius:b.radius,center:b.center}}function e(a){var b=new Map;a.forEach(function(a,c){return b.set(c,a.event)});return b}function c(a,b){a=a.event;return Math.atan2(a.y-b.center.y,a.x-b.center.x)}Object.defineProperty(g,"__esModule",{value:!0});n=function(a){function f(){var b=a.call(this,!1)||this;b.startStateModifiers=new Set;b.activePointerMap=new Map;b.isDragging=
!1;b.drag=b.registerOutgoing("drag");b.registerIncoming("pointer-drag",b.handlePointerDrag.bind(b));b.registerIncoming("pointer-up",b.handlePointerUpAndPointerLost.bind(b));b.registerIncoming("pointer-capture-lost",b.handlePointerUpAndPointerLost.bind(b));return b}b(f,a);f.prototype.createPayload=function(a,b,c,d){return{action:a,pointerType:this.pointerType,button:this.mouseButton,buttons:b.buttons,timestamp:d,pointers:e(this.activePointerMap),pointer:b,angle:c.angle,radius:c.radius,center:c.center}};
f.prototype.addPointer=function(a){var b=a.native.pointerId,e=k(this.activePointerMap).angle;a={event:a,initialAngle:0,lastAngle:0};this.activePointerMap.set(b,a);b=c(a,d(this.activePointerMap));a.initialAngle=b;a.lastAngle=b;this.updatePointerAngles(e)};f.prototype.updatePointer=function(a){if(!a||null!=a.x||null!=a.y){var b=this.activePointerMap.get(a.native.pointerId);b?b.event=a:this.addPointer(a)}};f.prototype.removePointer=function(a){var b=k(this.activePointerMap).angle;this.activePointerMap.delete(a);
this.updatePointerAngles(b)};f.prototype.updatePointerAngles=function(a){var b=k(this.activePointerMap);this.activePointerMap.forEach(function(d){d.initialAngle=c(d,b)-a;d.lastAngle=c(d,b)-a})};f.prototype.emitEvent=function(a,b,c){var d=k(this.activePointerMap);this.drag.emit(this.createPayload(a,b,d,c),void 0,this.startStateModifiers)};f.prototype.handlePointerUpAndPointerLost=function(a){var b=a.data.native.pointerId,c=a.timestamp;this.activePointerMap.get(b)&&(1===this.activePointerMap.size?(this.updatePointer(a.data),
this.emitEvent("end",a.data,c),this.isDragging=!1,this.removePointer(b)):(this.removePointer(b),this.emitEvent("removed",a.data,a.timestamp)))};f.prototype.handlePointerDrag=function(a){var b=a.data,c=b.currentEvent,d=a.timestamp;switch(b.action){case "start":case "update":this.isDragging?this.activePointerMap.has(c.native.pointerId)?(this.updatePointer(c),this.emitEvent("update",c,d)):(this.addPointer(c),this.emitEvent("added",c,d)):(this.updatePointer(c),this.pointerType=a.data.startEvent.pointerType,
this.mouseButton=a.data.startEvent.button,this.startStateModifiers=a.modifiers,this.isDragging=!0,this.emitEvent("start",c,d))}};return f}(a.InputHandler);g.Drag=n;(function(a){a[a.Left=0]="Left";a[a.Middle=1]="Middle";a[a.Right=2]="Right";a[a.Back=3]="Back";a[a.Forward=4]="Forward";a[a.Undefined=-1]="Undefined"})(g.Button||(g.Button={}))})},"esri/views/input/recognizers/support":function(){define(["require","exports"],function(n,g){Object.defineProperty(g,"__esModule",{value:!0});g.manhattanDistance=
function(b,a){return Math.abs(a.x-b.x)+Math.abs(a.y-b.y)};g.euclideanDistance=function(b,a){var f=a.x-b.x;b=a.y-b.y;return Math.sqrt(f*f+b*b)};g.fitCircleLSQ=function(b,a){a?(a.radius=0,a.center.x=0,a.center.y=0):a={radius:0,center:{x:0,y:0}};if(0===b.length)return a;if(1===b.length)return a.center.x=b[0].x,a.center.y=b[0].y,a;if(2===b.length){var f=b[0];b=b[1];var d=[b.x-f.x,b.y-f.y],k=d[0],d=d[1];a.radius=Math.sqrt(k*k+d*d)/2;a.center.x=(f.x+b.x)/2;a.center.y=(f.y+b.y)/2;return a}for(var e=0,c=
0,l=0;l<b.length;l++)e+=b[l].x,c+=b[l].y;for(var e=e/b.length,c=c/b.length,h=b.map(function(a){return a.x-e}),m=b.map(function(a){return a.y-c}),g=f=a=0,r=0,t=k=0,l=d=0;l<h.length;l++){var q=h[l],u=m[l],n=q*q,v=u*u;a+=n;f+=v;g+=q*u;r+=n*q;k+=v*u;t+=q*v;d+=u*n}l=a;h=g;m=f;r=.5*(r+t);k=.5*(k+d);d=l*m-g*h;t=(r*m-k*h)/d;k=(l*k-g*r)/d;return{radius:Math.sqrt(t*t+k*k+(a+f)/b.length),center:{x:t+e,y:k+c}}}})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define(["require","exports","../../../core/tsSupport/extendsHelper",
"../InputHandler","./support"],function(n,g,b,a,f){Object.defineProperty(g,"__esModule",{value:!0});g.DefaultParameters={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilTouchDrag:6,holdDelay:500};n=function(a){function d(b,c,d,f){void 0===b&&(b=g.DefaultParameters.maximumClickDelay);void 0===c&&(c=g.DefaultParameters.movementUntilMouseDrag);void 0===d&&(d=g.DefaultParameters.movementUntilTouchDrag);void 0===f&&(f=g.DefaultParameters.holdDelay);var e=a.call(this,!1)||this;e.maximumClickDelay=
b;e.movementUntilMouseDrag=c;e.movementUntilTouchDrag=d;e.holdDelay=f;e._pointerState=new Map;e._pointerDrag=e.registerOutgoing("pointer-drag");e._immediateClick=e.registerOutgoing("immediate-click");e._pointerHold=e.registerOutgoing("hold");e.registerIncoming("pointer-down",e._handlePointerDown.bind(e));e.registerIncoming("pointer-up",e._handlePointerUpOrLost.bind(e));e.registerIncoming("pointer-capture-lost",e._handlePointerUpOrLost.bind(e));e._moveHandle=e.registerIncoming("pointer-move",e._handlePointerMove.bind(e));
e._moveHandle.pause();return e}b(d,a);d.prototype.onUninstall=function(){this._pointerState.forEach(function(a){0!==a.holdTimeout&&(clearTimeout(a.holdTimeout),a.holdTimeout=0)});a.prototype.onUninstall.call(this)};d.prototype._handlePointerDown=function(a){var b=this,d=a.data,e=d.native.pointerId,f=0;0===this._pointerState.size&&(f=setTimeout(function(){var c=b._pointerState.get(e);c&&(c.isDragging||(b._pointerHold.emit(c.previousEvent,void 0,a.modifiers),c.holdEmitted=!0),c.holdTimeout=0)},this.holdDelay));
f={startEvent:d,previousEvent:d,startTimestamp:a.timestamp,isDragging:!1,downButton:d.native.button,holdTimeout:f,modifiers:new Set};this._pointerState.set(e,f);this.startCapturingPointer(d.native);this._moveHandle.resume();1<this._pointerState.size&&this.startDragging(a)};d.prototype._createPointerDragData=function(a,b,d){return{action:a,startEvent:b.startEvent,previousEvent:b.previousEvent,currentEvent:d}};d.prototype._handlePointerMove=function(a){var b=a.data,d=this._pointerState.get(b.native.pointerId);
d&&(d.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",d,b),void 0,d.modifiers):f.euclideanDistance(b,d.startEvent)>("touch"===b.native.pointerType?this.movementUntilTouchDrag:this.movementUntilMouseDrag)&&this.startDragging(a),d.previousEvent=b)};d.prototype.startDragging=function(a){var b=this,d=a.data,e=d.native.pointerId;this._pointerState.forEach(function(c){0!==c.holdTimeout&&(clearTimeout(c.holdTimeout),c.holdTimeout=0);c.isDragging||(c.modifiers=a.modifiers,c.isDragging=
!0,e===c.startEvent.native.pointerId?b._pointerDrag.emit(b._createPointerDragData("start",c,d)):b._pointerDrag.emit(b._createPointerDragData("start",c,c.previousEvent),a.timestamp))})};d.prototype._handlePointerUpOrLost=function(a){var b=a.data,d=b.native.pointerId,e=this._pointerState.get(d);e&&(0!==e.holdTimeout&&clearTimeout(e.holdTimeout),e.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",e,b),void 0,e.modifiers):e.downButton===b.native.button&&a.timestamp-e.startTimestamp<=
this.maximumClickDelay&&!e.holdEmitted&&this._immediateClick.emit(b),this._pointerState.delete(d),this.stopCapturingPointer(b.native),0===this._pointerState.size&&this._moveHandle.pause())};return d}(a.InputHandler);g.PointerClickHoldAndDrag=n})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler","./support"],function(n,g,b,a,f){Object.defineProperty(g,"__esModule",{value:!0});g.DefaultParameters={maximumDoubleClickDelay:250,
maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};n=function(a){function d(b,c,d,f){void 0===b&&(b=g.DefaultParameters.maximumDoubleClickDelay);void 0===c&&(c=g.DefaultParameters.maximumDoubleClickDistance);void 0===d&&(d=g.DefaultParameters.maximumDoubleTouchDelay);void 0===f&&(f=g.DefaultParameters.maximumDoubleTouchDistance);var e=a.call(this,!1)||this;e.maximumDoubleClickDelay=b;e.maximumDoubleClickDistance=c;e.maximumDoubleTouchDelay=d;e.maximumDoubleTouchDistance=
f;e._pointerState=new Map;e._click=e.registerOutgoing("click");e._doubleClick=e.registerOutgoing("double-click");e.registerIncoming("immediate-click",e._handleImmediateClick.bind(e));return e}b(d,a);d.prototype.onUninstall=function(){this._pointerState.forEach(function(a){0!==a.doubleClickTimeout&&(clearTimeout(a.doubleClickTimeout),a.doubleClickTimeout=0)})};d.prototype._pointerId=function(a){a=a.native;return"mouse"===a.pointerType?a.pointerId+":"+a.button:""+a.pointerType};d.prototype._handleImmediateClick=
function(a){var b=a.data,d=this._pointerId(b),e=this._pointerState.get(d);if(e){clearTimeout(e.doubleClickTimeout);e.doubleClickTimeout=0;var k="touch"===b.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;f.manhattanDistance(e.event.data,b)>k?(this._doubleClickTimeoutExceeded(d),this._startClick(a)):(this._doubleClick.emit(b,void 0,e.event.modifiers),this._pointerState.delete(d))}else this._startClick(a)};d.prototype._startClick=function(a){var b=this,d=this._pointerId(a.data);
this._pointerState.set(d,{event:a,doubleClickTimeout:setTimeout(function(){return b._doubleClickTimeoutExceeded(d)},"touch"===a.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)})};d.prototype._doubleClickTimeoutExceeded=function(a){var b=this._pointerState.get(a);this._click.emit(b.event.data,void 0,b.event.modifiers);b.doubleClickTimeout=0;this._pointerState.delete(a)};return d}(a.InputHandler);g.SingleAndDoubleClick=n})},"esri/views/input/recognizers/VerticalTwoFingerDrag":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","../DragEventSeparator","../InputHandler"],function(n,g,b,a,f){Object.defineProperty(g,"__esModule",{value:!0});n=function(d){function f(b,c){void 0===b&&(b=20);void 0===c&&(c=40);var e=d.call(this,!1)||this;e._threshold=b;e._maxDelta=c;e.state="ready";e.emittedArtificalEnd2=!1;e._vertical=e.registerOutgoing("vertical-two-finger-drag");e._artificalDrag=e.registerOutgoing("drag");e.dragEventSeparator=new a.DragEventSeparator({start:function(a,b){return e.observeStart(a,
b)},update:function(a,b,c){return e.observeUpdate(a,b,c)},end:function(a,b){return e.observeEnd(a,b)}});e.registerIncoming("drag",function(a){return e.dragEventSeparator.handle(a)});return e}b(f,d);Object.defineProperty(f.prototype,"failed",{get:function(){return"failed"===this.state},enumerable:!0,configurable:!0});f.prototype.observeStart=function(a,b){1===a&&this.emittedArtificalEnd2&&(this.emittedArtificalEnd2=!1,this._artificalDrag.emit({action:"start",button:b.data.button,buttons:b.data.buttons,
pointerType:b.data.pointerType,timestamp:b.data.timestamp,pointers:b.data.pointers,pointer:b.data.pointer,angle:b.data.angle,radius:b.data.radius,center:b.data.center,artifical:!0}),b.stopPropagation());this.state=2===a?"ready":"failed"};f.prototype.observeUpdate=function(a,b,d){"failed"!==this.state&&2===a&&("active"===this.state?(this._vertical.emit({delta:b.data.center.y-this._thresholdReachedCenter.y,action:"update"}),b.stopPropagation()):this.checkMovementWithinLimits(b.data,d.data)?this.checkVerticalThresholdReached(b.data,
d.data)&&(this.state="active",this.emittedArtificalEnd2=!0,this._thresholdReachedCenter=b.data.center,this._artificalDrag.emit({action:"end",button:b.data.button,buttons:b.data.buttons,pointerType:b.data.pointerType,timestamp:b.data.timestamp,pointers:b.data.pointers,pointer:b.data.pointer,angle:b.data.angle,radius:b.data.radius,center:b.data.center,artifical:!0}),this._vertical.emit({delta:b.data.center.y-this._thresholdReachedCenter.y,action:"begin"}),b.stopPropagation()):this.state="failed")};
f.prototype.observeEnd=function(a,b){"active"===this.state&&(this._vertical.emit({delta:b.data.center.y-this._thresholdReachedCenter.y,action:"end"}),this.state="ready",b.stopPropagation())};f.prototype.checkMovementWithinLimits=function(a,b){var c=-Infinity,d=Infinity,e=-Infinity,f=Infinity;b.pointers.forEach(function(a){c=Math.max(c,a.x);d=Math.min(d,a.x);e=Math.max(e,a.y);f=Math.min(f,a.y)});var k=-Infinity,g=Infinity,q=-Infinity,u=Infinity;a.pointers.forEach(function(a){k=Math.max(k,a.x);g=Math.min(g,
a.x);q=Math.max(q,a.y);u=Math.min(u,a.y)});return Math.abs(a.center.x-b.center.x)<this._threshold&&Math.abs(k-g-(c-d))<=this._maxDelta&&Math.abs(q-u-(e-f))<=this._maxDelta};f.prototype.checkVerticalThresholdReached=function(a,b){var c=Math.abs(a.center.y-b.center.y);a.pointers.forEach(function(a,d){d=b.pointers.get(d);c=Math.min(c,Math.abs(a.y-d.y))});return c>=this._threshold};return f}(f.InputHandler);g.VerticalTwoFingerDrag=n})},"esri/views/input/handlers/LatestPointerType":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(n,g,b,a){Object.defineProperty(g,"__esModule",{value:!0});n=function(a){function d(b){var d=a.call(this,!0)||this;d._onChange=b;d._value="mouse";d.registerIncoming("pointer-down",function(a){d._setValue("touch"===a.data.native.pointerType?"touch":"mouse")});d._moveHandler=d.registerIncoming("pointer-move",function(a){d._setValue("touch"===a.data.native.pointerType?"touch":"mouse")});d._moveHandler.pause();return d}b(d,a);
d.prototype._setValue=function(a){a!==this._value&&("touch"===a?this._moveHandler.resume():this._moveHandler.pause(),this._value=a,this._onChange(a))};return d}(a.InputHandler);g.LatestPointerType=n})},"esri/views/input/ViewEvents":function(){define("require exports ../../core/tsSupport/extendsHelper ../../geometry/ScreenPoint ../3d/support/mathUtils ./InputHandler".split(" "),function(n,g,b,a,f,d){function k(a){return!!c[a]}function e(a){for(var b=0;b<a.length;b++)if(!k(a[b]))return!1;return!0}Object.defineProperty(g,
"__esModule",{value:!0});var c={click:!0,"double-click":!0,"immediate-click":!0,hold:!0,drag:!0,"key-down":!0,"key-up":!0,"pointer-down":!0,"pointer-move":!0,"pointer-up":!0,"pointer-drag":!0,"mouse-wheel":!0,"pointer-enter":!0,"pointer-leave":!0},l;(function(a){a[a.Left=0]="Left";a[a.Middle=1]="Middle";a[a.Right=2]="Right"})(l||(l={}));n=function(){function a(a){this.handlers=new Map;this.counter=0;this.handlerCounts=new Map;this.view=a;this.inputManager=null}a.prototype.connect=function(a){var b=
this;a&&this.disconnect();this.inputManager=a;this.handlers.forEach(function(a,c){return b.inputManager.installHandlers(c,[a])})};a.prototype.disconnect=function(){var a=this;this.inputManager&&this.handlers.forEach(function(b,c){return a.inputManager.uninstallHandlers(c)});this.inputManager=null};a.prototype.destroy=function(){this.disconnect();this.handlers.clear();this.view=null};a.prototype.register=function(a,b,c){var d=this,f=Array.isArray(a)?a:a.split(",");if(!e(f))return f.some(k)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),
null;a=Array.isArray(b)?b:[];c=Array.isArray(b)?c:b;var l=this.createUniqueGroupName();b=new h(this.view,f,a,c);this.handlers.set(l,b);for(c=0;c<f.length;c++){a=f[c];var g=this.handlerCounts.get(a)||0;this.handlerCounts.set(a,g+1)}this.inputManager&&this.inputManager.installHandlers(l,[b]);return{remove:function(){return d.removeHandler(l,f)}}};a.prototype.hasHandler=function(a){return!!this.handlerCounts.get(a)};a.prototype.removeHandler=function(a,b){if(this.handlers.has(a)){this.handlers.delete(a);
for(var c=0;c<b.length;c++){var d=b[c],e=this.handlerCounts.get(d);void 0===e?console.error("Trying to remove handler for event that has no handlers registered: ",d):1===e?this.handlerCounts.delete(d):this.handlerCounts.set(d,e-1)}}this.inputManager&&this.inputManager.uninstallHandlers(a)};a.prototype.createUniqueGroupName=function(){this.counter+=1;return"viewEvents_"+this.counter};return a}();g.ViewEvents=n;var h=function(c){function d(a,b,d,e){var f=c.call(this,!0)||this;f.view=a;for(a=0;a<b.length;a++)switch(b[a]){case "click":f.registerIncoming("click",
d,function(a){return e(f.wrapClick(a))});break;case "double-click":f.registerIncoming("double-click",d,function(a){return e(f.wrapDoubleClick(a))});break;case "immediate-click":f.registerIncoming("immediate-click",d,function(a){return e(f.wrapImmediateClick(a))});break;case "hold":f.registerIncoming("hold",d,function(a){return e(f.wrapHold(a))});break;case "drag":f.registerIncoming("drag",d,function(a){return e(f.wrapDrag(a))});break;case "key-down":f.registerIncoming("key-down",d,function(a){return e(f.wrapKeyDown(a))});
break;case "key-up":f.registerIncoming("key-up",d,function(a){return e(f.wrapKeyUp(a))});break;case "pointer-down":f.registerIncoming("pointer-down",d,function(a){return e(f.wrapPointer(a,"pointer-down"))});break;case "pointer-move":f.registerIncoming("pointer-move",d,function(a){return e(f.wrapPointer(a,"pointer-move"))});break;case "pointer-up":f.registerIncoming("pointer-up",d,function(a){return e(f.wrapPointer(a,"pointer-up"))});break;case "pointer-drag":f.registerIncoming("pointer-drag",d,function(a){return e(f.wrapPointerDrag(a))});
break;case "mouse-wheel":f.registerIncoming("mouse-wheel",d,function(a){return e(f.wrapMouseWheel(a))});break;case "pointer-enter":f.registerIncoming("pointer-enter",d,function(a){return e(f.wrapPointer(a,"pointer-enter"))});break;case "pointer-leave":f.registerIncoming("pointer-leave",d,function(a){return e(f.wrapPointer(a,"pointer-leave"))})}return f}b(d,c);d.prototype.wrapClick=function(b){var c=b.data,d=c.x,e=c.y;return{type:"click",pointerType:c.pointerType,button:c.button,buttons:c.buttons,
x:d,y:e,native:c.native,timestamp:b.timestamp,screenPoint:new a(d,e),mapPoint:this.view.toMap(d,e),stopPropagation:function(){return b.stopPropagation()}}};d.prototype.wrapDoubleClick=function(a){var b=a.data,c=b.x,d=b.y;return{type:"double-click",pointerType:b.pointerType,button:b.button,buttons:b.buttons,x:c,y:d,native:b.native,timestamp:a.timestamp,mapPoint:this.view.toMap(c,d),stopPropagation:function(){return a.stopPropagation()}}};d.prototype.wrapImmediateClick=function(a){var b=a.data,c=b.x,
d=b.y;return{type:"immediate-click",pointerType:b.pointerType,button:b.button,buttons:b.buttons,x:c,y:d,native:b.native,timestamp:a.timestamp,mapPoint:this.view.toMap(c,d),stopPropagation:function(){return a.stopPropagation()}}};d.prototype.wrapHold=function(a){var b=a.data,c=b.x,d=b.y;return{type:"hold",pointerType:b.pointerType,button:b.button,buttons:b.buttons,x:c,y:d,native:b.native,timestamp:a.timestamp,mapPoint:this.view.toMap(c,d),stopPropagation:function(){return a.stopPropagation()}}};d.prototype.wrapDrag=
function(a){var b=a.data,c=b.center,d=c.x,c=c.y,e=b.action,h=b.pointerType,k=b.button;"start"===e&&(this.latestDragStart=b);var l=b.pointer.native,g=a.timestamp;return{type:"drag",action:e,x:d,y:c,origin:{x:this.latestDragStart.center.x,y:this.latestDragStart.center.y},pointerType:h,button:k,buttons:b.buttons,radius:b.radius,angle:f.rad2deg(b.angle),native:l,timestamp:g,stopPropagation:function(){return a.stopPropagation()}}};d.prototype.wrapKeyDown=function(a){var b=a.data;return{type:"key-down",
key:b.key,repeat:b.repeat,native:b.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};d.prototype.wrapKeyUp=function(a){var b=a.data;return{type:"key-up",key:b.key,native:b.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};d.prototype.wrapPointer=function(a,b){var c=a.data,d=c.native;return{type:b,x:c.x,y:c.y,pointerId:d.pointerId,pointerType:d.pointerType,button:c.button,buttons:c.buttons,native:d,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};
d.prototype.wrapPointerDrag=function(a){var b=a.data.currentEvent,c=a.data.startEvent.native;return{type:"pointer-drag",x:b.x,y:b.y,pointerId:c.pointerId,pointerType:c.pointerType,button:a.data.startEvent.button,buttons:b.buttons,action:a.data.action,origin:{x:a.data.startEvent.x,y:a.data.startEvent.y},native:b.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};d.prototype.wrapMouseWheel=function(a){var b=a.data;return{type:"mouse-wheel",x:b.x,y:b.y,deltaY:b.deltaY,
native:b.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};return d}(d.InputHandler)})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(n,g,b,a){Object.defineProperty(g,"__esModule",{value:!0});n=function(a){function d(){var b=a.call(this,!0)||this;b.registerIncoming("context-menu",function(a){a.data.native.preventDefault()});return b}b(d,a);return d}(a.InputHandler);
g.PreventContextMenu=n;g.default=n})},"esri/views/2d/layers/support/GraphicsView2D":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../Graphic ../../../../core/Collection ../../../../core/Handles ../../../../core/promiseUtils ../../../../core/accessorSupport/decorators ../../engine/graphics/GFXGroup ../../engine/graphics/GFXObject ../../engine/graphics/GFXSurface ../../../layers/GraphicsView".split(" "),function(n,
g,b,a,f,d,k,e,c,l,h,m,p){return function(g){function p(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c=g.apply(this,a)||this;c._frontGroup=new l;c._handles=new k;c._objects=new Map;c.container=new m;c.container.addChild(c._frontGroup);c.watch("graphics",function(){return c._reset()},!0);return c}b(p,g);p.prototype.hitTest=function(a,b){if(!this.view||!this.view.position)return null;a+=this.view.position[0]-window.pageXOffset;b+=this.view.position[1]-window.pageYOffset;return(a=this.container.hitTest(a,
b))?e.resolve(a.graphic):null};p.prototype.graphicUpdateHandler=function(a){var b=a.graphic,c=a.property;a=a.newValue;if(this._objects.has(b)){var d=this._objects.get(b);switch(c){case "geometry":d.graphic=b;break;case "symbol":d.renderingInfo={symbol:a};break;case "visible":d.visible=a}}};p.prototype._reset=function(){var a=this;this._handles.remove("graphics");this._objects.forEach(function(b,c){a._frontGroup.removeChild(b)});this._objects.clear();this.graphics&&(this.graphics.forEach(this._add,
this),this._handles.add(this.graphics.on("change",function(b){return a._graphicsChangeHandler(b)}),"graphics"))};p.prototype._add=function(a){if(a&&!this._objects.has(a)){var b=new h;b.graphic=a;b.renderingInfo={symbol:a.symbol};this._objects.set(a,b);this._frontGroup.addChild(b)}};p.prototype._remove=function(a){var b=this._objects.get(a);b&&(this._objects.delete(a),this._frontGroup.removeChild(b))};p.prototype._graphicsChangeHandler=function(a){var b=a.added,c=a.removed;a.moved.length&&this._reset();
for(var d=0;d<b.length;d++)a=b[d],this._add(a);for(b=0;b<c.length;b++)a=c[b],this._remove(a)};a([c.property(),c.cast(d.ofType(f))],p.prototype,"graphics",void 0);a([c.property()],p.prototype,"view",void 0);return p=a([c.subclass("esri.views.2d.layers.support.GraphicsView2D")],p)}(c.declared(p))})},"esri/views/2d/engine/graphics/GFXGroup":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","dojo/_base/lang","../Container"],function(n,g,b,a,f){return function(d){function f(){return null!==
d&&d.apply(this,arguments)||this}b(f,d);f.prototype.attach=function(a){this.g=a.surface.createGroup();return d.prototype.attach.call(this,a)};f.prototype.detach=function(a){d.prototype.detach.call(this,a);this.g.destroy();this.g=null};f.prototype.prepareChildrenRenderParameters=function(b){return a.mixin({},b,{surface:this.g})};f.prototype.detachChild=function(a,b){return a.detach(b)};f.prototype.attachChild=function(a,b){return a.attach(b)};f.prototype.renderChild=function(a,b){return a.processRender(b)};
return f}(f)})},"esri/views/2d/engine/graphics/GFXObject":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../geometry ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/webMercatorUtils ../DisplayObject ./gfxUtils".split(" "),function(n,g,b,a,f,d,k,e){var c=new Set,l=[];return function(h){function k(){var a=null!==h&&h.apply(this,arguments)||this;a._prevStateId=null;a.visible=!0;return a}b(k,h);Object.defineProperty(k.prototype,"graphic",
{get:function(){return this._graphic},set:function(a){this._geometry=(this._graphic=a)&&a.geometry||null;this._projected=null;this.requestRender()},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"geometry",{get:function(){return this._geometry},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"isPolygonMarkerSymbol",{get:function(){var a=this.renderingInfo.symbol.type,b=this.geometry;return b&&"polygon"===b.type&&("simple-marker"===a||"picture-marker"===a||"text"===
a)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"renderingInfo",{get:function(){return this._renderingInfo},set:function(a){this._renderingInfo=a;this.requestRender()},enumerable:!0,configurable:!0});k.prototype.detach=function(){this._removeShape();this._drawInfo=this._projected=null};k.prototype.doRender=function(a){var b=a.surface,c=a.state,d=a.projector,f=this._prevStateId!==c.id;if(this.renderRequested||f)if(f&&a.stationary&&(this._prevStateId=c.id),this.visible)if(f=this._projectGeometry(this.geometry,
a.state.spatialReference),a=this._getScreenOffsets([],a.state),e.isShapeInvalid(this.renderingInfo.symbol,this._shape)&&this._removeShape(),a.length){var h=this._shape,k=f.type;if(!h||this._showRedraw(a,c))"point"===k?(h=e.drawPoint(d,b,f,h,this.renderingInfo,c.rotation,a),e.stylePoint(h,this.renderingInfo)):"multipoint"===k?(h=e.drawMarkers(d,b,f,h,this.renderingInfo,c.rotation,a,this),e.styleMarkers(h,this.renderingInfo)):(h=e.drawShape(d,b,f,h,a),e.styleShape(h,this.renderingInfo)),this._shape=
h,h.getNode().gfxObject=this}else this._removeShape();else this._removeShape()};k.prototype._getScreenOffsets=function(a,b){var d=b.clippedExtent,e=this._projected.outExtent,h=b.spatialReference;a.length=0;if(!e)return a;if(h.isWrappable){var h=f.getInfo(h),k=e.cache._partwise,d=d._getParts(h);l.length=0;if(k&&k.length)for(e=0;e<k.length;e++)l.push.apply(l,k[e]._getParts(h));else l.push.apply(l,e._getParts(h));b=b.worldScreenWidth;a.length=0;c.clear();e=l.length;for(h=0;h<e;h++)for(var g=l[h],k=g.extent,
g=g.frameIds,m=g.length,p=d.length,r=0;r<p;r++){var n=d[r];if(n.extent.intersects(k))for(var z=m,C=0;C<z;C++){var E=(n.frameIds[0]-g[C])*b;c.has(E)||(a.push(E),c.add(E))}}a.sort()}else d.intersects(e)&&a.push(0);return a};k.prototype._projectGeometry=function(a,b){var c=this._projected;a=this.isPolygonMarkerSymbol?a.centroid:a;if(c&&c.inGeometry===a&&c.outSpatialReference===b)return c.outGeometry;a&&a.spatialReference.equals(b)?this._projected={inGeometry:a,outGeometry:a,outSpatialReference:b,outExtent:this._getExtent(a)}:
d.canProject(a,b)?this._projected={inGeometry:a,outGeometry:d.project(a,b),outSpatialReference:b,outExtent:this._getExtent(a)}:this._projected={inGeometry:a,outGeometry:null,outSpatialReference:b,outExtent:null};return this._projected.outGeometry};k.prototype._getExtent=function(b){var c=b.extent;if(!c){var d=c=void 0;"esri.geometry.Point"===b.declaredClass?(c=b.x,d=b.y):"esri.geometry.Multipoint"===b.declaredClass&&(c=b.points[0][0],d=b.points[0][1]);c=new a.Extent(c,d,c,d,b.spatialReference)}return c};
k.prototype._removeShape=function(){var a=this._shape;a&&(a.removeShape(),a.getNode().gfxObject=null,a.destroy());this._shape=this._drawInfo=null};k.prototype._showRedraw=function(a,b){return!0};return k}(k)})},"esri/views/2d/engine/graphics/gfxUtils":function(){define("require exports dojo/_base/lang ../../../../Color ../../../../core/screenUtils ../../../../geometry/Polygon ../../../../symbols/SimpleMarkerSymbol ../../../../symbols/support/gfxUtils ../../libs/gl-matrix/mat2d ../../libs/gl-matrix/mat2dExtras".split(" "),
function(n,g,b,a,f,d,k,e,c,l){function h(a,b){if(!b)return null;b.toRgba?(a[0]=b.r,a[1]=b.g,a[2]=b.b,a[3]=b.a):(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]);return a}function m(a,b,c){null!=c&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=c);return a}function p(a,b,c){var d=b[0]/b[1];a[0]=a[1]=1;isNaN(c)||(1<d?(a[0]=c/b[0],a[1]=c/d/b[1]):(a[1]=c/b[1],a[0]=c*d/b[0]));return a}function r(a,b,d,h,g,m,r){var w=g.symbol;d=a.toScreenPoint(A,d,r[0]);r=[d.x,d.y];a=d.x;d=d.y;var n=g.heading,v=g.size&&g.size[0],z,D;c.identity(B);
"number"===typeof v&&(D=isFinite(v)&&v);D=(v=D&&isFinite(D)&&!isNaN(D))?f.pt2px(D):NaN;m&&l.rotategAt(B,B,m,r);n&&l.rotategAt(B,B,n,r);m=f.pt2px(w.xoffset);var n=f.pt2px(w.yoffset),E;if(0!==m||0!==n)E=[m,-n];m=null;0!==w.angle&&(m=c.create(),l.rotategAt(m,m,w.angle,r));var C;if("simple-marker"===w.type)switch(z=w.style,g=Math.round,D=v?D:f.pt2px(w.size),v=void 0,z){case k.STYLE_SQUARE:case k.STYLE_CROSS:case k.STYLE_X:case k.STYLE_DIAMOND:v=isNaN(D)?16:.5*D;z=u(b,h,y(z,a,d,g(a-v),g(a+v),g(d-v),g(d+
v)));break;case k.STYLE_PATH:z=C=u(b,h,w.path);C=C.getBoundingBox();w=p(c.create(),[C.width,C.height],D);1===w[0]&&1===w[3]||l.scaleAt(B,B,w,r);C=[-(C.x+.5*C.width)+a,-(C.y+.5*C.height)+d];break;default:v=isNaN(D)?16:.5*D,z=q(b,h,{cx:a,cy:d,r:v})}else if("picture-marker"===w.type){r=z=null;var n=f.pt2px(w.width),G=f.pt2px(w.height);v?(r=D,z=n/G*r):(z=n,r=G);E&&(null!=E[0]&&(E[0]=E[0]/n*z),null!=E[1]&&(E[1]=E[1]/G*r));z=t(b,h,{x:a-.5*z,y:d-.5*r,width:z,height:r,src:w.url});(D=z.getNode())&&(null!=
g.opacity?D.setAttribute("opacity",g.opacity.toString()):D.setAttribute("opacity","1"))}else if("text"===w.type){if(g=w.font&&w.font.clone())g.size=v?D:f.pt2px(g.size);z=x(b,h,{type:"text",text:w.text,x:a,y:d,align:e.getSVGAlign(w),decoration:w.decoration||g&&g.decoration,rotated:w.rotated,kerning:w.kerning});g&&z.setFont(g);D=z.getNode();b=e.getSVGBaseline(w);w=e.getSVGBaselineShift(w);D&&(D.setAttribute("dominant-baseline",b),w&&D.setAttribute("baseline-shift",w))}E&&c.translate(B,B,E);m&&c.multiply(B,
B,m);C&&c.translate(B,B,C);z.setTransform(B);return z}function t(a,b,c){return b?b.setShape(c):a.createImage(c)}function q(a,b,c){return b?b.setShape(c):a.createCircle(c)}function u(a,b,c){c=Array.isArray(c)?c.join(" "):c;return b?b.setShape(c):a.createPath(c)}function x(a,b,c){return b?b.setShape(c):a.createText(c)}function v(a,b){b=b&&b.shape&&b.shape.type;var c=a&&a.type;a=a&&a.style;c&&(a=z[c]||a);C[a]&&(a="path");return!(!b||!a||b===a)}function y(a,b,c,d,e,f,h,l){switch(a){case k.STYLE_SQUARE:return["M",
d+","+f,e+","+f,e+","+h,d+","+h,"Z"];case k.STYLE_CROSS:return["M",b+","+f,b+","+h,"M",d+","+c,e+","+c];case k.STYLE_X:return["M",d+","+f,e+","+h,"M",d+","+h,e+","+f];case k.STYLE_DIAMOND:return["M",b+","+f,e+","+c,b+","+h,d+","+c,"Z"];case k.STYLE_TARGET:return["M",d+","+f,e+","+f,e+","+h,d+","+h,d+","+f,"M",d-l+","+c,d+","+c,"M",b+","+(f-l),b+","+f,"M",e+l+","+c,e+","+c,"M",b+","+(h+l),b+","+h]}}function w(a,c){var d=c.symbol;if("picture-marker"!==d.type){var f=e.getFill(d);if("simple-marker"===
d.type){var l=d.style,g=(d=e.getStroke(d))&&d.color,l=l===k.STYLE_X||l===k.STYLE_CROSS,p=c.opacity;(c=c.color||h([0,0,0,0],l?g:f))&&null!=p&&(c=m([0,0,0,0],c,p));c&&(l?c!==g&&(d=d?b.mixin({},d):{},d.color=c):c!==f&&(f=c));a.setFill(f).setStroke(d)}else"text"===d.type&&(p=c.opacity,(c=c.color||h([0,0,0,0],f))&&null!=p&&(c=m([0,0,0,0],c,p)),c&&c!==f&&(f=c),a.setFill(f))}}Object.defineProperty(g,"__esModule",{value:!0});g.getScalingVector=p;var A={x:0,y:0},B=c.create();g.drawPoint=r;g.drawMarkers=function(a,
b,c,d,e,f,h,k){var l=e.symbol;c=c.points;b=d||b.createGroup();d=[0];b.children[0]&&v(l,b.children[0])&&b.clear();for(var g=0,m=c.length,l=0;l<m;l++)for(var p=c[l],q=h.length,t=0;t<q;t++){d[0]=h[t];var w=r(a,b,{x:p[0],y:p[1]},b.children[g++],e,f,d);w.getNode().gfxObject=k;b.add(w)}a=b.children.length;if(c.length*h.length<a)for(h=c.length*h.length,l=a-1;l>=h;l--)b.children[l].removeShape();return b};g.drawShape=function(a,b,c,e,f){var h=[];"extent"===c.type&&(c=d.fromExtent(c));if("polyline"===c.type||
"polygon"===c.type){for(var k=f.length,l=0;l<k;l++)h=h.concat(a.toScreenPath(c,f[l]));e=u(b,e,h)}return e};g.drawRect=function(a,b,c){return b?b.setShape(c):a.createRect(c)};g.drawImage=t;g.drawCircle=q;g.drawPath=u;g.drawText=x;var z={"picture-marker":"image","picture-fill":"path","simple-fill":"path","simple-line":"path",text:"text"},C={square:1,cross:1,x:1,diamond:1,target:1};g.isShapeInvalid=v;g.smsToPath=y;g.stylePoint=w;g.styleMarkers=function(a,b){for(var c=a.children.length,d=0;d<c;d++)w(a.children[d],
b)};g.styleShape=function(c,d){var k=d.symbol,l=d.size,g=d.color,p=d.opacity,q=d.outlineSize;d=e.getStroke(k);var r=e.getFill(k),t=!1,w;"simple-line"===k.type?(t=!0,w="none"!==k.style):w=k.outline&&"none"!==k.outline.style;var u,v,n;if(null!=l||null!=q)if(l=l&&isFinite(l[0])&&l[0],q=t?null:q,null!=l||null!=q)n=f.pt2px(q||l);l="picture-fill"===k.type;!g&&null==p||l||(t?(u=g||d&&d.color&&h([0,0,0,0],d.color))&&null!=p&&(u=m(u,u,p)):r&&(v=g||h([0,0,0,0],r))&&null!=p&&(v=m(v,v,p)));!w||null==n&&!u?c.setStroke(d):
c.setStroke(b.mixin({},d,null!=n?{width:n}:null,u&&{color:u}));k=g&&new a(g)||k.color;r&&"pattern"===r.type&&k&&!l?e.getPatternUrlWithColor(r.src,k.toCss(!0)).then(function(a){r.src=a;c.setFill(r)}):c.setFill(v||r);c.rawNode.setAttribute("vector-effect","non-scaling-stroke")}})},"esri/symbols/support/gfxUtils":function(){define("require exports dojo/_base/lang dojox/gfx/_base ../../Color ../../request ../../core/LRUMap ../../core/promiseUtils ../../core/screenUtils".split(" "),function(n,g,b,a,f,
d,k,e,c){function l(a){if(!a)return null;var b,d=a.constructor,e=c.pt2px(a.width);switch(a.type){case "simple-fill":case "picture-fill":case "simple-marker":b=l(a.outline);break;case "simple-line":a.style!==d.STYLE_NULL&&0!==e&&(b={color:a.color,style:t(a.style),width:e,cap:a.cap,join:a.join===d.JOIN_MITER?c.pt2px(a.miterLimit):a.join});break;default:b=null}return b}Object.defineProperty(g,"__esModule",{value:!0});var h=n.toUrl("../../symbols/patterns/"),m={left:"start",center:"middle",right:"end",
justify:"start"},p={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},r=new k(1E3);g.getSVGAlign=function(a){return a=(a=a.horizontalAlignment)&&m[a.toLowerCase()]||"middle"};g.getSVGBaseline=function(a){return(a=a.verticalAlignment)&&p[a.toLowerCase()]||"alphabetic"};g.getSVGBaselineShift=function(a){return"bottom"===a.verticalAlignment?"super":null};g.getFill=function(d){var e=d.style,f=null;if(d){var k=d.constructor;switch(d.type){case "simple-marker":e!==
k.STYLE_CROSS&&e!==k.STYLE_X&&(f=d.color);break;case "simple-fill":e===k.STYLE_SOLID?f=d.color:e!==k.STYLE_NULL&&(f=b.mixin({},a.defaultPattern,{src:h+e+".png",width:8,height:8}));break;case "picture-fill":f=b.mixin({},a.defaultPattern,{src:d.url,width:c.pt2px(d.width)*d.xscale,height:c.pt2px(d.height)*d.yscale,x:c.pt2px(d.xoffset),y:c.pt2px(d.yoffset)});break;case "text":f=d.color}}return f};g.getPatternUrlWithColor=function(a,b){var c=a+"-"+b;return r.has(c)?e.resolve(r.get(c)):d(a,{responseType:"image",
allowImageDataAccess:!0}).then(function(a){a=a.data;var d=a.naturalWidth,e=a.naturalHeight,f=document.createElement("canvas");f.width=d;f.height=e;var h=f.getContext("2d");h.fillStyle=b;h.fillRect(0,0,d,e);h.globalCompositeOperation="destination-in";h.drawImage(a,0,0);a=f.toDataURL();r.set(c,a);return a})};g.getStroke=l;var t=function(){var a={};return function(b){if(a[b])return a[b];var c=b.replace(/-/g,"");return a[b]=c}}();g.defaultThematicColor=new f([128,128,128])})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),
function(n,g,b,a,f,d,k,e,c){var l=g.getObject("dojox.gfx",!0),h=l._base={};l._hasClass=function(a,b){return(a=a.getAttribute("className"))&&0<=(" "+a+" ").indexOf(" "+b+" ")};l._addClass=function(a,b){var c=a.getAttribute("className")||"";(!c||0>(" "+c+" ").indexOf(" "+b+" "))&&a.setAttribute("className",c+(c?" ":"")+b)};l._removeClass=function(a,b){var c=a.getAttribute("className");c&&a.setAttribute("className",c.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};h._getFontMeasurements=function(){var b=
{"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},c,d;a("ie")&&(d=f.doc.documentElement.style.fontSize||"",d||(f.doc.documentElement.style.fontSize="100%"));var h=e.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},f.body());for(c in b)h.style.fontSize=c,b[c]=16*Math.round(12*h.offsetHeight/16)/12/1E3;
a("ie")&&(f.doc.documentElement.style.fontSize=d);f.body().removeChild(h);return b};var m=null;h._getCachedFontMeasurements=function(a){if(a||!m)m=h._getFontMeasurements();return m};var p=null,r={};h._getTextBox=function(a,b,d){var h,k,l=arguments.length,g;p||(p=e.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},f.body()));h=p;h.className="";k=h.style;k.borderWidth="0";k.margin="0";k.padding="0";k.outline="0";if(1<l&&b)for(g in b)g in r||(k[g]=b[g]);2<l&&d&&(h.className=
d);h.innerHTML=a;h.getBoundingClientRect?(k=h.getBoundingClientRect(),k={l:k.left,t:k.top,w:k.width||k.right-k.left,h:k.height||k.bottom-k.top}):k=c.getMarginBox(h);h.innerHTML="";return k};h._computeTextLocation=function(a,b,c,d){var e={};switch(a.align){case "end":e.x=a.x-b;break;case "middle":e.x=a.x-b/2;break;default:e.x=a.x}e.y=a.y-c*(d?.75:1);return e};h._computeTextBoundingBox=function(a){if(!l._base._isRendered(a))return{x:0,y:0,width:0,height:0};var b;b=a.getShape();var c=a.getFont()||l.defaultFont;
a=a.getTextWidth();c=l.normalizedLength(c.size);b=h._computeTextLocation(b,a,c,!0);return{x:b.x,y:b.y,width:a,height:c}};h._isRendered=function(a){for(a=a.parent;a&&a.getParent;)a=a.parent;return null!==a};var t=0;h._getUniqueId=function(){var a;do a=n._scopeName+"xUnique"+ ++t;while(k.byId(a));return a};var q=a("pointer-events")?"touchAction":null;h._fixMsTouchAction=q?function(a){a.rawNode.style[q]="none"}:function(){};g.mixin(l,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",
points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",
color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a={};return function(b){var c=
a[b];if(c)return new c;c=a[b]=new Function;c.prototype=l["default"+b];return new c}}(),normalizeColor:function(a){return a instanceof b?a:new b(a)},normalizeParameters:function(a,b){var c;if(b){var d={};for(c in a)c in b&&!(c in d)&&(a[c]=b[c])}return a},makeParameters:function(a,b){var c=null;if(!b)return g.delegate(a);var d={};for(c in a)c in d||(d[c]=g.clone(c in b?b[c]:a[c]));return d},formatNumber:function(a,b){var c=a.toString();if(0<=c.indexOf("e"))c=a.toFixed(4);else{var d=c.indexOf(".");
0<=d&&5<c.length-d&&(c=a.toFixed(4))}return 0>a?c:b?" "+c:c},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var b=l.getDefault("Font");a=a.split(/\s+/);if(!(5>a.length)){b.style=a[0];b.variant=a[1];b.weight=a[2];var c=a[3].indexOf("/");b.size=0>c?a[3]:a[3].substring(0,c);var d=4;0>c&&("/"==a[4]?d=6:"/"==a[4].charAt(0)&&(d=5));d<a.length&&(b.family=a.slice(d).join(" "))}return b},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return l._base._getCachedFontMeasurements()["12pt"]/
12},pt2px:function(a){return a*l.px_in_pt()},px2pt:function(a){return a/l.px_in_pt()},normalizedLength:function(a){if(0===a.length)return 0;if(2<a.length){var b=l.px_in_pt(),c=parseFloat(a);switch(a.slice(-2)){case "px":return c;case "pt":return c*b;case "in":return 72*c*b;case "pc":return 12*c*b;case "mm":return c*l.mm_in_pt*b;case "cm":return c*l.cm_in_pt*b}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,
equalSources:function(a,b){return a&&b&&a===b},switchTo:function(a){var b="string"==typeof a?l[a]:a;b&&(d.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath EsriPath Surface createSurface fixTarget".split(" "),function(a){l[a]=b[a]}),"string"==typeof a?l.renderer=a:d.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(a){return l.renderer=l[a]&&l[a].Surface===l.Surface?a:null}))}});return l})},"esri/views/2d/libs/gl-matrix/mat2dExtras":function(){define(["require",
"exports","./common","./mat2d","./vec2"],function(n,g,b,a,f){Object.defineProperty(g,"__esModule",{value:!0});var d=function(){var b=a.create(),d=f.create();return function(c,e,h){a.fromTranslation(b,h);a.multiply(c,b,e);f.negate(d,h);a.translate(c,c,d);return c}}();g.rotategAt=function(){var f=a.create();return function(e,c,k,h){a.fromRotation(f,b.toRadian(k));d(f,f,h);a.multiply(e,f,c);return e}}();g.scaleAt=function(){var b=a.create();return function(e,c,f,h){a.fromScaling(b,f);d(b,b,h);a.multiply(e,
b,c);return e}}()})},"esri/views/2d/engine/graphics/GFXSurface":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/assignHelper ../../viewpointUtils ../Container ../cssUtils ./Projector ../../libs/gfx ../../libs/gl-matrix/common ../../libs/gl-matrix/mat2d".split(" "),function(n,g,b,a,f,d,k,e,c,l,h){var m=h.identity(h.create());return function(d){function g(){var a=null!==d&&d.apply(this,arguments)||this;a._transform=h.create();a._projector=new e;
a._prevStateId=null;return a}b(g,d);g.prototype.createElement=function(){var a=document.createElement("div");a.setAttribute("class","esri-display-object");return a};g.prototype.setElement=function(a){this.surface&&(this.surface.destroy(),this.surface=null);if(this.element=a)this.surface=c.createSurface(this.element,400,400)};g.prototype.doRender=function(a){var b=this.element.style;if(this.visible){b.display="block";b.opacity=""+this.parent.opacity;var c=this._transform,e=a.state,g=this._prevStateId!==
e.id;if(this.renderRequested||g){if(a.stationary)g&&(this._prevStateId=e.id),f.getMatrix(c,e.center,e.size,e.resolution,l.toRadian(e.rotation),1),this.surface.setDimensions(e.size[0],e.size[1]),this._projector.update(c,e.resolution),this.children.forEach(function(a){a.g&&a.g.setTransform(m)}),d.prototype.doRender.call(this,a);else{var p=h.invert(h.create(),c);h.multiply(p,e.transform,p);this.children.forEach(function(a){a.g&&a.g.setTransform(p)})}k.clip(b,e.clipRect);b.transform=k.cssMatrix3d(h.fromRotation(h.create(),
l.toRadian(e.rotation)));this.surface.rawNode.style.transform=k.cssMatrix(h.fromRotation(h.create(),l.toRadian(-e.rotation)))}}else b.display="none"};g.prototype.hitTest=function(a,b){if(!this.attached)return null;var c=this.surface.rawNode,c=c.parentElement||c.parentNode;c.style.zIndex="9000";a=document.elementFromPoint(a,b);c.style.zIndex="";return a&&a.gfxObject||null};g.prototype.prepareChildrenRenderParameters=function(b){return a({},b,{projector:this._projector,surface:this.surface})};g.prototype.beforeRenderChildren=
function(a,b){this.surface.openBatch()};g.prototype.attachChild=function(a,b){return a.attach(b)};g.prototype.detachChild=function(a,b){return a.detach()};g.prototype.renderChild=function(a,b){return a.processRender(b)};g.prototype.afterRenderChildren=function(a,b){this.surface.closeBatch()};return g}(d)})},"esri/views/2d/engine/cssUtils":function(){define(["require","exports","dojo/has"],function(n,g,b){function a(a){return"matrix3d(\n                    "+a[0].toFixed(10)+", "+a[1].toFixed(10)+
", 0, 0,\n                    "+a[2].toFixed(10)+", "+a[3].toFixed(10)+", 0, 0,\n                    0, 0, 1, 0,\n                    "+Math.round(a[4]).toFixed(10)+", "+Math.round(a[5]).toFixed(10)+", 0, 1\n                  )"}function f(a){return"translate("+Math.round(a[0])+"px, "+Math.round(a[1])+"px)"}function d(a){return"rotateZ( "+a+" deg)"}Object.defineProperty(g,"__esModule",{value:!0});n=b("ff");var k=b("ie"),e=b("webkit");b=b("opera");var c=e&&"-webkit-transform"||n&&"-moz-transform"||
b&&"-o-transform"||k&&"-ms-transform"||"transform";g.clip=function(a,b){a.clip=b?"rect( "+b.top+"px, "+b.right+"px, "+b.bottom+"px, "+b.left+"px)":""};g.setTransform=function(b,d){var e=null;2===d.length&&(e=f(d));6===d.length&&(e=a(d));b.transform=b[c]=e};g.setOrigin=function(a,b){a.transformOrigin=b[0]+"px "+b[1]+"px 0"};g.cssMatrix=function(a){return"matrix(\n                  "+a[0].toFixed(10)+", "+a[1].toFixed(10)+",\n                  "+a[2].toFixed(10)+", "+a[3].toFixed(10)+",\n                  "+
a[4]+", "+a[5]+"\n                )"};g.cssMatrix3d=a;g.translate=f;g.rotate=function(a){return d(a.toFixed(3))};g.rotateZ=d})},"esri/views/2d/engine/graphics/Projector":function(){define(["require","exports"],function(n,g){function b(a,e,c,l,h){void 0===l&&(l=0);void 0===h&&(h=a.length);for(var k=a[l],g=a[h-1],r=0,t=0,q,n=l+1;n<h-1;n++){var x=a[n];q=x[0];var x=x[1],v=k[0],y=k[1],w=g[0],A=g[1];v===w?q=f(q-v):(w=(A-y)/(w-v),q=f(w*q-x+(y-w*v))/d(w*w+1));q>r&&(t=n,r=q)}r>e?(b(a,e,c,l,t+1),b(a,e,c,t,
h)):(c(k[0],k[1]),c(g[0],g[1]))}var a=Math.round,f=Math.abs,d=Math.sqrt;return function(){function d(){this._transform=null}d.prototype.update=function(a,b){this._transform=a;this._resolution=b};d.prototype.toScreenPoint=function(a,b,d){this.transformPoint(b.x+d*this._resolution,b.y,function(b,c){a.x=b;a.y=c});return a};d.prototype.toScreenPath=function(a,c){var d=this,e=null!=a.paths;a=e?a.paths:a.rings;var f="",k=function(a,b){a+=c*d._resolution;d.transformPoint(a,b,function(a,b){isNaN(a)||isNaN(b)||
(f+=a,f+=",",f+=b,f+=" ")})};if(a)for(var g=a.length,t=0;t<g;t++)f+="M ",b(a[t],this._resolution,k),e||(f+="Z ");return f};d.prototype.transformPoint=function(b,c,d){var e=this._transform,f=e[1],k=e[3],l=e[5];d(a(e[0]*b+e[2]*c+e[4]),a(f*b+k*c+l))};return d}()})},"esri/views/2d/libs/gfx":function(){define("require exports ./gfx/Circle ./gfx/Group ./gfx/Image ./gfx/Path ./gfx/Rect ./gfx/Shape ./gfx/Surface ./gfx/svgSurface ./gfx/Text".split(" "),function(n,g,b,a,f,d,k,e,c,l,h){Object.defineProperty(g,
"__esModule",{value:!0});g.Circle=b.default;g.Group=a.default;g.Image=f.default;g.Path=d.default;g.Rect=k.default;g.Shape=e.default;g.Surface=c.default;g.createSurface=l.createSurface;g.Text=h.default})},"esri/views/2d/libs/gfx/Circle":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","dojox/gfx/_base","./Shape"],function(n,g,b,a,f){Object.defineProperty(g,"__esModule",{value:!0});n=function(d){function f(b){var c=d.call(this)||this;c.shape=a.getDefault("Circle");c.rawNode=
b;return c}b(f,d);f.prototype.getBoundingBox=function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox};f.nodeType="circle";return f}(f.default);g.default=n})},"esri/views/2d/libs/gfx/Shape":function(){define("require exports dojo/dom dojo/dom-attr dojo/_base/Color dojo/_base/lang dojox/gfx/_base ./svg ../gl-matrix/mat2d".split(" "),function(n,g,b,a,f,d,k,e,c){Object.defineProperty(g,"__esModule",{value:!0});n=function(){function l(){this.parentMatrix=
this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null}l.prototype.destroy=function(){if(this.fillStyle&&"type"in this.fillStyle){var a=this.rawNode.getAttribute("fill");(a=e.getRef(a))&&a.parentNode.removeChild(a)}this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null};l.prototype.getNode=function(){return this.rawNode};l.prototype.getShape=function(){return this.shape};l.prototype.getTransform=function(){return this.matrix};
l.prototype.getFill=function(){return this.fillStyle};l.prototype.getStroke=function(){return this.strokeStyle};l.prototype.getParent=function(){return this.parent};l.prototype.getBoundingBox=function(){return this.bbox};l.prototype.setTransform=function(a){this.matrix=this.matrix?c.copy(this.matrix,a):c.clone(a);return this._applyTransform()};l.prototype.setFill=function(a){if(!a)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;
var b;if("object"===typeof a&&"type"in a){switch(a.type){case "linear":b=k.makeParameters(k.defaultLinearGradient,a);a=this._setFillObject(b,"linearGradient");a.setAttribute("x1",b.x1.toFixed(8));a.setAttribute("y1",b.y1.toFixed(8));a.setAttribute("x2",b.x2.toFixed(8));a.setAttribute("y2",b.y2.toFixed(8));break;case "radial":b=k.makeParameters(k.defaultRadialGradient,a);a=this._setFillObject(b,"radialGradient");a.setAttribute("cx",b.cx.toFixed(8));a.setAttribute("cy",b.cy.toFixed(8));a.setAttribute("r",
b.r.toFixed(8));break;case "pattern":b=k.makeParameters(k.defaultPattern,a),a=this._setFillObject(b,"pattern"),a.setAttribute("x",b.x.toFixed(8)),a.setAttribute("y",b.y.toFixed(8)),a.setAttribute("width",b.width.toFixed(8)),a.setAttribute("height",b.height.toFixed(8))}this.fillStyle=b;return this}this.fillStyle=b=k.normalizeColor(a);this.rawNode.setAttribute("fill",b.toCss());this.rawNode.setAttribute("fill-opacity",b.a);this.rawNode.setAttribute("fill-rule","evenodd");return this};l.prototype.setStroke=
function(a){var b=this.rawNode;if(!a)return this.strokeStyle=null,b.setAttribute("stroke","none"),b.setAttribute("stroke-opacity",0),this;if("string"===typeof a||d.isArray(a)||a instanceof f)a={color:a};a=this.strokeStyle=k.makeParameters(k.defaultStroke,a);a.color=k.normalizeColor(a.color);if(a){var c=0>a.width?0:a.width;b.setAttribute("stroke",a.color.toCss());b.setAttribute("stroke-opacity",a.color.a);b.setAttribute("stroke-width",c);b.setAttribute("stroke-linecap",a.cap);"number"===typeof a.join?
(b.setAttribute("stroke-linejoin","miter"),b.setAttribute("stroke-miterlimit",a.join)):b.setAttribute("stroke-linejoin",a.join);var h=a.style.toLowerCase();h in e.dasharray&&(h=e.dasharray[h]);if(h instanceof Array){for(var h=d._toArray(h),l=0;l<h.length;++l)h[l]*=c;if("butt"!==a.cap){for(l=0;l<h.length;l+=2)h[l]-=c,1>h[l]&&(h[l]=1);for(l=1;l<h.length;l+=2)h[l]+=c}h=h.join(",")}b.setAttribute("stroke-dasharray",h);b.setAttribute("dojoGfxStrokeStyle",a.style)}return this};l.prototype._getParentSurface=
function(){for(var a=this.parent;a&&!a.defNode;a=a.parent);return a};l.prototype._setFillObject=function(a,b){var c=e.xmlns.svg;this.fillStyle=a;var d=this._getParentSurface().defNode,f=this.rawNode.getAttribute("fill");if(f=e.getRef(f))if(f.tagName.toLowerCase()!==b.toLowerCase()){var h=f.id;f.parentNode.removeChild(f);f=e._createElementNS(c,b);f.setAttribute("id",h);d.appendChild(f)}else for(;f.childNodes.length;)f.removeChild(f.lastChild);else f=e._createElementNS(c,b),f.setAttribute("id",k._base._getUniqueId()),
d.appendChild(f);if("pattern"===b)f.setAttribute("patternUnits","userSpaceOnUse"),c=e._createElementNS(c,"image"),c.setAttribute("x",0),c.setAttribute("y",0),c.setAttribute("width",(0>a.width?0:a.width).toFixed(8)),c.setAttribute("height",(0>a.height?0:a.height).toFixed(8)),e._setAttributeNS(c,e.xmlns.xlink,"xlink:href",a.src),f.appendChild(c);else for(f.setAttribute("gradientUnits","userSpaceOnUse"),b=0;b<a.colors.length;++b){var d=a.colors[b],h=e._createElementNS(c,"stop"),l=d.color=k.normalizeColor(d.color);
h.setAttribute("offset",d.offset.toFixed(8));h.setAttribute("stop-color",l.toCss());h.setAttribute("stop-opacity",l.a);f.appendChild(h)}this.rawNode.setAttribute("fill","url(#"+f.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return f};l.prototype._applyTransform=function(){var a=this.matrix;a?this.rawNode.setAttribute("transform","matrix("+a[0].toFixed(8)+","+a[1].toFixed(8)+","+a[2].toFixed(8)+","+a[3].toFixed(8)+","+a[4].toFixed(8)+
","+a[5].toFixed(8)+")"):this.rawNode.removeAttribute("transform");return this};l.prototype.setRawNode=function(a){a=this.rawNode=a;"image"!==this.shape.type&&a.setAttribute("fill","none");a.setAttribute("fill-opacity",0);a.setAttribute("stroke","none");a.setAttribute("stroke-opacity",0);a.setAttribute("stroke-width",1);a.setAttribute("stroke-linecap","butt");a.setAttribute("stroke-linejoin","miter");a.setAttribute("stroke-miterlimit",4);a.__gfxObject__=this};l.prototype.setShape=function(a){this.shape=
k.makeParameters(this.shape,a);for(var b in this.shape)if("type"!==b){a=this.shape[b];if("width"===b||"height"===b)a=0>a?0:a;this.rawNode.setAttribute(b,a)}this.bbox=null;return this};l.prototype._moveToFront=function(){this.rawNode.parentNode.appendChild(this.rawNode);return this};l.prototype._moveToBack=function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this};l.prototype._removeClipNode=function(){var c,d=a.get(this.rawNode,"clip-path");d&&(c=
b.byId(d.match(/gfx_clip[\d]+/)[0]))&&c.parentNode.removeChild(c);return c};l.prototype.moveToFront=function(){var a=this.getParent();a&&(a._moveChildToFront(this),this._moveToFront());return this};l.prototype.moveToBack=function(){var a=this.getParent();a&&(a._moveChildToBack(this),this._moveToBack());return this};l.prototype.removeShape=function(a){this.parent&&this.parent.remove(this,a);return this};l.prototype._setParent=function(a,b){this.parent=a;return this._updateParentMatrix(b)};l.prototype._updateParentMatrix=
function(a){this.parentMatrix=a?c.clone(a):null;return this._applyTransform()};l.prototype._getRealMatrix=function(){for(var a=c.clone(this.matrix||c.create()),b=this.parent;b;)b.matrix&&a&&c.multiply(a,b.matrix,a),b=b.parent;return a};return l}();g.default=n})},"esri/views/2d/libs/gfx/svg":function(){define(["require","exports","dojo/dom"],function(n,g,b){Object.defineProperty(g,"__esModule",{value:!0});g.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};g.dasharray={solid:"none",
shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};g._createElementNS=function(a,b){return document.createElementNS?document.createElementNS(a,b):document.createElement(b)};g._setAttributeNS=function(a,b,d,k){return a.setAttributeNS?a.setAttributeNS(b,d,k):a.setAttribute(d,k)};g._createTextNode=function(a){return document.createTextNode(a)};g._createFragment=function(){return document.createDocumentFragment()};
g.getRef=function(a){return a&&"none"!==a?a.match(/^url\(#.+\)$/)?b.byId(a.slice(5,-1)):a.match(/^#dojoUnique\d+$/)?b.byId(a.slice(1)):null:null}})},"esri/views/2d/libs/gfx/Group":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojox/gfx/_base ./Circle ./Container ./Image ./Path ./Rect ./svg ./Text".split(" "),function(n,g,b,a,f,d,k,e,c,l,h){Object.defineProperty(g,"__esModule",{value:!0});n=function(d){function g(){return null!==d&&d.apply(this,arguments)||this}b(g,d);
g.prototype.setRawNode=function(a){this.rawNode=a;this.rawNode.__gfxObject__=this};g.prototype.destroy=function(){d.prototype.clear.call(this,!0);d.prototype.destroy.call(this)};g.prototype.createShape=function(b){switch(b.type){case a.defaultPath.type:return this.createPath(b);case a.defaultRect.type:return this.createRect(b);case a.defaultCircle.type:return this.createCircle(b);case a.defaultImage.type:return this.createImage(b);case a.defaultText.type:return this.createText(b)}console.error("[gfx] unknown shape",
b);return null};g.prototype.createGroup=function(){return this.createObject(g)};g.prototype.createRect=function(a){return this.createObject(c.default,a)};g.prototype.createCircle=function(a){return this.createObject(f.default,a)};g.prototype.createImage=function(a){return this.createObject(k.default,a)};g.prototype.createText=function(a){return this.createObject(h.default,a)};g.prototype.createPath=function(a){return this.createObject(e.default,a)};g.prototype.createObject=function(a,b){if(!this.rawNode)return null;
var c=new a;a=l._createElementNS(l.xmlns.svg,a.nodeType);c.setRawNode(a);c.setShape(b);this.add(c);return c};g.nodeType="g";return g}(d.default);g.default=n})},"esri/views/2d/libs/gfx/Container":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojox/gfx/matrix ./Shape ./svg".split(" "),function(n,g,b,a,f,d){Object.defineProperty(g,"__esModule",{value:!0});n=function(f){function e(){var a=null!==f&&f.apply(this,arguments)||this;a.children=[];a._batch=0;return a}b(e,f);e.prototype.openBatch=
function(){this._batch||(this.fragment=d._createFragment());++this._batch;return this};e.prototype.closeBatch=function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),this.fragment=null);return this};e.prototype.add=function(a){if(this===a.getParent())return this;this.fragment?this.fragment.appendChild(a.rawNode):this.rawNode.appendChild(a.rawNode);var b=a.getParent();b&&b.remove(a,!0);this.children.push(a);a._setParent(this,this._getRealMatrix());
return this};e.prototype.remove=function(a,b){void 0===b&&(b=!1);if(this!==a.getParent())return this;this.rawNode===a.rawNode.parentNode&&this.rawNode.removeChild(a.rawNode);this.fragment&&this.fragment===a.rawNode.parentNode&&this.fragment.removeChild(a.rawNode);for(var c=0;c<this.children.length;++c)if(this.children[c]===a){b||(a.parent=null,a.parentMatrix=null);this.children.splice(c,1);break}return this};e.prototype.clear=function(a){void 0===a&&(a=!1);for(var b=this.rawNode;b.lastChild;)b.removeChild(b.lastChild);
var c=this.defNode;if(c){for(;c.lastChild;)c.removeChild(c.lastChild);b.appendChild(c)}for(c=0;c<this.children.length;++c)b=this.children[c],b.parent=null,b.parentMatrix=null,a&&b.destroy();this.children=[];return this};e.prototype.getBoundingBox=function(){if(!this.children)return null;var b=null;this.children.forEach(function(c){var d=c.getBoundingBox();d&&((c=c.getTransform())&&(d=a.multiplyRectangle(c,d)),b?(b.x=Math.min(b.x,d.x),b.y=Math.min(b.y,d.y),b.endX=Math.max(b.endX,d.x+d.width),b.endY=
Math.max(b.endY,d.y+d.height)):b={x:d.x,y:d.y,endX:d.x+d.width,endY:d.y+d.height,width:0,height:0})});b&&(b.width=b.endX-b.x,b.height=b.endY-b.y);return b};e.prototype._moveChildToFront=function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]===a){this.children.splice(b,1);this.children.push(a);break}return this};e.prototype._moveChildToBack=function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]===a){this.children.splice(b,1);this.children.unshift(a);break}return this};
return e}(f.default);g.default=n})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(n,g){var b=n.matrix={},a={};b._degToRad=function(b){return a[b]||(a[b]=Math.PI*b/180)};b._radToDeg=function(a){return a/Math.PI*180};b.Matrix2D=function(a){if(a)if("number"==typeof a)this.xx=this.yy=a;else if(a instanceof Array){if(0<a.length){for(var d=b.normalize(a[0]),f=1;f<a.length;++f){var e=d,c=b.normalize(a[f]),d=new b.Matrix2D;d.xx=e.xx*c.xx+e.xy*c.yx;d.xy=e.xx*c.xy+e.xy*c.yy;d.yx=
e.yx*c.xx+e.yy*c.yx;d.yy=e.yx*c.xy+e.yy*c.yy;d.dx=e.xx*c.dx+e.xy*c.dy+e.dx;d.dy=e.yx*c.dx+e.yy*c.dy+e.dy}g.mixin(this,d)}}else g.mixin(this,a)};g.extend(b.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});g.mixin(b,{identity:new b.Matrix2D,flipX:new b.Matrix2D({xx:-1}),flipY:new b.Matrix2D({yy:-1}),flipXY:new b.Matrix2D({xx:-1,yy:-1}),translate:function(a,d){return 1<arguments.length?new b.Matrix2D({dx:a,dy:d}):new b.Matrix2D({dx:a.x,dy:a.y})},scale:function(a,d){return 1<arguments.length?new b.Matrix2D({xx:a,
yy:d}):"number"==typeof a?new b.Matrix2D({xx:a,yy:a}):new b.Matrix2D({xx:a.x,yy:a.y})},rotate:function(a){var d=Math.cos(a);a=Math.sin(a);return new b.Matrix2D({xx:d,xy:-a,yx:a,yy:d})},rotateg:function(a){return b.rotate(b._degToRad(a))},skewX:function(a){return new b.Matrix2D({xy:Math.tan(a)})},skewXg:function(a){return b.skewX(b._degToRad(a))},skewY:function(a){return new b.Matrix2D({yx:Math.tan(a)})},skewYg:function(a){return b.skewY(b._degToRad(a))},reflect:function(a,d){1==arguments.length&&
(d=a.y,a=a.x);var f=a*a,e=d*d,c=f+e,l=2*a*d/c;return new b.Matrix2D({xx:2*f/c-1,xy:l,yx:l,yy:2*e/c-1})},project:function(a,d){1==arguments.length&&(d=a.y,a=a.x);var f=a*a,e=d*d,c=f+e,l=a*d/c;return new b.Matrix2D({xx:f/c,xy:l,yx:l,yy:e/c})},normalize:function(a){return a instanceof b.Matrix2D?a:new b.Matrix2D(a)},isIdentity:function(a){return 1==a.xx&&0==a.xy&&0==a.yx&&1==a.yy&&0==a.dx&&0==a.dy},clone:function(a){var d=new b.Matrix2D,f;for(f in a)"number"==typeof a[f]&&"number"==typeof d[f]&&d[f]!=
a[f]&&(d[f]=a[f]);return d},invert:function(a){a=b.normalize(a);var d=a.xx*a.yy-a.xy*a.yx;return a=new b.Matrix2D({xx:a.yy/d,xy:-a.xy/d,yx:-a.yx/d,yy:a.xx/d,dx:(a.xy*a.dy-a.yy*a.dx)/d,dy:(a.yx*a.dx-a.xx*a.dy)/d})},_multiplyPoint:function(a,b,k){return{x:a.xx*b+a.xy*k+a.dx,y:a.yx*b+a.yy*k+a.dy}},multiplyPoint:function(a,d,k){a=b.normalize(a);return"number"==typeof d&&"number"==typeof k?b._multiplyPoint(a,d,k):b._multiplyPoint(a,d.x,d.y)},multiplyRectangle:function(a,d){var f=b.normalize(a);d=d||{x:0,
y:0,width:0,height:0};if(b.isIdentity(f))return{x:d.x,y:d.y,width:d.width,height:d.height};a=b.multiplyPoint(f,d.x,d.y);var e=b.multiplyPoint(f,d.x,d.y+d.height),c=b.multiplyPoint(f,d.x+d.width,d.y);d=b.multiplyPoint(f,d.x+d.width,d.y+d.height);var f=Math.min(a.x,e.x,c.x,d.x),l=Math.min(a.y,e.y,c.y,d.y);return{x:f,y:l,width:Math.max(a.x,e.x,c.x,d.x)-f,height:Math.max(a.y,e.y,c.y,d.y)-l}},multiply:function(a){for(var d=b.normalize(a),f=1;f<arguments.length;++f){var e=d,c=b.normalize(arguments[f]),
d=new b.Matrix2D;d.xx=e.xx*c.xx+e.xy*c.yx;d.xy=e.xx*c.xy+e.xy*c.yy;d.yx=e.yx*c.xx+e.yy*c.yx;d.yy=e.yx*c.xy+e.yy*c.yy;d.dx=e.xx*c.dx+e.xy*c.dy+e.dx;d.dy=e.yx*c.dx+e.yy*c.dy+e.dy}return d},_sandwich:function(a,d,k){return b.multiply(b.translate(d,k),a,b.translate(-d,-k))},scaleAt:function(a,d,k,e){switch(arguments.length){case 4:return b._sandwich(b.scale(a,d),k,e);case 3:return"number"==typeof k?b._sandwich(b.scale(a),d,k):b._sandwich(b.scale(a,d),k.x,k.y)}return b._sandwich(b.scale(a),d.x,d.y)},rotateAt:function(a,
d,k){return 2<arguments.length?b._sandwich(b.rotate(a),d,k):b._sandwich(b.rotate(a),d.x,d.y)},rotategAt:function(a,d,k){return 2<arguments.length?b._sandwich(b.rotateg(a),d,k):b._sandwich(b.rotateg(a),d.x,d.y)},skewXAt:function(a,d,k){return 2<arguments.length?b._sandwich(b.skewX(a),d,k):b._sandwich(b.skewX(a),d.x,d.y)},skewXgAt:function(a,d,k){return 2<arguments.length?b._sandwich(b.skewXg(a),d,k):b._sandwich(b.skewXg(a),d.x,d.y)},skewYAt:function(a,d,k){return 2<arguments.length?b._sandwich(b.skewY(a),
d,k):b._sandwich(b.skewY(a),d.x,d.y)},skewYgAt:function(a,d,k){return 2<arguments.length?b._sandwich(b.skewYg(a),d,k):b._sandwich(b.skewYg(a),d.x,d.y)}});n.Matrix2D=b.Matrix2D;return b})},"esri/views/2d/libs/gfx/Image":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojox/gfx/_base ./Shape ./svg".split(" "),function(n,g,b,a,f,d){Object.defineProperty(g,"__esModule",{value:!0});n=function(f){function e(b){var c=f.call(this)||this;c.shape=a.getDefault("Image");c.rawNode=
b;return c}b(e,f);e.prototype.setShape=function(b){this.shape=a.makeParameters(this.shape,b);this.bbox=null;b=this.rawNode;for(var c in this.shape)if("type"!==c&&"src"!==c){var e=this.shape[c];if("width"===c||"height"===c)e=0>e?0:e;b.setAttribute(c,e)}b.setAttribute("preserveAspectRatio","none");d._setAttributeNS(b,d.xmlns.xlink,"xlink:href",this.shape.src);b.__gfxObject__=this;return this};e.prototype.getBoundingBox=function(){return this.shape};e.prototype.setStroke=function(){return this};e.prototype.setFill=
function(){return this};e.nodeType="image";return e}(f.default);g.default=n})},"esri/views/2d/libs/gfx/Path":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojo/_base/lang dojox/gfx/_base dojox/gfx/matrix ./Shape".split(" "),function(n,g,b,a,f,d,k){Object.defineProperty(g,"__esModule",{value:!0});n=function(e){function c(b){var c=e.call(this)||this;c.segments=[];c.tbbox=null;c.absolute=!0;c.last={};c.segmented=!1;c._validSegments={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0};
c._2PI=2*Math.PI;c.rawNode=b;c.shape=a.clone(f.defaultPath);return c}b(c,e);c.prototype.setAbsoluteMode=function(a){this._confirmSegmented();this.absolute="string"===typeof a?"absolute"===a:a;return this};c.prototype.getAbsoluteMode=function(){this._confirmSegmented();return this.absolute};c.prototype.getBoundingBox=function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null};c.prototype._getRealBBox=
function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var a=this.bbox,b=this._getRealMatrix();this.bbox=null;for(var c=this.segments.length,d=0;d<c;++d)this._updateWithSegment(this.segments[d],b);b=this.bbox;this.bbox=a;return this.tbbox=b?[{x:b.l,y:b.t},{x:b.r,y:b.t},{x:b.r,y:b.b},{x:b.l,y:b.b}]:null};c.prototype.getLastPosition=function(){this._confirmSegmented();return"x"in this.last?this.last:null};c.prototype._applyTransform=function(){this.tbbox=null;e.prototype._applyTransform.call(this);
return this};c.prototype._updateBBox=function(a,b,c){c&&(b=d.multiplyPoint(c,a,b),a=b.x,b=b.y);this.bbox&&"l"in this.bbox?(this.bbox.l>a&&(this.bbox.l=a),this.bbox.r<a&&(this.bbox.r=a),this.bbox.t>b&&(this.bbox.t=b),this.bbox.b<b&&(this.bbox.b=b)):this.bbox={l:a,b:b,r:a,t:b}};c.prototype._updateWithSegment=function(a,b){var c=a.args,d=c.length,e;switch(a.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(e=0;e<d;e+=2)this._updateBBox(c[e],c[e+1],b);this.last.x=c[d-2];this.last.y=c[d-
1];this.absolute=!0;break;case "H":for(e=0;e<d;++e)this._updateBBox(c[e],this.last.y,b);this.last.x=c[d-1];this.absolute=!0;break;case "V":for(e=0;e<d;++e)this._updateBBox(this.last.x,c[e],b);this.last.y=c[d-1];this.absolute=!0;break;case "m":e=0;"x"in this.last||(this._updateBBox(this.last.x=c[0],this.last.y=c[1],b),e=2);for(;e<d;e+=2)this._updateBBox(this.last.x+=c[e],this.last.y+=c[e+1],b);this.absolute=!1;break;case "l":case "t":for(e=0;e<d;e+=2)this._updateBBox(this.last.x+=c[e],this.last.y+=
c[e+1],b);this.absolute=!1;break;case "h":for(e=0;e<d;++e)this._updateBBox(this.last.x+=c[e],this.last.y,b);this.absolute=!1;break;case "v":for(e=0;e<d;++e)this._updateBBox(this.last.x,this.last.y+=c[e],b);this.absolute=!1;break;case "c":for(e=0;e<d;e+=6)this._updateBBox(this.last.x+c[e],this.last.y+c[e+1],b),this._updateBBox(this.last.x+c[e+2],this.last.y+c[e+3],b),this._updateBBox(this.last.x+=c[e+4],this.last.y+=c[e+5],b);this.absolute=!1;break;case "s":case "q":for(e=0;e<d;e+=4)this._updateBBox(this.last.x+
c[e],this.last.y+c[e+1],b),this._updateBBox(this.last.x+=c[e+2],this.last.y+=c[e+3],b);this.absolute=!1;break;case "A":for(e=0;e<d;e+=7)this._updateBBox(c[e+5],c[e+6],b);this.last.x=c[d-2];this.last.y=c[d-1];this.absolute=!0;break;case "a":for(e=0;e<d;e+=7)this._updateBBox(this.last.x+=c[e+5],this.last.y+=c[e+6],b);this.absolute=!1}a=[a.action];for(e=0;e<d;++e)a.push(f.formatNumber(c[e],!0));if("string"===typeof this.shape.path)this.shape.path+=a.join("");else for(e=0,d=a.length;e<d;++e)this.shape.path.push(a[e]);
"string"===typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)};c.prototype._pushSegment=function(a,b){this.tbbox=null;var c=this._validSegments[a.toLowerCase()];"number"===typeof c&&(c?b.length>=c&&(a={action:a,args:b.slice(0,b.length-b.length%c)},this.segments.push(a),this._updateWithSegment(a)):(a={action:a,args:[]},this.segments.push(a),this._updateWithSegment(a)))};c.prototype._collectArgs=function(a,b){for(var c=0;c<b.length;++c){var d=b[c];"boolean"===typeof d?a.push(d?1:
0):"number"===typeof d?a.push(d):d instanceof Array?this._collectArgs(a,d):"x"in d&&"y"in d&&a.push(d.x,d.y)}};c.prototype._confirmSegmented=function(){if(!this.segmented){var a=this.shape.path;this.shape.path=[];this._setPath(a);this.shape.path=this.shape.path.join("");this.segmented=!0}};c.prototype._setPath=function(b){b=a.isArray(b)?b:b.match(f.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(b){for(var c="",d=[],e=b.length,k=0;k<e;++k){var l=b[k],g=parseFloat(l);
isNaN(g)?(c&&this._pushSegment(c,d),d=[],c=l):d.push(g)}this._pushSegment(c,d)}};c.prototype.setShape=function(a){e.prototype.setShape.call(this,"string"===typeof a?{path:a}:a);this.segmented=!1;this.segments=[];this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this};c.nodeType="path";return c}(k.default);g.default=n})},"esri/views/2d/libs/gfx/Rect":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","dojox/gfx/_base",
"./Shape"],function(n,g,b,a,f){Object.defineProperty(g,"__esModule",{value:!0});n=function(d){function f(b){var c=d.call(this)||this;c.shape=a.getDefault("Rect");c.rawNode=b;return c}b(f,d);f.prototype.getBoundingBox=function(){return this.shape};f.prototype.setShape=function(b){this.shape=a.makeParameters(this.shape,b);this.bbox=null;for(var c in this.shape)if("type"!==c&&"r"!==c){b=this.shape[c];if("width"===c||"height"===c)b=0>b?0:b;this.rawNode.setAttribute(c,b)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",
this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this};f.nodeType="rect";return f}(f.default);g.default=n})},"esri/views/2d/libs/gfx/Text":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojo/has dojox/gfx/_base ./Shape ./svg".split(" "),function(n,g,b,a,f,d,k){Object.defineProperty(g,"__esModule",{value:!0});var e=a("chrome")?"auto":"optimizeLegibility";n=function(a){function c(b){var c=a.call(this)||this;c.fontStyle=null;c.shape=f.getDefault("Text");
c.rawNode=b;return c}b(c,a);c.prototype.getFont=function(){return this.fontStyle};c.prototype.setFont=function(a){this.fontStyle="string"===typeof a?f.splitFontString(a):f.makeParameters(f.defaultFont,a);this._setFont();return this};c.prototype._setFont=function(){var a=this.fontStyle;this.rawNode.setAttribute("font-style",a.style);this.rawNode.setAttribute("font-weight",a.weight);this.rawNode.setAttribute("font-size",a.size);this.rawNode.setAttribute("font-family",a.family)};c.prototype.setShape=
function(a){this.shape=f.makeParameters(this.shape,a);this.bbox=null;a=this.rawNode;var b=this.shape;a.setAttribute("x",b.x);a.setAttribute("y",b.y);a.setAttribute("text-anchor",b.align);a.setAttribute("text-decoration",b.decoration);a.setAttribute("rotate",b.rotated?90:0);a.setAttribute("kerning",b.kerning?"auto":0);a.setAttribute("text-rendering",e);a.firstChild?a.firstChild.nodeValue=b.text:a.appendChild(k._createTextNode(b.text));return this};c.prototype.getTextWidth=function(){var a=this.rawNode,
b=a.parentNode,a=a.cloneNode(!0);a.style.visibility="hidden";var c=0,d=a.firstChild.nodeValue;b.appendChild(a);if(""!==d)for(;!c;)c=a.getBBox?parseInt(a.getBBox().width,10):68;b.removeChild(a);return c};c.prototype.getBoundingBox=function(){var a=null;if(this.getShape().text)try{a=this.rawNode.getBBox()}catch(m){a={x:0,y:0,width:0,height:0}}return a};c.nodeType="text";return c}(d.default);g.default=n})},"esri/views/2d/libs/gfx/Surface":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojo/dom-construct dojo/has dojox/gfx/_base ./Circle ./Container ./Group ./Image ./Path ./Rect ./svg ./Text".split(" "),
function(n,g,b,a,f,d,k,e,c,l,h,m,p,r){Object.defineProperty(g,"__esModule",{value:!0});var t=navigator.userAgent,q=534<function(){var a=/WebKit\/(\d*)/.exec(t);return a?parseInt(a[1],10):0}();n=function(e){function g(){var a=null!==e&&e.apply(this,arguments)||this;a.rawNode=null;a._parent=null;a._nodes=[];a._events=[];return a}b(g,e);g.prototype.destroy=function(){this._nodes.forEach(a.destroy);this._nodes=[];this._events.forEach(function(a){a&&a.remove()});this._events=[];this.rawNode=null;if(f("ie"))for(;this._parent.lastChild;)a.destroy(this._parent.lastChild);
else this._parent.innerHTML="";this.defNode=this._parent=null};g.prototype.setDimensions=function(a,b){if(!this.rawNode)return this;a=0>a?0:a;b=0>b?0:b;this.rawNode.setAttribute("width",a);this.rawNode.setAttribute("height",b);q&&(this.rawNode.style.width=a,this.rawNode.style.height=b);return this};g.prototype.getDimensions=function(){return this.rawNode?{width:d.normalizedLength(this.rawNode.getAttribute("width")),height:d.normalizedLength(this.rawNode.getAttribute("height"))}:null};g.prototype.getEventSource=
function(){return this.rawNode};g.prototype._getRealMatrix=function(){return null};g.prototype.createShape=function(a){switch(a.type){case d.defaultPath.type:return this.createPath(a);case d.defaultRect.type:return this.createRect(a);case d.defaultCircle.type:return this.createCircle(a);case d.defaultImage.type:return this.createImage(a);case d.defaultText.type:return this.createText(a)}console.error("[gfx] unknown shape",a);return null};g.prototype.createGroup=function(){return this.createObject(c.default)};
g.prototype.createRect=function(a){return this.createObject(m.default,a)};g.prototype.createCircle=function(a){return this.createObject(k.default,a)};g.prototype.createImage=function(a){return this.createObject(l.default,a)};g.prototype.createText=function(a){return this.createObject(r.default,a)};g.prototype.createPath=function(a){return this.createObject(h.default,a)};g.prototype.createObject=function(a,b){if(!this.rawNode)return null;var c=new a;a=p._createElementNS(p.xmlns.svg,a.nodeType);c.setRawNode(a);
c.setShape(b);this.add(c);return c};return g}(e.default);g.default=n})},"esri/views/2d/libs/gfx/svgSurface":function(){define(["require","exports","dojo/dom","./Surface","./svg"],function(n,g,b,a,f){Object.defineProperty(g,"__esModule",{value:!0});g.createSurface=function(d,k,e){var c=new a.default;c.rawNode=f._createElementNS(f.xmlns.svg,"svg");c.rawNode.setAttribute("overflow","hidden");k&&c.rawNode.setAttribute("width",0>k?0:k);e&&c.rawNode.setAttribute("height",0>e?0:e);k=f._createElementNS(f.xmlns.svg,
"defs");c.rawNode.appendChild(k);c.defNode=k;c._parent=b.byId(d);c._parent.appendChild(c.rawNode);return c}})},"esri/views/layers/GraphicsView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(n,g,b,a,f,d){return function(f){function e(){var a=null!==f&&f.apply(this,arguments)||this;a.graphics=null;a.renderer=null;a.view=null;return a}b(e,f);a([d.property()],
e.prototype,"graphics",void 0);a([d.property()],e.prototype,"renderer",void 0);a([d.property()],e.prototype,"view",void 0);return e=a([d.subclass("esri.views.layers.GraphicsView")],e)}(d.declared(f))})},"esri/views/2d/navigation/MapViewNavigation":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Viewpoint ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../geometry/Point ../viewpointUtils ./ZoomBox ./actions/Pan ./actions/Pinch ./actions/Rotate".split(" "),
function(n,g,b,a,f,d,k,e,c,l,h,m,p){var r=new f({targetGeometry:new e}),t=[0,0];return function(d){function e(a){a=d.call(this)||this;a.animationManager=null;return a}b(e,d);e.prototype.initialize=function(){this.pan=new h({navigation:this});this.rotate=new p({navigation:this});this.pinch=new m({navigation:this});this.zoomBox=new l({view:this.view,navigation:this})};e.prototype.destroy=function(){this.zoomBox.destroy();this.animationManager=this.zoomBox=null};e.prototype.begin=function(){this._set("interacting",
!0)};e.prototype.end=function(){this._set("interacting",!1)};e.prototype.zoom=function(a,b){void 0===b&&(b=this._getDefaultAnchor());this.stop();this.begin();if(this.view.constraints.snapToZoom&&this.view.constraints.effectiveLODs)return 1>a?this.zoomIn(b):this.zoomOut(b);this.setViewpoint(b,a,0)};e.prototype.zoomIn=function(a){void 0===a&&(a=this._getDefaultAnchor());var b=this.view,c=b.scale,d=b.constraints.snapToNextScale(c);return b.goTo(this._scaleAndRotateViewpoint(r,a,d/c,0))};e.prototype.zoomOut=
function(a){void 0===a&&(a=this._getDefaultAnchor());var b=this.view,c=b.scale,d=b.constraints.snapToPreviousScale(c);return b.goTo(this._scaleAndRotateViewpoint(r,a,d/c,0))};e.prototype.setViewpoint=function(a,b,c){this.begin();this.view.state.viewpoint=this._scaleAndRotateViewpoint(r,a,b,c);this.end()};e.prototype.animateViewpoint=function(a,b,c){return this.view.goTo(this._scaleAndRotateViewpoint(r,a,b,c))};e.prototype.continousRotateClockwise=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,
function(a){c.rotateBy(a,a,-1)})};e.prototype.continousRotateCounterclockwise=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){c.rotateBy(a,a,1)})};e.prototype.resetRotation=function(){this.view.rotation=0};e.prototype.continousPanLeft=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){c.translateBy(a,a,[-10,0])})};e.prototype.continousPanRight=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,
function(a){c.translateBy(a,a,[10,0])})};e.prototype.continousPanUp=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){c.translateBy(a,a,[0,10])})};e.prototype.continousPanDown=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){c.translateBy(a,a,[0,-10])})};e.prototype.stop=function(){this.pan.stopMomentumNavigation();this.animationManager.stop();this.end()};e.prototype._getDefaultAnchor=function(){var a=this.view.size;
t[0]=.5*a[0];t[1]=.5*a[1];return t};e.prototype._scaleAndRotateViewpoint=function(a,b,d,e){var f=this.view,h=f.size,k=f.padding,g=f.constraints,l=f.viewpoint,m=f.scale*d,f=g.canZoomInTo(m),g=g.canZoomOutTo(m);return 1>d&&!f||1<d&&!g?l:c.padAndScaleAndRotateBy(a,l,d,e,b,h,k)};a([k.property()],e.prototype,"animationManager",void 0);a([k.property({type:Boolean,readOnly:!0})],e.prototype,"interacting",void 0);a([k.property()],e.prototype,"pan",void 0);a([k.property()],e.prototype,"pinch",void 0);a([k.property()],
e.prototype,"rotate",void 0);a([k.property()],e.prototype,"view",void 0);a([k.property()],e.prototype,"zoomBox",void 0);return e=a([k.subclass("esri.views.2d.navigation.MapViewNavigation")],e)}(k.declared(d))})},"esri/views/2d/navigation/ZoomBox":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(n,g,b,a,f,d){return function(f){function e(a){a=f.call(this,
a)||this;a._container=null;a._overlay=null;a._backgroundShape=null;a._boxShape=null;a._box={x:0,y:0,width:0,height:0};a._redraw=a._redraw.bind(a);return a}b(e,f);e.prototype.destroy=function(){this.view=null};Object.defineProperty(e.prototype,"view",{set:function(a){var b=this;this._handles&&this._handles.forEach(function(a){a.remove()});this._handles=null;this._destroyOverlay();this._set("view",a);a&&(a.on("drag",["Shift"],function(a){return b._handleDrag(a,1)}),a.on("drag",["Shift","Ctrl"],function(a){return b._handleDrag(a,
-1)}))},enumerable:!0,configurable:!0});e.prototype._start=function(a,b,d,e){this._createContainer();this._createOverlay();this.navigation.begin()};e.prototype._update=function(a,b,d,e){this._box.x=a;this._box.y=b;this._box.width=d;this._box.height=e;this._rafId||(this._rafId=requestAnimationFrame(this._redraw))};e.prototype._end=function(a,b,d,e,f){var c=this.view;a=c.toMap(a+.5*d,b+.5*e);d=Math.max(d/c.width,e/c.height);-1===f&&(d=1/d);this._destroyOverlay();this.navigation.end();c.goTo({center:a,
scale:c.scale*d})};e.prototype._updateBox=function(a,b,d,e){var c=this._boxShape;c.setAttributeNS(null,"x",""+a);c.setAttributeNS(null,"y",""+b);c.setAttributeNS(null,"width",""+d);c.setAttributeNS(null,"height",""+e);c.setAttributeNS(null,"class","esri-zoom-box__outline")};e.prototype._updateBackground=function(a,b,d,e){this._backgroundShape.setAttributeNS(null,"d",this._toSVGPath(a,b,d,e,this.view.width,this.view.height))};e.prototype._createContainer=function(){var a=document.createElement("div");
a.className="esri-zoom-box__container";this.view.root.appendChild(a);this._container=a};e.prototype._createOverlay=function(){var a=this.view.width,b=this.view.height,d=document.createElementNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M 0 0 L "+a+" 0 L "+a+" "+b+" L 0 "+b+" Z");d.setAttributeNS(null,"class","esri-zoom-box__overlay-background");a=document.createElementNS("http://www.w3.org/2000/svg","rect");b=document.createElementNS("http://www.w3.org/2000/svg","svg");b.setAttributeNS("http://www.w3.org/2000/xmlns/",
"xmlns:xlink","http://www.w3.org/1999/xlink");b.setAttributeNS(null,"class","esri-zoom-box__overlay");b.appendChild(d);b.appendChild(a);this._container.appendChild(b);this._backgroundShape=d;this._boxShape=a;this._overlay=b};e.prototype._destroyOverlay=function(){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container);this._container=this._backgroundShape=this._boxShape=this._overlay=null};e.prototype._toSVGPath=function(a,b,d,e,f,k){d=a+d;e=b+e;return"M 0 0 L "+
f+" 0 L "+f+" "+k+" L 0 "+k+" ZM "+a+" "+b+" L "+a+" "+e+" L "+d+" "+e+" L "+d+" "+b+" Z"};e.prototype._handleDrag=function(a,b){var c=a.x,d=a.y,e=a.origin.x,f=a.origin.y,k;c>e?(k=e,e=c-e):(k=c,e-=c);d>f?(c=f,d-=f):(c=d,d=f-d);switch(a.action){case "start":this._start(k,c,e,d);break;case "update":this._update(k,c,e,d);break;case "end":this._end(k,c,e,d,b)}a.stopPropagation()};e.prototype._redraw=function(){if(this._rafId&&(this._rafId=null,this._overlay)){var a=this._box,b=a.x,d=a.y,e=a.width,a=a.height;
this._updateBox(b,d,e,a);this._updateBackground(b,d,e,a);this._rafId=requestAnimationFrame(this._redraw)}};a([d.property()],e.prototype,"navigation",void 0);a([d.property()],e.prototype,"view",null);return e=a([d.subclass("esri.views.2d.navigation.ZoomBox")],e)}(d.declared(f))})},"esri/views/2d/navigation/actions/Pan":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/accessorSupport/decorators ../../viewpointUtils ../../../3d/lib/glMatrix ../../../navigation/PanPlanarMomentumEstimator".split(" "),
function(n,g,b,a,f,d,k,e,c){return function(f){function h(a){var b=f.call(this)||this;b.animationTime=0;b.momentumEstimator=new c.PanPlanarMomentumEstimator(500,6,.92);b.momentum=null;b.tmpMomentum=e.vec3.create();b.momentumFinished=!1;b.viewpoint=k.create();b.watch("momentumFinished",function(a){a&&b.navigation.stop()});return b}b(h,f);h.prototype.begin=function(a,b){this.navigation.begin();this.momentumEstimator.reset();this.addToEstimator(b);this.previousDrag=b};h.prototype.update=function(a,b){this.addToEstimator(b);
var c=b.center.x,d=b.center.y,e=this.previousDrag,c=e?e.center.x-c:-c,d=e?d-e.center.y:d;a.viewpoint=k.translateBy(this.viewpoint,a.viewpoint,[c||0,d||0]);this.previousDrag=b};h.prototype.end=function(a,b){this.addToEstimator(b);this.momentum=this.momentumEstimator.evaluateMomentum();this.animationTime=0;if(this.momentum)this.onAnimationUpdate(a);this.previousDrag=null;this.navigation.end()};h.prototype.addToEstimator=function(a){var b=e.vec3.createFrom(-a.center.x,a.center.y,0);this.momentumEstimator.add(b,
b,.001*a.timestamp)};h.prototype.onAnimationUpdate=function(a){var b=this;this.navigation.animationManager.animateContinous(a.viewpoint,function(c,d){b.momentumFinished=!b.momentum||b.momentum.isFinished(b.animationTime);d*=.001;if(!b.momentumFinished){var f=b.momentum.valueDelta(b.animationTime,d);e.vec3.scale(b.momentum.direction,f,b.tmpMomentum);a.viewpoint=k.translateBy(c,c,b.tmpMomentum)}b.animationTime+=d})};h.prototype.stopMomentumNavigation=function(){this.momentum&&(this.momentumEstimator.reset(),
this.momentum=null,this.navigation.stop())};a([d.property()],h.prototype,"momentumFinished",void 0);a([d.property()],h.prototype,"viewpoint",void 0);a([d.property()],h.prototype,"navigation",void 0);return h=a([d.subclass("esri.views.2d.navigation.actions.Pan")],h)}(d.declared(f))})},"esri/views/navigation/PanPlanarMomentumEstimator":function(){define("require exports ../../core/tsSupport/extendsHelper ../3d/lib/glMatrix ./FilteredFiniteDifference ./Momentum".split(" "),function(n,g,b,a,f,d){Object.defineProperty(g,
"__esModule",{value:!0});var k=function(a){function c(b,c,d,e,f){b=a.call(this,b,c,d)||this;b.sceneVelocity=e;b.direction=f;return b}b(c,a);c.prototype.value=function(b){return a.prototype.valueFromInitialVelocity.call(this,this.sceneVelocity,b)};return c}(d.Momentum);g.PanPlanarMomentum=k;n=function(){function b(b,d,e){void 0===b&&(b=300);void 0===d&&(d=12);void 0===e&&(e=.84);this.minimumInitialVelocity=b;this.stopVelocity=d;this.friction=e;this.time=new f.FilteredFiniteDifference(.6);this.screen=
[new f.FilteredFiniteDifference(.4),new f.FilteredFiniteDifference(.4)];this.scene=[new f.FilteredFiniteDifference(.6),new f.FilteredFiniteDifference(.6),new f.FilteredFiniteDifference(.6)];this.tmpDirection=a.vec3d.create()}b.prototype.add=function(a,b,d){this.time.hasLastValue&&.015>this.time.computeDelta(d)||(this.screen[0].update(a[0]),this.screen[1].update(a[1]),this.scene[0].update(b[0]),this.scene[1].update(b[1]),this.scene[2].update(b[2]),this.time.update(d))};b.prototype.reset=function(){this.screen[0].reset();
this.screen[1].reset();this.scene[0].reset();this.scene[1].reset();this.scene[2].reset();this.time.reset()};b.prototype.evaluateMomentum=function(){if(!this.screen[0].hasFilteredDelta)return null;var a=this.screen[0].filteredDelta,b=this.screen[1].filteredDelta,a=Math.sqrt(a*a+b*b)/this.time.filteredDelta;return Math.abs(a)<this.minimumInitialVelocity?null:this.createMomentum(a,this.stopVelocity,this.friction)};b.prototype.createMomentum=function(b,d,e){a.vec3d.set3(this.scene[0].filteredDelta,this.scene[1].filteredDelta,
this.scene[2].filteredDelta,this.tmpDirection);var c=a.vec3d.length(this.tmpDirection);0<c&&a.vec3d.scale(this.tmpDirection,1/c);return new k(b,d,e,c/this.time.filteredDelta,this.tmpDirection)};return b}();g.PanPlanarMomentumEstimator=n})},"esri/views/navigation/FilteredFiniteDifference":function(){define(["require","exports"],function(n,g){Object.defineProperty(g,"__esModule",{value:!0});n=function(){function b(a){this.gain=a}b.prototype.update=function(a){if(this.hasLastValue){var b=this.computeDelta(a);
this.updateDelta(b)}this.lastValue=a};b.prototype.reset=function(){this.filteredDelta=this.lastValue=void 0};Object.defineProperty(b.prototype,"hasLastValue",{get:function(){return void 0!==this.lastValue},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hasFilteredDelta",{get:function(){return void 0!==this.filteredDelta},enumerable:!0,configurable:!0});b.prototype.computeDelta=function(a){return a-this.lastValue};b.prototype.updateDelta=function(a){this.filteredDelta=this.hasFilteredDelta?
(1-this.gain)*this.filteredDelta+this.gain*a:a};return b}();g.FilteredFiniteDifference=n})},"esri/views/navigation/Momentum":function(){define(["require","exports","../../core/tsSupport/extendsHelper"],function(n,g,b){Object.defineProperty(g,"__esModule",{value:!0});n=function(){function a(a,b,k){this._initialVelocity=a;this._stopVelocity=b;this._friction=k;this._duration=Math.abs(Math.log(Math.abs(this._initialVelocity)/this._stopVelocity)/Math.log(1-this._friction))}Object.defineProperty(a.prototype,
"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0});a.prototype.isFinished=function(a){return a>this.duration};Object.defineProperty(a.prototype,"friction",{get:function(){return this._friction},enumerable:!0,configurable:!0});a.prototype.value=function(a){return this.valueFromInitialVelocity(this._initialVelocity,a)};a.prototype.valueDelta=function(a,b){var d=this.value(a);return this.value(a+b)-d};a.prototype.valueFromInitialVelocity=function(a,b){b=Math.min(b,this.duration);
var d=1-this.friction;return a*(Math.pow(d,b)-1)/Math.log(d)};return a}();g.Momentum=n})},"esri/views/2d/navigation/actions/Pinch":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/accessorSupport/decorators ../../viewpointUtils ../../libs/gl-matrix/vec2 ../../../navigation/RotationMomentumEstimator ../../../navigation/ZoomMomentumEstimator".split(" "),function(n,g,b,a,f,d,k,e,c,l){return function(f){function h(a){var b=
f.call(this,a)||this;b._animationTime=0;b._momentumFinished=!1;b._rotateMomentumEstimator=new c.RotationMomentumEstimator(.6,.15,.95);b._rotationDirection=1;b._zoomDirection=1;b._zoomFirst=null;b._zoomMomentumEstimator=new l.ZoomMomentumEstimator;b.zoomMomentum=null;b.rotateMomentum=null;b.viewpoint=k.create();b.watch("_momentumFinished",function(a){a&&b.navigation.stop()});return b}b(h,f);h.prototype.begin=function(a,b){this.navigation.begin();this._rotateMomentumEstimator.reset();this._zoomMomentumEstimator.reset();
this._previousAngle=this._startAngle=b.angle;this._previousRadius=this._startRadius=b.radius;this._startTimestamp=b.timestamp;a.constraints.rotationEnabled&&this.addToRotateEstimator(0,b.timestamp);this.addToZoomEstimator(b,1)};h.prototype.update=function(a,b){if(!(100>b.timestamp-this._startTimestamp)){var c=b.angle,d=b.radius,e=b.center,f=180*Math.abs(c-this._startAngle)/Math.PI,h=Math.abs(d-this._startRadius);if(!(1>=f&&1>=h)){var k=this._startRadius/d;this._previousRadius&&(d/=this._previousRadius,
c=180*(c-this._previousAngle)/Math.PI,this._rotationDirection=0<=c?1:-1,this._zoomDirection=1<=d?1:-1,f=h-f,null==this._zoomFirst&&(this._zoomFirst=0<f?!0:!1),this._zoomFirst?c=0:null!=this._zoomFirst&&a.constraints.rotationEnabled&&.5<Math.abs(c)&&this.addToRotateEstimator(b.angle-this._startAngle,b.timestamp),this.addToZoomEstimator(b,k),this._center=e,this.navigation.setViewpoint([e.x,e.y],1/d,c));this._previousAngle=b.angle;this._previousRadius=b.radius}}};h.prototype.end=function(a,b){this._zoomFirst=
null;this.rotateMomentum=this._rotateMomentumEstimator.evaluateMomentum();this.zoomMomentum=this._zoomMomentumEstimator.evaluateMomentum();this._animationTime=0;if(this.rotateMomentum||this.zoomMomentum)this.onAnimationUpdate(a);this.navigation.end()};h.prototype.addToRotateEstimator=function(a,b){this._rotateMomentumEstimator.add(a,.001*b)};h.prototype.addToZoomEstimator=function(a,b){this._zoomMomentumEstimator.add(b,.001*a.timestamp)};h.prototype.canZoomIn=function(a){var b=a.scale;a=a.constraints.effectiveMaxScale;
return 0===a||b>a};h.prototype.canZoomOut=function(a){var b=a.scale;a=a.constraints.effectiveMinScale;return 0===a||b<a};h.prototype.onAnimationUpdate=function(a){var b=this;this.navigation.animationManager.animateContinous(a.viewpoint,function(c,d){var f=!b.canZoomIn(a)&&1<b._zoomDirection||!b.canZoomOut(a)&&1>b._zoomDirection,h=!b.rotateMomentum||b.rotateMomentum.isFinished(b._animationTime),f=f||!b.zoomMomentum||b.zoomMomentum.isFinished(b._animationTime);d*=.001;b._momentumFinished=h&&f;if(!b._momentumFinished){var h=
b.rotateMomentum?Math.abs(b.rotateMomentum.valueDelta(b._animationTime,d))*b._rotationDirection*180/Math.PI:0,f=b.zoomMomentum?Math.abs(b.zoomMomentum.valueDelta(b._animationTime,d)):1,g=e.create(),l=e.create();b._center&&(e.set(g,b._center.x,b._center.y),k.getPaddingScreenTranslation(l,a.size,a.padding),e.add(g,g,l),k.scaleAndRotateBy(c,a.viewpoint,f,h,g,a.size))}b._animationTime+=d})};h.prototype.stopMomentumNavigation=function(){if(this.rotateMomentum||this.zoomMomentum)this.rotateMomentum&&(this._rotateMomentumEstimator.reset(),
this.rotateMomentum=null),this.zoomMomentum&&(this._zoomMomentumEstimator.reset(),this.zoomMomentum=null),this.navigation.stop()};a([d.property()],h.prototype,"_momentumFinished",void 0);a([d.property()],h.prototype,"viewpoint",void 0);a([d.property()],h.prototype,"navigation",void 0);return h=a([d.subclass("esri.views.2d.navigation.actions.Pinch")],h)}(d.declared(f))})},"esri/views/navigation/RotationMomentumEstimator":function(){define(["require","exports","../../core/tsSupport/extendsHelper","./MomentumEstimator"],
function(n,g,b,a){Object.defineProperty(g,"__esModule",{value:!0});n=function(a){function d(b,d,c,f){void 0===b&&(b=3);void 0===d&&(d=.01);void 0===c&&(c=.95);void 0===f&&(f=12);return a.call(this,b,d,c,f)||this}b(d,a);d.prototype.add=function(b,d){if(this.value.hasLastValue){var c=this.value.lastValue;for(b-=c;b>Math.PI;)b-=2*Math.PI;for(;b<-Math.PI;)b+=2*Math.PI;b=c+b}a.prototype.add.call(this,b,d)};return d}(a.MomentumEstimator);g.RotationMomentumEstimator=n})},"esri/views/navigation/MomentumEstimator":function(){define("require exports ../../core/tsSupport/extendsHelper ../3d/support/mathUtils ./FilteredFiniteDifference ./Momentum".split(" "),
function(n,g,b,a,f,d){Object.defineProperty(g,"__esModule",{value:!0});n=function(){function b(a,b,d,h){void 0===a&&(a=2.5);void 0===b&&(b=.01);void 0===d&&(d=.95);void 0===h&&(h=12);this.minimumInitialVelocity=a;this.stopVelocity=b;this.friction=d;this.maxVelocity=h;this.value=new f.FilteredFiniteDifference(.8);this.time=new f.FilteredFiniteDifference(.3)}b.prototype.add=function(a,b){if(this.time.hasLastValue){if(.01>this.time.computeDelta(b))return;if(this.value.hasFilteredDelta){var c=this.value.computeDelta(a);
0>this.value.filteredDelta*c&&this.value.reset()}}this.time.update(b);this.value.update(a)};b.prototype.reset=function(){this.value.reset();this.time.reset()};b.prototype.evaluateMomentum=function(){if(!this.value.hasFilteredDelta)return null;var b=this.value.filteredDelta/this.time.filteredDelta,b=a.clamp(b,-this.maxVelocity,this.maxVelocity);return Math.abs(b)<this.minimumInitialVelocity?null:this.createMomentum(b,this.stopVelocity,this.friction)};b.prototype.createMomentum=function(a,b,f){return new d.Momentum(a,
b,f)};return b}();g.MomentumEstimator=n})},"esri/views/navigation/ZoomMomentumEstimator":function(){define(["require","exports","../../core/tsSupport/extendsHelper","./Momentum","./MomentumEstimator"],function(n,g,b,a,f){Object.defineProperty(g,"__esModule",{value:!0});var d=function(a){function d(b,d,e){return a.call(this,b,d,e)||this}b(d,a);d.prototype.value=function(b){b=a.prototype.value.call(this,b);return Math.exp(b)};d.prototype.valueDelta=function(b,d){var c=a.prototype.value.call(this,b);
b=a.prototype.value.call(this,b+d);return Math.exp(b-c)};return d}(a.Momentum);g.ZoomMomentum=d;n=function(a){function e(b,d,e,f){void 0===b&&(b=2.5);void 0===d&&(d=.01);void 0===e&&(e=.95);void 0===f&&(f=12);return a.call(this,b,d,e,f)||this}b(e,a);e.prototype.add=function(b,d){a.prototype.add.call(this,Math.log(b),d)};e.prototype.createMomentum=function(a,b,e){return new d(a,b,e)};return e}(f.MomentumEstimator);g.ZoomMomentumEstimator=n})},"esri/views/2d/navigation/actions/Rotate":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/accessorSupport/decorators ../../viewpointUtils ../../libs/gl-matrix/vec2".split(" "),
function(n,g,b,a,f,d,k,e){return function(c){function f(a){a=c.call(this)||this;a.animationTime=0;a.viewpoint=k.create();return a}b(f,c);f.prototype.begin=function(a,b){this.navigation.begin();this.previousCenter=b.center};f.prototype.update=function(a,b){var c=e.create();e.set(c,b.center.x+a.padding.left-a.padding.right,a.height-b.center.y+a.padding.top-a.padding.bottom);var d=e.create();e.set(d,this.previousCenter.x+a.padding.left-a.padding.right,a.height-this.previousCenter.y+a.padding.top-a.padding.bottom);
c=k.angleBetween([a.state.paddedScreenCenter[0]+a.padding.left-a.padding.right,a.state.paddedScreenCenter[1]],c,d);a.viewpoint=k.rotateBy(this.viewpoint,a.content.viewpoint,c);this.previousCenter=b.center};f.prototype.end=function(a,b){this.navigation.end()};a([d.property()],f.prototype,"viewpoint",void 0);a([d.property()],f.prototype,"navigation",void 0);return f=a([d.subclass("esri.views.2d.actions.Rotate")],f)}(d.declared(f))})},"esri/views/2d/support/HighlightOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),
function(n,g,b,a,f,d,k){return function(d){function c(){var a=null!==d&&d.apply(this,arguments)||this;a.color=new f([0,255,255]);a.haloOpacity=1;a.fillOpacity=.5;return a}b(c,d);a([k.property({type:f})],c.prototype,"color",void 0);a([k.property()],c.prototype,"haloOpacity",void 0);a([k.property()],c.prototype,"fillOpacity",void 0);return c=a([k.subclass("esri.views.2d.support.HighlightOptions")],c)}(k.declared(d))})},"esri/views/ui/2d/DefaultUI2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../DefaultUI".split(" "),
function(n,g,b,a,f,d){return function(d){function e(a){a=d.call(this)||this;a.components=["attribution","zoom"];return a}b(e,d);a([f.property()],e.prototype,"components",void 0);return e=a([f.subclass("esri.views.ui.2d.DefaultUI2D")],e)}(f.declared(d))})},"esri/views/ui/DefaultUI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/dom-geometry ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(n,g,b,a,f,d,k,e,c,l,h,m,p){return function(c){function g(a){a=c.call(this)||this;a._defaultPositionLookup=null;a.components=[];return a}b(g,c);g.prototype.initialize=function(){this._handles.add([d.init(this,"components",this._componentsWatcher.bind(this)),d.init(this,"view",this._updateViewAwareWidgets.bind(this))])};g.prototype._findComponentPosition=function(a){if(!this._defaultPositionLookup){var b=f.isBodyLtr();this._defaultPositionLookup={attribution:"manual",compass:b?"top-left":"top-right",
"navigation-toggle":b?"top-left":"top-right",zoom:b?"top-left":"top-right"}}return this._defaultPositionLookup[a]};g.prototype._removeComponents=function(a){var b=this;a.forEach(function(a){if(a=b.find(a))b.remove(a),a.destroy()})};g.prototype._updateViewAwareWidgets=function(a){var b=this;this.components.forEach(function(c){(c=(c=b.find(c))&&c.widget)&&void 0!==c.view&&c.set("view",a)})};g.prototype._componentsWatcher=function(a,b){this._removeComponents(b);this._addComponents(a);this._adjustPadding(a)};
g.prototype._adjustPadding=function(a){-1!==a.indexOf("attribution")||this._isOverridden("padding")||(this.padding=this.padding.top)};g.prototype._addComponents=function(a){var b=this;this.initialized&&a.forEach(function(a){return b.add(b._createComponent(a),b._findComponentPosition(a))})};g.prototype._createComponent=function(a){var b=this._createWidget(a);if(b)return new e({id:a,node:b})};g.prototype._createWidget=function(a){if("attribution"===a)return this._createAttribution();if("compass"===
a)return this._createCompass();if("navigation-toggle"===a)return this._createNavigationToggle();if("zoom"===a)return this._createZoom()};g.prototype._createAttribution=function(){return new l({view:this.view})};g.prototype._createCompass=function(){return new h({view:this.view})};g.prototype._createNavigationToggle=function(){return new m({view:this.view})};g.prototype._createZoom=function(){return new p({view:this.view})};a([k.property()],g.prototype,"components",void 0);return g=a([k.subclass("esri.views.ui.DefaultUI")],
g)}(k.declared(c))})},"esri/views/ui/Component":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/dom dojo/dom-class ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(n,g,b,a,f,d,k,e){return function(c){function k(){var a=null!==c&&c.apply(this,arguments)||this;a.widget=null;return a}b(k,c);k.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(k.prototype,
"id",{get:function(){return this._get("id")||this.get("node.id")},set:function(a){this._set("id",a)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"node",{set:function(a){var b=this._get("node");a!==b&&(a&&d.add(a,"esri-component"),b&&d.remove(b,"esri-component"),this._set("node",a))},enumerable:!0,configurable:!0});k.prototype.castNode=function(a){if(!a)return this._set("widget",null),null;if("string"===typeof a||a&&"nodeType"in a)return this._set("widget",null),f.byId(a);a&&
"function"===typeof a.render&&!a.domNode&&(a.domNode=document.createElement("div"));this._set("widget",a);return a.domNode};a([e.property()],k.prototype,"id",null);a([e.property()],k.prototype,"node",null);a([e.cast("node")],k.prototype,"castNode",null);a([e.property({readOnly:!0})],k.prototype,"widget",void 0);return k=a([e.subclass("esri.views.ui.Component")],k)}(e.declared(k))})},"esri/views/ui/UI":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/dom-class dojo/dom-construct dojo/dom-style ../../core/Accessor ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./Component".split(" "),
function(n,g,b,a,f,d,k,e,c,l,h,m,p,r){function t(a){return"object"!==typeof a||a&&a.isInstanceOf&&a.isInstanceOf(r)||!("component"in a||"index"in a||"position"in a)?null:a}var q={left:0,top:0,bottom:0,right:0},u={bottom:30,top:15,right:15,left:15};return function(c){function g(){var a=c.call(this)||this;a._cornerNameToContainerLookup={};a._positionNameToContainerLookup={};a._components=[];a._handles=new h;a._componentToKey=new Map;a.view=null;a._initContainers();return a}a(g,c);g.prototype.initialize=
function(){this._handles.add([m.init(this,"view.padding, container",this._applyViewPadding.bind(this)),m.init(this,"padding",this._applyUIPadding.bind(this))])};g.prototype.destroy=function(){this.container=null;this._components.forEach(function(a){a.destroy()});this._components.length=0;this._handles.destroy();this._componentToKey.clear();this._componentToKey=null};Object.defineProperty(g.prototype,"container",{set:function(a){var b=this._get("container");a!==b&&(a&&(d.add(a,"esri-ui"),this._attachContainers(a)),
b&&(d.remove(b,"esri-ui"),e.set(b,{top:"",bottom:"",left:"",right:""}),k.empty(b)),this._set("container",a))},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+b.bottom),0)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"padding",{get:function(){return this._get("padding")},set:function(a){a?this._override("padding",a):this._clearOverride("padding")},
enumerable:!0,configurable:!0});g.prototype.castPadding=function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:b({},u,a)};Object.defineProperty(g.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.left+b.right),0)},enumerable:!0,configurable:!0});g.prototype.add=function(a,b){var c=this,d,e;if(Array.isArray(a))a.forEach(function(a){return c.add(a,b)});else{var f=t(a);f&&(d=f.index,b=f.position,a=f.component,
e=f.key);b&&"object"===typeof b&&(d=b.index,e=b.key,b=b.position);!a||b&&!this._isValidPosition(b)||(a&&a.isInstanceOf&&a.isInstanceOf(r)||(a=new r({node:a})),this._place({component:a,position:b,index:d}),this._components.push(a),e&&this._componentToKey.set(a,e))}};g.prototype.remove=function(a,b){var c=this;if(a){if(Array.isArray(a))return a.map(function(a){return c.remove(a,b)});var d=this.find(a);if(d){var e=this._componentToKey;if(!e.has(a)||e.get(a)===b)return e=this._components.indexOf(d),d.node.parentNode&&
d.node.parentNode.removeChild(d.node),this._componentToKey.delete(a),this._components.splice(e,1)[0]}}};g.prototype.empty=function(a){var b=this;if(Array.isArray(a))return a.map(function(a){return b.empty(a)}).reduce(function(a,b){return a.concat(b)});a=a||"manual";if("manual"===a)return Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!d.contains(a,"esri-ui-corner")}).map(function(a){return b.remove(a)});if(this._isValidPosition(a))return Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,
this)};g.prototype.move=function(a,b){var c=this;Array.isArray(a)&&a.forEach(function(a){return c.move(a,b)});if(a){var d,e=t(a)||t(b);e&&(d=e.index,b=e.position,a=e.component||a);(!b||this._isValidPosition(b))&&(a=this.remove(a))&&this.add(a,{position:b,index:d})}};g.prototype.find=function(a){return a?a&&a.isInstanceOf&&a.isInstanceOf(r)?this._findByComponent(a):"string"===typeof a?this._findById(a):this._findByNode(a.domNode||a):null};g.prototype._getViewPadding=function(){return this.get("view.padding")||
q};g.prototype._attachContainers=function(a){k.place(this._manualContainer,a);k.place(this._innerContainer,a)};g.prototype._initContainers=function(){var a=k.create("div",{className:"esri-ui-inner-container esri-ui-corner-container"}),c=k.create("div",{className:"esri-ui-inner-container esri-ui-manual-container"}),d=k.create("div",{className:"esri-ui-top-left esri-ui-corner"},a),e=k.create("div",{className:"esri-ui-top-right esri-ui-corner"},a),f=k.create("div",{className:"esri-ui-bottom-left esri-ui-corner"},
a),h=k.create("div",{className:"esri-ui-bottom-right esri-ui-corner"},a);this._innerContainer=a;this._manualContainer=c;this._cornerNameToContainerLookup={"top-left":d,"top-right":e,"bottom-left":f,"bottom-right":h};this._positionNameToContainerLookup=b({manual:c},this._cornerNameToContainerLookup)};g.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]};g.prototype._place=function(a){var b=a.component,c=a.index;a=this._positionNameToContainerLookup[a.position||"manual"];
var d;-1<c?(d=Array.prototype.slice.call(a.children),0===c?this._placeComponent(b,a,"first"):c>=d.length?this._placeComponent(b,a,"last"):this._placeComponent(b,d[c],"before")):this._placeComponent(b,a,"last")};g.prototype._placeComponent=function(a,b,c){var d=a.widget;d&&!d._started&&"function"===typeof d.postMixInProperties&&"function"===typeof d.buildRendering&&"function"===typeof d.postCreate&&"function"===typeof d.startup&&a.widget.startup();k.place(a.node,b,c)};g.prototype._applyViewPadding=
function(){var a=this.container;a&&e.set(a,this._toPxPosition(this._getViewPadding()))};g.prototype._applyUIPadding=function(){this._innerContainer&&e.set(this._innerContainer,this._toPxPosition(this.padding))};g.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}};g.prototype._toPxUnit=function(a){return 0===a?0:a+"px"};g.prototype._findByComponent=function(a){var b=null,c;this._components.some(function(d){(c=
d===a)&&(b=d);return c});return b};g.prototype._findById=function(a){var b=null,c;this._components.some(function(d){(c=d.id===a)&&(b=d);return c});return b};g.prototype._findByNode=function(a){var b=null,c;this._components.some(function(d){(c=d.node===a)&&(b=d);return c});return b};f([p.property()],g.prototype,"container",null);f([p.property({dependsOn:["view.height"]})],g.prototype,"height",null);f([p.property({value:u})],g.prototype,"padding",null);f([p.cast("padding")],g.prototype,"castPadding",
null);f([p.property()],g.prototype,"view",void 0);f([p.property({dependsOn:["view.width"]})],g.prototype,"width",null);return g=f([p.subclass("esri.views.ui.UI")],g)}(p.declared(c,l))})},"esri/widgets/Attribution":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Attribution/nls/Attribution ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Attribution/AttributionViewModel ./support/widget".split(" "),function(n,g,
b,a,f,d,k,e,c,l){return function(e){function h(a){a=e.call(this)||this;a._isOpen=!1;a._attributionTextOverflowed=!1;a._prevSourceNodeHeight=0;a.iconClass="esri-icon-description";a.itemDelimiter=" | ";a.label=f.widgetLabel;a.view=null;a.viewModel=new c;return a}b(h,e);h.prototype.postInitialize=function(){var a=this;this.own(d.on(this,"viewModel.items","change",function(){return a.scheduleRender()}))};Object.defineProperty(h.prototype,"attributionText",{get:function(){return this.viewModel.items.reduce(function(a,
b){-1===a.indexOf(b.text)&&a.push(b.text);return a},[]).join(this.itemDelimiter)},enumerable:!0,configurable:!0});h.prototype.render=function(){var a=(b={},b["esri-attribution--open"]=this._isOpen,b);return l.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",a),onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),l.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",l.tsx("a",{target:"_blank",href:"http://www.esri.com/",class:"esri-attribution__link"},
"Esri")));var b};h.prototype._renderSourcesNode=function(){var a=this._isOpen,b=this._isInteractive(),c=b?0:-1,d=this.attributionText,e=b?"button":void 0,a=(f={},f["esri-attribution__sources--open"]=a,f["esri-interactive"]=b,f);return l.tsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",a),innerHTML:d,role:e,tabIndex:c});var f};h.prototype._afterSourcesNodeCreate=function(a){this._prevSourceNodeHeight=
a.clientWidth};h.prototype._afterSourcesNodeUpdate=function(a){var b=!1,c=a.clientHeight;a=a.scrollWidth>=a.clientWidth;var d=this._attributionTextOverflowed!==a;this._attributionTextOverflowed=a;d&&(b=!0);this._isOpen&&(a=c<this._prevSourceNodeHeight,this._prevSourceNodeHeight=c,a&&(this._isOpen=!1,b=!0));b&&this.scheduleRender()};h.prototype._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)};h.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};
a([k.property({dependsOn:["viewModel.items.length","itemDelimiter"],readOnly:!0}),l.renderable()],h.prototype,"attributionText",null);a([k.property()],h.prototype,"iconClass",void 0);a([k.property(),l.renderable()],h.prototype,"itemDelimiter",void 0);a([k.property()],h.prototype,"label",void 0);a([k.aliasOf("viewModel.view")],h.prototype,"view",void 0);a([k.property({type:c}),l.renderable(["state","view.size"])],h.prototype,"viewModel",void 0);a([l.accessibleHandler()],h.prototype,"_toggleState",
null);return h=a([k.subclass("esri.widgets.Attribution")],h)}(k.declared(e))})},"esri/widgets/Attribution/AttributionViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Collection ../../core/Handles ../../core/lang ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/Extent ../../geometry/support/webMercatorUtils".split(" "),function(n,g,b,a,f,d,k,e,c,l,h,m){return function(f){function g(a){a=
f.call(this,a)||this;a._handles=new k;a._pendingAttributionItemsByLayerId={};a._attributionDataByLayerId={};a.items=new d;a.view=null;a._updateAttributionItems=a._updateAttributionItems.bind(a);return a}b(g,f);g.prototype.initialize=function(){this._handles.add(c.init(this,"view",this._viewWatcher))};g.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(g.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,
configurable:!0});g.prototype._viewWatcher=function(a){var b=this,d=this._handles;d&&d.remove();a&&(d.add([a.allLayerViews.on("change",function(a){b._addLayerViews(a.added);0<a.removed.length&&(a.removed.forEach(function(a){d.remove(a.uid)}),b._updateAttributionItems())}),c.init(a,"stationary",this._updateAttributionItems)]),this._addLayerViews(a.allLayerViews))};g.prototype._addLayerViews=function(a){var b=this;a.forEach(function(a){b._handles.has(a.uid)||b._handles.add(c.init(a,"suspended",b._updateAttributionItems),
a.uid)})};g.prototype._updateAttributionItems=function(){var a=this,b=[];this._getActiveLayerViews().forEach(function(c){var d=c.layer;if(!d.hasAttributionData){if(c=d.get("copyright")){var e=a._findItem(b,{layer:d,text:c});e||b.push({text:c,layer:d})}}else if(d&&d.tileInfo){var f=a._attributionDataByLayerId;if(f[d.uid]){if(c=a._getDynamicAttribution(f[d.uid],a.view,d))(e=a._findItem(b,{layer:d,text:c}))||b.push({text:c,layer:d})}else{var h=a._pendingAttributionItemsByLayerId;a._inProgress(h[d.uid])||
(h[d.uid]=d.fetchAttributionData().then(function(b){b=a._createContributionIndex(b,a._isBingLayer(d));delete h[d.uid];f[d.uid]=b;a._updateAttributionItems()}))}}});this._itemsChanged(this.items,b)&&(this.items.removeAll(),this.items.addMany(b))};g.prototype._itemsChanged=function(a,b){return a.length!==b.length||a.some(function(a,d){return a.text!==b[d].text})};g.prototype._inProgress=function(a){return a&&!a.isFulfilled()};g.prototype._getActiveLayerViews=function(){return this.get("view.allLayerViews").filter(function(a){return!a.suspended&&
a.get("layer.attributionVisible")})};g.prototype._findItem=function(a,b){var d=b.layer,c=b.text,e;a.some(function(a){var b=a.layer===d&&a.text===c;b&&(e=a);return b});return e};g.prototype._isBingLayer=function(a){return"bing-maps"===a.type};g.prototype._createContributionIndex=function(a,b){a=a.contributors;var d={};if(!a)return d;a.forEach(function(a,c){var f=a.coverageAreas;f&&f.forEach(function(f){var g=f.bbox,k=f.zoomMin-(b&&f.zoomMin?1:0),l=f.zoomMax-(b&&f.zoomMax?1:0);a={extent:m.geographicToWebMercator(new h({xmin:g[1],
ymin:g[0],xmax:g[3],ymax:g[2]})),attribution:a.attribution||"",score:e.isDefined(f.score)?f.score:100,id:c};for(f=k;f<=l;f++)d[f]=d[f]||[],d[f].push(a)})});d.maxKey=Math.max.apply(null,Object.keys(d));return d};g.prototype._getDynamicAttribution=function(a,b,d){var c=b.extent;b=d.tileInfo.scaleToZoom(b.scale);b=Math.min(a.maxKey,Math.round(b));if(!c||!e.isDefined(b)||-1>=b)return"";a=a[b];var f=c.center.clone().normalize(),h={};return a.filter(function(a){var b=!h[a.id]&&a.extent.contains(f);b&&(h[a.id]=
!0);return b}).sort(function(a,b){return b.score-a.score||a.objectId-b.objectId}).map(function(a){return a.attribution}).join(", ")};a([l.property({readOnly:!0,type:d})],g.prototype,"items",void 0);a([l.property({dependsOn:["view.ready"],readOnly:!0})],g.prototype,"state",null);a([l.property()],g.prototype,"view",void 0);return g=a([l.subclass("esri.widgets.Attribution.AttributionViewModel")],g)}(l.declared(f))})},"esri/widgets/Compass":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Compass/nls/Compass ../core/accessorSupport/decorators ./Widget ./Compass/CompassViewModel ./support/widget".split(" "),
function(n,g,b,a,f,d,k,e,c){return function(g){function h(a){a=g.call(this)||this;a.activeMode=null;a.goToOverride=null;a.iconClass="esri-icon-locate-circled";a.label=f.widgetLabel;a.modes=null;a.view=null;a.viewModel=new e;return a}b(h,g);h.prototype.reset=function(){};h.prototype.render=function(){var a=this.viewModel.orientation,b=this.viewModel.state,d="disabled"===b,e="compass"===("rotation"===b?"rotation":"compass"),b=d?-1:0,d=(h={},h["esri-disabled"]=d,h["esri-compass--active"]="device-orientation"===
this.viewModel.activeMode,h["esri-interactive"]=!d,h),h=(g={},g["esri-icon-compass"]=e,g["esri-icon-dial"]=!e,g);return c.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",d),onclick:this._start,onkeydown:this._start,role:"button",tabIndex:b,"aria-label":f.reset,title:f.reset},c.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",h),styles:this._toRotationTransform(a)}),c.tsx("span",{class:"esri-icon-font-fallback-text"},f.reset));var h,g};
h.prototype._start=function(){var a=this.viewModel;a.nextMode();a.startMode()};h.prototype._toRotationTransform=function(a){return{transform:"rotateZ("+a.z+"deg)"}};a([d.aliasOf("viewModel.activeMode")],h.prototype,"activeMode",void 0);a([d.aliasOf("viewModel.goToOverride")],h.prototype,"goToOverride",void 0);a([d.property()],h.prototype,"iconClass",void 0);a([d.property()],h.prototype,"label",void 0);a([d.aliasOf("viewModel.modes")],h.prototype,"modes",void 0);a([d.aliasOf("viewModel.view")],h.prototype,
"view",void 0);a([d.property({type:e}),c.renderable(["viewModel.orientation","viewModel.state"])],h.prototype,"viewModel",void 0);a([d.aliasOf("viewModel.reset")],h.prototype,"reset",null);a([c.accessibleHandler()],h.prototype,"_start",null);return h=a([d.subclass("esri.widgets.Compass")],h)}(d.declared(k))})},"esri/widgets/Compass/CompassViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../support/GoTo".split(" "),
function(n,g,b,a,f,d,k,e,c,l,h){var m=k.getLogger("esri.widgets.CompassViewModel");return function(f){function h(a){a=f.call(this,a)||this;a._handles=new d;a._eventType=a._getDeviceOrientationEventType();a.canUseHeading=!1;a.orientation={x:0,y:0,z:0};a.view=null;a._updateForCamera=a._updateForCamera.bind(a);a._updateForRotation=a._updateForRotation.bind(a);a._updateRotationWatcher=a._updateRotationWatcher.bind(a);a._updateViewHeading=a._updateViewHeading.bind(a);a._checkHeadingSupport=a._checkHeadingSupport.bind(a);
a._canUseHeading();return a}b(h,f);h.prototype.initialize=function(){this._handles.add(c.init(this,"view",this._updateRotationWatcher))};h.prototype.destroy=function(){this._removeCheckHeadingListener();this._removeOrientationListener();this._handles.destroy();this.view=this._handles=null};Object.defineProperty(h.prototype,"activeMode",{get:function(){var a=this._get("activeMode");return a?a:(a=this.modes)?a[0]:"none"},set:function(a){this.stopMode();this._override("activeMode",a);void 0===a&&this._clearOverride("activeMode")},
enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"canShowNorth",{get:function(){var a=this.get("view.spatialReference");return a&&(a.isWebMercator||a.isWGS84)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"modes",{get:function(){return this._get("modes")||["reset"]},set:function(a){this._set("modes",a);void 0===a&&this._clearOverride("modes")},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"state",{get:function(){return this.get("view.ready")?
this.canShowNorth?"compass":"rotation":"disabled"},enumerable:!0,configurable:!0});h.prototype.previousMode=function(){var a=this.modes;2>a.length||(a=a.indexOf(this.activeMode),this._paginateMode(a-1))};h.prototype.nextMode=function(){var a=this.modes;2>a.length||(a=a.indexOf(this.activeMode),this._paginateMode(a+1))};h.prototype.startMode=function(){var a=this.activeMode;"reset"===a&&this.reset();"device-orientation"===a&&(this._removeOrientationListener(),this._addOrientationListener())};h.prototype.stopMode=
function(){"device-orientation"===this.activeMode&&this._removeOrientationListener()};h.prototype.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view.type?a.rotation=0:a.heading=0;this.callGoTo({target:a})}};h.prototype._getDeviceOrientationEventType=function(){if("ondeviceorientationabsolute"in window)return"deviceorientationabsolute";if("ondeviceorientation"in window)return"deviceorientation"};h.prototype._paginateMode=function(a){var b=this.modes;this.activeMode=b[(a+b.length)%
b.length]};h.prototype._supportsHeading=function(a){var b=a.absolute,d=a.alpha;return"number"===typeof a.webkitCompassHeading||!!b&&"number"===typeof d};h.prototype._getHeading=function(a){var b=a.alpha,d=a.webkitCompassHeading;if(d)return d;if(a.absolute&&"number"===typeof b)return b};h.prototype._removeCheckHeadingListener=function(){var a=this._eventType;a&&window.removeEventListener(a,this._checkHeadingSupport)};h.prototype._checkHeadingSupport=function(a){this._supportsHeading(a)&&this._set("canUseHeading",
!0);this._removeCheckHeadingListener()};h.prototype._canUseHeading=function(){var a=this,b=this._eventType;b&&(window.addEventListener(b,this._checkHeadingSupport),e.after(500).then(function(){a._removeCheckHeadingListener()}))};h.prototype._getHeadingAdjustment=function(a,b){if("orientation"in window){b=window.orientation;if("number"!==typeof b)return a;a+=b;return 360<a?a-360:0>a?a+360:a}return a};h.prototype._updateViewHeading=function(a){var b=this.view,d=this._getHeading(a);!b||!b.stationary||
"number"!==typeof d||0>d||360<d||(a=this._getHeadingAdjustment(d,a),"3d"===b.type&&(d=b.camera.clone(),d.heading=a,b.camera=d),"2d"===b.type&&(b.rotation=a))};h.prototype._removeOrientationListener=function(){this.canUseHeading&&window.removeEventListener(this._eventType,this._updateViewHeading)};h.prototype._addOrientationListener=function(){var a=this._eventType,b=this.canShowNorth;this.canUseHeading?b?window.addEventListener(a,this._updateViewHeading):m.warn("device-orientation mode requires 'canShowNorth' to be true"):
m.warn("The deviceorientation event is not supported in this browser")};h.prototype._updateForRotation=function(a){void 0!==a&&null!==a&&(this.orientation={z:a})};h.prototype._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})};h.prototype._updateRotationWatcher=function(a){this._handles.removeAll();a&&("2d"===a.type?this._handles.add(c.init(this,"view.rotation",this._updateForRotation)):this._handles.add(c.init(this,"view.camera",this._updateForCamera)))};a([l.property({dependsOn:["modes"]})],
h.prototype,"activeMode",null);a([l.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],readOnly:!0})],h.prototype,"canShowNorth",null);a([l.property({readOnly:!0})],h.prototype,"canUseHeading",void 0);a([l.property({dependsOn:["canUseHeading"]})],h.prototype,"modes",null);a([l.property()],h.prototype,"orientation",void 0);a([l.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],h.prototype,"state",null);a([l.property()],h.prototype,"view",void 0);
a([l.property()],h.prototype,"previousMode",null);a([l.property()],h.prototype,"nextMode",null);a([l.property()],h.prototype,"startMode",null);a([l.property()],h.prototype,"stopMode",null);a([l.property()],h.prototype,"reset",null);return h=a([l.subclass("esri.widgets.CompassViewModel")],h)}(l.declared(f,h))})},"esri/widgets/NavigationToggle":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./NavigationToggle/nls/NavigationToggle ../core/accessorSupport/decorators ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/widget".split(" "),
function(n,g,b,a,f,d,k,e,c){return function(g){function h(a){a=g.call(this)||this;a.iconClass="esri-icon-pan2";a.label=f.widgetLabel;a.view=null;a.viewModel=new e;return a}b(h,g);Object.defineProperty(h.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});h.prototype.toggle=function(){};h.prototype.render=function(){var a="disabled"===this.get("viewModel.state"),b="pan"===this.get("viewModel.navigationMode"),d=(e={},e["esri-disabled"]=
a,e["esri-navigation-toggle--horizontal"]="horizontal"===this.layout,e),e=(h={},h["esri-navigation-toggle__button--active"]=b,h),b=(g={},g["esri-navigation-toggle__button--active"]=!b,g),a=a?-1:0;return c.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",d),onclick:this._toggle,onkeydown:this._toggle,tabIndex:a,"aria-label":f.toggle,title:f.toggle},c.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",
e)},c.tsx("span",{class:"esri-icon-pan"})),c.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--rotate",b)},c.tsx("span",{class:"esri-icon-rotate"})));var e,h,g};h.prototype._toggle=function(){this.toggle()};a([d.property()],h.prototype,"iconClass",void 0);a([d.property()],h.prototype,"label",void 0);a([d.property({value:"vertical"}),c.renderable()],h.prototype,"layout",null);a([d.aliasOf("viewModel.view"),c.renderable()],h.prototype,
"view",void 0);a([d.property({type:e}),c.renderable(["viewModel.state","viewModel.navigationMode"])],h.prototype,"viewModel",void 0);a([d.aliasOf("viewModel.toggle")],h.prototype,"toggle",null);a([c.accessibleHandler()],h.prototype,"_toggle",null);return h=a([d.subclass("esri.widgets.NavigationToggle")],h)}(d.declared(k))})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),
function(n,g,b,a,f,d,k,e){return function(c){function f(a){a=c.call(this,a)||this;a._handles=new d;a.navigationMode="pan";a.view=null;a.toggle=a.toggle.bind(a);return a}b(f,c);f.prototype.initialize=function(){this._handles.add(k.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};f.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(f.prototype,"state",{get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":
"disabled"},enumerable:!0,configurable:!0});f.prototype.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};f.prototype._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};a([e.property({dependsOn:["view.ready"],readOnly:!0})],f.prototype,"state",null);a([e.property()],f.prototype,"navigationMode",void 0);a([e.property()],f.prototype,"view",void 0);
a([e.property()],f.prototype,"toggle",null);return f=a([e.subclass("esri.widgets.NavigationToggleViewModel")],f)}(e.declared(f))})},"esri/widgets/Zoom":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Zoom/nls/Zoom ../core/accessorSupport/decorators ./Widget ./Zoom/IconButton ./Zoom/ZoomViewModel ./support/widget".split(" "),function(n,g,b,a,f,d,k,e,c,l){return function(h){function g(a){a=h.call(this)||this;a.iconClass="esri-icon-zoom-in-magnifying-glass";
a.label=f.widgetLabel;a.view=null;a.viewModel=new c;return a}b(g,h);g.prototype.postInitialize=function(){this._zoomInButton=new e({action:this.zoomIn,iconClass:"esri-icon-plus",title:f.zoomIn});this._zoomOutButton=new e({action:this.zoomOut,iconClass:"esri-icon-minus",title:f.zoomOut})};Object.defineProperty(g.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});g.prototype.render=function(){var a=this.viewModel,b=(d={},d["esri-zoom--horizontal"]=
"horizontal"===this.layout,d);this._zoomInButton.enabled="ready"===a.state&&a.canZoomIn;this._zoomOutButton.enabled="ready"===a.state&&a.canZoomOut;return l.tsx("div",{class:this.classes("esri-zoom esri-widget",b)},this._zoomInButton.render(),this._zoomOutButton.render());var d};g.prototype.zoomIn=function(){};g.prototype.zoomOut=function(){};a([d.property()],g.prototype,"iconClass",void 0);a([d.property()],g.prototype,"label",void 0);a([d.property({value:"vertical"}),l.renderable()],g.prototype,
"layout",null);a([d.aliasOf("viewModel.view"),l.renderable()],g.prototype,"view",void 0);a([d.property({type:c}),l.renderable(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],g.prototype,"viewModel",void 0);a([d.aliasOf("viewModel.zoomIn")],g.prototype,"zoomIn",null);a([d.aliasOf("viewModel.zoomOut")],g.prototype,"zoomOut",null);return g=a([d.subclass("esri.widgets.Zoom")],g)}(d.declared(k))})},"esri/widgets/Zoom/IconButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../Widget ../support/widget".split(" "),
function(n,g,b,a,f,d,k){return function(d){function c(){var a=null!==d&&d.apply(this,arguments)||this;a.enabled=!0;a.iconClass="";a.title="";return a}b(c,d);c.prototype.render=function(){var a=this.enabled?0:-1,b=(d={},d["esri-disabled"]=!this.enabled,d["esri-interactive"]=this.enabled,d),d=(c={},c[this.iconClass]=!!this.iconClass,c);return k.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",b),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:a,
title:this.title},k.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",d)}),k.tsx("span",{class:"esri-icon-font-fallback-text"},this.title));var d,c};c.prototype._triggerAction=function(){this.action.call(this)};a([f.property()],c.prototype,"action",void 0);a([f.property(),k.renderable()],c.prototype,"enabled",void 0);a([f.property({readOnly:!1}),k.renderable()],c.prototype,"iconClass",void 0);a([f.property(),k.renderable()],c.prototype,"title",void 0);a([k.accessibleHandler()],
c.prototype,"_triggerAction",null);return c=a([f.subclass("esri.widgets.IconButton")],c)}(f.declared(d))})},"esri/widgets/Zoom/ZoomViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(n,g,b,a,f,d,k,e){return function(c){function f(a){a=c.call(this,a)||this;a.canZoomIn=null;a.canZoomOut=null;a.zoomIn=a.zoomIn.bind(a);
a.zoomOut=a.zoomOut.bind(a);return a}b(f,c);f.prototype.destroy=function(){this.view=null};Object.defineProperty(f.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"view",{set:function(a){a?"2d"===a.type?this._zoomConditions=new k({view:a}):"3d"===a.type&&(this._zoomConditions=new e):this._zoomConditions=null;this._set("view",a)},enumerable:!0,configurable:!0});f.prototype.zoomIn=function(){this.canZoomIn&&
this._zoomToFactor(.5)};f.prototype.zoomOut=function(){this.canZoomOut&&this._zoomToFactor(2)};f.prototype._zoomToFactor=function(a){if("ready"===this.state){var b=this.view;"3d"===this.view.type?b.goTo({zoomFactor:1/a}):b.goTo({scale:this.get("view.scale")*a})}};a([d.property()],f.prototype,"_zoomConditions",void 0);a([d.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],f.prototype,"canZoomIn",void 0);a([d.property({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],f.prototype,"canZoomOut",
void 0);a([d.property({dependsOn:["view.ready"],readOnly:!0})],f.prototype,"state",null);a([d.property()],f.prototype,"view",null);a([d.property()],f.prototype,"zoomIn",null);a([d.property()],f.prototype,"zoomOut",null);return f=a([d.subclass("esri.widgets.Zoom.ZoomViewModel")],f)}(d.declared(f))})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),
function(n,g,b,a,f,d){return function(f){function e(){return null!==f&&f.apply(this,arguments)||this}b(e,f);Object.defineProperty(e.prototype,"canZoomIn",{get:function(){var a=this.get("view.scale"),b=this.get("view.constraints.effectiveMaxScale");return 0===b||a>b},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"canZoomOut",{get:function(){var a=this.get("view.scale"),b=this.get("view.constraints.effectiveMinScale");return 0===b||a<b},enumerable:!0,configurable:!0});a([d.property({dependsOn:["view.ready",
"view.scale"],readOnly:!0})],e.prototype,"canZoomIn",null);a([d.property({dependsOn:["view.ready","view.scale"],readOnly:!0})],e.prototype,"canZoomOut",null);a([d.property()],e.prototype,"view",void 0);return e=a([d.subclass("esri.widgets.Zoom.ZoomConditions2D")],e)}(d.declared(f))})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),
function(n,g,b,a,f,d){return function(f){function e(){var a=null!==f&&f.apply(this,arguments)||this;a.canZoomIn=!0;a.canZoomOut=!0;return a}b(e,f);a([d.property({readOnly:!0})],e.prototype,"canZoomIn",void 0);a([d.property({readOnly:!0})],e.prototype,"canZoomOut",void 0);return e=a([d.subclass("esri.widgets.Zoom.ZoomConditions3D")],e)}(d.declared(f))})},"esri/views/2d/layers/GraphicsLayerView2D":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Handles ../../../core/accessorSupport/decorators ./LayerView2D ./support/GraphicsView2D".split(" "),
function(n,g,b,a,f,d,k,e){return function(c){function g(){var a=null!==c&&c.apply(this,arguments)||this;a._handles=new f;a.graphicsView=new e;a.container=a.graphicsView.container;return a}b(g,c);g.prototype.hitTest=function(a,b){return this.graphicsView.hitTest(a,b)};g.prototype.attach=function(){var a=this;this.layer.createGraphicsController({layerView:this}).then(function(b){a._handles.add(a.layer.on("graphic-update",function(b){return a.graphicsView.graphicUpdateHandler(b)}));a.graphicsView.view=
a.view;a.graphicsView.graphics=b.graphics})};g.prototype.detach=function(){this.graphicsView.graphics=null;this._handles.removeAll()};g.prototype.update=function(a){};g.prototype.moveStart=function(){};g.prototype.viewChange=function(){};g.prototype.moveEnd=function(){};return g=a([d.subclass("esri.views.2d.layers.GraphicsLayerView2D")],g)}(d.declared(k))})},"esri/views/2d/layers/LayerView2D":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../layers/LayerView".split(" "),
function(n,g,b,a,f,d,k){return function(e){function c(){var a=null!==e&&e.apply(this,arguments)||this;a.attached=!1;a.moving=!1;a.updateRequested=!1;return a}b(c,e);c.prototype.initialize=function(){var a=this;this.when(function(){a.requestUpdate()});f.init(this,"suspended",function(b){a.container.visible=!b;!b&&a.updateRequested&&a.view.requestLayerViewUpdate(a)},!0);f.init(this,"fullOpacity",function(b){a.container.opacity=b},!0);var b=function(){this.notifyChange("rendering")}.bind(this);this.container.on("post-render",
b);this.container.on("will-render",b)};c.prototype.destroy=function(){this.attached&&(this.attached=!1,this.detach());this.updateRequested=!1;this.layer=null};Object.defineProperty(c.prototype,"rendering",{get:function(){return this.isRendering()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"updating",{get:function(){return!this.suspended&&(!this.attached||this.updateRequested||this.isUpdating())},enumerable:!0,configurable:!0});c.prototype.requestUpdate=function(){this.updateRequested||
(this.updateRequested=!0,this.suspended||this.view.requestLayerViewUpdate(this))};c.prototype.processUpdate=function(a){this.isFulfilled()&&!this.isResolved()?this.updateRequested=!1:(this._set("updateParameters",a),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(a)))};c.prototype.isUpdating=function(){return!1};c.prototype.isRendering=function(){return this.attached&&(this.moving||this.container.renderRequested)};c.prototype.canResume=function(){var a=this.inherited(arguments),
b=this.layer;if(a&&null!=b.minScale&&null!=b.minScale){var a=this.view.scale,d=b.minScale,b=b.maxScale,c=!d,e=!b;!c&&a<=d&&(c=!0);!e&&a>=b&&(e=!0);a=c&&e}return a};a([d.property()],c.prototype,"attached",void 0);a([d.property()],c.prototype,"container",void 0);a([d.property()],c.prototype,"moving",void 0);a([d.property({dependsOn:["moving"]})],c.prototype,"rendering",null);a([d.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],c.prototype,"suspended",void 0);a([d.property({readOnly:!0})],
c.prototype,"updateParameters",void 0);a([d.property()],c.prototype,"updateRequested",void 0);a([d.property({dependsOn:["updateRequested","attached"]})],c.prototype,"updating",null);a([d.property()],c.prototype,"view",void 0);return c=a([d.subclass("esri.views.2d.layers.LayerView2D")],c)}(d.declared(k))})},"esri/views/2d/layers/FeatureLayerView2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/paramHelper dojo/has ../../../Graphic ../../../core/Collection ../../../core/Error ../../../core/Handles ../../../core/promiseUtils ../../../core/accessorSupport/decorators ../../../layers/graphics/QueryEngine ../../../layers/graphics/controllers/support/controllerUtils ../engine/DOMContainer ../engine/webgl/rendererInfoUtils ./LayerView2D ./support/FeaturesView2D ../../layers/RefreshableLayerView".split(" "),
function(n,g,b,a,f,d,k,e,c,l,h,m,p,r,t,q,u,x,v){function y(a){return a&&null!=a._proxy}function w(a){return a&&null!=a.update}return function(f){function g(){var a=null!==f&&f.apply(this,arguments)||this;a._handles=new l;a.container=new t;return a}b(g,f);g.prototype.highlight=function(a,b){var d=this;b=this.featuresView;var c;a instanceof k?c=[a.getAttribute(this.layer.objectIdField)]:"number"===typeof a?c=[a]:e.isCollection(a)?c=a.map(function(a){return a.getAttribute(d.layer.objectIdField)}).toArray():
Array.isArray(a)&&0<a.length&&(c="number"===typeof a[0]?a:a.map(function(a){return a.getAttribute(d.layer.objectIdField)}));return c&&c.length&&b&&null!=b.highlight?b.highlight(c):{remove:function(){}}};g.prototype.queryGraphics=function(){return this._queryEngine?this._queryEngine.queryFeatures():this._rejectQuery()};g.prototype.queryFeatures=function(a){return y(this.featuresView)?this.featuresView.queryFeatures(a):this._queryEngine?this._queryEngine.queryFeatures(a):this._rejectQuery()};g.prototype.queryObjectIds=
function(a){return y(this.featuresView)?this.featuresView.queryObjectIds(a):this._queryEngine?this._queryEngine.queryObjectIds(a):this._rejectQuery()};g.prototype.queryFeatureCount=function(a){return y(this.featuresView)?this.featuresView.queryFeatureCount(a):this._queryEngine?this._queryEngine.queryFeatureCount(a):this._rejectQuery()};g.prototype.queryExtent=function(a){return y(this.featuresView)?this.featuresView.queryExtent(a):this._queryEngine?this._queryEngine.queryExtent(a):this._rejectQuery()};
g.prototype.hitTest=function(a,b){return this.suspended||!this.featuresView?h.resolve():this.featuresView.hitTest(a,b)};g.prototype.update=function(a){w(this.controller)?this.controller.update(a):w(this.featuresView)&&this.featuresView.update(a)};g.prototype.attach=function(){var a=this;this._canUseWebGL()?h.create(function(a){return n(["./FeatureLayerView2DWebGL"],a)}).then(function(b){if(a.attached)return(new b({layer:a.layer,view:a.view})).when()}).then(function(b){a.featuresView=b;a.container.addChild(b.container);
b.attached=!0;b.attach()}):this.layer.createGraphicsController({layerView:this}).then(function(b){if(a.attached){a._set("controller",b);a.requestUpdate();var d=new x;d.mapView=a.view;d.graphics=b.graphics;d.layer=a.layer;d.renderer=a.layer.renderer;a._handles.add(a.layer.watch("renderer",function(){d.renderer=a.layer.renderer}));a._handles.add(a.layer.on("graphic-update",function(a){return d.graphicUpdateHandler(a)}));a.featuresView=d;a._queryEngine=new p({layer:a.layer});a._queryEngine.features=
b.graphics;a._queryEngine.objectIdField=a.layer.objectIdField;a.container.addChild(d.container)}})};g.prototype.detach=function(){this.container.removeAllChildren();this._handles.removeAll();this.featuresView&&(this.featuresView.destroy(),this.featuresView=null);this.controller&&(this.controller.destroy&&this.controller.destroy(),this._set("controller",null))};g.prototype.moveStart=function(){this.requestUpdate()};g.prototype.viewChange=function(){this.requestUpdate()};g.prototype.moveEnd=function(){this.requestUpdate()};
g.prototype.takeScreenshot=function(a,b){return this.featuresView.featuresView._container.takeScreenshot(a)};g.prototype.doRefresh=function(){this.updateRequested||this.suspended||this.controller&&r.isRefreshable(this.controller.activeController)&&this.controller.activeController.refresh()};g.prototype.isUpdating=function(){return null==this.featuresView||!0===this.get("controller.updating")||!0===this.featuresView.updateRequested||w(this.featuresView)&&this.featuresView.updating};g.prototype._canUseWebGL=
function(){return d("esri-featurelayer-webgl")&&d("esri-webgl")&&q.isRendererWebGLCompatible(this.layer.renderer)&&(this.layer.capabilities.query.supportsQuantization&&("polygon"!==this.layer.geometryType||this.layer.capabilities.query.supportsCentroid)||this.layer.source&&"esri.layers.graphics.sources.CSVSource"===this.layer.source.declaredClass)};g.prototype._rejectQuery=function(){return h.reject(new c("FeatureLayerView2D","Not ready to execute query"))};a([m.property({readOnly:!0})],g.prototype,
"controller",void 0);a([m.property()],g.prototype,"featuresView",void 0);a([m.property({dependsOn:["controller.updating","featuresView","featuresView.updating"]})],g.prototype,"updating",void 0);return g=a([m.subclass("esri.views.2d.layers.FeatureLayerView2D")],g)}(m.declared(u,v))})},"esri/layers/graphics/controllers/support/controllerUtils":function(){define(["require","exports"],function(n,g){Object.defineProperty(g,"__esModule",{value:!0});g.isRefreshable=function(b){return b&&b.refresh}})},"esri/views/2d/engine/webgl/rendererInfoUtils":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../Graphic ../../../../arcade/Feature ../../../../support/arcadeUtils ./enums ./visualVariablesUtils".split(" "),
function(n,g,b,a,f,d,k,e){function c(c,e,f){if(!c)return null;var h=0,g={};c=c.clone();var k=c.visualVariables,m=null;if("simple"!==c.type){var p=c.valueExpression;if(!c.field&&p){var n="$$fake"+h++,y=d.createFunction(p);g[n]=function(a,b){l.repurposeFromGraphicLikeObject(a.geometry,a.attributes,f);return d.executeFunction(y,{vars:{$feature:l,$view:d.getViewInfo(b)},spatialReference:e})};c.field=n;c.valueExpression=null;m=function(b,d){d.attributes[n]=g[n](d);return b.valueExpression?b.getSymbol(a.fromJSON(d)):
b.getSymbol(d)}}}k&&(c.visualVariables=k.map(function(a){if(a.normalizationField){var c=a.field,k=a.normalizationField,m="$$fake"+h++;g[m]=function(a,b){return a.attributes[c]/a.attributes[k]};a=b({},a);a.field=m;delete a.normalizationField;return a}if(a.valueExpression&&"$view.scale"!==a.valueExpression){var p=a.valueExpression,m="$$fake"+h++,q=d.createFunction(p);g[m]=function(a,b){l.repurposeFromGraphicLikeObject(a.geometry,a.attributes,f);return d.executeFunction(q,{vars:{$feature:l,$view:d.getViewInfo(b)},
spatialReference:e})};a=b({},a);a.field=m;delete a.valueExpression}return a}));return{renderer:c,normalizingFunctions:g,getSymbolFunction:m}}Object.defineProperty(g,"__esModule",{value:!0});var l=new f;g.createRendererInfo=function(a,b,d){var f=(b=c(a,b,d)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},b.normalizingFunctions),h=b&&b.getSymbolFunction;a=b&&b.renderer||a;b=e.convertVisualVariables(a.visualVariables);return{renderer:a,vvFields:b.vvFields,vvRanges:b.vvRanges,getValue:function(a,
b){var d=f[b];return d?d(a):a.attributes[b]},getSymbol:function(a){return h?h(this.renderer,a):this.renderer.getSymbol?this.renderer.getSymbol.call(this.renderer,a):null}}};g.getNormalizedRenderer=function(a,b,d){return(b=c(a,b,d)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},b.renderer)||a};g.getSymbol=function(a,b){return a.getSymbol(b)};g.isRendererWebGLCompatible=function(a){if(!a||-1===["simple","class-breaks","unique-value","heatmap"].indexOf(a.type))return!1;if(a.visualVariables){var b=
0;for(a=a.visualVariables;b<a.length;b++){var d=a[b];switch(d.type){case "color":case "opacity":if(d.stops&&8<d.stops.length)return!1;break;case "size":if(e.getTypeOfSizeVisualVariable(d)===k.WGLVVFlag.SIZE_FIELD_STOPS&&d.stops&&6<d.stops.length)return!1}}}return!0}})},"esri/views/2d/engine/webgl/visualVariablesUtils":function(){define("require exports ../../../../core/screenUtils ./color ./enums ./Utils ../../../3d/layers/support/FastSymbolUpdates".split(" "),function(n,g,b,a,f,d,k){function e(a){return d.isNumber(a.minDataValue)&&
d.isNumber(a.maxDataValue)&&null!=a.minSize&&null!=a.maxSize?f.WGLVVFlag.SIZE_MINMAX_VALUE:(a.expression&&"view.scale"===a.expression||a.valueExpression&&"$view.scale"===a.valueExpression)&&Array.isArray(a.stops)?f.WGLVVFlag.SIZE_SCALE_STOPS:(null!=a.field||a.expression&&"view.scale"!==a.expression||a.valueExpression&&"$view.scale"!==a.valueExpression)&&Array.isArray(a.stops)?f.WGLVVFlag.SIZE_FIELD_STOPS:(null!=a.field||a.expression&&"view.scale"!==a.expression||a.valueExpression&&"$view.scale"!==
a.valueExpression)&&null!=a.valueUnit?f.WGLVVFlag.SIZE_UNIT_VALUE:f.WGLVVFlag.NONE}function c(a){return{value:a.value,size:b.toPt(a.size)}}function l(a){return a.map(function(a){return c(a)})}function h(a){return"string"===typeof a||"number"===typeof a?b.toPt(a):{type:"size",expression:a.expression,stops:l(a.stops)}}function m(a){var b={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if(d.isString(a.field))if(a.stops){if(8<a.stops.length)return null;a=a.stops;for(var c=0;8>c;++c){var e=a[Math.min(c,
a.length-1)];b.values[c]=e.value;b.opacities[c]=e.opacity}}else if(a.opacityValues){if(!d.isDefined(a.minDataValue)||!d.isDefined(a.maxDataValue)||2!==a.opacityValues.length)return null;b.values[0]=a.minDataValue;b.opacities[0]=a.opacityValues[0];b.values[1]=a.maxDataValue;b.opacities[1]=a.opacityValues[1];for(c=2;8>c;++c)b.values[c]=a.maxDataValue,b.opacities[c]=a.opacityValues[1]}else return null;else if(a.stops&&0<=a.stops.length||a.opacityValues&&0<=a.opacityValues.length)for(a=a.stops&&0<=a.stops.length?
a.stops[0].opacity:a.opacityValues[0],c=0;8>c;c++)b.values[c]=Infinity,b.opacities[c]=a;else return null;return b}Object.defineProperty(g,"__esModule",{value:!0});g.getTypeOfSizeVisualVariable=e;g.getVisualVariableSizeValueRepresentationRatio=function(a,b){if(!a||!b)return a;switch(b){case "radius":case "distance":return 2*a;case "area":return Math.sqrt(a)}return a};g.stopToSizeStop=c;g.normalizeSizeStops=l;g.normalizeSizeElement=h;g.getVisualVariablesFields=function(a){var b=a&&0<a.length?{}:null;
b&&a.forEach(function(a){var d=a.type;a.field&&(b[d]=a.field)});return b};g.convertVisualVariables=function(d){var c=d&&0<d.length?{}:null,g=c?{}:null;if(!c)return{vvFields:c,vvRanges:g};for(var q=0;q<d.length;q++){var p=d[q],n=p.type;p.field&&(c[n]=p.field);if("size"===n){g.size||(g.size={});var v=p;switch(e(v)){case f.WGLVVFlag.SIZE_MINMAX_VALUE:g.size.minMaxValue={minDataValue:v.minDataValue,maxDataValue:v.maxDataValue,minSize:h(v.minSize),maxSize:h(v.maxSize)};break;case f.WGLVVFlag.SIZE_SCALE_STOPS:g.size.scaleStops=
{stops:l(v.stops)};break;case f.WGLVVFlag.SIZE_FIELD_STOPS:for(var p=[],n=[],v=l(v.stops),y=v.length,w=0;6>w;w++){var A=v[Math.min(w,y-1)];p.push(A.value);n.push(b.pt2px(A.size))}g.size.fieldStops={values:p,sizes:n};break;case f.WGLVVFlag.SIZE_UNIT_VALUE:g.size.unitValue={unit:v.valueUnit,valueRepresentation:v.valueRepresentation}}}else if("color"===n)for(p=k.convertVisualVariables([p],{modelSize:null,symbolSize:null,unitInMeters:1,transformation:null}),g.color=p.color,w=0;32>w;w+=4)a.premultiplyAlpha(g.color.colors,
w,!0);else"opacity"===n?g.opacity=m(p):"rotation"===n&&(g.rotation={type:p.rotationType})}return{vvFields:c,vvRanges:g}}})},"esri/views/3d/layers/support/FastSymbolUpdates":function(){define(["require","exports","../../../../renderers/support/utils","../graphics/graphicUtils","../../lib/glMatrix"],function(n,g,b,a,f){function d(a){return null!==a&&void 0!==a}function k(a){return"number"===typeof a}function e(a,b){a&&a.push(b)}function c(a,c,f,h,g){var m=a.minSize,q=a.maxSize;if(a.expression)return e(g,
"Could not convert size info: expression not supported"),!1;if(a.useSymbolValue)return a=h.symbolSize[f],c.minSize[f]=a,c.maxSize[f]=a,c.offset[f]=c.minSize[f],c.factor[f]=0,c.type[f]=1,!0;if(d(a.field)){if(d(a.stops)){if(2===a.stops.length&&k(a.stops[0].size)&&k(a.stops[1].size))return l(a.stops[0].size,a.stops[1].size,a.stops[0].value,a.stops[1].value,c,f),c.type[f]=1,!0;e(g,"Could not convert size info: stops only supported with 2 elements");return!1}if(k(m)&&k(q)&&d(a.minDataValue)&&d(a.maxDataValue))return l(m,
q,a.minDataValue,a.maxDataValue,c,f),c.type[f]=1,!0;if(null!=b.meterIn[a.valueUnit])return c.minSize[f]=-Infinity,c.maxSize[f]=Infinity,c.offset[f]=0,c.factor[f]=1/b.meterIn[a.valueUnit],c.type[f]=1,!0;"unknown"===a.valueUnit?e(g,"Could not convert size info: proportional size not supported"):e(g,"Could not convert size info: scale-dependent size not supported");return!1}if(!d(a.field)){if(a.stops&&a.stops[0]&&k(a.stops[0].size))return c.minSize[f]=a.stops[0].size,c.maxSize[f]=a.stops[0].size,c.offset[f]=
c.minSize[f],c.factor[f]=0,c.type[f]=1,!0;if(k(m))return c.minSize[f]=m,c.maxSize[f]=m,c.offset[f]=m,c.factor[f]=0,c.type[f]=1,!0}e(g,"Could not convert size info: unsupported variant of sizeInfo");return!1}function l(a,b,d,c,e,f){c=0<Math.abs(c-d)?(b-a)/(c-d):0;e.minSize[f]=0<c?a:b;e.maxSize[f]=0<c?b:a;e.offset[f]=a-d*c;e.factor[f]=c}function h(a,b,d,f){if(a.normalizationField||a.valueRepresentation)return e(f,"Could not convert size info: unsupported property"),null;var h=a.field;if(null!=h&&"string"!==
typeof h)return e(f,"Could not convert size info: field is not a string"),null;if(!b.size)b.size={field:a.field,minSize:[0,0,0],maxSize:[0,0,0],offset:[0,0,0],factor:[0,0,0],type:[0,0,0]};else if(a.field)if(!b.size.field)b.size.field=a.field;else if(a.field!==b.size.field)return e(f,"Could not convert size info: multiple fields in use"),null;switch(a.axis){case "width":return(h=c(a,b.size,0,d,f))?b:null;case "height":return(h=c(a,b.size,2,d,f))?b:null;case "depth":return(h=c(a,b.size,1,d,f))?b:null;
case "width-and-depth":return(h=c(a,b.size,0,d,f))&&c(a,b.size,1,d,f),h?b:null;case null:case void 0:case "all":return(h=(h=(h=c(a,b.size,0,d,f))&&c(a,b.size,1,d,f))&&c(a,b.size,2,d,f))?b:null;default:return e(f,'Could not convert size info: unknown axis "'+a.axis+'""'),null}}function m(a,b,d){for(var c=0;3>c;++c){var f=b.unitInMeters;1===a.type[c]&&(f*=b.modelSize[c],a.type[c]=2);a.minSize[c]/=f;a.maxSize[c]/=f;a.offset[c]/=f;a.factor[c]/=f}if(0!==a.type[0])b=0;else if(0!==a.type[1])b=1;else if(0!==
a.type[2])b=2;else return e(d,"No size axis contains a valid size or scale"),!1;for(c=0;3>c;++c)0===a.type[c]&&(a.minSize[c]=a.minSize[b],a.maxSize[c]=a.maxSize[b],a.offset[c]=a.offset[b],a.factor[c]=a.factor[b],a.type[c]=a.type[b]);return!0}function p(a,b,d){a[4*b+0]=d.r/255;a[4*b+1]=d.g/255;a[4*b+2]=d.b/255;a[4*b+3]=d.a}function r(a,b,c){if(a.normalizationField)return e(c,"Could not convert color info: unsupported property"),null;if("string"===typeof a.field)if(a.stops){if(8<a.stops.length)return e(c,
"Could not convert color info: too many color stops"),null;b.color={field:a.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};a=a.stops;for(c=0;8>c;++c){var f=a[Math.min(c,a.length-1)];b.color.values[c]=f.value;p(b.color.colors,c,f.color)}}else if(a.colors){if(!d(a.minDataValue)||!d(a.maxDataValue))return e(c,"Could not convert color info: missing data values"),null;if(2!==a.colors.length)return e(c,"Could not convert color info: invalid colors array"),
null;b.color={field:a.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};b.color.values[0]=a.minDataValue;p(b.color.colors,0,a.colors[0]);b.color.values[1]=a.maxDataValue;p(b.color.colors,1,a.colors[1]);for(c=2;8>c;++c)b.color.values[c]=a.maxDataValue,p(b.color.colors,c,a.colors[1])}else return e(c,"Could not convert color info: missing stops or colors"),null;else if(a.stops&&0<=a.stops.length||a.colors&&0<=a.colors.length)for(a=a.stops&&0<=a.stops.length?
a.stops[0].color:a.colors[0],b.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},c=0;8>c;c++)b.color.values[c]=Infinity,p(b.color.colors,c,a);else return e(c,"Could not convert color info: no field and no colors/stops"),null;return b}function t(a,b,c,d){a=2===c&&"arithmetic"===a.rotationType;b.offset[c]=a?90:0;b.factor[c]=a?-1:1;b.type[c]=1}function q(a,b,c){if("string"!==typeof a.field)return e(c,"Could not convert rotation info: field is not a string"),
null;if(!b.rotation)b.rotation={field:a.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};else if(a.field)if(!b.rotation.field)b.rotation.field=a.field;else if(a.field!==b.rotation.field)return e(c,"Could not convert rotation info: multiple fields in use"),null;switch(a.axis){case "tilt":return t(a,b.rotation,0,c),b;case "roll":return t(a,b.rotation,1,c),b;case null:case void 0:case "heading":return t(a,b.rotation,2,c),b;default:return e(c,'Could not convert rotation info: unknown axis "'+a.axis+
'""'),null}}function u(a,b,c){if(!a)return null;var d=!b.supportedTypes||!!b.supportedTypes.size,f=!b.supportedTypes||!!b.supportedTypes.color,g=!b.supportedTypes||!!b.supportedTypes.rotation;return(a=a.reduce(function(a,k){if(!a)return a;if(k.valueExpression)return e(c,"Could not convert visual variables: arcade expressions not supported"),null;switch(k.type){case "size":return d?h(k,a,b,c):a;case "color":return f?r(k,a,c):a;case "rotation":return g?q(k,a,c):a;default:return e(c,"Could not convert visual variables: unsupported type "+
k.type),null}},{size:null,color:null,rotation:null}))&&a.size&&!m(a.size,b,c)?null:a}function x(a,b,c){if(!!a!==!!b||a&&a.field!==b.field)return!1;if(a&&"rotation"===c)for(c=0;3>c;c++)if(a.type[c]!==b.type[c]||a.offset[c]!==b.offset[c]||a.factor[c]!==b.factor[c])return!1;return!0}function v(a,b){var c={vvSizeEnabled:!1,vvSizeMinSize:null,vvSizeMaxSize:null,vvSizeOffset:null,vvSizeFactor:null,vvSizeValue:null,vvColorEnabled:!1,vvColorValues:null,vvColorColors:null,vvSymbolAnchor:null,vvSymbolRotation:null},
d=a&&null!=a.size;a&&a.size?(c.vvSizeEnabled=!0,c.vvSizeMinSize=a.size.minSize,c.vvSizeMaxSize=a.size.maxSize,c.vvSizeOffset=a.size.offset,c.vvSizeFactor=a.size.factor):a&&d&&(c.vvSizeValue=b.transformation.scale);a&&d&&(c.vvSymbolAnchor=b.transformation.anchor,c.vvSymbolRotation=b.transformation.rotation);a&&a.color&&(c.vvColorEnabled=!0,c.vvColorValues=a.color.values,c.vvColorColors=a.color.colors);return c}Object.defineProperty(g,"__esModule",{value:!0});g.convertVisualVariables=u;g.initFastSymbolUpdatesState=
function(a,b,c){return b&&a&&!a.disableFastUpdates?(a=u(a.visualVariables,c))?{enabled:!0,visualVariables:a,materialParameters:v(a,c),customTransformation:a&&null!=a.size}:{enabled:!1}:{enabled:!1}};g.updateFastSymbolUpdatesState=function(a,b,c){if(!b||!a.enabled)return!1;var d=a.visualVariables;b=u(b.visualVariables,c);if(!(b&&x(d.size,b.size,"size")&&x(d.color,b.color,"color")&&x(d.rotation,b.rotation,"rotation")))return!1;a.visualVariables=b;a.materialParameters=v(b,c);a.customTransformation=b&&
null!=b.size;return!0};g.getMaterialParams=v;var y;(function(b){var c=f.mat4d,d=f.vec3,e=c.create(),h=d.create();b.evaluateModelTransform=function(b,d,f){if(!b.vvSizeEnabled)return f;c.set(f,e);a.computeObjectRotation(b.vvSymbolRotation[2],b.vvSymbolRotation[0],b.vvSymbolRotation[1],e);if(b.vvSizeEnabled){for(f=0;3>f;++f){var g=b.vvSizeOffset[f]+d[0]*b.vvSizeFactor[f],k=f;var l=b.vvSizeMinSize[f],m=b.vvSizeMaxSize[f],g=g<l?l:g>m?m:g;h[k]=g}c.scale(e,h,e)}else c.scale(e,b.vvSizeValue,e);c.translate(e,
b.vvSymbolAnchor,e);return e}})(y||(y={}));g.evaluateModelTransform=y.evaluateModelTransform})},"esri/views/3d/layers/graphics/graphicUtils":function(){define("require exports ../../../../geometry ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/centroid ../../../../geometry/support/coordsUtils ../../../../geometry/support/webMercatorUtils ../../../../layers/graphics/dehydratedFeatures ../../lib/glMatrix ../../support/mathUtils".split(" "),
function(n,g,b,a,f,d,k,e,c,l,h){function m(a){var b=a.paths[0];if(!b||0===b.length)return null;b=k.getPointOnPath(b,k.getPathLength(b)/2);return c.makeDehydratedPoint(b[0],b[1],b[2],a.spatialReference)}function p(a){if(Array.isArray(a)){for(var b=0;b<a.length;b++)if(!p(a[b]))return!1;return!0}return null==a||0<=a}Object.defineProperty(g,"__esModule",{value:!0});var r=[1,1,1];g.computeCentroid=function(a){if("point"===a.type)return a;if(c.isHydratedGeometry(a))switch(a.type){case "extent":return a.center;
case "polygon":return a.centroid;case "polyline":return m(a);case "mesh":return a.extent.center}else switch(a.type){case "extent":var b=h.isFinite(a.zmin);return c.makeDehydratedPoint(.5*(a.xmax+a.xmin),.5*(a.ymax+a.ymin),b?.5*(a.zmax+a.zmin):void 0,a.spatialReference);case "polygon":return b=d.ringsCentroid(a.rings,c.hasZ(a)),c.makeDehydratedPoint(b[0],b[1],b[2],a.spatialReference);case "polyline":return m(a)}};g.convertPointSR=function(a,c){var d=a.spatialReference;d.isWebMercator&&c.isWGS84?(e.xyToLngLat(a.x,
a.y,t),a.x=t[0],a.y=t[1],a.spatialReference=b.SpatialReference.WGS84):c.isWebMercator&&d.isWGS84&&(e.lngLatToXY(a.x,a.y,t),a.x=t[0],a.y=t[1],a.spatialReference=b.SpatialReference.WebMercator)};g.enlargeExtent=function(a,b,c){if(a){b||(b=f.create());var d=.5*a.width*(c-1);c=.5*a.height*(c-1);a.width<1E-7*a.height?d+=c/20:a.height<1E-7*a.width&&(c+=d/20);l.vec4d.set4(a.xmin-d,a.ymin-c,a.xmax+d,a.ymax+c,b);return b}return null};g.updateVertexAttributeAuxpos1w=function(a,b){for(var c=0;c<a.geometries.length;++c){var d=
a.geometries[c].data.vertexAttributes.auxpos1;d&&d.data[3]!==b&&(d.data[3]=b,a.geometryVertexAttrsUpdated(c))}};g.mixinColorAndOpacity=function(a,b){var c=[1,1,1,1];null!=a&&(c[0]=a[0],c[1]=a[1],c[2]=a[2]);null!==b&&void 0!==b?c[3]=b:null!=a&&3<a.length&&(c[3]=a[3]);return c};g.overrideColor=function(a,b,c,d,e,f){void 0===f&&(f=[0,0,0,0]);for(var h=0;3>h;++h)f[h]=a&&null!=a[h]?a[h]:c&&null!=c[h]?c[h]:e[h];f[3]=null!=b?b:null!=d?d:e[3];return f};g.computeObjectScale=function(a,b,c,d){void 0===a&&(a=
r);void 0===d&&(d=1);var e=Array(3);if(null==b||null==c)e[0]=1,e[1]=1,e[2]=1;else{for(var f=void 0,h=0,g=2;0<=g;g--){var k=a[g],l=void 0,m=null!=k,p=0===g&&!f&&!m,n=c[g];"symbolValue"===k||p?l=0!==n?b[g]/n:1:m&&"proportional"!==k&&isFinite(k)&&(l=0!==n?k/n:1);null!=l&&(f=e[g]=l,h=Math.max(h,Math.abs(l)))}for(g=2;0<=g;g--)null==e[g]?e[g]=f:0===e[g]&&(e[g]=.001*h)}for(g=2;0<=g;g--)e[g]/=d;return e};g.computeSizeWithResourceSize=function(a,b){var c=b.width,d=b.depth,e=b.height;b=b.isPrimitive?10:1;if(null==
c&&null==e&&null==d)return[b*a[0],b*a[1],b*a[2]];for(var c=[c,d,e],f,d=0;3>d;d++)if(e=c[d],null!=e){f=e/a[d];break}for(d=0;3>d;d++)null==c[d]&&(c[d]=a[d]*f);return c};g.validateSymbolLayerSize=function(a){null!=a.isPrimitive&&(a=[a.width,a.depth,a.height]);return p(a)?null:"Symbol sizes may not be negative values"};g.computeObjectRotation=function(a,b,c,d){void 0===d&&(d=l.mat4d.identity());a=a||0;b=b||0;c=c||0;0!==a&&l.mat4d.rotateZ(d,-a/180*Math.PI,d);0!==b&&l.mat4d.rotateX(d,b/180*Math.PI,d);0!==
c&&l.mat4d.rotateY(d,c/180*Math.PI,d);return d};g.demResolutionForBoundingBox=function(b,c){return null!=c.minDemResolution?c.minDemResolution:a.isPoint(b)?c.minDemResolutionForPoints:.01*a.maximumDimension(b)};var t=[0,0]})},"esri/views/2d/layers/support/FeaturesView2D":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../Graphic ../../../../core/Collection ../../../../core/Handles ../../../../core/Logger ../../../../core/promiseUtils ../../../../core/accessorSupport/decorators ../../../../renderers/support/renderingInfoUtils ../../../../symbols/Symbol3D ../../engine/graphics/GFXGroup ../../engine/graphics/GFXObject ../../engine/graphics/GFXSurface ../../../layers/GraphicsView".split(" "),
function(n,g,b,a,f,d,k,e,c,l,h,m,p,r,t,q){var u=e.getLogger("esri.views.2d.layers.support.FeaturesView2D");return function(e){function g(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c=e.apply(this,a)||this;c._handles=new k;c._backgroundGroup=new p;c._frontGroup=new p;c._frontObjects=new Map;c._backgroundObjects=new Map;c._scale=0;c.container=new t;c.layer=null;c.container.addChild(c._backgroundGroup);c.container.addChild(c._frontGroup);c.watch("graphics",function(){return c._reset()});
c.watch("renderer",function(){return c._resymbolize()});c.watch("mapView.scale, mapView.stationary",function(){return c._applyScale()});return c}b(g,e);g.prototype.destroy=function(){this.renderer=this.graphics=null};g.prototype.hitTest=function(a,b){a+=this.mapView.position[0]-window.pageXOffset;b+=this.mapView.position[1]-window.pageYOffset;return(a=this.container.hitTest(a,b))?c.resolve(a.graphic):c.resolve()};g.prototype.graphicUpdateHandler=function(a){};g.prototype._reset=function(){var a=this;
this._handles.remove("graphics");this.graphics&&(this.graphics.forEach(this._add,this),this._handles.add(this.graphics.on("change",function(b){return a._graphicsChangeHandler(b)}),"graphics"))};g.prototype._applyScale=function(){var a=this.get("mapView.scale"),b=this.get("mapView.stationary");a!==this._scale&&b&&(this._scale=a,this._resymbolize())};g.prototype._resymbolize=function(){var a=this;this.graphics&&this.graphics.forEach(function(b){return a._resymbolizeGraphic(b)})};g.prototype._add=function(a){if(a&&
!this._frontObjects.has(a)){var b=h.getRenderingInfo(a,{renderer:this.renderer,viewingMode:"map",scale:this.mapView.state.scale,resolution:this.mapView.state.resolution,spatialReference:this.mapView.spatialReference});if(b)if(b.symbol instanceof m)u.error("3D symbols are not supported with MapView");else{var c=new r;c.graphic=a;c.renderingInfo=b;this._frontObjects.set(a,c);this._frontGroup.addChild(c);var d=b.renderer&&b.renderer.backgroundFillSymbol;d&&c.isPolygonMarkerSymbol&&(c=new r,c.graphic=
a,c.renderingInfo=null!=b.outlineSize?{symbol:d,size:[b.outlineSize,b.outlineSize,b.outlineSize]}:{symbol:d},this._backgroundObjects.set(a,c),this._backgroundGroup.addChild(c))}}};g.prototype._remove=function(a){var b=this._frontObjects.get(a);b&&(this._frontObjects.delete(a),this._frontGroup.removeChild(b),this._backgroundObjects.has(a)&&(b=this._backgroundObjects.get(a),this._backgroundObjects.delete(a),this._backgroundGroup.removeChild(b)))};g.prototype._resymbolizeGraphic=function(a){if(this._frontObjects.has(a)){var b=
h.getRenderingInfo(a,{renderer:this.renderer,viewingMode:"map",scale:this.mapView.state.scale,resolution:this.mapView.state.resolution,spatialReference:this.mapView.spatialReference});if(b)if(b.symbol instanceof m)u.error("3D symbols are not supported with MapView");else{var c=this._frontObjects.get(a);c&&(c.renderingInfo=b);var d=b.renderer&&b.renderer.backgroundFillSymbol,e=this._backgroundObjects.get(a);d&&c.isPolygonMarkerSymbol?(e||(e=new r,e.graphic=a,this._backgroundObjects.set(a,e),this._backgroundGroup.addChild(e)),
e.renderingInfo=null!=b.outlineSize?{symbol:d,size:[b.outlineSize,b.outlineSize,b.outlineSize]}:{symbol:d}):!d&&e&&(this._backgroundObjects.delete(a),this._backgroundGroup.removeChild(e))}}};g.prototype._graphicsChangeHandler=function(a){for(var b=a.removed,c=0,d=a.added;c<d.length;c++)a=d[c],this._add(a);for(c=0;c<b.length;c++)a=b[c],this._remove(a)};a([l.property()],g.prototype,"container",void 0);a([l.property(),l.cast(d.ofType(f))],g.prototype,"graphics",void 0);a([l.property()],g.prototype,"layer",
void 0);a([l.property()],g.prototype,"mapView",void 0);return g=a([l.subclass("esri.views.2d.layers.support.FeaturesView2D")],g)}(l.declared(q))})},"esri/renderers/support/renderingInfoUtils":function(){define(["require","exports"],function(n,g){function b(a,b){if(!a||a.symbol)return null;b=b.renderer;return a&&b&&b.getObservationRenderer?b.getObservationRenderer(a):b}function a(a,d){if(a.symbol)return a.symbol;var f=b(a,d);return f&&f.getSymbol(a,d)}Object.defineProperty(g,"__esModule",{value:!0});
g.getRenderer=b;g.getSymbol=a;g.getRenderingInfo=function(f,d){var g=b(f,d),e=a(f,d);if(!e)return null;e={renderer:g,symbol:e};if(g){g.colorInfo&&(e.color=g.getColor(f).toRgba());if(g.sizeInfo){var c=g.getSize(f);e.size=[c,c,c]}if(g.visualVariables){f=g.getVisualVariableValues(f,d);c=["proportional","proportional","proportional"];for(d=0;d<f.length;d++){var l=f[d],g=l.variable,h=l.value;"color"===g.type?e.color=h.toRgba():"size"===g.type?"outline"===g.target?e.outlineSize=h:(l=g.axis,g=g.useSymbolValue?
"symbolValue":h,"width"===l?c[0]=g:"depth"===l?c[1]=g:"height"===l?c[2]=g:c[0]="width-and-depth"===l?c[1]=g:c[1]=c[2]=g):"opacity"===g.type?e.opacity=h:"rotation"===g.type&&"tilt"===g.axis?e.tilt=h:"rotation"===g.type&&"roll"===g.axis?e.roll=h:"rotation"===g.type&&(e.heading=h)}if(isFinite(c[0])||isFinite(c[1])||isFinite(c[2]))e.size=c}}return e}})},"esri/views/layers/RefreshableLayerView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),
function(n,g,b,a,f,d){return function(f){function e(){var a=null!==f&&f.apply(this,arguments)||this;a.refreshTimestamp=null;return a}b(e,f);e.prototype.refresh=function(a){void 0===a&&(a=Date.now());this._set("refreshTimestamp",a);this.doRefresh&&this.doRefresh()};a([d.property()],e.prototype,"layer",void 0);a([d.aliasOf("layer.refreshInterval")],e.prototype,"refreshInterval",void 0);a([d.property({readOnly:!0})],e.prototype,"refreshTimestamp",void 0);return e=a([d.subclass("esri.layers.mixins.RefreshableLayerView")],
e)}(d.declared(f))})},"esri/views/2d/layers/TiledLayerView2D":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Error ../../../core/promiseUtils ../../../core/accessorSupport/decorators ../engine/BitmapContainer ../engine/BitmapSource ../engine/BitmapTile ../engine/Canvas2DContainer ./LayerView2D ../tiling/TileInfoView ../tiling/TileQueue ../tiling/TileStrategy ../../layers/RefreshableLayerView".split(" "),function(n,g,b,
a,f,d,k,e,c,l,h,m,p,r,t,q){var u=[0,0];return function(g){function m(){var a=null!==g&&g.apply(this,arguments)||this;a._tileStrategy=null;a._tileInfoView=null;a._fetchQueue=null;a._tileRequests=new Map;a.container=new h;a.layer=null;return a}b(m,g);m.prototype.initialize=function(){var a=this.layer.tileInfo,a=a&&a.spatialReference,b;a||(b=new f("layerview:tiling-information-missing","The layer doesn't provide tiling information",{layer:this.layer}));a.equals(this.view.spatialReference)||(b=new f("layerview:spatial-reference-incompatible",
"The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}));b&&this.addResolvingPromise(d.reject(b))};m.prototype.hitTest=function(a,b){return null};m.prototype.update=function(a){this._fetchQueue.pause();this._fetchQueue.state=a.state;this._tileStrategy.update(a);this._fetchQueue.resume();this.notifyChange("updating")};m.prototype.attach=function(){var a=this;this._tileContainer=new e;this.container.addChild(this._tileContainer);this._tileInfoView=new p(this.layer.tileInfo,
this.layer.fullExtent);this._fetchQueue=new r({tileInfoView:this._tileInfoView,tileServers:this.layer.tileServers,concurrency:this.layer.url&&-1!==this.layer.url.indexOf("tiles.arcgis.com")?12:6,process:function(b,c){return a.fetchTile(b,c)}});this._tileStrategy=new t({cachePolicy:"keep",acquireTile:function(b){return a.acquireTile(b)},releaseTile:function(b){return a.releaseTile(b)},tileInfoView:this._tileInfoView})};m.prototype.detach=function(){this._tileStrategy.destroy();this._fetchQueue.clear();
this.container.removeChild(this._tileContainer);this._fetchQueue=this._tileStrategy=this._tileInfoView=this._tileContainer=null};m.prototype.moveStart=function(){this.requestUpdate()};m.prototype.viewChange=function(){this.requestUpdate()};m.prototype.moveEnd=function(){this.requestUpdate()};m.prototype.doRefresh=function(){var a=this;this.updateRequested||this.suspended||(this._fetchQueue.reset(),this._tileStrategy.tiles.forEach(function(b){return a._enqueueTileFetch(b)}),this.notifyChange("updating"))};
m.prototype.isUpdating=function(){var a=!0;this._tileRequests.forEach(function(b){a=a&&b.isFulfilled()});return!a};m.prototype.getTileBounds=function(a,b){return this._tileInfoView.getTileBounds(a,b)};m.prototype.getTileCoords=function(a,b){return this._tileInfoView.getTileCoords(a,b)};m.prototype.getTileResolution=function(a){return this._tileInfoView.getTileResolution(a)};m.prototype.acquireTile=function(a){var b=l.default.pool.acquire();b.key.set(a);a=this._tileInfoView.getTileCoords(u,b.key);
b.x=a[0];b.y=a[1];b.resolution=this._tileInfoView.getTileResolution(b.key);a=this._tileInfoView.tileInfo.size;b.width=a[0];b.height=a[1];this._enqueueTileFetch(b);this.requestUpdate();return b};m.prototype.releaseTile=function(a){var b=this,c=this._tileRequests.get(a);c&&!c.isFulfilled()&&c.cancel();this._tileRequests.delete(a);this._tileContainer.removeChild(a);a.once("detach",function(){l.default.pool.release(a);b.requestUpdate()});this.requestUpdate()};m.prototype.fetchTile=function(a,b){var c=
this;if(b=this.layer.tilemapCache){var d=a.level,e=a.row,f=a.col;return b.fetchAvailabilityUpsample(d,e,f,a).then(function(){return c._fetchImage(a)}).catch(function(){a.level=d;a.row=e;a.col=f;return c._fetchImage(a)})}return this._fetchImage(a)};m.prototype._enqueueTileFetch=function(a){var b=this;if(!this._fetchQueue.has(a.key)){var c=this._fetchQueue.push(a.key).then(function(c){a.source=c;a.once("attach",function(){return b.requestUpdate()});b._tileContainer.addChild(a);b.requestUpdate()});this._tileRequests.set(a,
c)}};m.prototype._fetchImage=function(a){var b=this;return this.layer.fetchTile(a.level,a.row,a.col,{timestamp:this.refreshTimestamp}).then(function(d){d=c.default.pool.acquire(d);e=b.getTileCoords(u,a);d.x=e[0];d.y=e[1];d.resolution=b.getTileResolution(a);return d;var e})};return m=a([k.subclass("esri.views.2d.layers.TiledLayerView2D")],m)}(k.declared(m,q))})},"esri/views/2d/engine/BitmapContainer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ../ViewState ../viewStateUtils ./Container".split(" "),
function(n,g,b,a,f,d,k){var e=[0,0];return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b._childrenCanvas=null;b._childrenRenderParameters={context:null,pixelRatio:1,state:new f,stationary:!0};return b}b(c,a);c.prototype.attach=function(b){this._childrenCanvas||(this._childrenCanvas=document.createElement("canvas"),this._childrenRenderParameters.context=this._childrenCanvas.getContext("2d"));return a.prototype.attach.call(this,b)};c.prototype.detach=function(b){a.prototype.detach.call(this,
b);this._childrenCanvas=null;this._childrenRenderParameters.context=null};c.prototype.doRender=function(b){this.visible&&a.prototype.doRender.call(this,b)};c.prototype.prepareChildrenRenderParameters=function(a){var b=this._childrenCanvas,c=this._childrenRenderParameters,f=a.state,g=f.pixelRatio,h=c.state;h.copy(f);var k=d.getOuterSize(e,f),f=k[0],k=k[1],f=f*g,k=k*g;h.size=e;h.viewpoint.rotation=0;b.width!==f||b.height!==k?(b.width=f,b.height=k):c.context.clearRect(0,0,f,k);c.pixelRatio=a.pixelRatio;
return c};c.prototype.beforeRenderChildren=function(a,b){this.sortChildren(function(a,b){return b.resolution-a.resolution})};c.prototype.afterRenderChildren=function(a,b){var c=a.context;a=a.state;var d=b.context;b=b.state;0===a.rotation?c.drawImage(d.canvas,0,0):(c.save(),c.translate(.5*a.width,.5*a.height),c.rotate(a.rotation*Math.PI/180),c.translate(.5*-a.width,.5*-a.height),c.drawImage(d.canvas,.5*(a.width-b.width),.5*(a.height-b.height)),c.restore())};return c}(k)})},"esri/views/2d/viewStateUtils":function(){define(["require",
"exports"],function(n,g){Object.defineProperty(g,"__esModule",{value:!0});var b=Math.PI/180;g.snapToPixel=function(a,b,d){var f=d.resolution;d=d.size;a[0]=f*(Math.round(b[0]/f)+d[0]%2*.5);a[1]=f*(Math.round(b[1]/f)+d[1]%2*.5);return a};g.getOuterSize=function(a,f){var d=f.rotation*b,g=Math.abs(Math.cos(d)),d=Math.abs(Math.sin(d)),e=f.size;f=e[0];e=e[1];a[0]=Math.round(e*d+f*g);a[1]=Math.round(e*g+f*d);return a};g.getBBox=function(a,b,d,g){var e=b[0];b=b[1];var c=g[0];g=g[1];d*=.5;a[0]=e-d*c;a[1]=
b-d*g;a[2]=e+d*c;a[3]=b+d*g;return a};g.bboxIntersects=function(a,b){var d=a[1],f=a[2],e=a[3],c=b[0],g=b[1],h=b[3];return!(a[0]>b[2]||f<c||d>h||e<g)}})},"esri/views/2d/engine/BitmapSource":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../../../core/ObjectPool","../support/Evented"],function(n,g,b,a,f){function d(a){return a&&"render"in a}Object.defineProperty(g,"__esModule",{value:!0});n=function(f){function e(a){var b=f.call(this)||this;b._height=0;b.pixelRatio=
1;b.resolution=0;b.rotation=0;b._width=0;b.x=0;b.y=0;b.data=a;return b}b(e,f);e.prototype.release=function(){this.data=null};Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(a){this._data=a;this._width=this._height=0;a&&!d(a)&&(a instanceof HTMLImageElement?(this._width=a.naturalWidth,this._height=a.naturalHeight):0<a.width&&0<a.height&&(this._width=a.width,this._height=a.height))},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"height",{get:function(){return d(this._data)?
this._data.height:this._height},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"ready",{get:function(){return d(this._data)?0<this._data.width&&0<this._data.height:0<this._width},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"width",{get:function(){return d(this.data)?this._data.width:this._width},enumerable:!0,configurable:!0});e.prototype.draw=function(a,b,e,f,g,k,n,q,u){if(this.ready)if(d(this._data))this._data.render(a,b,e,f,g,k,n,q,u);else{var c=this._data;
c&&!("render"in c)&&f&&g&&q&&u&&a.drawImage(this._data,b,e,f,g,k,n,q,u)}};e.pool=new a(e,!0);return e}(f.default);g.default=n})},"esri/views/2d/support/Evented":function(){define(["require","exports"],function(n,g){Object.defineProperty(g,"__esModule",{value:!0});n=function(){function b(){this._listeners={}}b.prototype.on=function(a,b){var d=this;null==this._listeners[a]&&(this._listeners[a]=new Map);var f={};this._listeners[a].set(f,b);return{remove:function(){return d._listeners[a].delete(f)}}};
b.prototype.once=function(a,b){var d=this.on(a,function(a){d.remove();b(a)});return d};b.prototype.emit=function(a,b){this.hasEventListener(a)&&this._listeners[a].forEach(function(a){return a(b)})};b.prototype.hasEventListener=function(a){return null!=this._listeners[a]&&0<this._listeners[a].size};return b}();g.default=n})},"esri/views/2d/engine/BitmapTile":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ../../../core/ObjectPool ../tiling ./Bitmap ./Tiled".split(" "),
function(n,g,b,a,f,d,k,e){Object.defineProperty(g,"__esModule",{value:!0});n=function(a){function c(b){b=a.call(this,b)||this;b.key=new d.TileKey(0,0,0,0);return b}b(c,a);c.prototype.acquire=function(a){};c.prototype.release=function(){this.key.set(0,0,0,0)};c.pool=new f(c,!0);return c}(e(k));g.default=n})},"esri/views/2d/tiling":function(){define("require exports ./tiling/TileInfoView ./tiling/TileKey ./tiling/TileQueue ./tiling/TileStrategy".split(" "),function(n,g,b,a,f,d){Object.defineProperty(g,
"__esModule",{value:!0});g.TileInfoView=b;g.TileKey=a;g.TileQueue=f;g.TileStrategy=d})},"esri/views/2d/engine/Bitmap":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(n,g,b,a){var f=[0,0];return function(a){function d(b){var c=a.call(this)||this;c.height=0;c.resolution=0;c.rotation=0;c._source=null;c._sourceHandle=null;c.width=0;c.x=0;c.y=0;c.source=b;c.requestRender=c.requestRender.bind(c);return c}b(d,a);Object.defineProperty(d.prototype,
"source",{get:function(){return this._source},set:function(a){this._sourceHandle&&(this._sourceHandle.remove(),this._sourceHandle=null);if(this._source=a)this._sourceHandle=this._source.on("update",this.requestRender)},enumerable:!0,configurable:!0});d.prototype.doRender=function(a){this.source&&this.source.ready&&this.renderCanvas2D(a)};d.prototype.renderCanvas2D=function(a){var b=this.source,d=a.context,e=a.state;a=e.rotation;var g=this.resolution/e.resolution*e.pixelRatio;if(!(.05>g)){d.save();
var k=e.toScreen(f,this.x,this.y),e=k[0],k=k[1];.99<g&&1.01>g?d.translate(Math.round(e),Math.round(k)):(d.translate(e,k),d.scale(g,g));a&&d.rotate(a*Math.PI/180);b.rotation&&(d.translate(.5*this.width,.5*this.height),d.rotate(-b.rotation*Math.PI/180),d.translate(.5*-this.width,.5*-this.height));k=b.resolution||this.resolution;a=(this.x-b.x)/k;g=-(this.y-b.y)/k;e=this.resolution/k*(b.width||this.width);k=this.resolution/k*(b.height||this.height);d.clearRect(0,0,this.width,this.height);b.draw(d,Math.round(a),
Math.round(g),Math.round(e),Math.round(k),0,0,this.width,this.height);d.restore()}};return d}(a)})},"esri/views/2d/engine/Tiled":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./Evented"],function(n,g,b,a){return function(f){f=function(a){function d(){for(var b=0;b<arguments.length;b++);return a.call(this)||this}b(d,a);return d}(f);return a.EventedMixin(f)}})},"esri/views/2d/engine/Canvas2DContainer":function(){define(["require","exports","../../../core/tsSupport/extendsHelper",
"../ViewState","./Container"],function(n,g,b,a,f){return function(d){function f(){var b=null!==d&&d.apply(this,arguments)||this;b._childrenRenderParameters={context:null,pixelRatio:1,state:new a,stationary:!0};b.hidpi=!1;return b}b(f,d);f.prototype.createElement=function(){var a=document.createElement("canvas");a.setAttribute("class","esri-display-object");return a};f.prototype.setElement=function(a){this.element=a};f.prototype.doRender=function(a){var b=this.element,e=b.style;if(this.visible){var f=
a.state,g=a.pixelRatio,k=f.width,f=f.height;b.width=k*(this.hidpi?g:1);b.height=f*(this.hidpi?g:1);e.display="block";e.opacity=""+this.opacity;e.width=k+"px";e.height=f+"px";d.prototype.doRender.call(this,a)}else e.display="none"};f.prototype.prepareChildrenRenderParameters=function(a){var b=this._childrenRenderParameters;b.context=this.element.getContext("2d");b.pixelRatio=a.pixelRatio;b.state.copy(a.state);b.state.pixelRatio=this.hidpi?a.pixelRatio:1;b.stationary=a.stationary;return b};f.prototype.beforeRenderChildren=
function(a,b){a=b.context;var c=b.state;a.save();if(c.spatialReference.isWrappable){var d=c.width;b=c.height;var e=c.pixelRatio,f=this.hidpi?e:1,e=c.rotation*Math.PI/180,g=Math.round(d*f*Math.abs(Math.cos(e))+b*f*Math.abs(Math.sin(e))),c=c.worldScreenWidth*f;c<g&&(d=d*f*.5,b=b*f*.5,e&&(a.translate(d,b),a.rotate(e),a.translate(-d,-b)),a.beginPath(),a.rect(d-.5*c,b-.5*g,c,g),a.closePath(),e&&(a.translate(d,b),a.rotate(-e),a.translate(-d,-b)),a.clip("evenodd"))}};f.prototype.afterRenderChildren=function(a,
b){b.context.restore()};f.prototype.renderChild=function(a,b){b.context.save();a.processRender(b);b.context.restore()};return f}(f)})},"url:esri/views/2d/engine/webgl/shaders/backgroundShaders.xml":'\x3csnippets\x3e\n  \x3csnippet name\x3d"backgroundVS"\x3e\n  \x3c![CDATA[\n    attribute vec2 a_pos;\n\n    uniform highp mat4 u_transformMatrix;\n    uniform mediump vec2 u_normalized_origin;\n    uniform mediump float u_coord_range;\n    uniform mediump float u_depth;\n\n    void main() {\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\n    }\n  ]]\x3e\n  \x3c/snippet\x3e\n\n  \x3csnippet name\x3d"backgroundFS"\x3e\n  \x3c![CDATA[\n    uniform lowp vec4 u_color;\n    void main() {\n      gl_FragColor \x3d u_color;\n    }\n  ]]\x3e\n  \x3c/snippet\x3e\n\x3c/snippets\x3e\n',
"url:esri/views/2d/engine/webgl/shaders/bitblitShaders.xml":'\x3csnippets\x3e\n  \x3csnippet name\x3d"bitblitVS"\x3e\n  \x3c![CDATA[\n    attribute vec2 a_pos;\n    attribute vec2 a_tex;\n\n    varying mediump vec2 v_uv;\n\n    void main(void) {\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\n      v_uv \x3d a_tex;\n    }\n  ]]\x3e\n  \x3c/snippet\x3e\n\n  \x3csnippet name\x3d"bitblitFS"\x3e\n  \x3c![CDATA[\n    \tuniform lowp sampler2D u_tex;\n      uniform lowp float u_opacity;\n\n      varying mediump vec2 v_uv;\n\n      void main() {\n        lowp vec4 color \x3d texture2D(u_tex, v_uv);\n\n        // Note: output in pre-multiplied alpha for correct alpha compositing\n        gl_FragColor \x3d color *  u_opacity;\n      }\n  ]]\x3e\n  \x3c/snippet\x3e\n\x3c/snippets\x3e\n',
"url:esri/views/2d/engine/webgl/shaders/stencilShaders.xml":'\x3csnippets\x3e\n  \x3csnippet name\x3d"stencilVS"\x3e\n  \x3c![CDATA[\n    attribute vec2 a_pos;\n\n    void main() {\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\n    }\n  ]]\x3e\n  \x3c/snippet\x3e\n\n  \x3csnippet name\x3d"stencilFS"\x3e\n  \x3c![CDATA[\n    void main() {\n      gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\n    }\n  ]]\x3e\n  \x3c/snippet\x3e\n\x3c/snippets\x3e\n',"url:esri/views/2d/engine/webgl/shaders/tileInfo.xml":'\x3csnippets\x3e\n  \x3csnippet name\x3d"tileInfoVS"\x3e\n  \x3c![CDATA[\n    attribute vec2 a_pos;\n\n    uniform highp mat4 u_transformMatrix;\n    uniform mediump vec2 u_normalized_origin;\n    uniform mediump float u_depth;\n    uniform mediump float u_coord_ratio;\n    uniform mediump vec2 u_delta; // in tile coordinates\n    uniform mediump vec2 u_dimensions; // in tile coordinates\n\n    varying mediump vec2 v_tex;\n\n    void main() {\n      mediump vec2 offests \x3d u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(offests, 0.0, 1.0);\n\n      v_tex \x3d a_pos;\n    }\n  ]]\x3e\n  \x3c/snippet\x3e\n\n  \x3csnippet name\x3d"tileInfoFS"\x3e\n  \x3c![CDATA[\n    uniform mediump sampler2D u_texture;\n    varying mediump vec2 v_tex;\n\n    void main(void) {\n      lowp vec4 color \x3d texture2D(u_texture, v_tex);\n      gl_FragColor \x3d 0.75 * color;\n    }\n  ]]\x3e\n  \x3c/snippet\x3e\n\x3c/snippets\x3e\n',
"url:esri/views/2d/engine/webgl/shaders/fillShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\n\x3c!--\n  // YF TODO: (doc)\n--\x3e\n\x3csnippets\x3e\n  \x3csnippet name\x3d"fillVVUniformsVS"\x3e\n    \x3c![CDATA[\n  #if defined(VV_COLOR)|| defined(VV_OPACITY)\n    attribute vec4 a_vv;\n  #endif // VV_COLOR || VV_OPACITY\n\n  #ifdef VV_COLOR\n    uniform float u_vvColorValues[8];\n    uniform vec4 u_vvColors[8];\n  #endif // VV_COLOR\n\n  #ifdef VV_OPACITY\n    uniform float u_vvOpacityValues[8];\n    uniform float u_vvOpacities[8];\n  #endif // VV_OPACITY\n\n    ]]\x3e\n  \x3c/snippet\x3e\n\n  \x3csnippet name\x3d"fillVVFunctions"\x3e\n    \x3c![CDATA[\n    bool isNan(float val) {\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\n    }\n    \n  #ifdef VV_OPACITY\n    const int VV_OPACITY_N \x3d 8;\n\n    float getVVOpacity(float opacityValue) {\n      if (isNan(opacityValue)) { \n        return 1.0;\n      }\n\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\n        return u_vvOpacities[0];\n      }\n\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\n        }\n      }\n\n      return u_vvOpacities[VV_OPACITY_N - 1];\n    }\n  #endif // VV_OPACITY\n\n  #ifdef VV_COLOR\n    const int VV_COLOR_N \x3d 8;\n\n    vec4 getVVColor(float colorValue, vec4 fallback) {\n      if (isNan(colorValue)) { \n        return fallback;\n      }\n      \n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\n        return u_vvColors[0];\n      }\n\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\n        }\n      }\n\n      return u_vvColors[VV_COLOR_N - 1];\n    }\n  #endif // VV_COLOR\n    ]]\x3e\n  \x3c/snippet\x3e\n\n  \x3csnippet name\x3d"fillVS"\x3e\n    \x3c![CDATA[\n      precision mediump float;\n\n      attribute vec2 a_pos;\n      attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\n      attribute vec4 a_color;\n      attribute vec4 a_tlbr;\n      attribute vec4 a_aux;\n\n      uniform highp mat4 u_transformMatrix;\n      uniform highp vec2 u_normalized_origin;\n\n      varying lowp vec4 v_color;\n      varying lowp float v_opacity;\n\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\n      $fillVVUniformsVS\n      $fillVVFunctions\n\n  #ifdef PATTERN\n    uniform mediump float u_zoomFactor;\n    uniform mediump vec2 u_mosaicSize;\n\n    varying mediump vec4 v_tlbr;\n    varying mediump vec2 v_tileTextureCoord;\n  #endif // PATTERN\n\n  #ifdef ID\n    varying highp vec4 v_id;\n  #endif // ID\n\n      void main()\n      {\n  #ifdef VV_OPACITY\n        v_opacity \x3d getVVOpacity(a_vv.y);\n  #else\n        v_opacity \x3d 1.0;\n  #endif\n\n  #ifdef VV_COLOR\n       v_color \x3d getVVColor(a_vv.x, a_color);\n  #else\n       v_color \x3d a_color;\n  #endif // VV_COLOR\n\n  #ifdef ID\n      v_id \x3d a_id;\n  #endif // ID\n\n  #ifdef PATTERN\n       // calculate the pattern matrix\n       mat3 patternMatrix \x3d mat3(1.0, 0.0, 0.0,\n                                 0.0, 1.0, 0.0,\n                                 0.0, 0.0, 1.0);\n       patternMatrix[0][0] \x3d 1.0 / (u_zoomFactor * a_aux.x);\n       patternMatrix[1][1] \x3d 1.0 / (u_zoomFactor * a_aux.y);\n\n       // calculate the texture coordinates of the current vertex. It will of course get interpolated.\n       // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from\n       // tile coordinates to texture coordinates.\n       v_tileTextureCoord \x3d (patternMatrix * vec3(a_pos, 1.0)).xy;\n       v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\n  #endif // PATTERN\n\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\n      }\n    ]]\x3e\n  \x3c/snippet\x3e\n\n  \x3csnippet name\x3d"fillFS"\x3e\n    \x3c![CDATA[\n      precision lowp float;\n      uniform lowp float u_opacity;\n\n  #ifdef PATTERN\n      uniform lowp sampler2D u_texture;\n\n      varying mediump vec4 v_tlbr;\n      varying mediump vec2 v_tileTextureCoord;\n  #endif // PATTERN\n\n  #ifdef ID\n    varying highp vec4 v_id;\n  #endif // ID\n\n      varying lowp vec4 v_color;\n      varying lowp float v_opacity;\n\n      void main()\n      {\n  #ifdef PATTERN\n         // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\n         mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\n         // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\n         // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\n         // we need to only sample from area that has our sprite in the mosaic.\n         mediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\n         // sample the sprite mosaic\n         lowp vec4 color \x3d texture2D(u_texture, samplePos);\n         gl_FragColor \x3d u_opacity * v_opacity * v_color * color;\n  #else\n        gl_FragColor \x3d u_opacity * v_opacity * v_color;\n  #endif // PATTERN\n\n  #ifdef HIGHLIGHT\n        gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\n  #endif // HIGHLIGHT\n\n  #ifdef ID\n      //if (gl_FragColor.a \x3c 1.0 / 255.0) {\n      //  discard;\n      //}\n      gl_FragColor \x3d v_id;\n  #endif // ID\n      }\n    ]]\x3e\n  \x3c/snippet\x3e\n\x3c/snippets\x3e\n',
"url:esri/views/2d/engine/webgl/shaders/iconShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\n\x3c!--\n  Add your GLSL snippets to this file. You should start from\n  importing your old GLSL files. For instance, if you have a\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\n  and then copy and paste the GLSL source as the content. You will then convert your\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\n--\x3e\n\x3csnippets\x3e\n\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\n    // TODO consider moving this snippet into a util.xml file\n\n    // Factors to convert rgba back to float\n    const vec4 rgba2float_factors \x3d vec4(\n        255.0 / (256.0),\n        255.0 / (256.0 * 256.0),\n        255.0 / (256.0 * 256.0 * 256.0),\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n      );\n\n    float rgba2float(vec4 rgba) {\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\n      // add the components together with their corresponding\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\n      return dot(rgba, rgba2float_factors);\n    }\n  ]]\x3e\x3c/snippet\x3e\n\n  \x3csnippet name\x3d"iconVVUniformsVS"\x3e\n    \x3c![CDATA[\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\n    attribute vec4 a_vv;\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\n\n  #ifdef VV_COLOR\n    uniform float u_vvColorValues[8];\n    uniform vec4 u_vvColors[8];\n  #endif // VV_COLOR\n\n  #ifdef VV_SIZE_MIN_MAX_VALUE\n    uniform vec4 u_vvSizeMinMaxValue;\n  #endif // VV_SIZE_MIN_MAX_VALUE\n\n  #ifdef VV_SIZE_SCALE_STOPS\n    uniform float u_vvSizeScaleStopsValue;\n  #endif // VV_SIZE_SCALE_STOPS\n\n  #ifdef VV_SIZE_FIELD_STOPS\n    uniform float u_vvSizeFieldStopsValues[6];\n    uniform float u_vvSizeFieldStopsSizes[6];\n  #endif // VV_SIZE_FIELD_STOPS\n\n  #ifdef VV_SIZE_UNIT_VALUE\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\n  #endif // VV_SIZE_UNIT_VALUE\n\n  #ifdef VV_OPACITY\n    uniform float u_vvOpacityValues[8];\n    uniform float u_vvOpacities[8];\n  #endif // VV_OPACITY\n\n  #ifdef VV_ROTATION\n    uniform lowp float u_vvRotationType;\n  #endif // VV_ROTATION\n\n    ]]\x3e\n  \x3c/snippet\x3e\n\n  \x3csnippet name\x3d"iconVVFunctions"\x3e\n    \x3c![CDATA[\n    bool isNan(float val) {\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\n    }\n    \n  #ifdef VV_SIZE_MIN_MAX_VALUE\n    float getVVMinMaxSize(float sizeValue, float fallback) {\n      if (isNan(sizeValue)) { \n        return fallback;\n      }\n\n      // we need to multiply by 8 in order to translate to tile coordinates\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\n      interpolationRatio \x3d clamp(interpolationRatio, 0.0, 1.0);\n      return u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z);\n    }\n  #endif // VV_SIZE_MIN_MAX_VALUE\n\n  #ifdef VV_SIZE_FIELD_STOPS\n    const int VV_SIZE_N \x3d 6;\n    float getVVStopsSize(float sizeValue, float fallback) {\n      if (isNan(sizeValue)) { \n        return fallback;\n      }\n\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\n        return u_vvSizeFieldStopsSizes[0];\n      }\n\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\n        }\n      }\n\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\n    }\n  #endif // VV_SIZE_FIELD_STOPS\n\n  #ifdef VV_SIZE_UNIT_VALUE\n    float getVVUnitValue(float sizeValue, float fallback) {\n      if (isNan(sizeValue)) { \n        return fallback;\n      }\n\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\n    }\n  #endif // VV_SIZE_UNIT_VALUE\n\n  #ifdef VV_OPACITY\n    const int VV_OPACITY_N \x3d 8;\n    float getVVOpacity(float opacityValue) {\n      if (isNan(opacityValue)) { \n        return 1.0;\n      }\n\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\n        return u_vvOpacities[0];\n      }\n\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\n        }\n      }\n\n      return u_vvOpacities[VV_OPACITY_N - 1];\n    }\n  #endif // VV_OPACITY\n\n  #ifdef VV_ROTATION\n    mat4 getVVRotation(float rotationValue) {\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\n      if (isNan(rotationValue)) { \n        return mat4(1, 0, 0, 0,\n                    0, 1, 0, 0,\n                    0, 0, 1, 0,\n                    0, 0, 0, 1);\n      }\n\n      float rotation \x3d rotationValue;\n      if (u_vvRotationType \x3d\x3d 1.0) {\n        rotation \x3d 90.0 - rotation;\n      }\n\n      float angle \x3d C_DEG_TO_RAD * rotation;\n\n      float sinA \x3d sin(angle);\n      float cosA \x3d cos(angle);\n\n      return mat4(cosA, sinA, 0, 0,\n                  -sinA,  cosA, 0, 0,\n                  0,     0, 1, 0,\n                  0,     0, 0, 1);\n    }\n  #endif // VV_ROTATION\n\n  #ifdef VV_COLOR\n    const int VV_COLOR_N \x3d 8;\n\n    vec4 getVVColor(float colorValue, vec4 fallback) {\n      if (isNan(colorValue)) { \n        return fallback;\n      }\n\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\n        return u_vvColors[0];\n      }\n\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\n        }\n      }\n\n      return u_vvColors[VV_COLOR_N - 1];\n    }\n  #endif // VV_COLOR\n    ]]\x3e\n  \x3c/snippet\x3e\n\n\n  \x3csnippet name\x3d"iconVS"\x3e\n  \x3c![CDATA[\n    precision mediump float;\n\n    //const float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\n    const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\n\n    // per-vertex attributes (4 bytes)\n    attribute vec4 a_vertexOffsetAndTex;\n\n    // per quad (instance) attributes (20 bytes \x3d\x3d\x3e equivalent of 5 bytes per vertex)\n    attribute vec2 a_pos;\n    attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\n    attribute vec4 a_color;\n    attribute vec4 a_outlineColor;\n    attribute vec4 a_sizeAndOutlineWidth;\n\n    // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\n    // relative to the tile\'s upper left corner\n    // the extrusion vector.\n    uniform highp mat4 u_transformMatrix;\n    // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\n    uniform highp mat4 u_extrudeMatrix;\n    // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\n    uniform highp vec2 u_normalized_origin;\n\n    // the size of the mosaic given in pixels\n    uniform vec2 u_mosaicSize;\n\n    // the opacity of the layer given by the painter\n    uniform mediump float u_opacity;\n\n    // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\n    varying mediump vec2 v_tex;\n    // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\n    // opacity of the layer given by the painter\n    varying lowp float v_transparency;\n    // the of the icon given in pixels\n    varying mediump vec2 v_size;\n\n    // icon color. If is a picture-marker it is used to tint the texture color\n    varying lowp vec4 v_color;\n\n #ifdef SDF\n    varying lowp vec4 v_outlineColor;\n    varying mediump float v_outlineWidth;\n #endif // SDF\n\n #ifdef ID\n    varying highp vec4 v_id;\n #endif // ID\n\n #ifdef HEATMAP\n    attribute float a_heatmapWeight;\n    varying mediump float v_heatmapWeight;\n #endif // HEATMAP\n\n    // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\n    $iconVVUniformsVS\n    $iconVVFunctions\n\n    void main()\n    {\n      vec2 a_offset \x3d a_vertexOffsetAndTex.xy;\n      vec2 a_tex \x3d a_vertexOffsetAndTex.zw;\n      vec2 a_size \x3d a_sizeAndOutlineWidth.xy;\n\n      // default values (we need them for the variations to come)\n      float a_angle \x3d 0.0;\n      float delta_z \x3d 0.0;\n      float depth \x3d 0.0;\n      v_transparency \x3d 1.0;\n\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\n\n  #ifdef VV_SIZE_MIN_MAX_VALUE\n      // vv size override the original symbol\'s size\n      float h \x3d getVVMinMaxSize(a_vv.x, a_size.y);\n  #endif // VV_SIZE_MIN_MAX_VALUE\n\n  #ifdef VV_SIZE_SCALE_STOPS\n      float h \x3d u_vvSizeScaleStopsValue;\n  #endif // VV_SIZE_SCALE_STOPS\n\n  #ifdef VV_SIZE_FIELD_STOPS\n      float h \x3d getVVStopsSize(a_vv.x, a_size.y);\n  #endif // VV_SIZE_FIELD_STOPS\n\n  #ifdef VV_SIZE_UNIT_VALUE\n      float h \x3d getVVUnitValue(a_vv.x, a_size.y);\n  #endif // VV_SIZE_UNIT_VALUE\n\n      // make sure to preserve the aspect ratio of the symbol\n      vec2 size \x3d vec2(h * a_size.x / a_size.y, h);\n      vec2 offset \x3d a_offset * size / a_size;\n      v_size \x3d size;\n  #else\n  #ifdef HEATMAP\n      // reconstruct the kernel size\n      a_size \x3d 9.0 * a_size + 1.0;\n  #endif // HEATMAP\n\n      vec2 offset \x3d a_offset;\n      v_size \x3d a_size;\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\n\n  #ifdef SDF\n    offset *\x3d 2.0;\n  #endif // SDF\n\n  #ifdef VV_ROTATION\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * getVVRotation(a_vv.w) * vec4(offset, delta_z, 0.0);\n  #else\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(offset, delta_z, 0.0);\n  #endif // VV_ROTATION\n\n  #ifdef VV_OPACITY\n      v_transparency \x3d getVVOpacity(a_vv.z);\n  #else\n      v_transparency \x3d u_opacity;\n  #endif // VV_OPACITY\n\n  #ifdef VV_COLOR\n      v_color \x3d getVVColor(a_vv.y, a_color);\n  #else\n      v_color \x3d a_color;\n  #endif // VV_COLOR\n\n      // output the texture coordinates and the transparency\n      v_tex \x3d a_tex / u_mosaicSize;\n\n #ifdef SDF\n      v_outlineColor \x3d a_outlineColor;\n      v_outlineWidth \x3d a_sizeAndOutlineWidth.z;\n #endif // SDF\n\n #ifdef ID\n      v_id \x3d a_id;\n #endif // ID\n\n #ifdef HEATMAP\n    v_heatmapWeight \x3d a_heatmapWeight;\n #endif // HEATMAP\n    }\n  ]]\x3e\n  \x3c/snippet\x3e\n\n  \x3csnippet name\x3d"iconFS"\x3e\n   \x3c![CDATA[\n    precision mediump float;\n\n    uniform lowp sampler2D u_texture;\n\n    varying lowp vec2 v_tex;\n    varying lowp float v_transparency;\n    varying mediump vec2 v_size;\n    varying lowp vec4 v_color;\n\n #ifdef SDF\n    varying lowp vec4 v_outlineColor;\n    varying mediump float v_outlineWidth;\n\n    // we need the conversion function from RGBA to float\n    $rgba2float\n #endif // SDF\n\n #ifdef ID\n    varying highp vec4 v_id;\n #endif // ID\n\n #ifdef HEATMAP\n    varying mediump float v_heatmapWeight;\n #endif // HEATMAP\n\n    const float softEdgeRatio \x3d 1.0; // use blur here if needed\n\n    void main()\n    {\n #ifdef SDF\n      lowp vec4 fillPixelColor \x3d v_color;\n\n      // calculate the distance from the edge [-0.5, 0.5]\n      float d \x3d 0.5 - rgba2float(texture2D(u_texture, v_tex));\n\n      // the soft edge ratio is about 1.5 pixels allocated for the soft edge.\n      float size \x3d max(v_size.x, v_size.y);\n      float dist \x3d d * size * softEdgeRatio;\n\n      // set the fragment\'s transparency according to the distance from the edge\n      fillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\n\n      // count for the outline\n      // therefore tint the entire icon area.\n      if (v_outlineWidth \x3e 0.25) {\n        lowp vec4 outlinePixelColor \x3d v_outlineColor;\n\n        // outlines can\'t be larger than the size of the symbol\n        float clampedOutlineSize \x3d min(v_outlineWidth, size);\n\n        outlinePixelColor *\x3d clamp(0.5 - abs(dist) + clampedOutlineSize * 0.5, 0.0, 1.0);\n\n        // finally combine the outline and the fill colors (outline draws on top of fill)\n        gl_FragColor \x3d v_transparency * ((1.0 - outlinePixelColor.a) * fillPixelColor + outlinePixelColor);\n      }\n      else {\n        gl_FragColor \x3d v_transparency * fillPixelColor;\n      }\n #else // not an SDF\n      lowp vec4 texColor \x3d texture2D(u_texture, v_tex);\n\n #ifdef HEATMAP\n      texColor.r *\x3d v_heatmapWeight;\n #endif // HEATMAP\n\n      gl_FragColor \x3d v_transparency * texColor;\n #endif // SDF\n\n #ifdef HIGHLIGHT\n      gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\n #endif // HIGHLIGHT\n\n #ifdef ID\n      if (gl_FragColor.a \x3c 1.0 / 255.0) {\n        discard;\n      }\n      gl_FragColor \x3d v_id;\n #endif // ID\n    }\n   ]]\x3e\n  \x3c/snippet\x3e\n\x3c/snippets\x3e\n\n',
"url:esri/views/2d/engine/webgl/shaders/lineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\n\x3c!--\n  // YF TODO: (doc)\n--\x3e\n\x3csnippets\x3e\n  \x3csnippet name\x3d"thinLineParams"\x3e\n     \x3c![CDATA[\n    float thinLineHalfWidth \x3d 1.0; // meaning that a 2 pixels line width is considered a thin line\n    float thinLineWidthFactor \x3d 1.1;\n     ]]\x3e\n  \x3c/snippet\x3e\n\n  \x3csnippet name\x3d"lineVVUniformsVS"\x3e\n    \x3c![CDATA[\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY)\n    attribute vec3 a_vv;\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY\n\n  #ifdef VV_COLOR\n    uniform float u_vvColorValues[8];\n    uniform vec4 u_vvColors[8];\n  #endif // VV_COLOR\n\n  #ifdef VV_SIZE_MIN_MAX_VALUE\n    uniform vec4 u_vvSizeMinMaxValue;\n  #endif // VV_SIZE_MIN_MAX_VALUE\n\n  #ifdef VV_SIZE_SCALE_STOPS\n    uniform float u_vvSizeScaleStopsValue;\n  #endif\n\n  #ifdef VV_SIZE_FIELD_STOPS\n    uniform float u_vvSizeFieldStopsValues[6];\n    uniform float u_vvSizeFieldStopsSizes[6];\n  #endif // VV_SIZE_FIELD_STOPS\n\n  #ifdef VV_SIZE_UNIT_VALUE\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\n  #endif // VV_SIZE_UNIT_VALUE\n\n  #ifdef VV_OPACITY\n    uniform float u_vvOpacityValues[8];\n    uniform float u_vvOpacities[8];\n  #endif // VV_OPACITY\n    ]]\x3e\n  \x3c/snippet\x3e\n\n  \x3csnippet name\x3d"lineVVFunctions"\x3e\n    \x3c![CDATA[\n    bool isNan(float val) {\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\n    }\n    \n  #ifdef VV_SIZE_MIN_MAX_VALUE\n    float getVVMinMaxSize(float sizeValue, float fallback) {\n      if (isNan(sizeValue)) { \n        return fallback;\n      }\n\n      float f \x3d (sizeValue - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\n      return clamp(mix(u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w, f), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\n    }\n  #endif // VV_SIZE_MIN_MAX_VALUE\n\n  #ifdef VV_SIZE_FIELD_STOPS\n    const int VV_SIZE_N \x3d 6;\n    float getVVStopsSize(float sizeValue, float fallback) {\n      if (isNan(sizeValue)) { \n        return fallback;\n      }\n\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\n        return u_vvSizeFieldStopsSizes[0];\n      }\n\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\n        }\n      }\n\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\n    }\n  #endif // VV_SIZE_FIELD_STOPS\n\n  #ifdef VV_SIZE_UNIT_VALUE\n    float getVVUnitValue(float sizeValue, float fallback) {\n      if (isNan(sizeValue)) { \n        return fallback;\n      }\n\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\n    }\n  #endif // VV_SIZE_UNIT_VALUE\n\n  #ifdef VV_OPACITY\n    const int VV_OPACITY_N \x3d 8;\n    float getVVOpacity(float opacityValue) {\n      if (isNan(opacityValue)) { \n        return 1.0;\n      }\n\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\n        return u_vvOpacities[0];\n      }\n\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\n        }\n      }\n\n      return u_vvOpacities[VV_OPACITY_N - 1];\n    }\n  #endif // VV_OPACITY\n\n  #ifdef VV_COLOR\n    const int VV_COLOR_N \x3d 8;\n\n    vec4 getVVColor(float colorValue, vec4 fallback) {\n      if (isNan(colorValue)) { \n        return fallback;\n      }\n\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\n        return u_vvColors[0];\n      }\n\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\n        }\n      }\n\n      return u_vvColors[VV_COLOR_N - 1];\n    }\n  #endif // VV_COLOR\n    ]]\x3e\n  \x3c/snippet\x3e\n\n  \x3csnippet name\x3d"lineVS"\x3e\n    \x3c![CDATA[\n     precision mediump float;\n\n     attribute vec2 a_pos;\n     attribute vec4 a_id;\n     attribute vec4 a_color;\n     attribute vec4 a_offsetAndNormal;\n     attribute vec2 a_accumulatedDistanceAndHalfWidth;\n     attribute vec4 a_tlbr;\n     attribute vec4 a_segmentDirection;\n\n     // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\n     // relative to the tile\'s upper left corner\n     // the extrusion vector.\n     uniform highp mat4 u_transformMatrix;\n     // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\n     uniform highp mat4 u_extrudeMatrix;\n     // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\n     uniform highp vec2 u_normalized_origin;\n     uniform lowp float u_opacity; // the layer\'s opacity\n     uniform mediump float u_zoomFactor;\n     uniform mediump float u_antialiasing;\n\n     // the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\n     varying mediump vec2 v_normal;\n     varying mediump float v_lineHalfWidth;\n     varying lowp vec4 v_color;\n     varying lowp float v_transparency;\n\n     const float scale \x3d 1.0 / 31.0;\n#ifdef SDF\n     const float widthFactor \x3d 2.0;\n#else\n     const float widthFactor \x3d 1.0;\n#endif\n\n\n#ifdef PATTERN\n     uniform mediump vec2 u_mosaicSize;\n\n     varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\n     varying mediump vec2 v_patternSize;\n#endif // PATTERN\n\n// we need to accumulated distance only if it is a pattern or an SDF line\n#if defined(PATTERN) || defined(SDF)\n     varying highp float v_accumulatedDistance;\n#endif // PATTERN SDF\n\n#ifdef ID\n     varying highp vec4 v_id;\n#endif // ID\n\n     // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\n     $lineVVUniformsVS\n     $lineVVFunctions\n\n     void main()\n     {\n     // size VV block\n#if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\n\n#ifdef VV_SIZE_MIN_MAX_VALUE\n       mediump float lineHalfWidth \x3d 0.5 * getVVMinMaxSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\n#endif // VV_SIZE_MIN_MAX_VALUE\n\n#ifdef VV_SIZE_SCALE_STOPS\n       mediump float lineHalfWidth \x3d 0.5 * u_vvSizeScaleStopsValue;\n#endif // VV_SIZE_SCALE_STOPS\n\n#ifdef VV_SIZE_FIELD_STOPS\n       mediump float lineHalfWidth \x3d 0.5 * getVVStopsSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\n#endif // VV_SIZE_FIELD_STOPS\n\n#ifdef VV_SIZE_UNIT_VALUE\n       mediump float lineHalfWidth \x3d 0.5 * getVVUnitValue(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\n#endif // VV_SIZE_UNIT_VALUE\n\n#else // no VV\n       mediump float lineHalfWidth \x3d a_accumulatedDistanceAndHalfWidth.y * scale;\n#endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\n\n#ifdef VV_OPACITY\n      v_transparency \x3d u_opacity * getVVOpacity(a_vv.z);\n#else\n      v_transparency \x3d u_opacity;\n#endif // VV_OPACITY\n\n#ifdef VV_COLOR\n      v_color \x3d getVVColor(a_vv.y, a_color);\n#else\n      v_color \x3d a_color;\n#endif // VV_COLOR\n\n       // make sure to clip the vertices in case that the width of the line is 0 (or negative)\n       float z \x3d 2.0 * step(lineHalfWidth, 0.0);\n\n       // add an antialiasing distance. We use 0.2 rather than 0.5 in order to match the SVG renderer\n       // also limit the total line width to 1.3 pixels. Below this value lines don\'t look good compared to the SVG renderer\n       lineHalfWidth \x3d max(lineHalfWidth, 0.45) + 0.2 * u_antialiasing;\n\n       // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\n       $thinLineParams\n       // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\n       // in practice, a thin line is a line who\'s half width vary from 0.45px to the value of thinLineHalfWidth, as the value\n       // is claped in line 221 above\n       mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(lineHalfWidth, thinLineHalfWidth), 1.0);\n\n       v_lineHalfWidth \x3d lineHalfWidth;\n\n       // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\n       // sake of using less attribute memory, we need to scale it back to the original range of ~ [0, 1])\n       // in a case of a thin line we move each vertex twice as far\n       mediump vec2 dist \x3d thinLineFactor * widthFactor * lineHalfWidth * a_offsetAndNormal.xy * scale;\n\n       // transform the vertex\n       gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, z, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\n       v_normal \x3d a_offsetAndNormal.zw * scale;\n\n#if defined(PATTERN) || defined(SDF)\n       v_accumulatedDistance \x3d a_accumulatedDistanceAndHalfWidth.x + dot(scale * a_segmentDirection.xy, dist / u_zoomFactor);\n#endif // PATTERN || SDF\n\n#ifdef PATTERN\n      v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\n      v_patternSize \x3d vec2(a_tlbr.z - a_tlbr.x, a_tlbr.w - a_tlbr.y);\n#endif // PATTERN\n\n#ifdef ID\n      v_id \x3d a_id;\n#endif // ID\n     }\n    ]]\x3e\n  \x3c/snippet\x3e\n\n  \x3csnippet name\x3d"lineFS"\x3e\n    \x3c![CDATA[\n       precision lowp float;\n\n       uniform lowp float u_blur;\n       uniform mediump float u_antialiasing;\n\n       varying mediump vec2 v_normal;\n       varying mediump float v_lineHalfWidth;\n       varying lowp vec4 v_color;\n       varying lowp float v_transparency;\n\n#if defined(PATTERN) || defined(SDF)\n      uniform sampler2D u_texture;\n      uniform mediump float u_zoomFactor;\n\n      varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\n      varying mediump vec2 v_patternSize;\n      varying highp float v_accumulatedDistance;\n#endif // PATTERN SDF\n\n#ifdef SDF\n      const float sdfPatternHalfWidth \x3d 15.5; // YF: assumed that the width will be set to 31\n     const float widthFactor \x3d 2.0;\n\n    // Factors to convert rgba back to float\n    const vec4 rgba2float_factors \x3d vec4(\n        255.0 / (256.0),\n        255.0 / (256.0 * 256.0),\n        255.0 / (256.0 * 256.0 * 256.0),\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n      );\n\n    float rgba2float(vec4 rgba) {\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\n      // add the components together with their corresponding\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\n      return dot(rgba, rgba2float_factors);\n    }\n#endif // SDF\n\n#ifdef ID\n     varying highp vec4 v_id;\n#endif // ID\n\n       void main()\n       {\n         // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\n         $thinLineParams\n\n         // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\n         mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(v_lineHalfWidth, thinLineHalfWidth), 1.0);\n\n         // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\n         // and any value in between will be inside the line (the sign represent the direction - right or left).\n         // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\n         mediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\n\n         // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\n         // when it is a thin line then use a slightly shallower slope in order to add more feathering\n         lowp float alpha \x3d clamp(thinLineFactor * (v_lineHalfWidth - fragDist) / (u_blur + thinLineFactor - 1.0), 0.0, 1.0);\n\n#if defined(SDF)\n         mediump float lineHalfWidth \x3d widthFactor * v_lineHalfWidth;\n         mediump float lineWidthRatio \x3d lineHalfWidth / sdfPatternHalfWidth;\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * lineHalfWidth) / (lineWidthRatio * v_patternSize.x), 1.0);\n         mediump float relativeTexY \x3d 0.5 + 0.5 * v_normal.y;\n\n          // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\n\n         // calculate the distance from the edge [-0.5, 0.5]\n         mediump float d \x3d rgba2float(texture2D(u_texture, texCoord)) - 0.5;\n\n         // the distance is a proportional to the line width\n         float dist \x3d d * lineHalfWidth;\n\n         lowp vec4 fillPixelColor \x3d v_transparency * alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\n        gl_FragColor \x3d fillPixelColor;\n#elif defined(PATTERN)\n         // we need to calculate the relative portion of the line texture along the line given the accumulated distance along the line\n         // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * v_lineHalfWidth) / v_patternSize.x, 1.0);\n\n         // in order to calculate the texture coordinates prependicular to the line (Y axis), we use the interpolated normal values\n         // which range from -1.0 to 1.0. On the line\'s centerline, the value of the interpolated normal is 0.0, however the relative\n         // texture value shpould be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\n         // (TL) ---------------------------      --\x3e left edge of line. Interpolatedf normal is 1.0\n         //              | -\x3e line-width / 2\n         //      - - - - - - - - - - - - - -\n         //              | -\x3e line-width / 2\n         //      ---------------------------- (BR)--\x3e right edge of line. Interpolatedf normal is -1.0\n\n         mediump float relativeTexY \x3d 0.5 + (v_normal.y * v_lineHalfWidth / v_patternSize.y);\n\n         // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\n\n         // get the color from the texture\n         lowp vec4 color \x3d texture2D(u_texture, texCoord);\n\n         gl_FragColor \x3d v_transparency * alpha * v_color * color;\n#else // solid line (no texture, no pattern)\n         // output the fragment color\n         gl_FragColor \x3d v_transparency * alpha * v_color;\n#endif // SDF\n\n#ifdef HIGHLIGHT\n         gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\n#endif // HIGHLIGHT\n\n #ifdef ID\n         if (gl_FragColor.a \x3c 1.0 / 255.0) {\n           discard;\n         }\n         gl_FragColor \x3d v_id;\n #endif // ID\n       }\n    ]]\x3e\n  \x3c/snippet\x3e\n\n\x3c/snippets\x3e\n',
"url:esri/views/2d/engine/webgl/shaders/textShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\n\x3c!--\n  Add your GLSL snippets to this file. You should start from\n  importing your old GLSL files. For instance, if you have a\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\n  and then copy and paste the GLSL source as the content. You will then convert your\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\n--\x3e\n\x3csnippets\x3e\n\n\x3csnippet name\x3d"textVVUniformsVS"\x3e\n    \x3c![CDATA[\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\n    attribute vec4 a_vv;\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\n\n  #ifdef VV_COLOR\n    uniform float u_vvColorValues[8];\n    uniform vec4 u_vvColors[8];\n  #endif // VV_COLOR\n\n  #ifdef VV_SIZE_MIN_MAX_VALUE\n    uniform vec4 u_vvSizeMinMaxValue;\n  #endif // VV_SIZE_MIN_MAX_VALUE\n\n  #ifdef VV_SIZE_SCALE_STOPS\n    uniform float u_vvSizeScaleStopsValue;\n  #endif // VV_SIZE_SCALE_STOPS\n\n  #ifdef VV_SIZE_FIELD_STOPS\n    uniform float u_vvSizeFieldStopsValues[6];\n    uniform float u_vvSizeFieldStopsSizes[6];\n  #endif // VV_SIZE_FIELD_STOPS\n\n  #ifdef VV_SIZE_UNIT_VALUE\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\n  #endif // VV_SIZE_UNIT_VALUE\n\n  #ifdef VV_OPACITY\n    uniform float u_vvOpacityValues[8];\n    uniform float u_vvOpacities[8];\n  #endif // VV_OPACITY\n\n  #ifdef VV_ROTATION\n    uniform lowp float u_vvRotationType;\n  #endif // VV_ROTATION\n    ]]\x3e\n  \x3c/snippet\x3e\n\n  \x3csnippet name\x3d"textVVFunctions"\x3e\n    \x3c![CDATA[\n    bool isNan(float val) {\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\n    }\n\n  #ifdef VV_SIZE_MIN_MAX_VALUE\n    float getVVMinMaxSize(float sizeValue, float fallback) {\n      if (isNan(sizeValue)) { \n        return fallback;\n      }\n\n      // we need to multiply by 8 in order to translate to tile coordinates\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\n      return clamp(u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\n    }\n  #endif // VV_SIZE_MIN_MAX_VALUE\n\n  #ifdef VV_SIZE_FIELD_STOPS\n    const int VV_SIZE_N \x3d 6;\n    float getVVStopsSize(float sizeValue, float fallback) {\n      if (isNan(sizeValue)) { \n        return fallback;\n      }\n\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\n        return u_vvSizeFieldStopsSizes[0];\n      }\n\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\n        }\n      }\n\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\n    }\n  #endif // VV_SIZE_FIELD_STOPS\n\n  #ifdef VV_SIZE_UNIT_VALUE\n    float getVVUnitValue(float sizeValue, float fallback) {\n      if (isNan(sizeValue)) { \n        return fallback;\n      }\n\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\n    }\n  #endif // VV_SIZE_UNIT_VALUE\n\n  #ifdef VV_OPACITY\n    const int VV_OPACITY_N \x3d 8;\n    float getVVOpacity(float opacityValue) {\n      if (isNan(opacityValue)) { \n        return 1.0;\n      }\n\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\n        return u_vvOpacities[0];\n      }\n\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\n        }\n      }\n\n      return u_vvOpacities[VV_OPACITY_N - 1];\n    }\n  #endif // VV_OPACITY\n\n  #ifdef VV_ROTATION\n    mat4 getVVRotation(float rotationValue) {\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\n      if (isNan(rotationValue)) { \n        return mat4(1, 0, 0, 0,\n                    0, 1, 0, 0,\n                    0, 0, 1, 0,\n                    0, 0, 0, 1);\n      }\n      \n      float rotation \x3d rotationValue;\n      if (u_vvRotationType \x3d\x3d 1.0) {\n        rotation \x3d 90.0 - rotation;\n      }\n\n      float angle \x3d C_DEG_TO_RAD * rotation;\n\n      float sinA \x3d sin(angle);\n      float cosA \x3d cos(angle);\n\n      return mat4(cosA, sinA, 0, 0,\n                  -sinA,  cosA, 0, 0,\n                  0,     0, 1, 0,\n                  0,     0, 0, 1);\n    }\n  #endif // VV_ROTATION\n\n  #ifdef VV_COLOR\n    const int VV_COLOR_N \x3d 8;\n\n    vec4 getVVColor(float colorValue, vec4 fallback) {\n      if (isNan(colorValue)) { \n        return fallback;\n      }\n      \n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\n        return u_vvColors[0];\n      }\n\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\n        }\n      }\n\n      return u_vvColors[VV_COLOR_N - 1];\n    }\n  #endif // VV_COLOR\n    ]]\x3e\n  \x3c/snippet\x3e\n\n  \x3csnippet name\x3d"textVS"\x3e\n    \x3c![CDATA[\n      precision mediump float;\n\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\n\n      attribute vec2 a_pos;           // 2 * 2 (2 x signed 16)\n      attribute vec4 a_id;            // 4 (4 x unsigned byte)\n      attribute vec4 a_color;         // 4 (4 x unsigned byte)\n      attribute vec2 a_vertexOffset; // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\n      attribute vec4 a_texFontSize; // 4 (4 x unsigned byte) texture coordinatesm and font size\n\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\n\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\n      // relative to the tile\'s upper left corner\n      // the extrusion vector.\n      uniform highp mat4 u_transformMatrix;\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\n      uniform highp mat4 u_extrudeMatrix;\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\n      uniform highp vec2 u_normalized_origin;\n      // the size of the mosaic given in pixels\n      uniform vec2 u_mosaicSize;\n      uniform float u_pixelRatio;\n\n      // the opacity of the layer\n      uniform mediump float u_opacity;\n\n      varying mediump vec4 v_color;\n      varying mediump float v_antialiasingWidth;\n      varying mediump float v_edgeDistanceOffset;\n\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\n      varying mediump vec2 v_tex;\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\n      // opacity of the layer given by the painter\n      varying lowp float v_transparency;\n\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\n      // by 16 and then at the shader devide by the same number\n      const float offsetPrecision \x3d 1.0 / 32.0;\n      const float outlineScale \x3d 1.0 / 10.0;\n      const float sdfFontSize \x3d 24.0;\n\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\n      const float maxSdfDistance \x3d 8.0;\n\n  #ifdef ID\n    varying highp vec4 v_id;\n  #endif // ID\n\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\n      $textVVUniformsVS\n      $textVVFunctions\n\n      void main()\n      {\n        // make sure to clip the vertices in case that given record is marked as invisible\n        float z \x3d 2.0 * (1.0 - a_visible);\n\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\n        mediump float halo \x3d mod(a_pos, 2.0).x;\n\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\n\n  #ifdef VV_SIZE_MIN_MAX_VALUE\n        // vv size override the original symbol\'s size\n        vec2 size \x3d vec2(getVVMinMaxSize(a_vv.x, a_texFontSize.z));\n  #endif // VV_SIZE_MIN_MAX_VALUE\n\n  #ifdef VV_SIZE_SCALE_STOPS\n        vec2 size \x3d vec2(u_vvSizeScaleStopsValue);\n  #endif // VV_SIZE_SCALE_STOPS\n\n  #ifdef VV_SIZE_FIELD_STOPS\n        vec2 size \x3d vec2(getVVStopsSize(a_vv.x, a_texFontSize.z));\n  #endif // VV_SIZE_FIELD_STOPS\n\n  #ifdef VV_SIZE_UNIT_VALUE\n        vec2 size \x3d vec2(getVVUnitValue(a_vv.x, a_texFontSize.z));\n  #endif // VV_SIZE_UNIT_VALUE\n\n        float fontSize \x3d size.x;\n  #else // this generic case, no VV\n        float fontSize \x3d a_texFontSize.z;\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\n\n        float fontScale \x3d fontSize / sdfFontSize;\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\n\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\n        //gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\n\n    #ifdef VV_ROTATION\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * getVVRotation(a_vv.w) * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\n    #else\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\n    #endif // VV_ROTATION\n\n        v_tex \x3d a_texFontSize.xy / u_mosaicSize;\n        v_antialiasingWidth \x3d 0.105 * sdfFontSize / fontSize / u_pixelRatio;\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texFontSize.w / fontScale / maxSdfDistance;\n\n    #ifdef VV_OPACITY\n        v_transparency \x3d getVVOpacity(a_vv.z);\n    #else\n        v_transparency \x3d u_opacity;\n    #endif // VV_OPACITY\n\n    #ifdef VV_COLOR\n       // we don\'t want to override the halo color\n       v_color \x3d halo * a_color + (1.0 - halo) * getVVColor(a_vv.y, a_color);\n    #else\n        v_color \x3d a_color;\n    #endif // VV_COLOR\n\n  #ifdef ID\n        v_id \x3d a_id;\n  #endif // ID\n      }\n    ]]\x3e\n  \x3c/snippet\x3e\n\n  \x3csnippet name\x3d"textFS"\x3e\n    \x3c![CDATA[\n      precision lowp float;\n\n      uniform lowp sampler2D u_texture;\n\n      varying mediump vec4 v_color;\n      varying mediump float v_antialiasingWidth;\n      varying mediump float v_edgeDistanceOffset;\n      varying mediump vec2 v_tex;\n      varying lowp float v_transparency;\n\n  #ifdef ID\n      varying highp vec4 v_id;\n  #endif // ID\n\n      void main()\n      {\n        // read the distance from the SDF texture\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\n\n        // the edge distance if a factor of the outline width\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\n\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\n        lowp float alpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\n\n        gl_FragColor \x3d alpha * v_color;\n\n  #ifdef ID\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\n          discard;\n        }\n        gl_FragColor \x3d v_id;\n  #endif // ID\n      }\n    ]]\x3e\n  \x3c/snippet\x3e\n\x3c/snippets\x3e\n',
"url:esri/views/2d/engine/webgl/shaders/hlShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\n\x3c!--\n  Highlight generation and rendering shaders.\n\n  These shader sources are loaded by hlShaderSnippets.ts which in turn\n  is used by HighlightRenderer to instantiate the programs needed for\n  generating and rendering the highlights.\n\n  These shaders are intended to be used with full screen quads.\n--\x3e\n\x3csnippets\x3e\n  \x3c!--\n    Vertex shader: texturedVS\n\n    Identity vertex shader that outputs an untransformed 2-D vertex\n    and passes its texture coordinates unchanged to the interpolator.\n  --\x3e\n  \x3csnippet name\x3d"texturedVS"\x3e\n    \x3c![CDATA[\n    // Vertex position.\n    attribute mediump vec2 a_position;\n\n    // Texture coordinates.\n    attribute mediump vec2 a_texcoord;\n\n    // Texture coordinates to be interpolated.\n    varying mediump vec2 v_texcoord;\n\n    void main(void) {\n      // Pass the position unchanged.\n      gl_Position \x3d vec4(a_position, 0.0, 1.0);\n\n      // Pass the texture coordinates unchanged.\n      v_texcoord \x3d a_texcoord;\n    }\n    ]]\x3e\n  \x3c/snippet\x3e\n\n  \x3c!--\n    Fragment shader: blurFS\n\n    A gaussian blur shader. It blurs the alpha channel of its input\n    according to 4 different sigma and stores the results into the\n    four channel of the target framebuffer.\n\n    It is intended to be called twice; the first time to perform an\n    horizontal blur, and a second time to perform a vertical blur.\n\n    This shader is used to turn the highlight mask into a highlight\n    map. The highlight map is an approximation of the signed distance\n    field of the mask.\n  --\x3e\n  \x3csnippet name\x3d"blurFS"\x3e\n    \x3c![CDATA[\n    // Interpolated texture coordinates.\n    varying mediump vec2 v_texcoord;\n\n    // Blur direction information. There are two possible\n    // configurations that the host code can use.\n    //  - [1, 0, 1/WIDTH, 0] Used when blurring horizontally. In this\n    //    case u_direction[0] \x3d 1 is expressed in pixel and is fed to\n    //    the gauss function to produce the value of the gaussian weight\n    //    for that pixel, while u_direction[2] \x3d 1/WIDTH is in texel units\n    //    and is used to sample the right texel from the texture map.\n    //  - [0, 1, 0, 1/HEIGHT] Used when blurring vertically. In this\n    //    case u_direction[1] \x3d 1 is expressed in pixel and is fed to\n    //    the gauss function to produce the value of the gaussian weight\n    //    for that pixel, while u_direction[3] \x3d 1/HEIGHT is in texel units\n    //    and is used to sample the right texel from the texture map.\n    uniform mediump vec4 u_direction;\n\n    // Source to destination channel selection matrix.\n    uniform mediump mat4 u_channelSelector;\n\n    // The highlight map is obtained by blurring the alpha channel of the highlight\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\n    uniform mediump vec4 u_sigmas;\n\n    // This is the highlight mask if we have not blurred horizontally yet, otherwise\n    // it is the horizontally blurred highlight map and blurring it one more time\n    // vertically will complete the process.\n    uniform sampler2D u_texture;\n\n    // The gaussian kernel. Note that it lacks the normalization constant, because\n    // we want to store it unnormalized in the highlight map (i.e. having a peak\n    // value of 1). Note also that we are using the SIMD (single instruction, multiple\n    // data) capabilities of the GPU to compute four different gaussian kernels, one\n    // for each sigma.\n    mediump vec4 gauss(mediump vec2 dir) {\n      return exp(-dot(dir, dir) / (2.0 * u_sigmas * u_sigmas));\n    }\n\n    mediump vec4 selectChannel(mediump vec4 sample) {\n      return u_channelSelector * sample;\n    }\n\n    // Sample the input texture and accumulated its gaussian weighted value and the\n    // total weight.\n    void accumGauss(mediump float i, inout mediump vec4 tot, inout mediump vec4 weight) {\n      // Computes the gaussian weights, one for each sigma.\n      // Note that u_direction.xy is [1, 0] when blurring horizontally and [0, 1] when blurring vertically.\n      mediump vec4 w \x3d gauss(i * u_direction.xy);\n\n      // Accumumates the values.\n      // Note that u_direction.xy is [1/WIDTH, 0] when blurring horizontally and [0, 1/HEIGHT] when blurring vertically.\n      tot +\x3d selectChannel(texture2D(u_texture, v_texcoord + i * u_direction.zw)) * w;\n\n      // Accumulates the weights.\n      weight +\x3d w;\n    }\n\n    void main(void) {\n      // Initialize accumulated values and weights to zero.\n      mediump vec4 tot \x3d vec4(0.0, 0.0, 0.0, 0.0);\n      mediump vec4 weight \x3d vec4(0.0, 0.0, 0.0, 0.0);\n\n      // Accumulates enough samples. These will be taken\n      // horizontally or vertically depending on the value\n      // of u_direction.\n      accumGauss(-5.0, tot, weight);\n      accumGauss(-4.0, tot, weight);\n      accumGauss(-3.0, tot, weight);\n      accumGauss(-2.0, tot, weight);\n      accumGauss(-1.0, tot, weight);\n      accumGauss(0.0, tot, weight);\n      accumGauss(1.0, tot, weight);\n      accumGauss(2.0, tot, weight);\n      accumGauss(3.0, tot, weight);\n      accumGauss(4.0, tot, weight);\n      accumGauss(5.0, tot, weight);\n\n      // Compute blurred values.\n      mediump vec4 rgba \x3d tot / weight;\n\n      // Return the values. Note that each channel will contain\n      // the result of a different blur operation, one for each\n      // of the four chosen sigma.\n      gl_FragColor \x3d vec4(rgba);\n    }\n    ]]\x3e\n  \x3c/snippet\x3e\n\n  \x3c!--\n    Fragment shader: highlightFS\n\n    Takes as input the highlight map, estimated the signed distance field,\n    and shades the fragments according to their estimated distance from the\n    edge of the highlighted feature.\n\n    A shade texture is used to turn distance values into colors; the shade\n    texture is basically a color gradient and is recomputed on the host\n    every time that the user alters the highlight options.\n  --\x3e\n  \x3csnippet name\x3d"highlightFS"\x3e\n    \x3c![CDATA[\n    // Interpolated texture coordinates.\n    varying mediump vec2 v_texcoord;\n\n    // The highlight map. Each channel is a blurred\n    // version of the alpha channel of the highlight mask.\n    //  - Channel 0 (red) corresponds to a gaussian blur with sigma \x3d u_sigmas[0];\n    //  - Channel 1 (green) corresponds to a gaussian blur with sigma \x3d u_sigmas[1];\n    //  - Channel 2 (blue) corresponds to a gaussian blur with sigma \x3d u_sigmas[2];\n    //  - Channel 3 (alpha) corresponds to a gaussian blur with sigma \x3d u_sigmas[3];\n    // As of today, only channel 3 is used for distance estimation.\n    // But the availability of different amounts of blur leaves the\n    // door open to multi-scale approaches.\n    uniform sampler2D u_texture;\n\n    // The highlight map was obtained by blurring the alpha channel of the highlight\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\n    uniform mediump vec4 u_sigmas;\n\n    // A 1-D texture used to shade the highlight.\n    uniform sampler2D u_shade;\n\n    // The 1-D shade texture is spreaded between u_minMaxDistance[0] and u_minMaxDistance[1].\n    uniform mediump vec2 u_minMaxDistance;\n\n    // Signed distance estimation.\n    mediump float estimateDistance() {\n      // Use the largest sigma and the corresponding distance value stored in the\n      // last channel of the highlight map.\n      mediump float sigma \x3d u_sigmas[3];\n      mediump float y \x3d texture2D(u_texture, v_texcoord)[3];\n\n      // Estimates the distance by linearization and local inversion around\n      // the inflection point. The inflection point is in x \x3d 0.\n      const mediump float y0 \x3d 0.5;                           // Value of the convolution at the inflection point.\n      mediump float m0 \x3d 1.0 / (sqrt(2.0 * 3.1415) * sigma);  // Slope of the convolution at the inflection point.\n      mediump float d \x3d (y - y0) / m0;                        // Inversion of a local linearization.\n\n      // Return the estimated distance.\n      return d;\n    }\n\n    // Shading based on estimated distance.\n    mediump vec4 shade(mediump float d) {\n      // Maps the sampled distance from the [A, D] range (see HighlightRenderer::setHighlightOptions) to [0, 1].\n      mediump float mappedDistance \x3d (d - u_minMaxDistance.x) / (u_minMaxDistance.y - u_minMaxDistance.x);\n\n      // Force to [0, 1]; it should not be necessary because the shade texture uses the CLAMP address mode, so\n      // this should happen anyway internally to the sampler, but in practice it is needed to avoid weird\n      // banding artifacts.\n      // We don\'t really know if we need this or not.\n      mappedDistance \x3d clamp(mappedDistance, 0.0, 1.0);\n\n      // Sample the 1-D shade texture on its center line (i.e. on t\x3d0.5).\n      return texture2D(u_shade, vec2(mappedDistance, 0.5));\n    }\n\n    void main(void) {\n      // Estimate the distance.\n      mediump float d \x3d estimateDistance();\n\n      // Shade the distance.\n      gl_FragColor \x3d shade(d);\n    }\n    ]]\x3e\n  \x3c/snippet\x3e\n\x3c/snippets\x3e\n',
"*now":function(n){n(['dojo/i18n!*preload*esri/views/nls/MapView*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/promise/all ../core/Handles ../core/promiseUtils ../core/workers ../core/accessorSupport/decorators ../geometry/ScreenPoint ./BreakpointsOwner ./MapViewBase ./2d/engine/Stage ./2d/input/MapViewInputManager ./2d/layers/support/GraphicsView2D ./2d/navigation/MapViewNavigation ./2d/support/HighlightOptions ./support/screenshotUtils ./ui/2d/DefaultUI2D".split(" "),function(n,g,b,a,f,d,k,e,c,l,h,m,p,r,
t,q,u,x,v){return function(g){function h(a){a=g.call(this,a)||this;a._graphicsView=null;a._mapViewHandles=new d;a._stage=null;a.highlightOptions=new u;a.inputManager=new r({view:a});a.navigation=null;a.ui=new v;a.rendering=!1;e.initialize();return a}b(h,g);Object.defineProperty(h.prototype,"interacting",{get:function(){return this.navigation&&this.navigation.interacting||!1},enumerable:!0,configurable:!0});h.prototype.hitTest=function(a,b){var c;c=null!=a&&a.x?a:new l({x:a,y:b});if(!this._setup||
isNaN(c.x)||isNaN(c.y))return k.resolve({screenPoint:c,results:[]});var d=this.toMap(c);a=[this._graphicsView];a.push.apply(a,this.allLayerViews.toArray().reverse());return f(a.map(function(a){return a&&a.hitTest?a.hitTest(c.x,c.y):null})).then(function(a){return{screenPoint:c,results:a.filter(function(a){return null!=a}).map(function(a){return{mapPoint:d,graphic:a}})}})};h.prototype.takeScreenshot=function(a){if(!this._setup)return k.reject("Map view cannot be used before it is ready");a=x.adjustScreenshotSettings(a,
this);return this._stage.takeScreenshot(a)};h.prototype.on=function(a,b,c){var d=this.inputManager&&this.inputManager.viewEvents.register(a,b,c);return d?d:this.inherited(arguments)};h.prototype.hasEventListener=function(a){return this.inherited(arguments)||this.inputManager&&this.inputManager.viewEvents.hasHandler(a)};h.prototype.destroyLayerViews=function(){this.inherited(arguments);this._stage&&(this._stage.destroy(),this._stage=null)};h.prototype._startup=function(){var a=this;this.inherited(arguments);
var b=new p(this.surface),c=new t({view:this,graphics:this.graphics}),d=new q({view:this,animationManager:this.animationManager});this._stage=b;this._graphicsView=c;this._set("navigation",d);this._mapViewHandles.add([this.allLayerViews.on("change",function(){return a._updateStageChildren()}),b.on("post-render",function(){return a._set("rendering",a.allLayerViews.some(function(a){return!0===a.rendering}))}),this.watch("stationary",function(a){return b.stationary=a},!0),this.watch("state.viewpoint",
function(c){return b.state=a.state},!0)]);b.state=this.state;this._updateStageChildren()};h.prototype._tearDown=function(){this._setup&&(this._graphicsView.destroy(),this._mapViewHandles.removeAll(),this._stage.destroy(),this.navigation.destroy(),this._graphicsView=this._stage=null,this._set("navigation",null),this.inherited(arguments))};h.prototype._updateStageChildren=function(){var a=this;this._stage.removeAllChildren();this.allLayerViews.filter(function(a){return null!=a.container}).forEach(function(b,
c){a._stage.addChildAt(b.container,c)});this._stage.addChild(this._graphicsView.container)};a([c.property({type:u})],h.prototype,"highlightOptions",void 0);a([c.property({readOnly:!0})],h.prototype,"inputManager",void 0);a([c.property({readOnly:!0})],h.prototype,"navigation",void 0);a([c.property({dependsOn:["navigation.interacting"],type:Boolean})],h.prototype,"interacting",null);a([c.property({type:v})],h.prototype,"ui",void 0);a([c.property({readOnly:!0})],h.prototype,"rendering",void 0);return h=
a([c.subclass("esri.views.MapView")],h)}(c.declared(m,h))});