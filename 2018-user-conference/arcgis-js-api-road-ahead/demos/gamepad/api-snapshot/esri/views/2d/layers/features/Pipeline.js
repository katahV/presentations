// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
/*

 Copyright 2000, Silicon Graphics, Inc. All Rights Reserved.
 Copyright 2015, Google Inc. All Rights Reserved.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to
 deal in the Software without restriction, including without limitation the
 rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 sell copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice including the dates of first publication and
 either this permission notice or a reference to http://oss.sgi.com/projects/FreeB/
 shall be included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 SILICON GRAPHICS, INC. BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR
 IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

 Original Code. The Original Code is: OpenGL Sample Implementation,
 Version 1.2.1, released January 26, 2000, developed by Silicon Graphics,
 Inc. The Original Code is Copyright (c) 1991-2000 Silicon Graphics, Inc.
 Copyright in any portions created by third parties is as indicated
 elsewhere herein. All Rights Reserved.
*/
require({cache:{"esri/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(b,a){return function(a,c){a.__bases__=c.__bases__}})},"esri/core/tsSupport/decorateHelper":function(){define([],function(){return function(b,a,f,c){var e=arguments.length,l=3>e?a:null===c?c=Object.getOwnPropertyDescriptor(a,f):c,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(b,a,f,c);else for(var d=b.length-1;0<=d;d--)if(h=b[d])l=(3>e?h(l):3<e?h(a,f,
l):h(a,f))||l;return 3<e&&l&&Object.defineProperty(a,f,l),l}})},"esri/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),function(b,a,f,c,e,l){a=a.default;b.before(function(a,e){b.hasMixin(a,h)&&c.processPrototype(e)});b.after(function(a){b.hasMixin(a,h)&&(c.processClass(a),Object.defineProperties(a.prototype,{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||
!1}},constructed:{get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var h=b(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===h)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{value:new a(this)});
if(0<arguments.length&&this.normalizeCtorArgs){for(var d=[],c=0;c<arguments.length;c++)d.push(arguments[c]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,d)}},__accessor__:null,postscript:function(a){var d=this.__accessor__;a=d.ctorArgs||a;var c;null!=this.getDefaults&&(c=this.getDefaults(a||{}),this.set(c));d.initialize();a&&(this.set(a),d.ctorArgs=null);d.constructed();this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");
}catch(d){console.warn(d.stack)}else l.removeTarget(this),this.__accessor__.destroy()},get:function(a){return f.get(this,a)},hasOwnProperty:function(a){return this.__accessor__?this.__accessor__.has(a):Object.prototype.hasOwnProperty.call(this,a)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(a,c){e.set(this,a,c);return this},watch:function(a,c,b){return l.watch(this,a,c,b)},_clearOverride:function(a){return this.__accessor__.clearOverride(a)},_override:function(a,
c){return this.__accessor__.override(a,c)},_isOverridden:function(a){return this.__accessor__.isOverridden(a)},notifyChange:function(a){this.__accessor__.propertyInvalidated(a)},_get:function(a){return this.__accessor__.internalGet(a)},_set:function(a,c){return this.__accessor__.internalSet(a,c)}});return h})},"esri/core/declare":function(){define(["require","exports","dojo/_base/declare"],function(b,a,f){function c(a,c){a&&!Array.isArray(a)&&"function"!==typeof a&&(c=a,a=null);a=a||[];c=c||{};return e([this].concat(a),
c)}function e(a,b){a&&!Array.isArray(a)&&"function"!==typeof a&&(b=a,a=null);"function"===typeof a?a=[a]:a||(a=[]);b=b||{};var d,g;d=0;for(g=l.length;d<g;d++)l[d](a,b);a=f(a,b);a.createSubclass=c;d=0;for(g=h.length;d<g;d++)h[d](a);return a}var l=[],h=[];(function(a){a.hasMixin=function(a,d){a=Array.isArray(a)?a.reduce(function(a,d){return d._meta?a.concat(d._meta.bases):a},[]):a._meta?a._meta.bases:a;if(!a)return!1;if("string"===typeof d)for(var c=a.length-1;0<=c;c--)if(a[c].prototype.declaredClass===
d)return!0;return-1!==a.indexOf(d)};a.safeMixin=function(a,d){return f.safeMixin(a,d)};a.before=function(a){l.push(a)};a.after=function(a){h.push(a)}})(e||(e={}));return e})},"esri/core/accessorSupport/Properties":function(){define("require exports dojo/has ../Logger ./extensions ./PropertyOrigin ./Store".split(" "),function(b,a,f,c,e,l,h){Object.defineProperty(a,"__esModule",{value:!0});c.getLogger("esri.core.accessorSupport.Properties");b=function(){function a(a){this.host=a;this._origin=l.OriginId.USER;
this.ctorArgs=this.cursors=null;this.destroyed=!1;this.dirties={};this.lifecycle=0;this.overridden=null;this.store=new h.default;a=this.host.constructor.__accessorMetadata__;this.metadatas=a.properties;this.autoDestroy=a.autoDestroy}a.prototype.initialize=function(){this.lifecycle=1;e.instanceCreated(this.host,this.metadatas)};a.prototype.constructed=function(){this.lifecycle=2};a.prototype.destroy=function(){this.destroyed=!0;var a=this.cursors;if(this.cursors)for(var c=0,d=Object.getOwnPropertyNames(a);c<
d.length;c++){var b=d[c],e=a[b];if(e){for(;0<e.length;)e.pop().propertyDestroyed(this,b);a[b]=null}}if(this.autoDestroy)for(b in this.metadatas)(a=this.internalGet(b))&&a&&"function"===typeof a.destroy&&(a.destroy(),this.metadatas[b].nonNullable||this.internalSet(b,null))};Object.defineProperty(a.prototype,"initialized",{get:function(){return 0!==this.lifecycle},enumerable:!0,configurable:!0});a.prototype.clearOverride=function(a){this.isOverridden(a)&&(this.overridden[a]=!1,this.propertyInvalidated(a))};
a.prototype.get=function(a){var c=this.metadatas[a];if(this.store.has(a)&&!this.dirties[a])return this.store.get(a);var d=c.get;return d?(c=d.call(this.host),this.store.set(a,c,l.OriginId.COMPUTED),this.propertyCommitted(a),c):c.value};a.prototype.originOf=function(a){var c=this.store.originOf(a);return void 0===c&&(a=this.metadatas[a])&&a.hasOwnProperty("value")?"defaults":l.idToName(c)};a.prototype.has=function(a){return this.metadatas[a]?this.store.has(a):!1};a.prototype.internalGet=function(a){if(this.metadatas[a]){var c=
this.store;return c.has(a)?c.get(a):this.metadatas[a].value}};a.prototype.internalSet=function(a,c){this.metadatas[a]&&(this.propertyInvalidated(a),this.initialized?this.store.set(a,c,this._origin):this.store.set(a,c,l.OriginId.DEFAULTS),this.propertyCommitted(a))};a.prototype.isOverridden=function(a){return null!=this.overridden&&!0===this.overridden[a]};a.prototype.keys=function(){return this.store.keys()};a.prototype.override=function(a,c){if(this.metadatas[a]){this.overridden||(this.overridden=
{});var d=this.metadatas[a];d.nonNullable&&null==c||((d=d.cast)&&(c=d.call(this.host,c)),this.overridden[a]=!0,this.internalSet(a,c))}};a.prototype.set=function(a,c){if(this.metadatas[a]){var d=this.metadatas[a];if(!d.nonNullable||null!=c){var b=d.set;(d=d.cast)&&(c=d.call(this.host,c));b?b.call(this.host,c):this.internalSet(a,c)}}};a.prototype.setDefaultOrigin=function(a){this._origin=l.nameToId(a)};a.prototype.propertyInvalidated=function(a){var c=this.dirties,d=this.isOverridden(a),b=this.cursors&&
this.cursors[a],e=this.metadatas[a].computes;if(b)for(var k=0;k<b.length;k++)b[k].propertyInvalidated(this,a);d||(c[a]=!0);if(e)for(a=0;a<e.length;a++)this.propertyInvalidated(e[a])};a.prototype.propertyCommitted=function(a){var c=this.cursors&&this.cursors[a];this.dirties[a]=!1;if(c)for(var d=0;d<c.length;d++)c[d].propertyCommitted(this,a)};a.prototype.addCursor=function(a,c){this.cursors||(this.cursors={});var d=this.cursors[a];d||(this.cursors[a]=d=[]);d.push(c)};a.prototype.removeCursor=function(a,
c){var d=this.cursors[a];this.cursors[a]&&(d.splice(d.indexOf(c),1),0===d.length&&(this.cursors[a]=null))};return a}();a.default=b})},"esri/core/Logger":function(){define(["require","exports","dojo/has"],function(b,a,f){var c={info:0,warn:1,error:2};b=function(){function a(c){void 0===c&&(c={});this.module=c.module||"";this.writer=c.writer||null;this.level=c.level||null;null!=c.enabled&&(this.enabled=!!c.enabled);a._loggers[this.module]=this;c=this.module.lastIndexOf(".");-1!==c&&(this.parent=a.getLogger(this.module.slice(0,
c)))}a.prototype.log=function(a){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];this._isEnabled()&&this._matchLevel(a)&&(d=this._inheritedWriter())&&d.apply(void 0,[a,this.module].concat(c))};a.prototype.error=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];this.log.apply(this,["error"].concat(a))};a.prototype.warn=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];this.log.apply(this,["warn"].concat(a))};a.prototype.info=function(){for(var a=[],
c=0;c<arguments.length;c++)a[c]=arguments[c];this.log.apply(this,["info"].concat(a))};a.prototype.getLogger=function(c){return a.getLogger(this.module+"."+c)};a.getLogger=function(c){var b=a._loggers[c];b||(b=new a({module:c}));return b};a.prototype._parentWithMember=function(a,c){for(var d=this;d&&null==d[a];)d=d.parent;return d?d[a]:c};a.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};a.prototype._consoleWriter=function(a,c){for(var d=[],b=2;b<
arguments.length;b++)d[b-2]=arguments[b];console[a].apply(console,["["+c+"]"].concat(d))};a.prototype._matchLevel=function(a){return c[this._parentWithMember("level","error")]<=c[a]};a.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)};a._loggers={};return a}();b.getLogger("esri").level="warn";return b})},"esri/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty","./extensions/serializableProperty"],
function(b,a,f,c,e){Object.defineProperty(a,"__esModule",{value:!0});var l=[f.default,c.default,e.default];a.processPrototypeMetadatas=function(a,c){for(var d=Object.getOwnPropertyNames(a),b=0;b<l.length;b++){var g=l[b];if(g.processPrototypePropertyMetadata)for(var e=0,h=d;e<h.length;e++){var f=h[e];g.processPrototypePropertyMetadata(f,a[f],a,c)}}};a.processClassMetadatas=function(a,c){for(var d=Object.getOwnPropertyNames(a),b=0;b<l.length;b++){var g=l[b];if(g.processClassPropertyMetadata)for(var e=
0,h=d;e<h.length;e++){var f=h[e];g.processClassPropertyMetadata(f,a[f],a,c)}}};a.instanceCreated=function(a,c){for(var d=Object.getOwnPropertyNames(c),b=0;b<l.length;b++){var g=l[b];g.instanceCreated&&g.instanceCreated(a,c,d)}}})},"esri/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports dojo/has ../get ../set ../utils ../wire".split(" "),function(b,a,f,c,e,l,h){function d(a,c,d){var b=l.getProperties(a);return h.wire(a,d.aliasOf,function(){b.propertyInvalidated(c)})}
Object.defineProperty(a,"__esModule",{value:!0});a.AliasedPropertyExtension={processClassPropertyMetadata:function(a,d,b,h){var g=d.aliasOf;if(g&&(a=g.split(".")[0],null!=b[a]&&!d.set&&!d.get)){var m;d.get=function(){var a=c.default(this,g);if("function"===typeof a){m||(m=g.split(".").slice(0,-1).join("."));var d=c.default(this,m);d&&(a=a.bind(d))}return a};d.readOnly||(d.set=function(a){return e.default(this,g,a)})}},instanceCreated:function(a,c,b){for(var g=0;g<b.length;g++){var e=b[g],m=c[e];m.aliasOf&&
d(a,e,m)}}};a.default=a.AliasedPropertyExtension})},"esri/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(b,a,f){function c(a,c,b){if(null!=b.getItemAt||Array.isArray(b)){var d=parseInt(a,10);if(!isNaN(d))return Array.isArray(b)?b[d]:b.getItemAt(d)}d=f.getProperties(b);return c?f.isPropertyDeclared(d,a)?d.get(a):b[a]:f.isPropertyDeclared(d,a)?d.internalGet(a):b[a]}function e(a,b,m,g){if(null==a)return a;if((a=c(b[g],m,a))||!(g<b.length-1))return g===b.length-1?
a:e(a,b,m,g+1)}function l(a,b,m,g){void 0===m&&(m=!1);void 0===g&&(g=0);return"string"===typeof b&&-1===b.indexOf(".")?c(b,m,a):e(a,f.pathToArray(b),m,g)}function h(a,c){return l(a,c,!0)}Object.defineProperty(a,"__esModule",{value:!0});a.valueOf=l;a.get=h;a.exists=function(a,c){return void 0!==l(c,a,!0)};a.default=h})},"esri/core/accessorSupport/utils":function(){define(["require","exports","../lang"],function(b,a,f){function c(a,b){return b?Object.keys(b).reduce(function(a,d){if("value"===d)return a[d]=
b[d],a;if(void 0===a[d])return a[d]=f.clone(b[d]),a;var g=a[d],e=b[d];if(g===e)return a;if(Array.isArray(e)||Array.isArray(a))g=g?Array.isArray(g)?a[d]=g.concat():a[d]=[g]:a[d]=[],e&&(Array.isArray(e)||(e=[e]),e.forEach(function(a){-1===g.indexOf(a)&&g.push(a)}));else if(e&&"object"===typeof e)a[d]=c(g,e);else if(!a.hasOwnProperty(d)||b.hasOwnProperty(d))a[d]=e;return a},a||{}):a}function e(a){return Array.isArray(a)?a:a.split(".")}function l(a){if(Array.isArray(a)||-1<a.indexOf(",")){a=Array.isArray(a)?
a:a.split(",");for(var c=0;c<a.length;c++)a[c]=a[c].trim();return 1===a.length?a[0]:a}return a.trim()}function h(a){var c=!1;return function(){c||(c=!0,a())}}Object.defineProperty(a,"__esModule",{value:!0});a.getProperties=function(a){return a?a.__accessor__?a.__accessor__:a.propertyInvalidated?a:null:null};a.isPropertyDeclared=function(a,c){return a&&a.metadatas&&null!=a.metadatas[c]};a.merge=c;a.pathToStringOrArray=function(a){return a?"string"===typeof a&&-1===a.indexOf(".")?a:e(a):a};a.pathToArray=
e;a.splitPath=l;a.parse=function(a,c,b,g){c=l(c);if(Array.isArray(c)){var d=c.map(function(c){return g(a,c.trim(),b)});return{remove:h(function(){return d.forEach(function(a){return a.remove()})})}}return g(a,c.trim(),b)};a.once=h})},"esri/core/accessorSupport/set":function(){define(["require","exports","dojo/has","../Logger","./get"],function(b,a,f,c,e){function l(a,c,b){if(a&&c)if("object"===typeof c){b=0;for(var d=Object.getOwnPropertyNames(c);b<d.length;b++){var g=d[b];l(a,g,c[g])}}else"_"!==
c[0]&&(-1!==c.indexOf(".")?(c=c.split("."),g=c.splice(c.length-1,1)[0],l(e.default(a,c),g,b)):a[c]=b)}Object.defineProperty(a,"__esModule",{value:!0});c.getLogger("esri.core.accessorSupport.set");a.set=l;a.default=l})},"esri/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(b,a,f){function c(a,c,b){c=f.splitPath(c);if(Array.isArray(c)){for(var g=[],m=0;m<c.length;m++)g.push((new e(c[m],b)).install(a));return new d(g)}a=(new e(c,b)).install(a);return new k(a)}Object.defineProperty(a,
"__esModule",{value:!0});var e=function(){function a(a,c){this.path=a;this.callback=c;this.chain=null;this.path=a;-1<a.indexOf(".")&&(this.chain=f.pathToArray(a));this.callback=c;return this}a.prototype.install=function(a){a=this.chain?new h(this,a):new l(this,a);return a};a.prototype.notify=function(a){this.callback(a,this.path)};return a}(),l=function(){function a(a,c){this.binding=a;this.target=c;f.getProperties(c).addCursor(this.binding.path,this)}a.prototype.destroy=function(){this.target&&(f.getProperties(this.target).removeCursor(this.binding.path,
this),this.target=this.binding=null)};a.prototype.propertyDestroyed=function(a,c){f.getProperties(this.target).removeCursor(c,this)};a.prototype.propertyInvalidated=function(a,c){this.binding&&this.binding.notify(this.target)};a.prototype.propertyCommitted=function(a,c){this.binding&&this.binding.notify(this.target)};return a}(),h=function(){function a(a,c){this.binding=a;this.target=c;this.stack=[];this.properties=f.getProperties(c);this.stack.push({properties:this.properties,propertyName:a.chain[0]});
this.properties.addCursor(a.chain[0],this);this.moveForward();return this}a.prototype.destroy=function(){for(;;){var a=this.stack.pop();if(null==a)break;a.properties.removeCursor(a.propertyName,this)}this.target=this.binding=null};a.prototype.propertyDestroyed=function(a,c){this.moveBackward(a,c)};a.prototype.propertyInvalidated=function(a,c){this.binding&&this.binding.notify(this.target)};a.prototype.propertyCommitted=function(a,c){this.binding&&(this.moveBackward(a,c),this.moveForward(),this.binding.notify(this.target))};
a.prototype.moveBackward=function(a,c){for(var d=this.stack,b=d[d.length-1];b.properties!==a&&b.propertyName!==c;)b.properties.removeCursor(b.propertyName,this),d.pop(),b=d[d.length-1]};a.prototype.moveForward=function(){var a=this.stack,c=a[a.length-1],c=c.properties.internalGet(c.propertyName);(c=f.getProperties(c))&&a.length<this.binding.chain.length&&(a=this.binding.chain[a.length],this.stack.push({properties:c,propertyName:a}),c.addCursor(a,this),this.moveForward())};return a}(),d=function(){function a(a){this.cursors=
a}a.prototype.remove=function(){for(var a=this.cursors;0<a.length;)a.pop().destroy();this.cursors=null};return a}(),k=function(){function a(a){this.cursor=a}a.prototype.remove=function(){this.cursor.destroy();this.cursor=null};return a}();a.create=function(a,c){a=f.splitPath(a);if(Array.isArray(a)){for(var b=[],g=0;g<a.length;g++)b.push(new e(a[g],c));return function(a){for(var c=[],g=0;g<b.length;g++)c[g]=b[g].install(a);return new d(c)}}var m=new e(a,c);return function(a){return new k(m.install(a))}};
a.wire=c;a.default=c})},"esri/core/accessorSupport/extensions/computedProperty":function(){define("require exports dojo/has ../../Logger ../utils ../wire".split(" "),function(b,a,f,c,e,l){Object.defineProperty(a,"__esModule",{value:!0});c.getLogger("esri.core.accessorSupport.extensions.computedProperty");a.ComputedPropertyExtension={processClassPropertyMetadata:function(a,c,b,m){c.dependsOn&&(b=void 0,b=c.dependsOn.slice())&&(c.wire=l.create(b,function(c){return e.getProperties(c).propertyInvalidated(a)}))},
instanceCreated:function(a,c,b){for(var d=0;d<b.length;d++){var g=c[b[d]];g.wire&&g.wire(a)}}};a.default=a.ComputedPropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),function(b,a,f,c,e,l){function h(a,c,b){var d=a&&a.json;a&&a.json&&a.json.origins&&b&&(a=a.json.origins[b.origin])&&c in a&&(d=
a);return d}Object.defineProperty(a,"__esModule",{value:!0});a.originSpecificReadPropertyDefinition=function(a,c){return h(a,"read",c)};a.originSpecificWritePropertyDefinition=function(a,c){return h(a,"write",c)};a.SerializablePropertyExtension={processPrototypePropertyMetadata:function(a,b,m,g){if(e.process(b)){f.process(b);m=b.type;for(g=0;Array.isArray(m);)m=m[0],g++;if(b.json.origins)for(var d in b.json.origins){var k=b.json.origins[d];c.create(m,g,a,k);l.create(m,g,a,k)}c.create(m,g,a,b.json);
l.create(m,g,a,b.json)}}};a.default=a.SerializablePropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.process=function(a){if(a.json&&a.json.origins){var c=a.json.origins,b={"web-document":["web-scene","web-map"]};a=function(a){if(c[a]){var d=c[a];b[a].forEach(function(a){c[a]=d});delete c[a]}};for(var f in b)a(f)}}})},"esri/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require",
"exports","../../../object","./type"],function(b,a,f,c){function e(a,c,b,g){if(1<c)return d(a,c);if(1===c)return k(a);if(m(a)){var e=k(a.prototype.itemType.Type);return function(c,b,p){return(c=e(c,b,p))?new a(c):c}}return l(a)}function l(a){return a.prototype.read?function(c,b,d){return null==c?c:(new a).read(c,d)}:a.fromJSON}function h(a,c,b,d){return 0!==d&&Array.isArray(c)?c.map(function(c){return h(a,c,b,d-1)}):a(c,null,b)}function d(a,c){a=l(a);var b=h.bind(null,a);return function(a,d,g){if(null==
a)return a;a=b(a,g,c);d=c;for(g=a;0<d&&Array.isArray(g);)d--,g=g[0];if(void 0!==g)for(g=0;g<d;g++)a=[a];return a}}function k(a){var c=l(a);return function(a,b,d){return null==a?a:Array.isArray(a)?a.map(function(a){return c(a,null,d)}):[c(a,null,d)]}}function m(a){return c.isCollection(a)?(a=a.prototype.itemType)&&a.Type&&"function"===typeof a.Type?g(a.Type):!1:!1}function g(a){return!!a&&(!!a.prototype.read||!!a.fromJSON||m(a))}Object.defineProperty(a,"__esModule",{value:!0});a.create=function(a,
c,b,d){(!d.read||!d.read.reader&&!1!==d.read.enabled)&&g(a)&&f.setDeepValue("read.reader",e(a,c,b,d),d)}})},"esri/core/object":function(){define(["require","exports"],function(b,a){function f(a,b,f){for(var c=0;c<a.length;c++){var d=a[c];if(!(d in f))if(b)f[d]={};else return;f=f[d]}return f}Object.defineProperty(a,"__esModule",{value:!0});a.getDeepValue=function(a,b){return f(a.split("."),!1,b)};a.setDeepValue=function(a,b,l){var c=a.split(".");a=c.pop();(l=f(c,!0,l))&&a&&(l[a]=b)}})},"esri/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require",
"exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.isCollection=function(a){return!!a&&!!a.prototype.declaredClass&&0===a.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require","exports"],function(b,a){function f(a){"boolean"===typeof a.read?a.read={enabled:a.read}:"function"===typeof a.read?a.read={enabled:!0,reader:a.read}:a.read&&"object"===typeof a.read&&void 0===a.read.enabled&&
(a.read.enabled=!0)}function c(a){"boolean"===typeof a.write?a.write={enabled:a.write}:"function"===typeof a.write?a.write={enabled:!0,writer:a.write}:a.write&&"object"===typeof a.write&&void 0===a.write.enabled&&(a.write.enabled=!0)}Object.defineProperty(a,"__esModule",{value:!0});a.process=function(a){a.json||(a.json={});f(a.json);c(a.json);if(a.json.origins)for(var b in a.json.origins)f(a.json.origins[b]),c(a.json.origins[b]);return!0}})},"esri/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require",
"exports","../../../object","./type"],function(b,a,f,c){function e(a,c,b,d){f.setDeepValue(b,l(a,d),c)}function l(a,c){return a&&"function"===typeof a.write?a.write({},c):a&&"function"===typeof a.toJSON?a.toJSON():"number"===typeof a?-Infinity===a?-Number.MAX_VALUE:Infinity===a?Number.MAX_VALUE:isNaN(a)?null:a:a}function h(a,c,b,d){null===a?a=null:a&&"function"===typeof a.map?(a=a.map(function(a){return l(a,d)}),"function"===typeof a.toArray&&(a=a.toArray())):a=[l(a,d)];f.setDeepValue(b,a,c)}function d(a,
c,b){return 0!==b&&Array.isArray(a)?a.map(function(a){return d(a,c,b-1)}):l(a,c)}function k(a){return function(c,b,e,m){if(null===c)c=null;else{c=d(c,m,a);m=a;for(var g=c;0<m&&Array.isArray(g);)m--,g=g[0];if(void 0!==g)for(g=0;g<m;g++)c=[c]}f.setDeepValue(e,c,b)}}Object.defineProperty(a,"__esModule",{value:!0});a.create=function(a,b,d,f){f.write&&!f.write.writer&&!1!==f.write.enabled&&(1===b||c.isCollection(a)?f.write.writer=h:f.write.writer=1<b?k(b):e)}})},"esri/core/accessorSupport/PropertyOrigin":function(){define(["require",
"exports"],function(b,a){function f(a){switch(a){case "defaults":return e.DEFAULTS;case "service":return e.SERVICE;case "portal-item":return e.PORTAL_ITEM;case "web-scene":return e.WEB_SCENE;case "web-map":return e.WEB_MAP;case "user":return e.USER}}function c(a){switch(a){case e.DEFAULTS:return"defaults";case e.SERVICE:return"service";case e.PORTAL_ITEM:return"portal-item";case e.WEB_SCENE:return"web-scene";case e.WEB_MAP:return"web-map";case e.USER:return"user"}}Object.defineProperty(a,"__esModule",
{value:!0});var e;(function(a){a[a.DEFAULTS=0]="DEFAULTS";a[a.COMPUTED=1]="COMPUTED";a[a.SERVICE=2]="SERVICE";a[a.PORTAL_ITEM=3]="PORTAL_ITEM";a[a.WEB_SCENE=4]="WEB_SCENE";a[a.WEB_MAP=5]="WEB_MAP";a[a.USER=6]="USER";a[a.NUM=7]="NUM"})(e=a.OriginId||(a.OriginId={}));a.nameToId=f;a.idToName=c;a.readableNameToId=function(a){return f(a)};a.idToReadableName=function(a){return c(a)};a.writableNameToId=function(a){return f(a)};a.idToWritableName=function(a){return c(a)}})},"esri/core/accessorSupport/Store":function(){define(["require",
"exports","./PropertyOrigin"],function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});b=function(){function a(){this._values={}}a.prototype.get=function(a){return this._values[a]};a.prototype.originOf=function(a){return f.OriginId.USER};a.prototype.keys=function(){return Object.keys(this._values)};a.prototype.set=function(a,c){this._values[a]=c};a.prototype.clear=function(a){delete this._values[a]};a.prototype.has=function(a){return a in this._values};return a}();a.default=b})},"esri/core/accessorSupport/introspection":function(){define("require exports ../object ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),
function(b,a,f,c,e,l,h,d){Object.defineProperty(a,"__esModule",{value:!0});var k=Object.prototype.hasOwnProperty,m=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,g={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},t=/^_(set|get)([a-zA-Z0-9]+)Attr$/;a.processPrototype=function(a){for(var b=a.declaredClass,d=a.properties||{},v=0,z=Object.getOwnPropertyNames(d);v<z.length;v++){var x=z[v],p=d[x],n=typeof p;null==p?l.setPropertyMetadata(a,x,{value:p}):
Array.isArray(p)?l.setPropertyMetadata(a,x,{type:[p[0]],value:null}):"object"===n?h.getProperties(p)||p instanceof Date?l.setPropertyMetadata(a,x,{type:p.constructor,value:p}):l.setPropertyMetadata(a,x,p):"boolean"===n?l.setPropertyMetadata(a,x,{type:Boolean,value:p}):"string"===n?l.setPropertyMetadata(a,x,{type:String,value:p}):"number"===n?l.setPropertyMetadata(a,x,{type:Number,value:p}):"function"===n&&l.setPropertyMetadata(a,x,{type:p,value:null})}v=0;for(z=Object.getOwnPropertyNames(a);v<z.length;v++){var n=
z[v],p=a[n],d=x=void 0,A=m.exec(n);if(A)x=A[1],d=g[A[2]];else if(A=t.exec(n))x=A[2][0].toLowerCase()+A[2].substr(1),d=A[1].toLowerCase();x&&d&&(x=l.getPropertyMetadata(a,x),f.setDeepValue(d,p,x))}v=0;for(z=Object.getOwnPropertyNames(l.getPropertiesMetadata(a));v<z.length;v++)if(x=z[v],p=l.getPropertyMetadata(a,x),d=p.type,n=p.types,void 0===p.value&&k.call(a,x)&&(p.value=a[x]),!p.cast&&d){x=p;p=0;for(n=d;Array.isArray(n);)n=n[0],p++;d=1===p?c.ensureArray(n):1<p?c.ensureNArray(n,p):c.ensureType(d);
x.cast=d}else!p.cast&&n&&(Array.isArray(n)?p.cast=c.ensureArrayTyped(c.ensureOneOfType(n[0])):p.cast=c.ensureOneOfType(n));e.processPrototypeMetadatas(l.getPropertiesMetadata(a),b);return l.getPropertiesMetadata(a)};a.processClass=function(a){for(var c=a.prototype,b=c.declaredClass,g=a._meta.bases,m={},k=g.length-1;0<=k;k--)h.merge(m,l.getMetadata(g[k].prototype));var p=m.properties;e.processClassMetadatas(p,b);Object.defineProperty(a,"__accessorMetadata__",{value:{properties:p,autoDestroy:!!m.autoDestroy}});
for(var n={},b=function(a){var c=p[a];n[a]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(a):c.value},set:function(n){var p=this.__accessor__;if(!p)Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:n});else if(!Object.isFrozen(this)){if(p.initialized&&c.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+a+"' of "+this.declaredClass);if(2===p.lifecycle&&c.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+
a+"' of "+this.declaredClass);p.set(a,n)}}}},g=0,k=Object.getOwnPropertyNames(p);g<k.length;g++)b(k[g]);Object.defineProperties(a.prototype,n);if(m.parameters)for(a=0,b=Object.getOwnPropertyNames(m.parameters);a<b.length;a++)g=b[a],k=Object.getOwnPropertyDescriptor(c,g)||{value:c[g]},(k=d.autocastMethod(c,g,k))&&Object.defineProperty(c,g,k);return m}})},"esri/core/accessorSupport/ensureType":function(){define(["require","exports","../Logger"],function(b,a,f){function c(a,n){return n.isInstanceOf?
n.isInstanceOf(a):n instanceof a}function e(a){return null==a?a:new Date(a)}function l(a){return null==a?a:!!a}function h(a){return null==a?a:a.toString()}function d(a){return null==a?a:parseFloat(a)}function k(a){return null==a?a:Math.round(parseFloat(a))}function m(a){return a&&a.constructor&&void 0!==a.constructor._meta}function g(a,n){return null!=n&&a&&!c(a,n)}function t(a,n){g(a,n)&&(m(n)?p.error("Accessor#set","Assigning an instance of '"+(n.declaredClass||"unknown")+"' which is not a subclass of '"+
(a&&a.prototype&&a.prototype.declaredClass||"unknown")+"'"):n=new a(n));return n}function v(a){switch(a){case Number:return d;case n:return k;case Boolean:return l;case String:return h;case Date:return e;default:return t.bind(null,a)}}function w(a,n){var c=v(a);return 1===arguments.length?c:c(n)}function y(a,n){return 1===arguments.length?y.bind(null,a):n?Array.isArray(n)?n.map(a):[a(n)]:n}function r(a,n,c){return 0!==n&&Array.isArray(c)?c.map(function(c){return r(a,n-1,c)}):a(c)}function z(a,n,c){if(2===
arguments.length)return z.bind(null,a,n);if(!c)return c;c=r(a,n,c);for(var p=n,b=c;0<p&&Array.isArray(b);)p--,b=b[0];if(void 0!==b)for(b=0;b<p;b++)c=[c];return c}function x(a,n){if(2===arguments.length)return x(a).call(null,n);var c={},b=[],d=[],A;for(A in a.typeMap){var e=a.typeMap[A];c[A]=w(e);b.push(e&&e.prototype&&e.prototype.declaredClass||"unknown");d.push(A)}var k="string"===typeof a.key?function(n){return n[a.key]}:a.key;return function(n){if(a.base&&!g(a.base,n))return n;var A=k(n)||a.defaultKeyValue,
e=c[A];if(!e)return p.error("Accessor#set","Invalid property value, value needs to be one of "+("'"+b.join("', '")+"'")+", or a plain object that can auto-cast (having .type \x3d "+("'"+d.join("', '")+"'")+")"),null;if(!g(a.typeMap[A],n))return n;if("string"!==typeof a.key||m(n))return e(n);var A={},h;for(h in n)h!==a.key&&(A[h]=n[h]);return e(A)}}Object.defineProperty(a,"__esModule",{value:!0});var p=f.getLogger("esri.core.Accessor");a.isInstanceOf=c;a.ensureDate=e;a.ensureBoolean=l;a.ensureString=
h;a.ensureNumber=d;a.ensureInteger=k;a.isClassedType=m;a.requiresType=g;a.ensureClass=t;a.ensureType=w;a.ensureArrayTyped=y;a.ensureArray=function(a,n){return 1===arguments.length?y(w.bind(null,a)):y(w.bind(null,a),n)};a.ensureNArrayTyped=z;a.ensureNArray=function(a,n,c){return 2===arguments.length?z(w.bind(null,a),n):z(w.bind(null,a),n,c)};a.ensureOneOfType=x;var n=function(){return function(){}}();a.Integer=n;a.default=w})},"esri/core/accessorSupport/metadata":function(){define(["require","exports"],
function(b,a){function f(a){return null!=a.__accessorMetadata__}function c(a){return f(a)&&null!=e(a).properties}function e(a){a.__accessorMetadata__||Object.defineProperty(a,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return a.__accessorMetadata__}function l(a){a=e(a);var c=a.properties;c||(c=a.properties={});return c}function h(a,c){var b=e(a);a=b.parameters;a||(a=b.parameters={});b=a[c];b||(b=[],a[c]=b);return b}Object.defineProperty(a,"__esModule",{value:!0});
a.hasMetadata=f;a.hasPropertiesMetadata=c;a.hasPropertyMetadata=function(a,b){return c(a)&&null!=l(a)[b]};a.hasParametersMetadata=function(a,c){return f(a)&&null!=e(a).parameters&&null!=e(a).parameters[c]};a.getMetadata=e;a.getPropertiesMetadata=l;a.getPropertyMetadata=function(a,c){a=l(a);var b=a[c];b||(b=a[c]={});return b};a.setPropertyMetadata=function(a,c,b){l(a)[c]=b};a.getParametersMetadata=h;a.getParameterMetadata=function(a,c,b){var d=h(a,c)[b];d||(h(a,c)[b]=d={index:b});return d}})},"esri/core/accessorSupport/decorators/cast":function(){define(["require",
"exports","../ensureType","../metadata"],function(b,a,f,c){function e(a){var c="_meta"in a?f.ensureType(a):a;return function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a.push(c);return"number"===typeof a[2]?h.apply(this,a):l.apply(this,a)}}function l(a,b,d,e){c.getPropertyMetadata(a,b).cast=e}function h(a,b,d,e){c.getParameterMetadata(a,b,d).cast=e}function d(a){return function(b,d,e){c.getPropertyMetadata(b,a).cast=b[d]}}Object.defineProperty(a,"__esModule",{value:!0});var k=Object.prototype.toString;
a.autocastMethod=function(a,b,d){if(c.hasParametersMetadata(a,b)){var g=c.getParametersMetadata(a,b).filter(function(a){return null!=a.cast});if(g.length){var e=d.value;d.value=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];for(c=0;c<g.length;c++){var b=g[c];a[b.index]=b.cast(a[b.index])}return e.apply(this,a)};return d}console.warn("Method "+a.declaredClass+"::"+b+" is decorated with @cast but no parameters are decorated")}};a.cast=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=
arguments[c];if(3!==a.length||"string"!==typeof a[1]){if(1===a.length&&"[object Function]"===k.call(a[0]))return e(a[0]);if(1===a.length&&"string"===typeof a[0])return d(a[0])}}})},"esri/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ObjectPool ../scheduling ./get ./utils ./wire".split(" "),function(b,a,f,c,e,l,h,d,k){function m(a){x.has(a)?p.splice(p.indexOf(a),1):x.add(a);p.push(a);n||(n=l.schedule(t))}function g(a){if(!a.removed){var n=a.callback,p=a.path,
b=a.oldValue,d=a.target,g=h.valueOf(d,a.propertyPath,!0);c.equals(b,g)||(a.oldValue=g,n.call(d,g,b,p,d))}}function t(){if(n){n=null;var a=p;p=z.acquire();x.clear();for(var c=z.acquire(),b=0;b<a.length;b++){var d=a[b];g(d);d.removed&&c.push(d)}for(b=0;b<p.length;b++)d=p[b],d.removed&&(c.push(d),x.delete(d),p.splice(b,1),--b);for(b=0;b<c.length;b++)r.pool.release(c[b]);z.release(a);z.release(c);A.forEach(function(a){return a()})}}function v(a,n,c){var p=d.parse(a,n,c,function(a,n,c){var b=h.valueOf(a,
n,!0),g,A=k.wire(a,n,function(a,n){a.__accessor__.destroyed?p.remove():(g||(g=r.pool.acquire(a,n,b,c),b=null),m(g))});return{remove:d.once(function(){A.remove();g&&(g.removed=!0,m(g),g=null);p=A=b=null})}});return p}function w(a,n,p){var b=d.parse(a,n,p,function(a,n,p){var d=h.valueOf(a,n,!0),g=!1;return k.wire(a,n,function(a,n){if(a.__accessor__.destroyed)b.remove();else if(!g){g=!0;var A=h.valueOf(a,n,!0);c.equals(d,A)||p.call(a,A,d,n,a);d=h.valueOf(a,n,!0);g=!1}})});return b}function y(a,n,c,p){void 0===
p&&(p=!1);return!a.__accessor__||a.__accessor__.destroyed?{remove:function(){}}:p?w(a,n,c):v(a,n,c)}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function a(a,n,c,p){this.target=a;this.path=n;this.oldValue=c;this.callback=p;this.removed=!1;this.propertyPath=d.pathToStringOrArray(n)}a.prototype.release=function(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null;this.removed=!0};a.pool=new e(a,!0);return a}(),z=new f,x=new Set,p=z.acquire(),n;a.dispatchTarget=
function(a){for(var n=z.copy(p),c=0;c<n.length;c++){var b=n[c];b.target===a&&(g(b),x.delete(b),p.splice(p.indexOf(b),1))}};a.removeTarget=function(a){for(var n=0;n<p.length;n++){var c=p[n];c.target===a&&(c.removed=!0)}};a.dispatch=t;var A=new Set;a.afterDispatch=function(a){A.add(a);return{remove:function(){A.delete(a)}}};a.watch=y;a.isValueInUse=function(a){return p.some(function(n){return n.oldValue===a})};a.default=y})},"esri/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],
function(b,a,f){function c(a){a.length=0}var e=Array.prototype.splice;b=function(){function a(a,b){void 0===a&&(a=50);void 0===b&&(b=50);this._pool=new f(Array,!1,c,b,a)}a.prototype.acquire=function(){return this._pool.acquire()};a.prototype.copy=function(a){var c=this.acquire();a.unshift(0,0);e.apply(c,a);a.splice(0,2);return c};a.prototype.release=function(a){this._pool.release(a)};a.acquire=function(){return l.acquire()};a.copy=function(a){return l.copy(a)};a.release=function(a){return l.release(a)};
return a}();var l=new b(100);return b})},"esri/core/ObjectPool":function(){define(["require","exports"],function(b,a){var f=function(){return function(){}}();return function(){function a(a,c,b,d,k){void 0===d&&(d=1);void 0===k&&(k=0);this.classConstructor=a;this.acquireFunctionOrWithConstructor=c;this.releaseFunction=b;this.growthSize=d;!0===c?this.acquireFunction=this._constructorAcquireFunction:"function"===typeof c&&(this.acquireFunction=c);this._pool=Array(k);this._set=new Set;this._initialSize=
k;for(a=0;a<k;a++)this._pool[a]=new this.classConstructor;this.growthSize=Math.max(d,1)}a.prototype.acquire=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];c=this.classConstructor||f;if(0===this._pool.length)for(var b=this.growthSize,d=0;d<b;d++)this._pool[d]=new c;c=this._pool.shift();this.acquireFunction?this.acquireFunction.apply(this,[c].concat(a)):c&&c.acquire&&"function"===typeof c.acquire&&c.acquire.apply(c,a);this._set.delete(c);return c};a.prototype.release=function(a){a&&
!this._set.has(a)&&(this.releaseFunction?this.releaseFunction(a):a&&a.release&&"function"===typeof a.release&&a.release(),this._pool.push(a),this._set.add(a))};a.prototype.prune=function(){if(!(this._pool.length<=this._initialSize))for(var a;this._initialSize>this._pool.length;)a=this._pool.shift(),this._set.delete(a),a.dispose&&"function"===typeof a.dispose&&a.dispose()};a.prototype._constructorAcquireFunction=function(a){for(var c=[],b=1;b<arguments.length;b++)c[b-1]=arguments[b];(d=this.classConstructor).call.apply(d,
[a].concat(c));var d};return a}()})},"esri/core/scheduling":function(){define(["require","exports","./nextTick","./now","./requestAnimationFrame"],function(b,a,f,c,e){function l(c){void 0===c&&(c=a.now());a.debug.rafId=null;0<n.length&&(a.debug.rafId=h());if(0<v){var p=c-v;r=Math.min(p,r);if(p<w)return}a.debug.executeFrameTasks(c)}function h(){return a.debug.requestNextFrame?a.debug.requestNextFrame(m):m()}function d(){for(var a=0;a<n.length;){var c=n[a];a++;if(c.removed){n.splice(a-1,1);for(var p=
0;p<x.length;p++){var b=x[p];if(c.phases[b]){var b=A[b],d=b.indexOf(c);-1!==d&&b.splice(d,1)}}}}}function k(){for(;p.length;){var n=p.shift();n.isActive&&(n.isActive=!1,n.callback())}a.debug.willDispatch=!1}function m(){return e(l)}Object.defineProperty(a,"__esModule",{value:!0});a.now=c;var g=function(){return function(a){this.phases=a;this.paused=!1;this.pausedAt=0;this.epoch=-1;this.dt=0;this.ticks=-1;this.removed=!1}}(),t=function(){function a(a){this.callback=a;this.isActive=!0}a.prototype.remove=
function(){this.isActive=!1};return a}(),v=-1,w=0,y=0,r=Number.POSITIVE_INFINITY,z={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0,spendInTask:0},x=["prepare","preRender","render","postRender","update"],p=[],n=[],A={prepare:[],preRender:[],render:[],postRender:[],update:[]},B=function(){function n(a){this._task=a}n.prototype.remove=function(){this._task.removed=!0};n.prototype.pause=function(){this._task.paused||(this._task.paused=!0,this._task.pausedAt=a.now())};n.prototype.resume=function(){this._task.paused&&
(this._task.paused=!1,-1!==this._task.epoch&&(this._task.epoch+=a.now()-this._task.pausedAt))};return n}();a.FrameTaskHandle=B;a.debug={frameTasks:n,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(a){void 0===a&&(a=!1);for(var c=0;c<n.length;c++)n[c].removed=!0;a&&d()},dispatch:k,executeFrameTasks:function(c){void 0===c&&(c=a.now());0>v&&(v=c);var p=c-v;v=c;for(var b=0;b<n.length;b++){var g=n[b];-1!==g.epoch&&(g.dt=p)}for(b=0;b<x.length;b++)for(var p=x[b],e=A[p],m=0;m<e.length;m++)g=
e[m],g.paused||g.removed||(0===b&&g.ticks++,-1===g.epoch&&(g.epoch=c),z.time=c,z.deltaTime=g.dt,z.elapsedFrameTime=a.now()-c,z.frameDuration=0<y?y:r,z.spendInTask=c-g.epoch,g.phases[p].call(g,z));d()}};a.schedule=function(n){n=new t(n);p.push(n);a.debug.willDispatch||(a.debug.willDispatch=!0,f(k));return n};a.addFrameTask=function(c){var p=new g(c);n.push(p);for(var b=0,d=x;b<d.length;b++){var e=d[b];c[e]&&A[e].push(p)}a.debug.rafId||(v=-1,a.debug.rafId=h());return new B(p)};a.setFrameRate=function(a){if(0>=
a)w=0,y=r;else{var n=1.05*r;a=Math.ceil(1E3/a/n);w=(a-1)*n;y=a*r}};a.requestNextFrame=h})},"esri/core/nextTick":function(){define(["require","exports","./global"],function(b,a,f){function c(){if(f.postMessage&&!f.importScripts){var a=f.onmessage,c=!0;f.onmessage=function(){c=!1};f.postMessage("","*");f.onmessage=a;return c}return!1}var e=f.MutationObserver||f.WebKitMutationObserver;return function(){var a;if(f.process&&f.process.nextTick)a=function(a){f.process.nextTick(a)};else if(f.Promise)a=function(a){f.Promise.resolve().then(a)};
else if(e){var b=[],d=document.createElement("div");(new e(function(){for(;0<b.length;)b.shift()()})).observe(d,{attributes:!0});a=function(a){b.push(a);d.setAttribute("queueStatus","1")}}else if(c()){var k=[];f.addEventListener("message",function(a){if(a.source===f&&"esri-nexttick-message"===a.data)for(a.stopPropagation();k.length;)k.shift()()},!0);a=function(a){k.push(a);f.postMessage("esri-nexttick-message","*")}}else a=f.setImmediate?function(a){return f.setImmediate(a)}:function(a){return f.setTimeout(a,
0)};return a}()})},"esri/core/now":function(){define(["require","exports","./global"],function(b,a,f){return function(){var a=f.performance||{};if(a.now)return function(){return a.now()};if(a.webkitNow)return function(){return a.webkitNow()};if(a.mozNow)return function(){return a.mozNow()};if(a.msNow)return function(){return a.msNow()};if(a.oNow)return function(){return a.oNow()};var b;b=a.timing&&a.timing.navigationStart?a.timing.navigationStart:Date.now();return function(){return Date.now()-b}}()})},
"esri/core/requestAnimationFrame":function(){define(["require","exports","./global","./now"],function(b,a,f,c){var e=c();b=f.requestAnimationFrame;if(!b){a=["ms","moz","webkit","o"];for(var l=0;l<a.length&&!b;++l)b=f[a[l]+"RequestAnimationFrame"];b||(b=function(a){var b=c(),k=Math.max(0,16-(b-e)),m=f.setTimeout(function(){a(c())},k);e=b+k;return m})}return b})},"esri/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g){function t(c){for(var b in c)a.hasOwnProperty(b)||(a[b]=c[b])}Object.defineProperty(a,"__esModule",{value:!0});t(f);t(c);t(e);t(l);t(h);t(d);t(k);t(m);t(g)})},"esri/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.aliasOf=function(a){return function(c,b){f.getPropertyMetadata(c,b).aliasOf=a}}})},"esri/core/accessorSupport/decorators/autoDestroy":function(){define(["require",
"exports","../metadata"],function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.autoDestroy=function(){return function(a,b,l){f.getMetadata(a).autoDestroy=!0;return a[b]}}})},"esri/core/accessorSupport/decorators/declared":function(){define(["require","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.declared=function(a){for(var c=[],b=1;b<arguments.length;b++)c[b-1]=arguments[b];b=function(){return this||{}};b.__bases__=[a].concat(c);return b}})},"esri/core/accessorSupport/decorators/property":function(){define("require exports dojo/has ../../lang ../../Logger ../metadata".split(" "),
function(b,a,f,c,e,l){Object.defineProperty(a,"__esModule",{value:!0});e.getLogger("esri.core.accessorSupport.decorators.property");a.property=function(a){void 0===a&&(a={});return function(b,e){var d=b.constructor.prototype;if(d!==Function.prototype){(b=Object.getOwnPropertyDescriptor(b,e))&&(b.get||b.set)?(a=c.clone(a),b.set&&(a.set=b.set),b.get&&(a.get=b.get)):b&&b.hasOwnProperty("value")&&(a=c.clone(a),a.value=b.value);e=l.getPropertyMetadata(d,e);for(var g in a)d=a[g],Array.isArray(d)?e[g]=(e[g]||
[]).concat(d):e[g]=d}}};a.propertyJSONMeta=function(a,c,b){a=l.getPropertyMetadata(a.constructor.prototype,b);a.json||(a.json={});a=a.json;void 0!==c&&(a.origins||(a.origins={}),a.origins[c]||(a.origins[c]={}),a=a.origins[c]);return a}})},"esri/core/accessorSupport/decorators/reader":function(){define(["require","exports","../../object","./property"],function(b,a,f,c){Object.defineProperty(a,"__esModule",{value:!0});a.reader=function(a,b,h){var d,e;void 0===b||Array.isArray(b)?(e=a,h=b,d=[void 0]):
(e=b,d=Array.isArray(a)?a:[a]);return function(a,b,k){var g=a.constructor.prototype;d.forEach(function(d){d=c.propertyJSONMeta(a,d,e);d.read&&"object"!==typeof d.read&&(d.read={});f.setDeepValue("read.reader",g[b],d);h&&(d.read.source=(d.read.source||[]).concat(h))})}}})},"esri/core/accessorSupport/decorators/shared":function(){define(["require","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.shared=function(a){return function(c,b){c[b]=a}}})},"esri/core/accessorSupport/decorators/subclass":function(){define(["require",
"exports","../../declare","../metadata"],function(b,a,f,c){function e(a,c){a.read&&("function"===typeof a.read?c.push(a.read):"object"===typeof a.read&&a.read.reader&&c.push(a.read.reader))}function l(a,c){a.write&&("function"===typeof a.write?c.push(a.write):"object"===typeof a.write&&a.write.writer&&c.push(a.write.writer))}function h(a){var b=[];a=c.getPropertiesMetadata(a.prototype);if(!a)return b;for(var d in a){var g=a[d];g.cast&&b.push(g.cast);g.copy&&b.push(g.copy);if(g=g.json)if(e(g,b),l(g,
b),g=g.origins)for(var m in g){var k=g[m];e(k,b);l(k,b)}}return b}function d(a){var b={values:{},descriptors:{}},d=["__bases__"],g=c.getPropertiesMetadata(a.prototype),e=h(a);Object.getOwnPropertyNames(a.prototype).filter(function(c){return-1!==d.indexOf(c)||g&&g.hasOwnProperty(c)||!m(Object.getOwnPropertyDescriptor(a.prototype,c))&&-1!==e.indexOf(a.prototype[c])?!1:!0}).forEach(function(c){var d=Object.getOwnPropertyDescriptor(a.prototype,c);m(d)?b.descriptors[c]=d:b.values[c]=a.prototype[c]});return b}
function k(a){var c=Object.getOwnPropertyNames(a),b=Object.getPrototypeOf(a.prototype).constructor,d=Object.getOwnPropertyNames(Function);d.push("__bases__");var g=Object.getOwnPropertyNames(b),e={values:{},descriptors:{}};c.filter(function(c){return-1!==d.indexOf(c)?!1:-1===g.indexOf(c)||b[c]!==a[c]?!0:!1}).forEach(function(c){var b=Object.getOwnPropertyDescriptor(a,c);m(b)?e.descriptors[c]=b:e.values[c]=a[c]});return e}function m(a){return a&&!(!a.get&&!a.set)}Object.defineProperty(a,"__esModule",
{value:!0});a.subclass=function(a){return function(c){var b=d(c),g=k(c);null!=a&&(b.values.declaredClass=a);c=f(c.__bases__,b.values);Object.defineProperties(c.prototype,b.descriptors);for(var e in g.values)c[e]=g.values[e];Object.defineProperties(c,g.descriptors);return c}}})},"esri/core/accessorSupport/decorators/writer":function(){define(["require","exports","../../object","./property"],function(b,a,f,c){Object.defineProperty(a,"__esModule",{value:!0});a.writer=function(a,b,h){var d,e;void 0===
b?(e=a,d=[void 0]):"string"!==typeof b?(e=a,d=[void 0],h=b):(e=b,d=Array.isArray(a)?a:[a]);return function(a,b,k){var g=a.constructor.prototype;d.forEach(function(d){d=c.propertyJSONMeta(a,d,e);d.write&&"object"!==typeof d.write&&(d.write={});h&&f.setDeepValue("write.target",h,d);f.setDeepValue("write.writer",g[b],d)})}}})},"esri/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/_base/lang ../../geometry ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v,w,y){var r=d({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc"});return function(a){function b(c){c=a.call(this)||this;c.dpi=96;c.format=null;c.origin=null;c.minScale=0;c.maxScale=0;c.size=null;c.spatialReference=null;return c}f(b,a);p=b;b.create=function(a){void 0===a&&(a={size:256,spatialReference:l.SpatialReference.WebMercator});
var c=a.resolutionFactor||1,n=a.scales,b=a.size||256;a=a.spatialReference||l.SpatialReference.WebMercator;var d=v.getInfo(a),d=d?new l.Point(d.origin[0],d.origin[1],a):new l.Point(0,0,a),g=1/(39.37*t.getMetersPerUnitForSR(a)*96),e=[];if(n)for(var m=0;m<n.length;m++){var k=n[m],h=k*g;e.push({level:m,scale:k,resolution:h})}else for(k=v.isGeographic(a)?512/b*1.47748799285417E8:256/b*5.91657527591555E8,n=Math.ceil(24/c),e.push({level:0,scale:k,resolution:k*g}),m=1;m<n;m++)k/=Math.pow(2,c),h=k*g,e.push({level:m,
scale:k,resolution:h});return new p({dpi:96,lods:e,origin:d,size:b,spatialReference:a})};Object.defineProperty(b.prototype,"isWrappable",{get:function(){var a=this.spatialReference,c=this.origin;if(a&&c){var b=v.getInfo(a);return a.isWrappable&&Math.abs(b.origin[0]-c.x)<=b.dx}return!1},enumerable:!0,configurable:!0});b.prototype.readOrigin=function(a,c){return l.Point.fromJSON(e.mixin({spatialReference:c.spatialReference},a))};Object.defineProperty(b.prototype,"lods",{set:function(a){var c=this,n=
0,b=0,p=[];this._levelToLOD={};a&&(n=-Infinity,b=Infinity,a.forEach(function(a){p.push(a.scale);n=a.scale>n?a.scale:n;b=a.scale<b?a.scale:b;c._levelToLOD[a.level]=a}));this._set("scales",p);this._set("minScale",n);this._set("maxScale",b);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});b.prototype.readSize=function(a,c){return[c.cols,c.rows]};b.prototype.writeSize=function(a,c){c.cols=a[0];c.rows=a[0]};b.prototype.zoomToScale=function(a){var c=this.scales;if(0>=
a)return c[0];if(a>=c.length)return c[c.length-1];var n=Math.round(a);return c[n]+(n-a)*(c[Math.round(a-.5)]-c[n])};b.prototype.scaleToZoom=function(a){for(var c=this.scales,n=c.length-1,b=0;b<n;b++){var p=c[b],d=c[b+1];if(p<=a)break;if(d===a)return b+1;if(p>a&&d<a)return b+1-(a-d)/(p-d)}return b};b.prototype.snapScale=function(a,c){void 0===c&&(c=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=c?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};b.prototype.tileAt=function(a,c,b,
p){var n=this.lodAt(a);if(!n)return null;var d;if("number"===typeof c)d=c,c=b;else{if(c.spatialReference.equals(this.spatialReference))d=c.x,c=c.y;else{p=w.project(c,this.spatialReference);if(!p)return null;d=p.x;c=p.y}p=b}b=n.resolution*this.size[0];n=n.resolution*this.size[1];p||(p={id:null,level:0,row:0,col:0,extent:g.create()});p.level=a;p.row=Math.floor((this.origin.y-c)/n+.001);p.col=Math.floor((d-this.origin.x)/b+.001);this.updateTileInfo(p);return p};b.prototype.updateTileInfo=function(a){var c=
this.lodAt(a.level),n=c.resolution*this.size[0],c=c.resolution*this.size[1];a.id=a.level+"/"+a.row+"/"+a.col;a.extent||(a.extent=g.create());a.extent[0]=this.origin.x+a.col*n;a.extent[1]=this.origin.y-(a.row+1)*c;a.extent[2]=a.extent[0]+n;a.extent[3]=a.extent[1]+c};b.prototype.upsampleTile=function(a){var c=this._upsampleLevels[a.level];if(!c||-1===c.parentLevel)return!1;a.level=c.parentLevel;a.row=Math.floor(a.row/c.factor+.001);a.col=Math.floor(a.col/c.factor+.001);this.updateTileInfo(a);return!0};
b.prototype.getTileBounds=function(a,c){var n=this.lodAt(c.level).resolution,b=n*this.size[0],n=n*this.size[1];a[0]=this.origin.x+c.col*b;a[1]=this.origin.y-(c.row+1)*n;a[2]=a[0]+b;a[3]=a[1]+n;return a};b.prototype.lodAt=function(a){return this._levelToLOD&&this._levelToLOD[a]||null};b.prototype.clone=function(){return p.fromJSON(this.write({}))};b.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var c=null,b=0;b<a.length;b++){var p=a[b];this._upsampleLevels[p.level]=
{parentLevel:c?c.level:-1,factor:c?c.resolution/p.resolution:0};c=p}};c([k.property({type:Number,json:{write:!0}})],b.prototype,"compressionQuality",void 0);c([k.property({type:Number,json:{write:!0}})],b.prototype,"dpi",void 0);c([k.property({type:String,json:{read:r.read,write:r.write}})],b.prototype,"format",void 0);c([k.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],b.prototype,"isWrappable",null);c([k.property({type:l.Point,json:{write:!0}})],b.prototype,"origin",void 0);c([k.reader("origin")],
b.prototype,"readOrigin",null);c([k.property({type:[y],value:null,json:{write:!0}})],b.prototype,"lods",null);c([k.property({readOnly:!0})],b.prototype,"minScale",void 0);c([k.property({readOnly:!0})],b.prototype,"maxScale",void 0);c([k.property({readOnly:!0})],b.prototype,"scales",void 0);c([k.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?[a,a]:[256,256]}})],b.prototype,"size",void 0);c([k.reader("size",["rows","cols"])],b.prototype,"readSize",null);c([k.writer("size",
{cols:{type:m.Integer},rows:{type:m.Integer}})],b.prototype,"writeSize",null);c([k.property({type:l.SpatialReference,json:{write:!0}})],b.prototype,"spatialReference",void 0);return b=p=c([k.subclass("esri.layers.support.TileInfo")],b);var p}(k.declared(h))})},"esri/geometry":function(){define("require exports ./geometry/Extent ./geometry/Geometry ./geometry/Mesh ./geometry/Multipoint ./geometry/Point ./geometry/Polygon ./geometry/Polyline ./geometry/ScreenPoint ./geometry/SpatialReference ./geometry/support/jsonUtils".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t){Object.defineProperty(a,"__esModule",{value:!0});a.Extent=f;a.BaseGeometry=c;a.Mesh=e;a.Multipoint=l;a.Point=h;a.Polygon=d;a.Polyline=k;a.ScreenPoint=m;a.SpatialReference=g;a.isGeometry=function(c){return c instanceof a.BaseGeometry};a.fromJSON=t.fromJSON})},"esri/geometry/Extent":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Geometry ./Point ./SpatialReference ./support/contains ./support/intersects ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v){function w(a,c,b){return null==c?b:null==b?c:a(c,b)}b=function(a){function b(){for(var c=0;c<arguments.length;c++);c=a.call(this)||this;c.type="extent";c.xmin=0;c.ymin=0;c.mmin=void 0;c.zmin=void 0;c.xmax=0;c.ymax=0;c.mmax=void 0;c.zmax=void 0;return c}f(b,a);h=b;b.prototype.normalizeCtorArgs=function(a,c,b,d,g){return!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?"object"===typeof a?(a.spatialReference=null!=a.spatialReference?a.spatialReference:
k.WGS84,a):{xmin:a,ymin:c,xmax:b,ymax:d,spatialReference:null!=g?g:k.WGS84}:{spatialReference:a,xmin:0,ymin:0,xmax:0,ymax:0}};Object.defineProperty(b.prototype,"center",{get:function(){var a=new d({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});this.hasZ&&(a.z=.5*(this.zmin+this.zmax));this.hasM&&(a.m=.5*(this.mmin+this.mmax));return a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"extent",{get:function(){return this.clone()},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"hasM",{get:function(){return null!=this.mmin&&null!=this.mmax},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hasZ",{get:function(){return null!=this.zmin&&null!=this.zmax},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"height",{get:function(){return Math.abs(this.ymax-this.ymin)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"width",{get:function(){return Math.abs(this.xmax-this.xmin)},
enumerable:!0,configurable:!0});b.prototype.centerAt=function(a){var c=this.center;return null!=a.z&&this.hasZ?this.offset(a.x-c.x,a.y-c.y,a.z-c.z):this.offset(a.x-c.x,a.y-c.y)};b.prototype.clone=function(){var a=new h;a.xmin=this.xmin;a.ymin=this.ymin;a.xmax=this.xmax;a.ymax=this.ymax;a.spatialReference=this.spatialReference;null!=this.zmin&&(a.zmin=this.zmin,a.zmax=this.zmax);null!=this.mmin&&(a.mmin=this.mmin,a.mmax=this.mmax);return a};b.prototype.contains=function(a){if(!a)return!1;var c=this.spatialReference,
b=a.spatialReference;c&&b&&!c.equals(b)&&v.canProject(c,b)&&(a=c.isWebMercator?v.geographicToWebMercator(a):v.webMercatorToGeographic(a,!0));return"point"===a.type?m.extentContainsPoint(this,a):"extent"===a.type?m.extentContainsExtent(this,a):!1};b.prototype.equals=function(a){if(!a)return!1;var c=this.spatialReference,b=a.spatialReference;c&&b&&!c.equals(b)&&v.canProject(c,b)&&(a=c.isWebMercator?v.geographicToWebMercator(a):v.webMercatorToGeographic(a,!0));return this.xmin===a.xmin&&this.ymin===
a.ymin&&this.zmin===a.zmin&&this.mmin===a.mmin&&this.xmax===a.xmax&&this.ymax===a.ymax&&this.zmax===a.zmax&&this.mmax===a.mmax};b.prototype.expand=function(a){a=.5*(1-a);var c=this.width*a,b=this.height*a;this.xmin+=c;this.ymin+=b;this.xmax-=c;this.ymax-=b;this.hasZ&&(c=(this.zmax-this.zmin)*a,this.zmin+=c,this.zmax-=c);this.hasM&&(a*=this.mmax-this.mmin,this.mmin+=a,this.mmax-=a);return this};b.prototype.intersects=function(a){if(!a)return!1;var c=this.spatialReference,b=a.spatialReference;c&&b&&
!c.equals(b)&&v.canProject(c,b)&&(a=c.isWebMercator?v.geographicToWebMercator(a):v.webMercatorToGeographic(a,!0));c=g.getExtentIntersector(a.type);return"mesh"!==a.type?c(this,a):c(this,a.extent)};b.prototype.normalize=function(){var a=this._normalize(!1,!0);return Array.isArray(a)?a:[a]};b.prototype.offset=function(a,c,b){this.xmin+=a;this.ymin+=c;this.xmax+=a;this.ymax+=c;null!=b&&(this.zmin+=b,this.zmax+=b);return this};b.prototype.shiftCentralMeridian=function(){return this._normalize(!0)};b.prototype.union=
function(a){this.xmin=Math.min(this.xmin,a.xmin);this.ymin=Math.min(this.ymin,a.ymin);this.xmax=Math.max(this.xmax,a.xmax);this.ymax=Math.max(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=w(Math.min,this.zmin,a.zmin),this.zmax=w(Math.max,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=w(Math.min,this.mmin,a.mmin),this.mmax=w(Math.max,this.mmax,a.mmax);return this};b.prototype.intersection=function(a){if(!this.intersects(a))return null;this.xmin=Math.max(this.xmin,a.xmin);this.ymin=Math.max(this.ymin,
a.ymin);this.xmax=Math.min(this.xmax,a.xmax);this.ymax=Math.min(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=w(Math.max,this.zmin,a.zmin),this.zmax=w(Math.min,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=w(Math.max,this.mmin,a.mmin),this.mmax=w(Math.min,this.mmax,a.mmax);return this};b.prototype.toJSON=function(a){return this.write(null,a)};b.prototype._shiftCM=function(a){void 0===a&&(a=t.getInfo(this.spatialReference));if(!a||!this.spatialReference)return this;var c=this.spatialReference,
b=this._getCM(a);if(b){var d=c.isWebMercator?v.webMercatorToGeographic(b):b;this.xmin-=b.x;this.xmax-=b.x;c.isWebMercator||(d.x=this._normalizeX(d.x,a).x);this.spatialReference=new k(e.substitute({Central_Meridian:d.x},c.isWGS84?a.altTemplate:a.wkTemplate))}return this};b.prototype._getCM=function(a){var c=null,b=a.valid;a=b[0];var b=b[1],d=this.xmin,g=this.xmax;d>=a&&d<=b&&g>=a&&g<=b||(c=this.center);return c};b.prototype._normalize=function(a,c,b){var n=this.spatialReference;if(!n)return this;b=
b||t.getInfo(n);if(!b)return this;var p=this._getParts(b).map(function(a){return a.extent});if(2>p.length)return p[0]||this;if(2<p.length)return a?this._shiftCM(b):this.set({xmin:b.valid[0],xmax:b.valid[1]});if(a)return this._shiftCM(b);if(c)return p;var d=!0,g=!0;p.forEach(function(a){a.hasZ||(d=!1);a.hasM||(g=!1)});return{rings:p.map(function(a){var c=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(d)for(var b=(a.zmax-a.zmin)/2,n=0;n<c.length;n++)c[n].push(b);
if(g)for(a=(a.mmax-a.mmin)/2,n=0;n<c.length;n++)c[n].push(a);return c}),hasZ:d,hasM:g,spatialReference:n}};b.prototype._getParts=function(a){var c=this.cache._parts;if(!c){var c=[],b=this.ymin,d=this.ymax,g=this.spatialReference,e=this.width,m=this.xmin,k=this.xmax,f=void 0;a=a||t.getInfo(g);var w=a.valid,l=w[0],v=w[1],f=this._normalizeX(this.xmin,a),x=f.x,w=f.frameId,f=this._normalizeX(this.xmax,a),y=f.x;a=f.frameId;f=x===y&&0<e;if(e>2*v){e=new h(m<k?x:y,b,v,d,g);m=new h(l,b,m<k?y:x,d,g);k=new h(0,
b,v,d,g);b=new h(l,b,0,d,g);d=[];g=[];e.contains(k)&&d.push(w);e.contains(b)&&g.push(w);m.contains(k)&&d.push(a);m.contains(b)&&g.push(a);for(l=w+1;l<a;l++)d.push(l),g.push(l);c.push({extent:e,frameIds:[w]},{extent:m,frameIds:[a]},{extent:k,frameIds:d},{extent:b,frameIds:g})}else x>y||f?c.push({extent:new h(x,b,v,d,g),frameIds:[w]},{extent:new h(l,b,y,d,g),frameIds:[a]}):c.push({extent:new h(x,b,y,d,g),frameIds:[w]});this.cache._parts=c}a=this.hasZ;b=this.hasM;if(a||b)for(w={},a&&(w.zmin=this.zmin,
w.zmax=this.zmax),b&&(w.mmin=this.mmin,w.mmax=this.mmax),a=0;a<c.length;a++)c[a].extent.set(w);return c};b.prototype._normalizeX=function(a,c){var b=c.valid;c=b[0];var p=b[1],b=2*p,d=0;a>p?(c=Math.ceil(Math.abs(a-p)/b),a-=c*b,d=c):a<c&&(c=Math.ceil(Math.abs(a-c)/b),a+=c*b,d=-c);return{x:a,frameId:d}};c([l.property({dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax spatialReference".split(" ")})],b.prototype,"cache",void 0);c([l.property({readOnly:!0,dependsOn:["cache"]})],b.prototype,"center",null);
c([l.property({readOnly:!0,dependsOn:["cache"]})],b.prototype,"extent",null);c([l.property({readOnly:!0,dependsOn:["mmin","mmax"],json:{write:{enabled:!1,overridePolicy:null}}})],b.prototype,"hasM",null);c([l.property({readOnly:!0,dependsOn:["zmin","zmax"],json:{write:{enabled:!1,overridePolicy:null}}})],b.prototype,"hasZ",null);c([l.property({readOnly:!0,dependsOn:["ymin","ymax"]})],b.prototype,"height",null);c([l.property({readOnly:!0,dependsOn:["xmin","xmax"]})],b.prototype,"width",null);c([l.property({type:Number,
json:{write:!0}})],b.prototype,"xmin",void 0);c([l.property({type:Number,json:{write:!0}})],b.prototype,"ymin",void 0);c([l.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],b.prototype,"mmin",void 0);c([l.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],b.prototype,"zmin",void 0);c([l.property({type:Number,json:{write:!0}})],b.prototype,"xmax",void 0);
c([l.property({type:Number,json:{write:!0}})],b.prototype,"ymax",void 0);c([l.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],b.prototype,"mmax",void 0);c([l.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],b.prototype,"zmax",void 0);return b=h=c([l.subclass("esri.geometry.Extent")],b);var h}(l.declared(h));b.prototype.toJSON.isDefaultToJSON=!0;
return b})},"esri/geometry/Geometry":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./SpatialReference".split(" "),function(b,a,f,c,e,l,h){return function(a){function b(){var c=a.call(this)||this;c.type=null;c.extent=null;c.hasM=!1;c.hasZ=!1;c.spatialReference=h.WGS84;return c}f(b,a);Object.defineProperty(b.prototype,"cache",{get:function(){return{}},enumerable:!0,configurable:!0});b.prototype.clone=
function(){console.warn(".clone() is not implemented for "+this.declaredClass);return null};b.prototype.clearCache=function(){this.notifyChange("cache")};b.prototype.getCacheValue=function(a){return this.cache[a]};b.prototype.setCacheValue=function(a,c){this.cache[a]=c};c([l.property()],b.prototype,"type",void 0);c([l.property({readOnly:!0,dependsOn:["spatialReference"]})],b.prototype,"cache",null);c([l.property({readOnly:!0,dependsOn:["spatialReference"]})],b.prototype,"extent",void 0);c([l.property({type:Boolean,
json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"hasM",void 0);c([l.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"hasZ",void 0);c([l.property({type:h,json:{write:!0}})],b.prototype,"spatialReference",void 0);return b=c([l.subclass("esri.geometry.Geometry")],b)}(l.declared(e))})},"esri/core/JSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./declare ./accessorSupport/decorators ./accessorSupport/read ./accessorSupport/write".split(" "),
function(b,a,f,c,e,l,h,d,k){function m(a,c){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");var b=new this;b.read(a,c);return b}var g=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}f(b,a);b.prototype.read=function(a,c){d.default(this,a,c);return this};b.prototype.write=function(a,c){return k.default(this,a||{},c)};b.prototype.toJSON=function(a){return this.write(null,a)};b.fromJSON=function(a,c){return m.call(this,a,c)};return b=c([h.subclass("esri.core.JSONSupport")],
b)}(h.declared(e));g.prototype.toJSON.isDefaultToJSON=!0;l.after(function(a){l.hasMixin(a,g)&&(a.fromJSON=m.bind(a))});return g})},"esri/core/accessorSupport/read":function(){define("require exports ../tsSupport/assignHelper ./get ./utils ./extensions/serializableProperty".split(" "),function(b,a,f,c,e,l){function h(a,b,g){void 0===g&&(g=d);for(var m=e.getProperties(a),k=m.metadatas,h={},f=0,r=Object.getOwnPropertyNames(b);f<r.length;f++){var z=h,x=k,p=r[f],n=b,A=g,B=l.originSpecificReadPropertyDefinition(x[p],
A);B&&(!B.read||!1!==B.read.enabled&&!B.read.source)&&(z[p]=!0);for(var C=0,F=Object.getOwnPropertyNames(x);C<F.length;C++){var D=F[C],B=l.originSpecificReadPropertyDefinition(x[D],A),H;a:{H=p;var E=n;if(B&&B.read&&!1!==B.read.enabled&&B.read.source)if(B=B.read.source,"string"===typeof B){if(B===H||-1<B.indexOf(".")&&0===B.indexOf(H)&&c.exists(B,E)){H=!0;break a}}else for(var J=0;J<B.length;J++){var ha=B[J];if(ha===H||-1<ha.indexOf(".")&&0===ha.indexOf(H)&&c.exists(ha,E)){H=!0;break a}}H=!1}H&&(z[D]=
!0)}}m.setDefaultOrigin(g.origin);r=0;for(z=Object.getOwnPropertyNames(h);r<z.length;r++)f=z[r],p=(x=l.originSpecificReadPropertyDefinition(k[f],g).read)&&x.source,n=void 0,n=p&&"string"===typeof p?c.valueOf(b,p):b[f],x&&x.reader&&(n=x.reader.call(a,n,b,g)),void 0!==n&&m.set(f,n);b=0;for(k=Object.getOwnPropertyNames(k);b<k.length;b++)f=k[b],h[f]||(r=a,z=m,x=g,p=(p=l.originSpecificReadPropertyDefinition(z.metadatas[f],x))&&p.read&&p.read.default,void 0!==p&&(r="function"===typeof p?p.call(r,f,x):p,
void 0!==r&&z.set(f,r)));m.setDefaultOrigin("user")}Object.defineProperty(a,"__esModule",{value:!0});var d={origin:"service"};a.read=h;a.readLoadable=function(a,c,b,e){void 0===e&&(e=d);c=f({},e,{messages:[]});b(c);c.messages.forEach(function(c){"warning"!==c.type||a.loaded?e&&e.messages.push(c):a.loadWarnings.push(c)})};a.default=h})},"esri/core/accessorSupport/write":function(){define("require exports ../Error ../Logger ./PropertyOrigin ./utils ./extensions/serializableProperty".split(" "),function(b,
a,f,c,e,l,h){function d(a,c,b,d,k,h){if(!d||!d.write)return!1;var g=a.get(b);if(void 0===g)return!1;if(!k&&d.write.overridePolicy){var t=d.write.overridePolicy.call(a,g,b,h);void 0!==t&&(k=t)}k||(k=d.write);if(!k||!1===k.enabled)return!1;if(null===g){if(k.allowNull)return!0;k.isRequired&&((a=new f("web-document-write:property-required","Missing value for required property '"+b+"' on '"+a.declaredClass+"'",{propertyName:b,target:a}),h)&&h.messages?h.messages.push(a):a&&!h&&m.error(a.name,a.message));
return!1}return!k.ignoreOrigin&&h&&h.origin&&c.store.originOf(b)<e.nameToId(h.origin)?!1:!0}function k(a,c,b){if(a&&"function"===typeof a.toJSON&&(!a.toJSON.isDefaultToJSON||!a.write))return l.merge(c,a.toJSON());var g=l.getProperties(a),m=g.metadatas,k;for(k in m){var f=h.originSpecificWritePropertyDefinition(m[k],b);if(d(a,g,k,f,null,b)){var t=a.get(k),p={};f.write.writer.call(a,t,p,"string"===typeof f.write.target?f.write.target:k,b);f=p;0<Object.keys(f).length&&(c=l.merge(c,f),b&&b.writtenProperties&&
b.writtenProperties.push({target:a,propName:k,oldOrigin:e.idToReadableName(g.store.originOf(k)),newOrigin:b.origin}))}}return c}Object.defineProperty(a,"__esModule",{value:!0});var m=c.getLogger("esri.core.accessorSupport.write");a.willPropertyWrite=function(a,c,b,e){var g=l.getProperties(a),m=h.originSpecificWritePropertyDefinition(g.metadatas[c],e);return m?d(a,g,c,m,b,e):!1};a.write=k;a.default=k})},"esri/geometry/SpatialReference":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/spatialReferenceUtils".split(" "),
function(b,a,f,c,e,l,h,d){b=function(a){function b(c){c=a.call(this)||this;c.latestWkid=null;c.wkid=null;c.wkt=null;return c}f(b,a);g=b;b.fromJSON=function(a){if(!a)return null;if(a.wkid){if(102100===a.wkid)return g.WebMercator;if(4326===a.wkid)return g.WGS84}var c=new g;c.read(a);return c};b.prototype.normalizeCtorArgs=function(a){return a&&"object"===typeof a?a:(c={},c["string"===typeof a?"wkt":"wkid"]=a,c);var c};Object.defineProperty(b.prototype,"isWGS84",{get:function(){return d.isWGS84(this)},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isWebMercator",{get:function(){return d.isWebMercator(this)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isGeographic",{get:function(){return d.isGeographic(this)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isWrappable",{get:function(){return d.isWrappable(this)},enumerable:!0,configurable:!0});b.prototype.writeWkt=function(a,c){this.wkid||(c.wkt=a)};b.prototype.clone=function(){if(this===
g.WGS84)return g.WGS84;if(this===g.WebMercator)return g.WebMercator;var a=new g;null!=this.wkid?(a.wkid=this.wkid,null!=this.latestWkid&&(a.latestWkid=this.latestWkid),null!=this.vcsWkid&&(a.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(a.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(a.wkt=this.wkt);return a};b.prototype.equals=function(a){return d.equals(this,a)};b.prototype.toJSON=function(a){return this.write(null,a)};b.GCS_NAD_1927=null;b.WGS84=null;b.WebMercator=null;c([h.property({dependsOn:["wkid"],
readOnly:!0})],b.prototype,"isWGS84",null);c([h.property({dependsOn:["wkid"],readOnly:!0})],b.prototype,"isWebMercator",null);c([h.property({dependsOn:["wkid","wkt"],readOnly:!0})],b.prototype,"isGeographic",null);c([h.property({dependsOn:["wkid"],readOnly:!0})],b.prototype,"isWrappable",null);c([h.property({type:Number,json:{write:!0}})],b.prototype,"latestWkid",void 0);c([h.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkt?
!0:!1}}}}}}})],b.prototype,"wkid",void 0);c([h.property({type:String,json:{origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkid?!0:!1}}}}}}})],b.prototype,"wkt",void 0);c([h.writer("wkt"),h.writer("web-scene","wkt")],b.prototype,"writeWkt",null);c([h.property({type:Number,json:{write:!0}})],b.prototype,"vcsWkid",void 0);c([h.property({type:Number,json:{write:!0}})],b.prototype,"latestVcsWkid",void 0);return b=g=c([h.subclass("esri.geometry.SpatialReference")],
b);var g}(h.declared(e));b.prototype.toJSON.isDefaultToJSON=!0;b.GCS_NAD_1927=new b({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'});b.WGS84=new b(4326);b.WGS84.wkt=l.substitute({Central_Meridian:"0.0"},d.getInfo(b.WGS84).wkTemplate);b.WebMercator=new b({wkid:102100,latestWkid:3857});Object.freeze&&(Object.freeze(b.GCS_NAD_1927),Object.freeze(b.WGS84),Object.freeze(b.WebMercator));
return b})},"esri/geometry/support/spatialReferenceUtils":function(){define(["require","exports","./WKIDUnitConversion"],function(b,a,f){function c(a){return a.wkid&&!0===e[a.wkid]}Object.defineProperty(a,"__esModule",{value:!0});var e={102113:!0,102100:!0,3857:!0,3785:!0},l={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};b=[-2.0037508342788905E7,2.0037508342788905E7];var h=[-2.0037508342787E7,2.0037508342787E7],d={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:b,origin:h,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:b,origin:h,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:b,origin:h,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:b,origin:h,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}};a.equals=function(a,b){if(b){if(a===b)return!0;if(null!=a.wkid||null!=b.wkid)return a.wkid===b.wkid||c(a)&&c(b)||null!=b.latestWkid&&a.wkid===b.latestWkid||null!=a.latestWkid&&b.wkid===a.latestWkid;if(a.wkt&&b.wkt)return a.wkt.toUpperCase()===b.wkt.toUpperCase()}return!1};a.getInfo=function(a){return a.wkid?d[a.wkid]:null};a.isGeographic=function(a){return a.wkid?null==f[a.wkid]:a.wkt?!!/^\s*GEOGCS/i.test(a.wkt):!1};a.isWGS84=function(a){return 4326===
a.wkid};a.isWebMercator=c;a.isWrappable=function(a){return a.wkid&&!0===l[a.wkid]}})},"esri/geometry/support/WKIDUnitConversion":function(){define([],function(){var b,a={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8058:0,8059:0,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,
8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,
26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53034:0,53048:0,53049:0,
54034:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,
103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,
103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,
103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,
103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103695:2};for(b=2E3;2045>=b;b++)a[b]=0;for(b=2056;2065>=b;b++)a[b]=0;for(b=2067;2135>=b;b++)a[b]=0;for(b=2137;2154>=b;b++)a[b]=0;for(b=2161;2170>=b;b++)a[b]=0;for(b=2172;2193>=b;b++)a[b]=0;for(b=2195;2198>=b;b++)a[b]=0;for(b=2200;2203>=b;b++)a[b]=0;for(b=2205;2217>=b;b++)a[b]=0;for(b=2222;2224>=b;b++)a[b]=1;for(b=2225;2250>=b;b++)a[b]=2;
for(b=2251;2253>=b;b++)a[b]=1;for(b=2257;2264>=b;b++)a[b]=2;for(b=2274;2279>=b;b++)a[b]=2;for(b=2280;2282>=b;b++)a[b]=1;for(b=2283;2289>=b;b++)a[b]=2;for(b=2290;2292>=b;b++)a[b]=0;for(b=2308;2313>=b;b++)a[b]=0;for(b=2315;2491>=b;b++)a[b]=0;for(b=2494;2866>=b;b++)a[b]=0;for(b=2867;2869>=b;b++)a[b]=1;for(b=2870;2888>=b;b++)a[b]=2;for(b=2891;2895>=b;b++)a[b]=2;for(b=2896;2898>=b;b++)a[b]=1;for(b=2902;2908>=b;b++)a[b]=2;for(b=2915;2920>=b;b++)a[b]=2;for(b=2921;2923>=b;b++)a[b]=1;for(b=2924;2930>=b;b++)a[b]=
2;for(b=2931;2962>=b;b++)a[b]=0;for(b=2964;2968>=b;b++)a[b]=2;for(b=2969;2973>=b;b++)a[b]=0;for(b=2975;2991>=b;b++)a[b]=0;for(b=2995;3051>=b;b++)a[b]=0;for(b=3054;3079>=b;b++)a[b]=0;for(b=3081;3088>=b;b++)a[b]=0;for(b=3092;3101>=b;b++)a[b]=0;for(b=3106;3138>=b;b++)a[b]=0;for(b=3146;3151>=b;b++)a[b]=0;for(b=3153;3166>=b;b++)a[b]=0;for(b=3168;3172>=b;b++)a[b]=0;for(b=3174;3203>=b;b++)a[b]=0;for(b=3294;3358>=b;b++)a[b]=0;for(b=3367;3403>=b;b++)a[b]=0;for(b=3408;3416>=b;b++)a[b]=0;for(b=3417;3438>=b;b++)a[b]=
2;for(b=3441;3446>=b;b++)a[b]=2;for(b=3447;3450>=b;b++)a[b]=0;for(b=3451;3459>=b;b++)a[b]=2;for(b=3460;3478>=b;b++)a[b]=0;for(b=3554;3559>=b;b++)a[b]=0;for(b=3560;3570>=b;b++)a[b]=2;for(b=3571;3581>=b;b++)a[b]=0;for(b=3594;3597>=b;b++)a[b]=0;for(b=3601;3604>=b;b++)a[b]=0;for(b=3637;3639>=b;b++)a[b]=0;for(b=3665;3667>=b;b++)a[b]=0;for(b=3693;3695>=b;b++)a[b]=0;for(b=3701;3727>=b;b++)a[b]=0;for(b=3728;3739>=b;b++)a[b]=2;for(b=3740;3751>=b;b++)a[b]=0;for(b=3753;3760>=b;b++)a[b]=2;for(b=3761;3773>=b;b++)a[b]=
0;for(b=3775;3777>=b;b++)a[b]=0;for(b=3779;3781>=b;b++)a[b]=0;for(b=3783;3785>=b;b++)a[b]=0;for(b=3788;3791>=b;b++)a[b]=0;for(b=3797;3802>=b;b++)a[b]=0;for(b=3814;3816>=b;b++)a[b]=0;for(b=3825;3829>=b;b++)a[b]=0;for(b=3832;3841>=b;b++)a[b]=0;for(b=3844;3852>=b;b++)a[b]=0;for(b=3873;3885>=b;b++)a[b]=0;for(b=3890;3893>=b;b++)a[b]=0;for(b=3907;3912>=b;b++)a[b]=0;for(b=3942;3950>=b;b++)a[b]=0;for(b=3968;3970>=b;b++)a[b]=0;for(b=3973;3976>=b;b++)a[b]=0;for(b=3986;3989>=b;b++)a[b]=0;for(b=3994;3997>=b;b++)a[b]=
0;for(b=4048;4051>=b;b++)a[b]=0;for(b=4056;4063>=b;b++)a[b]=0;for(b=4093;4096>=b;b++)a[b]=0;for(b=4390;4398>=b;b++)a[b]=0;for(b=4399;4413>=b;b++)a[b]=2;for(b=4418;4433>=b;b++)a[b]=2;for(b=4455;4457>=b;b++)a[b]=2;for(b=4484;4489>=b;b++)a[b]=0;for(b=4491;4554>=b;b++)a[b]=0;for(b=4568;4589>=b;b++)a[b]=0;for(b=4652;4656>=b;b++)a[b]=0;for(b=4766;4800>=b;b++)a[b]=0;for(b=5014;5016>=b;b++)a[b]=0;for(b=5069;5072>=b;b++)a[b]=0;for(b=5105;5130>=b;b++)a[b]=0;for(b=5173;5188>=b;b++)a[b]=0;for(b=5253;5259>=b;b++)a[b]=
0;for(b=5269;5275>=b;b++)a[b]=0;for(b=5292;5311>=b;b++)a[b]=0;for(b=5329;5331>=b;b++)a[b]=0;for(b=5343;5349>=b;b++)a[b]=0;for(b=5355;5357>=b;b++)a[b]=0;for(b=5387;5389>=b;b++)a[b]=0;for(b=5459;5463>=b;b++)a[b]=0;for(b=5479;5482>=b;b++)a[b]=0;for(b=5518;5520>=b;b++)a[b]=0;for(b=5530;5539>=b;b++)a[b]=0;for(b=5550;5552>=b;b++)a[b]=0;for(b=5562;5583>=b;b++)a[b]=0;for(b=5623;5625>=b;b++)a[b]=2;for(b=5631;5639>=b;b++)a[b]=0;for(b=5649;5653>=b;b++)a[b]=0;for(b=5663;5680>=b;b++)a[b]=0;for(b=5682;5685>=b;b++)a[b]=
0;for(b=5875;5877>=b;b++)a[b]=0;for(b=5921;5940>=b;b++)a[b]=0;for(b=6050;6125>=b;b++)a[b]=0;for(b=6244;6275>=b;b++)a[b]=0;for(b=6328;6348>=b;b++)a[b]=0;for(b=6350;6356>=b;b++)a[b]=0;for(b=6366;6372>=b;b++)a[b]=0;for(b=6381;6387>=b;b++)a[b]=0;for(b=6393;6404>=b;b++)a[b]=0;for(b=6480;6483>=b;b++)a[b]=0;for(b=6511;6514>=b;b++)a[b]=0;for(b=6579;6581>=b;b++)a[b]=0;for(b=6619;6624>=b;b++)a[b]=0;for(b=6625;6627>=b;b++)a[b]=2;for(b=6628;6632>=b;b++)a[b]=0;for(b=6634;6637>=b;b++)a[b]=0;for(b=6669;6692>=b;b++)a[b]=
0;for(b=6707;6709>=b;b++)a[b]=0;for(b=6720;6723>=b;b++)a[b]=0;for(b=6732;6738>=b;b++)a[b]=0;for(b=6931;6933>=b;b++)a[b]=0;for(b=6956;6959>=b;b++)a[b]=0;for(b=7005;7007>=b;b++)a[b]=0;for(b=7057;7070>=b;b++)a[b]=2;for(b=7074;7082>=b;b++)a[b]=0;for(b=7109;7118>=b;b++)a[b]=0;for(b=7119;7127>=b;b++)a[b]=1;for(b=7374;7376>=b;b++)a[b]=0;for(b=7528;7586>=b;b++)a[b]=0;for(b=7587;7645>=b;b++)a[b]=2;for(b=7755;7787>=b;b++)a[b]=0;for(b=7791;7795>=b;b++)a[b]=0;for(b=7799;7801>=b;b++)a[b]=0;for(b=7803;7805>=b;b++)a[b]=
0;for(b=7825;7831>=b;b++)a[b]=0;for(b=7845;7859>=b;b++)a[b]=0;for(b=8013;8032>=b;b++)a[b]=0;for(b=20002;20032>=b;b++)a[b]=0;for(b=20062;20092>=b;b++)a[b]=0;for(b=20135;20138>=b;b++)a[b]=0;for(b=20248;20258>=b;b++)a[b]=0;for(b=20348;20358>=b;b++)a[b]=0;for(b=20436;20440>=b;b++)a[b]=0;for(b=20822;20824>=b;b++)a[b]=0;for(b=20934;20936>=b;b++)a[b]=0;for(b=21035;21037>=b;b++)a[b]=0;for(b=21095;21097>=b;b++)a[b]=0;for(b=21148;21150>=b;b++)a[b]=0;for(b=21413;21423>=b;b++)a[b]=0;for(b=21473;21483>=b;b++)a[b]=
0;for(b=21780;21782>=b;b++)a[b]=0;for(b=21891;21894>=b;b++)a[b]=0;for(b=21896;21899>=b;b++)a[b]=0;for(b=22171;22177>=b;b++)a[b]=0;for(b=22181;22187>=b;b++)a[b]=0;for(b=22191;22197>=b;b++)a[b]=0;for(b=22234;22236>=b;b++)a[b]=0;for(b=22521;22525>=b;b++)a[b]=0;for(b=22991;22994>=b;b++)a[b]=0;for(b=23028;23038>=b;b++)a[b]=0;for(b=23830;23853>=b;b++)a[b]=0;for(b=23866;23872>=b;b++)a[b]=0;for(b=23877;23884>=b;b++)a[b]=0;for(b=23886;23894>=b;b++)a[b]=0;for(b=23946;23948>=b;b++)a[b]=0;for(b=24311;24313>=
b;b++)a[b]=0;for(b=24342;24347>=b;b++)a[b]=0;for(b=24370;24374>=b;b++)a[b]=10;for(b=24375;24381>=b;b++)a[b]=0;for(b=24718;24721>=b;b++)a[b]=0;for(b=24817;24821>=b;b++)a[b]=0;for(b=24877;24882>=b;b++)a[b]=0;for(b=24891;24893>=b;b++)a[b]=0;for(b=25391;25395>=b;b++)a[b]=0;for(b=25828;25838>=b;b++)a[b]=0;for(b=26191;26195>=b;b++)a[b]=0;for(b=26391;26393>=b;b++)a[b]=0;for(b=26701;26722>=b;b++)a[b]=0;for(b=26729;26799>=b;b++)a[b]=2;for(b=26801;26803>=b;b++)a[b]=2;for(b=26811;26813>=b;b++)a[b]=2;for(b=26847;26870>=
b;b++)a[b]=2;for(b=26891;26899>=b;b++)a[b]=0;for(b=26901;26923>=b;b++)a[b]=0;for(b=26929;26946>=b;b++)a[b]=0;for(b=26948;26998>=b;b++)a[b]=0;for(b=27037;27040>=b;b++)a[b]=0;for(b=27205;27232>=b;b++)a[b]=0;for(b=27258;27260>=b;b++)a[b]=0;for(b=27391;27398>=b;b++)a[b]=0;for(b=27561;27564>=b;b++)a[b]=0;for(b=27571;27574>=b;b++)a[b]=0;for(b=27581;27584>=b;b++)a[b]=0;for(b=27591;27594>=b;b++)a[b]=0;for(b=28191;28193>=b;b++)a[b]=0;for(b=28348;28358>=b;b++)a[b]=0;for(b=28402;28432>=b;b++)a[b]=0;for(b=28462;28492>=
b;b++)a[b]=0;for(b=29118;29122>=b;b++)a[b]=0;for(b=29168;29172>=b;b++)a[b]=0;for(b=29177;29185>=b;b++)a[b]=0;for(b=29187;29195>=b;b++)a[b]=0;for(b=29900;29903>=b;b++)a[b]=0;for(b=30161;30179>=b;b++)a[b]=0;for(b=30491;30494>=b;b++)a[b]=0;for(b=30729;30732>=b;b++)a[b]=0;for(b=31251;31259>=b;b++)a[b]=0;for(b=31265;31268>=b;b++)a[b]=0;for(b=31275;31279>=b;b++)a[b]=0;for(b=31281;31297>=b;b++)a[b]=0;for(b=31461;31469>=b;b++)a[b]=0;for(b=31491;31495>=b;b++)a[b]=0;for(b=31917;31922>=b;b++)a[b]=0;for(b=31965;32E3>=
b;b++)a[b]=0;for(b=32001;32003>=b;b++)a[b]=2;for(b=32005;32031>=b;b++)a[b]=2;for(b=32033;32060>=b;b++)a[b]=2;for(b=32064;32067>=b;b++)a[b]=2;for(b=32074;32077>=b;b++)a[b]=2;for(b=32081;32086>=b;b++)a[b]=0;for(b=32107;32130>=b;b++)a[b]=0;for(b=32133;32158>=b;b++)a[b]=0;for(b=32164;32167>=b;b++)a[b]=2;for(b=32180;32199>=b;b++)a[b]=0;for(b=32201;32260>=b;b++)a[b]=0;for(b=32301;32360>=b;b++)a[b]=0;for(b=32601;32662>=b;b++)a[b]=0;for(b=32664;32667>=b;b++)a[b]=2;for(b=32701;32761>=b;b++)a[b]=0;for(b=53001;53004>=
b;b++)a[b]=0;for(b=53008;53019>=b;b++)a[b]=0;for(b=53021;53032>=b;b++)a[b]=0;for(b=53042;53046>=b;b++)a[b]=0;for(b=53074;53080>=b;b++)a[b]=0;for(b=54001;54004>=b;b++)a[b]=0;for(b=54008;54019>=b;b++)a[b]=0;for(b=54021;54032>=b;b++)a[b]=0;for(b=54042;54046>=b;b++)a[b]=0;for(b=54048;54053>=b;b++)a[b]=0;for(b=54074;54080>=b;b++)a[b]=0;for(b=102001;102040>=b;b++)a[b]=0;for(b=102042;102063>=b;b++)a[b]=0;for(b=102065;102067>=b;b++)a[b]=0;for(b=102070;102117>=b;b++)a[b]=0;for(b=102122;102216>=b;b++)a[b]=
0;for(b=102221;102377>=b;b++)a[b]=0;for(b=102382;102388>=b;b++)a[b]=0;for(b=102389;102398>=b;b++)a[b]=2;for(b=102399;102444>=b;b++)a[b]=0;for(b=102445;102447>=b;b++)a[b]=2;for(b=102448;102458>=b;b++)a[b]=0;for(b=102459;102468>=b;b++)a[b]=2;for(b=102469;102496>=b;b++)a[b]=0;for(b=102500;102519>=b;b++)a[b]=1;for(b=102520;102524>=b;b++)a[b]=0;for(b=102525;102529>=b;b++)a[b]=2;for(b=102530;102568>=b;b++)a[b]=0;for(b=102570;102588>=b;b++)a[b]=0;for(b=102590;102598>=b;b++)a[b]=0;for(b=102601;102603>=b;b++)a[b]=
0;for(b=102605;102628>=b;b++)a[b]=0;for(b=102629;102646>=b;b++)a[b]=2;for(b=102648;102700>=b;b++)a[b]=2;for(b=102701;102703>=b;b++)a[b]=0;for(b=102707;102730>=b;b++)a[b]=2;for(b=102733;102758>=b;b++)a[b]=2;for(b=102767;102900>=b;b++)a[b]=0;for(b=102965;102969>=b;b++)a[b]=0;for(b=102971;102973>=b;b++)a[b]=0;for(b=102975;102989>=b;b++)a[b]=0;for(b=102990;102992>=b;b++)a[b]=1;for(b=102997;103002>=b;b++)a[b]=0;for(b=103003;103008>=b;b++)a[b]=2;for(b=103009;103011>=b;b++)a[b]=0;for(b=103012;103014>=b;b++)a[b]=
2;for(b=103019;103021>=b;b++)a[b]=0;for(b=103022;103024>=b;b++)a[b]=2;for(b=103029;103031>=b;b++)a[b]=0;for(b=103032;103034>=b;b++)a[b]=2;for(b=103065;103068>=b;b++)a[b]=0;for(b=103074;103076>=b;b++)a[b]=0;for(b=103077;103079>=b;b++)a[b]=1;for(b=103080;103082>=b;b++)a[b]=0;for(b=103083;103085>=b;b++)a[b]=2;for(b=103090;103093>=b;b++)a[b]=0;for(b=103097;103099>=b;b++)a[b]=0;for(b=103100;103102>=b;b++)a[b]=2;for(b=103107;103109>=b;b++)a[b]=0;for(b=103110;103112>=b;b++)a[b]=2;for(b=103113;103116>=b;b++)a[b]=
0;for(b=103117;103120>=b;b++)a[b]=2;for(b=103153;103157>=b;b++)a[b]=0;for(b=103158;103162>=b;b++)a[b]=2;for(b=103163;103165>=b;b++)a[b]=0;for(b=103166;103168>=b;b++)a[b]=1;for(b=103169;103171>=b;b++)a[b]=2;for(b=103186;103188>=b;b++)a[b]=0;for(b=103189;103191>=b;b++)a[b]=2;for(b=103192;103195>=b;b++)a[b]=0;for(b=103196;103199>=b;b++)a[b]=2;for(b=103200;103224>=b;b++)a[b]=0;for(b=103225;103227>=b;b++)a[b]=1;for(b=103232;103237>=b;b++)a[b]=0;for(b=103238;103243>=b;b++)a[b]=2;for(b=103244;103246>=b;b++)a[b]=
0;for(b=103247;103249>=b;b++)a[b]=2;for(b=103254;103256>=b;b++)a[b]=0;for(b=103257;103259>=b;b++)a[b]=2;for(b=103264;103266>=b;b++)a[b]=0;for(b=103267;103269>=b;b++)a[b]=2;for(b=103300;103375>=b;b++)a[b]=0;for(b=103381;103383>=b;b++)a[b]=0;for(b=103384;103386>=b;b++)a[b]=1;for(b=103387;103389>=b;b++)a[b]=0;for(b=103390;103392>=b;b++)a[b]=2;for(b=103397;103399>=b;b++)a[b]=0;for(b=103400;103471>=b;b++)a[b]=2;for(b=103476;103478>=b;b++)a[b]=0;for(b=103479;103481>=b;b++)a[b]=2;for(b=103486;103488>=b;b++)a[b]=
0;for(b=103489;103491>=b;b++)a[b]=2;for(b=103492;103495>=b;b++)a[b]=0;for(b=103496;103499>=b;b++)a[b]=2;for(b=103528;103543>=b;b++)a[b]=0;for(b=103544;103548>=b;b++)a[b]=2;for(b=103549;103551>=b;b++)a[b]=0;for(b=103552;103554>=b;b++)a[b]=1;for(b=103555;103557>=b;b++)a[b]=2;for(b=103558;103560>=b;b++)a[b]=0;for(b=103571;103573>=b;b++)a[b]=0;for(b=103574;103576>=b;b++)a[b]=2;for(b=103577;103580>=b;b++)a[b]=0;for(b=103581;103583>=b;b++)a[b]=2;for(b=103600;103694>=b;b++)a[b]=0;for(b=103700;103793>=b;b++)a[b]=
2;for(b=103794;103871>=b;b++)a[b]=0;for(b=103900;103971>=b;b++)a[b]=2;return a})},"esri/geometry/Point":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Logger ../core/accessorSupport/decorators ./Geometry ./SpatialReference ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),function(b,a,f,c,e,l,h,d,k,m){function g(a){return a&&("esri.geometry.SpatialReference"===a.declaredClass||null!=a.wkid)}var t=[0,0],v=e.getLogger("esri.geometry.Point");
b=function(a){function b(c,b,p,n,d){c=a.call(this)||this;c.x=0;c.y=0;c.z=void 0;c.m=void 0;c.type="point";return c}f(b,a);e=b;b.copy=function(a,c){c.x=a.x;c.y=a.y;c.z=a.z;c.m=a.m;c.spatialReference=Object.isFrozen(a.spatialReference)?a.spatialReference:a.spatialReference.clone()};b.distance=function(a,c){var b=a.x-c.x,n=a.y-c.y;a=a.hasZ&&c.hasZ?a.z-c.z:0;return Math.sqrt(b*b+n*n+a*a)};b.prototype.normalizeCtorArgs=function(a,c,b,n,e){var p;if(Array.isArray(a))p=a,e=c,a=p[0],c=p[1],b=p[2],n=p[3];else if(a&&
"object"===typeof a){if(p=a,a=null!=p.x?p.x:p.longitude,c=null!=p.y?p.y:p.latitude,b=null!=p.z?p.z:p.altitude,n=p.m,(e=p.spatialReference)&&"esri.geometry.SpatialReference"!==e.declaredClass&&(e=new d(e)),null!=p.longitude||null!=p.latitude)null==p.longitude?v.warn(".longitude\x3d","Latitude was defined without longitude"):null==p.latitude?v.warn(".latitude\x3d","Longitude was defined without latitude"):!p.declaredClass&&e&&e.isWebMercator&&(c=m.lngLatToXY(p.longitude,p.latitude,t),a=c[0],c=c[1])}else g(b)?
(e=b,b=null):g(n)&&(e=n,n=null);a={x:a,y:c};null!=e&&(a.spatialReference=e);null!=b&&(a.z=b);null!=n&&(a.m=n);return a};Object.defineProperty(b.prototype,"hasM",{get:function(){return void 0!==this.m},set:function(a){var c=this._get("hasM");a!==c&&(this._set("m",a?0:void 0),this._set("hasM",a))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hasZ",{get:function(){return void 0!==this.z},set:function(a){var c=this._get("hasZ");a!==c&&(this._set("z",a?0:void 0),this._set("hasZ",
a))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"latitude",{get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return m.xyToLngLat(this.x,this.y,t)[1];if(a.isWGS84)return this._get("y")}return null},set:function(a){var c=this._get("spatialReference");c&&(c.isWebMercator?this._set("y",m.lngLatToXY(this.x,a,t)[1]):c.isWGS84&&this._set("y",a),this._set("latitude",a))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"longitude",{get:function(){var a=
this._get("spatialReference");if(a){if(a.isWebMercator)return m.xyToLngLat(this._get("x"),this._get("y"),t)[0];if(a.isWGS84)return this._get("x")}return null},set:function(a){var c=this._get("spatialReference");c&&(c.isWebMercator?this._set("x",m.lngLatToXY(a,this._get("y"),t)[0]):c.isWGS84&&this._set("x",a),this._set("longitude",a))},enumerable:!0,configurable:!0});b.prototype.clone=function(){var a=new e;a.x=this.x;a.y=this.y;a.z=this.z;a.m=this.m;a.spatialReference=this.spatialReference;return a};
b.prototype.copy=function(a){e.copy(a,this);return this};b.prototype.equals=function(a){if(!a)return!1;var c=this.x,b=this.y,n=this.z,d=this.m,g=this.spatialReference,e=a.z,k=a.m,h=a.x,f=a.y;a=a.spatialReference;if(!g.equals(a))if(g.isWebMercator&&a.isWGS84)f=m.lngLatToXY(h,f),h=f[0],f=f[1],a=g;else if(g.isWGS84&&a.isWebMercator)f=m.xyToLngLat(h,f),h=f[0],f=f[1],a=g;else return!1;return c===h&&b===f&&n===e&&d===k&&g.wkid===a.wkid};b.prototype.offset=function(a,c,b){this.x+=a;this.y+=c;null!=b&&this.hasZ&&
(this.z+=b);return this};b.prototype.normalize=function(){if(!this.spatialReference)return this;var a=k.getInfo(this.spatialReference);if(!a)return this;var c=this.x,b=a.valid,a=b[0],n=b[1],b=2*n;c>n?(a=Math.ceil(Math.abs(c-n)/b),c-=a*b):c<a&&(a=Math.ceil(Math.abs(c-a)/b),c+=a*b);this._set("x",c);return this};b.prototype.distance=function(a){return e.distance(this,a)};b.prototype.toArray=function(){var a=this.hasZ,c=this.hasM;return a&&c?[this.x,this.y,this.z,this.m]:a?[this.x,this.y,this.z]:c?[this.x,
this.y,this.m]:[this.x,this.y]};b.prototype.toJSON=function(a){return this.write(null,a)};c([l.property({dependsOn:["x","y","z","m","spatialReference"]})],b.prototype,"cache",void 0);c([l.property({type:Boolean,dependsOn:["m"],json:{write:{enabled:!1,overridePolicy:null}}})],b.prototype,"hasM",null);c([l.property({type:Boolean,dependsOn:["z"],json:{write:{enabled:!1,overridePolicy:null}}})],b.prototype,"hasZ",null);c([l.property({type:Number,dependsOn:["y"]})],b.prototype,"latitude",null);c([l.property({type:Number,
dependsOn:["x"]})],b.prototype,"longitude",null);c([l.property({type:Number,json:{write:{isRequired:!0}}})],b.prototype,"x",void 0);c([l.property({type:Number,json:{write:!0}})],b.prototype,"y",void 0);c([l.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],b.prototype,"z",void 0);c([l.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],b.prototype,"m",void 0);return b=e=c([l.subclass("esri.geometry.Point")],b);var e}(l.declared(h));
b.prototype.toJSON.isDefaultToJSON=!0;return b})},"esri/geometry/support/webMercatorUtils":function(){define(["require","exports","../SpatialReference","./spatialReferenceUtils"],function(b,a,f,c){function e(a,c,b,d,e){if("point"===a.type&&"point"===e.type)c=c(a.x,a.y,k,0,d),e.x=c[0],e.y=c[1];else if("extent"===a.type&&"extent"===e.type)g=c(a.xmin,a.ymin,k,0,d),e.xmin=g[0],e.ymin=g[1],c=c(a.xmax,a.ymax,k,0,d),e.xmax=c[0],e.ymax=c[1];else if("polyline"===a.type&&"polyline"===e.type||"polygon"===a.type&&
"polygon"===e.type){var g="polyline"===a.type?a.paths:a.rings,m=[],h=void 0;for(a=0;a<g.length;a++){var f=g[a],h=[];m.push(h);for(var p=0;p<f.length;p++)h.push(c(f[p][0],f[p][1],[0,0],0,d)),2<f[p].length&&h[p].push(f[p][2]),3<f[p].length&&h[p].push(f[p][3])}"polyline"===e.type?e.paths=m:e.rings=m}else if("multipoint"===a.type&&"multipoint"===e.type){g=a.points;m=[];for(a=0;a<g.length;a++)m[a]=c(g[a][0],g[a][1],[0,0],0,d),2<g[a].length&&m[a].push(g[a][2]),3<g[a].length&&m[a].push(g[a][3]);e.points=
m}else if("mesh"===a.type&&"mesh"===e.type&&(g=a.vertexAttributes&&a.vertexAttributes.position,m=e.vertexAttributes&&e.vertexAttributes.position,g))for(h=[0,0],a=0;a<g.length;a+=3)c(g[a],g[a+1],h,0,d),m[a]=h[0],m[a+1]=h[1];e.spatialReference=b;return e;var g}function l(a,b){a=a&&(null!=a.wkid||null!=a.wkt?a:a.spatialReference);b=b&&(null!=b.wkid||null!=b.wkt?b:b.spatialReference);return a&&b?c.equals(b,a)?!0:c.isWebMercator(b)&&c.isWGS84(a)||c.isWebMercator(a)&&c.isWGS84(b):!1}function h(a,c,b,d){void 0===
b&&(b=[0,0]);void 0===d&&(d=0);89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999);c*=.017453292519943;b[d]=111319.49079327169*a;b[d+1]=3189068.5*Math.log((1+Math.sin(c))/(1-Math.sin(c)));return b}function d(a,c,b,d,e){void 0===b&&(b=[0,0]);void 0===d&&(d=0);void 0===e&&(e=!1);a=a/6378137*57.29577951308232;b[d]=e?a:a-360*Math.floor((a+180)/360);b[d+1]=57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)));return b}Object.defineProperty(a,"__esModule",{value:!0});var k=[0,0];a.canProject=
l;a.project=function(a,b){var g=a&&a.spatialReference;b=b&&(null!=b.wkid||null!=b.wkt?b:b.spatialReference);return l(g,b)?c.equals(g,b)?a.clone():c.isWebMercator(b)?e(a,h,f.WebMercator,!1,a.clone()):c.isWGS84(b)?e(a,d,f.WGS84,!1,a.clone()):null:null};a.lngLatToXY=h;a.xyToLngLat=d;a.geographicToWebMercator=function(a,c,b){void 0===c&&(c=!1);void 0===b&&(b=a.clone());return e(a,h,f.WebMercator,c,b)};a.webMercatorToGeographic=function(a,c,b){void 0===c&&(c=!1);void 0===b&&(b=a.clone());return e(a,d,
f.WGS84,c,b)}})},"esri/geometry/support/contains":function(){define(["require","exports"],function(b,a){function f(a,c,b,e){return c>=a.xmin&&c<=a.xmax&&b>=a.ymin&&b<=a.ymax?null!=e&&a.hasZ?e>=a.zmin&&e<=a.zmax:!0:!1}function c(a,c){if(a=a.rings)if(Array.isArray(a[0][0])){for(var b=!1,k=0,m=a.length;k<m;k++)b=e(b,a[k],c);c=b}else c=e(!1,a,c);else c=!1;return c}function e(a,c,b){var d=b[0];b=b[1];for(var e=0,g=0,h=c.length;g<h;g++){e++;e===h&&(e=0);var f=c[g],l=f[0],f=f[1],y=c[e],r=y[0],y=y[1];(f<
b&&y>=b||y<b&&f>=b)&&l+(b-f)/(y-f)*(r-l)<d&&(a=!a)}return a}Object.defineProperty(a,"__esModule",{value:!0});a.extentContainsPoint=function(a,c){return f(a,c.x,c.y,c.z)};a.extentContainsExtent=function(a,c){var b=c.xmin,e=c.ymin,m=c.zmin,g=c.xmax,h=c.ymax,l=c.zmax;return a.hasZ&&c.hasZ?f(a,b,e,m)&&f(a,b,h,m)&&f(a,g,h,m)&&f(a,g,e,m)&&f(a,b,e,l)&&f(a,b,h,l)&&f(a,g,h,l)&&f(a,g,e,l):f(a,b,e)&&f(a,b,h)&&f(a,g,h)&&f(a,g,e)};a.extentContainsCoords2D=function(a,c){return f(a,c[0],c[1])};a.extentContainsCoords3D=
function(a,c){return f(a,c[0],c[1],c[2])};a.polygonContainsPoint=function(a,b){return c(a,[b.x,b.y])};a.polygonContainsCoords=c})},"esri/geometry/support/intersects":function(){define(["require","exports","./contains"],function(b,a,f){function c(a,c){return f.extentContainsPoint(a,c)}function e(a,c){var b=a.hasZ&&c.hasZ,p;if(a.xmin<=c.xmin){if(p=c.xmin,a.xmax<p)return!1}else if(p=a.xmin,c.xmax<p)return!1;if(a.ymin<=c.ymin){if(p=c.ymin,a.ymax<p)return!1}else if(p=a.ymin,c.ymax<p)return!1;if(b&&c.hasZ)if(a.zmin<=
c.zmin){if(b=c.zmin,a.zmax<b)return!1}else if(b=a.zmin,c.zmax<b)return!1;return!0}function l(a,c){var b=c.hasZ?f.extentContainsCoords3D:f.extentContainsCoords2D,p=0;for(c=c.points;p<c.length;p++)if(b(a,c[p]))return!0;return!1}function h(a,c){g[0]=a.xmin;g[1]=a.ymax;t[0]=a.xmax;t[1]=a.ymax;v[0]=a.xmin;v[1]=a.ymin;w[0]=a.xmax;w[1]=a.ymin;for(var b=0,p=y;b<p.length;b++)if(f.polygonContainsCoords(c,p[b]))return!0;b=0;for(c=c.rings;b<c.length;b++)if(p=c[b],p.length){var d=p[0];if(f.extentContainsCoords2D(a,
d))return!0;for(var e=1;e<p.length;e++){var m=p[e];if(f.extentContainsCoords2D(a,m)||k(d,m,r))return!0;d=m}}return!1}function d(a,c){g[0]=a.xmin;g[1]=a.ymax;t[0]=a.xmax;t[1]=a.ymax;v[0]=a.xmin;v[1]=a.ymin;w[0]=a.xmax;w[1]=a.ymin;c=c.paths;for(var b=0;b<c.length;b++){var p=c[b];if(c.length){var d=p[0];if(f.extentContainsCoords2D(a,d))return!0;for(var e=1;e<p.length;e++){var m=p[e];if(f.extentContainsCoords2D(a,m)||k(d,m,r))return!0;d=m}}}return!1}function k(a,c,b){for(var n=0;n<b.length;n++)if(m(a,
c,b[n][0],b[n][1]))return!0;return!1}function m(a,c,b,d,e){var n=a[0];a=a[1];var p=c[0];c=c[1];var g=b[0],A=b[1];b=d[0]-g;var g=n-g,m=p-n;d=d[1]-A;var A=a-A,k=c-a,h=d*m-b*k;if(0===h)return!1;b=(b*A-d*g)/h;g=(m*A-k*g)/h;return 0<=b&&1>=b&&0<=g&&1>=g?(e&&(e[0]=n+b*(p-n),e[1]=a+b*(c-a)),!0):!1}Object.defineProperty(a,"__esModule",{value:!0});a.extentIntersectsPoint=c;a.extentIntersectsExtent=e;a.extentIntersectsMultipoint=l;var g=[0,0],t=[0,0],v=[0,0],w=[0,0],y=[g,t,v,w],r=[[v,g],[g,t],[t,w],[w,v]];
a.extentIntersectsPolygon=h;a.extentIntersectsPolyline=d;var z=[0,0];a.isSelfIntersecting=function(a){for(var c=0;c<a.length;c++){for(var b=a[c],d=0;d<b.length-1;d++)for(var e=b[d],g=b[d+1],k=c+1;k<a.length;k++)for(var h=0;h<a[k].length-1;h++){var f=a[k][h],t=a[k][h+1],l=m(e,g,f,t,z);if(l&&!(z[0]===e[0]&&z[1]===e[1]||z[0]===f[0]&&z[1]===f[1]||z[0]===g[0]&&z[1]===g[1]||z[0]===t[0]&&z[1]===t[1]))return!0}h=b.length;if(!(4>=h))for(d=0;d<h-3;d++){var w=h-1;0===d&&(w=h-2);e=b[d];g=b[d+1];for(k=d+2;k<w;k++)if(f=
b[k],t=b[k+1],(l=m(e,g,f,t,z))&&!(z[0]===e[0]&&z[1]===e[1]||z[0]===f[0]&&z[1]===f[1]||z[0]===g[0]&&z[1]===g[1]||z[0]===t[0]&&z[1]===t[1]))return!0}}return!1};a.segmentIntersects=m;a.getExtentIntersector=function(a){switch(a){case "esriGeometryEnvelope":case "extent":return e;case "esriGeometryMultipoint":case "multipoint":return l;case "esriGeometryPoint":case "point":return c;case "esriGeometryPolygon":case "polygon":return h;case "esriGeometryPolyline":case "polyline":return d;case "mesh":return e}}})},
"esri/geometry/Mesh":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/lang ../core/Logger ../core/accessorSupport/decorators ./Extent ./Geometry ./support/MeshComponent ./support/MeshVertexAttributes ./support/triangulationUtils ./support/meshUtils/centerAt ./support/meshUtils/offset ./support/meshUtils/primitives ./support/meshUtils/rotate".split(" "),function(b,a,f,c,e,l,h,d,k,m,g,t,v,w,y,r,z){var x=
h.getLogger("esri.geometry.Mesh"),p=[1,0,0],n=[0,1,0],A=[0,0,1],B=[0,0,0],C=[0,0,0,0],F=[0,0,0,0],D=[0,0,0,0];return function(a){function b(c){c=a.call(this)||this;c.components=null;c.hasZ=!0;c.hasM=!1;c.vertexAttributes=null;c.type="mesh";return c}f(b,a);m=b;Object.defineProperty(b.prototype,"extent",{get:function(){var a=this.spatialReference,c=this.vertexAttributes&&this.vertexAttributes.position;if(!c||0===c.length||this.components&&0===this.components.length)return new k({xmin:0,ymin:0,zmin:0,
xmax:0,ymax:0,zmax:0,spatialReference:a});a={xmin:Infinity,xmax:-Infinity,ymin:Infinity,ymax:-Infinity,zmin:Infinity,zmax:-Infinity,spatialReference:a};if(!this.components)return new k(this.extendExtent(a,c,null));for(var b=0,n=this.components;b<n.length;b++){var p=n[b];if(p.faces)this.extendExtent(a,c,p.faces);else{this.extendExtent(a,c,null);break}}return new k(a)},enumerable:!0,configurable:!0});b.prototype.addComponent=function(a){this.components||(this.components=[]);this.components.push(a);
this.clearCache()};b.prototype.removeComponent=function(a){if(this.components&&(a=this.components.indexOf(a),-1!==a)){this.components=this.components.splice(a,1);return}x.error("removeComponent()","Provided component is not part of the list of components")};b.prototype.rotate=function(a,c,b,d){z.axisAngleFrom(p,a/180*Math.PI,C);z.axisAngleFrom(n,c/180*Math.PI,F);z.axisAngleFrom(A,b/180*Math.PI,D);z.axisAngleMultiply(C,F,C);z.axisAngleMultiply(C,D,C);z.rotate(this,C,d);return this};b.prototype.offset=
function(a,c,b,n){B[0]=a;B[1]=c;B[2]=b;y.offset(this,B,n);return this};b.prototype.centerAt=function(a,c){w.centerAt(this,a,c);return this};b.prototype.clone=function(){return new m({components:l.clone(this.components),spatialReference:this.spatialReference,vertexAttributes:l.clone(this.vertexAttributes)})};b.prototype.vertexAttributesChanged=function(){this.clearCache()};b.prototype.toJSON=function(a){return this.write({},a)};b.prototype.forEachVertex=function(a,c,b){if(c)for(p=0;p<c.length;p++){var n=
3*c[p];b(a[n+0],a[n+1],a[n+2])}else for(var p=0;p<a.length;p+=3)b(a[p+0],a[p+1],a[p+2])};b.prototype.extendExtent=function(a,c,b){this.forEachVertex(c,b,function(c,b,n){a.xmin=Math.min(a.xmin,c);a.xmax=Math.max(a.xmax,c);a.ymin=Math.min(a.ymin,b);a.ymax=Math.max(a.ymax,b);a.zmin=Math.min(a.zmin,n);a.zmax=Math.max(a.zmax,n)});return a};b.createBox=function(a,c){a=r.convertUnitGeometry(r.createUnitSizeBox(),a,c);if(c&&c.imageFace&&"all"!==c.imageFace){var b=a.components[0],n=b.faces,p=r.boxFaceOrder[c.imageFace],
d=6*p;c=new Uint32Array(6);for(var e=new Uint32Array(n.length-6),A=0,m=0,k=0;k<n.length;k++)k>=d&&k<d+6?c[A++]=n[k]:e[m++]=n[k];n=new Float32Array(a.vertexAttributes.uv);p*=8;d=[0,1,1,1,1,0,0,0];for(k=0;k<d.length;k++)n[p+k]=d[k];a.vertexAttributes.uv=n;a.components=[new g({faces:c,material:b.material}),new g({faces:e})]}return a};b.createSphere=function(a,c){return r.convertUnitGeometry(r.createUnitSizeSphere(c&&c.densificationFactor||0),a,c)};b.createCylinder=function(a,c){return r.convertUnitGeometry(r.createUnitSizeCylinder(c&&
c.densificationFactor||0),a,c)};b.createPlane=function(a,c){return r.convertUnitGeometry(r.createUnitSizePlane(c&&c.facing||"up"),a,c)};b.createFromPolygon=function(a,c){var b=v.triangulate(a);return new m({vertexAttributes:{position:b.position},components:[{faces:b.faces,shading:"flat",material:c&&c.material||null}],spatialReference:a.spatialReference})};c([d.property({dependsOn:["vertexAttributes","vertexAttributes.position","components"],json:{read:!1}})],b.prototype,"cache",void 0);c([d.property({type:[g]})],
b.prototype,"components",void 0);c([d.property({dependsOn:["cache"],readOnly:!0,json:{read:!1}})],b.prototype,"extent",null);c([d.property({readOnly:!0,json:{read:!1,write:!1}})],b.prototype,"hasZ",void 0);c([d.property({readOnly:!0,json:{read:!1,write:!1}})],b.prototype,"hasM",void 0);c([d.property({type:t.MeshVertexAttributes,json:{write:!0}})],b.prototype,"vertexAttributes",void 0);c([e(0,d.cast(g))],b.prototype,"addComponent",null);return b=m=c([d.subclass("esri.geometry.Mesh")],b);var m}(d.declared(m))})},
"esri/core/tsSupport/paramHelper":function(){define([],function(){return function(b,a){return function(f,c){a(f,c,b)}}})},"esri/geometry/support/MeshComponent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators ./MeshMaterial ./MeshVertexAttributes".split(" "),function(b,a,f,c,e,l,h,d,k,m){var g=h.getLogger("esri.geometry.support.MeshComponent");
return function(a){function b(c){c=a.call(this)||this;c.faces=null;c.material=null;c.shading="source";return c}f(b,a);e=b;b.prototype.castFaces=function(a){return m.castArray(a,Uint32Array,[Uint16Array],{loggerTag:".faces\x3d",stride:3},g)};b.prototype.clone=function(){return new e({faces:l.clone(this.faces),shading:this.shading,material:l.clone(this.material)})};c([d.property({json:{write:!0}})],b.prototype,"faces",void 0);c([d.cast("faces")],b.prototype,"castFaces",null);c([d.property({type:k.MeshMaterial,
json:{write:!0}})],b.prototype,"material",void 0);c([d.property({type:String,json:{write:!0}})],b.prototype,"shading",void 0);return b=e=c([d.subclass("esri.geometry.support.MeshComponent")],b);var e}(d.declared(e))})},"esri/geometry/support/MeshMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./ImageMeshColor ./MeshColor ./ValueMeshColor".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t){Object.defineProperty(a,"__esModule",{value:!0});var v={base:g.default,key:"type",defaultKeyValue:"value",typeMap:{value:t,image:m}};b=function(a){function b(c){c=a.call(this)||this;c.color=null;return c}f(b,a);g=b;b.prototype.castColor=function(a){return a?"string"===typeof a?w.test(a)||e.named[a]?new t({value:a}):new m({url:a}):Array.isArray(a)?new t({value:a}):a instanceof HTMLImageElement?new m({url:a.src}):a instanceof HTMLCanvasElement?new m({url:a.toDataURL()}):
k.ensureOneOfType(v,a):a};b.prototype.readColor=function(a,c,b){if(a)switch(a.type){case "image":return new m(a);case "value":return new t(a)}};b.prototype.clone=function(){return new g({color:h.clone(this.color)})};c([d.property({types:v,json:{write:!0}})],b.prototype,"color",void 0);c([d.cast("color")],b.prototype,"castColor",null);c([d.reader("color")],b.prototype,"readColor",null);return b=g=c([d.subclass("esri.geometry.support.MeshResources")],b);var g}(d.declared(l));a.MeshMaterial=b;var w=
/^\s*(#|rgba?\()/;a.default=b})},"esri/Color":function(){define(["./core/declare","./core/accessorSupport/ensureType","dojo/colors"],function(b,a,f){function c(c){return Math.max(0,Math.min(a.ensureInteger(c),255))}var e=b([f],{declaredClass:"esri.Color",toJSON:function(){return[c(this.r),c(this.g),c(this.b),1<this.a?this.a:c(255*this.a)]},clone:function(){return new e(this.toRgba())}});e.toJSON=function(a){return a&&[c(a.r),c(a.g),c(a.b),1<a.a?a.a:c(255*a.a)]};e.fromJSON=function(a){return a&&new e([a[0],
a[1],a[2],a[3]/255])};e.toUnitRGB=function(a){return[a.r/255,a.g/255,a.b/255]};e.toUnitRGBA=function(a){return[a.r/255,a.g/255,a.b/255,null!=a.a?a.a:1]};var l="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(b=0;b<l.length;b++)e[l[b]]=f[l[b]];e.named.rebeccapurple=[102,51,153];return e})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(b,a,f,c){var e={};a.setObject("dojo.colors",e);var l=function(a,c,b){0>b&&++b;1<b&&
--b;var d=6*b;return 1>d?a+(c-a)*d:1>2*b?c:2>3*b?a+(c-a)*(2/3-b)*6:a};b.colorFromRgb=f.fromRgb=function(a,b){var d=a.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(d){a=d[2].split(/\s*,\s*/);var e=a.length,d=d[1];if("rgb"==d&&3==e||"rgba"==d&&4==e)return d=a[0],"%"==d.charAt(d.length-1)?(d=c.map(a,function(a){return 2.56*parseFloat(a)}),4==e&&(d[3]=a[3]),f.fromArray(d,b)):f.fromArray(a,b);if("hsl"==d&&3==e||"hsla"==d&&4==e){var d=(parseFloat(a[0])%360+360)%360/360,k=parseFloat(a[1])/
100,h=parseFloat(a[2])/100,k=.5>=h?h*(k+1):h+k-h*k,h=2*h-k,d=[256*l(h,k,d+1/3),256*l(h,k,d),256*l(h,k,d-1/3),1];4==e&&(d[3]=a[3]);return f.fromArray(d,b)}}return null};var h=function(a,c,b){a=Number(a);return isNaN(a)?b:a<c?c:a>b?b:a};f.prototype.sanitize=function(){this.r=Math.round(h(this.r,0,255));this.g=Math.round(h(this.g,0,255));this.b=Math.round(h(this.b,0,255));this.a=h(this.a,0,1);return this};e.makeGrey=f.makeGrey=function(a,c){return f.fromArray([a,a,a,c])};a.mixin(f.named,{aliceblue:[240,
248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,
0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],
forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,
211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,
250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,
221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,
245,245],yellowgreen:[154,205,50]});return f})},"esri/geometry/support/ImageMeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Identifiable ../../core/accessorSupport/decorators ./MeshColor".split(" "),function(b,a,f,c,e,l,h){return function(a){function b(c){c=a.call(this)||this;c.type="image";c.url=null;return c}f(b,a);d=b;b.prototype.clone=function(){return new d({url:this.url})};c([l.property()],b.prototype,"type",
void 0);c([l.property({type:String,json:{write:{enabled:!0,isRequired:!0}}})],b.prototype,"url",void 0);return b=d=c([l.subclass("esri.geometry.support.ImageMeshColor")],b);var d}(l.declared(h.default,e))})},"esri/core/Identifiable":function(){define(["./declare"],function(b){var a=0;return b(null,{constructor:function(){Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+a++})}})})},"esri/geometry/support/MeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),
function(b,a,f,c,e,l){Object.defineProperty(a,"__esModule",{value:!0});b=function(a){function b(c){return a.call(this)||this}f(b,a);b.prototype.clone=function(){throw Error("not implemented");};c([l.property({readOnly:!0,json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0,enabled:!0}}})],b.prototype,"type",void 0);return b=c([l.subclass("esri.geometry.support.MeshColor")],b)}(l.declared(e));a.MeshColor=b;a.default=b})},"esri/geometry/support/ValueMeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/lang ../../core/accessorSupport/decorators ./MeshColor".split(" "),
function(b,a,f,c,e,l,h,d){return function(a){function b(c){c=a.call(this)||this;c.type="value";c.value=null;return c}f(b,a);d=b;b.prototype.clone=function(){return new d({value:l.clone(this.value)})};c([h.property()],b.prototype,"type",void 0);c([h.property({type:e})],b.prototype,"value",void 0);return b=d=c([h.subclass("esri.geometry.support.ValueMeshColor")],b);var d}(h.declared(d.default))})},"esri/geometry/support/MeshVertexAttributes":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators".split(" "),
function(b,a,f,c,e,l,h,d){function k(a,c,b,d){var e=c.loggerTag;c=c.stride;return 0!==a.length%c?(d.error(e,"Invalid array length, expected a multiple of "+c),new b([])):a}function m(a,c,b,d,e){if(!a)return a;if(a instanceof c)return k(a,d,c,e);for(var g=0;g<b.length;g++)if(a instanceof b[g])return k(new c(a),d,c,e);if(Array.isArray(a))return k(new c(a),d,c,e);b=b.map(function(a){return"'"+a.name+"'"});e.error("Failed to set property, expected one of "+b+", but got "+a.constructor.name);return new c([])}
Object.defineProperty(a,"__esModule",{value:!0});var g=h.getLogger("esri.geometry.support.MeshVertexAttributes");b=function(a){function b(c){c=a.call(this)||this;c.position=null;c.uv=null;c.normal=null;return c}f(b,a);e=b;b.prototype.castPosition=function(a){a&&a instanceof Float32Array&&g.warn(".position\x3d","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array");return m(a,Float64Array,[Float32Array],{loggerTag:".position\x3d",
stride:3},g)};b.prototype.castUv=function(a){return m(a,Float32Array,[Float64Array],{loggerTag:".uv\x3d",stride:2},g)};b.prototype.castNormal=function(a){return m(a,Float32Array,[Float64Array],{loggerTag:".normal\x3d",stride:3},g)};b.prototype.clone=function(){return new e({position:l.clone(this.position),uv:l.clone(this.uv),normal:l.clone(this.normal)})};c([d.property({json:{write:!0}})],b.prototype,"position",void 0);c([d.cast("position")],b.prototype,"castPosition",null);c([d.property({json:{write:!0}})],
b.prototype,"uv",void 0);c([d.cast("uv")],b.prototype,"castUv",null);c([d.property({json:{write:!0}})],b.prototype,"normal",void 0);c([d.cast("normal")],b.prototype,"castNormal",null);return b=e=c([d.subclass("esri.geometry.support.MeshVertexAttributes")],b);var e}(d.declared(e));a.MeshVertexAttributes=b;a.castArray=m;a.default=b})},"esri/geometry/support/triangulationUtils":function(){define(["require","exports","../../core/libs/earcut/earcut","./coordsUtils"],function(b,a,f,c){function e(a,c,b){if(1===
a.length)return a[0];c=new Float64Array(c);b=new Uint32Array(b);for(var d=0,e=0,k=0;k<a.length;k++){for(var m=a[k],h=0;h<m.position.length;h++)c[d++]=m.position[h];for(h=0;h<m.faces.length;h++)b[e++]=m.faces[h]}return{position:c,faces:b}}function l(a,b){for(var d=a.length,e=Array(d),k=Array(d),f=Array(d),l=0,y=0,r=0,z=0,x=0;x<d;++x)z+=a[x].length;for(var z=new Float64Array(3*z),p=0,n=d-1;0<=n;n--){var A=a[n];if(c.isClockwise(A,!1,!1)||1===d){for(var B=A.length,x=0;x<l;++x)B+=e[x].length;x={index:p,
pathLengths:Array(l+1),count:B,holeIndices:Array(l)};x.pathLengths[0]=A.length;0<A.length&&(f[r++]={index:p,count:A.length});p=h(A,0,z,p,A.length,b);for(A=0;A<l;++A)B=e[A],x.holeIndices[A]=p,x.pathLengths[A+1]=B.length,0<B.length&&(f[r++]={index:p,count:B.length}),p=h(B,0,z,p,B.length,b);l=0;0<x.count&&(k[y++]=x)}else e[l++]=A}for(A=0;A<l;++A)B=e[A],0<B.length&&(f[r++]={index:p,count:B.length}),p=h(B,0,z,p,B.length,b);y<d&&(k.length=y);r<d&&(f.length=r);return{position:z,polygons:k,outlines:f}}function h(a,
c,b,e,h,f){e*=3;for(var d=0;d<h;++d){var g=a[c++];b[e++]=g[0];b[e++]=g[1];b[e++]=f?g[2]:0}return e/3}Object.defineProperty(a,"__esModule",{value:!0});a.triangulate=function(a){var c=l(a.rings,a.hasZ),b=[],d=0,h=0;a=function(a){var e=a.index,g=new Float64Array(c.position.buffer,3*e*c.position.BYTES_PER_ELEMENT,3*a.count);a=a.holeIndices.map(function(a){return a-e});a=new Uint32Array(f(g,a,3));b.push({position:g,faces:a});d+=g.length;h+=a.length};for(var v=0,w=c.polygons;v<w.length;v++)a(w[v]);return e(b,
d,h)};a.pathsToTriangulationInfo=l})},"esri/core/libs/earcut/earcut":function(){define([],function(){function b(b,p,d){d=d||2;n=b.length/d+(p?2*p.length:0);A=!1;var e=p&&p.length,g=e?p[0]*d:b.length,m=a(b,0,g,d,!0),B=[];if(!m)return B;var t,w,v,x;if(e)a:{var C=d,e=[],r,z,F;x=0;for(r=p.length;x<r;x++)z=p[x]*C,F=x<r-1?p[x+1]*C:b.length,z=a(b,z,F,C,!1),z===z.next&&(z.steiner=!0),e.push(k(z));e.sort(l);for(x=0;x<e.length;x++){if(!m){m=null;break a}p=e[x];C=m;if(C=h(p,C))p=y(C,p),f(p,p.next);m=f(m,m.next)}}if(A)return B;
if(b.length>80*d){t=v=b[0];w=e=b[1];for(C=d;C<g;C+=d)x=b[C],p=b[C+1],x<t&&(t=x),p<w&&(w=p),x>v&&(v=x),p>e&&(e=p);v=Math.max(v-t,e-w)}c(m,B,d,t,w,v);return B}function a(a,c,b,n,d){var e;if(d===0<p(a,c,b,n))for(d=c;d<b;d+=n)e=r(d,a[d],a[d+1],e);else for(d=b-n;d>=c;d-=n)e=r(d,a[d],a[d+1],e);e&&t(e,e.next)&&(z(e),e=e.next);return e}function f(a,c){if(!a)return a;c||(c=a);var b,p=0,d=n*n/2;do{b=!1;if(a.steiner||!t(a,a.next)&&0!==g(a.prev,a,a.next))a=a.next;else{z(a);a=c=a.prev;if(a===a.next)return null;
b=!0}if(p++>d)return A=!0,null}while(b||a!==c);return c}function c(a,b,n,p,k,h,l){if(a){if(!l&&h){var B=a,x=B;do null===x.z&&(x.z=d(x.x,x.y,p,k,h)),x.prevZ=x.prev,x=x.nextZ=x.next;while(x!==B);x.prevZ.nextZ=null;x.prevZ=null;var B=x,C,r,D,F,H,J,K=1;do{x=B;D=B=null;for(F=0;x;){F++;r=x;for(C=H=0;C<K&&(H++,r=r.nextZ,r);C++);for(J=K;0<H||0<J&&r;)0===H?(C=r,r=r.nextZ,J--):0!==J&&r?x.z<=r.z?(C=x,x=x.nextZ,H--):(C=r,r=r.nextZ,J--):(C=x,x=x.nextZ,H--),D?D.nextZ=C:B=C,C.prevZ=D,D=C;x=r}D.nextZ=null;K*=2}while(1<
F)}for(B=a;a.prev!==a.next;){x=a.prev;r=a.next;if(h)a:{D=a;J=p;var E=k,O=h;F=D.prev;H=D;K=D.next;if(0<=g(F,H,K))D=!1;else{var W=F.x>H.x?F.x>K.x?F.x:K.x:H.x>K.x?H.x:K.x,R=F.y>H.y?F.y>K.y?F.y:K.y:H.y>K.y?H.y:K.y;C=d(F.x<H.x?F.x<K.x?F.x:K.x:H.x<K.x?H.x:K.x,F.y<H.y?F.y<K.y?F.y:K.y:H.y<K.y?H.y:K.y,J,E,O);J=d(W,R,J,E,O);for(E=D.nextZ;E&&E.z<=J;){if(E!==D.prev&&E!==D.next&&m(F.x,F.y,H.x,H.y,K.x,K.y,E.x,E.y)&&0<=g(E.prev,E,E.next)){D=!1;break a}E=E.nextZ}for(E=D.prevZ;E&&E.z>=C;){if(E!==D.prev&&E!==D.next&&
m(F.x,F.y,H.x,H.y,K.x,K.y,E.x,E.y)&&0<=g(E.prev,E,E.next)){D=!1;break a}E=E.prevZ}D=!0}}else D=e(a);if(D)b.push(x.i/n),b.push(a.i/n),b.push(r.i/n),z(a),B=a=r.next;else{if(A)break;a=r;if(a===B){if(!l)c(f(a),b,n,p,k,h,1);else if(1===l){l=b;B=n;x=a;do r=x.prev,D=x.next.next,!t(r,D)&&v(r,x,x.next,D)&&w(r,D)&&w(D,r)&&(l.push(r.i/B),l.push(x.i/B),l.push(D.i/B),z(x),z(x.next),x=a=D),x=x.next;while(x!==a);a=x;c(a,b,n,p,k,h,2)}else if(2===l)a:{l=a;do{for(B=l.next.next;B!==l.prev;){if(x=l.i!==B.i){x=l;r=B;
D=void 0;if(D=x.next.i!==r.i&&x.prev.i!==r.i){D=void 0;b:{D=x;do{if(D.i!==x.i&&D.next.i!==x.i&&D.i!==r.i&&D.next.i!==r.i&&v(D,D.next,x,r)){D=!0;break b}D=D.next}while(D!==x);D=!1}D=!D}F=void 0;if(F=D&&w(x,r)&&w(r,x)){D=x;F=!1;H=(x.x+r.x)/2;r=(x.y+r.y)/2;do D.y>r!==D.next.y>r&&H<(D.next.x-D.x)*(r-D.y)/(D.next.y-D.y)+D.x&&(F=!F),D=D.next;while(D!==x)}x=F}if(x){a=y(l,B);l=f(l,l.next);a=f(a,a.next);c(l,b,n,p,k,h);c(a,b,n,p,k,h);break a}B=B.next}l=l.next}while(l!==a)}break}}}}}function e(a){var c=a.prev,
b=a.next;if(0<=g(c,a,b))return!1;for(var p=a.next.next,d=0;p!==a.prev;){if(m(c.x,c.y,a.x,a.y,b.x,b.y,p.x,p.y)&&0<=g(p.prev,p,p.next))return!1;p=p.next;if(d++>n)return A=!0,!1}return!0}function l(a,c){return a.x-c.x}function h(a,c){var b=c,n=a.x,p=a.y,d=-Infinity,e;do{if(!b)return null;if(p<=b.y&&p>=b.next.y){var g=b.x+(p-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(g<=n&&g>d){d=g;if(g===n){if(p===b.y)return b;if(p===b.next.y)return b.next}e=b.x<b.next.x?b:b.next}}b=b.next}while(b!==c);if(!e)return null;
if(n===d)return e.prev;c=e;for(var g=e.x,A=e.y,k=Infinity,h,b=e.next;b!==c;)n>=b.x&&b.x>=g&&m(p<A?n:d,p,g,A,p<A?d:n,p,b.x,b.y)&&(h=Math.abs(p-b.y)/(n-b.x),(h<k||h===k&&b.x>e.x)&&w(b,a)&&(e=b,k=h)),b=b.next;return e}function d(a,c,b,n,p){a=32767*(a-b)/p;c=32767*(c-n)/p;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;c=(c|c<<8)&16711935;c=(c|c<<4)&252645135;c=(c|c<<2)&858993459;return(a|a<<1)&1431655765|((c|c<<1)&1431655765)<<1}function k(a){var c=a,b=a;do c.x<b.x&&(b=c),c=c.next;while(c!==
a);return b}function m(a,c,b,n,p,d,e,g){return 0<=(p-e)*(c-g)-(a-e)*(d-g)&&0<=(a-e)*(n-g)-(b-e)*(c-g)&&0<=(b-e)*(d-g)-(p-e)*(n-g)}function g(a,c,b){return(c.y-a.y)*(b.x-c.x)-(c.x-a.x)*(b.y-c.y)}function t(a,c){return a.x===c.x&&a.y===c.y}function v(a,c,b,n){return t(a,c)&&t(b,n)||t(a,n)&&t(b,c)?!0:0<g(a,c,b)!==0<g(a,c,n)&&0<g(b,n,a)!==0<g(b,n,c)}function w(a,c){return 0>g(a.prev,a,a.next)?0<=g(a,c,a.next)&&0<=g(a,a.prev,c):0>g(a,c,a.prev)||0>g(a,a.next,c)}function y(a,c){var b=new x(a.i,a.x,a.y),
n=new x(c.i,c.x,c.y),p=a.next,d=c.prev;a.next=c;c.prev=a;b.next=p;p.prev=b;n.next=b;b.prev=n;d.next=n;n.prev=d;return n}function r(a,c,b,n){a=new x(a,c,b);n?(a.next=n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a);return a}function z(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function x(a,c,b){this.i=a;this.x=c;this.y=b;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function p(a,c,b,n){for(var p=0,d=
b-n;c<b;c+=n)p+=(a[d]-a[c])*(a[c+1]+a[d+1]),d=c;return p}var n,A;b.deviation=function(a,c,b,n){var d=c&&c.length,e=Math.abs(p(a,0,d?c[0]*b:a.length,b));if(d)for(var d=0,g=c.length;d<g;d++)e-=Math.abs(p(a,c[d]*b,d<g-1?c[d+1]*b:a.length,b));for(d=c=0;d<n.length;d+=3){var g=n[d]*b,A=n[d+1]*b,k=n[d+2]*b;c+=Math.abs((a[g]-a[k])*(a[A+1]-a[g+1])-(a[g]-a[A])*(a[k+1]-a[g+1]))}return 0===e&&0===c?0:Math.abs((c-e)/e)};b.flatten=function(a){for(var c=a[0][0].length,b={vertices:[],holes:[],dimensions:c},n=0,p=
0;p<a.length;p++){for(var d=0;d<a[p].length;d++)for(var e=0;e<c;e++)b.vertices.push(a[p][d][e]);0<p&&(n+=a[p-1].length,b.holes.push(n))}return b};return b})},"esri/geometry/support/coordsUtils":function(){define(["require","exports"],function(b,a){function f(a,c){var b=c[0]-a[0],d=c[1]-a[1];return 2<a.length&&2<c.length?(a=a[2]-c[2],Math.sqrt(b*b+d*d+a*a)):Math.sqrt(b*b+d*d)}function c(a,c,b){var d=a[0]+b*(c[0]-a[0]),e=a[1]+b*(c[1]-a[1]);return 2<a.length&&2<c.length?[d,e,a[2]+b*(c[2]-a[2])]:[d,e]}
Object.defineProperty(a,"__esModule",{value:!0});a.geometryToCoordinates=function(a){if(!a)return null;if(Array.isArray(a))return a;var c=a.hasZ,b=a.hasM;if("point"===a.type)return b&&c?[a.x,a.y,a.z,a.m]:c?[a.x,a.y,a.z]:b?[a.x,a.y,a.m]:[a.x,a.y];if("polygon"===a.type)return a.rings.slice(0);if("polyline"===a.type)return a.paths.slice(0);if("multipoint"===a.type)return a.points.slice(0);if("extent"===a.type){a=a.clone().normalize();if(!a)return null;var d=!1,e=!1;a.forEach(function(a){a.hasZ&&(d=!0);
a.hasM&&(e=!0)});return a.map(function(a){var c=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(d&&a.hasZ)for(var b=.5*(a.zmax-a.zmin),k=0;k<c.length;k++)c[k].push(b);if(e&&a.hasM)for(a=.5*(a.mmax-a.mmin),k=0;k<c.length;k++)c[k].push(a);return c})}return null};a.getLength=f;a.getMidpoint=function(a,b){return c(a,b,.5)};a.getPathLength=function(a){for(var c=a.length,b=0,d=0;d<c-1;++d)b+=f(a[d],a[d+1]);return b};a.getPointOnPath=function(a,b){if(0>=b)return a[0];
for(var e=a.length,d=0,k=0;k<e-1;++k){var m=f(a[k],a[k+1]);if(b-d<m)return c(a[k],a[k+1],(b-d)/m);d+=m}return a[e-1]};a.isClockwise=function(a,c,b){for(var d=a.length,e=0,h=0,g=0,f=0;f<d;f++){var l=a[f],w=a[(f+1)%d],y=2,e=e+(l[0]*w[1]-w[0]*l[1]);2<l.length&&2<w.length&&b&&(h+=l[0]*w[2]-w[0]*l[2],y=3);l.length>y&&w.length>y&&c&&(g+=l[0]*w[y]-w[0]*l[y])}return 0>=e&&0>=h&&0>=g}})},"esri/geometry/support/meshUtils/centerAt":function(){define("require exports ../../../core/Logger ./projection ../../../views/3d/lib/glMatrix ../../../views/3d/support/projectionUtils".split(" "),
function(b,a,f,c,e,l){Object.defineProperty(a,"__esModule",{value:!0});var h=f.getLogger("esri.geometry.support.meshUtils.centerAt");a.centerAt=function(a,b,f){if(a.vertexAttributes&&a.vertexAttributes.position){var t=a.spatialReference,w=f&&f.origin||a.extent.center;if(t.isWGS84||t.isWebMercator&&(!f||!1!==f.geographic)){f=a.spatialReference;var t=k,v=d;if(l.pointToVector(b,v,l.SphericalECEFSpatialReference)){l.pointToVector(w,t,l.SphericalECEFSpatialReference)||l.pointToVector(a.extent.center,t,
l.SphericalECEFSpatialReference);w=a.vertexAttributes.position;b=a.vertexAttributes.normal;var x=new Float64Array(w.length),p=new Float32Array(b?b.length:0);c.projectToECEF(w,f,x);b&&c.projectNormalToECEF(b,w,x,f,p);l.computeLinearTransformation(l.SphericalECEFSpatialReference,t,m,l.SphericalECEFSpatialReference);l.computeLinearTransformation(l.SphericalECEFSpatialReference,v,g,l.SphericalECEFSpatialReference);e.mat4d.inverse(m);e.mat4d.multiply(g,m,g);c.transformBufferInPlace(x,g);e.mat4d.inverse(g);
e.mat4d.transpose(g);b&&c.transformBufferInPlace(p,g,!0);c.projectFromECEF(x,w,f);b&&c.projectNormalFromECEF(p,w,x,f,b);a.clearCache()}else h.error("Failed to project centerAt location (wkid:"+b.spatialReference.wkid+") to ECEF")}else if(f=k,t=d,l.pointToVector(b,t,a.spatialReference)){l.pointToVector(w,f,a.spatialReference)||(b=a.extent.center,f[0]=b.x,f[1]=b.y,f[2]=b.z,h.error("Failed to project specified origin (wkid:"+w.spatialReference.wkid+") to mesh spatial reference (wkid:"+a.spatialReference.wkid+
"). Using mesh extent.center instead"));if(w=a.vertexAttributes.position)for(b=0;b<w.length;b+=3)for(v=0;3>v;v++)w[b+v]+=t[v]-f[v];a.clearCache()}else h.error("Failed to project centerAt location (wkid:"+b.spatialReference.wkid+") to mesh spatial reference (wkid:"+a.spatialReference.wkid+")")}};var d=e.vec3d.create(),k=e.vec3d.create(),m=e.mat4d.create(),g=e.mat4d.create()})},"esri/geometry/support/meshUtils/projection":function(){define(["require","exports","../../../core/Logger","../../../views/3d/lib/glMatrix",
"../../../views/3d/support/projectionUtils"],function(b,a,f,c,e){function l(a,b,h,f,l,z){if(b){l=l.isWGS84;for(var t=0;t<b.length;t+=3){for(var p=0;3>p;p++)d[p]=f[t+p],k[p]=b[t+p];e.computeLinearTransformation(e.SphericalECEFSpatialReference,d,m,e.SphericalECEFSpatialReference);c.mat4d.toMat3(m,g);l?c.mat3d.multiplyVec3(g,k):(p=e.webMercator.y2lat(h[t+1]),p=Math.cos(p),0===a&&(p=1/p),g[0]*=p,g[1]*=p,g[2]*=p,g[3]*=p,g[4]*=p,g[5]*=p,1===a&&c.mat3d.transpose(g),c.mat3d.multiplyVec3(g,k),c.vec3d.normalize(k));
for(p=0;3>p;p++)z[t+p]=k[p]}return z}}Object.defineProperty(a,"__esModule",{value:!0});var h=f.getLogger("esri.geometry.support.meshUtils.normalProjection");a.projectNormalToECEF=function(a,c,b,d,e){return d.isWebMercator||d.isWGS84?l(0,a,c,b,d,e):(h.error("Cannot convert PCS spatial reference buffer to ECEF"),e)};a.projectNormalFromECEF=function(a,c,b,d,e){return d.isWebMercator||d.isWGS84?l(1,a,c,b,d,e):(h.error("Cannot convert to PCS spatial reference buffer from ECEF"),e)};a.projectToECEF=function(a,
c,b){e.bufferToBuffer(a,c,0,b,e.SphericalECEFSpatialReference,0,a.length/3);return b};a.projectFromECEF=function(a,c,b){e.bufferToBuffer(a,e.SphericalECEFSpatialReference,0,c,b,0,a.length/3);return c};a.transformBufferInPlace=function(a,b,e){void 0===e&&(e=!1);if(a)for(var g=0;g<a.length;g+=3){for(var k=0;3>k;k++)d[k]=a[g+k];c.mat4d.multiplyVec3(b,d);e&&c.vec3d.normalize(d);for(k=0;3>k;k++)a[g+k]=d[k]}};var d=c.vec3d.create(),k=c.vec3d.create(),m=c.mat4d.create(),g=c.mat3d.create()})},"esri/views/3d/lib/glMatrix":function(){define([],
function(){var b={};(function(a,b){b(a,!0);b(a,!1)})(b,function(a,b){var c={};(function(){if("undefined"!=typeof Float32Array){var a=new Float32Array(1),b=new Int32Array(a.buffer);c.invsqrt=function(c){a[0]=c;b[0]=1597463007-(b[0]>>1);var n=a[0];return n*(1.5-.5*c*n*n)}}else c.invsqrt=function(a){return 1/Math.sqrt(a)}})();var e=Array;"undefined"!=typeof Float32Array&&(e=b?Float32Array:Array);var f={create:function(a){var b=new e(3);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2]):b[0]=b[1]=b[2]=0;return b},createFrom:function(a,
b,c){var n=new e(3);n[0]=a;n[1]=b;n[2]=c;return n},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},set3:function(a,b,c,d){d[0]=a;d[1]=b;d[2]=c;return d},add:function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c},subtract:function(a,b,c){if(!c||a===c)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a;c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c},multiply:function(a,b,c){if(!c||a===c)return a[0]*=b[0],a[1]*=b[1],a[2]*=
b[2],a;c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];return c},max:function(a,b,c){c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2]);return c},min:function(a,b,c){c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b},scale:function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c},normalize:function(a,b){b||(b=a);var c=a[0],
n=a[1];a=a[2];var d=Math.sqrt(c*c+n*n+a*a);if(!d)return b[0]=0,b[1]=0,b[2]=0,b;if(1===d)return b[0]=c,b[1]=n,b[2]=a,b;d=1/d;b[0]=c*d;b[1]=n*d;b[2]=a*d;return b},cross:function(a,b,c){c||(c=a);var n=a[0],d=a[1];a=a[2];var p=b[0],e=b[1];b=b[2];c[0]=d*b-a*e;c[1]=a*p-n*b;c[2]=n*e-d*p;return c},length:function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)},length2:function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,
b,c){c||(c=a);var n=a[0]-b[0],d=a[1]-b[1];a=a[2]-b[2];b=Math.sqrt(n*n+d*d+a*a);if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/b;c[0]=n*b;c[1]=d*b;c[2]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);return d},dist:function(a,b){var c=b[0]-a[0],n=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(c*c+n*n+a*a)},dist2:function(a,b){var c=b[0]-a[0],n=b[1]-a[1];a=b[2]-a[2];return c*c+n*n+a*a}},h=null,d=new e(4);f.unproject=function(a,b,c,e,g){g||(g=a);
h||(h=y.create());var n=h;d[0]=2*(a[0]-e[0])/e[2]-1;d[1]=2*(a[1]-e[1])/e[3]-1;d[2]=2*a[2]-1;d[3]=1;y.multiply(c,b,n);if(!y.inverse(n))return null;y.multiplyVec4(n,d);if(0===d[3])return null;g[0]=d[0]/d[3];g[1]=d[1]/d[3];g[2]=d[2]/d[3];return g};var k=f.createFrom(1,0,0),m=f.createFrom(0,1,0),g=f.createFrom(0,0,1);f.rotationTo=function(a,b,c){c||(c=r.create());var n=f.dot(a,b),d=f.create();if(1<=n)r.set(z,c);else if(-.999999>n)f.cross(k,a,d),1E-6>d.length&&f.cross(m,a,d),1E-6>d.length&&f.cross(g,a,
d),f.normalize(d),r.fromAxisAngle(d,Math.PI,c);else{var n=Math.sqrt(2*(1+n)),p=1/n;f.cross(a,b,d);c[0]=d[0]*p;c[1]=d[1]*p;c[2]=d[2]*p;c[3]=.5*n;r.normalize(c)}1<c[3]?c[3]=1:-1>c[3]&&(c[3]=-1);return c};var t=f.create(),v=f.create();f.project=function(a,b,c,d){d||(d=a);f.direction(b,c,t);f.subtract(a,b,v);a=f.dot(t,v);f.scale(t,a,d);f.add(d,b,d)};f.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var w={create:function(a){var b=new e(9);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=
a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]):b[0]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=0;return b},createFrom:function(a,b,c,d,g,k,h,f,m){var n=new e(9);n[0]=a;n[1]=b;n[2]=c;n[3]=d;n[4]=g;n[5]=k;n[6]=h;n[7]=f;n[8]=m;return n},determinant:function(a){var b=a[3],c=a[4],d=a[5],p=a[6],e=a[7],g=a[8];return a[0]*(g*c-d*e)+a[1]*(-g*b+d*p)+a[2]*(e*b-c*p)},inverse:function(a,b){var c=a[0],d=a[1],n=a[2],p=a[3],e=a[4],g=a[5],k=a[6],h=a[7];a=a[8];var f=a*e-g*h,m=-a*p+g*k,t=h*p-e*k,l=c*f+d*m+n*t;if(!l)return null;l=
1/l;b||(b=w.create());b[0]=f*l;b[1]=(-a*d+n*h)*l;b[2]=(g*d-n*e)*l;b[3]=m*l;b[4]=(a*c-n*k)*l;b[5]=(-g*c+n*p)*l;b[6]=t*l;b[7]=(-h*c+d*k)*l;b[8]=(e*c-d*p)*l;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],n=a[1],p=a[2],e=a[3],g=a[4],A=a[5],k=a[6],h=a[7];a=a[8];var f=b[0],m=b[1],l=b[2],t=b[3],w=b[4],x=b[5],v=b[6],y=b[7];b=b[8];c[0]=f*d+m*e+l*k;c[1]=f*n+m*g+l*h;c[2]=f*p+m*A+l*a;c[3]=t*d+w*e+x*k;c[4]=t*n+w*g+x*h;c[5]=t*p+w*A+x*a;c[6]=v*d+y*e+b*k;c[7]=v*n+y*g+b*h;c[8]=v*p+y*A+b*a;return c},add:function(a,
b,c){c||(c=a);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];c[4]=a[4]+b[4];c[5]=a[5]+b[5];c[6]=a[6]+b[6];c[7]=a[7]+b[7];c[8]=a[8]+b[8];return c},subtract:function(a,b,c){c||(c=a);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];c[4]=a[4]-b[4];c[5]=a[5]-b[5];c[6]=a[6]-b[6];c[7]=a[7]-b[7];c[8]=a[8]-b[8];return c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];b=b[1];c[0]=d*a[0]+b*a[3]+a[6];c[1]=d*a[1]+b*a[4]+a[7];return c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],
n=b[1];b=b[2];c[0]=d*a[0]+n*a[3]+b*a[6];c[1]=d*a[1]+n*a[4]+b*a[7];c[2]=d*a[2]+n*a[5]+b*a[8];return c},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},identity:function(a){a||(a=w.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(!b||a===b){b=a[1];var c=a[2],d=a[5];a[1]=a[3];a[2]=a[6];a[3]=b;a[5]=a[7];a[6]=c;a[7]=d;return a}b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];
b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return b},toMat4:function(a,b){b||(b=y.create());b[15]=1;b[14]=0;b[13]=0;b[12]=0;b[11]=0;b[10]=a[8];b[9]=a[7];b[8]=a[6];b[7]=0;b[6]=a[5];b[5]=a[4];b[4]=a[3];b[3]=0;b[2]=a[2];b[1]=a[1];b[0]=a[0];return b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},y={create:function(a){var b=new e(16);4===arguments.length?(b[0]=arguments[0],b[1]=arguments[1],b[2]=arguments[2],b[3]=arguments[3],b[4]=arguments[4],
b[5]=arguments[5],b[6]=arguments[6],b[7]=arguments[7],b[8]=arguments[8],b[9]=arguments[9],b[10]=arguments[10],b[11]=arguments[11],b[12]=arguments[12],b[13]=arguments[13],b[14]=arguments[14],b[15]=arguments[15]):a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b},createFrom:function(a,b,c,d,g,k,h,f,m,l,t,w,x,v,y,r){var n=new e(16);n[0]=a;n[1]=b;n[2]=c;n[3]=d;n[4]=g;
n[5]=k;n[6]=h;n[7]=f;n[8]=m;n[9]=l;n[10]=t;n[11]=w;n[12]=x;n[13]=v;n[14]=y;n[15]=r;return n},createFromMatrixRowMajor:function(a){var b=new e(16);b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},createFromMatrix:function(a){var b=new e(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=
a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},setRowMajor:function(a,b){b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},identity:function(a){a||(a=y.create());a[0]=
1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(!b||a===b){b=a[1];var c=a[2],d=a[3],n=a[6],e=a[7],g=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=b;a[6]=a[9];a[7]=a[13];a[8]=c;a[9]=n;a[11]=a[14];a[12]=d;a[13]=e;a[14]=g;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b},
determinant:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],g=a[4],p=a[5],k=a[6],h=a[7],f=a[8],m=a[9],l=a[10],t=a[11],w=a[12],x=a[13],v=a[14];a=a[15];return w*m*k*e-f*x*k*e-w*p*l*e+g*x*l*e+f*p*v*e-g*m*v*e-w*m*d*h+f*x*d*h+w*c*l*h-b*x*l*h-f*c*v*h+b*m*v*h+w*p*d*t-g*x*d*t-w*c*k*t+b*x*k*t+g*c*v*t-b*p*v*t-f*p*d*a+g*m*d*a+f*c*k*a-b*m*k*a-g*c*l*a+b*p*l*a},inverse:function(a,b){b||(b=a);var c=a[0],d=a[1],n=a[2],e=a[3],g=a[4],p=a[5],k=a[6],h=a[7],f=a[8],m=a[9],l=a[10],t=a[11],w=a[12],x=a[13],v=a[14];a=a[15];var y=
c*p-d*g,r=c*k-n*g,z=c*h-e*g,O=d*k-n*p,W=d*h-e*p,R=n*h-e*k,da=f*x-m*w,X=f*v-l*w,U=f*a-t*w,ma=m*v-l*x,ja=m*a-t*x,oa=l*a-t*v,ia=y*oa-r*ja+z*ma+O*U-W*X+R*da;if(!ia)return null;ia=1/ia;b[0]=(p*oa-k*ja+h*ma)*ia;b[1]=(-d*oa+n*ja-e*ma)*ia;b[2]=(x*R-v*W+a*O)*ia;b[3]=(-m*R+l*W-t*O)*ia;b[4]=(-g*oa+k*U-h*X)*ia;b[5]=(c*oa-n*U+e*X)*ia;b[6]=(-w*R+v*z-a*r)*ia;b[7]=(f*R-l*z+t*r)*ia;b[8]=(g*ja-p*U+h*da)*ia;b[9]=(-c*ja+d*U-e*da)*ia;b[10]=(w*W-x*z+a*y)*ia;b[11]=(-f*W+m*z-t*y)*ia;b[12]=(-g*ma+p*X-k*da)*ia;b[13]=(c*ma-
d*X+n*da)*ia;b[14]=(-w*O+x*r-v*y)*ia;b[15]=(f*O-m*r+l*y)*ia;return b},toRotationMat:function(a,b){b||(b=y.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},toMat3:function(a,b){b||(b=w.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b},toInverseMat3:function(a,b){var c=a[0],d=a[1],e=a[2],n=a[4],g=a[5],p=a[6],k=a[8],
h=a[9];a=a[10];var f=a*g-p*h,m=-a*n+p*k,l=h*n-g*k,t=c*f+d*m+e*l;if(!t)return null;t=1/t;b||(b=w.create());b[0]=f*t;b[1]=(-a*d+e*h)*t;b[2]=(p*d-e*g)*t;b[3]=m*t;b[4]=(a*c-e*k)*t;b[5]=(-p*c+e*n)*t;b[6]=l*t;b[7]=(-h*c+d*k)*t;b[8]=(g*c-d*n)*t;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],n=a[2],g=a[3],p=a[4],k=a[5],A=a[6],h=a[7],f=a[8],m=a[9],t=a[10],l=a[11],w=a[12],x=a[13],v=a[14];a=a[15];var y=b[0],r=b[1],z=b[2],W=b[3],R=b[4],da=b[5],X=b[6],U=b[7],ma=b[8],ja=b[9],oa=b[10],ia=b[11],qa=
b[12],pa=b[13],va=b[14];b=b[15];c[0]=y*d+r*p+z*f+W*w;c[1]=y*e+r*k+z*m+W*x;c[2]=y*n+r*A+z*t+W*v;c[3]=y*g+r*h+z*l+W*a;c[4]=R*d+da*p+X*f+U*w;c[5]=R*e+da*k+X*m+U*x;c[6]=R*n+da*A+X*t+U*v;c[7]=R*g+da*h+X*l+U*a;c[8]=ma*d+ja*p+oa*f+ia*w;c[9]=ma*e+ja*k+oa*m+ia*x;c[10]=ma*n+ja*A+oa*t+ia*v;c[11]=ma*g+ja*h+oa*l+ia*a;c[12]=qa*d+pa*p+va*f+b*w;c[13]=qa*e+pa*k+va*m+b*x;c[14]=qa*n+pa*A+va*t+b*v;c[15]=qa*g+pa*h+va*l+b*a;return c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],e=b[1];b=b[2];c[0]=a[0]*d+a[4]*e+a[8]*
b+a[12];c[1]=a[1]*d+a[5]*e+a[9]*b+a[13];c[2]=a[2]*d+a[6]*e+a[10]*b+a[14];return c},multiplyVec4:function(a,b,c){c||(c=b);var d=b[0],e=b[1],g=b[2];b=b[3];c[0]=a[0]*d+a[4]*e+a[8]*g+a[12]*b;c[1]=a[1]*d+a[5]*e+a[9]*g+a[13]*b;c[2]=a[2]*d+a[6]*e+a[10]*g+a[14]*b;c[3]=a[3]*d+a[7]*e+a[11]*g+a[15]*b;return c},translate:function(a,b,c){var d=b[0],e=b[1];b=b[2];var g,n,p,k,h,f,m,A,t,l,w,x;if(!c||a===c)return a[12]=a[0]*d+a[4]*e+a[8]*b+a[12],a[13]=a[1]*d+a[5]*e+a[9]*b+a[13],a[14]=a[2]*d+a[6]*e+a[10]*b+a[14],a[15]=
a[3]*d+a[7]*e+a[11]*b+a[15],a;g=a[0];n=a[1];p=a[2];k=a[3];h=a[4];f=a[5];m=a[6];A=a[7];t=a[8];l=a[9];w=a[10];x=a[11];c[0]=g;c[1]=n;c[2]=p;c[3]=k;c[4]=h;c[5]=f;c[6]=m;c[7]=A;c[8]=t;c[9]=l;c[10]=w;c[11]=x;c[12]=g*d+h*e+t*b+a[12];c[13]=n*d+f*e+l*b+a[13];c[14]=p*d+m*e+w*b+a[14];c[15]=k*d+A*e+x*b+a[15];return c},scale:function(a,b,c){var d=b[0],e=b[1];b=b[2];if(!c||a===c)return a[0]*=d,a[1]*=d,a[2]*=d,a[3]*=d,a[4]*=e,a[5]*=e,a[6]*=e,a[7]*=e,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;c[0]=a[0]*d;c[1]=a[1]*d;c[2]=
a[2]*d;c[3]=a[3]*d;c[4]=a[4]*e;c[5]=a[5]*e;c[6]=a[6]*e;c[7]=a[7]*e;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},maxScale:function(a){return Math.max(Math.max(Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))},rotate:function(a,b,c,d){var e=c[0],g=c[1];c=c[2];var n=Math.sqrt(e*e+g*g+c*c),p,k,h,f,m,A,t,l,w,x,v,B,y,r,z,R,da,X,U,ma;if(!n)return null;1!==n&&(n=1/
n,e*=n,g*=n,c*=n);p=Math.sin(b);k=Math.cos(b);h=1-k;b=a[0];n=a[1];f=a[2];m=a[3];A=a[4];t=a[5];l=a[6];w=a[7];x=a[8];v=a[9];B=a[10];y=a[11];r=e*e*h+k;z=g*e*h+c*p;R=c*e*h-g*p;da=e*g*h-c*p;X=g*g*h+k;U=c*g*h+e*p;ma=e*c*h+g*p;e=g*c*h-e*p;g=c*c*h+k;d?a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=b*r+A*z+x*R;d[1]=n*r+t*z+v*R;d[2]=f*r+l*z+B*R;d[3]=m*r+w*z+y*R;d[4]=b*da+A*X+x*U;d[5]=n*da+t*X+v*U;d[6]=f*da+l*X+B*U;d[7]=m*da+w*X+y*U;d[8]=b*ma+A*e+x*g;d[9]=n*ma+t*e+v*g;d[10]=f*ma+l*e+B*g;d[11]=
m*ma+w*e+y*g;return d},rotateX:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[4],g=a[5],n=a[6],p=a[7],k=a[8],h=a[9],f=a[10],m=a[11];c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[4]=e*b+k*d;c[5]=g*b+h*d;c[6]=n*b+f*d;c[7]=p*b+m*d;c[8]=e*-d+k*b;c[9]=g*-d+h*b;c[10]=n*-d+f*b;c[11]=p*-d+m*b;return c},rotateY:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],g=a[1],n=a[2],k=a[3],p=a[8],h=a[9],f=a[10],m=a[11];c?a!==c&&(c[4]=a[4],
c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=e*b+p*-d;c[1]=g*b+h*-d;c[2]=n*b+f*-d;c[3]=k*b+m*-d;c[8]=e*d+p*b;c[9]=g*d+h*b;c[10]=n*d+f*b;c[11]=k*d+m*b;return c},rotateZ:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],g=a[1],n=a[2],k=a[3],p=a[4],h=a[5],f=a[6],m=a[7];c?a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=e*b+p*d;c[1]=g*b+h*d;c[2]=n*b+f*d;c[3]=k*b+m*d;c[4]=e*-d+p*b;c[5]=g*-d+
h*b;c[6]=n*-d+f*b;c[7]=k*-d+m*b;return c},frustum:function(a,b,c,d,e,g,k){k||(k=y.create());var n=b-a,p=d-c,h=g-e;k[0]=2*e/n;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=2*e/p;k[6]=0;k[7]=0;k[8]=(b+a)/n;k[9]=(d+c)/p;k[10]=-(g+e)/h;k[11]=-1;k[12]=0;k[13]=0;k[14]=-(g*e*2)/h;k[15]=0;return k},perspective:function(a,b,c,d,e){a=c*Math.tan(a*Math.PI/360);b*=a;return y.frustum(-b,b,-a,a,c,d,e)},ortho:function(a,b,c,d,e,g,k){k||(k=y.create());var n=b-a,h=d-c,p=g-e;k[0]=2/n;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=2/h;k[6]=0;
k[7]=0;k[8]=0;k[9]=0;k[10]=-2/p;k[11]=0;k[12]=-(a+b)/n;k[13]=-(d+c)/h;k[14]=-(g+e)/p;k[15]=1;return k},lookAt:function(a,b,c,d){d||(d=y.create());var e,g,n,k,h,p,f,m,A=a[0],t=a[1];a=a[2];n=c[0];k=c[1];g=c[2];f=b[0];c=b[1];e=b[2];if(A===f&&t===c&&a===e)return y.identity(d);b=A-f;c=t-c;f=a-e;m=1/Math.sqrt(b*b+c*c+f*f);b*=m;c*=m;f*=m;e=k*f-g*c;g=g*b-n*f;n=n*c-k*b;(m=Math.sqrt(e*e+g*g+n*n))?(m=1/m,e*=m,g*=m,n*=m):n=g=e=0;k=c*n-f*g;h=f*e-b*n;p=b*g-c*e;(m=Math.sqrt(k*k+h*h+p*p))?(m=1/m,k*=m,h*=m,p*=m):
p=h=k=0;d[0]=e;d[1]=k;d[2]=b;d[3]=0;d[4]=g;d[5]=h;d[6]=c;d[7]=0;d[8]=n;d[9]=p;d[10]=f;d[11]=0;d[12]=-(e*A+g*t+n*a);d[13]=-(k*A+h*t+p*a);d[14]=-(b*A+c*t+f*a);d[15]=1;return d},fromRotationTranslation:function(a,b,c){c||(c=y.create());var d=a[0],e=a[1],g=a[2],n=a[3],k=d+d,h=e+e,f=g+g;a=d*k;var p=d*h,d=d*f,m=e*h,e=e*f,g=g*f,k=n*k,h=n*h,n=n*f;c[0]=1-(m+g);c[1]=p+n;c[2]=d-h;c[3]=0;c[4]=p-n;c[5]=1-(a+g);c[6]=e+k;c[7]=0;c[8]=d+h;c[9]=e-k;c[10]=1-(a+m);c[11]=0;c[12]=b[0];c[13]=b[1];c[14]=b[2];c[15]=1;return c},
str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},r={create:function(a){var b=new e(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,d){var g=new e(4);g[0]=a;g[1]=b;g[2]=c;g[3]=d;return g},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=r.create());a[0]=0;
a[1]=0;a[2]=0;a[3]=1;return a}},z=r.identity();r.calculateW=function(a,b){var c=a[0],d=a[1],e=a[2];if(!b||a===b)return a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a;b[0]=c;b[1]=d;b[2]=e;b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e));return b};r.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};r.inverse=function(a,b){var c=a[0],d=a[1],e=a[2],g=a[3],c=(c=c*c+d*d+e*e+g*g)?1/c:0;if(!b||a===b)return a[0]*=-c,a[1]*=-c,a[2]*=-c,a[3]*=c,a;b[0]=-a[0]*c;b[1]=-a[1]*c;b[2]=-a[2]*c;b[3]=a[3]*c;return b};
r.conjugate=function(a,b){if(!b||a===b)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};r.length=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)};r.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2];a=a[3];var g=Math.sqrt(c*c+d*d+e*e+a*a);if(0===g)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;g=1/g;b[0]=c*g;b[1]=d*g;b[2]=e*g;b[3]=a*g;return b};r.add=function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3],a;
c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};r.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],g=a[2];a=a[3];var n=b[0],k=b[1],h=b[2];b=b[3];c[0]=d*b+a*n+e*h-g*k;c[1]=e*b+a*k+g*n-d*h;c[2]=g*b+a*h+d*k-e*n;c[3]=a*b-d*n-e*k-g*h;return c};r.multiplyVec3=function(a,b,c){c||(c=b);var d=b[0],e=b[1],g=b[2];b=a[0];var n=a[1],k=a[2];a=a[3];var h=a*d+n*g-k*e,f=a*e+k*d-b*g,m=a*g+b*e-n*d,d=-b*d-n*e-k*g;c[0]=h*a+d*-b+f*-k-m*-n;c[1]=f*a+d*-n+m*-b-h*-k;c[2]=m*a+d*-k+h*-n-f*-b;return c};
r.scale=function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};r.toMat3=function(a,b){b||(b=w.create());var c=a[0],d=a[1],e=a[2],g=a[3],n=c+c,k=d+d,h=e+e;a=c*n;var f=c*k,c=c*h,m=d*k,d=d*h,e=e*h,n=g*n,k=g*k,g=g*h;b[0]=1-(m+e);b[1]=f+g;b[2]=c-k;b[3]=f-g;b[4]=1-(a+e);b[5]=d+n;b[6]=c+k;b[7]=d-n;b[8]=1-(a+m);return b};r.toMat4=function(a,b){b||(b=y.create());var c=a[0],d=a[1],e=a[2],g=a[3],n=c+c,k=d+d,h=e+e;a=c*n;var f=c*k,c=c*h,
m=d*k,d=d*h,e=e*h,n=g*n,k=g*k,g=g*h;b[0]=1-(m+e);b[1]=f+g;b[2]=c-k;b[3]=0;b[4]=f-g;b[5]=1-(a+e);b[6]=d+n;b[7]=0;b[8]=c+k;b[9]=d-n;b[10]=1-(a+m);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};r.slerp=function(a,b,c,d){d||(d=a);var e=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3],g,n;if(1<=Math.abs(e))return d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d;g=Math.acos(e);n=Math.sqrt(1-e*e);if(.001>Math.abs(n))return d[0]=.5*a[0]+.5*b[0],d[1]=.5*a[1]+.5*b[1],d[2]=.5*a[2]+.5*b[2],d[3]=.5*a[3]+.5*b[3],d;
e=Math.sin((1-c)*g)/n;c=Math.sin(c*g)/n;d[0]=a[0]*e+b[0]*c;d[1]=a[1]*e+b[1]*c;d[2]=a[2]*e+b[2]*c;d[3]=a[3]*e+b[3]*c;return d};r.fromRotationMatrix=function(a,b){b||(b=r.create());var c=a[0]+a[4]+a[8],d;if(0<c)d=Math.sqrt(c+1),b[3]=.5*d,d=.5/d,b[0]=(a[7]-a[5])*d,b[1]=(a[2]-a[6])*d,b[2]=(a[3]-a[1])*d;else{d=r.fromRotationMatrix.s_iNext=r.fromRotationMatrix.s_iNext||[1,2,0];c=0;a[4]>a[0]&&(c=1);a[8]>a[3*c+c]&&(c=2);var e=d[c],g=d[e];d=Math.sqrt(a[3*c+c]-a[3*e+e]-a[3*g+g]+1);b[c]=.5*d;d=.5/d;b[3]=(a[3*
g+e]-a[3*e+g])*d;b[e]=(a[3*e+c]+a[3*c+e])*d;b[g]=(a[3*g+c]+a[3*c+g])*d}return b};w.toQuat4=r.fromRotationMatrix;(function(){var a=w.create();r.fromAxes=function(b,c,d,e){a[0]=c[0];a[3]=c[1];a[6]=c[2];a[1]=d[0];a[4]=d[1];a[7]=d[2];a[2]=b[0];a[5]=b[1];a[8]=b[2];return r.fromRotationMatrix(a,e)}})();r.identity=function(a){a||(a=r.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};r.fromAngleAxis=function(a,b,c){c||(c=r.create());a*=.5;var d=Math.sin(a);c[3]=Math.cos(a);c[0]=d*b[0];c[1]=d*b[1];c[2]=d*b[2];
return c};r.toAngleAxis=function(a,b){b||(b=a);var d=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<d?(b[3]=2*Math.acos(a[3]),d=c.invsqrt(d),b[0]=a[0]*d,b[1]=a[1]*d,b[2]=a[2]*d):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};r.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var x={create:function(a){var b=new e(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,d){var g=new e(4);g[0]=a;g[1]=b;g[2]=c;g[3]=d;return g},set:function(a,b){b[0]=a[0];b[1]=
a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=x.create());a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,b){if(!b||a===b)return b=a[1],a[1]=a[2],a[2]=b,a;b[0]=a[0];b[1]=a[2];b[2]=a[1];b[3]=a[3];return b},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2];a=a[3];var g=c*a-e*d;if(!g)return null;g=1/g;b[0]=a*g;b[1]=-d*g;b[2]=-e*g;b[3]=c*g;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],g=a[2];a=a[3];c[0]=
d*b[0]+e*b[2];c[1]=d*b[1]+e*b[3];c[2]=g*b[0]+a*b[2];c[3]=g*b[1]+a*b[3];return c},rotate:function(a,b,c){c||(c=a);var d=a[0],e=a[1],g=a[2];a=a[3];var n=Math.sin(b);b=Math.cos(b);c[0]=d*b+e*n;c[1]=d*-n+e*b;c[2]=g*b+a*n;c[3]=g*-n+a*b;return c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];b=b[1];c[0]=d*a[0]+b*a[1];c[1]=d*a[2]+b*a[3];return c},scale:function(a,b,c){c||(c=a);var d=a[1],e=a[2],g=a[3],n=b[0];b=b[1];c[0]=a[0]*n;c[1]=d*b;c[2]=e*n;c[3]=g*b;return c},str:function(a){return"["+a[0]+", "+a[1]+
", "+a[2]+", "+a[3]+"]"}};b=b?"":"d";a["glMath"+b]=c;a["vec2"+b]={create:function(a){var b=new e(2);a?(b[0]=a[0],b[1]=a[1]):(b[0]=0,b[1]=0);return b},createFrom:function(a,b){var c=new e(2);c[0]=a;c[1]=b;return c},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];return c},subtract:function(a,b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];return c},
scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;return c},dist:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)},dist2:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a},set:function(a,b){b[0]=a[0];b[1]=a[1];return b},set2:function(a,b,c){c[0]=a;c[1]=b;return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];return b},normalize:function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];0<c?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0;return b},cross:function(a,
b,c){a=a[0]*b[1]-a[1]*b[0];if(!c)return a;c[0]=c[1]=0;c[2]=a;return c},length:function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0];a=a[1]-b[1];b=d*d+a*a;if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/Math.sqrt(b);c[0]=d*b;c[1]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);return d},str:function(a){return"["+a[0]+", "+a[1]+"]"}};a["vec3"+b]=f;a["vec4"+b]={create:function(a){var b=
new e(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):(b[0]=0,b[1]=0,b[2]=0,b[3]=0);return b},createFrom:function(a,b,c,d){var g=new e(4);g[0]=a;g[1]=b;g[2]=c;g[3]=d;return g},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c},subtract:function(a,b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];c[3]=a[3]*b[3];return c},divide:function(a,b,
c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];c[3]=a[3]/b[3];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},set4:function(a,b,c,d,e){e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-
a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);d[3]=a[3]+c*(b[3]-a[3]);return d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};a["mat2"+b]=x;a["mat3"+b]=w;a["mat4"+b]=y;a["quat4"+b]=r});return b})},"esri/views/3d/support/projectionUtils":function(){define("require exports ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/support/aaBoundingRect ../lib/glMatrix ./earthUtils ./mathUtils ../webgl-engine/lib/BufferVectorMath".split(" "),function(b,
a,f,c,e,l,h,d,k){function m(a,b,c,d){2===a.length?(E[0]=a[0],E[1]=a[1],E[2]=0,a=E):a===c&&(l.vec3d.set(a,E),a=E);return g(a,b,0,c,d,0,1)}function g(a,b,c,d,e,g,k){void 0===k&&(k=1);z!==b&&(x=t(b),z=b);p!==e&&(n=t(e),p=e);k=c+3*k;if(x!==n||x===r.UNKNOWN&&!b.equals(e))if(x>r.UNKNOWN&&n>r.UNKNOWN)if(n!==r.WGS84)if(b=A[n],x!==r.WGS84)for(e=B[x];c<k;c+=3,g+=3)e(a,c,J,0),b(J,0,d,g);else for(;c<k;c+=3,g+=3)b(a,c,d,g);else for(e=B[x];c<k;c+=3,g+=3)e(a,c,d,g);else return!1;else if(d!==a||c!==g)for(;c<k;c++,
g++)d[g]=a[c];return!0}function t(b){return b.wkt===a.SphericalECEFSpatialReference.wkt?r.SPHERICAL_ECEF:b.isWGS84?r.WGS84:b.isWebMercator?r.WEBMERC:b.wkt===a.WGS84ECEFSpatialReference.wkt?r.WGS84_ECEF:r.UNKNOWN}function v(a,b,c,d){c[d++]=a[b++];c[d++]=a[b++];c[d]=a[b]}function w(a,b,c,e){var g=.4999999*Math.PI,g=d.clamp(C*a[b+1],-g,g),g=Math.sin(g);c[e++]=C*a[b]*D;c[e++]=D/2*Math.log((1+g)/(1-g));c[e]=a[b+2]}function y(a,b,c,d){var e=D+a[b+2],g=C*a[b+1];a=C*a[b];b=Math.cos(g);c[d++]=Math.cos(a)*
b*e;c[d++]=Math.sin(a)*b*e;c[d]=Math.sin(g)*e}Object.defineProperty(a,"__esModule",{value:!0});a.SphericalECEFSpatialReference=new c({wkt:'GEOCCS["Spherical geocentric",\n  DATUM["Not specified",\n    SPHEROID["Sphere",\' + earthUtils.earthRadius + \',0]],\n  PRIMEM["Greenwich",0.0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",EAST],\n  AXIS["Geocentric Z",NORTH]\n]'});a.WGS84ECEFSpatialReference=new c({wkt:'GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",6378137,298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]'});
var r;(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";a[a.WGS84=2]="WGS84";a[a.WEBMERC=3]="WEBMERC";a[a.WGS84_ECEF=4]="WGS84_ECEF"})(r||(r={}));var z,x,p,n;a.vectorToVector=m;a.pointToVector=function(a,b,c){E[0]=a.x;E[1]=a.y;var d=a.z;E[2]=void 0!==d?d:0;return g(E,a.spatialReference,0,b,c,0,1)};a.vectorToPoint=function(a,b,c,d){"esri.geometry.SpatialReference"===c.declaredClass?(d=c,c=new f({spatialReference:d})):d=d||c.spatialReference;return g(a,b,0,E,d,0,1)?(c.x=E[0],
c.y=E[1],c.z=E[2],c.spatialReference=d,c):null};a.xyzToVector=function(a,b,c,d,e,k){E[0]=a;E[1]=b;E[2]=c;return g(E,d,0,e,k,0,1)};a.bufferToBuffer=g;a.computeLinearTransformation=function(a,b,c,d){var e=t(a),g=t(d);if(e===g&&g!==r.SPHERICAL_ECEF&&(e!==r.UNKNOWN||a.equals(d)))return l.mat4d.identity(c),l.mat4d.translate(c,b),!0;if(g===r.SPHERICAL_ECEF){if(a=B[e])return a(b,0,J,0),y(J,0,ha,0),d=C*J[0],a=C*J[1],b=Math.sin(d),d=Math.cos(d),e=Math.sin(a),a=Math.cos(a),c[0]=-b,c[4]=-e*d,c[8]=a*d,c[12]=
ha[0],c[1]=d,c[5]=-e*b,c[9]=a*b,c[13]=ha[1],c[2]=0,c[6]=a,c[10]=e,c[14]=ha[2],c[3]=0,c[7]=0,c[11]=0,c[15]=1,!0}else if(g===r.WEBMERC&&(e===r.WGS84||e===r.SPHERICAL_ECEF))return B[e](b,0,J,0),b=C*J[1],w(J,0,ha,0),l.mat4d.identity(c),l.mat4d.translate(c,ha),b=1/Math.cos(b),l.mat4d.scale(c,[b,b,1]),!0;return!1};a.transformDirection=function(a,b,c,d,e){l.vec3d.set(a,ea);l.vec3d.add(a,b,ba);m(ea,c,ea,e);m(ba,c,ba,e);l.vec3d.subtract(ba,ea,d);l.vec3d.normalize(d)};a.mbsToMbs=function(a,b,c,d){var e=t(b),
g=t(d);if(e===g&&(e!==r.UNKNOWN||b.equals(d)))return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],!0;if(g===r.SPHERICAL_ECEF){if(b=B[e])return b(a,0,J,0),y(J,0,c,0),c[3]=a[3],!0}else if(g===r.WEBMERC&&(e===r.WGS84||e===r.SPHERICAL_ECEF))return B[e](a,0,J,0),b=Math.abs(C*J[1])+Math.asin(a[3]/(D+a[2])),w(J,0,c,0),c[3]=b>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(b)*a[3],!0;return!1};a.extentToBoundingBox=function(a,b,c){if(null==a)return!1;var d;E[0]=null!=a.xmin?a.xmin:0;E[1]=null!=a.ymin?a.ymin:0;E[2]=
null!=a.zmin?a.zmin:0;d=g(E,a.spatialReference,0,b,c,0,1);E[0]=null!=a.xmax?a.xmax:0;E[1]=null!=a.ymax?a.ymax:0;E[2]=null!=a.zmax?a.zmax:0;d=d&&g(E,a.spatialReference,0,b,c,3,1);null==a.xmin&&(b[0]=-Infinity);null==a.ymin&&(b[1]=-Infinity);null==a.zmin&&(b[2]=-Infinity);null==a.xmax&&(b[3]=Infinity);null==a.ymax&&(b[4]=Infinity);null==a.zmax&&(b[5]=Infinity);return d};a.extentToBoundingRect=function(a,b,c){if(null==a)return!1;var d;E[0]=null!=a.xmin?a.xmin:0;E[1]=null!=a.ymin?a.ymin:0;E[2]=null!=
a.zmin?a.zmin:0;d=g(E,a.spatialReference,0,E,c,0,1);b[0]=E[0];b[1]=E[1];E[0]=null!=a.xmax?a.xmax:0;E[1]=null!=a.ymax?a.ymax:0;E[2]=null!=a.zmax?a.zmax:0;d=d&&g(E,a.spatialReference,0,E,c,0,1);b[2]=E[0];b[3]=E[1];null==a.xmin&&(b[0]=-Infinity);null==a.ymin&&(b[1]=-Infinity);null==a.xmax&&(b[2]=Infinity);null==a.ymax&&(b[3]=Infinity);return d};a.boundingRectToBoundingRect=function(a,b,c,d){if(null==a)return!1;if(b.equals(d))return e.set(c,a),!0;var k;E[0]=a[0];E[1]=a[1];E[2]=0;k=g(E,b,0,E,d,0,1);c[0]=
E[0];c[1]=E[1];E[0]=a[2];E[1]=a[3];E[2]=0;k=k&&g(E,b,0,E,d,0,1);c[2]=E[0];c[3]=E[1];return k};(function(a){a.x2lon=function(a){return a/D};a.y2lat=function(a){return Math.PI/2-2*Math.atan(Math.exp(-1*a/D))};a.lon2x=function(a){return a*D};a.lat2y=function(a){a=Math.sin(a);return D/2*Math.log((1+a)/(1-a))}})(a.webMercator||(a.webMercator={}));var A=[void 0,y,v,w,function(a,b,c,d){var e=H,g=C*a[b],k=C*a[b+1];a=a[b+2];b=Math.sin(k);var k=Math.cos(k),h=e.a/Math.sqrt(1-e.e2*b*b);c[d++]=(h+a)*k*Math.cos(g);
c[d++]=(h+a)*k*Math.sin(g);c[d++]=(h*(1-e.e2)+a)*b}],B=[void 0,function(a,b,c,e){var g=k.Vec3Compact.length(a,b),h=d.asin(a[b+2]/g);a=(0<a[b+1]?1:-1)*d.acos(a[b]/(Math.cos(h)*g));c[e++]=F*a;c[e++]=F*h;c[e]=g-D},v,function(a,b,c,d){c[d++]=F*(a[b++]/D);c[d++]=F*(Math.PI/2-2*Math.atan(Math.exp(-1*a[b++]/D)));c[d]=a[b]},function(a,b,c,d){var e=H,g=a[b],k=a[b+1];a=a[b+2];var h,f,m,n,t,l;b=Math.abs(a);h=g*g+k*k;f=Math.sqrt(h);m=h+a*a;n=Math.sqrt(m);g=Math.atan2(k,g);t=a*a/m;m=h/m;k=e.a2/n;h=e.a3-e.a4/n;
.3<m?(t=b/n*(1+m*(e.a1+k+t*h)/n),n=Math.asin(t),k=t*t,m=Math.sqrt(1-k)):(m=f/n*(1-t*(e.a5-k-m*h)/n),n=Math.acos(m),k=1-m*m,t=Math.sqrt(k));l=1-e.e2*k;k=e.a/Math.sqrt(l);e=e.a6*k;k=f-k*m;h=b-e*t;b=m*k+t*h;f=m*h-t*k;e=f/(e/l+b);n+=e;0>a&&(n=-n);c[d++]=F*g;c[d++]=F*n;c[d]=b+f*e/2}],C=d.deg2rad(1),F=d.rad2deg(1),D=h.earthRadius,H={a:6378137,e2:.006694379990137799,a1:42697.67270715754,a2:1.8230912546075456E9,a3:142.91722289812412,a4:4.557728136518864E9,a5:42840.589930055656,a6:.9933056200098622},E=l.vec3d.create(),
J=l.vec3d.create(),ha=l.vec3d.create(),ea=l.vec3d.create(),ba=l.vec3d.create()})},"esri/geometry/support/aaBoundingRect":function(){define(["require","exports","../../geometry"],function(b,a,f){function c(b){void 0===b&&(b=a.ZERO);return[b[0],b[1],b[2],b[3]]}function e(a){return a[0]>=a[2]?0:a[2]-a[0]}function l(a){return a[1]>=a[3]?0:a[3]-a[1]}function h(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a}function d(a){return 4===a.length}function k(a,b,c){return a<b?b:a>c?c:a}Object.defineProperty(a,
"__esModule",{value:!0});a.create=c;a.fromValues=function(a,b,d,e,k){void 0===k&&(k=c());k[0]=a;k[1]=b;k[2]=d;k[3]=e;return k};a.fromExtent=function(a,b){void 0===b&&(b=c());b[0]=a.xmin;b[1]=a.ymin;b[2]=a.xmax;b[3]=a.ymax;return b};a.toExtent=function(a,b){return new f.Extent({xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:b})};a.expandPointInPlace=function(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[2]&&(a[2]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[3]&&(a[3]=b[1])};a.expand=function(a,b,c){void 0===
c&&(c=a);if("length"in b)if(d(b))c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.max(a[2],b[2]),c[3]=Math.max(a[3],b[3]);else{if(2===b.length||3===b.length)c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.max(a[2],b[0]),c[3]=Math.max(a[3],b[1])}else switch(b.type){case "extent":c[0]=Math.min(a[0],b.xmin);c[1]=Math.min(a[1],b.ymin);c[2]=Math.max(a[2],b.xmax);c[3]=Math.max(a[3],b.ymax);break;case "point":c[0]=Math.min(a[0],b.x),c[1]=Math.min(a[1],b.y),c[2]=Math.max(a[2],b.x),
c[3]=Math.max(a[3],b.y)}return c};a.expandWithNestedArray=function(a,b,c){void 0===c&&(c=a);var d=b.length,e=a[0],g=a[1],k=a[2];a=a[3];for(var h=0;h<d;h++){var f=b[h],e=Math.min(e,f[0]),g=Math.min(g,f[1]),k=Math.max(k,f[0]);a=Math.max(a,f[1])}c[0]=e;c[1]=g;c[2]=k;c[3]=a;return c};a.allFinite=function(a){for(var b=0;4>b;b++)if(!isFinite(a[b]))return!1;return!0};a.width=e;a.height=l;a.area=function(a){return e(a)*l(a)};a.center=function(a,b){void 0===b&&(b=[0,0]);b[0]=a[0]+e(a)/2;b[1]=a[1]+l(a)/2;return b};
a.containsPoint=function(a,b){return b[0]>=a[0]&&b[1]>=a[1]&&b[0]<=a[2]&&b[1]<=a[3]};a.containsPointWithMargin=function(a,b,c){return b[0]>=a[0]-c&&b[1]>=a[1]-c&&b[0]<=a[2]+c&&b[1]<=a[3]+c};a.intersects=function(a,b){return Math.max(b[0],a[0])<=Math.min(b[2],a[2])&&Math.max(b[1],a[1])<=Math.min(b[3],a[3])};a.contains=function(a,b){return b[0]>=a[0]&&b[2]<=a[2]&&b[1]>=a[1]&&b[3]<=a[3]};a.intersection=function(a,b,c){void 0===c&&(c=a);var d=b[0],e=b[1],g=b[2];b=b[3];c[0]=k(a[0],d,g);c[1]=k(a[1],e,b);
c[2]=k(a[2],d,g);c[3]=k(a[3],e,b);return c};a.offset=function(a,b,c,d){void 0===d&&(d=a);d[0]=a[0]+b;d[1]=a[1]+c;d[2]=a[2]+b;d[3]=a[3]+c;return d};a.setMin=function(a,b,c){void 0===c&&(c=a);c[0]=b[0];c[1]=b[1];c!==a&&(c[2]=a[2],c[3]=a[3]);return c};a.setMax=function(a,b,c){void 0===c&&(c=a);c[2]=b[0];c[3]=b[1];c!==a&&(c[0]=a[0],c[1]=a[1]);return a};a.set=h;a.empty=function(b){return b?h(b,a.NEGATIVE_INFINITY):c(a.NEGATIVE_INFINITY)};a.is=d;a.isPoint=function(a){return(0===e(a)||!isFinite(a[0]))&&
(0===l(a)||!isFinite(a[1]))};a.equals=function(a,b,c){if(null==a||null==b)return a===b;if(!d(a)||!d(b))return!1;if(c)for(var e=0;e<a.length;e++){if(!c(a[e],b[e]))return!1}else for(e=0;e<a.length;e++)if(a[e]!==b[e])return!1;return!0};a.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];a.NEGATIVE_INFINITY=[Infinity,Infinity,-Infinity,-Infinity];a.ZERO=[0,0,0,0]})},"esri/views/3d/support/earthUtils":function(){define("require exports ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/support/webMercatorUtils ../lib/glMatrix ./mathUtils".split(" "),
function(b,a,f,c,e,l,h){function d(b,c,d,e){var g,k;b instanceof f&&c instanceof f&&(d=c.longitude,e=c.latitude,k=b.latitude,g=b.longitude);b=h.deg2rad(k);e=h.deg2rad(e);g=h.deg2rad(g);c=h.deg2rad(d);d=Math.sin((b-e)/2);g=Math.sin((g-c)/2);d=2*h.asin(Math.sqrt(d*d+Math.cos(b)*Math.cos(e)*g*g))*a.earthRadius;return Math.round(1E4*d)/1E4}function k(b,c,d){b=d/a.earthRadius;c=h.deg2rad(c);b=Math.sin(b/2);c=Math.cos(c);c=2*h.asin(Math.sqrt(b*b/(c*c)));return h.rad2deg(c)}function m(b,c,d){return h.rad2deg(d/
a.earthRadius)}function g(a,b){a/=15;b||(a=Math.round(a));return a}Object.defineProperty(a,"__esModule",{value:!0});a.wgs84Radius=6378137;a.wgs84InverseFlattening=298.257223563;a.wgs84Flattening=1/a.wgs84InverseFlattening;a.wgs84PolarRadius=a.wgs84Radius*(1-a.wgs84Flattening);a.wgs84Eccentricity=.0818191908426215;a.earthRadius=a.wgs84Radius;a.halfEarthCircumference=Math.PI*a.earthRadius;a.earthCircumference=2*a.halfEarthCircumference;a.metersPerDegree=a.halfEarthCircumference/180;var t=new f(0,0,
c.WGS84);a.getGreatCircleDistance=d;a.getGreatCircleSpanAt=function(a,b,c){var e=b.spatialReference,g=new f(b.x,a.y,e),k=new f(c.x,a.y,e);b=new f(a.x,b.y,e);a=new f(a.x,c.y,e);return{lon:d(g,k),lat:d(b,a)}};a.getLonDeltaForDistance=k;a.getLatDeltaForDistance=m;a.getLatLonDeltaForDistance=function(a,b,c){return{lat:m(a,b,c),lon:k(a,b,c)}};a.getMaxCameraAltitude=function(b){b=h.deg2rad(b/2);return(1-Math.sin(b))*a.earthRadius/Math.sin(b)};a.getViewExtentDistance=function(b,c){c=h.deg2rad(c/2);return 2*
h.acos((Math.pow(b+a.earthRadius,2)+Math.pow(a.earthRadius,2)-Math.pow((b+a.earthRadius)*Math.cos(c)-Math.sqrt(Math.pow(Math.cos(c)*(b+a.earthRadius),2)-b*b-2*b*a.earthRadius),2))/(2*(b+a.earthRadius)*a.earthRadius))*a.earthRadius};a.computeCarthesianDistance=function(b,c){function d(b){var c=h.deg2rad(b.latitude),d=h.deg2rad(b.longitude),e=Math.cos(c);b=a.earthRadius+(b.z||0);return[Math.cos(d)*e*b,Math.sin(c)*b,-Math.sin(d)*e*b]}b=d(b);c=d(c);c=[c[0]-b[0],c[1]-b[1],c[2]-b[2]];return Math.sqrt(c[0]*
c[0]+c[1]*c[1]+c[2]*c[2])};a.longitudeToTimezone=g;a.positionToTimezone=function(a,b){a.spatialReference.wkid!==c.WGS84.wkid?e.webMercatorToGeographic(a,!1,t):(t.x=a.x,t.y=a.y);t.z=a.z;b||(b={hours:0,minutes:0,seconds:0});b.hours=g(t.x,!0);a=b.hours%1;b.hours-=a;b.minutes=60*a;a=b.minutes%1;b.minutes-=a;b.seconds=Math.round(60*a);return b};a.distanceToIdealHorizon=function(b,c){c=c||a.earthRadius;b=l.vec3d.dot(b,b);return Math.sqrt(Math.abs(b-c*c))}})},"esri/views/3d/support/mathUtils":function(){define(["require",
"exports","../lib/glMatrix"],function(b,a,f){function c(a){return Math.asin(1<a?1:-1>a?-1:a)}function e(a){return Math.acos(1<a?1:-1>a?-1:a)}function l(a,b,c){return a<b?b:a>c?c:a}function h(a){for(var b in a){var c=a[b];c instanceof Function&&(a[b]=c.bind(a))}return a}Object.defineProperty(a,"__esModule",{value:!0});a.deg2rad=function(a){return a*Math.PI/180};a.rad2deg=function(a){return 180*a/Math.PI};a.asin=c;a.acos=e;a.sign=Math.sign||function(a){return+(0<a)-+(0>a)||+a};a.log2=Math.log2||function(a){return Math.log(a)/
Math.LN2};a.fovx2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/b)};a.fovy2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/c)};a.makeOrthonormal=function(a,b,c){c=c||a;var d=f.vec3d.dot(a,b);f.vec3d.set3(a[0]-d*b[0],a[1]-d*b[1],a[2]-d*b[2],c);f.vec3d.normalize(c)};a.tangentFrame=function(a,b,c){Math.abs(a[0])>Math.abs(a[1])?f.vec3d.set3(0,1,0,b):f.vec3d.set3(1,0,0,b);f.vec3d.cross(a,b,c);f.vec3d.normalize(b);f.vec3d.cross(c,a,b);f.vec3d.normalize(c)};a.cartesianToSpherical=function(a,
b){var d=f.vec3d.length(a),e=c(a[2]/d);f.vec3d.set3(d,e,Math.atan2(a[1]/d,a[0]/d),b)};a.sphericalToCartesian=function(a,b){var c=a[0],d=a[1];a=a[2];var e=Math.cos(d);f.vec3d.set3(c*e*Math.cos(a),c*e*Math.sin(a),c*Math.sin(d),b)};a.lerp=function(a,b,c){return a+(b-a)*c};a.bilerp=function(a,b,c,d,e,k){a+=(b-a)*e;return a+(c+(d-c)*e-a)*k};a.slerp=function(a,b,c,d){void 0===d&&(d=a);var e=f.vec3d.length(a),g=f.vec3d.length(b),h=f.vec3d.dot(a,b)/(e*g);if(.9999999999999999>h){var h=Math.acos(h),l=((1-c)*
e+c*g)/Math.sin(h),g=l/g*Math.sin(c*h);f.vec3d.scale(a,l/e*Math.sin((1-c)*h),k);f.vec3d.scale(b,g,m);return f.vec3d.add(k,m,d)}return f.vec3d.lerp(a,b,c,d)};a.angle=function(a,b,c){a=f.vec3d.normalize(a,k);b=f.vec3d.normalize(b,m);var g=e(f.vec3d.dot(a,b));return c&&(a=f.vec3d.cross(a,b,d),0>f.vec3d.dot(a,c))?-g:g};a.clamp=l;a.isFinite=Number.isFinite||function(a){return"number"===typeof a&&window.isFinite(a)};a.isNaN=Number.isNaN||function(a){return a!==a};a.makePiecewiseLinearFunction=function(a){var b=
a.length;return function(c){var d=0;if(c<=a[0][0])return a[0][1];if(c>=a[b-1][0])return a[b-1][1];for(;c>a[d][0];)d++;var e=a[d][0];c=(e-c)/(e-a[d-1][0]);return c*a[d-1][1]+(1-c)*a[d][1]}};a.vectorEquals=function(a,b){if(null==a||null==b)return a!==b;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0};a.floatEqualRelative=function(b,c,d){void 0===d&&(d=1E-6);if(a.isNaN(b)||a.isNaN(c))return!1;if(b===c)return!0;var e=Math.abs(b-c),g=Math.abs(b),k=Math.abs(c);
if(0===b||0===c||1E-12>g&&1E-12>k){if(e>.01*d)return!1}else if(e/(g+k)>d)return!1;return!0};a.floatEqualAbsolute=function(b,c,d){void 0===d&&(d=1E-6);return a.isNaN(b)||a.isNaN(c)?!1:(b>c?b-c:c-b)<=d};b=function(){function a(a,b){this.min=a;this.max=b;this.range=b-a}a.prototype.ndiff=function(a,b){void 0===b&&(b=0);return Math.ceil((a-b)/this.range)*this.range+b};a.prototype._normalize=function(a,b,c,d){void 0===d&&(d=0);c-=d;c<a?c+=this.ndiff(a-c):c>b&&(c-=this.ndiff(c-b));return c+d};a.prototype.normalize=
function(a,b){return this._normalize(this.min,this.max,a,b)};a.prototype.clamp=function(a,b){void 0===b&&(b=0);return l(a-b,this.min,this.max)+b};a.prototype.monotonic=function(a,b,c){return a<b?b:b+this.ndiff(a-b,c)};a.prototype.minimalMonotonic=function(a,b,c){return this._normalize(a,a+this.range,b,c)};a.prototype.center=function(a,b,c){b=this.monotonic(a,b,c);return this.normalize((a+b)/2,c)};a.prototype.diff=function(a,b,c){return this.monotonic(a,b,c)-a};a.prototype.contains=function(a,b,c){b=
this.minimalMonotonic(a,b);c=this.minimalMonotonic(a,c);return c>a&&c<b};return a}();a.Cyclical=b;a.cyclical2PI=h(new b(0,2*Math.PI));a.cyclicalPI=h(new b(-Math.PI,Math.PI));a.cyclicalDeg=h(new b(0,360));var d=f.vec3d.create(),k=f.vec3d.create(),m=f.vec3d.create()})},"esri/views/3d/webgl-engine/lib/BufferVectorMath":function(){define(["require","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});(function(a){a.length=function(a,b){var c=a[b],e=a[b+1];a=a[b+2];return Math.sqrt(c*
c+e*e+a*a)};a.normalize=function(a,b){var c=a[b],e=a[b+1],d=a[b+2],c=1/Math.sqrt(c*c+e*e+d*d);a[b]*=c;a[b+1]*=c;a[b+2]*=c};a.scale=function(a,b,f){a[b]*=f;a[b+1]*=f;a[b+2]*=f};a.add=function(a,b,f,h,d,k){void 0===k&&(k=b);d=d||a;d[k]=a[b]+f[h];d[k+1]=a[b+1]+f[h+1];d[k+2]=a[b+2]+f[h+2]};a.subtract=function(a,b,f,h,d,k){void 0===k&&(k=b);d=d||a;d[k]=a[b]-f[h];d[k+1]=a[b+1]-f[h+1];d[k+2]=a[b+2]-f[h+2]}})(a.Vec3Compact||(a.Vec3Compact={}))})},"esri/geometry/support/meshUtils/offset":function(){define(["require",
"exports","./projection","../../../views/3d/lib/glMatrix","../../../views/3d/support/projectionUtils"],function(b,a,f,c,e){function l(a,b){if(a)for(var c=0;c<a.length;c+=3)for(var d=0;3>d;d++)a[c+d]+=b[d]}Object.defineProperty(a,"__esModule",{value:!0});a.offset=function(a,b,t){if(a.vertexAttributes&&a.vertexAttributes.position){var g=a.spatialReference;if(g.isWGS84||g.isWebMercator&&(!t||!1!==t.geographic)){t=a.spatialReference;var g=a.vertexAttributes.position,m=a.vertexAttributes.normal,y=new Float64Array(g.length),
r=new Float32Array(m?m.length:0),z=a.extent.center,x=h;e.computeLinearTransformation(t,[z.x,z.y,z.z],d,e.SphericalECEFSpatialReference);c.mat4d.toMat3(d,k);c.mat3d.multiplyVec3(k,b,x);f.projectToECEF(g,t,y);m&&f.projectNormalToECEF(m,g,y,t,r);l(y,x);f.projectFromECEF(y,g,t);m&&f.projectNormalFromECEF(r,g,y,t,m)}else l(a.vertexAttributes.position,b);a.clearCache()}};var h=c.vec3d.create(),d=c.mat4d.create(),k=c.mat3d.create()})},"esri/geometry/support/meshUtils/primitives":function(){define(["require",
"exports","../../../geometry","./georeference","../../../views/3d/lib/glMatrix"],function(b,a,f,c,e){Object.defineProperty(a,"__esModule",{value:!0});a.createUnitSizeBox=function(){for(var a=h.faceDescriptions,b=h.faceVertexOffsets,c=h.uvScales,d=4*a.length,e=new Float64Array(3*d),k=new Float32Array(3*d),d=new Float32Array(2*d),f=new Uint32Array(6*a.length),l=0,x=0,p=0,n=0,A=0;A<a.length;A++){for(var B=a[A],C=l/3,F=0,D=b;F<D.length;F++){var H=D[F];f[n++]=C+H}C=B.corners;for(F=0;4>F;F++){D=C[F];H=
0;d[p++]=.25*c[F][0]+B.uvOrigin[0];d[p++]=B.uvOrigin[1]-.25*c[F][1];for(var E=0;3>E;E++)0!==B.axis[E]?(e[l++]=.5*B.axis[E],k[x++]=B.axis[E]):(e[l++]=.5*D[H++],k[x++]=0)}}return{position:e,normal:k,uv:d,faces:f}};a.createUnitSizeSphere=function(a){void 0===a&&(a=0);a=Math.round(8*Math.pow(2,a));for(var b=2*a,c=(a-1)*(b+1)+2*b,e=new Float64Array(3*c),k=new Float32Array(3*c),c=new Float32Array(2*c),h=new Uint32Array((a-1)*b*6),f=0,m=0,l=0,p=0,n=0,A=0;A<=a;A++){var B=A/a*Math.PI+.5*Math.PI,C=Math.cos(B);
d[2]=Math.sin(B);for(var F=(B=0===A||A===a)?b-1:b,D=0;D<=F;D++){var H=D/F*2*Math.PI;d[0]=-Math.sin(H)*C;d[1]=Math.cos(H)*C;for(H=0;3>H;H++)e[f++]=.5*d[H],k[m++]=d[H];c[l++]=(D+(B?.5:0))/b;c[l++]=A/a;0!==A&&D!==b&&(A!==a&&(h[p++]=n,h[p++]=n+1,h[p++]=n-b),1!==A&&(h[p++]=n,h[p++]=n-b,h[p++]=n-b-1));n++}}return{position:e,normal:k,uv:c,faces:h}};a.createUnitSizeCylinder=function(a){void 0===a&&(a=0);a=Math.round(16*Math.pow(2,a));for(var b=4*(a+1)+2*a,c=new Float64Array(3*b),e=new Float32Array(3*b),b=
new Float32Array(2*b),k=new Uint32Array(12*a),h=0,f=0,m=0,l=0,p=0,n=0;5>=n;n++)for(var A=0===n||5===n,B=1>=n||4<=n,C=2===n||4===n,F=A?a-1:a,D=0;D<=F;D++){var H=D/F*2*Math.PI,E=A?0:.5;d[0]=E*Math.sin(H);d[1]=E*-Math.cos(H);d[2]=2>=n?.5:-.5;for(H=0;3>H;H++)c[h++]=d[H],B?e[f++]=2===H?1>=n?1:-1:0:e[f++]=2===H?0:d[H]/E;b[m++]=(D+(A?.5:0))/a;1>=n?b[m++]=1*n/3:3>=n?b[m++]=1*(n-2)/3+1/3:b[m++]=1*(n-4)/3+2/3;C||0===n||D===a||(5!==n&&(k[l++]=p,k[l++]=p+1,k[l++]=p-a),1!==n&&(k[l++]=p,k[l++]=p-a,k[l++]=p-a-1));
p++}return{position:c,normal:e,uv:b,faces:k}};a.createUnitSizePlane=function(a){a=l.facingAxisOrderSwap[a];for(var b=l.position,c=l.normal,d=new Float64Array(b.length),e=new Float32Array(c.length),k=0,h=0;4>h;h++)for(var f=k,m=0;3>m;m++){var p=a[m],n=Math.abs(p)-1,p=0<=p?1:-1;d[k]=b[f+n]*p;e[k]=c[f+n]*p;k++}return{position:d,normal:e,uv:new Float32Array(l.uv),faces:new Uint32Array(l.faces)}};var l={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],
faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};a.convertUnitGeometry=function(a,b,h){for(var g=0;g<a.position.length;g+=3)a.position[g+2]+=.5;g=h&&h.size;if(null!=g){g="number"===typeof g?[g,g,g]:[null!=g.width?g.width:1,null!=g.depth?g.depth:1,null!=g.height?g.height:1];k[0]=g[0];k[4]=g[1];k[8]=g[2];for(var m=0;m<a.position.length;m+=3){for(var l=0;3>l;l++)d[l]=a.position[m+l];e.mat3d.multiplyVec3(k,d);for(l=0;3>l;l++)a.position[m+
l]=d[l]}if(g[0]!==g[1]||g[1]!==g[2])for(k[0]=1/g[0],k[4]=1/g[1],k[8]=1/g[2],m=0;m<a.normal.length;m+=3){for(l=0;3>l;l++)d[l]=a.normal[m+l];e.mat3d.multiplyVec3(k,d);e.vec3d.normalize(d);for(l=0;3>l;l++)a.normal[m+l]=d[l]}}g=c.georeference(a,b,h);return new f.Mesh({vertexAttributes:{position:g.position,normal:g.normal,uv:a.uv},components:[{faces:a.faces,material:h&&h.material||null}],spatialReference:b.spatialReference})};var h={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,
-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]};a.boxFaceOrder={south:0,east:1,north:2,west:3,up:4,
down:5};var d=e.vec3d.create(),k=e.mat3d.identity()})},"esri/geometry/support/meshUtils/georeference":function(){define(["require","exports","../../../views/3d/lib/glMatrix","../../../views/3d/support/projectionUtils"],function(b,a,f,c){Object.defineProperty(a,"__esModule",{value:!0});a.georeference=function(a,b,k){var d=b.spatialReference;if(d.isWGS84||d.isWebMercator&&(!k||!1!==k.geographic)){k=b.spatialReference;c.computeLinearTransformation(b.spatialReference,[b.x,b.y,b.z||0],e,c.SphericalECEFSpatialReference);
var d=a.position,g=e,h=b.spatialReference,v=new Float64Array(d.length);for(b=0;b<d.length;b+=3){for(var w=0;3>w;w++)l[w]=d[b+w];f.mat4d.multiplyVec3(g,l);for(w=0;3>w;w++)v[b+w]=l[w]}b=new Float64Array(d.length);c.bufferToBuffer(v,c.SphericalECEFSpatialReference,0,b,h,0,v.length/3);a=a.normal;if(k.isWebMercator&&a){k=new Float32Array(a.length);for(d=0;d<a.length;d+=3)for(g=c.webMercator.y2lat(b[d+1]),g=Math.cos(g),l[0]=a[d+0]*g,l[1]=a[d+1]*g,l[2]=a[d+2],f.vec3d.normalize(l),g=0;3>g;g++)k[d+g]=l[g];
a=k}a={position:b,normal:a}}else{k=new Float64Array(a.position.length);d=a.position;for(g=0;g<d.length;g+=3)k[g+0]=d[g+0]+b.x,k[g+1]=d[g+1]+b.y,k[g+2]=d[g+2]+(b.z||0);a={position:k,normal:a.normal}}return a};var e=f.mat4d.create(),l=f.vec3d.create()})},"esri/geometry/support/meshUtils/rotate":function(){define("require exports ../../../core/Logger ./projection ../../../views/3d/lib/glMatrix ../../../views/3d/support/projectionUtils".split(" "),function(b,a,f,c,e,l){function h(a,b,c){void 0===c&&(c=
y);if(a)for(e.mat4d.identity(v),e.mat4d.rotate(v,b[3],b),b=0;b<a.length;b+=3){for(var d=0;3>d;d++)k[d]=a[b+d]-c[d];e.mat4d.multiplyVec3(v,k);for(d=0;3>d;d++)a[b+d]=k[d]+c[d]}}Object.defineProperty(a,"__esModule",{value:!0});var d=f.getLogger("esri.geometry.support.meshUtils.rotate");a.rotate=function(a,b,g){if(a.vertexAttributes&&a.vertexAttributes.position&&0!==b[3]){var k=a.spatialReference,f=g&&g.origin||a.extent.center;if(k.isWGS84||k.isWebMercator&&(!g||!1!==g.geographic)){g=a.spatialReference;
k=r;l.pointToVector(f,k,l.SphericalECEFSpatialReference)||l.pointToVector(a.extent.center,k,l.SphericalECEFSpatialReference);var f=a.vertexAttributes.position,t=a.vertexAttributes.normal,p=new Float64Array(f.length),x=new Float32Array(t?t.length:0);l.computeLinearTransformation(l.SphericalECEFSpatialReference,k,v,l.SphericalECEFSpatialReference);e.mat4d.toMat3(v,w);var y=e.mat3d.multiplyVec3(w,b,m);y[3]=b[3];c.projectToECEF(f,g,p);t&&c.projectNormalToECEF(t,f,p,g,x);h(p,y,k);c.projectFromECEF(p,f,
g);t&&(h(x,y),c.projectNormalFromECEF(x,f,p,g,t))}else g=r,l.pointToVector(f,g,a.spatialReference)||(k=a.extent.center,g[0]=k.x,g[1]=k.y,g[2]=k.z,d.error("Failed to project specified origin (wkid:"+f.spatialReference.wkid+") to mesh spatial reference (wkid:"+a.spatialReference.wkid+"). Using mesh extent.center instead")),h(a.vertexAttributes.position,b,g),h(a.vertexAttributes.normal,b);a.clearCache()}};a.axisAngleFrom=function(a,b,c){e.vec3d.set(a,c);c[3]=b;return c};a.axisAngleMultiply=function(a,
b,c){e.quat4d.fromAngleAxis(a[3],a,g);e.quat4d.fromAngleAxis(b[3],b,t);e.quat4d.multiply(t,g,g);e.quat4d.toAngleAxis(g,c);return c};var k=e.vec3d.create(),m=e.vec4d.create(),g=e.quat4d.create(),t=e.quat4d.create(),v=e.mat4d.create(),w=e.mat3d.create(),y=[0,0,0],r=[0,0,0]})},"esri/geometry/Multipoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./support/zmUtils".split(" "),
function(b,a,f,c,e,l,h,d,k,m){function g(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}b=function(a){function b(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.points=[];b.type="multipoint";return b}f(b,a);d=b;b.prototype.normalizeCtorArgs=function(a,b){if(!a&&!b)return null;var c={};Array.isArray(a)?(c.points=a,c.spatialReference=b):!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?(a.points&&(c.points=a.points),a.spatialReference&&(c.spatialReference=
a.spatialReference),a.hasZ&&(c.hasZ=a.hasZ),a.hasM&&(c.hasM=a.hasM)):c.spatialReference=a;if(a=c.points&&c.points[0])void 0===c.hasZ&&void 0===c.hasM?(c.hasZ=2<a.length,c.hasM=!1):void 0===c.hasZ?c.hasZ=3<a.length:void 0===c.hasM&&(c.hasM=3<a.length);return c};Object.defineProperty(b.prototype,"extent",{get:function(){var a=this.points;if(!a.length)return null;for(var b=new h,c=this.hasZ,d=this.hasM,e=c?3:2,k=a[0],f=g(Math.min),m=g(Math.max),l=k[0],t=k[1],w=k[0],k=k[1],v,E,J,ha,ea=0,ba=a.length;ea<
ba;ea++){var Q=a[ea],Y=Q[0],V=Q[1],l=f(l,Y),t=f(t,V),w=m(w,Y),k=m(k,V);c&&2<Q.length&&(Y=Q[2],v=f(v,Y),J=m(J,Y));d&&Q.length>e&&(Q=Q[e],E=f(E,Q),ha=m(ha,Q))}b.xmin=l;b.ymin=t;b.xmax=w;b.ymax=k;b.spatialReference=this.spatialReference;c?(b.zmin=v,b.zmax=J):(b.zmin=null,b.zmax=null);d?(b.mmin=E,b.mmax=ha):(b.mmin=null,b.mmax=null);return b},enumerable:!0,configurable:!0});b.prototype.writePoints=function(a,b,c,d){b.points=e.clone(this.points)};b.prototype.addPoint=function(a){this.clearCache();m.updateSupportFromPoint(this,
a);Array.isArray(a)?this.points.push(a):this.points.push(a.toArray());return this};b.prototype.clone=function(){var a={points:e.clone(this.points),spatialReference:this.spatialReference};this.hasZ&&(a.hasZ=!0);this.hasM&&(a.hasM=!0);return new d(a)};b.prototype.getPoint=function(a){if(!this._validateInputs(a))return null;a=this.points[a];var b={x:a[0],y:a[1],spatialReference:this.spatialReference},c=2;this.hasZ&&(b.z=a[2],c=3);this.hasM&&(b.m=a[c]);return new k(b)};b.prototype.removePoint=function(a){if(!this._validateInputs(a))return null;
this.clearCache();return new k(this.points.splice(a,1)[0],this.spatialReference)};b.prototype.setPoint=function(a,b){if(!this._validateInputs(a))return this;this.clearCache();m.updateSupportFromPoint(b);this.points[a]=b.toArray();return this};b.prototype.toJSON=function(a){return this.write(null,a)};b.prototype._validateInputs=function(a){return null!=a&&0<=a&&a<this.points.length};c([l.property({dependsOn:["points","hasZ","hasM","spatialReference"]})],b.prototype,"cache",void 0);c([l.property({dependsOn:["cache"]})],
b.prototype,"extent",null);c([l.property({type:[[Number]],json:{write:{isRequired:!0}}})],b.prototype,"points",void 0);c([l.writer("points")],b.prototype,"writePoints",null);return b=d=c([l.subclass("esri.geometry.Multipoint")],b);var d}(l.declared(d));b.prototype.toJSON.isDefaultToJSON=!0;return b})},"esri/geometry/support/zmUtils":function(){define(["require","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.updateSupportFromPoint=function(a,b,e){void 0===e&&(e=!1);var c=
a.hasM,h=a.hasZ;Array.isArray(b)?4!==b.length||c||h?3===b.length&&e&&!c?(h=!0,c=!1):3===b.length&&c&&h&&(h=c=!1):h=c=!0:(h=!h&&b.hasZ&&(!c||b.hasM),c=!c&&b.hasM&&(!h||b.hasZ));a.hasZ=h;a.hasM=c}})},"esri/geometry/Polygon":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/centroid ./support/contains ./support/coordsUtils ./support/intersects ./support/webMercatorUtils ./support/zmUtils".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v,w,y,r){function z(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}var x=z(Math.min),p=z(Math.max);b=function(a){function b(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.rings=[];b.type="polygon";return b}f(b,a);d=b;b.createEllipse=function(a){var b=a.center.x,c=a.center.y,e=a.center.z,g=a.center.m,k=a.center.hasZ,h=a.center.hasM,f=a.longAxis,n=a.shortAxis,m=a.numberOfPoints;a=a.view;for(var l=[],t=2*Math.PI/m,A=k?3:2,p=0;p<m;p++){var x=
a.toMap(f*Math.cos(p*t)+b,n*Math.sin(p*t)+c),x=[x.x,x.y];k&&(x[2]=e);h&&(x[A]=g);l.push(x)}l.push(l[0]);return new d({rings:[l],spatialReference:a.spatialReference})};b.createCircle=function(a){return d.createEllipse({center:a.center,longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,view:a.view})};b.fromExtent=function(a){var b=a.clone().normalize();a=a.spatialReference;var c=!1,e=!1;b.map(function(a){a.hasZ&&(c=!0);a.hasM&&(e=!0)});b={rings:b.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,
a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(c&&a.hasZ)for(var d=a.zmin+.5*(a.zmax-a.zmin),g=0;g<b.length;g++)b[g].push(d);if(e&&a.hasM)for(a=a.mmin+.5*(a.mmax-a.mmin),g=0;g<b.length;g++)b[g].push(a);return b}),spatialReference:a};c&&(b.hasZ=!0);e&&(b.hasM=!0);return new d(b)};b.prototype.normalizeCtorArgs=function(a,b){var c=null,d,e,g=null;a&&!Array.isArray(a)?(c=a.rings?a.rings:null,b||(a.spatialReference?b=a.spatialReference:a.rings||(b=a)),d=a.hasZ,e=a.hasM):c=a;c=c||[];b=b||m.WGS84;
c.length&&c[0]&&null!=c[0][0]&&"number"===typeof c[0][0]&&(c=[c]);if(g=c[0]&&c[0][0])void 0===d&&void 0===e?(d=2<g.length,e=!1):void 0===d?d=!e&&3<g.length:void 0===e&&(e=!d&&3<g.length);return{rings:c,spatialReference:b,hasZ:d,hasM:e}};Object.defineProperty(b.prototype,"centroid",{get:function(){var a=g.polygonCentroid(this);if(!a||isNaN(a[0])||isNaN(a[1])||this.hasZ&&isNaN(a[2]))return null;var b=new k;b.x=a[0];b.y=a[1];b.spatialReference=this.spatialReference;this.hasZ&&(b.z=a[2]);return b},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"extent",{get:function(){var a=this.hasZ,b=this.hasM,c=this.spatialReference,d=this.rings,e=a?3:2;if(!d.length||!d[0].length)return null;for(var g=d[0][0],k=g[0],g=g[1],f=d[0][0],n=f[0],f=f[1],m=void 0,l=void 0,t=void 0,A=void 0,w=[],B=0;B<d.length;B++){for(var v=d[B],y=v[0],r=y[0],y=y[1],z=v[0],da=z[0],z=z[1],X=void 0,U=void 0,ma=void 0,ja=void 0,oa=0;oa<v.length;oa++){var ia=v[oa],qa=ia[0],pa=ia[1],k=x(k,qa),g=x(g,pa),n=p(n,qa),f=p(f,pa),r=x(r,
qa),y=x(y,pa),da=p(da,qa),z=p(z,pa);a&&2<ia.length&&(qa=ia[2],m=x(m,qa),l=p(l,qa),X=x(X,qa),U=p(U,qa));b&&ia.length>e&&(ja=ia[e],t=x(m,ja),A=p(l,ja),ma=x(X,ja),ja=p(U,ja))}w.push(new h({xmin:r,ymin:y,zmin:X,mmin:ma,xmax:da,ymax:z,zmax:U,mmax:ja,spatialReference:c}))}d=new h;d.xmin=k;d.ymin=g;d.xmax=n;d.ymax=f;d.spatialReference=c;a&&(d.zmin=m,d.zmax=l);b&&(d.mmin=t,d.mmax=A);d.cache._partwise=1<w.length?w:null;return d},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isSelfIntersecting",
{get:function(){return w.isSelfIntersecting(this.rings)},enumerable:!0,configurable:!0});b.prototype.writePaths=function(a,b,c,d){b.rings=e.clone(this.rings)};b.prototype.addRing=function(a){if(a){this.clearCache();var b=this.rings,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{for(var d=[],e=0,g=a.length;e<g;e++)d[e]=a[e].toArray();b[c]=d}return this}};b.prototype.clone=function(){var a=new d;a.spatialReference=this.spatialReference;a.rings=e.clone(this.rings);a.hasZ=this.hasZ;a.hasM=this.hasM;
return a};b.prototype.contains=function(a){if(!a)return!1;y.canProject(a,this.spatialReference)&&(a=y.project(a,this.spatialReference));return t.polygonContainsPoint(this,a)};b.prototype.isClockwise=function(a){var b=this;a=Array.isArray(a[0])?a:a.map(function(a){return b.hasZ?b.hasM?[a.x,a.y,a.z,a.m]:[a.x,a.y,a.z]:[a.x,a.y]});return v.isClockwise(a,this.hasM,this.hasZ)};b.prototype.getPoint=function(a,b){if(!this._validateInputs(a,b))return null;a=this.rings[a][b];b=this.hasZ;var c=this.hasM;return b&&
!c?new k(a[0],a[1],a[2],void 0,this.spatialReference):c&&!b?new k(a[0],a[1],void 0,a[2],this.spatialReference):b&&c?new k(a[0],a[1],a[2],a[3],this.spatialReference):new k(a[0],a[1],this.spatialReference)};b.prototype.insertPoint=function(a,b,c){if(!this._validateInputs(a,b,!0))return this;this.clearCache();r.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.rings[a].splice(b,0,c);return this};b.prototype.removePoint=function(a,b){if(!this._validateInputs(a,b))return null;this.clearCache();
return new k(this.rings[a].splice(b,1)[0],this.spatialReference)};b.prototype.removeRing=function(a){if(!this._validateInputs(a,null))return null;this.clearCache();a=this.rings.splice(a,1)[0];var b=this.spatialReference;return a.map(function(a){return new k(a,b)})};b.prototype.setPoint=function(a,b,c){if(!this._validateInputs(a,b))return this;this.clearCache();r.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.rings[a][b]=c;return this};b.prototype._validateInputs=function(a,
b,c){void 0===c&&(c=!1);return null==a||0>a||a>=this.rings.length||null!=b&&(a=this.rings[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=a.length))?!1:!0};b.prototype.toJSON=function(a){return this.write(null,a)};c([l.property({dependsOn:["hasM","hasZ","rings"]})],b.prototype,"cache",void 0);c([l.property({readOnly:!0,dependsOn:["cache"]})],b.prototype,"centroid",null);c([l.property({dependsOn:["cache"],readOnly:!0})],b.prototype,"extent",null);c([l.property({dependsOn:["cache"],readOnly:!0})],b.prototype,
"isSelfIntersecting",null);c([l.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],b.prototype,"rings",void 0);c([l.writer("rings")],b.prototype,"writePaths",null);return b=d=c([l.subclass("esri.geometry.Polygon")],b);var d}(l.declared(d));b.prototype.toJSON.isDefaultToJSON=!0;return b})},"esri/geometry/support/centroid":function(){define(["require","exports","../support/coordsUtils"],function(b,a,f){function c(a,b){if(!a||!a.length)return null;for(var c=[],d=[],g=b?[Infinity,-Infinity,Infinity,
-Infinity,Infinity,-Infinity]:[Infinity,-Infinity,Infinity,-Infinity],f=0,h=a.length;f<h;f++){var w=e(a[f],b,g);w&&d.push(w)}d.sort(function(a,c){var d=a[2]-c[2];0===d&&b&&(d=a[4]-c[4]);return d});d.length&&(f=6*d[0][2],c[0]=d[0][0]/f,c[1]=d[0][1]/f,b&&(f=6*d[0][4],c[2]=0!==f?d[0][3]/f:0),c[0]<g[0]||c[0]>g[1]||c[1]<g[2]||c[1]>g[3]||b&&(c[2]<g[4]||c[2]>g[5]))&&(c.length=0);if(!c.length)if(a=a[0]&&a[0].length?l(a[0],b):null)c[0]=a[0],c[1]=a[1],b&&2<a.length&&(c[2]=a[2]);else return null;return c}function e(a,
b,c){for(var d=0,e=0,k=0,f=0,h=0,l=0,r=a.length-1;l<r;l++){var z=a[l],x=z[0],p=z[1],n=z[2],A=a[l+1],B=A[0],C=A[1],F=A[2],D=x*C-B*p,f=f+D,d=d+(x+B)*D,e=e+(p+C)*D;b&&2<z.length&&2<A.length&&(D=x*F-B*n,k+=(n+F)*D,h+=D);x<c[0]&&(c[0]=x);x>c[1]&&(c[1]=x);p<c[2]&&(c[2]=p);p>c[3]&&(c[3]=p);b&&(n<c[4]&&(c[4]=n),n>c[5]&&(c[5]=n))}0<f&&(f*=-1);0<h&&(h*=-1);if(!f)return null;a=[d,e,.5*f];b&&(a[3]=k,a[4]=.5*h);return a}function l(a,b){for(var c=b?[0,0,0]:[0,0],d=b?[0,0,0]:[0,0],e=0,h=0,l=0,w=0,y=0,r=a.length;y<
r-1;y++){var z=a[y],x=a[y+1];z&&x&&(c[0]=z[0],c[1]=z[1],d[0]=x[0],d[1]=x[1],b&&2<z.length&&2<x.length&&(c[2]=z[2],d[2]=x[2]),length=f.getLength(c,d))&&(e+=length,z=f.getMidpoint(z,x),h+=length*z[0],l+=length*z[1],b&&2<z.length&&(w+=length*z[2]))}return 0<e?b?[h/e,l/e,w/e]:[h/e,l/e]:a.length?a[0]:null}Object.defineProperty(a,"__esModule",{value:!0});a.extentCentroid=function(a){return a?a.hasZ?[a.xmax-a.xmin/2,a.ymax-a.ymin/2,a.zmax-a.zmin/2]:[a.xmax-a.xmin/2,a.ymax-a.ymin/2]:null};a.polygonCentroid=
function(a){return a?c(a.rings,a.hasZ):null};a.ringsCentroid=c;a.lineCentroid=l})},"esri/geometry/Polyline":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/zmUtils".split(" "),function(b,a,f,c,e,l,h,d,k,m,g){function t(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}var v=t(Math.min),w=t(Math.max);b=function(a){function b(){for(var b=
0;b<arguments.length;b++);b=a.call(this)||this;b.paths=[];b.type="polyline";return b}f(b,a);d=b;b.prototype.normalizeCtorArgs=function(a,b){var c=null,d,e,g=null;a&&!Array.isArray(a)?(c=a.paths?a.paths:null,b||(a.spatialReference?b=a.spatialReference:a.paths||(b=a)),d=a.hasZ,e=a.hasM):c=a;c=c||[];b=b||m.WGS84;c.length&&c[0]&&null!=c[0][0]&&"number"===typeof c[0][0]&&(c=[c]);if(g=c[0]&&c[0][0])void 0===d&&void 0===e?(d=2<g.length,e=!1):void 0===d?d=!e&&3<g.length:void 0===e&&(e=!d&&3<g.length);return{paths:c,
spatialReference:b,hasZ:d,hasM:e}};Object.defineProperty(b.prototype,"extent",{get:function(){var a=this.hasZ,b=this.hasM,c=this.spatialReference,d=this.paths,e=a?3:2;if(!d.length||!d[0].length)return null;for(var g=d[0][0],k=g[0],g=g[1],f=d[0][0],m=f[0],f=f[1],l=void 0,t=void 0,y=void 0,r=void 0,z=[],Q=0;Q<d.length;Q++){for(var Y=d[Q],V=Y[0],na=V[0],V=V[1],T=Y[0],K=T[0],T=T[1],Z=void 0,O=void 0,W=void 0,R=void 0,da=0;da<Y.length;da++){var X=Y[da],U=X[0],ma=X[1],k=v(k,U),g=v(g,ma),m=w(m,U),f=w(f,
ma),na=v(na,U),V=v(V,ma),K=w(K,U),T=w(T,ma);a&&2<X.length&&(U=X[2],l=v(l,U),t=w(t,U),Z=v(Z,U),O=w(O,U));b&&X.length>e&&(R=X[e],y=v(l,R),r=w(t,R),W=v(Z,R),R=w(O,R))}z.push(new h({xmin:na,ymin:V,zmin:Z,mmin:W,xmax:K,ymax:T,zmax:O,mmax:R,spatialReference:c}))}d=new h;d.xmin=k;d.ymin=g;d.xmax=m;d.ymax=f;d.spatialReference=c;a&&(d.zmin=l,d.zmax=t);b&&(d.mmin=y,d.mmax=r);d.cache._partwise=1<z.length?z:null;return d},enumerable:!0,configurable:!0});b.prototype.writePaths=function(a,b,c,d){b.paths=e.clone(this.paths)};
b.prototype.addPath=function(a){if(a){this.clearCache();var b=this.paths,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{for(var d=[],e=0,g=a.length;e<g;e++)d[e]=a[e].toArray();b[c]=d}return this}};b.prototype.clone=function(){var a=new d;a.spatialReference=this.spatialReference;a.paths=e.clone(this.paths);a.hasZ=this.hasZ;a.hasM=this.hasM;return a};b.prototype.getPoint=function(a,b){if(!this._validateInputs(a,b))return null;a=this.paths[a][b];b=this.hasZ;var c=this.hasM;return b&&!c?new k(a[0],
a[1],a[2],void 0,this.spatialReference):c&&!b?new k(a[0],a[1],void 0,a[2],this.spatialReference):b&&c?new k(a[0],a[1],a[2],a[3],this.spatialReference):new k(a[0],a[1],this.spatialReference)};b.prototype.insertPoint=function(a,b,c){if(!this._validateInputs(a,b,!0))return this;this.clearCache();g.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.paths[a].splice(b,0,c);return this};b.prototype.removePath=function(a){if(!this._validateInputs(a,null))return null;this.clearCache();a=
this.paths.splice(a,1)[0];var b=this.spatialReference;return a.map(function(a){return new k(a,b)})};b.prototype.removePoint=function(a,b){if(!this._validateInputs(a,b))return null;this.clearCache();return new k(this.paths[a].splice(b,1)[0],this.spatialReference)};b.prototype.setPoint=function(a,b,c){if(!this._validateInputs(a,b))return this;this.clearCache();g.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.paths[a][b]=c;return this};b.prototype._validateInputs=function(a,b,
c){void 0===c&&(c=!1);return null==a||0>a||a>=this.paths.length||null!=b&&(a=this.paths[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=a.length))?!1:!0};b.prototype.toJSON=function(a){return this.write(null,a)};c([l.property({dependsOn:["hasM","hasZ","paths"]})],b.prototype,"cache",void 0);c([l.property({dependsOn:["cache"],readOnly:!0})],b.prototype,"extent",null);c([l.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],b.prototype,"paths",void 0);c([l.writer("paths")],b.prototype,"writePaths",null);
return b=d=c([l.subclass("esri.geometry.Polyline")],b);var d}(l.declared(d));b.prototype.toJSON.isDefaultToJSON=!0;return b})},"esri/geometry/ScreenPoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(b,a,f,c,e,l){return function(a){function b(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=a.apply(this,b)||this;b.x=0;b.y=0;b.z=void 0;return b}f(b,a);
e=b;b.prototype.normalizeCtorArgs=function(a,b){return"number"===typeof a?{x:a,y:b}:Array.isArray(a)?{x:a[0],y:a[1]}:a};b.prototype.clone=function(){return new e({x:this.x,y:this.y,z:this.z})};b.prototype.toArray=function(){return null==this.z?[this.x,this.y]:[this.x,this.y,this.z]};c([l.property({type:Number})],b.prototype,"x",void 0);c([l.property({type:Number})],b.prototype,"y",void 0);c([l.property({type:Number})],b.prototype,"z",void 0);return b=e=c([l.subclass("esri.geometry.ScreenPoint")],
b);var e}(l.declared(e))})},"esri/geometry/support/jsonUtils":function(){define("require exports ../Extent ../Multipoint ../Point ../Polygon ../Polyline".split(" "),function(b,a,f,c,e,l,h){function d(a){if(a){if(void 0!==a.x&&void 0!==a.y)return e.fromJSON(a);if(void 0!==a.paths)return h.fromJSON(a);if(void 0!==a.rings)return l.fromJSON(a);if(void 0!==a.points)return c.fromJSON(a);if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return f.fromJSON(a)}return null}Object.defineProperty(a,
"__esModule",{value:!0});a.fromJson=function(a){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(g){console.warn(g.stack)}return d(a)};a.fromJSON=d;a.getJsonType=function(a){return a instanceof e?"esriGeometryPoint":a instanceof h?"esriGeometryPolyline":a instanceof l?"esriGeometryPolygon":a instanceof f?"esriGeometryEnvelope":a instanceof c?"esriGeometryMultipoint":null};var k={esriGeometryPoint:e,esriGeometryPolyline:h,esriGeometryPolygon:l,esriGeometryEnvelope:f,esriGeometryMultipoint:c};
a.getGeometryType=function(a){return a&&k[a]||null}})},"esri/core/kebabDictionary":function(){define(["require","exports"],function(b,a){return function(a,b){void 0===b&&(b={});var c=b.ignoreUnknown||!1,f={},h;for(h in a)f[a[h]]=h;var d=function(a){return f.hasOwnProperty(a)?f[a]:c?void 0:a},k=function(b){return a.hasOwnProperty(b)?a[b]:c?void 0:b};return{toJSON:d,fromJSON:k,read:function(a){return k(a)},write:function(a,b,c){a=d(a);void 0!==a&&(b[c]=a)}}}})},"esri/geometry/support/scaleUtils":function(){define(["require",
"exports","../../config","../../core/kebabDictionary","./WKIDUnitConversion"],function(b,a,f,c,e){function l(a){return v.fromJSON(a.toLowerCase())||null}function h(b){return d(b)||a.decDegToMeters}function d(a){var b,c,d;a&&("object"===typeof a?(b=a.wkid,c=a.wkt):"number"===typeof a?b=a:"string"===typeof a&&(c=a));b?d=t.values[t[b]]:c&&-1!==c.search(/^PROJCS/i)&&(a=g.exec(c))&&a[1]&&(d=parseFloat(a[1].split(",")[1]));return d}function k(a){var b,c,d;a&&("object"===typeof a?(b=a.wkid,c=a.wkt):"number"===
typeof a?b=a:"string"===typeof a&&(c=a));b?d=t.units[t[b]]:c&&-1!==c.search(/^PROJCS/i)&&(a=g.exec(c))&&a[1]&&(d=(a=/[\\"\\']{1}([^\\"\\']+)/.exec(a[1]))&&a[1]);return d?l(d):null}function m(b,c){c=h(c);return b/(c*a.inchesPerMeter*f.screenDPI)}Object.defineProperty(a,"__esModule",{value:!0});a.inchesPerMeter=39.37;a.decDegToMeters=20015077/180;var g=/UNIT\[([^\]]+)\]\]$/i,t=e,v=c({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",
yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"},{ignoreUnknown:!0});a.unitFromRESTJSON=l;a.unitToRESTJSON=function(a){return v.toJSON(a)||null};a.getMetersPerVerticalUnitForSR=function(a){a=h(a);return 1E5<a?
1:a};a.getVerticalUnitStringForSR=function(a){return 1E5<h(a)?"meters":k(a)};a.getMetersPerUnitForSR=h;a.getMetersPerUnit=d;a.getUnitString=k;a.getScale=function(b,c){c=c||b.extent;b=b.width;var e=d(c&&c.spatialReference);return c&&b?c.width/b*(e||a.decDegToMeters)*a.inchesPerMeter*f.screenDPI:0};a.getResolutionForScale=m;a.getExtentForScale=function(a,b){var c=a.extent;a=a.width;b=m(b,c.spatialReference);return c.clone().expand(b*a/c.width)}})},"esri/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),
function(b,a,f,c,e,l,h){return function(a){function b(b){b=a.call(this,b)||this;b.level=0;b.levelValue=null;b.resolution=0;b.scale=0;return b}f(b,a);d=b;b.prototype.clone=function(){return new d({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};c([l.property({type:h.Integer,json:{write:!0}})],b.prototype,"level",void 0);c([l.property({type:String,json:{write:!0}})],b.prototype,"levelValue",void 0);c([l.property({type:Number,json:{write:!0}})],b.prototype,
"resolution",void 0);c([l.property({type:Number,json:{write:!0}})],b.prototype,"scale",void 0);return b=d=c([l.subclass("esri.layers.support.LOD")],b);var d}(l.declared(e))})},"esri/views/2d/layers/features/controllers":function(){define(["require","exports","../../../../core/tsSupport/assignHelper","../../../../core/Error","../../../../core/promiseUtils"],function(b,a,f,c,e){Object.defineProperty(a,"__esModule",{value:!0});a.getControllerConfiguration=function(a){var b=a.source;return a.capabilities.operations.supportsQuery?
b&&"esri.layers.graphics.sources.CSVSource"===b.declaredClass?e.resolve().then(function(){return{type:"memory",processing:a.processing&&a.processing.toWorker()||null}}):e.resolve({type:"on-demand",gdbVersion:a.gdbVersion,historicMoment:a.historicMoment&&a.historicMoment.getTime(),processing:a.processing&&a.processing.toWorker()||null}):e.reject(new c("graphicscontroller:query-capability-required","Service requires query capabilities to be used as a feature layer",{layer:a}))};a.createController=function(a,
c){return("memory"===a?e.create(function(a){return b(["./controllers/MemoryController"],a)}):e.create(function(a){return b(["./controllers/OnDemandController"],a)})).then(function(a){return a.default}).then(function(a){return new a(f({},c.serviceAndViewInfo,{tileStore:c.tileStore,remoteClient:c.remoteClient}))})}})},"esri/views/2d/layers/features/processors":function(){define(["require","exports","../../../../core/tsSupport/assignHelper","../../../../core/promiseUtils"],function(b,a,f,c){Object.defineProperty(a,
"__esModule",{value:!0});a.createProcessor=function(a,l){var e;"heatmap"===a?e=c.create(function(a){return b(["./processors/HeatmapProcessor"],a)}):"symbol"===a&&(e=c.create(function(a){return b(["./processors/SymbolProcessor"],a)}));return e.then(function(a){return a.default}).then(function(a){return new a(f({},l.serviceAndViewInfo,{tileStore:l.tileStore,remoteClient:l.remoteClient}))})}})},"esri/views/2d/layers/features/TileStore":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/decorateHelper ../../support/Evented ../../tiling/TileKey".split(" "),
function(b,a,f,c,e,l){Object.defineProperty(a,"__esModule",{value:!0});b=function(a){function b(b){var c=a.call(this)||this;c._tiles=new Map;c.tiles=[];c.tileInfo=b;c.spatialReference=b.spatialReference;return c}f(b,a);b.prototype.destroy=function(){this._tiles.clear()};b.prototype.has=function(a){return this._tiles.has(a)};b.prototype.get=function(a){return this._tiles.get(a)};b.prototype.findByKey=function(a){return this._tiles.get(a.id)};b.prototype.add=function(a){if(!this.has(a)){var b=new l(a),
c=this.tileInfo.lodAt(b.level),d=c.resolution,c=c.scale,e=this.tileInfo.getTileBounds([0,0,0,0],b),b={id:a,key:b,bounds:e,resolution:d,scale:c};this._tiles.set(a,b);this.tiles.push(b);this.emit("add",b)}};b.prototype.delete=function(a){if(this.has(a)){var b=this.get(a);this._tiles.delete(a);this.tiles.splice(this.tiles.indexOf(b),1);this.emit("remove",b)}};return b}(e.default);a.default=b})},"esri/views/2d/support/Evented":function(){define(["require","exports"],function(b,a){Object.defineProperty(a,
"__esModule",{value:!0});b=function(){function a(){this._listeners={}}a.prototype.on=function(a,b){var c=this;null==this._listeners[a]&&(this._listeners[a]=new Map);var e={};this._listeners[a].set(e,b);return{remove:function(){return c._listeners[a].delete(e)}}};a.prototype.once=function(a,b){var c=this.on(a,function(a){c.remove();b(a)});return c};a.prototype.emit=function(a,b){this.hasEventListener(a)&&this._listeners[a].forEach(function(a){return a(b)})};a.prototype.hasEventListener=function(a){return null!=
this._listeners[a]&&0<this._listeners[a].size};return a}();a.default=b})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(b,a,f){return function(){function a(a,b,c,d){this.set(a,b,c,d)}a.from=function(b,c,f,d){return a.pool.acquire(b,c,f,d)};a.getId=function(a,b,c,d){return"object"===typeof a?a.level+"/"+a.row+"/"+a.col+"/"+a.world:a+"/"+b+"/"+c+"/"+d};Object.defineProperty(a.prototype,"id",{get:function(){return this.toString()},enumerable:!0,
configurable:!0});a.prototype.equals=function(a){return this.level===a.level&&this.row===a.row&&this.col===a.col&&this.world===a.world};a.prototype.release=function(){this.world=this.col=this.row=this.level=0};a.prototype.set=function(a,b,c,d){null==a?this.world=this.col=this.row=this.level=0:"object"===typeof a?(this.level=a.level||0,this.row=a.row||0,this.col=a.col||0,this.world=a.world||0):"string"===typeof a?(a=a.split("/"),b=a[1],c=a[2],d=a[3],this.level=parseFloat(a[0]),this.row=parseFloat(b),
this.col=parseFloat(c),this.world=parseFloat(d)):(this.level=+a,this.row=+b,this.col=+c,this.world=+d||0);return this};a.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};a.pool=new f(a,!0,null,25,50);return a}()})},"esri/views/2d/layers/features/controllers/OnDemandController":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/assignHelper dojo/has ../../../../../geometry ../../../../../core/Error ../../../../../core/Logger ../../../../../core/promiseUtils ../../../../../core/promiseUtils ../../../../../core/accessorSupport/decorators ../../../../../geometry/support/spatialReferenceUtils ../../../../../layers/graphics/data/FeatureSetReader ../../../../../layers/graphics/data/FeatureStore ../../../../../layers/support/FeatureProcessing ../../../../../tasks/operations/query ../../../../../tasks/support/QuantizationParameters ../../../../../tasks/support/Query ../../../ViewState ./BaseController ../../../tiling/TileInfoView ../../../tiling/TileQueue".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v,w,y,r,z,x,p,n,A,B,C){Object.defineProperty(a,"__esModule",{value:!0});var F=k.getLogger("esri.views.2d.layers.features.controllers.OnDemandController");b=l("esri-featurelayer-webgl");l=l("esri-mobile");var D=b&&"object"===typeof b&&null!=b.maxDrillLevel?b.maxDrillLevel:l?1:4,H=b&&"object"===typeof b&&null!=b.maxRecordCountFactor?b.maxRecordCountFactor:l?1:3,E=b&&"object"===typeof b&&null!=b.enablePBFQuery?b.enablePBFQuery:!1;A=function(a){function b(){var b=null!==
a&&a.apply(this,arguments)||this;b.type="on-demand";b._queryInfoHash=null;b._processingInMainThread=!1;b._promises=new Map;b._readers=new Map;return b}f(b,a);b.prototype.initialize=function(){var a=this;this._tileQueue=new C({tileInfoView:new B(this.tileStore.tileInfo),process:function(b){return a._fetchFeatureSet(b)}});this.handles.add(this.watch("processor",this._switchProcessor.bind(this)))};b.prototype.destroy=function(){this._promises.forEach(function(a){return a.cancel()});this._promises.clear();
this.store&&(this.store.destroy(),this._set("store",null));this._readers.clear()};Object.defineProperty(b.prototype,"processing",{get:function(){return r.fromWorker(this.configuration.processing)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"updating",{get:function(){return 0<this._promises.size},enumerable:!0,configurable:!0});b.prototype.refresh=function(){};b.prototype.setViewState=function(a){this._tileQueue.pause();this._tileQueue.state=n.fromJSON(a);this._tileQueue.resume()};
b.prototype.queryFeatures=function(a){return this.store.executeQuery(p.fromJSON(a))};b.prototype.queryFeatureCount=function(a){return this.store.executeQueryForCount(p.fromJSON(a))};b.prototype.queryObjectIds=function(a){return this.store.executeQueryForIds(p.fromJSON(a))};b.prototype.queryExtent=function(a){return this.store.executeQueryForExtent(p.fromJSON(a))};b.prototype.onTileAdded=function(a){this._fetchTile(a)};b.prototype.onTileRemoved=function(a){var b=this._promises.get(a),c=this._readers.get(a);
this._readers.delete(a);b&&(b.cancel(),this._promises.delete(a),this.notifyChange("updating"));c&&this.store.unload(c)};b.prototype._switchProcessor=function(a,b){this.handles.remove("processor");var c=a.queryInfo,d=c.orderByFields,e=c.outFields;a=c.definitionExpression;b=c.gdbVersion;var g=c.historicMoment,c=c.pixelBuffer;e&&e.sort();d&&d.sort();d=JSON.stringify({definitionExpression:a,outFields:e,orderByFields:d,gdbVersion:b,pixelBuffer:c,historicMoment:g});this._tileQueue.pause();this._queryInfoHash!==
d&&(this._readers.clear(),this.store&&this.store.destroy(),this._set("store",new y.default({definitionExpression:a,fields:this.service.fields,geometryType:this.service.geometryType,objectIdField:this.service.objectIdField,hasM:!1,hasZ:!1,spatialReference:this.spatialReference,cacheSpatialQueries:!0,gdbVersion:b,historicMoment:null!=g&&new Date(g)})),this._queryInfoHash=d);this._tileQueue.reset();a=0;for(b=this.tileStore.tiles;a<b.length;a++)g=b[a],this._tileQueue.has(g.key)||this._fetchTile(g);this._tileQueue.resume()};
b.prototype._fetchTile=function(a){var b=this,c=this._tileQueue.push(a.key).then(function(c){b._cleanupPromise(a);var d=b.processor.queryInfo.orderByFields;if((!d||!d.length)&&c){var e=b.service.objectIdField;c.features.sort(function(a,b){return a.attributes[e]-b.attributes[e]})}b.processor.onTileData(a,c)}).catch(function(c){b._cleanupPromise(a);"cancel"!==c.dojoType&&(b.processor.onTileError(a,c.message),F.error("query-error",{error:c}));return g.reject(c)});this._promises.set(a,c);this.notifyChange("updating")};
b.prototype._fetchFeatureSet=function(a){var b=this,c=this.tileStore.findByKey(a),d=this._getQuantizationParameters(c),e=this.processor.queryInfo;a=e.pixelBuffer*c.resolution;var g=c.bounds.slice(),k=new Set;g[0]-=a;g[1]-=a;g[2]+=a;g[3]+=a;return this._readers.has(c)?this.store.executeQuery(this._createQuery(g,d,e)):this._drillQuery({geometryType:null,features:null,fields:null,transform:null,spatialReference:null},k,g,e,d).then(function(a){var b=e.orderByFields;if(b){var b=b[0].split(" "),c=b[0];
"DESC"===b[1]&&a.features.sort(function(a,b){return b.attributes[c]-a.attributes[c]})}return a}).then(function(a){return b._wrapPoints(a,e)}).then(function(a){return a.features.length?a:null}).then(function(a){var k=a?w.createFeatureSetReader(a):null;k&&b.store.load(k);b._readers.set(c,k);var f=b.service.objectIdField;if(a&&e.returnCentroid){var h=new Map,k=b._createQuery(g,d,e);k.objectIds=[];for(var n=0,m=a.features;n<m.length;n++){var l=m[n];if(!l.centroid){var t=l.attributes[f];h.set(t,l);k.objectIds.push(t)}}return k.objectIds.length?
b.store.executeQuery(k).then(function(b){var c=0;for(b=b.features;c<b.length;c++){var d=b[c];h.get(d.attributes[f]).centroid=d.centroid}return a}):a}return a})};b.prototype._drillQuery=function(a,b,c,d,e,g){var k=this;void 0===g&&(g=0);return this._query(c,d,e,g>=D).then(function(f){if(!a.geometryType){a.fields=f.fields;a.geometryType=f.geometryType;a.objectIdFieldName=f.objectIdFieldName;a.transform=f.transform;a.spatialReference=f.spatialReference;if(!f.exceededTransferLimit){a.features=f.features;
return}a.features=[]}if(g<D&&f.exceededTransferLimit){g++;var h=(c[2]-c[0])/2,n=(c[3]-c[1])/2;f=[c[0]+h,c[1]+n,c[2],c[3]];var l=[c[0],c[1],c[2]-h,c[3]-n],t=[c[0]+h,c[1],c[2],c[3]-n];return m.all([k._drillQuery(a,b,[c[0],c[1]+n,c[2]-h,c[3]],d,e,g),k._drillQuery(a,b,f,d,e,g),k._drillQuery(a,b,l,d,e,g),k._drillQuery(a,b,t,d,e,g)])}if("esriGeometryPoint"!==f.geometryType)for(h=k.service.objectIdField,n=0,f=f.features;n<f.length;n++)l=f[n],t=l.attributes[h],b.has(t)||(b.add(t),a.features.push(l));else a.features=
a.features.concat(f.features.concat())}).then(function(){return a})};b.prototype._query=function(a,b,c,d){var e=this;void 0===d&&(d=!0);var g=this._createQuery(a,c,b,d);a=this.service.source;return(E?z.executeQueryPBF(a,g):z.executeQuery(a,g)).then(function(a){return a.data}).then(function(a){return e._applyProcessing(a,g)})};b.prototype._createQuery=function(a,b,c,d){void 0===d&&(d=!0);var e=new p,g=this.processor.queryInfo.historicMoment;e.maxRecordCountFactor=H;e.gdbVersion=this.processor.queryInfo.gdbVersion;
e.historicMoment=null!=g?new Date(g):null;e.outFields=this.processor.queryInfo.outFields;e.where=this.processor.queryInfo.definitionExpression||"1\x3d1";e.geometry=h.Extent.fromJSON({xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:this.spatialReference});this.service.capabilities.query.supportsQuantization?(e.quantizationParameters=b,"esriGeometryPolyline"===this.service.geometryType&&(e.maxAllowableOffset=b.tolerance)):e.maxAllowableOffset=b.tolerance;e.resultType="tile";e.returnExceededLimitFeatures=
d;e.returnGeometry=!0;e.returnCentroid=c.returnCentroid;e.orderByFields=c.orderByFields;return e};b.prototype._applyProcessing=function(a,b){var c=this.processing;if(!c)return a;if(this._processingInMainThread)return this.remoteClient.invoke("executeProcessing",{query:b.toJSON(),featureSet:JSON.stringify(a)}).then(function(a){return JSON.parse(a)});try{var e=c.process(a,b,c.options);return e?e:g.reject(new d("FeatureLayer","invalid processing.process() method, returns nothing"))}catch(V){return this._processingInMainThread=
!0,this.remoteClient.invoke("executeProcessing",{query:b.toJSON(),featureSet:JSON.stringify(a)}).then(function(a){return JSON.parse(a)})}};b.prototype._getQuantizationParameters=function(a){return x.default.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:a.resolution,extent:{xmin:a.bounds[0],ymin:a.bounds[1],xmax:a.bounds[2],ymax:a.bounds[3],spatialReference:this.spatialReference}})};b.prototype._wrapPoints=function(a,b){if(0===a.features.length)return a;var c=b.returnCentroid;b=b.pixelBuffer;
var d=a.geometryType,g=a.spatialReference,k=a.transform;if("esriGeometryPoint"!==d&&"esriGeometryMultipoint"!==d&&!c||!v.isWrappable(g))return a;c=a.features;g=v.getInfo(g);k=Math.round((g.valid[1]-g.valid[0])/k.scale[0]);if(512===k){g=[];for(d=0;d<c.length;d++){var f=c[d],h=f.geometry,f=f.attributes;h&&(h.x<b?(h={geometry:e({},h),attributes:f},h.geometry.x+=k,g.push(h)):h.x>512-b&&(h={geometry:e({},h),attributes:f},h.geometry.x-=k,g.push(h)))}c.push.apply(c,g)}else for(g=0;g<c.length;g++)if(h=c[g].geometry)h.x<
-b?h.x+=k:h.x>512+b&&(h.x-=k);return a};b.prototype._cleanupPromise=function(a){this._promises.delete(a);this.notifyChange("updating")};c([t.property()],b.prototype,"configuration",void 0);c([t.property({readOnly:!0,dependsOn:["configuration"]})],b.prototype,"processing",null);c([t.property({readOnly:!0})],b.prototype,"store",void 0);c([t.property()],b.prototype,"updating",null);return b=c([t.subclass()],b)}(t.declared(A.default));a.default=A})},"esri/layers/graphics/data/FeatureSetReader":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/generatorHelper ../../../geometry/support/boundsUtils ../../../geometry/support/centroid ../../../geometry/support/quantizationUtils @dojo/shim/Symbol".split(" "),
function(b,a,f,c,e,l,h){Object.defineProperty(a,"__esModule",{value:!0});a.createFeatureSetReader=function(a){switch(a.geometryType){case "esriGeometryEnvelope":return new d(a);case "esriGeometryMultipoint":return new k(a);case "esriGeometryPoint":return new m(a);case "esriGeometryPolygon":return new g(a);case "esriGeometryPolyline":return new t(a);default:throw new TypeError("invalid feature set");}};b=function(){function a(a){this._boundsByOID=new Map;this._hydratedGeometryByOID=new Map;this._centroidByOID=
new Map;this._features=a.features;this._hasM=a.hasM;this._hasZ=a.hasZ;this._objectIdFieldName=a.objectIdFieldName;if(this._transform=a.transform)this._hydrateX=h.getHydrateX(this._transform),this._hydrateY=h.getHydrateY(this._transform)}a.prototype.add=function(a){if(!h.equals(a.transform,this._transform))throw Error("transform not equivalent");(e=this._features).push.apply(e,a.features);if(e=this._featureByOID){var b=this._objectIdFieldName,c=0;for(a=a.features;c<a.length;c++){var d=a[c];e.set(d.attributes[b],
d)}}var e};a.prototype.oids=function(){var a,b,d;return c(this,function(c){switch(c.label){case 0:a=0,b=this._features,c.label=1;case 1:if(!(a<b.length))return[3,4];d=b[a];return[4,d.attributes[this._objectIdFieldName]];case 2:c.sent(),c.label=3;case 3:return a++,[3,1];case 4:return[2]}})};a.prototype.getAttributes=function(a){return this._getFeatureByOID(a).attributes};a.prototype.getBounds=function(a){if(this._boundsByOID.has(a))return this._boundsByOID.get(a);var b;b=this._transform?h.hydrateBounds(this._getBounds(this._getRawGeometry(a)),
this._hydrateX,this._hydrateY):this._getHydratedBounds(this.getGeometry(a));this._boundsByOID.set(a,b);return b};a.prototype.getCentroid=function(a){var b=this._centroidByOID;if(b.has(a))return b.get(a);var c=this.getGeometry(a),c=this._getCentroid(c);b.set(a,c);return c};a.prototype.getCentroidQuantized=function(a,b,c,d){return(a=this.getCentroid(a))?h.hydratePoint({},a,c,d,this._hasZ,this._hasM):null};a.prototype.getGeometry=function(a){if(!this._transform)return this._getRawGeometry(a);var b=this._hydratedGeometryByOID;
if(b.has(a))return b.get(a);var c=this._hydrateGeometry(this._getRawGeometry(a),this._hydrateX,this._hydrateY,this._hasZ,this._hasM);b.set(a,c);return c};a.prototype.getProjectedGeometry=function(a,b){this.getGeometry(b)};a.prototype.getGeometryQuantized=function(a,b,c,d){return h.equals(b,this._transform)?this._getRawGeometry(a):this._quantizeGeometry(this.getGeometry(a),c,d,this._hasZ,this._hasM)};a.prototype._getRawGeometry=function(a){return this._getFeatureByOID(a).geometry};a.prototype._getFeatureByOID=
function(a){if(this._featureByOID)return this._featureByOID.get(a);for(var b=this._featureByOID=new Map,c=this._objectIdFieldName,d=0,e=this._features;d<e.length;d++){var g=e[d];b.set(g.attributes[c],g)}return b.get(a)};return a}();a.FeatureSetReader=b;var d=function(a){function b(b){return a.call(this,b)||this}f(b,a);b.prototype._getBounds=function(a){return[a.xmin,a.ymin,a.xmax,a.ymax]};b.prototype._getCentroid=function(a){a=l.extentCentroid(a);return{x:a[0],y:a[1]}};b.prototype._getHydratedBounds=
function(a){return[a.xmin,a.ymin,a.xmax,a.ymax]};b.prototype._hydrateGeometry=function(a,b,c,d,e){return h.hydrateExtent({},a,b,c,d,e)};b.prototype._quantizeGeometry=function(a,b,c,d,e){return h.quantizeExtent({},a,b,c,d,e)};return b}(b);a.ExtentFeatureSetReader=d;var k=function(a){function b(b){return a.call(this,b)||this}f(b,a);b.prototype._getBounds=function(a){return h.getQuantizedBoundsPoints(a.points)};b.prototype._getCentroid=function(a){a=this._getHydratedBounds(a);return{x:a[0]-a[2],y:a[3]-
a[1]}};b.prototype._getHydratedBounds=function(a){return e.getPointsBounds(a.points)};b.prototype._hydrateGeometry=function(a,b,c,d,e){return h.hydrateMultipoint({},a,b,c,d,e)};b.prototype._quantizeGeometry=function(a,b,c,d,e){return h.quantizeMultipoint({},a,b,c,d,e)};return b}(b);a.MultipointFeatureSetReader=k;var m=function(a){function b(b){return a.call(this,b)||this}f(b,a);b.prototype._getBounds=function(a){return[a.x,a.y,a.x,a.y]};b.prototype._getCentroid=function(a){return a};b.prototype._getHydratedBounds=
function(a){return[a.x,a.y,a.x,a.y]};b.prototype._hydrateGeometry=function(a,b,c,d,e){return h.hydratePoint({},a,b,c,d,e)};b.prototype._quantizeGeometry=function(a,b,c,d,e){return h.hydratePoint({},a,b,c,d,e)};return b}(b);a.PointFeatureSetReader=m;var g=function(a){function b(b){return a.call(this,b)||this}f(b,a);b.prototype._getBounds=function(a){return h.getQuantizedBoundsRings(a.rings)};b.prototype._getCentroid=function(a){a=l.polygonCentroid(a);return{x:a[0],y:a[1]}};b.prototype._getHydratedBounds=
function(a){return e.getRingsOrPathsBounds(a.rings)};b.prototype._hydrateGeometry=function(a,b,c,d,e){return h.hydratePolygon({},a,b,c,d,e)};b.prototype._quantizeGeometry=function(a,b,c,d,e){return h.quantizePolygon({},a,b,c,d,e)};return b}(b);a.PolygonFeatureSetReader=g;var t=function(a){function b(b){return a.call(this,b)||this}f(b,a);b.prototype._getBounds=function(a){return h.getQuantizedBoundsPaths(a.paths)};b.prototype._getCentroid=function(a){a=this._getHydratedBounds(a);return{x:a[0]-a[2],
y:a[3]-a[1]}};b.prototype._getHydratedBounds=function(a){return e.getRingsOrPathsBounds(a.paths)};b.prototype._hydrateGeometry=function(a,b,c,d,e){return h.hydratePolyline({},a,b,c,d,e)};b.prototype._quantizeGeometry=function(a,b,c,d,e){return h.quantizePolyline({},a,b,c,d,e)};return b}(b);a.PolylineFeatureSetReader=t})},"esri/core/tsSupport/generatorHelper":function(){define([],function(){return function(b,a){function f(a){return function(b){return c([a,b])}}function c(c){if(l)throw new TypeError("Generator is already executing.");
for(;e;)try{if(l=1,h&&(d=h[c[0]&2?"return":c[0]?"throw":"next"])&&!(d=d.call(h,c[1])).done)return d;if(h=0,d)c=[0,d.value];switch(c[0]){case 0:case 1:d=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++;h=c[1];c=[0];continue;case 7:c=e.ops.pop();e.trys.pop();continue;default:if(!(d=e.trys,d=0<d.length&&d[d.length-1])&&(6===c[0]||2===c[0])){e=0;continue}if(3===c[0]&&(!d||c[1]>d[0]&&c[1]<d[3]))e.label=c[1];else if(6===c[0]&&e.label<d[1])e.label=d[1],d=c;else if(d&&e.label<d[2])e.label=
d[2],e.ops.push(c);else{d[2]&&e.ops.pop();e.trys.pop();continue}}c=a.call(b,e)}catch(g){c=[6,g],h=0}finally{l=d=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var e={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},l,h,d,k;return k={next:f(0),"throw":f(1),"return":f(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k}})},"esri/geometry/support/boundsUtils":function(){define(["require","exports"],function(b,a){function f(a){return function(b,
c){return null==b?c:null==c?b:a(b,c)}}Object.defineProperty(a,"__esModule",{value:!0});var c=f(Math.min),e=f(Math.max);a.getRingsOrPathsBounds=function(a,b,d){var k=b?3:2;if(!a.length||!a[0].length)return null;for(var f=a[0][0],g=f[0],f=f[1],h=a[0][0],l=h[0],h=h[1],w=void 0,y=void 0,r=void 0,z=void 0,x=0;x<a.length;x++)for(var p=a[x],n=0;n<p.length;n++){var A=p[n],B=A[0],C=A[1],g=c(g,B),f=c(f,C),l=e(l,B),h=e(h,C);b&&2<A.length&&(B=A[2],w=c(w,B),y=e(y,B));d&&A.length>k&&(z=A[k],r=c(w,z),z=e(y,z))}return b?
d?[g,f,w,r,l,h,y,z]:[g,f,w,l,h,y]:d?[g,f,r,l,h,z]:[g,f,l,h]};a.getPointsBounds=function(a,b,d,k,f){var g=b?3:2;d=d&&f;b=b&&k;if(!a.length||!a[0].length)return null;for(var h=a[0],m=h[0],h=h[1],l=a[0],y=l[0],l=l[1],r=void 0,z=void 0,x=void 0,p=void 0,n=0;n<a.length;n++){var A=a[n],B=A[0],C=A[1],m=c(m,B),h=c(h,C),y=e(y,B),l=e(l,C);b&&2<A.length&&(B=A[2],r=c(r,B),z=e(z,B));d&&A.length>g&&(p=A[g],x=c(r,p),p=e(z,p))}return k?(r=r||0,z=z||0,f?[m,h,r,x||0,y,l,z,p||0]:[m,h,r,y,l,z]):f?[m,h,x||0,y,l,p||0]:
[m,h,y,l]}})},"esri/geometry/support/quantizationUtils":function(){define(["require","exports"],function(b,a){function f(a){return a&&"upperLeft"===a.originPosition}function c(a,b,c,d){for(var e=[],g,k,f,h,n=0;n<a.length;n++){var l=a[n];if(0<n){if(f=b(l[0]),h=c(l[1]),f!==g||h!==k)e.push(d(l,f-g,h-k)),g=f,k=h}else g=b(l[0]),k=c(l[1]),e.push(d(l,g,k))}return 0<e.length?e:null}function e(a,b,d,e,g){return c(a,b,d,e?g?x:z:g?z:r)}function l(a,b,d,e,g){var k=[];e=e?g?x:z:g?z:r;for(g=0;g<a.length;g++){var f=
c(a[g],b,d,e);f&&3<=f.length&&k.push(f)}return k.length?k:null}function h(a,b,d,e,g){var k=[];e=e?g?x:z:g?z:r;for(g=0;g<a.length;g++){var f=c(a[g],b,d,e);f&&2<=f.length&&k.push(f)}return k.length?k:null}function d(a,b,c,d){for(var e=Array(a.length),g,k,f=0;f<a.length;f++){var h=a[f];0<f?(g+=h[0],k+=h[1]):(g=h[0],k=h[1]);e[f]=d(h,b(g),c(k))}return e}function k(a,b,c,e){for(var g=Array(a.length),k=0;k<a.length;k++)g[k]=d(a[k],b,c,e);return g}function m(a,b,c,e,g){return d(a,b,c,e?g?x:z:g?z:r)}function g(a,
b,c,d,e){return k(a,b,c,d?e?x:z:e?z:r)}function t(a,b,c,d,e){return k(a,b,c,d?e?x:z:e?z:r)}function v(a,b,c){var d=c[0],e=d[0],d=d[1],g=Math.min(e,b[0]),k=Math.min(d,b[1]),f=Math.max(e,b[2]);b=Math.max(d,b[3]);for(var h=1;h<c.length;h++){var n=c[h],l=n[0],n=n[1],e=e+l,d=d+n;0>l&&(g=Math.min(g,e));0<l&&(f=Math.max(f,e));0>n?k=Math.min(k,d):0<n&&(b=Math.max(b,d))}a[0]=g;a[1]=k;a[2]=f;a[3]=b;return a}function w(a,b){if(!b.length)return null;a[0]=a[1]=Number.POSITIVE_INFINITY;a[2]=a[3]=Number.NEGATIVE_INFINITY;
for(var c=0;c<b.length;c++)v(a,a,b[c]);return a}Object.defineProperty(a,"__esModule",{value:!0});var y=function(a){return a},r=function(a,b,c){return[b,c]},z=function(a,b,c){return[b,c,a[2]]},x=function(a,b,c){return[b,c,a[2],a[3]]};a.toTransform=function(a){return{originPosition:"upperLeft",scale:[a.tolerance,a.tolerance],translate:[a.extent.xmin,a.extent.ymax]}};a.equals=function(a,b){if(a===b||null==a&&null==b)return!0;if(null==a||null==b)return!1;var c,d,e,g;f(a)?(c=a.translate[0],d=a.translate[1],
a=a.scale[0]):(c=a.extent.xmin,d=a.extent.ymax,a=a.tolerance);f(b)?(e=b.translate[0],g=b.translate[1],b=b.scale[0]):(e=b.extent.xmin,g=b.extent.ymax,b=b.tolerance);return c===e&&d===g&&a===b};a.getQuantizeX=function(a){if(!a)return y;var b,c;f(a)?(b=a.translate[0],c=a.scale[0]):(b=a.extent.xmin,c=a.tolerance);return function(a){return Math.round((a-b)/c)}};a.getQuantizeY=function(a){if(!a)return y;var b,c;f(a)?(b=a.translate[1],c=a.scale[1]):(b=a.extent.ymax,c=a.tolerance);return function(a){return Math.round((b-
a)/c)}};a.quantizeBounds=function(a,b,c,d){a[0]=c(b[0]);a[3]=d(b[1]);a[2]=c(b[2]);a[1]=d(b[3]);return a};a.quantizePoints=e;a.quantizeRings=l;a.quantizePaths=h;a.getHydrateX=function(a){if(!a)return y;var b,c;f(a)?(b=a.translate[0],c=a.scale[0]):(b=a.extent.xmin,c=a.tolerance);return function(a){return a*c+b}};a.getHydrateY=function(a){if(!a)return y;var b,c;f(a)?(b=a.translate[1],c=a.scale[1]):(b=a.extent.ymax,c=a.tolerance);return function(a){return b-a*c}};a.hydrateCoordsArray=d;a.hydrateCoordsArrayArray=
k;a.hydrateBounds=function(a,b,c,d){return a?d?(a[0]=c(b[0]),a[1]=d(b[3]),a[2]=c(b[2]),a[3]=d(b[1]),a):[b(a[0]),c(a[3]),b(a[2]),c(a[1])]:a};a.hydratePoints=m;a.hydratePaths=g;a.hydrateRings=t;a.getQuantizedBoundsCoordsArray=v;a.getQuantizedBoundsCoordsArrayArray=w;a.getQuantizedBoundsPoints=function(a){var b=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return v(b,b,a)};a.getQuantizedBoundsPaths=function(a){return w([0,0,0,0],a)};a.getQuantizedBoundsRings=
function(a){return w([0,0,0,0],a)};a.quantizeExtent=function(a,b,c,d,e,g){a.xmin=c(b.xmin);a.ymin=d(b.ymin);a.xmax=c(b.xmax);a.ymax=d(b.ymax);a!==b&&(e&&(a.zmin=b.zmin,a.zmax=b.zmax),g&&(a.mmin=b.mmin,a.mmax=b.mmax));return a};a.quantizeMultipoint=function(a,b,c,d,g,k){a.points=e(b.points,c,d,g,k);return a};a.quantizePoint=function(a,b,c,d,e,g){a.x=c(b.x);a.y=d(b.y);a!==b&&(e&&(a.z=b.z),g&&(a.m=b.m));return a};a.quantizePolygon=function(a,b,c,d,e,g){b=l(b.rings,c,d,e,g);if(!b)return null;a.rings=
b;return a};a.quantizePolyline=function(a,b,c,d,e,g){b=h(b.paths,c,d,e,g);if(!b)return null;a.paths=b;return a};a.hydrateExtent=function(a,b,c,d,e,g){a.xmin=c(b.xmin);a.ymin=d(b.ymin);a.xmax=c(b.xmax);a.ymax=d(b.ymax);a!==b&&(e&&(a.zmin=b.zmin,a.zmax=b.zmax),g&&(a.mmin=b.mmin,a.mmax=b.mmax));return a};a.hydrateMultipoint=function(a,b,c,d,e,g){a.points=m(b.points,c,d,e,g);return a};a.hydratePoint=function(a,b,c,d,e,g){a.x=c(b.x);a.y=d(b.y);a!==b&&(e&&(a.z=b.z),g&&(a.m=b.m));return a};a.hydratePolygon=
function(a,b,c,d,e,g){a.rings=t(b.rings,c,d,e,g);return a};a.hydratePolyline=function(a,b,c,d,e,k){a.paths=g(b.paths,c,d,e,k);return a}})},"@dojo/shim/Symbol":function(){(function(b){"object"===typeof module&&"object"===typeof module.exports?(b=b(require,exports),void 0!==b&&(module.exports=b)):"function"===typeof define&&define.amd&&define(["require","exports","./support/has","./global","./support/util"],b)})(function(b,a){function f(a){return a&&("symbol"===typeof a||"Symbol"===a["@@toStringTag"])||
!1}Object.defineProperty(a,"__esModule",{value:!0});var c=b("./support/has"),e=b("./global"),l=b("./support/util");a.Symbol=e.default.Symbol;if(!c.default("es6-symbol")){var h=function(a){if(!f(a))throw new TypeError(a+" is not a symbol");return a},d=Object.defineProperties,k=Object.defineProperty,m=Object.create,g=Object.prototype,t={},v=function(){var a=m(null);return function(b){for(var c=0,d;a[String(b)+(c||"")];)++c;b+=String(c||"");a[b]=!0;d="@@"+b;Object.getOwnPropertyDescriptor(g,d)||k(g,
d,{set:function(a){k(this,d,l.getValueDescriptor(a))}});return d}}(),w=function r(a){if(this instanceof w)throw new TypeError("TypeError: Symbol is not a constructor");return r(a)};a.Symbol=e.default.Symbol=function z(a){if(this instanceof z)throw new TypeError("TypeError: Symbol is not a constructor");var b=Object.create(w.prototype);a=void 0===a?"":String(a);return d(b,{__description__:l.getValueDescriptor(a),__name__:l.getValueDescriptor(v(a))})};k(a.Symbol,"for",l.getValueDescriptor(function(b){return t[b]?
t[b]:t[b]=a.Symbol(String(b))}));d(a.Symbol,{keyFor:l.getValueDescriptor(function(a){var b;h(a);for(b in t)if(t[b]===a)return b}),hasInstance:l.getValueDescriptor(a.Symbol.for("hasInstance"),!1,!1),isConcatSpreadable:l.getValueDescriptor(a.Symbol.for("isConcatSpreadable"),!1,!1),iterator:l.getValueDescriptor(a.Symbol.for("iterator"),!1,!1),match:l.getValueDescriptor(a.Symbol.for("match"),!1,!1),observable:l.getValueDescriptor(a.Symbol.for("observable"),!1,!1),replace:l.getValueDescriptor(a.Symbol.for("replace"),
!1,!1),search:l.getValueDescriptor(a.Symbol.for("search"),!1,!1),species:l.getValueDescriptor(a.Symbol.for("species"),!1,!1),split:l.getValueDescriptor(a.Symbol.for("split"),!1,!1),toPrimitive:l.getValueDescriptor(a.Symbol.for("toPrimitive"),!1,!1),toStringTag:l.getValueDescriptor(a.Symbol.for("toStringTag"),!1,!1),unscopables:l.getValueDescriptor(a.Symbol.for("unscopables"),!1,!1)});d(w.prototype,{constructor:l.getValueDescriptor(a.Symbol),toString:l.getValueDescriptor(function(){return this.__name__},
!1,!1)});d(a.Symbol.prototype,{toString:l.getValueDescriptor(function(){return"Symbol ("+h(this).__description__+")"}),valueOf:l.getValueDescriptor(function(){return h(this)})});k(a.Symbol.prototype,a.Symbol.toPrimitive,l.getValueDescriptor(function(){return h(this)}));k(a.Symbol.prototype,a.Symbol.toStringTag,l.getValueDescriptor("Symbol",!1,!1,!0));k(w.prototype,a.Symbol.toPrimitive,l.getValueDescriptor(a.Symbol.prototype[a.Symbol.toPrimitive],!1,!1,!0));k(w.prototype,a.Symbol.toStringTag,l.getValueDescriptor(a.Symbol.prototype[a.Symbol.toStringTag],
!1,!1,!0))}a.isSymbol=f;"hasInstance isConcatSpreadable iterator species replace search split match toPrimitive toStringTag unscopables observable".split(" ").forEach(function(b){a.Symbol[b]||Object.defineProperty(a.Symbol,b,l.getValueDescriptor(a.Symbol.for(b),!1,!1))});a.default=a.Symbol})},"@dojo/shim/support/has":function(){(function(b){"object"===typeof module&&"object"===typeof module.exports?(b=b(require,exports),void 0!==b&&(module.exports=b)):"function"===typeof define&&define.amd&&define("require exports tslib @dojo/has/has ../global @dojo/has/has".split(" "),
b)})(function(b,a){Object.defineProperty(a,"__esModule",{value:!0});var f=b("tslib"),c=b("@dojo/has/has"),e=b("../global");a.default=c.default;f.__exportStar(b("@dojo/has/has"),a);c.add("es6-array",function(){return["from","of"].every(function(a){return a in e.default.Array})&&["findIndex","find","copyWithin"].every(function(a){return a in e.default.Array.prototype})},!0);c.add("es6-array-fill",function(){return"fill"in e.default.Array.prototype?1===[1].fill(9,Number.POSITIVE_INFINITY)[0]:!1},!0);
c.add("es7-array",function(){return"includes"in e.default.Array.prototype},!0);c.add("es6-map",function(){if("function"===typeof e.default.Map)try{var a=new e.default.Map([[0,1]]);return a.has(0)&&"function"===typeof a.keys&&c.default("es6-symbol")&&"function"===typeof a.values&&"function"===typeof a.entries}catch(d){}return!1},!0);c.add("es6-math",function(){return"clz32 sign log10 log2 log1p expm1 cosh sinh tanh acosh asinh atanh trunc fround cbrt hypot".split(" ").every(function(a){return"function"===
typeof e.default.Math[a]})},!0);c.add("es6-math-imul",function(){return"imul"in e.default.Math?-5===Math.imul(4294967295,5):!1},!0);c.add("es6-object",function(){return c.default("es6-symbol")&&["assign","is","getOwnPropertySymbols","setPrototypeOf"].every(function(a){return"function"===typeof e.default.Object[a]})},!0);c.add("es2017-object",function(){return["values","entries","getOwnPropertyDescriptors"].every(function(a){return"function"===typeof e.default.Object[a]})},!0);c.add("es-observable",
function(){return"undefined"!==typeof e.default.Observable},!0);c.add("es6-promise",function(){return"undefined"!==typeof e.default.Promise&&c.default("es6-symbol")},!0);c.add("es6-set",function(){if("function"===typeof e.default.Set){var a=new e.default.Set([1]);return a.has(1)&&"keys"in a&&"function"===typeof a.keys&&c.default("es6-symbol")}return!1},!0);c.add("es6-string",function(){return["fromCodePoint"].every(function(a){return"function"===typeof e.default.String[a]})&&"codePointAt normalize repeat startsWith endsWith includes".split(" ").every(function(a){return"function"===
typeof e.default.String.prototype[a]})},!0);c.add("es6-string-raw",function(){function a(a){for(var b=1;b<arguments.length;b++);b=f.__spread(a);b.raw=a.raw;return b}if("raw"in e.default.String){var b=a(l||(l=f.__makeTemplateObject(["a\n",""],["a\\n",""])),1);b.raw=["a\\n"];return"a:\\n"===e.default.String.raw(b,42)}return!1},!0);c.add("es2017-string",function(){return["padStart","padEnd"].every(function(a){return"function"===typeof e.default.String.prototype[a]})},!0);c.add("es6-symbol",function(){return"undefined"!==
typeof e.default.Symbol&&"symbol"===typeof Symbol()},!0);c.add("es6-weakmap",function(){if("undefined"!==typeof e.default.WeakMap){var a={},b={},k=new e.default.WeakMap([[a,1]]);Object.freeze(a);return 1===k.get(a)&&k.set(b,2)===k&&c.default("es6-symbol")}return!1},!0);c.add("microtasks",function(){return c.default("es6-promise")||c.default("host-node")||c.default("dom-mutationobserver")},!0);c.add("postmessage",function(){return"undefined"!==typeof e.default.window&&"function"===typeof e.default.postMessage},
!0);c.add("raf",function(){return"function"===typeof e.default.requestAnimationFrame},!0);c.add("setimmediate",function(){return"undefined"!==typeof e.default.setImmediate},!0);c.add("dom-mutationobserver",function(){if(c.default("host-browser")&&(e.default.MutationObserver||e.default.WebKitMutationObserver)){var a=document.createElement("div"),b=new (e.default.MutationObserver||e.default.WebKitMutationObserver)(function(){});b.observe(a,{attributes:!0});a.style.setProperty("display","block");return!!b.takeRecords().length}return!1},
!0);c.add("dom-webanimation",function(){return c.default("host-browser")&&void 0!==e.default.Animation&&void 0!==e.default.KeyframeEffect},!0);var l})},"tslib/tslib":function(){var b,a,f,c,e,l,h,d,k,m,g,t,v,w,y,r,z;(function(a){function b(a,b){a!==c&&("function"===typeof Object.create?Object.defineProperty(a,"__esModule",{value:!0}):a.__esModule=!0);return function(c,d){return a[c]=b?b(c,d):d}}var c="object"===typeof global?global:"object"===typeof self?self:"object"===typeof this?this:{};"function"===
typeof define&&define.amd?define("tslib",["exports"],function(d){a(b(c,b(d)))}):"object"===typeof module&&"object"===typeof module.exports?a(b(c,b(module.exports))):a(b(c))})(function(x){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};b=function(a,b){function c(){this.constructor=a}p(a,b);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=Object.assign||function(a){for(var b,
c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};f=function(a,b){var c={},d;for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var e=0;for(d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&(c[d[e]]=a[d[e]])}return c};c=function(a,b,c,d){var e=arguments.length,g=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,
c):d,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var f=a.length-1;0<=f;f--)if(k=a[f])g=(3>e?k(g):3<e?k(b,c,g):k(b,c))||g;return 3<e&&g&&Object.defineProperty(b,c,g),g};e=function(a,b){return function(c,d){b(c,d,a)}};l=function(a,b){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(a,b)};h=function(a,b,c,d){return new (c||(c=Promise))(function(e,g){function k(a){try{h(d.next(a))}catch(ea){g(ea)}}
function f(a){try{h(d["throw"](a))}catch(ea){g(ea)}}function h(a){a.done?e(a.value):(new c(function(b){b(a.value)})).then(k,f)}h((d=d.apply(a,b||[])).next())})};d=function(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(g)throw new TypeError("Generator is already executing.");for(;e;)try{if(g=1,k&&(f=k[c[0]&2?"return":c[0]?"throw":"next"])&&!(f=f.call(k,c[1])).done)return f;if(k=0,f)c=[0,f.value];switch(c[0]){case 0:case 1:f=c;break;case 4:return e.label++,{value:c[1],done:!1};
case 5:e.label++;k=c[1];c=[0];continue;case 7:c=e.ops.pop();e.trys.pop();continue;default:if(!(f=e.trys,f=0<f.length&&f[f.length-1])&&(6===c[0]||2===c[0])){e=0;continue}if(3===c[0]&&(!f||c[1]>f[0]&&c[1]<f[3]))e.label=c[1];else if(6===c[0]&&e.label<f[1])e.label=f[1],f=c;else if(f&&e.label<f[2])e.label=f[2],e.ops.push(c);else{f[2]&&e.ops.pop();e.trys.pop();continue}}c=b.call(a,e)}catch(ea){c=[6,ea],k=0}finally{g=f=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var e={label:0,sent:function(){if(f[0]&
1)throw f[1];return f[1]},trys:[],ops:[]},g,k,f,h;return h={next:c(0),"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h};k=function(a,b){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])};m=function(a){var b="function"===typeof Symbol&&a[Symbol.iterator],c=0;return b?b.call(a):{next:function(){a&&c>=a.length&&(a=void 0);return{value:a&&a[c++],done:!a}}}};g=function(a,b){var c="function"===typeof Symbol&&a[Symbol.iterator];if(!c)return a;a=c.call(a);
var d,e=[],g;try{for(;(void 0===b||0<b--)&&!(d=a.next()).done;)e.push(d.value)}catch(H){g={error:H}}finally{try{d&&!d.done&&(c=a["return"])&&c.call(a)}finally{if(g)throw g.error;}}return e};t=function(){for(var a=[],b=0;b<arguments.length;b++)a=a.concat(g(arguments[b]));return a};v=function(a){return this instanceof v?(this.v=a,this):new v(a)};w=function(a,b,c){function d(a){h[a]&&(n[a]=function(b){return new Promise(function(c,d){1<l.push([a,b,c,d])||e(a,b)})})}function e(a,b){try{var c=h[a](b);
c.value instanceof v?Promise.resolve(c.value.v).then(g,k):f(l[0][2],c)}catch(V){f(l[0][3],V)}}function g(a){e("next",a)}function k(a){e("throw",a)}function f(a,b){(a(b),l.shift(),l.length)&&e(l[0][0],l[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var h=c.apply(a,b||[]),n,l=[];return n={},d("next"),d("throw"),d("return"),n[Symbol.asyncIterator]=function(){return this},n};y=function(a){function b(b,e){a[b]&&(c[b]=function(c){return(d=!d)?{value:v(a[b](c)),
done:"return"===b}:e?e(c):c})}var c,d;return c={},b("next"),b("throw",function(a){throw a;}),b("return"),c[Symbol.iterator]=function(){return this},c};r=function(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b=a[Symbol.asyncIterator];return b?b.call(a):"function"===typeof m?m(a):a[Symbol.iterator]()};z=function(a,b){Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b;return a};x("__extends",b);x("__assign",a);x("__rest",f);x("__decorate",
c);x("__param",e);x("__metadata",l);x("__awaiter",h);x("__generator",d);x("__exportStar",k);x("__values",m);x("__read",g);x("__spread",t);x("__await",v);x("__asyncGenerator",w);x("__asyncDelegator",y);x("__asyncValues",r);x("__makeTemplateObject",z)})},"@dojo/has/has":function(){(function(b){"object"===typeof module&&"object"===typeof module.exports?(b=b(require,exports),void 0!==b&&(module.exports=b)):"function"===typeof define&&define.amd&&define(["require","exports"],b)})(function(b,a){function f(b){b=
b.toLowerCase();return!!(b in d||b in a.testCache||a.testFunctions[b])}function c(b,c,e){void 0===e&&(e=!1);var g=b.toLowerCase();if(f(g)&&!e&&!(g in d))throw new TypeError('Feature "'+b+'" exists and overwrite not true.');"function"===typeof c?a.testFunctions[g]=c:c&&c.then?l[b]=c.then(function(c){a.testCache[b]=c;delete l[b]},function(){delete l[b]}):(a.testCache[g]=c,delete a.testFunctions[g])}function e(b){var c=b.toLowerCase();if(c in d)b=d[c];else if(a.testFunctions[c])b=a.testCache[c]=a.testFunctions[c].call(null),
delete a.testFunctions[c];else if(c in a.testCache)b=a.testCache[c];else{if(b in l)return!1;throw new TypeError('Attempt to detect unregistered has feature "'+b+'"');}return b}Object.defineProperty(a,"__esModule",{value:!0});a.testCache={};a.testFunctions={};var l={};b="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};var h=(b.DojoHasEnvironment||{}).staticFeatures;"DojoHasEnvironment"in b&&delete b.DojoHasEnvironment;var d=h?"function"===typeof h?
h.apply(b):h:{};a.load=function(a,b,c,d){a?b([a],c):c()};a.normalize=function(a,b){function c(a){var b=d[k++];if(":"===b)return null;if("?"===d[k++]){if(!a&&e(b))return c();c(!0);return c(a)}return b}var d=a.match(/[\?:]|[^:\?]*/g)||[],k=0;return(a=c())&&b(a)};a.exists=f;a.add=c;a.default=e;c("debug",!0);c("host-browser","undefined"!==typeof document&&"undefined"!==typeof location);c("host-node",function(){if("object"===typeof process&&process.versions&&process.versions.node)return process.versions.node})})},
"@dojo/shim/global":function(){(function(b){"object"===typeof module&&"object"===typeof module.exports?(b=b(require,exports),void 0!==b&&(module.exports=b)):"function"===typeof define&&define.amd&&define(["require","exports"],b)})(function(b,a){Object.defineProperty(a,"__esModule",{value:!0});b=function(){if("undefined"!==typeof global)return global;if("undefined"!==typeof window)return window;if("undefined"!==typeof self)return self}();a.default=b})},"@dojo/shim/support/util":function(){(function(b){"object"===
typeof module&&"object"===typeof module.exports?(b=b(require,exports),void 0!==b&&(module.exports=b)):"function"===typeof define&&define.amd&&define(["require","exports"],b)})(function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.getValueDescriptor=function(a,b,e,l){void 0===b&&(b=!1);void 0===e&&(e=!0);void 0===l&&(l=!0);return{value:a,enumerable:b,writable:e,configurable:l}};a.wrapNative=function(a){return function(b){for(var c=[],f=1;f<arguments.length;f++)c[f-1]=arguments[f];return a.apply(b,
c)}}})},"esri/layers/graphics/data/FeatureStore":function(){define("require exports @dojo/shim/array @dojo/shim/iterator @dojo/shim/Map @dojo/shim/Set ../../../geometry ../../../core/Error ../../../core/promiseUtils ../../../core/libs/rbush/rbush ../../../geometry/projection ../../../geometry/support/normalizeUtils ../../../geometry/support/scaleUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./FeatureSetReader ./FeatureStoreCapabilities ./FeatureStoreItem ./FeatureStoreResult ./projectionSupport ./SpatialQueryCache ./spatialQuerySupport ../../../tasks/support/Query".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v,w,y,r,z,x,p,n,A,B,C){function F(a){return a?JSON.parse(JSON.stringify(a,["latestWkid","wkid","wkt"])):a}Object.defineProperty(a,"__esModule",{value:!0});var D=new l.default(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong"]),H={},E=new h.SpatialReference({wkid:4326});b=function(){function a(a){var b=this;this._itemsMap=new e.default;this._itemsToIndex=new l.default;this._index=m(9,[".bounds[0]",".bounds[1]",
".bounds[2]",".bounds[3]"]);this.capabilities={query:z.queryCapabilities};this.fieldsMap=new e.default;this.geometryType=a.geometryType;this.hasM=a.hasM;this.hasZ=a.hasZ;this.objectIdField=a.objectIdField;this.spatialReference=a.spatialReference;this.definitionExpression=a.definitionExpression;this.cacheSpatialQueries=a.cacheSpatialQueries||!1;this.gdbVersion=a.gdbVersion;this.historicMoment=a.historicMoment;this.cacheSpatialQueries&&(this._geometryQueryCache=new A.default);a.fields.forEach(function(a){b.fieldsMap.set(a.name.trim(),
a);b.fieldsMap.set(a.name.trim().toLowerCase(),a)})}a.prototype.destroy=function(){this.clear();this.fieldsMap.clear()};a.prototype.clear=function(){this._itemsMap.clear();this._itemsToIndex.clear();this._index.clear();this._geometryQueryCache&&this._geometryQueryCache.clear()};Object.defineProperty(a.prototype,"size",{get:function(){return this._itemsMap.size},enumerable:!0,configurable:!0});a.prototype.load=function(a,b){var d="getBounds"in a?a:r.createFeatureSetReader(a),e=this._itemsMap,g=this._itemsToIndex;
this._clearCache();c.forOf(d.oids(),function(a){var c;e.has(a)?(c=e.get(a),c.count++,b&&b.update(a)):(c=new x.default(d,a),e.set(a,c),g.add(a),b&&b.add(a))})};a.prototype.unload=function(a,b){var d=this._index,e=this._itemsMap,g=this._itemsToIndex;this._clearCache();c.forOf(a.oids(),function(a){var c;e.has(a)&&(c=e.get(a),c.count--,0===c.count&&(e.delete(a),c.bounds?(d.remove(c),c.bounds=null):g.delete(a),b&&b.remove(a)))})};a.prototype.keep=function(a,b){var d=this._index,e=this._itemsMap,g=this._itemsToIndex;
this._clearCache();c.forOf(e,function(c){var k=c[0];c=c[1];a.has(k)||(e.delete(k),c.bounds?(d.remove(c),c.bounds=null):g.delete(k),b&&b.remove(k))})};a.prototype.remove=function(a,b){var c=this._index,d=this._itemsMap,e=this._itemsToIndex;this._clearCache();for(var g=0;g<a.length;g++){var k=a[g];if(!d.has(k))break;var f=d.get(k);d.delete(k);f.bounds?(c.remove(f),f.bounds=null):e.delete(k);b&&b.remove(k)}};a.prototype.executeQuery=function(a){var b=this;void 0===a&&(a=new C);var c=a.clone();return this._normalizeQuery(c).then(function(a){return b._checkQuerySupport(a)}).then(function(a){return b._executeGeometryQuery(a)}).then(function(a){return a.executeObjectIdsQuery(c)}).then(function(a){return a.executeAttributesQuery(c)}).catch(function(a){if(a===
H)return new p.default([],b);throw a;}).then(function(a){return a.createQueryResponse(c)})};a.prototype.executeQueryForCount=function(a){var b=this;void 0===a&&(a=new C);var c=a.clone();return this._normalizeQuery(c).then(function(a){return b._checkQuerySupport(a)}).then(function(a){return b._executeGeometryQuery(a)}).then(function(a){return a.executeObjectIdsQuery(c)}).then(function(a){return a.executeAttributesQuery(c)}).then(function(a){return a.size}).catch(function(a){if(a===H)return 0;throw a;
})};a.prototype.executeQueryForExtent=function(a){var b=this;void 0===a&&(a=new C);var c=a.clone();return this._normalizeQuery(c).then(function(a){return b._checkQuerySupport(a)}).then(function(a){return b._executeGeometryQuery(a)}).then(function(a){return a.executeObjectIdsQuery(c)}).then(function(a){return a.executeAttributesQuery(c)}).then(function(a){var d=a.items.length;if(!d)return{count:d,extent:null};for(var e={xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,
ymax:Number.NEGATIVE_INFINITY,spatialReference:F(b.spatialReference)},g=0,k=a.items;g<k.length;g++){var f=k[g].getBounds();f&&(e.xmin=Math.min(f[0],e.xmin),e.ymin=Math.min(f[1],e.ymin),e.xmax=Math.max(f[2],e.xmax),e.ymax=Math.max(f[3],e.ymax))}a=n.project(e,a.spatialReference,c.outSpatialReference);a.spatialReference=F(c.outSpatialReference&&c.outSpatialReference.toJSON()||b.spatialReference);0===a.xmax-a.xmin&&(e=v.getMetersPerUnitForSR(a.spatialReference),a.xmin-=e,a.xmax+=e);0===a.ymax-a.ymin&&
(e=v.getMetersPerUnitForSR(a.spatialReference),a.ymin-=e,a.ymax+=e);return{count:d,extent:a}}).catch(function(a){if(a===H)return{count:0,extent:null};throw a;})};a.prototype.executeQueryForIds=function(a){var b=this;void 0===a&&(a=new C);var c=a.clone();return this._normalizeQuery(c).then(function(a){return b._checkQuerySupport(a)}).then(function(a){return b._executeGeometryQuery(a)}).then(function(a){return a.executeObjectIdsQuery(c)}).then(function(a){return a.executeAttributesQuery(c)}).then(function(a){a=
a.items;for(var b=[],c=0;c<a.length;c++)b[c]=a[c].oid;return b}).catch(function(a){if(a===H)return[];throw a;})};a.prototype._clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._allItems=null};a.prototype._getAll=function(){this._allItems||(this._allItems=new p.default(f.from(this._itemsMap,function(a){return a[1]}),this));return this._allItems};a.prototype._normalizeQuery=function(a){var b=this,c=this.definitionExpression,d=a.where,e=a.geometry,g=a.outFields,f=
a.orderByFields,h=a.groupByFieldsForStatistics,l=a.outStatistics;a.where=d=d&&d.trim();if(!d||/^1 *= *1$/.test(d)||c&&c===d)a.where=null;if(g)for(c=0;c<g.length;c++)g[c]=g[c].trim();if(f)for(c=0;c<f.length;c++)f[c]=f[c].trim();if(h)for(c=0;c<h.length;c++)h[c]=h[c].trim();if(l)for(c=0;c<l.length;c++)l[c].onStatisticField=l[c].onStatisticField.trim();if(!e)return k.resolve(a);a.outSpatialReference||(a.outSpatialReference=e.spatialReference);return this._getInputGeometry(a).then(function(b){return a.geometry=
b}).then(function(c){return n.checkProjectionSupport(a,c.spatialReference,b.spatialReference)}).then(function(){return t.normalizeCentralMeridian(a.geometry)}).then(function(a){return n.project(a[0].toJSON(),a[0].spatialReference,b.spatialReference)}).then(function(b){if(!b)throw H;return a.read({geometry:b})})};a.prototype._executeGeometryQuery=function(a){var b=this,c=a.geometry,d=a.outSpatialReference,e=a.spatialRelationship,g=d&&!w.equals(this.spatialReference,d),f=g?JSON.stringify({geometry:c,
spatialRelationship:e,outSpatialReference:d}):JSON.stringify({geometry:c,spatialRelationship:e});if(this.cacheSpatialQueries&&this._geometryQueryCache.size&&this._geometryQueryCache.has(f))return k.resolve(this._geometryQueryCache.get(f));var h=null;if(c){this._updateSpatialIndex();var n=this._getQueryBBoxes(c).reduce(function(a,c){return a.concat(b._index.search({minX:c[0],minY:c[1],maxX:c[2],maxY:c[3]}))},[]),h="envelope-intersects"===a.spatialRelationship||"esriGeometryPoint"===this.geometryType&&
B.canQueryWithRBush(c)?k.resolve(new p.default(n,this)):B.getSpatialQueryOperator(e,c,this.geometryType).then(function(a){if(a){var c=n.filter(function(b){return a(b.getGeometry())});return new p.default(c,b)}})}else h=k.resolve(this._getAll());return h.then(function(c){if(g&&(a.returnGeometry||a.returnCentroid))return c.project(d).then(function(a){b.cacheSpatialQueries&&b._geometryQueryCache.set(f,a);return a});b.cacheSpatialQueries&&b._geometryQueryCache.set(f,c);return c})};a.prototype._getInputGeometry=
function(a){var b=a.geometry,c=a.distance,d=a.units;if(null==c)return k.resolve(b);var e=b.spatialReference,f=d||v.getUnitString(e),d=null,d=e&&(e.isGeographic||e.isWebMercator)?k.resolve(b):n.checkProjectionSupport(a,e,E).then(function(){return g.project(b,E)});return d.then(function(a){return B.getGeodesicBufferOperator().then(function(b){return b(a,c,f)})}).catch(function(a){return B.getBufferOperator().then(function(a){return a(b,c,f)})})};a.prototype._updateSpatialIndex=function(){var a=this;
if(this._itemsToIndex.size){var b=[];c.forOf(this._itemsToIndex,function(c){c=a._itemsMap.get(c);c.getBounds()&&b.push(c)});this._index.load(b);this._itemsToIndex.clear()}};a.prototype._getQueryBBoxes=function(a){if("point"===a.type)return[[a.x,a.y,a.x,a.y]];a=B.canQueryWithRBush(a)?a:a.extent;switch(a.type){case "extent":return[[a.xmin,a.ymin,a.xmax,a.ymax]];case "polygon":return a.rings.map(function(a){return[a[0][0],a[0][1],a[2][0],a[2][1]]})}};a.prototype._checkQuerySupport=function(a){return 0>
a.distance||null!=a.geometryPrecision||null!=a.maxAllowableOffset||a.multipatchOption||a.orderByFields&&a.orderByFields.length||a.pixelSize||a.relationParameter||a.text||a.timeExtent?k.reject(new d("feature-store:unsupported-query","Unsupported query options",{query:a})):k.all([this._checkAttributesQuerySupport(a),this._checkStatisticsQuerySupport(a),B.checkSpatialQuerySupport(a,this.geometryType,this.spatialReference),n.checkProjectionSupport(a,this.spatialReference,a.outSpatialReference)]).then(function(){return a})};
a.prototype._checkAttributesQuerySupport=function(a){var b=a.outFields;if(b&&0<b.length&&(b=y.getMissingFields(this.fieldsMap,b),b.length))throw new d("feature-store:unsupported-query","outFields contains missing fields",{missingFields:b,query:a});y.validateWhere(this.fieldsMap,a.where)};a.prototype._checkStatisticsQuerySupport=function(a){if(a.returnDistinctValues)return k.reject(new d("feature-store:unsupported-query","query with returnDistinctValues not supported",{query:a}));if(a.outStatistics&&
a.outStatistics.length){var b=a.outStatistics.map(function(a){return a.onStatisticField.trim()}),c=y.getMissingFields(this.fieldsMap,b);if(c.length)return k.reject(new d("feature-store:unsupported-query","outStatistics contains missing fields",{missingFields:c,query:a}));for(c=0;c<b.length;c++){var e=b[c],g=this.fieldsMap.get(e);if(!(a.groupByFieldsForStatistics&&a.groupByFieldsForStatistics.length||D.has(g.type)))return k.reject(new d("feature-store:unsupported-query","outStatistics contains non-numeric fields",
{fieldName:e,query:a}))}}};return a}();a.default=b})},"@dojo/shim/array":function(){(function(b){"object"===typeof module&&"object"===typeof module.exports?(b=b(require,exports),void 0!==b&&(module.exports=b)):"function"===typeof define&&define.amd&&define("require exports tslib ./global ./iterator ./number ./support/has ./support/util".split(" "),b)})(function(b,a){Object.defineProperty(a,"__esModule",{value:!0});var f=b("tslib"),c=b("./global"),e=b("./iterator"),l=b("./number"),h=b("./support/has");
b=b("./support/util");if(h.default("es6-array")&&h.default("es6-array-fill"))a.from=c.default.Array.from,a.of=c.default.Array.of,a.copyWithin=b.wrapNative(c.default.Array.prototype.copyWithin),a.fill=b.wrapNative(c.default.Array.prototype.fill),a.find=b.wrapNative(c.default.Array.prototype.find),a.findIndex=b.wrapNative(c.default.Array.prototype.findIndex);else{var d=function(a){if(isNaN(a))return 0;a=Number(a);isFinite(a)&&(a=Math.floor(a));return Math.min(Math.max(a,0),l.MAX_SAFE_INTEGER)},k=function(a){a=
Number(a);return isNaN(a)?0:0!==a&&isFinite(a)?(0<a?1:-1)*Math.floor(Math.abs(a)):a},m=function(a,b){return 0>a?Math.max(b+a,0):Math.min(a,b)};a.from=function(a,b,c){if(null==a)throw new TypeError("from: requires an array-like object");b&&c&&(b=b.bind(c));c=d(a.length);var g="function"===typeof this?Object(new this(c)):Array(c);if(!e.isArrayLike(a)&&!e.isIterable(a))return g;if(e.isArrayLike(a)){if(0===c)return[];for(var k=0;k<a.length;k++)g[k]=b?b(a[k],k):a[k]}else{k=0;try{for(var h=f.__values(a),
l=h.next();!l.done;l=h.next()){var m=l.value;g[k]=b?b(m,k):m;k++}}catch(A){t={error:A}}finally{try{l&&!l.done&&(n=h.return)&&n.call(h)}finally{if(t)throw t.error;}}}void 0!==a.length&&(g.length=c);return g;var t,n};a.of=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return Array.prototype.slice.call(a)};a.copyWithin=function(a,b,c,e){if(null==a)throw new TypeError("copyWithin: target must be an array-like object");var g=d(a.length);b=m(k(b),g);c=m(k(c),g);e=m(void 0===e?g:k(e),
g);e=Math.min(e-c,g-b);g=1;b>c&&b<c+e&&(g=-1,c+=e-1,b+=e-1);for(;0<e;)c in a?a[b]=a[c]:delete a[b],b+=g,c+=g,e--;return a};a.fill=function(a,b,c,e){var g=d(a.length);c=m(k(c),g);for(e=m(void 0===e?g:k(e),g);c<e;)a[c++]=b;return a};a.find=function(b,c,d){c=a.findIndex(b,c,d);return-1!==c?b[c]:void 0};a.findIndex=function(a,b,c){var e=d(a.length);if(!b)throw new TypeError("find: second argument must be a function");c&&(b=b.bind(c));for(c=0;c<e;c++)if(b(a[c],c,a))return c;return-1}}h.default("es7-array")?
a.includes=b.wrapNative(c.default.Array.prototype.includes):a.includes=function(a,b,c){void 0===c&&(c=0);var d;d=a.length;d=Number(d);isNaN(d)?d=0:(isFinite(d)&&(d=Math.floor(d)),d=Math.min(Math.max(d,0),l.MAX_SAFE_INTEGER));for(;c<d;++c){var e=a[c];if(b===e||b!==b&&e!==e)return!0}return!1}})},"@dojo/shim/iterator":function(){(function(b){"object"===typeof module&&"object"===typeof module.exports?(b=b(require,exports),void 0!==b&&(module.exports=b)):"function"===typeof define&&define.amd&&define(["require",
"exports","./Symbol","./string"],b)})(function(b,a){function f(a){return a&&"function"===typeof a[Symbol.iterator]}function c(a){return a&&"number"===typeof a.length}function e(a){if(f(a))return a[Symbol.iterator]();if(c(a))return new d(a)}Object.defineProperty(a,"__esModule",{value:!0});b("./Symbol");var l=b("./string"),h={done:!0,value:void 0},d=function(){function a(a){this._nextIndex=-1;f(a)?this._nativeIterator=a[Symbol.iterator]():this._list=a}a.prototype.next=function(){return this._nativeIterator?
this._nativeIterator.next():this._list?++this._nextIndex<this._list.length?{done:!1,value:this._list[this._nextIndex]}:h:h};a.prototype[Symbol.iterator]=function(){return this};return a}();a.ShimIterator=d;a.isIterable=f;a.isArrayLike=c;a.get=e;a.forOf=function(a,b,d){function g(){k=!0}var k=!1;if(c(a)&&"string"===typeof a)for(var f=a.length,h=0;h<f;++h){var m=a[h];if(h+1<f){var z=m.charCodeAt(0);z>=l.HIGH_SURROGATE_MIN&&z<=l.HIGH_SURROGATE_MAX&&(m+=a[++h])}b.call(d,m,a,g);if(k)break}else if(f=e(a))for(h=
f.next();!h.done;){b.call(d,h.value,a,g);if(k)break;h=f.next()}}})},"@dojo/shim/string":function(){(function(b){"object"===typeof module&&"object"===typeof module.exports?(b=b(require,exports),void 0!==b&&(module.exports=b)):"function"===typeof define&&define.amd&&define("require exports tslib ./global ./support/has ./support/util".split(" "),b)})(function(b,a){Object.defineProperty(a,"__esModule",{value:!0});var f=b("tslib"),c=b("./global"),e=b("./support/has");b=b("./support/util");a.HIGH_SURROGATE_MIN=
55296;a.HIGH_SURROGATE_MAX=56319;a.LOW_SURROGATE_MIN=56320;a.LOW_SURROGATE_MAX=57343;if(e.default("es6-string")&&e.default("es6-string-raw"))a.fromCodePoint=c.default.String.fromCodePoint,a.raw=c.default.String.raw,a.codePointAt=b.wrapNative(c.default.String.prototype.codePointAt),a.endsWith=b.wrapNative(c.default.String.prototype.endsWith),a.includes=b.wrapNative(c.default.String.prototype.includes),a.normalize=b.wrapNative(c.default.String.prototype.normalize),a.repeat=b.wrapNative(c.default.String.prototype.repeat),
a.startsWith=b.wrapNative(c.default.String.prototype.startsWith);else{var l=function(a,b,c,e,g){void 0===g&&(g=!1);if(null==b)throw new TypeError("string."+a+" requires a valid string to search against.");a=b.length;return[b,String(c),Math.min(Math.max(e!==e?g?a:0:e,0),a)]};a.fromCodePoint=function(){for(var b=0;b<arguments.length;b++);b=arguments.length;if(!b)return"";for(var c=String.fromCharCode,e=[],f=-1,g="";++f<b;){var l=Number(arguments[f]);if(!(isFinite(l)&&Math.floor(l)===l&&0<=l&&1114111>=
l))throw RangeError("string.fromCodePoint: Invalid code point "+l);65535>=l?e.push(l):(l-=65536,e.push((l>>10)+a.HIGH_SURROGATE_MIN,l%1024+a.LOW_SURROGATE_MIN));if(f+1===b||16384<e.length)g+=c.apply(null,e),e.length=0}return g};a.raw=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var c=a.raw,e="",g=b.length;if(null==a||null==a.raw)throw new TypeError("string.raw requires a valid callSite object with a raw value");for(var f=0,h=c.length;f<h;f++)e+=c[f]+(f<g&&f<h-1?b[f]:"");
return e};a.codePointAt=function(b,c){void 0===c&&(c=0);if(null==b)throw new TypeError("string.codePointAt requries a valid string.");var d=b.length;c!==c&&(c=0);if(!(0>c||c>=d)){var e=b.charCodeAt(c);return e>=a.HIGH_SURROGATE_MIN&&e<=a.HIGH_SURROGATE_MAX&&d>c+1&&(b=b.charCodeAt(c+1),b>=a.LOW_SURROGATE_MIN&&b<=a.LOW_SURROGATE_MAX)?1024*(e-a.HIGH_SURROGATE_MIN)+b-a.LOW_SURROGATE_MIN+65536:e}};a.endsWith=function(a,b,c){null==c&&(c=a.length);c=f.__read(l("endsWith",a,b,c,!0),3);a=c[0];b=c[1];c=c[2];
var d=c-b.length;return 0>d?!1:a.slice(d,c)===b};a.includes=function(a,b,c){void 0===c&&(c=0);c=f.__read(l("includes",a,b,c),3);a=c[0];b=c[1];c=c[2];return-1!==a.indexOf(b,c)};a.repeat=function(a,b){void 0===b&&(b=0);if(null==a)throw new TypeError("string.repeat requires a valid string.");b!==b&&(b=0);if(0>b||Infinity===b)throw new RangeError("string.repeat requires a non-negative finite count.");for(var c="";b;)b%2&&(c+=a),1<b&&(a+=a),b>>=1;return c};a.startsWith=function(a,b,c){void 0===c&&(c=0);
b=String(b);c=f.__read(l("startsWith",a,b,c),3);a=c[0];b=c[1];c=c[2];var d=c+b.length;return d>a.length?!1:a.slice(c,d)===b}}e.default("es2017-string")?(a.padEnd=b.wrapNative(c.default.String.prototype.padEnd),a.padStart=b.wrapNative(c.default.String.prototype.padStart)):(a.padEnd=function(b,c,e){void 0===e&&(e=" ");if(null===b||void 0===b)throw new TypeError("string.repeat requires a valid string.");if(Infinity===c)throw new RangeError("string.padEnd requires a non-negative finite count.");if(null===
c||void 0===c||0>c)c=0;b=String(b);c-=b.length;0<c&&(b+=a.repeat(e,Math.floor(c/e.length))+e.slice(0,c%e.length));return b},a.padStart=function(b,c,e){void 0===e&&(e=" ");if(null===b||void 0===b)throw new TypeError("string.repeat requires a valid string.");if(Infinity===c)throw new RangeError("string.padStart requires a non-negative finite count.");if(null===c||void 0===c||0>c)c=0;b=String(b);c-=b.length;0<c&&(b=a.repeat(e,Math.floor(c/e.length))+e.slice(0,c%e.length)+b);return b})})},"@dojo/shim/number":function(){(function(b){"object"===
typeof module&&"object"===typeof module.exports?(b=b(require,exports),void 0!==b&&(module.exports=b)):"function"===typeof define&&define.amd&&define(["require","exports","./global"],b)})(function(b,a){function f(a){return"number"===typeof a&&e.default.isFinite(a)}function c(a){return f(a)&&Math.floor(a)===a}Object.defineProperty(a,"__esModule",{value:!0});var e=b("./global");a.EPSILON=1;a.MAX_SAFE_INTEGER=Math.pow(2,53)-1;a.MIN_SAFE_INTEGER=-a.MAX_SAFE_INTEGER;a.isNaN=function(a){return"number"===
typeof a&&e.default.isNaN(a)};a.isFinite=f;a.isInteger=c;a.isSafeInteger=function(b){return c(b)&&Math.abs(b)<=a.MAX_SAFE_INTEGER}})},"@dojo/shim/Map":function(){(function(b){"object"===typeof module&&"object"===typeof module.exports?(b=b(require,exports),void 0!==b&&(module.exports=b)):"function"===typeof define&&define.amd&&define("require exports tslib ./iterator ./global ./object ./support/has ./Symbol".split(" "),b)})(function(b,a){Object.defineProperty(a,"__esModule",{value:!0});var f=b("tslib"),
c=b("./iterator"),e=b("./global"),l=b("./object"),h=b("./support/has");b("./Symbol");a.Map=e.default.Map;h.default("es6-map")||(a.Map=(d=function(){function a(a){this._keys=[];this._values=[];this[Symbol.toStringTag]="Map";if(a)if(c.isArrayLike(a))for(var b=0;b<a.length;b++){var d=a[b];this.set(d[0],d[1])}else try{for(var b=f.__values(a),e=b.next();!e.done;e=b.next())d=e.value,this.set(d[0],d[1])}catch(r){k={error:r}}finally{try{e&&!e.done&&(h=b.return)&&h.call(b)}finally{if(k)throw k.error;}}var k,
h}a.prototype._indexOfKey=function(a,b){for(var c=0,d=a.length;c<d;c++)if(l.is(a[c],b))return c;return-1};Object.defineProperty(a.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._keys.length=this._values.length=0};a.prototype.delete=function(a){a=this._indexOfKey(this._keys,a);if(0>a)return!1;this._keys.splice(a,1);this._values.splice(a,1);return!0};a.prototype.entries=function(){var a=this,b=this._keys.map(function(b,c){return[b,
a._values[c]]});return new c.ShimIterator(b)};a.prototype.forEach=function(a,b){for(var c=this._keys,d=this._values,e=0,g=c.length;e<g;e++)a.call(b,d[e],c[e],this)};a.prototype.get=function(a){a=this._indexOfKey(this._keys,a);return 0>a?void 0:this._values[a]};a.prototype.has=function(a){return-1<this._indexOfKey(this._keys,a)};a.prototype.keys=function(){return new c.ShimIterator(this._keys)};a.prototype.set=function(a,b){var c=this._indexOfKey(this._keys,a),c=0>c?this._keys.length:c;this._keys[c]=
a;this._values[c]=b;return this};a.prototype.values=function(){return new c.ShimIterator(this._values)};a.prototype[Symbol.iterator]=function(){return this.entries()};return a}(),d[Symbol.species]=d,d));a.default=a.Map;var d})},"@dojo/shim/object":function(){(function(b){"object"===typeof module&&"object"===typeof module.exports?(b=b(require,exports),void 0!==b&&(module.exports=b)):"function"===typeof define&&define.amd&&define(["require","exports","./global","./support/has","./Symbol"],b)})(function(b,
a){Object.defineProperty(a,"__esModule",{value:!0});var f=b("./global"),c=b("./support/has"),e=b("./Symbol");c.default("es6-object")?(b=f.default.Object,a.assign=b.assign,a.getOwnPropertyDescriptor=b.getOwnPropertyDescriptor,a.getOwnPropertyNames=b.getOwnPropertyNames,a.getOwnPropertySymbols=b.getOwnPropertySymbols,a.is=b.is,a.keys=b.keys):(a.keys=function(a){return Object.keys(a).filter(function(a){return!a.match(/^@@.+/)})},a.assign=function(b){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];
if(null==b)throw new TypeError("Cannot convert undefined or null to object");var e=Object(b);c.forEach(function(b){b&&a.keys(b).forEach(function(a){e[a]=b[a]})});return e},a.getOwnPropertyDescriptor=function(a,b){e.isSymbol(b);return Object.getOwnPropertyDescriptor(a,b)},a.getOwnPropertyNames=function(a){return Object.getOwnPropertyNames(a).filter(function(a){return!a.match(/^@@.+/)})},a.getOwnPropertySymbols=function(a){return Object.getOwnPropertyNames(a).filter(function(a){return!!a.match(/^@@.+/)}).map(function(a){return Symbol.for(a.substring(2))})},
a.is=function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b});c.default("es2017-object")?(b=f.default.Object,a.getOwnPropertyDescriptors=b.getOwnPropertyDescriptors,a.entries=b.entries,a.values=b.values):(a.getOwnPropertyDescriptors=function(b){return a.getOwnPropertyNames(b).reduce(function(c,d){c[d]=a.getOwnPropertyDescriptor(b,d);return c},{})},a.entries=function(b){return a.keys(b).map(function(a){return[a,b[a]]})},a.values=function(b){return a.keys(b).map(function(a){return b[a]})})})},"@dojo/shim/Set":function(){(function(b){"object"===
typeof module&&"object"===typeof module.exports?(b=b(require,exports),void 0!==b&&(module.exports=b)):"function"===typeof define&&define.amd&&define("require exports tslib ./global ./iterator ./support/has ./Symbol".split(" "),b)})(function(b,a){Object.defineProperty(a,"__esModule",{value:!0});var f=b("tslib"),c=b("./global"),e=b("./iterator"),l=b("./support/has");b("./Symbol");a.Set=c.default.Set;l.default("es6-set")||(a.Set=(h=function(){function a(a){this._setData=[];this[Symbol.toStringTag]="Set";
if(a)if(e.isArrayLike(a))for(var b=0;b<a.length;b++)this.add(a[b]);else try{for(var b=f.__values(a),c=b.next();!c.done;c=b.next())this.add(c.value)}catch(w){d={error:w}}finally{try{c&&!c.done&&(k=b.return)&&k.call(b)}finally{if(d)throw d.error;}}var d,k}a.prototype.add=function(a){if(this.has(a))return this;this._setData.push(a);return this};a.prototype.clear=function(){this._setData.length=0};a.prototype.delete=function(a){a=this._setData.indexOf(a);if(-1===a)return!1;this._setData.splice(a,1);return!0};
a.prototype.entries=function(){return new e.ShimIterator(this._setData.map(function(a){return[a,a]}))};a.prototype.forEach=function(a,b){for(var c=this.values(),d=c.next();!d.done;)a.call(b,d.value,d.value,this),d=c.next()};a.prototype.has=function(a){return-1<this._setData.indexOf(a)};a.prototype.keys=function(){return new e.ShimIterator(this._setData)};Object.defineProperty(a.prototype,"size",{get:function(){return this._setData.length},enumerable:!0,configurable:!0});a.prototype.values=function(){return new e.ShimIterator(this._setData)};
a.prototype[Symbol.iterator]=function(){return new e.ShimIterator(this._setData)};return a}(),h[Symbol.species]=h,h));a.default=a.Set;var h})},"esri/core/libs/rbush/rbush":function(){define(["../quickselect/quickselect"],function(b){function a(b,c){if(!(this instanceof a))return new a(b,c);this._maxEntries=Math.max(4,b||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));c&&this._initFormat(c);this.clear()}function f(a,b){c(a,0,a.children.length,b,a)}function c(a,b,c,d,g){g||(g=t(null));
g.minX=Infinity;g.minY=Infinity;g.maxX=-Infinity;g.maxY=-Infinity;for(var f;b<c;b++)f=a.children[b],e(g,a.leaf?d(f):f);return g}function e(a,b){a.minX=Math.min(a.minX,b.minX);a.minY=Math.min(a.minY,b.minY);a.maxX=Math.max(a.maxX,b.maxX);a.maxY=Math.max(a.maxY,b.maxY);return a}function l(a,b){return a.minX-b.minX}function h(a,b){return a.minY-b.minY}function d(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function k(a){return a.maxX-a.minX+(a.maxY-a.minY)}function m(a,b){return a.minX<=b.minX&&a.minY<=
b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function g(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function t(a){return{children:a,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function v(a,c,d,e,g){for(var f=[c,d],k;f.length;)d=f.pop(),c=f.pop(),d-c<=e||(k=c+Math.ceil((d-c)/e/2)*e,b(a,k,c,d,g),f.push(c,k,k,d))}a.prototype={all:function(){return this._all(this.data,[])},search:function(a){var b=this.data,c=[],d=this.toBBox;if(!g(a,b))return c;
for(var e=[],f,k,h,l;b;){f=0;for(k=b.children.length;f<k;f++)h=b.children[f],l=b.leaf?d(h):h,g(a,l)&&(b.leaf?c.push(h):m(a,l)?this._all(h,c):e.push(h));b=e.pop()}return c},collides:function(a){var b=this.data,c=this.toBBox;if(!g(a,b))return!1;for(var d=[],e,f,k,h;b;){e=0;for(f=b.children.length;e<f;e++)if(k=b.children[e],h=b.leaf?c(k):k,g(a,h)){if(b.leaf||m(a,h))return!0;d.push(k)}b=d.pop()}return!1},load:function(a){if(!a||!a.length)return this;if(a.length<this._minEntries){for(var b=0,c=a.length;b<
c;b++)this.insert(a[b]);return this}a=this._build(a.slice(),0,a.length-1,0);this.data.children.length?this.data.height===a.height?this._splitRoot(this.data,a):(this.data.height<a.height&&(b=this.data,this.data=a,a=b),this._insert(a,this.data.height-a.height-1,!0)):this.data=a;return this},insert:function(a){a&&this._insert(a,this.data.height-1);return this},clear:function(){this.data=t([]);return this},remove:function(a,b){if(!a)return this;for(var c=this.data,d=this.toBBox(a),e=[],g=[],f,k,h,l;c||
e.length;){c||(c=e.pop(),k=e[e.length-1],f=g.pop(),l=!0);if(c.leaf){a:{h=a;var t=c.children,w=b;if(w){for(var v=0;v<t.length;v++)if(w(h,t[v])){h=v;break a}h=-1}else h=t.indexOf(h)}if(-1!==h){c.children.splice(h,1);e.push(c);this._condense(e);break}}l||c.leaf||!m(c,d)?k?(f++,c=k.children[f],l=!1):c=null:(e.push(c),g.push(f),f=0,k=c,c=c.children[0])}return this},toBBox:function(a){return a},compareMinX:l,compareMinY:h,toJSON:function(){return this.data},fromJSON:function(a){this.data=a;return this},
_all:function(a,b){for(var c=[];a;)a.leaf?b.push.apply(b,a.children):c.push.apply(c,a.children),a=c.pop();return b},_build:function(a,b,c,d){var e=c-b+1,g=this._maxEntries,k;if(e<=g)return k=t(a.slice(b,c+1)),f(k,this.toBBox),k;d||(d=Math.ceil(Math.log(e)/Math.log(g)),g=Math.ceil(e/Math.pow(g,d-1)));k=t([]);k.leaf=!1;k.height=d;var e=Math.ceil(e/g),g=e*Math.ceil(Math.sqrt(g)),h,l,m;for(v(a,b,c,g,this.compareMinX);b<=c;b+=g)for(l=Math.min(b+g-1,c),v(a,b,l,e,this.compareMinY),h=b;h<=l;h+=e)m=Math.min(h+
e-1,l),k.children.push(this._build(a,h,m,d-1));f(k,this.toBBox);return k},_chooseSubtree:function(a,b,c,e){for(var g,f,k,h,l,m,t,w;;){e.push(b);if(b.leaf||e.length-1===c)break;t=w=Infinity;g=0;for(f=b.children.length;g<f;g++)k=b.children[g],l=d(k),m=(Math.max(k.maxX,a.maxX)-Math.min(k.minX,a.minX))*(Math.max(k.maxY,a.maxY)-Math.min(k.minY,a.minY))-l,m<w?(w=m,t=l<t?l:t,h=k):m===w&&l<t&&(t=l,h=k);b=h||b.children[0]}return b},_insert:function(a,b,c){var d=this.toBBox;c=c?a:d(a);var d=[],g=this._chooseSubtree(c,
this.data,b,d);g.children.push(a);for(e(g,c);0<=b;)if(d[b].children.length>this._maxEntries)this._split(d,b),b--;else break;this._adjustParentBBoxes(c,d,b)},_split:function(a,b){var c=a[b],d=c.children.length,e=this._minEntries;this._chooseSplitAxis(c,e,d);d=this._chooseSplitIndex(c,e,d);d=t(c.children.splice(d,c.children.length-d));d.height=c.height;d.leaf=c.leaf;f(c,this.toBBox);f(d,this.toBBox);b?a[b-1].children.push(d):this._splitRoot(c,d)},_splitRoot:function(a,b){this.data=t([a,b]);this.data.height=
a.height+1;this.data.leaf=!1;f(this.data,this.toBBox)},_chooseSplitIndex:function(a,b,e){var g,f,k,h,l,m,t;l=m=Infinity;for(g=b;g<=e-b;g++)f=c(a,0,g,this.toBBox),k=c(a,g,e,this.toBBox),h=Math.max(0,Math.min(f.maxX,k.maxX)-Math.max(f.minX,k.minX))*Math.max(0,Math.min(f.maxY,k.maxY)-Math.max(f.minY,k.minY)),f=d(f)+d(k),h<l?(l=h,t=g,m=f<m?f:m):h===l&&f<m&&(m=f,t=g);return t},_chooseSplitAxis:function(a,b,c){var d=a.leaf?this.compareMinX:l,e=a.leaf?this.compareMinY:h,g=this._allDistMargin(a,b,c,d);b=
this._allDistMargin(a,b,c,e);g<b&&a.children.sort(d)},_allDistMargin:function(a,b,d,g){a.children.sort(g);g=this.toBBox;var f=c(a,0,b,g),h=c(a,d-b,d,g),l=k(f)+k(h),m,t;for(m=b;m<d-b;m++)t=a.children[m],e(f,a.leaf?g(t):t),l+=k(f);for(m=d-b-1;m>=b;m--)t=a.children[m],e(h,a.leaf?g(t):t),l+=k(h);return l},_adjustParentBBoxes:function(a,b,c){for(;0<=c;c--)e(b[c],a)},_condense:function(a){for(var b=a.length-1,c;0<=b;b--)0===a[b].children.length?0<b?(c=a[b-1].children,c.splice(c.indexOf(a[b]),1)):this.clear():
f(a[b],this.toBBox)},_initFormat:function(a){var b=["return a"," - b",";"];this.compareMinX=new Function("a","b",b.join(a[0]));this.compareMinY=new Function("a","b",b.join(a[1]));this.toBBox=new Function("a","return {minX: a"+a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")}};return a})},"esri/core/libs/quickselect/quickselect":function(){define([],function(){function b(c,e,f,h,d){for(;h>f;){if(600<h-f){var k=h-f+1,l=e-f+1,g=Math.log(k),t=.5*Math.exp(2*g/3),g=.5*Math.sqrt(g*t*(k-t)/k)*
(0>l-k/2?-1:1);b(c,e,Math.max(f,Math.floor(e-l*t/k+g)),Math.min(h,Math.floor(e+(k-l)*t/k+g)),d)}k=c[e];l=f;t=h;a(c,f,e);for(0<d(c[h],k)&&a(c,f,h);l<t;){a(c,l,t);l++;for(t--;0>d(c[l],k);)l++;for(;0<d(c[t],k);)t--}0===d(c[f],k)?a(c,f,t):(t++,a(c,t,h));t<=e&&(f=t+1);e<=t&&(h=t-1)}}function a(a,b,f){var c=a[b];a[b]=a[f];a[f]=c}function f(a,b){return a<b?-1:a>b?1:0}return function(a,e,l,h,d){b(a,e,l||0,h||a.length-1,d||f)}})},"esri/geometry/projection":function(){define("require exports dojo/Deferred ./pe ./SpatialReference ./support/GeographicTransformation".split(" "),
function(b,a,f,c,e,l){function h(a,b,c,f,h){void 0===f&&(f=null);void 0===h&&(h=!1);if(null===f){var m=l.cacheKey(b,c);void 0!==g[m]?f=g[m]:(f=d(b,c,null),null===f&&(f=new l),g[m]=f)}return k._project(a,b,c instanceof e||!1===h?c:new e(c),f,h)}function d(a,b,c){void 0===c&&(c=null);a=k._getTransformation(a,b,c);return null!==a?l.fromGE(a):null}Object.defineProperty(a,"__esModule",{value:!0});var k=null;a.isLoaded=function(){return!!k&&c.isLoaded()};a.isSupported=function(){return c.isSupported()};
var m=null;a.load=function(){if(m)return m.promise;m=new f;var a=c.load();b(["./geometryEngine"],function(b){k=b;a.then(function(){k._enableProjection(c);m.resolve()},function(a){m.reject(a)})});return m.promise};a.project=function(a,b,c){void 0===c&&(c=null);return a instanceof Array?0===a.length?[]:h(a,a[0].spatialReference,b,c):h([a],a.spatialReference,b,c)[0]};var g={};a.projectMany=h;a.getTransformation=d;a.getTransformations=function(a,b,c){void 0===c&&(c=null);a=k._getTransformationBySuitability(a,
b,c);if(null!==a){b=[];for(c=0;c<a.length;c++)b.push(l.fromGE(a[c]));return b}return[]}})},"esri/geometry/pe":function(){define(["require","exports","../core/tsSupport/extendsHelper","dojo/Deferred","../core/sniff"],function(b,a,f,c,e){function l(b){function c(a,b,c){a[b]=c(a[b])}a._pe=b;t.init();v.init();w.init();y.init();r.init();a.PeGCSExtent=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}f(c,b);c.prototype.destroy=function(){a._pe.destroy(this)};return c}(a._pe.PeGCSExtent);
for(var d=0,e=[a._pe.PeDatum,a._pe.PeGeogcs,a._pe.PeGeogtran,a._pe.PeObject,a._pe.PeParameter,a._pe.PePrimem,a._pe.PeProjcs,a._pe.PeSpheroid,a._pe.PeUnit];d<e.length;d++)b=e[d],c(b.prototype,"getName",function(a){return function(){return a.call(this,Array(t.PE_NAME_MAX))}});d=0;for(e=[a._pe.PeGeogtran,a._pe.PeProjcs];d<e.length;d++)b=e[d],c(b.prototype,"getParameters",function(b){return function(){for(var c=Array(t.PE_PARM_MAX),d=b.call(this),e=0;e<c.length;e++){var g=a._pe.getValue(d,"*");c[e]=g?
a._pe.wrapPointer(g,a._pe.PeParameter):null;d+=Int32Array.BYTES_PER_ELEMENT}return c}});c(a._pe.PeHorizon.prototype,"getCoord",function(a){return function(){var b=this.getSize();if(!b)return null;var c=[],d=a.call(this);m(c,b,d);return c}});c(a._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(b){var c=a._pe._pe_getPeGTlistExtendedGTsSize();return function(){var d=null,e=b.call(this);if(!a._pe.compare(e,a._pe.NULL)){var d=[e],g=this.getSteps();if(1<g)for(var e=a._pe.getPointer(e),f=1;f<g;f++)d.push(a._pe.wrapPointer(e+
c*f,a._pe.PeGTlistExtendedGTs))}return d}});var g=a._pe._pe_getPeHorizonSize();b=function(b){return function(){var c=this._cache;c||(this._cache=c=new Map);if(c.has(b))return c.get(b);var d=null,e=b.call(this);if(!a._pe.compare(e,a._pe.NULL)){var d=[e],f=e.getNump();if(1<f)for(var e=a._pe.getPointer(e),k=1;k<f;k++)d.push(a._pe.wrapPointer(e+g*k,a._pe.PeHorizon))}c.set(b,d);return d}};c(a._pe.PeProjcs.prototype,"horizonGcsGenerate",b);c(a._pe.PeProjcs.prototype,"horizonPcsGenerate",b);a._pe.PeObject.prototype.toString=
function(b){void 0===b&&(b=t.PE_STR_OPTS_NONE);a._pe.ensureCache.prepare();var c=a._pe.getPointer(this),d=a._pe.ensureInt8(Array(t.PE_BUFFER_MAX));return a._pe.Pointer_stringify(a._pe._pe_object_to_string_ext(c,b,d))}}function h(b){if(b){var c=a._pe.getClass(b);c&&(c=a._pe.getCache(c))&&(b=a._pe.getPointer(b))&&delete c[b]}}function d(b,c){var d=[];c=Array(c);for(var e=0;e<b;e++)d.push(a._pe.ensureInt8(c));return d}function k(a){var b;Array.isArray(a[0])?(b=[],a.forEach(function(a){b.push(a[0],a[1])})):
b=a;return b}function m(b,c,d,e){void 0===e&&(e=!1);if(e)for(e=0;e<2*c;e++)b[e]=a._pe.getValue(d+e*Float64Array.BYTES_PER_ELEMENT,"double");else{var g=0===b.length;for(e=0;e<c;e++)g&&(b[e]=Array(2)),b[e][0]=a._pe.getValue(d,"double"),b[e][1]=a._pe.getValue(d+Float64Array.BYTES_PER_ELEMENT,"double"),d+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(a,"__esModule",{value:!0});var g;a._pe=null;a.isLoaded=function(){return!!a._pe};a.isSupported=function(){return!!e("esri-wasm")};a.load=function(){if(g)return g.promise;
g=new c;b(["./support/pe-wasm"],function(a){a({locateFile:function(a){return b.toUrl("./support/"+a)},onAbort:function(a){g.reject(Error(a))}}).then(function(a){l(a);g.resolve()})});return g.promise};(function(b){function c(b,c,d){a._pe.ensureCache.prepare();var e=k(d),g=d===e,e=a._pe.ensureFloat64(e);(b=a._pe._pe_geog_to_proj(a._pe.getPointer(b),c,e))&&m(d,c,e,g);return b}function d(a,b,c){return e(a,b,c,0)}function e(b,c,d,e){a._pe.ensureCache.prepare();var g=k(d),f=d===g,g=a._pe.ensureFloat64(g);
(b=a._pe._pe_proj_to_geog_center(a._pe.getPointer(b),c,g,e))&&m(d,c,g,f);return b}b.geogToProj=c;b.projGeog=function(a,b,e,g){switch(g){case t.PE_TRANSFORM_P_TO_G:return d(a,b,e);case t.PE_TRANSFORM_G_TO_P:return c(a,b,e)}return 0};b.projToGeog=d;b.projToGeogCenter=e})(a.PeCSTransformations||(a.PeCSTransformations={}));var t;(function(b){b.init=function(){b.PE_BUFFER_MAX=a._pe.PeDefs.prototype.get_PE_BUFFER_MAX();b.PE_NAME_MAX=a._pe.PeDefs.prototype.get_PE_NAME_MAX();b.PE_MGRS_MAX=a._pe.PeDefs.prototype.get_PE_MGRS_MAX();
b.PE_USNG_MAX=a._pe.PeDefs.prototype.get_PE_USNG_MAX();b.PE_DD_MAX=a._pe.PeDefs.prototype.get_PE_DD_MAX();b.PE_DDM_MAX=a._pe.PeDefs.prototype.get_PE_DDM_MAX();b.PE_DMS_MAX=a._pe.PeDefs.prototype.get_PE_DMS_MAX();b.PE_UTM_MAX=a._pe.PeDefs.prototype.get_PE_UTM_MAX();b.PE_PARM_MAX=a._pe.PeDefs.prototype.get_PE_PARM_MAX();b.PE_TYPE_NONE=a._pe.PeDefs.prototype.get_PE_TYPE_NONE();b.PE_TYPE_GEOGCS=a._pe.PeDefs.prototype.get_PE_TYPE_GEOGCS();b.PE_TYPE_PROJCS=a._pe.PeDefs.prototype.get_PE_TYPE_PROJCS();b.PE_TYPE_GEOGTRAN=
a._pe.PeDefs.prototype.get_PE_TYPE_GEOGTRAN();b.PE_TYPE_COORDSYS=a._pe.PeDefs.prototype.get_PE_TYPE_COORDSYS();b.PE_TYPE_UNIT=a._pe.PeDefs.prototype.get_PE_TYPE_UNIT();b.PE_STR_OPTS_NONE=a._pe.PeDefs.prototype.get_PE_STR_OPTS_NONE();b.PE_STR_AUTH_NONE=a._pe.PeDefs.prototype.get_PE_STR_AUTH_NONE();b.PE_STR_AUTH_TOP=a._pe.PeDefs.prototype.get_PE_STR_AUTH_TOP();b.PE_STR_NAME_CANON=a._pe.PeDefs.prototype.get_PE_STR_NAME_CANON();b.PE_PARM_X0=a._pe.PeDefs.prototype.get_PE_PARM_X0();b.PE_PARM_ND=a._pe.PeDefs.prototype.get_PE_PARM_ND();
b.PE_TRANSFORM_1_TO_2=a._pe.PeDefs.prototype.get_PE_TRANSFORM_1_TO_2();b.PE_TRANSFORM_2_TO_1=a._pe.PeDefs.prototype.get_PE_TRANSFORM_2_TO_1();b.PE_TRANSFORM_P_TO_G=a._pe.PeDefs.prototype.get_PE_TRANSFORM_P_TO_G();b.PE_TRANSFORM_G_TO_P=a._pe.PeDefs.prototype.get_PE_TRANSFORM_G_TO_P();b.PE_HORIZON_RECT=a._pe.PeDefs.prototype.get_PE_HORIZON_RECT();b.PE_HORIZON_POLY=a._pe.PeDefs.prototype.get_PE_HORIZON_POLY();b.PE_HORIZON_LINE=a._pe.PeDefs.prototype.get_PE_HORIZON_LINE();b.PE_HORIZON_DELTA=a._pe.PeDefs.prototype.get_PE_HORIZON_DELTA()}})(t=
a.PeDefs||(a.PeDefs={}));(function(b){function c(b,c){var g=null,f=e[b];f||(f={},e[b]=f);f.hasOwnProperty(String(c))?g=f[c]:(b=a._pe.PeFactory.prototype.factoryByType(b,c),a._pe.compare(b,a._pe.NULL)||(g=b,f[c]=g));return g=d(g)}function d(b){if(b){var c=b.getType();switch(c){case t.PE_TYPE_GEOGCS:b=a._pe.castObject(b,a._pe.PeGeogcs);break;case t.PE_TYPE_PROJCS:b=a._pe.castObject(b,a._pe.PeProjcs);break;case t.PE_TYPE_GEOGTRAN:b=a._pe.castObject(b,a._pe.PeGeogtran);break;default:c&t.PE_TYPE_UNIT&&
(b=a._pe.castObject(b,a._pe.PeUnit))}}return b}var e={},g={};b.initialize=function(){a._pe.PeFactory.prototype.initialize(null)};b.coordsys=function(a){return c(t.PE_TYPE_COORDSYS,a)};b.factoryByType=c;b.fromString=function(b,c){var e=null,f=g[b];f||(f={},g[b]=f);f.hasOwnProperty(c)?e=f[c]:(b=a._pe.PeFactory.prototype.fromString(b,c),a._pe.compare(b,a._pe.NULL)||(e=b,f[c]=e));return e=d(e)};b.geogcs=function(a){return c(t.PE_TYPE_GEOGCS,a)};b.geogtran=function(a){return c(t.PE_TYPE_GEOGTRAN,a)};b.getCode=
function(b){return a._pe.PeFactory.prototype.getCode(b)};b.projcs=function(a){return c(t.PE_TYPE_PROJCS,a)};b.unit=function(a){return c(t.PE_TYPE_UNIT,a)}})(a.PeFactory||(a.PeFactory={}));a.PeGCSExtent=null;var v;(function(b){var c;b.init=function(){b.PE_GTLIST_OPTS_COMMON=a._pe.PeGTlistExtended.prototype.get_PE_GTLIST_OPTS_COMMON();c=a._pe._pe_getPeGTlistExtendedEntrySize()};b.getGTlist=function(b,d,e,g,f,k){var h=null,l=new a._pe.PeInteger(k);try{var n=a._pe.PeGTlistExtended.prototype.getGTlist(b,
d,e,g,f,l);if(k=l.get_val())if(h=[n],1<k){var m=a._pe.getPointer(n);for(b=1;b<k;b++)h.push(a._pe.wrapPointer(m+c*b,a._pe.PeGTlistExtendedEntry))}}finally{a._pe.destroy(l)}return h}})(v=a.PeGTlistExtended||(a.PeGTlistExtended={}));(function(b){b.destroy=function(b){if(b&&b.length){for(var c=0;c<b.length;c++){var d=b[c];h(d);d.getEntries().forEach(function(a){h(a);a=a.getGeogtran();h(a);a.getParameters().forEach(h);[a.getGeogcs1(),a.getGeogcs2()].forEach(function(a){h(a);var b=a.getDatum();h(b);h(b.getSpheroid());
h(a.getPrimem());h(a.getUnit())})})}a._pe.PeGTlistExtendedEntry.prototype.Delete(b[0])}}})(a.PeGTlistExtendedEntry||(a.PeGTlistExtendedEntry={}));(function(b){b.geogToGeog=function(b,c,d,e,g){a._pe.ensureCache.prepare();var f=k(d),h=d===f,f=a._pe.ensureFloat64(f),l=0;e&&(l=a._pe.ensureFloat64(e));(b=a._pe._pe_geog_to_geog(a._pe.getPointer(b),c,f,l,g))&&m(d,c,f,h);return b}})(a.PeGTTransformations||(a.PeGTTransformations={}));(function(b){function c(b,c,e,g,f,h){a._pe.ensureCache.prepare();var l,n;
switch(b){case "dd":l=a._pe._pe_geog_to_dd;n=t.PE_DD_MAX;break;case "ddm":l=a._pe._pe_geog_to_ddm;n=t.PE_DDM_MAX;break;case "dms":l=a._pe._pe_geog_to_dms,n=t.PE_DMS_MAX}b=0;c&&(b=a._pe.getPointer(c));c=k(g);c=a._pe.ensureFloat64(c);n=d(e,n);g=a._pe.ensureInt32(n);if(f=l(b,e,c,f,g))for(l=0;l<e;l++)h[l]=a._pe.Pointer_stringify(n[l]);return f}function e(b,c,d,e,g){a._pe.ensureCache.prepare();var f;switch(b){case "dd":f=a._pe._pe_dd_to_geog;break;case "ddm":f=a._pe._pe_ddm_to_geog;break;case "dms":f=
a._pe._pe_dms_to_geog}b=0;c&&(b=a._pe.getPointer(c));c=e.map(function(b){return a._pe.ensureString(b)});e=a._pe.ensureInt32(c);c=a._pe.ensureFloat64(Array(2*d));(f=f(b,d,e,c))&&m(g,d,c);return f}b.geog_to_dms=function(a,b,d,e,g){return c("dms",a,b,d,e,g)};b.dms_to_geog=function(a,b,c,d){return e("dms",a,b,c,d)};b.geog_to_ddm=function(a,b,d,e,g){return c("ddm",a,b,d,e,g)};b.ddm_to_geog=function(a,b,c,d){return e("ddm",a,b,c,d)};b.geog_to_dd=function(a,b,d,e,g){return c("dd",a,b,d,e,g)};b.dd_to_geog=
function(a,b,c,d){return e("dd",a,b,c,d)}})(a.PeNotationDms||(a.PeNotationDms={}));var w;(function(b){b.init=function(){b.PE_MGRS_STYLE_NEW=a._pe.PeNotationMgrs.prototype.get_PE_MGRS_STYLE_NEW();b.PE_MGRS_STYLE_OLD=a._pe.PeNotationMgrs.prototype.get_PE_MGRS_STYLE_OLD();b.PE_MGRS_STYLE_AUTO=a._pe.PeNotationMgrs.prototype.get_PE_MGRS_STYLE_AUTO();b.PE_MGRS_180_ZONE_1_PLUS=a._pe.PeNotationMgrs.prototype.get_PE_MGRS_180_ZONE_1_PLUS();b.PE_MGRS_ADD_SPACES=a._pe.PeNotationMgrs.prototype.get_PE_MGRS_ADD_SPACES()};
b.geog_to_mgrs_extended=function(b,c,e,g,f,h,l){a._pe.ensureCache.prepare();var n=0;b&&(n=a._pe.getPointer(b));b=k(e);e=a._pe.ensureFloat64(b);b=d(c,t.PE_MGRS_MAX);var m=a._pe.ensureInt32(b);if(g=a._pe._pe_geog_to_mgrs_extended(n,c,e,g,f,h,m))for(f=0;f<c;f++)l[f]=a._pe.Pointer_stringify(b[f]);return g};b.mgrs_to_geog_extended=function(b,c,d,e,g){a._pe.ensureCache.prepare();var f=0;b&&(f=a._pe.getPointer(b));b=d.map(function(b){return a._pe.ensureString(b)});d=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*
c));(e=a._pe._pe_mgrs_to_geog_extended(f,c,d,e,b))&&m(g,c,b);return e}})(w=a.PeNotationMgrs||(a.PeNotationMgrs={}));(function(b){b.geog_to_usng=function(b,c,e,g,f,h,l){a._pe.ensureCache.prepare();var n=0;b&&(n=a._pe.getPointer(b));b=k(e);e=a._pe.ensureFloat64(b);b=d(c,t.PE_MGRS_MAX);var m=a._pe.ensureInt32(b);if(g=a._pe._pe_geog_to_usng(n,c,e,g,f,h,m))for(f=0;f<c;f++)l[f]=a._pe.Pointer_stringify(b[f]);return g};b.usng_to_geog=function(b,c,d,e){a._pe.ensureCache.prepare();var g=0;b&&(g=a._pe.getPointer(b));
b=d.map(function(b){return a._pe.ensureString(b)});d=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*c));(g=a._pe._pe_usng_to_geog(g,c,d,b))&&m(e,c,b);return g}})(a.PeNotationUsng||(a.PeNotationUsng={}));var y;(function(b){b.init=function(){b.PE_UTM_OPTS_NONE=a._pe.PeNotationUtm.prototype.get_PE_UTM_OPTS_NONE();b.PE_UTM_OPTS_ADD_SPACES=a._pe.PeNotationUtm.prototype.get_PE_UTM_OPTS_ADD_SPACES();b.PE_UTM_OPTS_NS=a._pe.PeNotationUtm.prototype.get_PE_UTM_OPTS_NS()};b.geog_to_utm=function(b,c,e,g,f){a._pe.ensureCache.prepare();
var h=0;b&&(h=a._pe.getPointer(b));b=k(e);e=a._pe.ensureFloat64(b);b=d(c,t.PE_UTM_MAX);var l=a._pe.ensureInt32(b);if(g=a._pe._pe_geog_to_utm(h,c,e,g,l))for(h=0;h<c;h++)f[h]=a._pe.Pointer_stringify(b[h]);return g};b.utm_to_geog=function(b,c,d,e,g){a._pe.ensureCache.prepare();var f=0;b&&(f=a._pe.getPointer(b));b=d.map(function(b){return a._pe.ensureString(b)});d=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*c));(e=a._pe._pe_utm_to_geog(f,c,d,e,b))&&m(g,c,b);return e}})(y=a.PeNotationUtm||(a.PeNotationUtm=
{}));var r;(function(b){var c=new Map;b.init=function(){b.PE_PCSINFO_OPTION_NONE=a._pe.PePCSInfo.prototype.get_PE_PCSINFO_OPTION_NONE();b.PE_PCSINFO_OPTION_DOMAIN=a._pe.PePCSInfo.prototype.get_PE_PCSINFO_OPTION_DOMAIN();b.PE_POLE_OUTSIDE_BOUNDARY=a._pe.PePCSInfo.prototype.get_PE_POLE_OUTSIDE_BOUNDARY();b.PE_POLE_POINT=a._pe.PePCSInfo.prototype.get_PE_POLE_POINT()};b.generate=function(d,e){void 0===e&&(e=b.PE_PCSINFO_OPTION_DOMAIN);var g,f;c.has(d)&&(f=c.get(d),f[e]&&(g=f[e]));g||(g=a._pe.PePCSInfo.prototype.generate(d,
e),f||(f=[],c.set(d,f)),f[e]=g);return g}})(r=a.PePCSInfo||(a.PePCSInfo={}));(function(b){b.version_string=function(){return a._pe.PeVersion.prototype.version_string()}})(a.PeVersion||(a.PeVersion={}));a._init=l})},"esri/core/sniff":function(){define(["require","exports","dojo/sniff","./global","../views/webgl/context-util"],function(b,a,f,c,e){function l(){var a={available:!1,version:0,majorPerformanceCaveat:!1,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1},
b=document.createElement("canvas");if(!b)return a;var c=e.createContext(b,{failIfMajorPerformanceCaveat:!0},"webgl");!c&&(c=e.createContext(b,{},"webgl"))&&(a.majorPerformanceCaveat=!0);if(!c)return a;b=c.getParameter(c.VERSION);if(!b)return a;if(b=b.match(/^WebGL\s+([\d.]*)/))a.version=parseFloat(b[1]),a.available=.94<=a.version,b=c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_FLOAT),a.supportsHighPrecisionFragment=b&&0<b.precision,a.supportsVertexShaderSamplers=0<c.getParameter(c.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
a.supportsElementIndexUint=null!==c.getExtension("OES_element_index_uint");return a}function h(){var a={available:!1,version:0},b=document.createElement("canvas");if(!b)return a;b=e.createContext(b,{},"webgl2");if(!b)return a;a.available=!0;b=b.getParameter(b.VERSION);if(!b)return a;if(b=b.match(/^WebGL\s+([\d.]*)/))a.version=parseFloat(b[1]);return a}(function(){var a=navigator.userAgent,b=a.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i),a=a.match(/iPhone/i);b&&f.add("esri-mobile",
b);a&&f.add("esri-iPhone",a);f.add("esri-phonegap",!!c.cordova);f.add("esri-cors",f("esri-phonegap")||"XMLHttpRequest"in c&&"withCredentials"in new XMLHttpRequest);f.add("esri-canvas-svg-support",function(){return!(f("trident")||f("ie"))});f.add("esri-wasm","WebAssembly"in c);f("host-webworker")||(f.add("esri-workers","Worker"in c),f.add("esri-script-sandbox",function(){return"MessageChannel"in c&&"HTMLIFrameElement"in c&&"sandbox"in HTMLIFrameElement.prototype}),f.add("esri-url-encodes-apostrophe",
function(){var a=c.document.createElement("a");a.href="?'";return-1<a.href.indexOf("?%27")}),d||(d=l()),f.add("esri-webgl",d.available),f.add("esri-webgl-high-precision-fragment",d.supportsHighPrecisionFragment),f.add("esri-webgl-vertex-shader-samplers",d.supportsVertexShaderSamplers),f.add("esri-webgl-element-index-uint",d.supportsElementIndexUint),f.add("esri-webgl-major-performance-caveat",d.majorPerformanceCaveat),k||(k=h()),f.add("esri-webgl2",k.available))})();var d=null,k=null;return f})},
"esri/views/webgl/context-util":function(){define(["require","exports"],function(b,a){function f(a,b,c){void 0===b&&(b={});var d;switch(c){case "webgl":d=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case "webgl2":d=["webgl2"];break;default:d=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}c=null;for(var e=0;e<d.length;e++){var f=d[e];try{c=a.getContext(f,b)}catch(v){}if(c)break}return c}function c(a,b){(a=a.parentNode)&&(a.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
b+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}Object.defineProperty(a,"__esModule",{value:!0});a.createContextOrErrorHTML=function(a,b,k){void 0===b&&(b={});if(!window.WebGLRenderingContext)return c(a,e),null;b=f(a,b,k);return b?b:(c(a,l),null)};a.createContext=f;var e='This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e',l='It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'})},
"esri/geometry/support/GeographicTransformation":function(){define(["require","exports","./GeographicTransformationStep"],function(b,a,f){return function(){function a(a){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(a&&a.steps){var b=0;for(a=a.steps;b<a.length;b++){var c=a[b];c instanceof f?this.steps.push(c):this.steps.push(new f({wkid:c.wkid,wkt:c.wkt,isInverse:c.isInverse}))}}}a.cacheKey=function(a,b){return[void 0!==a.wkid&&null!==a.wkid?a.wkid.toString():"-1",
void 0!==a.wkt&&null!==a.wkt?a.wkt.toString():"",void 0!==b.wkid&&null!==b.wkid?b.wkid.toString():"-1",void 0!==b.wkt&&null!==b.wkt?b.wkt.toString():""].join()};a.fromGE=function(b){var c=new a,e="",d=0;for(b=b.steps;d<b.length;d++){var k=f.fromGE(b[d]);c.steps.push(k);e+=k.uid.toString()+","}c._cached_projection={};c._gtlistentry=null;c._chain=e;return c};a.prototype.getInverse=function(){var b=new a;b.steps=[];for(var c=this.steps.length-1;0<=c;c--)b.steps.push(this.steps[c].getInverse());return b};
a.prototype.getGTListEntry=function(){for(var a="",b=0,c=this.steps;b<c.length;b++)a+=c[b].uid.toString()+",";a!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=a);return this._gtlistentry};a.prototype.assignCachedGe=function(b,c,f){this._cached_projection[a.cacheKey(b,c)]=f};a.prototype.getCachedGeTransformation=function(b,c){for(var e="",d=0,f=this.steps;d<f.length;d++)e+=f[d].uid.toString()+",";e!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=
e);b=this._cached_projection[a.cacheKey(b,c)];return void 0===b?null:b};return a}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["require","exports"],function(b,a){var f=0;return function(){function a(a){void 0===a&&(a=null);this.uid=f++;a?(this._wkt=void 0!==a.wkt?a.wkt:null,this._wkid=void 0!==a.wkid?a.wkid:-1,this._isInverse=void 0!==a.isInverse?!0===a.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}a.fromGE=function(b){var c=new a;c._wkt=b.wkt;c._wkid=
b.wkid;c._isInverse=b.isInverse;return c};Object.defineProperty(a.prototype,"wkt",{get:function(){return this._wkt},set:function(a){this._wkt=a;this.uid=f++},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"wkid",{get:function(){return this._wkid},set:function(a){this._wkid=a;this.uid=f++},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isInverse",{get:function(){return this._isInverse},set:function(a){this._isInverse=a;this.uid=f++},enumerable:!0,configurable:!0});
a.prototype.getInverse=function(){var b=new a;b._wkt=this.wkt;b._wkid=this._wkid;b._isInverse=!this.isInverse;return b};return a}()})},"esri/geometry/support/normalizeUtils":function(){define("require exports ../../config ../../core/Error ../../core/Logger ../../core/promiseUtils ../Polygon ../Polyline ../SpatialReference ./spatialReferenceUtils ./webMercatorUtils ../../tasks/GeometryService".split(" "),function(b,a,f,c,e,l,h,d,k,m,g,t){function v(a){return"polygon"===a.type?a.rings:a.paths}function w(a,
b){return Math.ceil((a-b)/(2*b))}function y(a,b){for(var c=0,d=v(a);c<d.length;c++)for(var e=0,g=d[c];e<g.length;e++)g[e][0]+=b;return a}function r(a){for(var b=[],c=0,d=0,e=0;e<a.length;e++){for(var g=a[e],f=null,k=0;k<g.length;k++)f=g[k],b.push(f),0===k?d=c=f[0]:(c=Math.min(c,f[0]),d=Math.max(d,f[0]));f&&b.push([(c+d)/2,0])}return b}function z(a,b){if(!(a instanceof d||a instanceof h))throw B.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new c("straightLineDensify: the input geometry is neither polyline nor polygon");
for(var e=[],g=0,f=v(a);g<f.length;g++){var k=f[g],l=[];e.push(l);l.push([k[0][0],k[0][1]]);for(var n=0;n<k.length-1;n++){var m=k[n][0],t=k[n][1],A=k[n+1][0],x=k[n+1][1],p=Math.sqrt((A-m)*(A-m)+(x-t)*(x-t)),w=(x-t)/p,r=(A-m)/p,y=p/b;if(1<y){for(var D=1;D<=y-1;D++){var C=D*b;l.push([r*C+m,w*C+t])}p=(p+Math.floor(y-1)*b)/2;l.push([r*p+m,w*p+t])}l.push([A,x])}}return"polygon"===a.type?new h({rings:e,spatialReference:a.spatialReference}):new d({paths:e,spatialReference:a.spatialReference})}function x(a,
b,c){b&&(a=z(a,1E6),a=g.webMercatorToGeographic(a,!0));c&&(a=y(a,c));return a}function p(a,b,c){if(Array.isArray(a)){var d=a[0];if(d>b){var e=w(d,b);a[0]=d+-2*e*b}else d<c&&(e=w(d,c),a[0]=d+-2*e*c)}else d=a.x,d>b?(e=w(d,b),a=a.clone().offset(-2*e*b,0)):d<c&&(e=w(d,c),a=a.clone().offset(-2*e*c,0));return a}function n(a,b){for(var c=-1,d=function(d){var e=b.cutIndexes[d],g=b.geometries[d],f=v(g);d=function(a){var b=f[a];b.some(function(c){if(!(180>c[0])){for(var d=c=0;d<b.length;d++){var e=b[d][0];
c=e>c?e:c}c=Number(c.toFixed(9));c=-360*w(c,180);for(d=0;d<b.length;d++)e=g.getPoint(a,d),g.setPoint(a,d,e.clone().offset(c,0))}return!0})};for(var k=0;k<f.length;k++)d(k);if(e===c)if("polygon"===a[0].type)for(d=0,k=v(g);d<k.length;d++)a[e]=a[e].addRing(k[d]);else{if("polyline"===a[0].type)for(d=0,k=v(g);d<k.length;d++)a[e]=a[e].addPath(k[d])}else c=e,a[e]=g},e=0;e<b.cutIndexes.length;e++)d(e);return a}function A(a,b){if(!Array.isArray(a))return A([a],b);b||(F||(F=new t({url:f.geometryServiceUrl})),
b=F);for(var c,e,k,v,r,B,D,z=0,H=[],T=[],K=0;K<a.length;K++){var Z=a[K];if(Z)if(c||(c=Z.spatialReference,e=m.getInfo(c),B=(k=c.isWebMercator)?102100:4326,v=C[B].maxX,r=C[B].minX,D=C[B].plus180Line,B=C[B].minus180Line),e)if("mesh"===Z.type)T.push(Z);else if("point"===Z.type)T.push(p(Z.clone(),v,r));else if("multipoint"===Z.type)Z=Z.clone(),Z.points=Z.points.map(function(a){return p(a,v,r)}),T.push(Z);else if("extent"===Z.type){var O=Z.clone(),Z=O._normalize(!1,!1,e);T.push(Z.rings?new h(Z):Z)}else if(Z.extent){var O=
Z.extent,W=2*w(O.xmin,r)*v,Z=0===W?Z.clone():y(Z.clone(),W);O.offset(W,0);O.intersects(D)&&O.xmax!==v?(z=O.xmax>z?O.xmax:z,Z=x(Z,k),H.push(Z),T.push("cut")):O.intersects(B)&&O.xmin!==r?(z=2*O.xmax*v>z?2*O.xmax*v:z,Z=x(Z,k,360),H.push(Z),T.push("cut")):T.push(Z)}else T.push(Z.clone());else T.push(Z);else T.push(Z)}c=w(z,v);e=-90;D=c;for(z=new d;0<c;)K=-180+360*c,z.addPath([[K,e],[K,-1*e]]),e*=-1,c--;if(0<H.length&&0<D)return b.cut(H,z).then(function(a){return n(H,a)}).then(function(c){for(var d=[],
e=[],f=0;f<T.length;f++){var h=T[f];if("cut"!==h)e.push(h);else{var h=c.shift(),l=a[f];"polygon"===l.type&&l.rings&&1<l.rings.length&&h.rings.length>=l.rings.length?(d.push(h),e.push("simplify")):e.push(k?g.geographicToWebMercator(h):h)}}return d.length?b.simplify(d).then(function(a){for(var b=[],c=0;c<e.length;c++){var d=e[c];"simplify"!==d?b.push(d):b.push(k?g.geographicToWebMercator(a.shift()):a.shift())}return b}):e});c=[];for(e=0;e<T.length;e++)D=T[e],"cut"!==D?c.push(D):(D=H.shift(),c.push(!0===
k?g.geographicToWebMercator(D):D));return l.resolve(c)}Object.defineProperty(a,"__esModule",{value:!0});var B=e.getLogger("esri.geometry.support.normalizeUtils"),C={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new d({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:k.WebMercator}),minus180Line:new d({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:k.WebMercator})},
4326:{maxX:180,minX:-180,plus180Line:new d({paths:[[[180,-180],[180,180]]],spatialReference:k.WebMercator}),minus180Line:new d({paths:[[[-180,-180],[-180,180]]],spatialReference:k.WebMercator})}};a.straightLineDensify=z;var F;a.normalizeCentralMeridian=A;a.getDenormalizedExtent=function(a){if(!a)return null;var b=a.extent;if(!b)return null;var c=a.spatialReference&&m.getInfo(a.spatialReference);if(!c)return b;var c=c.valid,d=c[0],c=c[1],e=b.width,g=b.xmin,f=b.xmax,f=[f,g],g=f[0],f=f[1];if("extent"===
a.type||0===e||e<=c||e>2*c||g<d||f>c)return b;var k;switch(a.type){case "polygon":if(1<a.rings.length)k=r(a.rings);else return b;break;case "polyline":if(1<a.paths.length)k=r(a.paths);else return b;break;case "multipoint":k=a.points}a=b.clone();for(d=0;d<k.length;d++){var h=k[d][0];0>h?(h+=c,f=Math.max(h,f)):(h-=c,g=Math.min(h,g))}a.xmin=g;a.xmax=f;return a.width<e?(a.xmin-=c,a.xmax-=c,a):b}})},"esri/tasks/GeometryService":function(){define("../core/kebabDictionary ../core/accessorSupport/ensureType ../geometry/Extent ../geometry/Multipoint ../geometry/Polyline ../geometry/Polygon ../geometry/support/jsonUtils ../request ./Task ./support/ProjectParameters dojo/_base/lang".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g){var t=b({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"}),v=a.ensureType(m);b=k.createSubclass({declaredClass:"esri.tasks.GeometryService",areasAndLengths:function(a,b){a={query:g.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),callbackParamName:"callback"};if(this.requestOptions||b)a=g.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/areasAndLengths",a).then(function(a){return a.data})},autoComplete:function(a,
b,c){var e=a[0].spatialReference;a={query:g.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),polygons:JSON.stringify(this._encodeGeometries(a).geometries),polylines:JSON.stringify(this._encodeGeometries(b).geometries)}),callbackParamName:"callback"};if(this.requestOptions||c)a=g.mixin({},this.requestOptions,c,a);return d(this.parsedUrl.path+"/autoComplete",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new l({spatialReference:e,rings:a.rings})})})},buffer:function(a,
b){var c=g.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),e=a.outSpatialReference||a.geometries[0].spatialReference;a={query:c,callbackParamName:"callback"};if(this.requestOptions||b)a=g.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/buffer",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new l({spatialReference:e,rings:a.rings})})})},cut:function(a,b,c){var e=a[0].spatialReference,f=a.map(function(a){return a.toJSON()});a={query:g.mixin({},this.parsedUrl.query,
{f:"json",sr:JSON.stringify(e.toJSON()),target:JSON.stringify({geometryType:h.getJsonType(a[0]),geometries:f}),cutter:JSON.stringify(b.toJSON())}),callbackParamName:"callback"};if(this.requestOptions||c)a=g.mixin({},this.requestOptions,c,a);return d(this.parsedUrl.path+"/cut",a).then(function(a){a=a.data;return{cutIndexes:a.cutIndexes,geometries:(a.geometries||[]).map(function(a){return h.fromJSON(a).set("spatialReference",e)})}})},convexHull:function(a,b){var c=a[0].spatialReference;a={query:g.mixin({},
this.parsedUrl.query,{f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),callbackParamName:"callback"};if(this.requestOptions||b)a=g.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/convexHull",a).then(function(a){return h.fromJSON(a.data.geometry).set("spatialReference",c)})},densify:function(a,b){var c=g.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),e=a.geometries[0].spatialReference;a={query:c,callbackParamName:"callback"};if(this.requestOptions||
b)a=g.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/densify",a).then(function(a){return(a.data.geometries||[]).map(function(a){return h.fromJSON(a).set("spatialReference",e)})})},difference:function(a,b,c){var e=a[0].spatialReference;a={query:g.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),geometry:JSON.stringify({geometryType:h.getJsonType(b),geometry:b.toJSON()})}),callbackParamName:"callback"};if(this.requestOptions||
c)a=g.mixin({},this.requestOptions,c,a);return d(this.parsedUrl.path+"/difference",a).then(function(a){return(a.data.geometries||[]).map(function(a){return h.fromJSON(a).set("spatialReference",e)})})},distance:function(a,b){a={query:g.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),callbackParamName:"callback"};if(this.requestOptions||b)a=g.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/distance",a).then(this._handleDistanceResponse)},fromGeoCoordinateString:function(a,b){var c=
{};g.isObject(a.sr)?c.sr=a.sr.wkid||JSON.stringify(a.sr.toJSON()):c.sr=a.sr;c.strings=JSON.stringify(a.strings);c.conversionType=t.toJSON(a.conversionType||"mgrs");c.conversionMode=a.conversionMode;a={query:g.mixin({},this.parsedUrl.query,{f:"json"},c),callbackParamName:"callback"};if(this.requestOptions||b)a=g.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/fromGeoCoordinateString",a).then(this._handleFromGeoCoordinateResponse)},generalize:function(a,b){var c=g.mixin({},this.parsedUrl.query,
{f:"json"},a.toJSON()),e=a.geometries[0].spatialReference;a={query:c,callbackParamName:"callback"};if(this.requestOptions||b)a=g.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/generalize",a).then(function(a){return(a.data.geometries||[]).map(function(a){return h.fromJSON(a).set("spatialReference",e)})})},intersect:function(a,b,c){var e=a[0].spatialReference;a={query:g.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),
geometry:JSON.stringify({geometryType:h.getJsonType(b),geometry:b.toJSON()})}),callbackParamName:"callback"};if(this.requestOptions||c)a=g.mixin({},this.requestOptions,c,a);return d(this.parsedUrl.path+"/intersect",a).then(function(a){return(a.data.geometries||[]).map(function(a){return h.fromJSON(a).set("spatialReference",e)})})},lengths:function(a,b){a={query:g.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),callbackParamName:"callback"};if(this.requestOptions||b)a=g.mixin({},this.requestOptions,
b,a);return d(this.parsedUrl.path+"/lengths",a).then(function(a){return a.data})},labelPoints:function(a,b){var c=a.map(function(a){return a.toJSON()}),e=a[0].spatialReference;a={query:g.mixin({},this.parsedUrl.query,{f:"json",sr:e.wkid?e.wkid:JSON.stringify(e.toJSON()),polygons:JSON.stringify(c)}),callbackParamName:"callback"};if(this.requestOptions||b)a=g.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/labelPoints",a).then(function(a){return(a.data.labelPoints||[]).map(function(a){return h.fromJSON(a).set("spatialReference",
e)})})},offset:function(a,b){var c=g.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),e=a.geometries[0].spatialReference;a={query:c,callbackParamName:"callback"};if(this.requestOptions||b)a=g.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/offset",a).then(function(a){return(a.data.geometries||[]).map(function(a){return h.fromJSON(a).set("spatialReference",e)})})},project:function(a,b){a=v(a);var c=g.mixin({},a.toJSON(),this.parsedUrl.query,{f:"json"}),e=a.outSpatialReference,
f=h.getJsonType(a.geometries[0]),k=this._decodeGeometries;a={query:c,callbackParamName:"callback"};if(this.requestOptions||b)a=g.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/project",a).then(function(a){return k(a.data,f,e)})},relation:function(a,b){a={query:g.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),callbackParamName:"callback"};if(this.requestOptions||b)a=g.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/relation",a).then(this._handleRelationResponse)},
reshape:function(a,b,c){var e=a.spatialReference;a={query:g.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),target:JSON.stringify({geometryType:h.getJsonType(a),geometry:a.toJSON()}),reshaper:JSON.stringify(b.toJSON())}),callbackParamName:"callback"};if(this.requestOptions||c)a=g.mixin({},this.requestOptions,c,a);return d(this.parsedUrl.path+"/reshape",a).then(function(a){return h.fromJSON(a.data.geometry).set("spatialReference",e)})},simplify:function(a,b){var c=a[0].spatialReference,
e=g.mixin({},this.parsedUrl.query,{f:"json",sr:c.wkid?c.wkid:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),f=h.getJsonType(a[0]),k=this._decodeGeometries;a={query:e,callbackParamName:"callback"};if(this.requestOptions||b)a=g.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/simplify",a).then(function(a){return k(a.data,f,c)})},toGeoCoordinateString:function(a,b){var c={};g.isObject(a.sr)?c.sr=a.sr.wkid||JSON.stringify(a.sr.toJSON()):c.sr=a.sr;c.coordinates=
JSON.stringify(a.coordinates);c.conversionType=t.toJSON(a.conversionType||"mgrs");c.conversionMode=a.conversionMode;c.numOfDigits=a.numOfDigits;c.rounding=a.rounding;c.addSpaces=a.addSpaces;a={query:g.mixin({},this.parsedUrl.query,{f:"json"},c),callbackParamName:"callback"};if(this.requestOptions||b)a=g.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/toGeoCoordinateString",a).then(this._handleToGeoCoordinateResponse)},trimExtend:function(a,b){var c=g.mixin({},this.parsedUrl.query,
{f:"json"},a.toJSON()),f=a.sr;a={query:c,callbackParamName:"callback"};if(this.requestOptions||b)a=g.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/trimExtend",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new e({spatialReference:f,paths:a.paths})})})},union:function(a,b){var c=a[0].spatialReference;a={query:g.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),callbackParamName:"callback"};
if(this.requestOptions||b)a=g.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/union",a).then(function(a){return h.fromJSON(a.data.geometry).set("spatialReference",c)})},_handleRelationResponse:function(a){return a.data.relations},_handleDistanceResponse:function(a){return(a=a.data)&&a.distance},_handleToGeoCoordinateResponse:function(a){return a.data.strings},_handleFromGeoCoordinateResponse:function(a){return a.data.coordinates},_encodeGeometries:function(a){var b=[],c,d=a.length;
for(c=0;c<d;c++)b.push(a[c].toJSON());return{geometryType:h.getJsonType(a[0]),geometries:b}},_decodeGeometries:function(a,b,c){var d=h.getGeometryType(b);a=a.geometries;var e=[],f={spatialReference:c.toJSON()},k=g.mixin;a.forEach(function(a,b){e[b]=new d(k(a,f))});return e},_toProjectGeometry:function(a){var b=a.spatialReference.toJSON();return a instanceof f?new l({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:b}):new e({paths:[[].concat(a.points)],
spatialReference:b})},_fromProjectedGeometry:function(a,b,d){return"extent"===b?(a=a.rings[0],new f(a[0][0],a[0][1],a[2][0],a[2][1],d)):new c({points:a.paths[0],spatialReference:d.toJSON()})}});g.mixin(b,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,
UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,
UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,
UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",
UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});return b})},"esri/request":function(){define("require exports dojo/Deferred dojo/has!host-browser?./core/request/script dojo/has!host-webworker?./core/workers/request dojo/io-query dojo/_base/lang dojo/_base/url dojo/request/xhr ./config ./core/deferredUtils ./core/Error ./core/global ./core/lang ./core/promiseUtils ./core/sniff ./core/urlUtils".split(" "),function(b,
a,f,c,e,l,h,d,k,m,g,t,v,w,y,r,z){function x(a){var b=l.objectToQuery(a.content);b&&(a.url+=(-1===a.url.indexOf("?")?"?":"\x26")+b);if(!z.isDataProtocol(a.url)&&2E3<a.url.length)return y.reject(h.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."}));var c=new Image;a.allowImageDataAccess&&(c.crossOrigin=a.withCredentials?"use-credentials":"anonymous");var d=!1,e=new f(function(){d=!0;c.onload=c.onerror=c.onabort=null;c.src=""}),b=function(){c.onload=
c.onerror=c.onabort=null;d||e.reject(Error("Unable to load the resource"))};c.onload=function(){c.onload=c.onerror=c.onabort=null;d||e.resolve(this)};c.onerror=b;c.onabort=b;c.alt="";c.src=a.url;return e.promise}function p(a){a=new d(a);return(a.host+(a.port?":"+a.port:"")).toLowerCase()}function n(){return V?V:V=y.create(function(a){b(["./identity/IdentityManager"],a)}).then(function(a){Y=a})}function A(a,b){var d=!!a.useProxy,e=a.method||"auto",g=w.isDefined(a.crossOrigin)?a.crossOrigin:J.useCors;
a=h.mixin({},a);a._ssl&&(a.url=a.url.replace(/^http:/i,"https:"));var n=a.content,m=a.url;a._token&&(a.content=a.content||{},a.content.token=a._token);var t=0,A;m&&(A=l.objectToQuery(n),t=A.length+m.length+1,r("esri-url-encodes-apostrophe")&&(t=A.replace(/'/g,"%27").length+m.length+1));a.timeout=w.isDefined(a.timeout)?a.timeout:J.timeout;a.handleAs=a.handleAs||"json";try{var p=A=void 0,v=g&&z.canUseXhr(a.urlObj)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(a.url),B=z.hasSameOrigin(a.urlObj,
z.appUrl)||v,y="post"===e||!!a.body||t>J.maxUrlLength,D=!B&&-1!==a.handleAs.indexOf("json")&&a.callbackParamName&&!a.body,C=!!z.getProxyRule(a.url)||J.forceProxy||d||("image"!==a.handleAs||a.allowImageDataAccess)&&(!D||y)&&!B;C&&(z.isBlobProtocol(a.url)||z.isDataProtocol(a.url))&&(C=!1);if((r("host-browser")||r("host-webworker"))&&C)if(A=z.getProxyUrl(m,g),p=A.path,A._xo&&(v=!0),!y&&p.length+1+t>J.maxUrlLength&&(y=!0),a.url=p+"?"+m,y)a.content=h.mixin(A.query||{},n);else{var F=l.objectToQuery(h.mixin(A.query||
{},n));F&&(a.url+=(-1===m.indexOf("?")?"?":"\x26")+F);a.content=null}if(D&&!y&&!C&&r("host-browser"))return a=E?E(a):a,a.jsonp=a.callbackParamName,a.query=a.content,c.get(a.url,a);var H=a.headers;!r("host-browser")&&!r("host-webworker")||H&&H.hasOwnProperty("X-Requested-With")||(H=a.headers=H||{},H["X-Requested-With"]=null);if(r("host-browser")&&b){var V=a.content&&a.content.token;V&&(b.set?b.set("token",V):b.append("token",V));a.contentType=!1}if(v&&!a.hasOwnProperty("withCredentials")&&"with-credentials"===
J.useCors){var d=C?p:m,na=z.getCorsConfig(d);if(na&&na.hasOwnProperty("withCredentials"))na.withCredentials&&(a.withCredentials=!0);else if(Y){var ha=Y.findServerInfo(d);ha&&ha.webTierAuth&&(a.withCredentials=!0)}}a=E?E(a):a;if("image"===a.handleAs)return x(a);if(y)return a.body?(a.data=b||a.body,a.query=a.content):a.data=a.content,delete a.body,delete a.content,!C&&r("safari")&&(a.url+=(-1===a.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+ea++),k.post(a.url,a);a.query=a.content;delete a.content;
return k.get(a.url,a)}catch(ra){return a=new f,a.reject(ra),a.promise}}function B(a){var b=J.corsStatus;try{var c=p(a.url);if(J.corsDetection&&J.useCors&&r("esri-cors")&&a.url&&-1!==a.url.toLowerCase().indexOf("/rest/services")&&!z.hasSameOrigin(a.urlObj,z.appUrl)&&!z.canUseXhr(a.urlObj)){if(b[c])return b[c];var d=new f;b[c]=d.promise;var e=a.url.substring(0,a.url.toLowerCase().indexOf("/rest/")+6)+"info";k.get(e,{query:{f:"json"},handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*J.corsDetectionTimeout}).then(function(b){b?
(z.canUseXhr(a.url)||J.corsEnabledServers.push(c),d.resolve()):d.reject()},function(a){d.reject()});return d.promise}}catch(W){console.log("esri._detectCors: an unknown error occurred while detecting CORS support")}return Q}function C(a,b,c,d){function e(a){a._pendingDfd=A(c,n);var b=!!a._pendingDfd.response;(a._pendingDfd.response||a._pendingDfd).then(function(a){if(!b||!a.data)return a;var c=a.getHeader("Content-Type");if(c&&(c=c.toLowerCase(),-1===c.indexOf("text/plain")&&-1===c.indexOf("application/json")))return a;
c=a.data;if(c instanceof ArrayBuffer&&750>=c.byteLength)c=new Blob([c]);else if(!(c instanceof Blob&&750>=c.size))return a;var d=new f,e=new FileReader;e.readAsText(c);e.onloadend=function(){if(!e.error)try{var b=JSON.parse(e.result);b.error&&(Object.isExtensible(a)||(a=h.mixin({},a)),a._jsonData=b)}catch(Ia){}d.resolve(a)};return d.promise}).then(function(c){var e=b?c.data:c,g=b?c.getHeader.bind(c):ba;if(e&&(c=b&&c._jsonData||e,c.error||"error"===c.status))throw e=h.mixin(Error(),c.error||c),e.getHeader=
g,e;a.resolve({data:e,url:d.url,requestOptions:d.requestOptions,getHeader:g});a._pendingDfd=null}).catch(function(b){var e,g,h;b&&(e=Number(b.code),g=b.hasOwnProperty("subcode")?Number(b.subcode):null,h=(h=b.messageCode)&&h.toUpperCase());if(b&&403===e&&(4===g||b.message&&-1<b.message.toLowerCase().indexOf("ssl")&&-1===b.message.toLowerCase().indexOf("permission"))){if(!c._ssl){c._ssl=c._sslFromServer=!0;C(a,!0,c,d);return}}else if(b&&415===b.status){if(e=c.url,g=J.corsStatus,h=z.getCorsConfig(e,
!0),-1<h&&J.corsEnabledServers.splice(h,1),h=new f,h.reject(new t("disabled")),g[p(e)]=h.promise,!c._err415){c._err415=1;C(a,!0,c,d);return}}else if(k&&"no-prompt"!==c.authMode&&Y._errorCodes&&-1!==Y._errorCodes.indexOf(e)&&!Y._isPublic(c.url)&&(403!==e||ha&&-1===ha.indexOf(h)&&(!w.isDefined(g)||2===g&&c._token))){F(a,c,d,D("request:server",b,d));return}a.reject(D("request:server",b,d));a._pendingDfd=null})}var g=c.body,k=c.useIdentity,l,n=null,m=g instanceof FormData;if(m||g&&g.elements)n=m?g:new FormData(g);
var x=!!(-1!==c.url.toLowerCase().indexOf("token\x3d")||c.content&&c.content.token||n&&n.get&&n.get("token")||g&&g.elements&&g.elements.token);b||(!k||x||c._token||Y._isPublic(c.url)||(b=function(a){a&&(c._token=a.token,c._ssl=a.ssl)},"immediate"===c.authMode?l=Y.getCredential(c.url).then(b):"no-prompt"===c.authMode?l=Y.checkSignInStatus(c.url).then(b).catch(function(){}):b(Y.findCredential(c.url))),a.then(function(a){if((/\/sharing\/rest\/accounts\/self/i.test(c.url)||/\/sharing\/rest\/portals\/self/i.test(c.url))&&
!x&&!c._token&&a.user&&a.user.username){var b=J.corsEnabledServers,d=z.getCorsConfig(c.url,!0),e={host:p(c.url),withCredentials:!0};if(-1===d)b.push(e);else{var g=b[d];g instanceof RegExp?(e.host=g,b.splice(d,1,e)):"object"===typeof g?g.withCredentials=!0:b.splice(d,1,e)}}if(b=c._credential)d=(d=Y.findServerInfo(b.server))&&d.owningSystemUrl,e=void 0,d&&(d=d.replace(/\/?$/,"/sharing"),(e=Y.findCredential(d,b.userId))&&-1===Y._getIdenticalSvcIdx(d,e)&&e.resources.splice(0,0,d));return a}).always(function(a){delete c._credential;
if(a){var b=!!c._ssl;a instanceof t?a.details.ssl=b:a.ssl=b}}));l?l.then(function(){e(a)}).catch(function(b){a.reject(b)}):e(a);return a.promise}function F(a,b,c,d){a._pendingDfd=Y.getCredential(b.url,{error:d,token:b._token});a._pendingDfd.then(function(d){b._token=d.token;b._credential=d;b._ssl=b._sslFromServer||d.ssl;C(a,!0,b,c)}).catch(function(b){a.reject(b);a._pendingDfd=null})}function D(a,b,c){var d="Error",e={url:c.url,requestOptions:c.requestOptions,getHeader:ba};if(b instanceof t)return b.details?
(b.details=w.clone(b.details),b.details.url=c.url,b.details.requestOptions=c.requestOptions):b.details=e,b;if(b){var g=b.response;c=g&&g.getHeader;var g=g&&g.status,f=b.message;c=b.getHeader||c;f&&(d=f);c&&(e.getHeader=c);e.httpStatus=(w.isDefined(b.httpCode)?b.httpCode:b.code)||g;e.subCode=b.subcode;e.messageCode=b.messageCode;e.messages="string"===typeof b.details?[b.details]:b.details}a=new t(a,d,e);b&&"cancel"===b.dojoType&&(a.dojoType="cancel");return a}function H(a,b){if(e&&v.invokeStaticMessage)return e.execute(a,
b);var c=h.mixin({},b),f={url:a,requestOptions:h.mixin({},b)};c.content=c.query;delete c.query;c.preventCache=!!c.cacheBust;delete c.cacheBust;c.handleAs=c.responseType;delete c.responseType;"array-buffer"===c.handleAs&&(c.handleAs="arraybuffer");if("image"===c.handleAs){if(r("host-webworker"))return y.reject(D("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),f));c.preventCache&&(c.content=c.content||{},c.content["request.preventCache"]=
Date.now());c.method="auto"}else if(z.isDataProtocol(a))return y.reject(D("request:invalid-parameters",Error("Data URLs are not supported for responseType \x3d "+c.handleAs),f));var k=J.useIdentity;"anonymous"===c.authMode&&(k=!1);c.useIdentity=k;c.url=z.normalize(a);c.urlObj=new d(c.url);var l=g.makeDeferredCancellingPending();B(c).always(function(){if(k&&!Y)return n()}).always(function(){C(l,!1,c,f)});return l.promise}var E,J=m.request,ha=["COM_0056","COM_0057"],ea=0,ba=function(){return null},
Q=(new f).resolve(),Y,V;(function(a){a.setRequestPreCallback=function(a){E=a}})(H||(H={}));return H})},"dojo/_base/url":function(){define(["./kernel"],function(b){var a=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,f=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,c=function(){for(var b=arguments,l=[b[0]],h=1;h<b.length;h++)if(b[h]){var d=new c(b[h]+""),l=new c(l[0]+"");if(""==d.path&&!d.scheme&&!d.authority&&!d.query)null!=d.fragment&&(l.fragment=d.fragment),d=l;
else if(!d.scheme&&(d.scheme=l.scheme,!d.authority&&(d.authority=l.authority,"/"!=d.path.charAt(0)))){for(var l=(l.path.substring(0,l.path.lastIndexOf("/")+1)+d.path).split("/"),k=0;k<l.length;k++)"."==l[k]?k==l.length-1?l[k]="":(l.splice(k,1),k--):0<k&&(1!=k||""!=l[0])&&".."==l[k]&&".."!=l[k-1]&&(k==l.length-1?(l.splice(k,1),l[k-1]=""):(l.splice(k-1,2),k-=2));d.path=l.join("/")}l=[];d.scheme&&l.push(d.scheme,":");d.authority&&l.push("//",d.authority);l.push(d.path);d.query&&l.push("?",d.query);d.fragment&&
l.push("#",d.fragment)}this.uri=l.join("");b=this.uri.match(a);this.scheme=b[2]||(b[1]?"":null);this.authority=b[4]||(b[3]?"":null);this.path=b[5];this.query=b[7]||(b[6]?"":null);this.fragment=b[9]||(b[8]?"":null);null!=this.authority&&(b=this.authority.match(f),this.user=b[3]||null,this.password=b[4]||null,this.host=b[6]||b[7],this.port=b[9]||null)};c.prototype.toString=function(){return this.uri};return b._Url=c})},"esri/core/deferredUtils":function(){define(["dojo/Deferred"],function(b){var a=
{makeDeferredCancellingPending:function(){var f={},c=a._dfdCanceller.bind(null,f),c=new b(c);return f.deferred=c},_dfdCanceller:function(a){a=a.deferred?a.deferred:a;a.canceled=!0;var b=a._pendingDfd;a.isResolved()||!b||b.isResolved()||b.cancel();a._pendingDfd=null},_fixDfd:function(a){var b=a.then;a.then=function(a,c,f){if(a){var d=a;a=function(a){return a&&a._argsArray?d.apply(null,a):d(a)}}return b.call(this,a,c,f)};return a},_resDfd:function(a,b,e){var c=b.length;1===c?e?a.reject(b[0]):a.resolve(b[0]):
1<c?(b._argsArray=!0,a.resolve(b)):a.resolve()}};return a})},"esri/core/urlUtils":function(){define("require exports ./tsSupport/assignHelper dojo/io-query dojo/_base/url ../config ./Error ./global ./lang ./Logger ./sniff".split(" "),function(b,a,f,c,e,l,h,d,k,m,g){function t(a){var b={path:null,query:null},d=new e(a),g=a.indexOf("?");null===d.query?b.path=a:(b.path=a.substring(0,g),b.query=c.queryToObject(d.query));d.fragment&&(b.hash=d.fragment,null===d.query&&(b.path=b.path.substring(0,b.path.length-
(d.fragment.length+1))));return b}function v(b,c){void 0===b&&(b=!1);void 0===c&&(c=!0);var d,e=W.proxyUrl;if("string"===typeof b){if(d=Q(b),b=r(b))e=b.proxyUrl}else d=!!b;if(!e)throw O.warn("esri/config: esriConfig.request.proxyUrl is not set. If making a request to a CORS-enabled\n server, please push the domain into esriConfig.request.corsEnabledServers."),new h("urlutils:proxy-not-set","esri/config: esriConfig.request.proxyUrl is not set. If making a request to a CORS-enabled\n server, please push the domain into esriConfig.request.corsEnabledServers.");
var g;d&&c&&"https"===a.appUrl.scheme&&(c=V(e),p(c)&&(e=c,g=1));e=t(e);e._xo=g;return e}function w(a){var b=a.indexOf("?");-1!==b?(ja.path=a.slice(0,b),ja.query=a.slice(b+1)):(ja.path=a,ja.query=null);return ja}function y(a){a=w(a).path;a&&"/"===a[a.length-1]||(a+="/");a=na(a,!0);return a=a.toLowerCase()}function r(a){var b=W.proxyRules;a=y(a);for(var c=0;c<b.length;c++)if(0===a.indexOf(b[c].urlPrefix))return b[c]}function z(a){a=F(a);var b=a.indexOf("/sharing");return 0<b?a.substring(0,b):a.replace(/\/+$/,
"")}function x(a,b,c){void 0===c&&(c=!1);a=Z(a);b=Z(b);return c||a.scheme===b.scheme?a.host.toLowerCase()===b.host.toLowerCase()&&a.port===b.port:!1}function p(a){return g("esri-phonegap")?!0:g("esri-cors")?null!=n(a):!1}function n(b,c){void 0===c&&(c=!1);"string"===typeof b&&(b=E(b)?Z(b):a.appUrl);for(var d=W.corsEnabledServers||[],e=0;e<d.length;e++){var g=d[e],f=void 0,k=void 0;g instanceof RegExp?k=g:"string"===typeof g?f=A(g):g.host?g.host instanceof RegExp?k=g.host:f=A(g.host):f=[];if(k){if(k.test(b.uri))return c?
e:g}else for(k=0;k<f.length;k++)if(x(b,f[k]))return c?e:g}return c?-1:null}function A(b){a.corsServersUrlCache[b]||(ba(b)||ea(b)?a.corsServersUrlCache[b]=[new e(B(b))]:a.corsServersUrlCache[b]=[new e("http://"+b),new e("https://"+b)]);return a.corsServersUrlCache[b]}function B(b,c,d){void 0===c&&(c=a.appBaseUrl);if(ea(b))return d&&d.preserveProtocolRelative?b:"http"===a.appUrl.scheme&&a.appUrl.authority===H(b).slice(2)?"http:"+b:"https:"+b;if(ba(b))return b;d=D;if("/"===b[0]){var e=c.indexOf("//"),
e=c.indexOf("/",e+2);c=-1===e?c:c.slice(0,e)}return d(c,b)}function C(b,c,d){void 0===c&&(c=a.appBaseUrl);if(!E(b))return b;var e=F(b),g=e.toLowerCase();c=F(c).toLowerCase().replace(/\/+$/,"");if((d=d?F(d).toLowerCase().replace(/\/+$/,""):null)&&0!==c.indexOf(d))return b;for(var f=function(a,b,c){c=a.indexOf(b,c);return-1===c?a.length:c},k=f(g,"/",g.indexOf("//")+2),h=-1;g.slice(0,k+1)===c.slice(0,k)+"/";){h=k+1;if(k===g.length)break;k=f(g,"/",k+1)}if(-1===h||d&&h<d.length)return b;b=e.slice(h);e=
c.slice(h-1).replace(/[^/]+/g,"").length;if(0<e)for(g=0;g<e;g++)b="../"+b;else b="./"+b;return b}function F(b){b=b.trim();b=B(b);if(/^https?:\/\//i.test(b)){var c=w(b);b=c.path.replace(/\/{2,}/g,"/");b=b.replace("/","//");c.query&&(b+="?"+c.query)}b="http"===a.appUrl.scheme&&Q(b)&&x(a.appBaseUrl,b,!0)&&!p(b)?ea(b)?"http:"+b:b.replace(X,"http:"):b;b=T(b);return b=b.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function D(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(a&&a.length){b=
[];if(E(a[0])){var c=a[0],d=c.indexOf("//");b.push(c.slice(0,d+1));U.test(a[0])&&(b[0]+="/");a[0]=c.slice(d+2)}else"/"===a[0][0]&&b.push("");a=a.reduce(function(a,b){return b?a.concat(b.split("/")):a},[]);for(c=0;c<a.length;c++)d=a[c],".."===d&&0<b.length?b.pop():!d||"."===d&&0!==b.length||b.push(d);return b.join("/")}}function H(a){if(J(a)||ha(a))return null;var b=a.indexOf("://");if(-1===b&&ea(a))b=2;else if(-1!==b)b+=3;else return null;b=a.indexOf("/",b);return-1===b?a:a.slice(0,b)}function E(a){return ea(a)||
ba(a)}function J(a){return"blob:"===a.slice(0,5)}function ha(a){return"data:"===a.slice(0,5)}function ea(a){return a&&"/"===a[0]&&"/"===a[1]}function ba(a){return R.test(a)}function Q(b){return X.test(b)||"https"===a.appUrl.scheme&&ea(b)}function Y(b){return da.test(b)||"http"===a.appUrl.scheme&&ea(b)}function V(a){return ea(a)?"https:"+a:a.replace(da,"https:")}function na(a,b){void 0===b&&(b=!1);if(ea(a))return a.slice(2);a=a.replace(R,"");b&&1<a.length&&"/"===a[0]&&"/"===a[1]&&(a=a.slice(2));return a}
function T(b){var c=l.request.httpsDomains;if(!Y(b))return b;var d=b.indexOf("/",7),e;e=-1===d?b:b.slice(0,d);e=e.toLowerCase().slice(7);if(!("http"!==a.appUrl.scheme||e!==a.appUrl.authority||ma.test(b)&&p(b)))return b;if("https"===a.appUrl.scheme&&e===a.appUrl.authority||c&&c.some(function(a){return e===a||k.endsWith(e,"."+a)}))b=V(b);return b}function K(a,b,c){if(!(b&&c&&a&&E(a)))return a;var d=a.indexOf("//"),e=a.indexOf("/",d+2),g=a.indexOf(":",d+2),e=Math.min(0>e?a.length:e,0>g?a.length:g);if(a.slice(d+
2,e).toLowerCase()!==b.toLowerCase())return a;b=a.slice(0,d+2);a=a.slice(e);return""+b+c+a}function Z(b){if("string"===typeof b)return new e(B(b));b.scheme||(b.scheme=a.appUrl.scheme);return b}Object.defineProperty(a,"__esModule",{value:!0});var O=m.getLogger("esri.core.urlUtils"),W=l.request,R=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,da=/^\s*http:/i,X=/^\s*https:/i,U=/^\s*file:/i,ma=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;a.appUrl=new e(d.location);a.corsServersUrlCache={};a.appBaseUrl=function(){var b=
a.appUrl.path,b=b.substring(0,b.lastIndexOf(b.split("/")[b.split("/").length-1]));return""+(a.appUrl.scheme+"://"+a.appUrl.host+(null!=a.appUrl.port?":"+a.appUrl.port:""))+b}();a.urlToObject=t;a.getProxyUrl=v;a.addProxy=function(a){var b=r(a),d,e;b?(e=w(b.proxyUrl),d=e.path,e=e.query?c.queryToObject(e.query):null):W.forceProxy&&(e=v(),d=e.path,e=e.query);d&&(b=t(a),a=d+"?"+b.path,(d=c.objectToQuery(f({},e,b.query)))&&(a=a+"?"+d));return a};var ja={path:"",query:""};a.addProxyRule=function(a){a={proxyUrl:a.proxyUrl,
urlPrefix:y(a.urlPrefix)};for(var b=W.proxyRules,c=a.urlPrefix,d=b.length,e=0;e<b.length;e++){var g=b[e].urlPrefix;if(0===c.indexOf(g)){if(c.length===g.length)return-1;d=e;break}0===g.indexOf(c)&&(d=e+1)}b.splice(d,0,a);return d};a.getProxyRule=r;a.hasSamePortal=function(a,b){a=z(a);b=z(b);return na(a)===na(b)};a.hasSameOrigin=x;a.canUseXhr=p;a.getCorsConfig=n;a.makeAbsolute=B;a.makeRelative=C;a.normalize=F;a.join=D;a.getOrigin=H;a.isAbsolute=E;a.isBlobProtocol=J;a.isDataProtocol=ha;var oa=/^data:(.*?)(;base64)?,(.*)$/;
a.dataComponents=function(a){return(a=a.match(oa))?{mediaType:a[1],isBase64:!!a[2],data:a[3]}:null};a.makeData=function(a){return a.isBase64?"data:"+a.mediaType+";base64,"+a.data:"data:"+a.mediaType+","+a.data};a.isProtocolRelative=ea;a.hasProtocol=ba;a.toHTTPS=V;a.removeFile=function(a){var b=0;if(E(a)){var c=a.indexOf("//");-1!==c&&(b=c+2)}c=a.lastIndexOf("/");return c<b?a:a.slice(0,c+1)};a.removeTrailingSlash=function(a){return a.replace(/\/+$/,"")};a.changeDomain=K;a.read=function(b,c){var d=
c&&c.url&&c.url.path;b&&d&&(b=B(b,d,{preserveProtocolRelative:!0}));(c=c&&c.portal)&&!c.isPortal&&c.urlKey&&c.customBaseUrl?(d=c.urlKey+"."+c.customBaseUrl,c=x(a.appUrl,a.appUrl.scheme+"://"+d)?K(b,c.portalHostname,d):K(b,d,c.portalHostname)):c=b;return c};a.write=function(a,b){if(!a)return a;!E(a)&&b&&b.blockedRelativeUrls&&b.blockedRelativeUrls.push(a);var c=B(a);if(b){var d=b.verifyItemRelativeUrls&&b.verifyItemRelativeUrls.rootPath||b.url&&b.url.path;d&&(c=C(c,d,d),c!==a&&b.verifyItemRelativeUrls&&
b.verifyItemRelativeUrls.writtenUrls.push(c))}a=c;c=(b=b&&b.portal)&&!b.isPortal&&b.urlKey&&b.customBaseUrl?K(a,b.urlKey+"."+b.customBaseUrl,b.portalHostname):a;return c};a.writeOperationalLayerUrl=function(a,b){a&&ea(a)&&(a="https:"+a);b.url=a?F(a):a};a.isSVG=function(a){return ia.test(a)};a.removeQueryParameters=function(a,b){a=t(a);var c=Object.keys(a.query||{});0<c.length&&b&&b.warn("removeQueryParameters()","Url query parameters are not supported, the following parameters have been removed: "+
c.join(", ")+".");return a.path};var ia=/(^data:image\/svg|\.svg$)/i})},"esri/tasks/Task":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/assignHelper ../core/Accessor ../core/urlUtils ../core/accessorSupport/decorators".split(" "),function(b,a,f,c,e,l,h,d,k){return function(a){function b(b){b=a.call(this)||this;b.requestOptions=null;b.url=null;return b}f(b,a);b.prototype.normalizeCtorArgs=function(a,
b){return"string"!==typeof a?a:l({url:a},b)};Object.defineProperty(b.prototype,"parsedUrl",{get:function(){return this._parseUrl(this.url)},enumerable:!0,configurable:!0});b.prototype._parseUrl=function(a){return a?d.urlToObject(a):null};b.prototype._encode=function(a,b,c){var d={},e;for(e in a)if("declaredClass"!==e){var g=a[e];if(null!=g&&"function"!==typeof g)if(Array.isArray(g)){d[e]=[];for(var f=0;f<g.length;f++)d[e][f]=this._encode(g[f])}else"object"===typeof g?g.toJSON&&(g=g.toJSON(c&&c[e]),
d[e]=b?g:JSON.stringify(g)):d[e]=g}return d};c([k.property({readOnly:!0,dependsOn:["url"]})],b.prototype,"parsedUrl",null);c([k.property()],b.prototype,"requestOptions",void 0);c([k.property({type:String})],b.prototype,"url",void 0);return b=c([k.subclass("esri.tasks.Task")],b)}(k.declared(h))})},"esri/tasks/support/ProjectParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils".split(" "),
function(b,a,f,c,e,l,h,d,k){var m=h.getLogger("esri.tasks.support.ProjectParameters");return function(a){function b(b){b=a.call(this)||this;b.geometries=null;b.outSpatialReference=null;b.transformation=null;b.transformForward=null;return b}f(b,a);Object.defineProperty(b.prototype,"outSR",{get:function(){m.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");return this.outSpatialReference},set:function(a){m.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");
this.outSpatialReference=a},enumerable:!0,configurable:!0});b.prototype.toJSON=function(){var a=this.geometries.map(function(a){return a.toJSON()}),b=this.geometries[0],c={};c.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());c.inSR=b.spatialReference.wkid||JSON.stringify(b.spatialReference.toJSON());c.geometries=JSON.stringify({geometryType:k.getJsonType(b),geometries:a});this.transformation&&(c.transformation=this.transformation.wkid||JSON.stringify(this.transformation));
l.isDefined(this.transformForward)&&(c.transformForward=this.transformForward);return c};c([d.property()],b.prototype,"geometries",void 0);c([d.property({json:{read:{source:"outSR"}}})],b.prototype,"outSpatialReference",void 0);c([d.property({json:{read:!1}})],b.prototype,"outSR",null);c([d.property()],b.prototype,"transformation",void 0);c([d.property()],b.prototype,"transformForward",void 0);return b=c([d.subclass("esri.tasks.support.ProjectParameters")],b)}(d.declared(e))})},"esri/layers/graphics/data/attributeSupport":function(){define("require exports ../../../core/Error ../../../core/LRUCache ../../../core/LRUMap ../../../core/sql/WhereClause".split(" "),
function(b,a,f,c,e,l){function h(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d];"*"===e||a.has(e)||c.push(e)}return c}Object.defineProperty(a,"__esModule",{value:!0});a.invalidClauseCache=new c(500);a.whereClausesCache=new e(50);a.validateWhere=function(b,c){if(!c)return!0;var d;try{d=l.create(c),a.whereClausesCache.set(c,d)}catch(g){throw a.invalidClauseCache.insert(c,null),new f("feature-store:unsupported-query","invalid SQL expression",{where:c});}if(!d.isStandardized())throw new f("feature-store:unsupported-query",
"where clause is not standard",{where:c});d=d.getFields();b=h(b,d);if(b.length)throw new f("feature-store:unsupported-query","where clause contains missing fields",{missingFields:b,where:c});return!0};a.getWhereClause=function(b){if(!b)return null;if(a.invalidClauseCache.has(b))return a.invalidClauseCache.use(b);if(a.whereClausesCache.has(b))return a.whereClausesCache.get(b);var c;c=l.create(b);a.whereClausesCache.set(b,c);return c};a.getMissingFields=h})},"esri/core/LRUCache":function(){define(["require",
"exports"],function(b,a){return function(){function a(a){this._cache={};this._lruQueue=[];if(0>=a)throw Error("LRU cache size must be bigger than zero!");this._maxSize=a}a.prototype.has=function(a){return void 0!==this._cache[a]};a.prototype.insert=function(a,b){null!==this.use(a)?this._cache[a]=b:(this._collect(),this._cache[a]=b,this._lruQueue.unshift(a))};a.prototype.use=function(a){var b=this._cache[a];if(!b)return null;this._lruQueue.splice(this._lruQueue.indexOf(a),1);this._lruQueue.unshift(a);
return b};a.prototype.print=function(){for(var a=0,b=this._lruQueue;a<b.length;a++){var f=b[a];console.log("key: "+f+", value: "+this._cache[f])}};a.prototype._collect=function(){if(!(this._lruQueue.length<this._maxSize)){var a=this._lruQueue.pop(),b=this._cache[a];b&&b.release&&b.release();delete this._cache[a]}};return a}()})},"esri/core/LRUMap":function(){define(["require","exports"],function(b,a){return function(){function a(a,b){void 0===a&&(a=0);this.sizeOfFunction=function(){return 1};this._sizeOf=
0;this._cache=new Map;this._queue=[];if(0>=a)throw Error("LRU cache size must be bigger than zero!");this._maxSize=a;b&&(b.disposeFunction&&(this.disposeFunction=b.disposeFunction),b.sizeOfFunction&&(this.sizeOfFunction=b.sizeOfFunction))}Object.defineProperty(a.prototype,"length",{get:function(){return this._cache.size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){return this._sizeOf},enumerable:!0,configurable:!0});a.prototype.clear=function(){var a=this;
this._queue.length=0;this.disposeFunction&&this._cache.forEach(function(b,c){a.disposeFunction(c,b)});this._cache.clear();this._sizeOf=0};a.prototype.delete=function(a){var b=this._cache.get(a);return this._cache.delete(a)?(this._sizeOf-=this.sizeOfFunction(b),this._queue.splice(this._queue.indexOf(a),1),this.disposeFunction&&this.disposeFunction(a,b),!0):!1};a.prototype.forEach=function(a,b){this._cache.forEach(a,b)};a.prototype.get=function(a){var b=this._cache.get(a);if(void 0!==b)return this._queue.splice(this._queue.indexOf(a),
1),this._queue.unshift(a),b};a.prototype.has=function(a){return this._cache.has(a)};a.prototype.set=function(a,b){var c=this.get(a);void 0!==c?this._sizeOf-=this.sizeOfFunction(c):this._queue.unshift(a);this._sizeOf+=this.sizeOfFunction(b);this._cache.set(a,b);this._collect();return this};a.prototype._collect=function(){for(;this._queue.length&&this._sizeOf>this._maxSize;){var a=this._queue.pop(),b=this._cache.get(a);this._cache.delete(a)&&(this._sizeOf-=this.sizeOfFunction(b),this.disposeFunction&&
this.disposeFunction(a,b))}};return a}()})},"esri/core/sql/WhereClause":function(){define(["require","exports","../../moment","./StandardizedFunctions","./WhereGrammar"],function(b,a,f,c,e){function l(a){return Array.isArray(a)?a:[a]}function h(a){return null!==a?!0!==a:null}function d(a,b){if(null==a)return null;for(var c=!1,d=0;d<b.length;d++){var e=b[d];if(null==e)c=null;else if(a===e){c=!0;break}}return c}function k(a,b,c){if(null==a)return null;for(var d="",e=0,g=0;g<b.length;g++){var f=b.charAt(g);
switch(e){case 0:f===c?e=1:d=0<="-[]/{}()*+?.\\^$|".indexOf(f)?d+("\\"+f):"%"===f?d+".*":"_"===f?d+".":d+f;break;case 1:d=0<="-[]/{}()*+?.\\^$|".indexOf(f)?d+("\\"+f):d+f,e=0}}return(new RegExp("^"+d+"$")).test(a)}function m(a){return a instanceof Date?a.valueOf():a}function g(a,b,c){if(null==b||null==c)return null;b=m(b);c=m(c);switch(a){case "\x3c\x3e":return b!==c;case "\x3d":return b===c;case "\x3e":return b>c;case "\x3c":return b<c;case "\x3e\x3d":return b>=c;case "\x3c\x3d":return b<=c}}function t(a){for(var b=
[],c={},d=0;d<a.length;d++){var e=a[d],g=e.toLowerCase();void 0===c[g]&&(b.push(e),c[g]=1)}return b}return function(){function a(){this.parameters=this.parseTree=null}a.create=function(b){var c=new a;c.parseTree=e.WhereGrammar.parse(b);return c};a.prototype.isStandardized=function(){var a=!0;this.visitAll(this.parseTree,function(b){a&&"function"===b.type&&(a=c.isStandardized(b.name,b.args.value.length))});return a};a.prototype.setVariablesDictionary=function(a){this.parameters=a};a.prototype.testFeature=
function(a){return!!this.evaluateNode(this.parseTree,a)};a.prototype.calculateValue=function(a){return this.evaluateNode(this.parseTree,a)};a.prototype.getFunctions=function(){var a=[];this.visitAll(this.parseTree,function(b){"function"===b.type&&a.push(b.name.toLowerCase())});return t(a)};a.prototype.getFields=function(){var a=[];this.visitAll(this.parseTree,function(b){"column_ref"===b.type&&a.push(b.column)});return t(a)};a.prototype.getVariables=function(){var a=[];this.visitAll(this.parseTree,
function(b){"param"===b.type&&a.push(b.value.toLowerCase())});return t(a)};a.prototype.featureValue=function(a,b,c){a=a&&"object"===typeof a.attributes?a.attributes:a;var d=a[b];if(void 0!==d)return d;for(var e in a)if(b.toLowerCase()===e.toLowerCase())return c.column=e,a[e];return null};a.prototype.visitAll=function(a,b){if(null!=a)switch(b(a),a.type){case "when_clause":this.visitAll(a.operand,b);this.visitAll(a.value,b);break;case "case_expression":for(var c=0,d=a.clauses;c<d.length;c++){var e=
d[c];this.visitAll(e,b)}"simple"===a.format&&this.visitAll(a.operand,b);null!==a.else&&this.visitAll(a.else,b);break;case "expr_list":c=0;for(a=a.value;c<a.length;c++)e=a[c],this.visitAll(e,b);break;case "unary_expr":this.visitAll(a.expr,b);break;case "binary_expr":this.visitAll(a.left,b);this.visitAll(a.right,b);break;case "function":this.visitAll(a.args,b)}};a.prototype.evaluateNode=function(a,b){switch(a.type){case "case_expression":if("simple"===a.format)for(var e=m(this.evaluateNode(a.operand,
b)),t=0;t<a.clauses.length;t++){if(e===m(this.evaluateNode(a.clauses[t].operand,b)))return this.evaluateNode(a.clauses[t].value,b)}else for(t=0;t<a.clauses.length;t++)if(!0===this.evaluateNode(a.clauses[t].operand,b))return this.evaluateNode(a.clauses[t].value,b);return null!==a.else?this.evaluateNode(a.else,b):null;case "param":return this.parameters[a.value.toLowerCase()];case "expr_list":e=[];t=0;for(a=a.value;t<a.length;t++){var x=a[t];e.push(this.evaluateNode(x,b))}return e;case "unary_expr":return h(this.evaluateNode(a.expr,
b));case "binary_expr":switch(a.operator){case "AND":return e=this.evaluateNode(a.left,b),b=this.evaluateNode(a.right,b),null!=e&&null!=b?!0===e&&!0===b:!1===e||!1===b?!1:null;case "OR":return e=this.evaluateNode(a.left,b),b=this.evaluateNode(a.right,b),null!=e&&null!=b?!0===e||!0===b:!0===e||!0===b?!0:null;case "IS":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(a.left,b);case "ISNOT":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");return null!==
this.evaluateNode(a.left,b);case "IN":return e=l(this.evaluateNode(a.right,b)),d(this.evaluateNode(a.left,b),e);case "NOT IN":return e=l(this.evaluateNode(a.right,b)),h(d(this.evaluateNode(a.left,b),e));case "BETWEEN":return e=this.evaluateNode(a.left,b),b=this.evaluateNode(a.right,b),null==e||null==b[0]||null==b[1]?null:e>=b[0]&&e<=b[1];case "NOTBETWEEN":return e=this.evaluateNode(a.left,b),b=this.evaluateNode(a.right,b),null==e||null==b[0]||null==b[1]?null:e<b[0]||e>b[1];case "LIKE":return k(this.evaluateNode(a.left,
b),this.evaluateNode(a.right,b),a.escape);case "NOT LIKE":return h(k(this.evaluateNode(a.left,b),this.evaluateNode(a.right,b),a.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return g(a.operator,this.evaluateNode(a.left,b),this.evaluateNode(a.right,b));case "*":return this.evaluateNode(a.left,b)*this.evaluateNode(a.right,b);case "-":return this.evaluateNode(a.left,b)-this.evaluateNode(a.right,b);case "+":return this.evaluateNode(a.left,b)+this.evaluateNode(a.right,
b);case "/":return this.evaluateNode(a.left,b)/this.evaluateNode(a.right,b)}throw Error("Not Supported Operator "+a.operator);case "null":case "bool":case "string":case "number":return a.value;case "date":return f(a.value,["YYYY-M-D"]).toDate();case "timestamp":return f(a.value,["YYYY-M-D H:m:s","YYYY-M-D H:mZ","YYYY-M-D H:m:sZ","YYYY-M-D H:m","YYYY-m-d"]).toDate();case "column_ref":return"CURRENT_DATE"===a.column.toUpperCase()?(x=new Date,x.setHours(0,0,0,0),x):"CURRENT_TIMESTAMP"===a.column.toUpperCase()?
new Date:this.featureValue(b,a.column,a);case "function":return b=this.evaluateNode(a.args,b),c.evaluateFunction(a.name,b)}throw Error("Unsupported sql syntax "+a.type);};return a}()})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(b,a,f){return f})},"esri/plugins/moment":function(){define(["require","exports","dojo/_base/kernel","moment/moment"],function(b,a,f,c){Object.defineProperty(a,"__esModule",{value:!0});var e={ar:1,"ar-dz":1,"ar-kw":1,"ar-ly":1,"ar-ma":1,
"ar-sa":1,"ar-tn":1,bs:1,ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-il":1,"en-nz":1,es:1,"es-do":1,"es-us":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1};a.load=function(a,b,d){a=f.locale;var k=a in e;if(!k){var h=a.split("-");1<h.length&&h[0]in e&&(a=h[0],k=!0)}k?b(["moment/locale/"+a],function(){d(c)}):
d(c)}})},"moment/moment":function(){(function(b,a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define(a):b.moment=a()})(this,function(){function b(){return gd.apply(null,arguments)}function a(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function f(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function c(a){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(a).length;
for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function e(a){return void 0===a}function l(a){return"number"===typeof a||"[object Number]"===Object.prototype.toString.call(a)}function h(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function d(a,b){var c=[],d;for(d=0;d<a.length;++d)c.push(b(a[d],d));return c}function k(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function m(a,b){for(var c in b)k(b,c)&&(a[c]=b[c]);k(b,"toString")&&(a.toString=b.toString);
k(b,"valueOf")&&(a.valueOf=b.valueOf);return a}function g(a,b,c,d){return cb(a,b,c,d,!0).utc()}function t(a){null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1});return a._pf}function v(a){if(null==a._isValid){var b=t(a),c=hd.call(b.parsedDateParts,function(a){return null!=a}),c=!isNaN(a._d.getTime())&&0>b.overflow&&!b.empty&&
!b.invalidMonth&&!b.invalidWeekday&&!b.weekdayMismatch&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);a._strict&&(c=c&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(a))return c;a._isValid=c}return a._isValid}function w(a){var b=g(NaN);null!=a?m(t(b),a):t(b).userInvalidated=!0;return b}function y(a,b){var c,d,g;e(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject);e(b._i)||(a._i=b._i);e(b._f)||
(a._f=b._f);e(b._l)||(a._l=b._l);e(b._strict)||(a._strict=b._strict);e(b._tzm)||(a._tzm=b._tzm);e(b._isUTC)||(a._isUTC=b._isUTC);e(b._offset)||(a._offset=b._offset);e(b._pf)||(a._pf=t(b));e(b._locale)||(a._locale=b._locale);if(0<Vc.length)for(c=0;c<Vc.length;c++)d=Vc[c],g=b[d],e(g)||(a[d]=g);return a}function r(a){y(this,a);this._d=new Date(null!=a._d?a._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Wc&&(Wc=!0,b.updateOffset(this),Wc=!1)}function z(a){return a instanceof r||null!=
a&&null!=a._isAMomentObject}function x(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function p(a){a=+a;var b=0;0!==a&&isFinite(a)&&(b=x(a));return b}function n(a,b,c){var d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),g=0,f;for(f=0;f<d;f++)(c&&a[f]!==b[f]||!c&&p(a[f])!==p(b[f]))&&g++;return g+e}function A(a){!1===b.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function B(a,c){var d=!0;return m(function(){null!=b.deprecationHandler&&
b.deprecationHandler(null,a);if(d){for(var e=[],g,f=0;f<arguments.length;f++){g="";if("object"===typeof arguments[f]){g+="\n["+f+"] ";for(var k in arguments[0])g+=k+": "+arguments[0][k]+", ";g=g.slice(0,-2)}else g=arguments[f];e.push(g)}A(a+"\nArguments: "+Array.prototype.slice.call(e).join("")+"\n"+Error().stack);d=!1}return c.apply(this,arguments)},c)}function C(a,c){null!=b.deprecationHandler&&b.deprecationHandler(a,c);id[a]||(A(c),id[a]=!0)}function F(a){return a instanceof Function||"[object Function]"===
Object.prototype.toString.call(a)}function D(a,b){var c=m({},a),d;for(d in b)k(b,d)&&(f(a[d])&&f(b[d])?(c[d]={},m(c[d],a[d]),m(c[d],b[d])):null!=b[d]?c[d]=b[d]:delete c[d]);for(d in a)k(a,d)&&!k(b,d)&&f(a[d])&&(c[d]=m({},c[d]));return c}function H(a){null!=a&&this.set(a)}function E(a,b){var c=a.toLowerCase();Db[c]=Db[c+"s"]=Db[b]=a}function J(a){return"string"===typeof a?Db[a]||Db[a.toLowerCase()]:void 0}function ha(a){var b={},c,d;for(d in a)k(a,d)&&(c=J(d))&&(b[c]=a[d]);return b}function ea(a){var b=
[],c;for(c in a)b.push({unit:c,priority:Ea[c]});b.sort(function(a,b){return a.priority-b.priority});return b}function ba(a,b,c){var d=""+Math.abs(a);return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,b-d.length)).toString().substr(1)+d}function Q(a,b,c,d){var e=d;"string"===typeof d&&(e=function(){return this[d]()});a&&($a[a]=e);b&&($a[b[0]]=function(){return ba(e.apply(this,arguments),b[1],b[2])});c&&($a[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function Y(a){return a.match(/\[[\s\S]/)?
a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function V(a){var b=a.match(Yb),c,d;c=0;for(d=b.length;c<d;c++)b[c]=$a[b[c]]?$a[b[c]]:Y(b[c]);return function(c){var e="",g;for(g=0;g<d;g++)e+=F(b[g])?b[g].call(c,a):b[g];return e}}function na(a,b){if(!a.isValid())return a.localeData().invalidDate();b=T(b,a.localeData());Zb[b]=Zb[b]||V(b);return Zb[b](a)}function T(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Jb.lastIndex=0;0<=d&&Jb.test(a);)a=a.replace(Jb,c),Jb.lastIndex=0,--d;return a}
function K(a,b,c){Xc[a]=F(b)?b:function(a,d){return a&&c?c:b}}function Z(a,b){return k(Xc,a)?Xc[a](b._strict,b._locale):new RegExp(O(a))}function O(a){return W(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function W(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function R(a,b){var c,d=b;"string"===typeof a&&(a=[a]);l(b)&&(d=function(a,c){c[b]=p(a)});for(c=0;c<a.length;c++)$b[a[c]]=d}function da(a,b){R(a,function(a,c,d,e){d._w=
d._w||{};b(a,d._w,d,e)})}function X(a){return 0===a%4&&0!==a%100||0===a%400}function U(a,c){return function(d){return null!=d?(ja(this,a,d),b.updateOffset(this,c),this):ma(this,a)}}function ma(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function ja(a,b,c){if(a.isValid()&&!isNaN(c))if("FullYear"===b&&X(a.year())&&1===a.month()&&29===a.date())a._d["set"+(a._isUTC?"UTC":"")+b](c,a.month(),oa(c,a.month()));else a._d["set"+(a._isUTC?"UTC":"")+b](c)}function oa(a,b){if(isNaN(a)||isNaN(b))return NaN;
var c=(b%12+12)%12;return 1===c?X(a+(b-c)/12)?29:28:31-c%7%2}function ia(a,b){var c;if(!a.isValid())return a;if("string"===typeof b)if(/^\d+$/.test(b))b=p(b);else if(b=a.localeData().monthsParse(b),!l(b))return a;c=Math.min(a.date(),oa(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a}function qa(a){return null!=a?(ia(this,a),b.updateOffset(this,!0),this):ma(this,"Month")}function pa(){function a(a,b){return b.length-a.length}var b=[],c=[],d=[],e,f;for(e=0;12>e;e++)f=g([2E3,e]),b.push(this.monthsShort(f,
"")),c.push(this.months(f,"")),d.push(this.months(f,"")),d.push(this.monthsShort(f,""));b.sort(a);c.sort(a);d.sort(a);for(e=0;12>e;e++)b[e]=W(b[e]),c[e]=W(c[e]);for(e=0;24>e;e++)d[e]=W(d[e]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+d.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+c.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+b.join("|")+")","i")}function va(a,b,c,d,e,g,f){b=new Date(a,b,c,d,e,g,f);100>a&&0<=a&&isFinite(b.getFullYear())&&b.setFullYear(a);
return b}function Ha(a){var b=new Date(Date.UTC.apply(null,arguments));100>a&&0<=a&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a);return b}function Ia(a,b,c){c=7+b-c;return-((7+Ha(a,0,c).getUTCDay()-b)%7)+c-1}function N(a,b,c,d,e){c=(7+c-d)%7;d=Ia(a,d,e);d=1+7*(b-1)+c+d;0>=d?(b=a-1,a=(X(b)?366:365)+d):d>(X(a)?366:365)?(b=a+1,a=d-(X(a)?366:365)):(b=a,a=d);return{year:b,dayOfYear:a}}function ra(a,b,c){var d=Ia(a.year(),b,c),d=Math.floor((a.dayOfYear()-d-1)/7)+1;1>d?(a=a.year()-1,b=d+Za(a,b,c)):
d>Za(a.year(),b,c)?(b=d-Za(a.year(),b,c),a=a.year()+1):(a=a.year(),b=d);return{week:b,year:a}}function Za(a,b,c){var d=Ia(a,b,c);b=Ia(a+1,b,c);return((X(a)?366:365)-d+b)/7}function Wa(a,b,c){var d,e;a=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;7>d;++d)e=g([2E3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(e,"").toLocaleLowerCase(),this._shortWeekdaysParse[d]=this.weekdaysShort(e,"").toLocaleLowerCase(),
this._weekdaysParse[d]=this.weekdays(e,"").toLocaleLowerCase();if(c)b="dddd"===b?Fa.call(this._weekdaysParse,a):"ddd"===b?Fa.call(this._shortWeekdaysParse,a):Fa.call(this._minWeekdaysParse,a);else if("dddd"===b){b=Fa.call(this._weekdaysParse,a);if(-1!==b)return b;b=Fa.call(this._shortWeekdaysParse,a);if(-1!==b)return b;b=Fa.call(this._minWeekdaysParse,a)}else if("ddd"===b){b=Fa.call(this._shortWeekdaysParse,a);if(-1!==b)return b;b=Fa.call(this._weekdaysParse,a);if(-1!==b)return b;b=Fa.call(this._minWeekdaysParse,
a)}else{b=Fa.call(this._minWeekdaysParse,a);if(-1!==b)return b;b=Fa.call(this._weekdaysParse,a);if(-1!==b)return b;b=Fa.call(this._shortWeekdaysParse,a)}return-1!==b?b:null}function q(){function a(a,b){return b.length-a.length}var b=[],c=[],d=[],e=[],f,k,h,l;for(f=0;7>f;f++)k=g([2E3,1]).day(f),h=this.weekdaysMin(k,""),l=this.weekdaysShort(k,""),k=this.weekdays(k,""),b.push(h),c.push(l),d.push(k),e.push(h),e.push(l),e.push(k);b.sort(a);c.sort(a);d.sort(a);e.sort(a);for(f=0;7>f;f++)c[f]=W(c[f]),d[f]=
W(d[f]),e[f]=W(e[f]);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+e.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+d.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+c.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+b.join("|")+")","i")}function Ja(){return this.hours()%12||12}function ab(a,b){Q(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function pb(a,b){return b._meridiemParse}
function zb(a){return a?a.toLowerCase().replace("_","-"):a}function Oa(a){var b=null;if(!Ma[a]&&"undefined"!==typeof module&&module&&module.exports)try{b=ic._abbr,require("./locale/"+a),Xa(b)}catch(Rd){}return Ma[a]}function Xa(a,b){a&&((b=e(b)?Ka(a):ib(a,b))?ic=b:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+a+" not found. Did you forget to load it?"));return ic._abbr}function ib(a,b){if(null!==b){var c;c=jd;b.abbr=a;if(null!=Ma[a])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),
c=Ma[a]._config;else if(null!=b.parentLocale)if(null!=Ma[b.parentLocale])c=Ma[b.parentLocale]._config;else if(c=Oa(b.parentLocale),null!=c)c=c._config;else return jc[b.parentLocale]||(jc[b.parentLocale]=[]),jc[b.parentLocale].push({name:a,config:b}),null;Ma[a]=new H(D(c,b));jc[a]&&jc[a].forEach(function(a){ib(a.name,a.config)});Xa(a);return Ma[a]}delete Ma[a];return null}function Ka(b){var c;b&&b._locale&&b._locale._abbr&&(b=b._locale._abbr);if(!b)return ic;if(!a(b)){if(c=Oa(b))return c;b=[b]}a:{c=
0;for(var d,e,g,f;c<b.length;){f=zb(b[c]).split("-");d=f.length;for(e=(e=zb(b[c+1]))?e.split("-"):null;0<d;){if(g=Oa(f.slice(0,d).join("-"))){b=g;break a}if(e&&e.length>=d&&n(f,e,!0)>=d-1)break;d--}c++}b=ic}return b}function jb(a){var b;(b=a._a)&&-2===t(a).overflow&&(b=0>b[Ab]||11<b[Ab]?Ab:1>b[qb]||b[qb]>oa(b[Sa],b[Ab])?qb:0>b[Na]||24<b[Na]||24===b[Na]&&(0!==b[kb]||0!==b[Bb]||0!==b[Kb])?Na:0>b[kb]||59<b[kb]?kb:0>b[Bb]||59<b[Bb]?Bb:0>b[Kb]||999<b[Kb]?Kb:-1,t(a)._overflowDayOfYear&&(b<Sa||b>qb)&&(b=
qb),t(a)._overflowWeeks&&-1===b&&(b=kc),t(a)._overflowWeekday&&-1===b&&(b=yc),t(a).overflow=b);return a}function Ca(a,b,c){return null!=a?a:null!=b?b:c}function Qa(a){var c,d=[],e;if(!a._d){e=new Date(b.now());e=a._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()];if(a._w&&null==a._a[qb]&&null==a._a[Ab]){var g,f,k,h,l,n;g=a._w;if(null!=g.GG||null!=g.W||null!=g.E){if(l=1,n=4,f=Ca(g.GG,a._a[Sa],ra(M(),1,4).year),k=Ca(g.W,1),h=Ca(g.E,1),1>h||7<h)c=
!0}else if(l=a._locale._week.dow,n=a._locale._week.doy,k=ra(M(),l,n),f=Ca(g.gg,a._a[Sa],k.year),k=Ca(g.w,k.week),null!=g.d){if(h=g.d,0>h||6<h)c=!0}else if(null!=g.e){if(h=g.e+l,0>g.e||6<g.e)c=!0}else h=l;1>k||k>Za(f,l,n)?t(a)._overflowWeeks=!0:null!=c?t(a)._overflowWeekday=!0:(c=N(f,k,h,l,n),a._a[Sa]=c.year,a._dayOfYear=c.dayOfYear)}if(null!=a._dayOfYear){c=Ca(a._a[Sa],e[Sa]);if(a._dayOfYear>(X(c)?366:365)||0===a._dayOfYear)t(a)._overflowDayOfYear=!0;c=Ha(c,0,a._dayOfYear);a._a[Ab]=c.getUTCMonth();
a._a[qb]=c.getUTCDate()}for(c=0;3>c&&null==a._a[c];++c)a._a[c]=d[c]=e[c];for(;7>c;c++)a._a[c]=d[c]=null==a._a[c]?2===c?1:0:a._a[c];24===a._a[Na]&&0===a._a[kb]&&0===a._a[Bb]&&0===a._a[Kb]&&(a._nextDay=!0,a._a[Na]=0);a._d=(a._useUTC?Ha:va).apply(null,d);d=a._useUTC?a._d.getUTCDay():a._d.getDay();null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm);a._nextDay&&(a._a[Na]=24);a._w&&"undefined"!==typeof a._w.d&&a._w.d!==d&&(t(a).weekdayMismatch=!0)}}function S(a){var b,c;b=a._i;var d=wd.exec(b)||
xd.exec(b),e,g,f,k;if(d){t(a).iso=!0;b=0;for(c=zc.length;b<c;b++)if(zc[b][1].exec(d[1])){g=zc[b][0];e=!1!==zc[b][2];break}if(null==g)a._isValid=!1;else{if(d[3]){b=0;for(c=Yc.length;b<c;b++)if(Yc[b][1].exec(d[3])){f=(d[2]||" ")+Yc[b][0];break}if(null==f){a._isValid=!1;return}}if(e||null==f){if(d[4])if(yd.exec(d[4]))k="Z";else{a._isValid=!1;return}a._f=g+(f||"")+(k||"");ga(a)}else a._isValid=!1}}else a._isValid=!1}function Pa(a){var b=Ac.exec(a._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g,
" ").trim());if(b){var c=b[3],d=b[2],e=b[5],g=b[6],f=b[7],k=parseInt(b[4],10),c=[49>=k?2E3+k:999>=k?1900+k:k,Lb.indexOf(c),parseInt(d,10),parseInt(e,10),parseInt(g,10)];f&&c.push(parseInt(f,10));a:{if(f=b[1])if(f=kd.indexOf(f),d=(new Date(c[0],c[1],c[2])).getDay(),f!==d){t(a).weekdayMismatch=!0;f=a._isValid=!1;break a}f=!0}f&&(a._a=c,(f=b[8])?b=Bc[f]:b[9]?b=0:(b=parseInt(b[10],10),f=b%100,b=(b-f)/100*60+f),a._tzm=b,a._d=Ha.apply(null,a._a),a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),t(a).rfc2822=
!0)}else a._isValid=!1}function Ba(a){var c=zd.exec(a._i);null!==c?a._d=new Date(+c[1]):(S(a),!1===a._isValid&&(delete a._isValid,Pa(a),!1===a._isValid&&(delete a._isValid,b.createFromInputFallback(a))))}function ga(a){if(a._f===b.ISO_8601)S(a);else if(a._f===b.RFC_2822)Pa(a);else{a._a=[];t(a).empty=!0;var c=""+a._i,d,e,g,f,h,l=c.length,n=0;g=T(a._f,a._locale).match(Yb)||[];for(d=0;d<g.length;d++){f=g[d];if(e=(c.match(Z(f,a))||[])[0])h=c.substr(0,c.indexOf(e)),0<h.length&&t(a).unusedInput.push(h),
c=c.slice(c.indexOf(e)+e.length),n+=e.length;if($a[f]){if(e?t(a).empty=!1:t(a).unusedTokens.push(f),h=a,null!=e&&k($b,f))$b[f](e,h._a,h,f)}else a._strict&&!e&&t(a).unusedTokens.push(f)}t(a).charsLeftOver=l-n;0<c.length&&t(a).unusedInput.push(c);12>=a._a[Na]&&!0===t(a).bigHour&&0<a._a[Na]&&(t(a).bigHour=void 0);t(a).parsedDateParts=a._a.slice(0);t(a).meridiem=a._meridiem;c=a._a;d=Na;l=a._locale;g=a._a[Na];n=a._meridiem;null!=n&&(null!=l.meridiemHour?g=l.meridiemHour(g,n):null!=l.isPM&&((l=l.isPM(n))&&
12>g&&(g+=12),l||12!==g||(g=0)));c[d]=g;Qa(a);jb(a)}}function lb(a){if(!a._d){var b=ha(a._i);a._a=d([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)});Qa(a)}}function La(b){var c=b._i,d=b._f;b._locale=b._locale||Ka(b._l);if(null===c||void 0===d&&""===c)return w({nullInput:!0});"string"===typeof c&&(b._i=c=b._locale.preparse(c));if(z(c))return new r(jb(c));if(h(c))b._d=c;else if(a(d)){var e,g,f;if(0===b._f.length)t(b).invalidFormat=!0,b._d=
new Date(NaN);else{for(c=0;c<b._f.length;c++)if(d=0,e=y({},b),null!=b._useUTC&&(e._useUTC=b._useUTC),e._f=b._f[c],ga(e),v(e)&&(d+=t(e).charsLeftOver,d+=10*t(e).unusedTokens.length,t(e).score=d,null==f||d<f))f=d,g=e;m(b,g||e)}}else d?ga(b):sa(b);v(b)||(b._d=null);return b}function sa(c){var g=c._i;e(g)?c._d=new Date(b.now()):h(g)?c._d=new Date(g.valueOf()):"string"===typeof g?Ba(c):a(g)?(c._a=d(g.slice(0),function(a){return parseInt(a,10)}),Qa(c)):f(g)?lb(c):l(g)?c._d=new Date(g):b.createFromInputFallback(c)}
function cb(b,d,e,g,k){var h={};if(!0===e||!1===e)g=e,e=void 0;if(f(b)&&c(b)||a(b)&&0===b.length)b=void 0;h._isAMomentObject=!0;h._useUTC=h._isUTC=k;h._l=e;h._i=b;h._f=d;h._strict=g;b=new r(jb(La(h)));b._nextDay&&(b.add(1,"d"),b._nextDay=void 0);return b}function M(a,b,c,d){return cb(a,b,c,d,!1)}function wa(b,c){var d,e;1===c.length&&a(c[0])&&(c=c[0]);if(!c.length)return M();d=c[0];for(e=1;e<c.length;++e)if(!c[e].isValid()||c[e][b](d))d=c[e];return d}function G(a){for(var b in a)if(-1===Fa.call(db,
b)||null!=a[b]&&isNaN(a[b]))return!1;b=!1;for(var c=0;c<db.length;++c)if(a[db[c]]){if(b)return!1;parseFloat(a[db[c]])!==p(a[db[c]])&&(b=!0)}return!0}function fa(a){a=ha(a);var b=a.year||0,c=a.quarter||0,d=a.month||0,e=a.week||0,g=a.day||0,f=a.hour||0,k=a.minute||0,h=a.second||0,l=a.millisecond||0;this._isValid=G(a);this._milliseconds=+l+1E3*h+6E4*k+36E5*f;this._days=+g+7*e;this._months=+d+3*c+12*b;this._data={};this._locale=Ka();this._bubble()}function la(a){return a instanceof fa}function ua(a){return 0>
a?-1*Math.round(-1*a):Math.round(a)}function aa(a,b){Q(a,0,0,function(){var a=this.utcOffset(),c="+";0>a&&(a=-a,c="-");return c+ba(~~(a/60),2)+b+ba(~~a%60,2)})}function ca(a,b){a=(b||"").match(a);if(null===a)return null;a=((a[a.length-1]||[])+"").match(lc)||["-",0,0];b=+(60*a[1])+p(a[2]);return 0===b?0:"+"===a[0]?b:-b}function L(a,c){return c._isUTC?(c=c.clone(),a=(z(a)||h(a)?a.valueOf():M(a).valueOf())-c.valueOf(),c._d.setTime(c._d.valueOf()+a),b.updateOffset(c,!1),c):M(a).local()}function Eb(){return this.isValid()?
this._isUTC&&0===this._offset:!1}function Ra(a,b){var c=a,d=null;la(a)?c={ms:a._milliseconds,d:a._days,M:a._months}:l(a)?(c={},b?c[b]=a:c.milliseconds=a):(d=Cc.exec(a))?(c="-"===d[1]?-1:1,c={y:0,d:p(d[qb])*c,h:p(d[Na])*c,m:p(d[kb])*c,s:p(d[Bb])*c,ms:p(ua(1E3*d[Kb]))*c}):(d=Dc.exec(a))?(c="-"===d[1]?-1:1,c={y:bb(d[2],c),M:bb(d[3],c),w:bb(d[4],c),d:bb(d[5],c),h:bb(d[6],c),m:bb(d[7],c),s:bb(d[8],c)}):null==c?c={}:"object"===typeof c&&("from"in c||"to"in c)&&(d=M(c.from),c=M(c.to),d.isValid()&&c.isValid()?
(c=L(c,d),d.isBefore(c)?c=mc(d,c):(c=mc(c,d),c.milliseconds=-c.milliseconds,c.months=-c.months),d=c):d={milliseconds:0,months:0},c={},c.ms=d.milliseconds,c.M=d.months);c=new fa(c);la(a)&&k(a,"_locale")&&(c._locale=a._locale);return c}function bb(a,b){a=a&&parseFloat(a.replace(",","."));return(isNaN(a)?0:a)*b}function mc(a,b){var c={milliseconds:0,months:0};c.months=b.month()-a.month()+12*(b.year()-a.year());a.clone().add(c.months,"M").isAfter(b)&&--c.months;c.milliseconds=+b-+a.clone().add(c.months,
"M");return c}function rb(a,b){return function(c,d){var e;null===d||isNaN(+d)||(C(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),e=c,c=d,d=e);c=Ra("string"===typeof c?+c:c,d);ac(this,c,a);return this}}function ac(a,c,d,e){var g=c._milliseconds,f=ua(c._days);c=ua(c._months);a.isValid()&&(e=null==e?!0:e,c&&ia(a,ma(a,"Month")+c*d),f&&ja(a,"Date",ma(a,"Date")+f*d),g&&a._d.setTime(a._d.valueOf()+
g*d),e&&b.updateOffset(a,f||c))}function gb(a,b){var c=12*(b.year()-a.year())+(b.month()-a.month()),d=a.clone().add(c,"months");0>b-d?(a=a.clone().add(c-1,"months"),b=(b-d)/(d-a)):(a=a.clone().add(c+1,"months"),b=(b-d)/(a-d));return-(c+b)||0}function bc(a){if(void 0===a)return this._locale._abbr;a=Ka(a);null!=a&&(this._locale=a);return this}function mb(){return this._locale}function nb(a,b){Q(0,[a,a.length],0,b)}function sb(a,b,c,d,e){var g;if(null==a)return ra(this,d,e).year;g=Za(a,d,e);b>g&&(b=
g);a=N(a,b,c,d,e);a=Ha(a.year,0,a.dayOfYear);this.year(a.getUTCFullYear());this.month(a.getUTCMonth());this.date(a.getUTCDate());return this}function nc(a,b){b[Kb]=p(1E3*("0."+a))}function cc(a){return a}function ob(a,b,c,d){var e=Ka();b=g().set(d,b);return e[c](b,a)}function Mb(a,b,c){l(a)&&(b=a,a=void 0);a=a||"";if(null!=b)return ob(a,b,c,"month");var d=[];for(b=0;12>b;b++)d[b]=ob(a,b,c,"month");return d}function Fb(a,b,c,d){"boolean"!==typeof a&&(c=b=a,a=!1);l(b)&&(c=b,b=void 0);b=b||"";var e=
Ka();a=a?e._week.dow:0;if(null!=c)return ob(b,(c+a)%7,d,"day");e=[];for(c=0;7>c;c++)e[c]=ob(b,(c+a)%7,d,"day");return e}function oc(a,b,c,d){b=Ra(b,c);a._milliseconds+=d*b._milliseconds;a._days+=d*b._days;a._months+=d*b._months;return a._bubble()}function Nb(a){return 0>a?Math.floor(a):Math.ceil(a)}function Ta(a){return function(){return this.as(a)}}function tb(a){return function(){return this.isValid()?this._data[a]:NaN}}function Ec(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function hb(a){return(0<
a)-(0>a)||+a}function Fc(){if(!this.isValid())return this.localeData().invalidDate();var a=Ad(this._milliseconds)/1E3,b=Ad(this._days),c=Ad(this._months),d,e;d=x(a/60);e=x(d/60);a%=60;d%=60;var g=x(c/12),c=c%12,a=a?a.toFixed(3).replace(/\.?0+$/,""):"",f=this.asSeconds();if(!f)return"P0D";var k=0>f?"-":"",h=hb(this._months)!==hb(f)?"-":"",l=hb(this._days)!==hb(f)?"-":"",f=hb(this._milliseconds)!==hb(f)?"-":"";return k+"P"+(g?h+g+"Y":"")+(c?h+c+"M":"")+(b?l+b+"D":"")+(e||d||a?"T":"")+(e?f+e+"H":"")+
(d?f+d+"M":"")+(a?f+a+"S":"")}var gd,hd;hd=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var Vc=b.momentProperties=[],Wc=!1,id={};b.suppressDeprecationWarnings=!1;b.deprecationHandler=null;var Ob;Ob=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)k(a,b)&&c.push(b);return c};var Db={},Ea={},Yb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
Jb=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Zb={},$a={},Pb=/\d/,Ua=/\d\d/,Qb=/\d{3}/,dc=/\d{4}/,Gb=/[+-]?\d{6}/,ya=/\d\d?/,Rb=/\d\d\d\d?/,Sb=/\d\d\d\d\d\d?/,Tb=/\d{1,3}/,Ub=/\d{1,4}/,Vb=/[+-]?\d{1,6}/,Bd=/\d+/,Gc=/[+-]?\d+/,Cd=/Z|[+-]\d\d:?\d\d/gi,Hc=/Z|[+-]\d\d(?::?\d\d)?/gi,pc=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Xc={},$b={},Sa=0,Ab=1,qb=2,Na=3,kb=4,Bb=5,Kb=6,kc=7,yc=8;Q("Y",0,
0,function(){var a=this.year();return 9999>=a?""+a:"+"+a});Q(0,["YY",2],0,function(){return this.year()%100});Q(0,["YYYY",4],0,"year");Q(0,["YYYYY",5],0,"year");Q(0,["YYYYYY",6,!0],0,"year");E("year","y");Ea.year=1;K("Y",Gc);K("YY",ya,Ua);K("YYYY",Ub,dc);K("YYYYY",Vb,Gb);K("YYYYYY",Vb,Gb);R(["YYYYY","YYYYYY"],Sa);R("YYYY",function(a,c){c[Sa]=2===a.length?b.parseTwoDigitYear(a):p(a)});R("YY",function(a,c){c[Sa]=b.parseTwoDigitYear(a)});R("Y",function(a,b){b[Sa]=parseInt(a,10)});b.parseTwoDigitYear=
function(a){return p(a)+(68<p(a)?1900:2E3)};var qc=U("FullYear",!0),Fa;Fa=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};Q("M",["MM",2],"Mo",function(){return this.month()+1});Q("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});Q("MMMM",0,0,function(a){return this.localeData().months(this,a)});E("month","M");Ea.month=8;K("M",ya);K("MM",ya,Ua);K("MMM",function(a,b){return b.monthsShortRegex(a)});K("MMMM",
function(a,b){return b.monthsRegex(a)});R(["M","MM"],function(a,b){b[Ab]=p(a)-1});R(["MMM","MMMM"],function(a,b,c,d){d=c._locale.monthsParse(a,d,c._strict);null!=d?b[Ab]=d:t(c).invalidMonth=a});var ec=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Lb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");Q("w",["ww",2],"wo","week");Q("W",["WW",2],"Wo","isoWeek");E("week","w");E("isoWeek","W");Ea.week=5;Ea.isoWeek=5;K("w",ya);K("ww",ya,Ua);K("W",ya);K("WW",ya,Ua);da(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,
1)]=p(a)});Q("d",0,"do","day");Q("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)});Q("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});Q("dddd",0,0,function(a){return this.localeData().weekdays(this,a)});Q("e",0,0,"weekday");Q("E",0,0,"isoWeekday");E("day","d");E("weekday","e");E("isoWeekday","E");Ea.day=11;Ea.weekday=11;Ea.isoWeekday=11;K("d",ya);K("e",ya);K("E",ya);K("dd",function(a,b){return b.weekdaysMinRegex(a)});K("ddd",function(a,b){return b.weekdaysShortRegex(a)});
K("dddd",function(a,b){return b.weekdaysRegex(a)});da(["dd","ddd","dddd"],function(a,b,c,d){d=c._locale.weekdaysParse(a,d,c._strict);null!=d?b.d=d:t(c).invalidWeekday=a});da(["d","e","E"],function(a,b,c,d){b[d]=p(a)});var kd="Sun Mon Tue Wed Thu Fri Sat".split(" ");Q("H",["HH",2],0,"hour");Q("h",["hh",2],0,Ja);Q("k",["kk",2],0,function(){return this.hours()||24});Q("hmm",0,0,function(){return""+Ja.apply(this)+ba(this.minutes(),2)});Q("hmmss",0,0,function(){return""+Ja.apply(this)+ba(this.minutes(),
2)+ba(this.seconds(),2)});Q("Hmm",0,0,function(){return""+this.hours()+ba(this.minutes(),2)});Q("Hmmss",0,0,function(){return""+this.hours()+ba(this.minutes(),2)+ba(this.seconds(),2)});ab("a",!0);ab("A",!1);E("hour","h");Ea.hour=13;K("a",pb);K("A",pb);K("H",ya);K("h",ya);K("k",ya);K("HH",ya,Ua);K("hh",ya,Ua);K("kk",ya,Ua);K("hmm",Rb);K("hmmss",Sb);K("Hmm",Rb);K("Hmmss",Sb);R(["H","HH"],Na);R(["k","kk"],function(a,b,c){a=p(a);b[Na]=24===a?0:a});R(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a);
c._meridiem=a});R(["h","hh"],function(a,b,c){b[Na]=p(a);t(c).bigHour=!0});R("hmm",function(a,b,c){var d=a.length-2;b[Na]=p(a.substr(0,d));b[kb]=p(a.substr(d));t(c).bigHour=!0});R("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[Na]=p(a.substr(0,d));b[kb]=p(a.substr(d,2));b[Bb]=p(a.substr(e));t(c).bigHour=!0});R("Hmm",function(a,b,c){c=a.length-2;b[Na]=p(a.substr(0,c));b[kb]=p(a.substr(c))});R("Hmmss",function(a,b,c){c=a.length-4;var d=a.length-2;b[Na]=p(a.substr(0,c));b[kb]=p(a.substr(c,2));
b[Bb]=p(a.substr(d))});var Dd=U("Hours",!0),jd={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",
mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:Lb,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:kd,meridiemParse:/[ap]\.?m?\.?/i},Ma={},jc={},ic,wd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
xd=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yd=/Z|[+-]\d\d(?::?\d\d)?/,zc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Yc=
[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],zd=/^\/?Date\((\-?\d+)/i,Ac=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Bc={UT:0,GMT:0,EDT:-240,
EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};b.createFromInputFallback=B("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});b.ISO_8601=function(){};
b.RFC_2822=function(){};var rc=B("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=M.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:w()}),Ic=B("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=M.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:w()}),db="year quarter month week day hour minute second millisecond".split(" ");
aa("Z",":");aa("ZZ","");K("Z",Hc);K("ZZ",Hc);R(["Z","ZZ"],function(a,b,c){c._useUTC=!0;c._tzm=ca(Hc,a)});var lc=/([\+\-]|\d\d)/gi;b.updateOffset=function(){};var Cc=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Dc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Ra.fn=fa.prototype;Ra.invalid=function(){return Ra(NaN)};var Jc=rb(1,"add"),Kc=rb(-1,"subtract");b.defaultFormat=
"YYYY-MM-DDTHH:mm:ssZ";b.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var sc=B("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});Q(0,["gg",2],0,function(){return this.weekYear()%100});Q(0,["GG",2],0,function(){return this.isoWeekYear()%100});nb("gggg","weekYear");nb("ggggg","weekYear");nb("GGGG","isoWeekYear");nb("GGGGG","isoWeekYear");E("weekYear",
"gg");E("isoWeekYear","GG");Ea.weekYear=1;Ea.isoWeekYear=1;K("G",Gc);K("g",Gc);K("GG",ya,Ua);K("gg",ya,Ua);K("GGGG",Ub,dc);K("gggg",Ub,dc);K("GGGGG",Vb,Gb);K("ggggg",Vb,Gb);da(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=p(a)});da(["gg","GG"],function(a,c,d,e){c[e]=b.parseTwoDigitYear(a)});Q("Q",0,"Qo","quarter");E("quarter","Q");Ea.quarter=7;K("Q",Pb);R("Q",function(a,b){b[Ab]=3*(p(a)-1)});Q("D",["DD",2],"Do","date");E("date","D");Ea.date=9;K("D",ya);K("DD",ya,Ua);K("Do",function(a,
b){return a?b._dayOfMonthOrdinalParse||b._ordinalParse:b._dayOfMonthOrdinalParseLenient});R(["D","DD"],qb);R("Do",function(a,b){b[qb]=p(a.match(ya)[0])});var tc=U("Date",!0);Q("DDD",["DDDD",3],"DDDo","dayOfYear");E("dayOfYear","DDD");Ea.dayOfYear=4;K("DDD",Tb);K("DDDD",Qb);R(["DDD","DDDD"],function(a,b,c){c._dayOfYear=p(a)});Q("m",["mm",2],0,"minute");E("minute","m");Ea.minute=14;K("m",ya);K("mm",ya,Ua);R(["m","mm"],kb);var Lc=U("Minutes",!1);Q("s",["ss",2],0,"second");E("second","s");Ea.second=15;
K("s",ya);K("ss",ya,Ua);R(["s","ss"],Bb);var Mc=U("Seconds",!1);Q("S",0,0,function(){return~~(this.millisecond()/100)});Q(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Q(0,["SSS",3],0,"millisecond");Q(0,["SSSS",4],0,function(){return 10*this.millisecond()});Q(0,["SSSSS",5],0,function(){return 100*this.millisecond()});Q(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});Q(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});Q(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});
Q(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});E("millisecond","ms");Ea.millisecond=16;K("S",Tb,Pb);K("SS",Tb,Ua);K("SSS",Tb,Qb);var eb;for(eb="SSSS";9>=eb.length;eb+="S")K(eb,Bd);for(eb="S";9>=eb.length;eb+="S")R(eb,nc);var Nc=U("Milliseconds",!1);Q("z",0,0,"zoneAbbr");Q("zz",0,0,"zoneName");var P=r.prototype;P.add=Jc;P.calendar=function(a,c){a=a||M();var d=L(a,this).startOf("day"),d=b.calendarFormat(this,d)||"sameElse";c=c&&(F(c[d])?c[d].call(this,a):c[d]);return this.format(c||
this.localeData().calendar(d,this,M(a)))};P.clone=function(){return new r(this)};P.diff=function(a,b,c){var d;if(!this.isValid())return NaN;a=L(a,this);if(!a.isValid())return NaN;d=6E4*(a.utcOffset()-this.utcOffset());b=J(b);switch(b){case "year":b=gb(this,a)/12;break;case "month":b=gb(this,a);break;case "quarter":b=gb(this,a)/3;break;case "second":b=(this-a)/1E3;break;case "minute":b=(this-a)/6E4;break;case "hour":b=(this-a)/36E5;break;case "day":b=(this-a-d)/864E5;break;case "week":b=(this-a-d)/
6048E5;break;default:b=this-a}return c?b:x(b)};P.endOf=function(a){a=J(a);if(void 0===a||"millisecond"===a)return this;"date"===a&&(a="day");return this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")};P.format=function(a){a||(a=this.isUtc()?b.defaultFormatUtc:b.defaultFormat);a=na(this,a);return this.localeData().postformat(a)};P.from=function(a,b){return this.isValid()&&(z(a)&&a.isValid()||M(a).isValid())?Ra({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};
P.fromNow=function(a){return this.from(M(),a)};P.to=function(a,b){return this.isValid()&&(z(a)&&a.isValid()||M(a).isValid())?Ra({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};P.toNow=function(a){return this.to(M(),a)};P.get=function(a){a=J(a);return F(this[a])?this[a]():this};P.invalidAt=function(){return t(this).overflow};P.isAfter=function(a,b){a=z(a)?a:M(a);if(!this.isValid()||!a.isValid())return!1;b=J(e(b)?"millisecond":b);return"millisecond"===b?this.valueOf()>
a.valueOf():a.valueOf()<this.clone().startOf(b).valueOf()};P.isBefore=function(a,b){a=z(a)?a:M(a);if(!this.isValid()||!a.isValid())return!1;b=J(e(b)?"millisecond":b);return"millisecond"===b?this.valueOf()<a.valueOf():this.clone().endOf(b).valueOf()<a.valueOf()};P.isBetween=function(a,b,c,d){d=d||"()";return("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))};P.isSame=function(a,b){a=z(a)?a:M(a);if(!this.isValid()||!a.isValid())return!1;b=J(b||"millisecond");
if("millisecond"===b)return this.valueOf()===a.valueOf();a=a.valueOf();return this.clone().startOf(b).valueOf()<=a&&a<=this.clone().endOf(b).valueOf()};P.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)};P.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)};P.isValid=function(){return v(this)};P.lang=sc;P.locale=bc;P.localeData=mb;P.max=Ic;P.min=rc;P.parsingFlags=function(){return m({},t(this))};P.set=function(a,b){if("object"===typeof a){a=ha(a);b=ea(a);
for(var c=0;c<b.length;c++)this[b[c].unit](a[b[c].unit])}else if(a=J(a),F(this[a]))return this[a](b);return this};P.startOf=function(a){a=J(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":case "date":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===a&&this.weekday(0);"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this};
P.subtract=Kc;P.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};P.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};P.toDate=function(){return new Date(this.valueOf())};P.toISOString=function(a){if(!this.isValid())return null;var b=(a=!0!==a)?this.clone().utc():this;return 0>b.year()||9999<b.year()?
na(b,a?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):F(Date.prototype.toISOString)?a?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",na(b,"Z")):na(b,a?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};P.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="";this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z");var a="["+a+'("]',c=0<=this.year()&&
9999>=this.year()?"YYYY":"YYYYYY";return this.format(a+c+"-MM-DD[T]HH:mm:ss.SSS"+(b+'[")]'))};P.toJSON=function(){return this.isValid()?this.toISOString():null};P.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};P.unix=function(){return Math.floor(this.valueOf()/1E3)};P.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};P.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};
P.year=qc;P.isLeapYear=function(){return X(this.year())};P.weekYear=function(a){return sb.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};P.isoWeekYear=function(a){return sb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)};P.quarter=P.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)};P.month=qa;P.daysInMonth=function(){return oa(this.year(),this.month())};P.week=P.weeks=function(a){var b=this.localeData().week(this);
return null==a?b:this.add(7*(a-b),"d")};P.isoWeek=P.isoWeeks=function(a){var b=ra(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")};P.weeksInYear=function(){var a=this.localeData()._week;return Za(this.year(),a.dow,a.doy)};P.isoWeeksInYear=function(){return Za(this.year(),1,4)};P.date=tc;P.day=P.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=a){var c=this.localeData();"string"===typeof a&&(isNaN(a)?(a=c.weekdaysParse(a),
a="number"===typeof a?a:null):a=parseInt(a,10));return this.add(a-b,"d")}return b};P.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")};P.isoWeekday=function(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=this.localeData();a="string"===typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a;return this.day(this.day()%7?a:a-7)}return this.day()||7};P.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-
this.clone().startOf("year"))/864E5)+1;return null==a?b:this.add(a-b,"d")};P.hour=P.hours=Dd;P.minute=P.minutes=Lc;P.second=P.seconds=Mc;P.millisecond=P.milliseconds=Nc;P.utcOffset=function(a,c,d){var e=this._offset||0,g;if(!this.isValid())return null!=a?this:NaN;if(null!=a){if("string"===typeof a){if(a=ca(Hc,a),null===a)return this}else 16>Math.abs(a)&&!d&&(a*=60);!this._isUTC&&c&&(g=15*-Math.round(this._d.getTimezoneOffset()/15));this._offset=a;this._isUTC=!0;null!=g&&this.add(g,"m");e!==a&&(!c||
this._changeInProgress?ac(this,Ra(a-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,b.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?e:15*-Math.round(this._d.getTimezoneOffset()/15)};P.utc=function(a){return this.utcOffset(0,a)};P.local=function(a){this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};P.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,
!0);else if("string"===typeof this._i){var a=ca(Cd,this._i);null!=a?this.utcOffset(a):this.utcOffset(0,!0)}return this};P.hasAlignedHourOffset=function(a){if(!this.isValid())return!1;a=a?M(a).utcOffset():0;return 0===(this.utcOffset()-a)%60};P.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};P.isLocal=function(){return this.isValid()?!this._isUTC:!1};P.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};P.isUtc=
Eb;P.isUTC=Eb;P.zoneAbbr=function(){return this._isUTC?"UTC":""};P.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};P.dates=B("dates accessor is deprecated. Use date instead.",tc);P.months=B("months accessor is deprecated. Use month instead",qa);P.years=B("years accessor is deprecated. Use year instead",qc);P.zone=B("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(a,b){return null!=a?("string"!==typeof a&&(a=
-a),this.utcOffset(a,b),this):-this.utcOffset()});P.isDSTShifted=B("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!e(this._isDSTShifted))return this._isDSTShifted;var a={};y(a,this);a=La(a);if(a._a){var b=a._isUTC?g(a._a):M(a._a);this._isDSTShifted=this.isValid()&&0<n(a._a,b.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var za=H.prototype;za.calendar=function(a,b,c){a=this._calendar[a]||this._calendar.sameElse;
return F(a)?a.call(b,c):a};za.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});return this._longDateFormat[a]};za.invalidDate=function(){return this._invalidDate};za.ordinal=function(a){return this._ordinal.replace("%d",a)};za.preparse=cc;za.postformat=cc;za.relativeTime=function(a,b,c,d){var e=this._relativeTime[c];return F(e)?e(a,b,c,d):e.replace(/%d/i,
a)};za.pastFuture=function(a,b){a=this._relativeTime[0<a?"future":"past"];return F(a)?a(b):a.replace(/%s/i,b)};za.set=function(a){var b,c;for(c in a)b=a[c],F(b)?this[c]=b:this["_"+c]=b;this._config=a;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};za.months=function(b,c){return b?a(this._months)?this._months[b.month()]:this._months[(this._months.isFormat||ec).test(c)?"format":"standalone"][b.month()]:a(this._months)?
this._months:this._months.standalone};za.monthsShort=function(b,c){return b?a(this._monthsShort)?this._monthsShort[b.month()]:this._monthsShort[ec.test(c)?"format":"standalone"][b.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};za.monthsParse=function(a,b,c){var d,e;if(this._monthsParseExact){a:{a=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;12>d;++d)e=g([2E3,d]),this._shortMonthsParse[d]=
this.monthsShort(e,"").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(e,"").toLocaleLowerCase();if(c)b="MMM"===b?Fa.call(this._shortMonthsParse,a):Fa.call(this._longMonthsParse,a);else if("MMM"===b){b=Fa.call(this._shortMonthsParse,a);if(-1!==b)break a;b=Fa.call(this._longMonthsParse,a)}else{b=Fa.call(this._longMonthsParse,a);if(-1!==b)break a;b=Fa.call(this._shortMonthsParse,a)}b=-1!==b?b:null}return b}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=
[]);for(d=0;12>d;d++)if(e=g([2E3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(e="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(e.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a)||c&&"MMM"===b&&this._shortMonthsParse[d].test(a)||!c&&this._monthsParse[d].test(a))return d};
za.monthsRegex=function(a){if(this._monthsParseExact)return k(this,"_monthsRegex")||pa.call(this),a?this._monthsStrictRegex:this._monthsRegex;k(this,"_monthsRegex")||(this._monthsRegex=pc);return this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex};za.monthsShortRegex=function(a){if(this._monthsParseExact)return k(this,"_monthsRegex")||pa.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex;k(this,"_monthsShortRegex")||(this._monthsShortRegex=pc);return this._monthsShortStrictRegex&&
a?this._monthsShortStrictRegex:this._monthsShortRegex};za.week=function(a){return ra(a,this._week.dow,this._week.doy).week};za.firstDayOfYear=function(){return this._week.doy};za.firstDayOfWeek=function(){return this._week.dow};za.weekdays=function(b,c){return b?a(this._weekdays)?this._weekdays[b.day()]:this._weekdays[this._weekdays.isFormat.test(c)?"format":"standalone"][b.day()]:a(this._weekdays)?this._weekdays:this._weekdays.standalone};za.weekdaysMin=function(a){return a?this._weekdaysMin[a.day()]:
this._weekdaysMin};za.weekdaysShort=function(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort};za.weekdaysParse=function(a,b,c){var d,e;if(this._weekdaysParseExact)return Wa.call(this,a,b,c);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(d=0;7>d;d++)if(e=g([2E3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=
new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(e="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(e.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a)||c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a)||c&&"dd"===b&&this._minWeekdaysParse[d].test(a)||!c&&this._weekdaysParse[d].test(a))return d};
za.weekdaysRegex=function(a){if(this._weekdaysParseExact)return k(this,"_weekdaysRegex")||q.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex;k(this,"_weekdaysRegex")||(this._weekdaysRegex=pc);return this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex};za.weekdaysShortRegex=function(a){if(this._weekdaysParseExact)return k(this,"_weekdaysRegex")||q.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;k(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=
pc);return this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};za.weekdaysMinRegex=function(a){if(this._weekdaysParseExact)return k(this,"_weekdaysRegex")||q.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;k(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=pc);return this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};za.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)};za.meridiem=function(a,b,c){return 11<
a?c?"pm":"PM":c?"am":"AM"};Xa("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,b=1===p(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});b.lang=B("moment.lang is deprecated. Use moment.locale instead.",Xa);b.langData=B("moment.langData is deprecated. Use moment.localeData instead.",Ka);var ub=Math.abs,ld=Ta("ms"),md=Ta("s"),nd=Ta("m"),u=Ta("h"),Wb=Ta("d"),Va=Ta("w"),Xb=Ta("M"),I=Ta("y"),Cb=tb("milliseconds"),Ld=tb("seconds"),Md=tb("minutes"),Nd=tb("hours"),
Od=tb("days"),Pd=tb("months"),Qd=tb("years"),fc=Math.round,Hb={ss:44,s:45,m:45,h:22,d:26,M:11},Ad=Math.abs,xa=fa.prototype;xa.isValid=function(){return this._isValid};xa.abs=function(){var a=this._data;this._milliseconds=ub(this._milliseconds);this._days=ub(this._days);this._months=ub(this._months);a.milliseconds=ub(a.milliseconds);a.seconds=ub(a.seconds);a.minutes=ub(a.minutes);a.hours=ub(a.hours);a.months=ub(a.months);a.years=ub(a.years);return this};xa.add=function(a,b){return oc(this,a,b,1)};
xa.subtract=function(a,b){return oc(this,a,b,-1)};xa.as=function(a){if(!this.isValid())return NaN;var b,c=this._milliseconds;a=J(a);if("month"===a||"year"===a)return b=this._days+c/864E5,b=this._months+4800*b/146097,"month"===a?b:b/12;b=this._days+Math.round(146097*this._months/4800);switch(a){case "week":return b/7+c/6048E5;case "day":return b+c/864E5;case "hour":return 24*b+c/36E5;case "minute":return 1440*b+c/6E4;case "second":return 86400*b+c/1E3;case "millisecond":return Math.floor(864E5*b)+
c;default:throw Error("Unknown unit "+a);}};xa.asMilliseconds=ld;xa.asSeconds=md;xa.asMinutes=nd;xa.asHours=u;xa.asDays=Wb;xa.asWeeks=Va;xa.asMonths=Xb;xa.asYears=I;xa.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*p(this._months/12):NaN};xa._bubble=function(){var a=this._milliseconds,b=this._days,c=this._months,d=this._data;0<=a&&0<=b&&0<=c||0>=a&&0>=b&&0>=c||(a+=864E5*Nb(146097*c/4800+b),c=b=0);d.milliseconds=a%1E3;a=x(a/1E3);d.seconds=
a%60;a=x(a/60);d.minutes=a%60;a=x(a/60);d.hours=a%24;b+=x(a/24);a=x(4800*b/146097);c+=a;b-=Nb(146097*a/4800);a=x(c/12);d.days=b;d.months=c%12;d.years=a;return this};xa.clone=function(){return Ra(this)};xa.get=function(a){a=J(a);return this.isValid()?this[a+"s"]():NaN};xa.milliseconds=Cb;xa.seconds=Ld;xa.minutes=Md;xa.hours=Nd;xa.days=Od;xa.weeks=function(){return x(this.days()/7)};xa.months=Pd;xa.years=Qd;xa.humanize=function(a){if(!this.isValid())return this.localeData().invalidDate();var b=this.localeData(),
c;c=!a;var d=Ra(this).abs(),e=fc(d.as("s")),g=fc(d.as("m")),f=fc(d.as("h")),k=fc(d.as("d")),h=fc(d.as("M")),d=fc(d.as("y")),e=e<=Hb.ss&&["s",e]||e<Hb.s&&["ss",e]||1>=g&&["m"]||g<Hb.m&&["mm",g]||1>=f&&["h"]||f<Hb.h&&["hh",f]||1>=k&&["d"]||k<Hb.d&&["dd",k]||1>=h&&["M"]||h<Hb.M&&["MM",h]||1>=d&&["y"]||["yy",d];e[2]=c;e[3]=0<+this;e[4]=b;c=Ec.apply(null,e);a&&(c=b.pastFuture(+this,c));return b.postformat(c)};xa.toISOString=Fc;xa.toString=Fc;xa.toJSON=Fc;xa.locale=bc;xa.localeData=mb;xa.toIsoString=B("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",
Fc);xa.lang=sc;Q("X",0,0,"unix");Q("x",0,0,"valueOf");K("x",Gc);K("X",/[+-]?\d+(\.\d{1,3})?/);R("X",function(a,b,c){c._d=new Date(1E3*parseFloat(a,10))});R("x",function(a,b,c){c._d=new Date(p(a))});b.version="2.22.1";gd=M;b.fn=P;b.min=function(){var a=[].slice.call(arguments,0);return wa("isBefore",a)};b.max=function(){var a=[].slice.call(arguments,0);return wa("isAfter",a)};b.now=function(){return Date.now?Date.now():+new Date};b.utc=g;b.unix=function(a){return M(1E3*a)};b.months=function(a,b){return Mb(a,
b,"months")};b.isDate=h;b.locale=Xa;b.invalid=w;b.duration=Ra;b.isMoment=z;b.weekdays=function(a,b,c){return Fb(a,b,c,"weekdays")};b.parseZone=function(){return M.apply(null,arguments).parseZone()};b.localeData=Ka;b.isDuration=la;b.monthsShort=function(a,b){return Mb(a,b,"monthsShort")};b.weekdaysMin=function(a,b,c){return Fb(a,b,c,"weekdaysMin")};b.defineLocale=ib;b.updateLocale=function(a,b){if(null!=b){var c,d=jd;c=Oa(a);null!=c&&(d=c._config);b=D(d,b);b=new H(b);b.parentLocale=Ma[a];Ma[a]=b;Xa(a)}else null!=
Ma[a]&&(null!=Ma[a].parentLocale?Ma[a]=Ma[a].parentLocale:null!=Ma[a]&&delete Ma[a]);return Ma[a]};b.locales=function(){return Ob(Ma)};b.weekdaysShort=function(a,b,c){return Fb(a,b,c,"weekdaysShort")};b.normalizeUnits=J;b.relativeTimeRounding=function(a){return void 0===a?fc:"function"===typeof a?(fc=a,!0):!1};b.relativeTimeThreshold=function(a,b){if(void 0===Hb[a])return!1;if(void 0===b)return Hb[a];Hb[a]=b;"s"===a&&(Hb.ss=b-1);return!0};b.calendarFormat=function(a,b){a=a.diff(b,"days",!0);return-6>
a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse"};b.prototype=P;b.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"};return b})},"esri/core/sql/StandardizedFunctions":function(){define(["require","exports","dojo/regexp"],function(b,a,f){Object.defineProperty(a,
"__esModule",{value:!0});a.evaluateFunction=function(a,b){var e=c[a.toLowerCase()];if(null==e)throw Error("Function Not Recognised");if(b.length<e.minParams||b.length>e.maxParams)throw Error("Invalid Parameter count for call to "+a.toUpperCase());return e.evaluate(b)};a.isStandardized=function(a,b){a=c[a.toLowerCase()];return null!=a&&b>=a.minParams&&b<=a.maxParams};var c={extract:{minParams:2,maxParams:2,evaluate:function(a){var b=a[0];a=a[1];if(null==a)return null;if(a instanceof Date)switch(b.toUpperCase()){case "SECOND":return a.getSeconds();
case "MINUTE":return a.getMinutes();case "HOUR":return a.getHours();case "DAY":return a.getDate();case "MONTH":return a.getMonth()+1;case "YEAR":return a.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:function(a){if(2===a.length){var b=a[0],c=a[1];return null==b||null==c?null:b.toString().substring(c-1)}if(3===a.length)return b=a[0],c=a[1],a=a[2],null==b||null==c||null==a?null:0>=a?"":b.toString().substring(c-1,c+a-1)}},position:{minParams:2,
maxParams:2,evaluate:function(a){var b=a[0];a=a[1];return null==b||null==a?null:a.indexOf(b)+1}},trim:{minParams:2,maxParams:3,evaluate:function(a){var b=3===a.length,c=b?a[1]:" ",b=b?a[2]:a[1];if(null==c||null==b)return null;c="("+f.escapeString(c)+")";switch(a[0]){case "BOTH":return b.replace(new RegExp("^"+c+"*|"+c+"*$","g"),"");case "LEADING":return b.replace(new RegExp("^"+c+"*","g"),"");case "TRAILING":return b.replace(new RegExp(c+"*$","g"),"")}throw Error("Invalid Parameter for call to TRIM");
}},abs:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.abs(a[0])}},ceiling:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.ceil(a[0])}},floor:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.floor(a[0])}},log:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.log(a[0])}},log10:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.log(a[0])*Math.LOG10E}},sin:{minParams:1,maxParams:1,
evaluate:function(a){return null==a[0]?null:Math.sin(a[0])}},cos:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.cos(a[0])}},tan:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.tan(a[0])}},asin:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.asin(a[0])}},acos:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.acos(a[0])}},atan:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.atan(a[0])}},
sign:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:0<a[0]?1:0>a[1]?-1:0}},power:{minParams:2,maxParams:2,evaluate:function(a){return null==a[0]||null==a[1]?null:Math.pow(a[0],a[1])}},mod:{minParams:2,maxParams:2,evaluate:function(a){return null==a[0]||null==a[1]?null:a[0]%a[1]}},round:{minParams:1,maxParams:2,evaluate:function(a){var b=a[0];a=2===a.length?Math.pow(10,a[1]):1;return null==b?null:Math.round(b*a)/a}},truncate:{minParams:1,maxParams:2,evaluate:function(a){return null==
a[0]?null:1===a.length?parseInt(a[0].toFixed(0),10):parseFloat(a[0].toFixed(a[1]))}},char_length:{minParams:1,maxParams:1,evaluate:function(a){return"string"===typeof a[0]||a[0]instanceof String?a[0].length:0}},concat:{minParams:1,maxParams:Infinity,evaluate:function(a){for(var b="",c=0;c<a.length;c++){if(null==a[c])return null;b+=a[c].toString()}return b}},lower:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:a[0].toString().toLowerCase()}},upper:{minParams:1,maxParams:1,evaluate:function(a){return null==
a[0]?null:a[0].toString().toUpperCase()}}}})},"esri/core/sql/WhereGrammar":function(){define(["require","exports","./sql92grammar"],function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});b=function(){function a(){}a.parse=function(a){return f.parse(a)};return a}();a.WhereGrammar=b})},"esri/core/sql/sql92grammar":function(){define([],function(){function b(a,f,c,e){this.message=a;this.expected=f;this.found=c;this.location=e;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&
Error.captureStackTrace(this,b)}(function(a,b){function c(){this.constructor=a}c.prototype=b.prototype;a.prototype=new c})(b,Error);b.buildMessage=function(a,b){function c(a){return a.charCodeAt(0).toString(16).toUpperCase()}function e(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+c(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+c(a)})}function f(a){return a.replace(/\\/g,
"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+c(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+c(a)})}var h={literal:function(a){return'"'+e(a.text)+'"'},"class":function(a){var b="",c;for(c=0;c<a.parts.length;c++)b+=a.parts[c]instanceof Array?f(a.parts[c][0])+"-"+f(a.parts[c][1]):f(a.parts[c]);return"["+(a.inverted?"^":"")+b+"]"},
any:function(a){return"any character"},end:function(a){return"end of input"},other:function(a){return a.description}};return"Expected "+function(a){var b=Array(a.length),c;for(c=0;c<a.length;c++){var d=c,e;e=a[c];e=h[e.type](e);b[d]=e}b.sort();if(0<b.length){for(a=c=1;c<b.length;c++)b[c-1]!==b[c]&&(b[a]=b[c],a++);b.length=a}switch(b.length){case 1:return b[0];case 2:return b[0]+" or "+b[1];default:return b.slice(0,-1).join(", ")+", or "+b[b.length-1]}}(a)+" but "+(b?'"'+e(b)+'"':"end of input")+" found."};
return{SyntaxError:b,parse:function(a,f){function c(a,b){return{type:"literal",text:a,ignoreCase:b}}function e(a,b,c){return{type:"class",parts:a,inverted:b,ignoreCase:c}}function l(b){var c=Wb[b],d;if(!c){for(d=b-1;!Wb[d];)d--;c=Wb[d];for(c={line:c.line,column:c.column};d<b;)10===a.charCodeAt(d)?(c.line++,c.column=1):c.column++,d++;Wb[b]=c}return c}function h(a,b){var c=l(a),d=l(b);return{start:{offset:a,line:c.line,column:c.column},end:{offset:b,line:d.line,column:d.column}}}function d(a){u<Va||
(u>Va&&(Va=u,Xb=[]),Xb.push(a))}function k(){var a,b,c;a=u;b=N();b!==q?(b=g(),b!==q?(c=N(),c!==q?a=b:(u=a,a=q)):(u=a,a=q)):(u=a,a=q);return a}function m(){var a,b,c,d,e,f,k,h;a=u;b=g();if(b!==q){c=[];d=u;e=N();e!==q?(f=va(),f!==q?(k=N(),k!==q?(h=g(),h!==q?d=e=[e,f,k,h]:(u=d,d=q)):(u=d,d=q)):(u=d,d=q)):(u=d,d=q);for(;d!==q;)c.push(d),d=u,e=N(),e!==q?(f=va(),f!==q?(k=N(),k!==q?(h=g(),h!==q?d=e=[e,f,k,h]:(u=d,d=q)):(u=d,d=q)):(u=d,d=q)):(u=d,d=q);if(c!==q){a={type:"expr_list"};b=[b];for(d=0;d<c.length;d++)b.push(c[d][3]);
a.value=b}else u=a,a=q}else u=a,a=q;return a}function g(){var a,b,c,d,e,g,f,k;a=u;b=t();if(b!==q){c=[];d=u;e=N();e!==q?(g=X(),g!==q?(f=N(),f!==q?(k=t(),k!==q?d=e=[e,g,f,k]:(u=d,d=q)):(u=d,d=q)):(u=d,d=q)):(u=d,d=q);for(;d!==q;)c.push(d),d=u,e=N(),e!==q?(g=X(),g!==q?(f=N(),f!==q?(k=t(),k!==q?d=e=[e,g,f,k]:(u=d,d=q)):(u=d,d=q)):(u=d,d=q)):(u=d,d=q);c!==q?a=b=Wa(b,c):(u=a,a=q)}else u=a,a=q;return a}function t(){var a,b,c,d,e,g,f,k;a=u;b=v();if(b!==q){c=[];d=u;e=N();e!==q?(g=da(),g!==q?(f=N(),f!==q?(k=
v(),k!==q?d=e=[e,g,f,k]:(u=d,d=q)):(u=d,d=q)):(u=d,d=q)):(u=d,d=q);for(;d!==q;)c.push(d),d=u,e=N(),e!==q?(g=da(),g!==q?(f=N(),f!==q?(k=v(),k!==q?d=e=[e,g,f,k]:(u=d,d=q)):(u=d,d=q)):(u=d,d=q)):(u=d,d=q);c!==q?a=b=Wa(b,c):(u=a,a=q)}else u=a,a=q;return a}function v(){var b,c,e,g,f;b=u;c=R();c===q&&(c=u,33===a.charCodeAt(u)?(e=pb,u++):(e=q,0===I&&d(zb)),e!==q?(g=u,I++,61===a.charCodeAt(u)?(f=Oa,u++):(f=q,0===I&&d(Xa)),I--,f===q?g=void 0:(u=g,g=q),g!==q?c=e=[e,g]:(u=c,c=q)):(u=c,c=q));c!==q?(e=N(),e!==
q?(g=v(),g!==q?b=c={type:"unary_expr",operator:"NOT",expr:g}:(u=b,b=q)):(u=b,b=q)):(u=b,b=q);if(b===q)if(b=u,c=z(),c!==q)if(e=N(),e!==q){var k,h,l;e=[];g=u;f=N();f!==q?(k=w(),k!==q?(h=N(),h!==q?(l=z(),l!==q?g=f=[f,k,h,l]:(u=g,g=q)):(u=g,g=q)):(u=g,g=q)):(u=g,g=q);if(g!==q)for(;g!==q;)e.push(g),g=u,f=N(),f!==q?(k=w(),k!==q?(h=N(),h!==q?(l=z(),l!==q?g=f=[f,k,h,l]:(u=g,g=q)):(u=g,g=q)):(u=g,g=q)):(u=g,g=q);else e=q;e!==q&&(e={type:"arithmetic",tail:e});e===q&&(e=u,g=r(),g!==q?(f=N(),f!==q?(f=Ha(),f!==
q?(f=N(),f!==q?(f=m(),f!==q?(k=N(),k!==q?(k=Ia(),k!==q?e=g={op:g,right:f}:(u=e,e=q)):(u=e,e=q)):(u=e,e=q)):(u=e,e=q)):(u=e,e=q)):(u=e,e=q)):(u=e,e=q),e===q&&(e=u,g=r(),g!==q?(f=N(),f!==q?(f=Ha(),f!==q?(f=N(),f!==q?(f=Ia(),f!==q?e=g={op:g,right:{type:"expr_list",value:[]}}:(u=e,e=q)):(u=e,e=q)):(u=e,e=q)):(u=e,e=q)):(u=e,e=q),e===q&&(e=u,g=r(),g!==q?(f=N(),f!==q?(f=H(),f!==q?e=g={op:g,right:f}:(u=e,e=q)):(u=e,e=q)):(u=e,e=q))),e===q&&(e=u,f=R(),f!==q?(g=N(),g!==q?(g=U(),g!==q?(k=N(),k!==q?(k=z(),k!==
q?(h=N(),h!==q?(h=da(),h!==q?(f=N(),f!==q?(f=z(),f!==q?e=f={op:"NOT"+g,right:{type:"expr_list",value:[k,f]}}:(u=e,e=q)):(u=e,e=q)):(u=e,e=q)):(u=e,e=q)):(u=e,e=q)):(u=e,e=q)):(u=e,e=q)):(u=e,e=q)):(u=e,e=q),e===q&&(e=u,f=U(),f!==q?(g=N(),g!==q?(g=z(),g!==q?(k=N(),k!==q?(k=da(),k!==q?(h=N(),h!==q?(h=z(),h!==q?e=f={op:f,right:{type:"expr_list",value:[g,h]}}:(u=e,e=q)):(u=e,e=q)):(u=e,e=q)):(u=e,e=q)):(u=e,e=q)):(u=e,e=q)):(u=e,e=q)),e===q&&(e=u,g=O(),g!==q?(f=N(),f!==q?(f=R(),f!==q?(f=N(),f!==q?(f=
z(),f!==q?e=g={op:g+"NOT",right:f}:(u=e,e=q)):(u=e,e=q)):(u=e,e=q)):(u=e,e=q)):(u=e,e=q),e===q&&(e=u,g=O(),g!==q?(f=N(),f!==q?(f=z(),f!==q?e=g={op:g,right:f}:(u=e,e=q)):(u=e,e=q)):(u=e,e=q)),e===q&&(e=u,g=y(),g!==q?(f=N(),f!==q?(f=J(),f!==q?(k=N(),k!==q?(k=u,a.substr(u,6).toLowerCase()===$a?(h=a.substr(u,6),u+=6):(h=q,0===I&&d(Pb)),h!==q?(h=u,I++,l=F(),I--,l===q?h=void 0:(u=h,h=q),h!==q?k="ESCAPE":(u=k,k=q)):(u=k,k=q),k!==q?(k=N(),k!==q?(k=ha(),k!==q?e=g={op:g,right:f,escape:k.value}:(u=e,e=q)):(u=
e,e=q)):(u=e,e=q)):(u=e,e=q)):(u=e,e=q)):(u=e,e=q)):(u=e,e=q),e===q&&(e=u,g=y(),g!==q?(f=N(),f!==q?(f=J(),f!==q?e=g={op:g,right:f,escape:""}:(u=e,e=q)):(u=e,e=q)):(u=e,e=q))))));e===q&&(e=null);e!==q?(b=c,c=e,""==c||void 0==c||null==c?c=b:(e=null,c=e="arithmetic"==c.type?Wa(b,c.tail):Za(c.op,b,c.right,c.escape)),b=c):(u=b,b=q)}else u=b,b=q;else u=b,b=q;return b}function w(){var b;a.substr(u,2)===ib?(b=ib,u+=2):(b=q,0===I&&d(Ka));b===q&&(62===a.charCodeAt(u)?(b=jb,u++):(b=q,0===I&&d(Ca)),b===q&&(a.substr(u,
2)===Qa?(b=Qa,u+=2):(b=q,0===I&&d(S)),b===q&&(a.substr(u,2)===Pa?(b=Pa,u+=2):(b=q,0===I&&d(Ba)),b===q&&(60===a.charCodeAt(u)?(b=ga,u++):(b=q,0===I&&d(lb)),b===q&&(61===a.charCodeAt(u)?(b=Oa,u++):(b=q,0===I&&d(Xa)),b===q&&(a.substr(u,2)===La?(b=La,u+=2):(b=q,0===I&&d(sa))))))));return b}function y(){var a,b,c,d;a=a=u;b=R();b!==q?(c=N(),c!==q?(d=W(),d!==q?a=b=[b,c,d]:(u=a,a=q)):(u=a,a=q)):(u=a,a=q);a!==q&&(a=a[0]+" "+a[2]);a===q&&(a=W());return a}function r(){var a,b,c,d;a=a=u;b=R();b!==q?(c=N(),c!==
q?(d=Z(),d!==q?a=b=[b,c,d]:(u=a,a=q)):(u=a,a=q)):(u=a,a=q);a!==q&&(a=a[0]+" "+a[2]);a===q&&(a=Z());return a}function z(){var a,b,c,d,e,g,f,k;a=u;b=p();if(b!==q){c=[];d=u;e=N();e!==q?(g=x(),g!==q?(f=N(),f!==q?(k=p(),k!==q?d=e=[e,g,f,k]:(u=d,d=q)):(u=d,d=q)):(u=d,d=q)):(u=d,d=q);for(;d!==q;)c.push(d),d=u,e=N(),e!==q?(g=x(),g!==q?(f=N(),f!==q?(k=p(),k!==q?d=e=[e,g,f,k]:(u=d,d=q)):(u=d,d=q)):(u=d,d=q)):(u=d,d=q);c!==q?a=b=Wa(b,c):(u=a,a=q)}else u=a,a=q;return a}function x(){var b;43===a.charCodeAt(u)?
(b=cb,u++):(b=q,0===I&&d(M));b===q&&(45===a.charCodeAt(u)?(b=wa,u++):(b=q,0===I&&d(G)));return b}function p(){var a,b,c,d,e,g,f,k;a=u;b=A();if(b!==q){c=[];d=u;e=N();e!==q?(g=n(),g!==q?(f=N(),f!==q?(k=A(),k!==q?d=e=[e,g,f,k]:(u=d,d=q)):(u=d,d=q)):(u=d,d=q)):(u=d,d=q);for(;d!==q;)c.push(d),d=u,e=N(),e!==q?(g=n(),g!==q?(f=N(),f!==q?(k=A(),k!==q?d=e=[e,g,f,k]:(u=d,d=q)):(u=d,d=q)):(u=d,d=q)):(u=d,d=q);c!==q?a=b=Wa(b,c):(u=a,a=q)}else u=a,a=q;return a}function n(){var b;42===a.charCodeAt(u)?(b=fa,u++):
(b=q,0===I&&d(la));b===q&&(47===a.charCodeAt(u)?(b=ua,u++):(b=q,0===I&&d(aa)));return b}function A(){var b,c,e,f,k,h,l;l=ha();if(l===q){var n,t,A,x;n=u;var p,v,r,w;p=u;v=Y();v!==q?(r=V(),r!==q?(w=na(),w!==q?p=v=parseFloat(v+r+w):(u=p,p=q)):(u=p,p=q)):(u=p,p=q);p===q&&(p=u,v=Y(),v!==q?(r=V(),r!==q?p=v=parseFloat(v+r):(u=p,p=q)):(u=p,p=q),p===q&&(p=u,v=Y(),v!==q?(r=na(),r!==q?p=v=parseFloat(v+r):(u=p,p=q)):(u=p,p=q),p===q&&(p=u,v=Y(),v!==q&&(v=parseFloat(v)),p=v)));t=p;t!==q?(A=u,I++,x=C(),I--,x===
q?A=void 0:(u=A,A=q),A!==q?n=t={type:"number",value:t}:(u=n,n=q)):(u=n,n=q);l=n;if(l===q){var y,z;y=u;var K,Eb,U,T;K=u;a.substr(u,4).toLowerCase()===hd?(Eb=a.substr(u,4),u+=4):(Eb=q,0===I&&d(Vc));Eb!==q?(U=u,I++,T=F(),I--,T===q?U=void 0:(u=U,U=q),U!==q?K=Eb=[Eb,U]:(u=K,K=q)):(u=K,K=q);z=K;z!==q&&(z={type:"bool",value:!0});y=z;if(y===q){y=u;var O,Ra,bb,W;O=u;a.substr(u,5).toLowerCase()===Wc?(Ra=a.substr(u,5),u+=5):(Ra=q,0===I&&d(id));Ra!==q?(bb=u,I++,W=F(),I--,W===q?bb=void 0:(u=bb,bb=q),bb!==q?O=
Ra=[Ra,bb]:(u=O,O=q)):(u=O,O=q);z=O;z!==q&&(z={type:"bool",value:!1});y=z}l=y;if(l===q){var qa,va,G,pa,mc;va=u;a.substr(u,4).toLowerCase()===Fc?(G=a.substr(u,4),u+=4):(G=q,0===I&&d(gd));G!==q?(pa=u,I++,mc=F(),I--,mc===q?pa=void 0:(u=pa,pa=q),pa!==q?va=G=[G,pa]:(u=va,va=q)):(u=va,va=q);qa=va;qa!==q&&(qa={type:"null",value:null});l=qa;if(l===q){var R,X,rb,M;R=u;var L,da,Oa,S;L=u;a.substr(u,4).toLowerCase()===Bb?(da=a.substr(u,4),u+=4):(da=q,0===I&&d(Kb));da!==q?(Oa=u,I++,S=F(),I--,S===q?Oa=void 0:(u=
Oa,Oa=q),Oa!==q?L=da="DATE":(u=L,L=q)):(u=L,L=q);X=L;X!==q?(rb=N(),rb!==q?(M=J(),M!==q?R=X={type:"date",value:M.value}:(u=R,R=q)):(u=R,R=q)):(u=R,R=q);l=R;if(l===q){var P,ac,aa,ca;P=u;var gb,ga,fa,la;gb=u;a.substr(u,9).toLowerCase()===Na?(ga=a.substr(u,9),u+=9):(ga=q,0===I&&d(kb));ga!==q?(fa=u,I++,la=F(),I--,la===q?fa=void 0:(u=fa,fa=q),fa!==q?gb=ga="TIMESTAMP":(u=gb,gb=q)):(u=gb,gb=q);ac=gb;ac!==q?(aa=N(),aa!==q?(ca=J(),ca!==q?P=ac={type:"timestamp",value:ca.value}:(u=P,P=q)):(u=P,P=q)):(u=P,P=q);
l=P}}}}}b=l;if(b===q){var ra,Za,Xa,ib,sa,zb,bc,ua,wa,za,Ja,ab;ra=u;var Ka,ya,pb,Fa;Ka=u;a.substr(u,7).toLowerCase()===pc?(ya=a.substr(u,7),u+=7):(ya=q,0===I&&d(Xc));ya!==q?(pb=u,I++,Fa=F(),I--,Fa===q?pb=void 0:(u=pb,pb=q),pb!==q?Ka=ya="EXTRACT":(u=Ka,Ka=q)):(u=Ka,Ka=q);Za=Ka;if(Za!==q)if(Xa=N(),Xa!==q)if(ib=Ha(),ib!==q)if(sa=N(),sa!==q){var Ca,Ba,Wa,Ea,Pa;Ba=u;a.substr(u,4).toLowerCase()===kd?(Wa=a.substr(u,4),u+=4):(Wa=q,0===I&&d(Dd));Wa!==q?(Ea=u,I++,Pa=F(),I--,Pa===q?Ea=void 0:(u=Ea,Ea=q),Ea!==
q?Ba=Wa="YEAR":(u=Ba,Ba=q)):(u=Ba,Ba=q);Ca=Ba;if(Ca===q){var mb,jb,Qa,Ua;mb=u;a.substr(u,5).toLowerCase()===jd?(jb=a.substr(u,5),u+=5):(jb=q,0===I&&d(Ma));jb!==q?(Qa=u,I++,Ua=F(),I--,Ua===q?Qa=void 0:(u=Qa,Qa=q),Qa!==q?mb=jb="MONTH":(u=mb,mb=q)):(u=mb,mb=q);Ca=mb;if(Ca===q){var La,Sa,Va,lb;La=u;a.substr(u,3).toLowerCase()===jc?(Sa=a.substr(u,3),u+=3):(Sa=q,0===I&&d(ic));Sa!==q?(Va=u,I++,lb=F(),I--,lb===q?Va=void 0:(u=Va,Va=q),Va!==q?La=Sa="DAY":(u=La,La=q)):(u=La,La=q);Ca=La;if(Ca===q){var Ta,eb,
cb,tb;Ta=u;a.substr(u,4).toLowerCase()===wd?(eb=a.substr(u,4),u+=4):(eb=q,0===I&&d(xd));eb!==q?(cb=u,I++,tb=F(),I--,tb===q?cb=void 0:(u=cb,cb=q),cb!==q?Ta=eb="HOUR":(u=Ta,Ta=q)):(u=Ta,Ta=q);Ca=Ta;if(Ca===q){var $a,nb,hb,Db;$a=u;a.substr(u,6).toLowerCase()===yd?(nb=a.substr(u,6),u+=6):(nb=q,0===I&&d(zc));nb!==q?(hb=u,I++,Db=F(),I--,Db===q?hb=void 0:(u=hb,hb=q),hb!==q?$a=nb="MINUTE":(u=$a,$a=q)):(u=$a,$a=q);Ca=$a;if(Ca===q){var db,sb,ob,Jb;db=u;a.substr(u,6).toLowerCase()===Yc?(sb=a.substr(u,6),u+=
6):(sb=q,0===I&&d(zd));sb!==q?(ob=u,I++,Jb=F(),I--,Jb===q?ob=void 0:(u=ob,ob=q),ob!==q?db=sb="SECOND":(u=db,db=q)):(u=db,db=q);Ca=db}}}}}zb=Ca;zb!==q?(bc=N(),bc!==q?(ua=ma(),ua!==q?(wa=N(),wa!==q?(za=g(),za!==q?(Ja=N(),Ja!==q?(ab=Ia(),ab!==q?ra=Za={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:zb},za]}}:(u=ra,ra=q)):(u=ra,ra=q)):(u=ra,ra=q)):(u=ra,ra=q)):(u=ra,ra=q)):(u=ra,ra=q)):(u=ra,ra=q)}else u=ra,ra=q;else u=ra,ra=q;else u=ra,ra=q;else u=ra,ra=q;b=ra;if(b===
q){var Da,Gb,Tb,Vb,Wb,Cb,Zb,$b,cc,Fb,dc,fb,Oc,Ub,Xb,Yb;Da=u;var uc,Lb,Zc,nc;uc=u;a.substr(u,9).toLowerCase()===Cd?(Lb=a.substr(u,9),u+=9):(Lb=q,0===I&&d(Hc));Lb!==q?(Zc=u,I++,nc=F(),I--,nc===q?Zc=void 0:(u=Zc,Zc=q),Zc!==q?uc=Lb="SUBSTRING":(u=uc,uc=q)):(u=uc,uc=q);Gb=uc;if(Gb!==q)if(Tb=N(),Tb!==q)if(Vb=Ha(),Vb!==q)if(Wb=N(),Wb!==q)if(Cb=g(),Cb!==q)if(Zb=N(),Zb!==q)if($b=ma(),$b!==q)if(cc=N(),cc!==q)if(Fb=g(),Fb!==q)if(dc=N(),dc!==q){fb=u;var vc,Mb,$c,oc;vc=u;a.substr(u,3).toLowerCase()===Bd?(Mb=a.substr(u,
3),u+=3):(Mb=q,0===I&&d(Gc));Mb!==q?($c=u,I++,oc=F(),I--,oc===q?$c=void 0:(u=$c,$c=q),$c!==q?vc=Mb="FOR":(u=vc,vc=q)):(u=vc,vc=q);Oc=vc;Oc!==q?(Ub=N(),Ub!==q?(Xb=g(),Xb!==q?(Yb=N(),Yb!==q?fb=Oc=[Oc,Ub,Xb,Yb]:(u=fb,fb=q)):(u=fb,fb=q)):(u=fb,fb=q)):(u=fb,fb=q);fb===q&&(fb=null);fb!==q?(Oc=Ia(),Oc!==q?Da=Gb={type:"function",name:"substring",args:{type:"expr_list",value:fb?[Cb,Fb,fb[2]]:[Cb,Fb]}}:(u=Da,Da=q)):(u=Da,Da=q)}else u=Da,Da=q;else u=Da,Da=q;else u=Da,Da=q;else u=Da,Da=q;else u=Da,Da=q;else u=
Da,Da=q;else u=Da,Da=q;else u=Da,Da=q;else u=Da,Da=q;else u=Da,Da=q;b=Da;if(b===q){var ka,Pc,Nb,Ob,Pb,vb,Qb,Qc,Rb,Sb,qc,ec,sc,tc;ka=u;Pc=ja();Pc!==q?(Nb=N(),Nb!==q?(Ob=Ha(),Ob!==q?(Pb=N(),Pb!==q?(vb=E(),vb===q&&(vb=null),vb!==q?(Qb=N(),Qb!==q?(Qc=g(),Qc!==q?(Rb=N(),Rb!==q?(Sb=ma(),Sb!==q?(qc=N(),qc!==q?(ec=g(),ec!==q?(sc=N(),sc!==q?(tc=Ia(),tc!==q?ka=Pc={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==vb?"BOTH":vb},Qc,ec]}}:(u=ka,ka=q)):(u=ka,ka=q)):(u=ka,ka=q)):
(u=ka,ka=q)):(u=ka,ka=q)):(u=ka,ka=q)):(u=ka,ka=q)):(u=ka,ka=q)):(u=ka,ka=q)):(u=ka,ka=q)):(u=ka,ka=q)):(u=ka,ka=q)):(u=ka,ka=q);ka===q&&(ka=u,Pc=ja(),Pc!==q?(Nb=N(),Nb!==q?(Ob=Ha(),Ob!==q?(Pb=N(),Pb!==q?(vb=E(),vb===q&&(vb=null),vb!==q?(Qb=N(),Qb!==q?(Qc=g(),Qc!==q?(Rb=N(),Rb!==q?(Sb=Ia(),Sb!==q?ka=Pc={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==vb?"BOTH":vb},Qc]}}:(u=ka,ka=q)):(u=ka,ka=q)):(u=ka,ka=q)):(u=ka,ka=q)):(u=ka,ka=q)):(u=ka,ka=q)):(u=ka,ka=q)):
(u=ka,ka=q)):(u=ka,ka=q));b=ka;if(b===q){var Ga,kc,yc,Ac,Bc,lc,Cc,Dc,Ec,rc,Ic,Jc;Ga=u;var wc,od,ad,Kc;wc=u;a.substr(u,8).toLowerCase()===Ab?(od=a.substr(u,8),u+=8):(od=q,0===I&&d(qb));od!==q?(ad=u,I++,Kc=F(),I--,Kc===q?ad=void 0:(u=ad,ad=q),ad!==q?wc=od="POSITION":(u=wc,wc=q)):(u=wc,wc=q);kc=wc;kc!==q?(yc=N(),yc!==q?(Ac=Ha(),Ac!==q?(Bc=N(),Bc!==q?(lc=g(),lc!==q?(Cc=N(),Cc!==q?(Dc=Z(),Dc!==q?(Ec=N(),Ec!==q?(rc=g(),rc!==q?(Ic=N(),Ic!==q?(Jc=Ia(),Jc!==q?Ga=kc={type:"function",name:"position",args:{type:"expr_list",
value:[lc,rc]}}:(u=Ga,Ga=q)):(u=Ga,Ga=q)):(u=Ga,Ga=q)):(u=Ga,Ga=q)):(u=Ga,Ga=q)):(u=Ga,Ga=q)):(u=Ga,Ga=q)):(u=Ga,Ga=q)):(u=Ga,Ga=q)):(u=Ga,Ga=q)):(u=Ga,Ga=q);b=Ga;if(b===q){var Ya,pd,Lc,Mc,Nc,Rc,Fd,Gd;Ya=u;var wb,bd,cd,Ib;wb=u;wb=bd=B();if(wb===q)if(wb=u,96===a.charCodeAt(u)?(bd=ub,u++):(bd=q,0===I&&d(ld)),bd!==q){cd=[];md.test(a.charAt(u))?(Ib=a.charAt(u),u++):(Ib=q,0===I&&d(nd));if(Ib!==q)for(;Ib!==q;)cd.push(Ib),md.test(a.charAt(u))?(Ib=a.charAt(u),u++):(Ib=q,0===I&&d(nd));else cd=q;cd!==q?(96===
a.charCodeAt(u)?(Ib=ub,u++):(Ib=q,0===I&&d(ld)),Ib!==q?wb=bd=cd.join(""):(u=wb,wb=q)):(u=wb,wb=q)}else u=wb,wb=q;pd=wb;pd!==q?(Lc=N(),Lc!==q?(Mc=Ha(),Mc!==q?(Nc=N(),Nc!==q?(Rc=m(),Rc===q&&(Rc=null),Rc!==q?(Fd=N(),Fd!==q?(Gd=Ia(),Gd!==q?Ya=pd={type:"function",name:pd,args:Rc?Rc:{type:"expr_list",value:[]}}:(u=Ya,Ya=q)):(u=Ya,Ya=q)):(u=Ya,Ya=q)):(u=Ya,Ya=q)):(u=Ya,Ya=q)):(u=Ya,Ya=q)):(u=Ya,Ya=q);b=Ya;if(b===q){var qd,ta,Sc,rd,Tc,sd,gc,xb,dd,Hd,Id;ta=u;Sc=oa();if(Sc!==q)if(rd=N(),rd!==q)if(Tc=g(),Tc!==
q)if(sd=N(),sd!==q){gc=[];for(xb=ba();xb!==q;)gc.push(xb),xb=ba();gc!==q?(xb=N(),xb!==q?(dd=ia(),dd!==q?ta=Sc={type:"case_expression",format:"simple",operand:Tc,clauses:gc,else:null}:(u=ta,ta=q)):(u=ta,ta=q)):(u=ta,ta=q)}else u=ta,ta=q;else u=ta,ta=q;else u=ta,ta=q;else u=ta,ta=q;if(ta===q)if(ta=u,Sc=oa(),Sc!==q)if(rd=N(),rd!==q)if(Tc=g(),Tc!==q)if(sd=N(),sd!==q){gc=[];for(xb=ba();xb!==q;)gc.push(xb),xb=ba();gc!==q?(xb=N(),xb!==q?(dd=Q(),dd!==q?(Hd=N(),Hd!==q?(Id=ia(),Id!==q?ta=Sc={type:"case_expression",
format:"simple",operand:Tc,clauses:gc,else:dd.value}:(u=ta,ta=q)):(u=ta,ta=q)):(u=ta,ta=q)):(u=ta,ta=q)):(u=ta,ta=q)}else u=ta,ta=q;else u=ta,ta=q;else u=ta,ta=q;else u=ta,ta=q;qd=ta;if(qd===q){var Aa,Uc,td,hc,yb,ed,Jd,Kd;Aa=u;Uc=oa();if(Uc!==q)if(td=N(),td!==q){hc=[];for(yb=ea();yb!==q;)hc.push(yb),yb=ea();hc!==q?(yb=N(),yb!==q?(ed=ia(),ed!==q?Aa=Uc={type:"case_expression",format:"searched",clauses:hc,else:null}:(u=Aa,Aa=q)):(u=Aa,Aa=q)):(u=Aa,Aa=q)}else u=Aa,Aa=q;else u=Aa,Aa=q;if(Aa===q)if(Aa=
u,Uc=oa(),Uc!==q)if(td=N(),td!==q){hc=[];for(yb=ea();yb!==q;)hc.push(yb),yb=ea();hc!==q?(yb=N(),yb!==q?(ed=Q(),ed!==q?(Jd=N(),Jd!==q?(Kd=ia(),Kd!==q?Aa=Uc={type:"case_expression",format:"searched",clauses:hc,else:ed.value}:(u=Aa,Aa=q)):(u=Aa,Aa=q)):(u=Aa,Aa=q)):(u=Aa,Aa=q)):(u=Aa,Aa=q)}else u=Aa,Aa=q;else u=Aa,Aa=q;qd=Aa}b=qd;if(b===q){var fd,xc,Ed,ud,vd;xc=u;Ed=C();if(Ed!==q){ud=[];for(vd=D();vd!==q;)ud.push(vd),vd=D();ud!==q?xc=Ed+=ud.join(""):(u=xc,xc=q)}else u=xc,xc=q;fd=xc;fd!==q&&(fd={type:"column_ref",
table:"",column:fd});b=fd;b===q&&(b=H(),b===q&&(b=u,c=Ha(),c!==q?(e=N(),e!==q?(f=g(),f!==q?(k=N(),k!==q?(h=Ia(),h!==q?(f.paren=!0,b=c=f):(u=b,b=q)):(u=b,b=q)):(u=b,b=q)):(u=b,b=q)):(u=b,b=q)))}}}}}}}return b}function B(){var a,b,c,d;a=u;b=C();if(b!==q){c=[];for(d=F();d!==q;)c.push(d),d=F();c!==q?a=b+=c.join(""):(u=a,a=q)}else u=a,a=q;return a}function C(){var b;ca.test(a.charAt(u))?(b=a.charAt(u),u++):(b=q,0===I&&d(L));return b}function F(){var b;Eb.test(a.charAt(u))?(b=a.charAt(u),u++):(b=q,0===
I&&d(Ra));return b}function D(){var b;bb.test(a.charAt(u))?(b=a.charAt(u),u++):(b=q,0===I&&d(mc));return b}function H(){var b,c,e;b=u;64===a.charCodeAt(u)?(c=rb,u++):(c=q,0===I&&d(ac));c!==q?(e=B(),e!==q?b=c=[c,e]:(u=b,b=q)):(u=b,b=q);b!==q&&(b={type:"param",value:b[1]});return b}function E(){var b,c,e;b=u;a.substr(u,7).toLowerCase()===kc?(c=a.substr(u,7),u+=7):(c=q,0===I&&d(yc));c!==q?(c=u,I++,e=F(),I--,e===q?c=void 0:(u=c,c=q),c!==q?b="LEADING":(u=b,b=q)):(u=b,b=q);b===q&&(b=u,a.substr(u,8).toLowerCase()===
qc?(c=a.substr(u,8),u+=8):(c=q,0===I&&d(Fa)),c!==q?(c=u,I++,e=F(),I--,e===q?c=void 0:(u=c,c=q),c!==q?b="TRAILING":(u=b,b=q)):(u=b,b=q),b===q&&(b=u,a.substr(u,4).toLowerCase()===ec?(c=a.substr(u,4),u+=4):(c=q,0===I&&d(Lb)),c!==q?(c=u,I++,e=F(),I--,e===q?c=void 0:(u=c,c=q),c!==q?b="BOTH":(u=b,b=q)):(u=b,b=q)));return b}function J(){var a;a=ha();a===q&&(a=H());return a}function ha(){var b,c,e;b=u;39===a.charCodeAt(u)?(c=gb,u++):(c=q,0===I&&d(bc));c===q&&(a.substr(u,2)===mb?(c=mb,u+=2):(c=q,0===I&&d(nb)));
if(c!==q){c=[];e=u;a.substr(u,2)===sb?(e=sb,u+=2):(e=q,0===I&&d(nc));e!==q&&(e="'");e===q&&(cc.test(a.charAt(u))?(e=a.charAt(u),u++):(e=q,0===I&&d(ob)));for(;e!==q;)c.push(e),e=u,a.substr(u,2)===sb?(e=sb,u+=2):(e=q,0===I&&d(nc)),e!==q&&(e="'"),e===q&&(cc.test(a.charAt(u))?(e=a.charAt(u),u++):(e=q,0===I&&d(ob)));c!==q?(39===a.charCodeAt(u)?(e=gb,u++):(e=q,0===I&&d(bc)),e!==q?b=c={type:"string",value:c.join("")}:(u=b,b=q)):(u=b,b=q)}else u=b,b=q;return b}function ea(){var a,b,c;a=u;b=qa();b!==q?(b=
N(),b!==q?(b=g(),b!==q?(c=N(),c!==q?(c=pa(),c!==q?(c=N(),c!==q?(c=g(),c!==q?a=b={type:"when_clause",operand:b,value:c}:(u=a,a=q)):(u=a,a=q)):(u=a,a=q)):(u=a,a=q)):(u=a,a=q)):(u=a,a=q)):(u=a,a=q);return a}function ba(){var a,b,c;a=u;b=qa();b!==q?(b=N(),b!==q?(b=g(),b!==q?(c=N(),c!==q?(c=pa(),c!==q?(c=N(),c!==q?(c=g(),c!==q?a=b={type:"when_clause",operand:b,value:c}:(u=a,a=q)):(u=a,a=q)):(u=a,a=q)):(u=a,a=q)):(u=a,a=q)):(u=a,a=q)):(u=a,a=q);return a}function Q(){var b,c;b=u;var e,f;c=u;a.substr(u,4).toLowerCase()===
Jc?(e=a.substr(u,4),u+=4):(e=q,0===I&&d(Kc));e!==q?(e=u,I++,f=F(),I--,f===q?e=void 0:(u=e,e=q),e!==q?c="ELSE":(u=c,c=q)):(u=c,c=q);c!==q?(c=N(),c!==q?(c=g(),c!==q?b={type:"else_clause",value:c}:(u=b,b=q)):(u=b,b=q)):(u=b,b=q);return b}function Y(){var b,c,e;b=T();b===q&&(b=u,45===a.charCodeAt(u)?(c=wa,u++):(c=q,0===I&&d(G)),c===q&&(43===a.charCodeAt(u)?(c=cb,u++):(c=q,0===I&&d(M))),c!==q?(e=T(),e!==q?b=c=c[0]+e:(u=b,b=q)):(u=b,b=q));return b}function V(){var b,c;b=u;46===a.charCodeAt(u)?(c=Mb,u++):
(c=q,0===I&&d(Fb));c!==q?(c=T(),c===q&&(c=null),c!==q?b="."+(null!=c?c:""):(u=b,b=q)):(u=b,b=q);return b}function na(){var b,c,e;c=b=u;Ta.test(a.charAt(u))?(e=a.charAt(u),u++):(e=q,0===I&&d(tb));e!==q?(Ec.test(a.charAt(u))?(e=a.charAt(u),u++):(e=q,0===I&&d(hb)),e===q&&(e=null),e!==q?c="e"+(null===e?"":e):(u=c,c=q)):(u=c,c=q);c!==q?(e=T(),e!==q?b=c+e:(u=b,b=q)):(u=b,b=q);return b}function T(){var a,b;a=[];b=K();if(b!==q)for(;b!==q;)a.push(b),b=K();else a=q;a!==q&&(a=a.join(""));return a}function K(){var b;
oc.test(a.charAt(u))?(b=a.charAt(u),u++):(b=q,0===I&&d(Nb));return b}function Z(){var b,c,e;b=u;a.substr(u,2).toLowerCase()===Ob?(c=a.substr(u,2),u+=2):(c=q,0===I&&d(Db));c!==q?(c=u,I++,e=F(),I--,e===q?c=void 0:(u=c,c=q),c!==q?b="IN":(u=b,b=q)):(u=b,b=q);return b}function O(){var b,c,e;b=u;a.substr(u,2).toLowerCase()===Ea?(c=a.substr(u,2),u+=2):(c=q,0===I&&d(Yb));c!==q?(c=u,I++,e=F(),I--,e===q?c=void 0:(u=c,c=q),c!==q?b="IS":(u=b,b=q)):(u=b,b=q);return b}function W(){var b,c,e;b=u;a.substr(u,4).toLowerCase()===
Jb?(c=a.substr(u,4),u+=4):(c=q,0===I&&d(Zb));c!==q?(c=u,I++,e=F(),I--,e===q?c=void 0:(u=c,c=q),c!==q?b="LIKE":(u=b,b=q)):(u=b,b=q);return b}function R(){var b,c,e;b=u;a.substr(u,3).toLowerCase()===Ua?(c=a.substr(u,3),u+=3):(c=q,0===I&&d(Qb));c!==q?(c=u,I++,e=F(),I--,e===q?c=void 0:(u=c,c=q),c!==q?b="NOT":(u=b,b=q)):(u=b,b=q);return b}function da(){var b,c,e;b=u;a.substr(u,3).toLowerCase()===dc?(c=a.substr(u,3),u+=3):(c=q,0===I&&d(Gb));c!==q?(c=u,I++,e=F(),I--,e===q?c=void 0:(u=c,c=q),c!==q?b="AND":
(u=b,b=q)):(u=b,b=q);return b}function X(){var b,c,e;b=u;a.substr(u,2).toLowerCase()===ya?(c=a.substr(u,2),u+=2):(c=q,0===I&&d(Rb));c!==q?(c=u,I++,e=F(),I--,e===q?c=void 0:(u=c,c=q),c!==q?b="OR":(u=b,b=q)):(u=b,b=q);return b}function U(){var b,c,e;b=u;a.substr(u,7).toLowerCase()===Sb?(c=a.substr(u,7),u+=7):(c=q,0===I&&d(Tb));c!==q?(c=u,I++,e=F(),I--,e===q?c=void 0:(u=c,c=q),c!==q?b="BETWEEN":(u=b,b=q)):(u=b,b=q);return b}function ma(){var b,c,e;b=u;a.substr(u,4).toLowerCase()===Ub?(c=a.substr(u,4),
u+=4):(c=q,0===I&&d(Vb));c!==q?(c=u,I++,e=F(),I--,e===q?c=void 0:(u=c,c=q),c!==q?b="FROM":(u=b,b=q)):(u=b,b=q);return b}function ja(){var b,c,e;b=u;a.substr(u,4).toLowerCase()===$b?(c=a.substr(u,4),u+=4):(c=q,0===I&&d(Sa));c!==q?(c=u,I++,e=F(),I--,e===q?c=void 0:(u=c,c=q),c!==q?b="TRIM":(u=b,b=q)):(u=b,b=q);return b}function oa(){var b,c,e;b=u;a.substr(u,4).toLowerCase()===Ac?(c=a.substr(u,4),u+=4):(c=q,0===I&&d(Bc));c!==q?(c=u,I++,e=F(),I--,e===q?c=void 0:(u=c,c=q),c!==q?b="CASE":(u=b,b=q)):(u=b,
b=q);return b}function ia(){var b,c,e;b=u;a.substr(u,3).toLowerCase()===rc?(c=a.substr(u,3),u+=3):(c=q,0===I&&d(Ic));c!==q?(c=u,I++,e=F(),I--,e===q?c=void 0:(u=c,c=q),c!==q?b="END":(u=b,b=q)):(u=b,b=q);return b}function qa(){var b,c,e;b=u;a.substr(u,4).toLowerCase()===db?(c=a.substr(u,4),u+=4):(c=q,0===I&&d(lc));c!==q?(c=u,I++,e=F(),I--,e===q?c=void 0:(u=c,c=q),c!==q?b="WHEN":(u=b,b=q)):(u=b,b=q);return b}function pa(){var b,c,e;b=u;a.substr(u,4).toLowerCase()===Cc?(c=a.substr(u,4),u+=4):(c=q,0===
I&&d(Dc));c!==q?(c=u,I++,e=F(),I--,e===q?c=void 0:(u=c,c=q),c!==q?b="THEN":(u=b,b=q)):(u=b,b=q);return b}function va(){var b;44===a.charCodeAt(u)?(b=sc,u++):(b=q,0===I&&d(tc));return b}function Ha(){var b;40===a.charCodeAt(u)?(b=Lc,u++):(b=q,0===I&&d(Mc));return b}function Ia(){var b;41===a.charCodeAt(u)?(b=eb,u++):(b=q,0===I&&d(Nc));return b}function N(){var a,b;a=[];for(b=ra();b!==q;)a.push(b),b=ra();return a}function ra(){var b;P.test(a.charAt(u))?(b=a.charAt(u),u++):(b=q,0===I&&d(za));return b}
function Za(a,b,c,d){a={type:"binary_expr",operator:a,left:b,right:c};void 0!==d&&(a.escape=d);return a}function Wa(a,b){for(var c=0;c<b.length;c++)a=Za(b[c][1],a,b[c][3]);return a}f=void 0!==f?f:{};var q={},Ja={start:k},ab=k,pb="!",zb=c("!",!1),Oa="\x3d",Xa=c("\x3d",!1),ib="\x3e\x3d",Ka=c("\x3e\x3d",!1),jb="\x3e",Ca=c("\x3e",!1),Qa="\x3c\x3d",S=c("\x3c\x3d",!1),Pa="\x3c\x3e",Ba=c("\x3c\x3e",!1),ga="\x3c",lb=c("\x3c",!1),La="!\x3d",sa=c("!\x3d",!1),cb="+",M=c("+",!1),wa="-",G=c("-",!1),fa="*",la=
c("*",!1),ua="/",aa=c("/",!1),ca=/^[A-Za-z_\x80-\uFFFF]/,L=e([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Eb=/^[A-Za-z0-9_]/,Ra=e([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),bb=/^[A-Za-z0-9_.\x80-\uFFFF]/,mc=e([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),rb="@",ac=c("@",!1),gb="'",bc=c("'",!1),mb="N'",nb=c("N'",!1),sb="''",nc=c("''",!1),cc=/^[^']/,ob=e(["'"],!0,!1),Mb=".",Fb=c(".",!1),oc=/^[0-9]/,Nb=e([["0","9"]],!1,!1),Ta=/^[eE]/,tb=e(["e","E"],!1,!1),Ec=/^[+\-]/,hb=
e(["+","-"],!1,!1),Fc="null",gd=c("NULL",!0),hd="true",Vc=c("TRUE",!0),Wc="false",id=c("FALSE",!0),Ob="in",Db=c("IN",!0),Ea="is",Yb=c("IS",!0),Jb="like",Zb=c("LIKE",!0),$a="escape",Pb=c("ESCAPE",!0),Ua="not",Qb=c("NOT",!0),dc="and",Gb=c("AND",!0),ya="or",Rb=c("OR",!0),Sb="between",Tb=c("BETWEEN",!0),Ub="from",Vb=c("FROM",!0),Bd="for",Gc=c("FOR",!0),Cd="substring",Hc=c("SUBSTRING",!0),pc="extract",Xc=c("EXTRACT",!0),$b="trim",Sa=c("TRIM",!0),Ab="position",qb=c("POSITION",!0),Na="timestamp",kb=c("TIMESTAMP",
!0),Bb="date",Kb=c("DATE",!0),kc="leading",yc=c("LEADING",!0),qc="trailing",Fa=c("TRAILING",!0),ec="both",Lb=c("BOTH",!0),kd="year",Dd=c("YEAR",!0),jd="month",Ma=c("MONTH",!0),jc="day",ic=c("DAY",!0),wd="hour",xd=c("HOUR",!0),yd="minute",zc=c("MINUTE",!0),Yc="second",zd=c("SECOND",!0),Ac="case",Bc=c("CASE",!0),rc="end",Ic=c("END",!0),db="when",lc=c("WHEN",!0),Cc="then",Dc=c("THEN",!0),Jc="else",Kc=c("ELSE",!0),sc=",",tc=c(",",!1),Lc="(",Mc=c("(",!1),eb=")",Nc=c(")",!1),P=/^[ \t\n\r]/,za=e([" ","\t",
"\n","\r"],!1,!1),ub="`",ld=c("`",!1),md=/^[^`]/,nd=e(["`"],!0,!1),u=0,Wb=[{line:1,column:1}],Va=0,Xb=[],I=0,Cb;if("startRule"in f){if(!(f.startRule in Ja))throw Error("Can't start parsing from rule \""+f.startRule+'".');ab=Ja[f.startRule]}Cb=ab();if(Cb!==q&&u===a.length)return Cb;Cb!==q&&u<a.length&&d({type:"end"});throw function(a,c,d){return new b(b.buildMessage(a,c),a,c,d)}(Xb,Va<a.length?a.charAt(Va):null,Va<a.length?h(Va,Va+1):h(Va,Va));}}})},"esri/layers/graphics/data/FeatureStoreCapabilities":function(){define(["require",
"exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.queryCapabilities={supportsStatistics:!0,supportsCentroid:!1,supportsDistance:!0,supportsDistinct:!1,supportsExtent:!0,supportsGeometryProperties:!1,supportsOrderBy:!1,supportsPagination:!0,supportsQuantization:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!1,supportsHistoricMoment:!1}})},"esri/layers/graphics/data/FeatureStoreItem":function(){define(["require",
"exports","@dojo/shim/iterator","./FeatureSetReader"],function(b,a,f,c){Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function a(a,b){this.reader=a;this.oid=b;this.count=1;this.bounds=void 0}a.prototype.getBounds=function(){void 0===this.bounds&&(this.bounds=this.reader.getBounds(this.oid));return this.bounds};a.prototype.getCentroid=function(){return this.reader.getCentroid(this.oid)};a.prototype.getCentroidQuantized=function(a,b,c){return this.reader.getCentroidQuantized(this.oid,
a,b,c)};a.prototype.getGeometry=function(){return this.reader.getGeometry(this.oid)};a.prototype.getGeometryQuantized=function(a,b,c){return this.reader.getGeometryQuantized(this.oid,a,b,c)};a.prototype.getAttributes=function(){return this.reader.getAttributes(this.oid)};return a}();a.default=e;a.createFromFeatureSet=function(a){var b=c.createFeatureSetReader(a),d=[];f.forOf(b.oids(),function(a){d.push(new e(b,a))});return d}})},"esri/layers/graphics/data/FeatureStoreResult":function(){define("require exports @dojo/shim/array @dojo/shim/Set ../../../core/promiseUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./FeatureStoreItem ./projectionSupport".split(" "),
function(b,a,f,c,e,l,h,d,k,m){function g(a){return a?JSON.parse(JSON.stringify(a,["latestWkid","wkid","wkt"])):a}Object.defineProperty(a,"__esModule",{value:!0});b=function(){function a(a,b){this.items=a;this.definitionExpression=b.definitionExpression;this.geometryType=b.geometryType;this.hasM=b.hasM;this.hasZ=b.hasZ;this.objectIdField=b.objectIdField;this.spatialReference=b.spatialReference;this.fieldsMap=b.fieldsMap}Object.defineProperty(a.prototype,"size",{get:function(){return this.items.length},
enumerable:!0,configurable:!0});a.prototype.createQueryResponse=function(a){return a.outStatistics?this._createStatisticsQueryResponse(a):this._createFeatureQueryResponse(a)};a.prototype.executeAttributesQuery=function(a){var b=d.getWhereClause(a.where);if(!b)return e.resolve(this);if(b.isStandardized()){for(var c=0,g=[],f=0,k=this.items;f<k.length;f++){var h=k[f];b.testFeature(h.getAttributes())&&(g[c++]=h)}b=this._createNew(g);b.definitionExpression=a.where;return e.resolve(b)}return e.reject(new TypeError("Where clause is not standardized"))};
a.prototype.executeObjectIdsQuery=function(a){if(!a.objectIds||!a.objectIds.length)return e.resolve(this);var b=new c.default(a.objectIds);return e.resolve(this._createNew(this.items.filter(function(a){return b.has(a.oid)})))};a.prototype.project=function(b){var c=this;return!b||h.equals(this.spatialReference,b)?e.resolve(this):m.projectMany(this.items.map(function(a){return a.getGeometry()}),this.spatialReference,b).then(function(d){for(var e=[],g=0;g<c.items.length;g++)e[g]={attributes:c.items[g].getAttributes(),
geometry:d[g]};d=k.createFromFeatureSet({fields:f.from(c.fieldsMap.values()),spatialReference:b,geometryType:c.geometryType,hasM:c.hasM,hasZ:c.hasZ,features:e,objectIdFieldName:c.objectIdField});return new a(d,{definitionExpression:c.definitionExpression,geometryType:c.geometryType,hasM:c.hasM,hasZ:c.hasZ,objectIdField:c.objectIdField,spatialReference:b,fieldsMap:c.fieldsMap})})};a.prototype._createFeatureQueryResponse=function(a){var b=this,c=this.items,d=this.geometryType,e=this.hasM,f=this.hasZ,
k=this.objectIdField,h=this.spatialReference,m=a.outFields,t=a.outSpatialReference,v=a.quantizationParameters,F=!1;if(null!=a.num&&null!=a.start)var D=a.start+a.num,F=c.length>D,c=c.slice(a.start,Math.min(c.length,D));return{exceededTransferLimit:F,features:this._createFeatures(a,c),fields:m&&m.map(function(a){return b.fieldsMap.get(a)}),geometryType:d,hasM:e,hasZ:f,objectIdFieldName:k,spatialReference:g(t?t.toJSON():h),transform:v&&l.toTransform(v)}};a.prototype._createFeatures=function(a,b){var c=
a.quantizationParameters,d=a.returnGeometry,e=a.returnCentroid;a=[];var g=0;if(d||e)if(c){var c=l.toTransform(c),f=l.getQuantizeX(c),k=l.getQuantizeY(c);if(d&&!e)for(e=0;e<b.length;e++)d=b[e],a[g++]={attributes:d.getAttributes(),geometry:d.getGeometryQuantized(c,f,k)};else if(!d&&e)for(e=0;e<b.length;e++)d=b[e],a[g++]={attributes:d.getAttributes(),centroid:d.getCentroidQuantized(c,f,k)};else for(e=0;e<b.length;e++)d=b[e],a[g++]={attributes:d.getAttributes(),centroid:d.getCentroidQuantized(c,f,k),
geometry:d.getGeometryQuantized(c,f,k)}}else if(d&&!e)for(c=0;c<b.length;c++)d=b[c],a[g++]={attributes:d.getAttributes(),geometry:d.getGeometry()};else if(!d&&e)for(c=0;c<b.length;c++)d=b[c],a[g++]={attributes:d.getAttributes(),centroid:d.getCentroid()};else for(c=0;c<b.length;c++)d=b[c],a[g++]={attributes:d.getAttributes(),centroid:d.getCentroid(),geometry:d.getGeometry()};else for(c=0;c<b.length;c++)d=b[c],a[g++]={attributes:d.getAttributes()};return a};a.prototype._createNew=function(b){return new a(b,
this)};a.prototype._createStatisticsQueryResponse=function(a){var b=a.outStatistics,c=[],d=[];if(a.groupByFieldsForStatistics&&a.groupByFieldsForStatistics.length)for(var e={},g=0;g<b.length;g++){var f=b[g];a=f.onStatisticField;var k=f.outStatisticFieldName,f=f.statisticType;if("count"===f){e[a]||(e[a]=this._calculateUniqueValues(a));var f=e[a],h;for(h in f){var l=f[h],m={attributes:{}};m.attributes[k]=l.count;m.attributes[a]=l.data;c.push(m)}d.push({name:k,alias:k,type:"esriFieldTypeString"})}}else{h=
{};e={attributes:{}};for(g=0;g<b.length;g++)f=b[g],a=f.onStatisticField,k=f.outStatisticFieldName,f=f.statisticType,h[a]||(h[a]=this._calculateStatistics(a)),e.attributes[k]=h[a]["var"===f?"variance":f],d.push({name:k,alias:k,type:"esriFieldTypeDouble"});c.push(e)}return{fields:d,features:c}};a.prototype._calculateStatistics=function(a){for(var b=this.items,c=b.length,d=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,g=null,f=null,k=null,h=null,l=[],m=0;m<c;m++)var t=l[m]=b[m].getAttributes()[a],
g=g+t,d=Math.min(d,t),e=Math.max(e,t);if(c){f=g/c;for(b=a=0;b<l.length;b++)t=l[b],a+=Math.pow(t-f,2);h=1<c?a/(c-1):0;k=Math.sqrt(h)}else e=d=null;return{avg:f,count:c,max:e,min:d,stddev:k,sum:g,variance:h}};a.prototype._calculateUniqueValues=function(a){for(var b={},c=0,d=this.items;c<d.length;c++){var e=d[c].getAttributes()[a];if(null==e||"string"===typeof e&&""===e.trim())e=null;null==b[e]?b[e]={count:1,data:e}:b[e].count++}return b};return a}();a.default=b})},"esri/layers/graphics/data/projectionSupport":function(){define("require exports ../../../core/Error ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(b,a,f,c,e,l,h){function d(a,b){if(!b)return null;if("x"in b){var c={x:0,y:0};a=a(b.x,b.y,g,0);c.x=a[0];c.y=a[1];null!=b.z&&(c.z=b.z);null!=b.m&&(c.m=b.m);return c}if("xmin"in b)return c={xmin:0,ymin:0,xmax:0,ymax:0},d=a(b.xmin,b.ymin,g,0),c.xmin=d[0],c.ymin=d[1],a=a(b.xmax,b.ymax,g,0),c.xmax=a[0],c.ymax=a[1],b.hasZ&&(c.zmin=b.zmin,c.zmax=b.zmax,c.hasZ=!0),b.hasM&&(c.mmin=b.mmin,c.mmax=b.mmax,c.hasM=!0),c;if("rings"in b)return{rings:k(b.rings,a),hasM:b.hasM,hasZ:b.hasZ};if("paths"in b)return{paths:k(b.paths,
a),hasM:b.hasM,hasZ:b.hasZ};if("points"in b)return{points:m(b.points,a),hasM:b.hasM,hasZ:b.hasZ};var d}function k(a,b){for(var c=[],d=0;d<a.length;d++)c.push(m(a[d],b));return c}function m(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],g=b(e[0],e[1],[0,0],0);c.push(g);2<e.length&&g.push(e[2]);3<e.length&&g.push(e[3])}return c}Object.defineProperty(a,"__esModule",{value:!0});var g=[0,0];a.checkProjectionSupport=function(a,b,d){return!b||!d||l.equals(b,d)||h.canProject(b,d)?c.resolve():e.isSupported()?
e.load():c.reject(new f("feature-store:unsupported-query","projection not supported",{query:a}))};var t=d.bind(null,h.lngLatToXY),v=d.bind(null,h.xyToLngLat);a.project=function(a,b,c){return b&&c&&!l.equals(b,c)?h.canProject(b,c)?l.isWebMercator(c)?t(a):v(a):e.projectMany([a],b,c,null,!0)[0]:a};var w=new (function(){function a(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}a.prototype.push=function(a,b,d){var e=this;a&&a.length&&b&&d&&!l.equals(b,d)||c.resolve(a);var g={geometries:a,
inSpatialReference:b,outSpatialReference:d,resolve:null};this._jobs.push(g);return c.create(function(a){g.resolve=a;null===e._timer&&(e._timer=setTimeout(e._process,10))},function(){var a=e._jobs.indexOf(g);-1<a&&e._jobs.splice(a,1)})};a.prototype._process=function(){this._timer=null;var a=this._jobs.shift();if(a){var b=a.geometries,c=a.inSpatialReference,d=a.outSpatialReference,a=a.resolve;h.canProject(c,d)?l.isWebMercator(d)?a(b.map(t)):a(b.map(v)):a(e.projectMany(b,c,d,null,!0));0<this._jobs.length&&
(this._timer=setTimeout(this._process,10))}};return a}());a.projectMany=function(a,b,c){return w.push(a,b,c)}})},"esri/layers/graphics/data/SpatialQueryCache":function(){define(["require","exports","@dojo/shim/iterator","../../../core/LRUMap"],function(b,a,f,c){Object.defineProperty(a,"__esModule",{value:!0});var e=function(){return function(a,b,c){this.cache=a;this.key=b;this.result=c}}(),l=new c(2E6,{disposeFunction:function(a,b){b.cache.has(b.key)&&b.cache.delete(b.key)},sizeOfFunction:function(a){return a.result.size}});
b=function(){function a(){this._id=a.id_gen++ +"$$";this._keys=new Set}Object.defineProperty(a.prototype,"size",{get:function(){return this._keys.size},enumerable:!0,configurable:!0});a.prototype.clear=function(){var a=this;0!==this._keys.size&&(f.forOf(this._keys,function(b){l.delete(a._getGlobalKey(b))}),this._keys.clear())};a.prototype.delete=function(a){this._keys.delete(a);return l.delete(this._getGlobalKey(a))};a.prototype.get=function(a){return(a=l.get(this._getGlobalKey(a)))&&a.result};a.prototype.has=
function(a){return l.has(this._getGlobalKey(a))};a.prototype.set=function(a,b){this._keys.add(a);l.set(this._getGlobalKey(a),new e(this,a,b));return this};a.prototype._getGlobalKey=function(a){return this._id+a};a.id_gen=0;return a}();a.default=b})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../core/promiseUtils ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/webMercatorUtils".split(" "),
function(b,a,f,c,e,l,h){function d(){return c.create(function(a){return b(["../../../geometry/geometryEngine"],a)})}Object.defineProperty(a,"__esModule",{value:!0});var k={intersects:!0,contains:!0,within:!0,crosses:!0,touches:!0,overlaps:!0,"envelope-intersects":!0},m={point:!0,multipoint:!0,polyline:!0,polygon:!0,extent:!0},g={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0};a.importGeometryEngine=d;a.getGeodesicBufferOperator=function(){return d().then(function(a){return a.geodesicBuffer})};
a.getBufferOperator=function(){return d().then(function(a){return a.buffer})};a.getSpatialQueryOperator=function(a,b,g){if("intersects"===a){if("polygon"===b.type&&"esriGeometryPoint"===g)return c.resolve(e.polygonContainsPoint.bind(null,b.toJSON()));if("extent"===b.type)return c.resolve(l.getExtentIntersector(g).bind(null,b))}return d().then(function(c){return c[a].bind(null,b.toJSON())})};a.checkSpatialQuerySupport=function(a,b,d){var e=a.geometry;return e?!0!==k[a.spatialRelationship]?c.reject(new f("feature-store:unsupported-query",
"Unsupported query spatial relationship",{query:a})):!0!==m[e.type]?c.reject(new f("feature-store:unsupported-query","Unsupported query geometry type",{query:a})):!0!==g[b]?c.reject(new f("feature-store:unsupported-query","Unsupported layer geometry type",{query:a})):h.canProject(e.spatialReference,d)?c.resolve():c.reject(new f("feature-store:unsupported-query","Unsupported geometry spatialReference",{query:a})):null};a.canQueryWithRBush=function(a){switch(a.type){case "extent":return!0;case "polygon":return a.rings.every(function(a){return 5!==
a.length?!1:a[0][0]===a[1][0]&&a[0][0]===a[4][0]&&a[2][0]===a[3][0]&&a[0][1]===a[3][1]&&a[0][1]===a[4][1]&&a[1][1]===a[2][1]});default:return!1}}})},"esri/tasks/support/Query":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils ../../geometry/support/typeUtils ../../symbols/support/jsonUtils ../../symbols/support/typeUtils ./QuantizationParameters ./StatisticDefinition".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v,w,y,r){var z=d({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),x=d({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",
esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return function(a){function b(b){b=a.call(this,b)||this;b.datumTransformation=null;b.distance=void 0;b.gdbVersion=null;b.geometry=null;b.geometryPrecision=void 0;b.groupByFieldsForStatistics=null;b.historicMoment=null;b.maxAllowableOffset=void 0;b.maxRecordCountFactor=1;b.multipatchOption=null;b.num=void 0;b.objectIds=null;b.orderByFields=null;b.outFields=null;b.outSpatialReference=null;b.outStatistics=null;b.parameterValues=
null;b.pixelSize=null;b.quantizationParameters=null;b.rangeValues=null;b.relationParameter=null;b.resultType=null;b.returnDistinctValues=!1;b.returnGeometry=!1;b.returnCentroid=!1;b.returnExceededLimitFeatures=!0;b.returnM=!1;b.returnZ=!1;b.source=null;b.spatialRelationship="intersects";b.start=void 0;b.sqlFormat=null;b.text=null;b.timeExtent=null;b.units="meters";b.where=null;return b}f(b,a);d=b;b.prototype.castDatumTransformation=function(a){return"number"===typeof a||"object"===typeof a?a:null};
b.prototype.writeHistoricMoment=function(a,b,c){b.historicMoment=a&&a.getTime()};b.prototype.writeParameterValues=function(a,b,c){if(a){c={};for(var d in a){var e=a[d];Array.isArray(e)?c[d]=e.map(function(a){return a instanceof Date?a.getTime():a}):c[d]=e instanceof Date?e.getTime():e}b.parameterValues=c}};b.prototype.writeStart=function(a,b,c){b.resultOffset=this.start;b.resultRecordCount=this.num||10;b.where="1\x3d1"};b.prototype.writeWhere=function(a,b,c){b.where=a||"1\x3d1"};b.prototype.clone=
function(){return new d(k.clone({datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,historicMoment:this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,
outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnM:this.returnM,
returnZ:this.returnZ,source:this.source,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.text,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))};c([m.property({json:{write:!0}})],b.prototype,"datumTransformation",void 0);c([m.cast("datumTransformation")],b.prototype,"castDatumTransformation",null);c([m.property({type:Number,json:{write:!0}})],b.prototype,"distance",void 0);c([m.property({type:String,json:{write:!0}})],b.prototype,"gdbVersion",
void 0);c([m.property({types:t.types,json:{read:g.fromJSON,write:!0}})],b.prototype,"geometry",void 0);c([m.property({type:Number,json:{write:!0}})],b.prototype,"geometryPrecision",void 0);c([m.property({type:[String],json:{write:!0}})],b.prototype,"groupByFieldsForStatistics",void 0);c([m.property({type:Date})],b.prototype,"historicMoment",void 0);c([m.writer("historicMoment")],b.prototype,"writeHistoricMoment",null);c([m.property({type:Number,json:{write:!0}})],b.prototype,"maxAllowableOffset",
void 0);c([m.property({type:Number,cast:function(a){return 1>a?1:5<a?5:a},json:{write:{overridePolicy:function(a){return{enabled:1<a}}}}})],b.prototype,"maxRecordCountFactor",void 0);c([m.property({type:String,json:{write:!0}})],b.prototype,"multipatchOption",void 0);c([m.property({type:Number,json:{read:{source:"resultRecordCount"}}})],b.prototype,"num",void 0);c([m.property({type:[Number],json:{write:!0}})],b.prototype,"objectIds",void 0);c([m.property({type:[String],json:{write:!0}})],b.prototype,
"orderByFields",void 0);c([m.property({type:[String],json:{write:!0}})],b.prototype,"outFields",void 0);c([m.property({type:e.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);c([m.property({type:[r],json:{write:!0}})],b.prototype,"outStatistics",void 0);c([m.property({json:{write:!0}})],b.prototype,"parameterValues",void 0);c([m.writer("parameterValues")],b.prototype,"writeParameterValues",null);c([m.property({types:w.types,json:{read:v.read,
write:!0}})],b.prototype,"pixelSize",void 0);c([m.property({type:y.default,json:{write:!0}})],b.prototype,"quantizationParameters",void 0);c([m.property({type:[Object],json:{write:!0}})],b.prototype,"rangeValues",void 0);c([m.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy:function(a){return{enabled:"relation"===this.spatialRelationship}}}}})],b.prototype,"relationParameter",void 0);c([m.property({type:String,json:{write:!0}})],b.prototype,"resultType",
void 0);c([m.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"returnDistinctValues",void 0);c([m.property({type:Boolean,json:{write:!0}})],b.prototype,"returnGeometry",void 0);c([m.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"returnCentroid",void 0);c([m.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:!a}}}}})],b.prototype,"returnExceededLimitFeatures",void 0);c([m.property({type:Boolean,
json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"returnM",void 0);c([m.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"returnZ",void 0);c([m.property({json:{write:!0}})],b.prototype,"source",void 0);c([m.property({type:String,json:{read:{source:"spatialRel",reader:z.read},write:{target:"spatialRel",writer:z.write}}})],b.prototype,"spatialRelationship",void 0);c([m.property({type:Number,json:{read:{source:"resultOffset"}}})],
b.prototype,"start",void 0);c([m.writer("start"),m.writer("num")],b.prototype,"writeStart",null);c([m.property({type:String,json:{write:!0}})],b.prototype,"sqlFormat",void 0);c([m.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);c([m.property({type:l,json:{write:!0}})],b.prototype,"timeExtent",void 0);c([m.property({type:String,json:{read:x.read,write:{writer:x.write,overridePolicy:function(a){return{enabled:0<this.distance}}}}})],b.prototype,"units",void 0);c([m.property({type:String,
json:{write:{overridePolicy:function(a){return{enabled:null!=a||0<this.start}}}}})],b.prototype,"where",void 0);c([m.writer("where")],b.prototype,"writeWhere",null);return b=d=c([m.subclass("esri.tasks.support.Query")],b);var d}(m.declared(h))})},"esri/TimeExtent":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/accessorSupport/decorators".split(" "),function(b,a,f,c,e,l){var h={milliseconds:{getter:"getUTCMilliseconds",
setter:"setUTCMilliseconds",multiplier:1},seconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},minutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},hours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},days:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},weeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},months:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},years:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},decades:{getter:"getUTCFullYear",
setter:"setUTCFullYear",multiplier:10},centuries:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}};return function(a){function b(b,c){b=a.call(this)||this;b.endTime=null;b.startTime=null;return b}f(b,a);d=b;b.prototype.normalizeCtorArgs=function(a,b){return!a||a instanceof Date?{startTime:a,endTime:b}:a};b.prototype.readEndTime=function(a,b){return null!=b.endTime?new Date(b.endTime):null};b.prototype.writeEndTime=function(a,b,c){b.endTime=a?a.getTime():null};b.prototype.readStartTime=
function(a,b){return null!=b.startTime?new Date(b.startTime):null};b.prototype.writeStartTime=function(a,b,c){b.startTime=a?a.getTime():null};b.prototype.clone=function(){return new d({endTime:this.endTime,startTime:this.startTime})};b.prototype.intersection=function(a){if(!a)return null;var b=this.startTime?this.startTime.getTime():-Infinity,c=this.endTime?this.endTime.getTime():Infinity,e=a.startTime?a.startTime.getTime():-Infinity;a=a.endTime?a.endTime.getTime():Infinity;var g,f;e>=b&&e<=c?g=e:
b>=e&&b<=a&&(g=b);c>=e&&c<=a?f=c:a>=b&&a<=c&&(f=a);if(isNaN(g)||isNaN(f))return null;b=new d;b.startTime=-Infinity===g?null:new Date(g);b.endTime=Infinity===f?null:new Date(f);return b};b.prototype.offset=function(a,b){var c=new d,e=this.startTime,g=this.endTime;e&&(c.startTime=this._offsetDate(e,a,b));g&&(c.endTime=this._offsetDate(g,a,b));return c};b.prototype._offsetDate=function(a,b,c){a=new Date(a.getTime());b&&c&&(c=h[c],a[c.setter](a[c.getter]()+b*c.multiplier));return a};c([l.property({type:Date,
json:{write:{allowNull:!0}}})],b.prototype,"endTime",void 0);c([l.reader("endTime")],b.prototype,"readEndTime",null);c([l.writer("endTime")],b.prototype,"writeEndTime",null);c([l.property({type:Date,json:{write:{allowNull:!0}}})],b.prototype,"startTime",void 0);c([l.reader("startTime")],b.prototype,"readStartTime",null);c([l.writer("startTime")],b.prototype,"writeStartTime",null);return b=d=c([l.subclass("esri.TimeExtent")],b);var d}(l.declared(e))})},"esri/geometry/support/typeUtils":function(){define("require exports ../../core/accessorSupport/ensureType ../Extent ../Geometry ../Mesh ../Multipoint ../Point ../Polygon ../Polyline".split(" "),
function(b,a,f,c,e,l,h,d,k,m){Object.defineProperty(a,"__esModule",{value:!0});a.types={base:e,key:"type",typeMap:{extent:c,multipoint:h,point:d,polyline:m,polygon:k,mesh:l}};a.ensureType=f.ensureOneOfType(a.types)})},"esri/symbols/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/Warning ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol3D ../TextSymbol ../WebStyleSymbol ../callouts/LineCallout3D ./symbolConversion".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v,w,y,r,z,x,p){function n(a,b,d){b=a?B[a.type]||null:null;if(b)return b=new b,b.read(a,d),b;d&&d.messages&&a&&d.messages.push(new c("symbol:unsupported","Symbols of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:d}));return null}function A(a,b,c){if(!a)return null;if(!c||"web-scene"!==c.origin||a.isInstanceOf(y)||a.isInstanceOf(z))return a.write(b,c);var d=p.to3D(a);if(d.symbol)return d.symbol.write(b,c);c.messages&&c.messages.push(new f("symbol:unsupported",
"Symbols of type '"+a.declaredClass+"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView",{symbol:a,context:c,error:d.error}));return null}Object.defineProperty(a,"__esModule",{value:!0});var B={esriSMS:w,esriPMS:k,esriTS:r,esriSLS:v,esriSFS:t,esriPFS:d,PointSymbol3D:m,LineSymbol3D:l,PolygonSymbol3D:g,MeshSymbol3D:h,LabelSymbol3D:e,styleSymbolReference:z};a.read=n;a.writeTarget=function(a,b,c,d){(a=A(a,{},d))&&(b[c]=a)};a.write=A;a.fromJSON=function(a,
b){return n(a,null,b)};a.readCallout3D=function(a,b){if(!a||!a.type)return null;var c=null;switch(a.type){case "line":c=new x}c&&c.read(a,b);return c}})},"esri/core/Warning":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(b,a,f,c,e){b=function(a){function b(c,e,f){var d=a.call(this,c,e,f)||this;return d instanceof b?d:new b(c,e,f)}f(b,a);return b}(e);b.prototype.type="warning";return b})},"esri/symbols/LabelSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g){var t=e.ofType({base:null,key:"type",typeMap:{text:k}});return function(a){function b(b){b=a.call(this)||this;b.verticalOffset=null;b.callout=null;b.styleOrigin=null;b.symbolLayers=new t;b.type="label-3d";return b}f(b,a);d=b;b.prototype.supportsCallout=function(){return!0};b.prototype.hasVisibleCallout=function(){return m.hasVisibleCallout(this)};b.prototype.hasVisibleVerticalOffset=function(){return m.hasVisibleVerticalOffset(this)};b.prototype.clone=function(){return new d({styleOrigin:l.clone(this.styleOrigin),
symbolLayers:l.clone(this.symbolLayers),thumbnail:l.clone(this.thumbnail),callout:l.clone(this.callout),verticalOffset:l.clone(this.verticalOffset)})};c([h.property({type:g.default,json:{write:!0}})],b.prototype,"verticalOffset",void 0);c([h.property(m.calloutProperty)],b.prototype,"callout",void 0);c([h.property({json:{read:!1,write:!1}})],b.prototype,"styleOrigin",void 0);c([h.property({type:t})],b.prototype,"symbolLayers",void 0);c([h.property()],b.prototype,"type",void 0);return b=d=c([h.subclass("esri.symbols.LabelSymbol3D")],
b);var d}(h.declared(d))})},"esri/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./Accessor ./ArrayPool ./Evented ./lang ./ObjectPool ./scheduling ./accessorSupport/decorators ./accessorSupport/ensureType".split(" "),function(b,a,f,c,e,l,h,d,k,m,g,t,v){function w(a){return a?a.isInstanceOf&&a.isInstanceOf(D):!1}function y(a){return a?w(a)?a.toArray():a.length?Array.prototype.slice.apply(a):[]:[]}function r(a){if(a&&a.length)return a[0]}
function z(a,b,c,d){b&&b.forEach(function(b,e,g){a.push(b);z(a,c.call(d,b,e,g),c,d)})}b=function(){function a(){this.target=null;this.defaultPrevented=this.cancellable=!1}a.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};a.prototype.reset=function(a){this.defaultPrevented=!1;this.item=a};return a}();var x=function(){},p=new m(b,!0,function(a){a.item=null;a.target=null}),n=new Set,A=new Set,B=new Set,C=new Map,F=0,D=function(a){function b(b){b=a.call(this,b)||this;
b._boundDispatch=b._dispatchColChange.bind(b);b._chgListeners=[];b._notifications=null;b._timer=null;b.length=0;b._items=[];Object.defineProperty(b,"uid",{value:F++});return b}f(b,a);d=b;b.ofType=function(a){if(!a)return d;if(C.has(a))return C.get(a);var b;if("function"===typeof a)b=a.prototype.declaredClass;else if(a.base)b=a.base.prototype.declaredClass;else for(var c in a.typeMap){var e=a.typeMap[c].prototype.declaredClass;b=b?b+(" | "+e):e}b=d.createSubclass({declaredClass:"esri.core.Collection\x3c"+
b+"\x3e"});c={Type:a,ensureType:"function"===typeof a?v.ensureType(a):v.ensureOneOfType(a)};Object.defineProperty(b.prototype,"itemType",{value:c});C.set(a,b);return b};b.prototype.normalizeCtorArgs=function(a){return a?Array.isArray(a)||w(a)?{items:a}:a:{}};Object.defineProperty(b.prototype,"items",{get:function(){return this._items},set:function(a){this._emitBeforeChanges()||(this._splice.apply(this,[0,this.length].concat(y(a))),this._emitAfterChanges())},enumerable:!0,configurable:!0});b.prototype.on=
function(a,b){var c;Array.isArray(a)?c=a:-1<a.indexOf(",")&&(c=a.split(/\s*,\s*/));if(c){var d=[];for(a=0;a<c.length;a++)d.push(this.on(c[a],b));d.remove=function(){for(var a=0;a<d.length;a++)d[a].remove()};return d}if("change"===a){var g=this._chgListeners,f={removed:!1,callback:b};g.push(f);this._notifications&&this._notifications.push({listeners:g.slice(),items:this._items.slice(),changes:[]});return{remove:function(){this.remove=x;f.removed=!0;g.splice(g.indexOf(f),1)}}}return e.after(this,"on"+
a,b,!0)};b.prototype.hasEventListener=function(a){return"change"===a?0<this._chgListeners.length:this.inherited(arguments)};b.prototype.add=function(a,b){if(this._emitBeforeChanges())return this;b=this.getNextIndex(b);this._splice(b,0,a);this._emitAfterChanges();return this};b.prototype.addMany=function(a,b){void 0===b&&(b=this._items.length);if(!a||!a.length||this._emitBeforeChanges())return this;b=this.getNextIndex(b);this._splice.apply(this,[b,0].concat(y(a)));this._emitAfterChanges();return this};
b.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges())return[];var a=this._splice(0,this.length)||[];this._emitAfterChanges();return a};b.prototype.clone=function(){return this._createNewInstance({items:this._items.map(k.clone)})};b.prototype.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a=a.map(y);return this._createNewInstance({items:(c=this._items).concat.apply(c,a)});var c};b.prototype.drain=function(a,b){if(this.length&&!this._emitBeforeChanges()){for(var c=
this._splice(0,this.length),d=c.length,e=0;e<d;e++)a.call(b,c[e],e,c);this._emitAfterChanges()}};b.prototype.every=function(a,b){return this._items.every(a,b)};b.prototype.filter=function(a,b){var c;c=2===arguments.length?this._items.filter(a,b):this._items.filter(a);return this._createNewInstance({items:c})};b.prototype.find=function(a,b){if("function"!==typeof a)throw new TypeError(a+" is not a function");for(var c=this._items,d=c.length,e=0;e<d;e++){var g=c[e];if(a.call(b,g,e,c))return g}};b.prototype.findIndex=
function(a,b){if("function"!==typeof a)throw new TypeError(a+" is not a function");for(var c=this._items,d=c.length,e=0;e<d;e++)if(a.call(b,c[e],e,c))return e;return-1};b.prototype.flatten=function(a,b){var c=[];z(c,this,a,b);return new d(c)};b.prototype.forEach=function(a,b){for(var c=this._items,d=c.length,e=0;e<d;e++)a.call(b,c[e],e,c)};b.prototype.getItemAt=function(a){return this._items[a]};b.prototype.getNextIndex=function(a){var b=this.length;a=null==a?b:a;0>a?a=0:a>b&&(a=b);return a};b.prototype.includes=
function(a,b){void 0===b&&(b=0);return arguments.length?-1!==this._items.indexOf(a,b):!1};b.prototype.indexOf=function(a,b){void 0===b&&(b=0);return this._items.indexOf(a,b)};b.prototype.join=function(a){void 0===a&&(a=",");return this._items.join(a)};b.prototype.lastIndexOf=function(a,b){void 0===b&&(b=this.length-1);return this._items.lastIndexOf(a,b)};b.prototype.map=function(a,b){a=this._items.map(a,b);return new d({items:a})};b.prototype.reorder=function(a,b){void 0===b&&(b=this.length-1);var c=
this.indexOf(a);if(-1!==c){0>b?b=0:b>=this.length&&(b=this.length-1);if(c!==b){if(this._emitBeforeChanges())return a;this._splice(c,1);this._splice(b,0,a);this._emitAfterChanges()}return a}};b.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges()){var a=r(this._splice(this.length-1,1));this._emitAfterChanges();return a}};b.prototype.push=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[this.length,
0].concat(a));this._emitAfterChanges();return this.length};b.prototype.reduce=function(a,b){var c=this._items;return 2===arguments.length?c.reduce(a,b):c.reduce(a)};b.prototype.reduceRight=function(a,b){var c=this._items;return 2===arguments.length?c.reduceRight(a,b):c.reduceRight(a)};b.prototype.remove=function(a){return this.removeAt(this.indexOf(a))};b.prototype.removeAt=function(a){if(!(0>a||a>=this.length||this._emitBeforeChanges()))return a=r(this._splice(a,1)),this._emitAfterChanges(),a};b.prototype.removeMany=
function(a){if(!a||!a.length||this._emitBeforeChanges())return[];a=w(a)?a.toArray():a;for(var b=this._items,c=[],d=a.length,e=0;e<d;e++){var g=b.indexOf(a[e]);if(-1<g){for(var f=e+1,k=g+1,h=Math.min(a.length-f,b.length-k),l=0;l<h&&a[f+l]===b[k+l];)l++;f=1+l;(g=this._splice(g,f))&&0<g.length&&c.push.apply(c,g);e+=f-1}}this._emitAfterChanges();return c};b.prototype.reverse=function(){if(this._emitBeforeChanges())return this;var a=this._splice(0,this.length);a&&(a.reverse(),this._splice.apply(this,[0,
0].concat(a)));this._emitAfterChanges();return this};b.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var a=r(this._splice(0,1));this._emitAfterChanges();return a}};b.prototype.slice=function(a,b){void 0===a&&(a=0);void 0===b&&(b=this.length);return this._createNewInstance({items:this._items.slice(a,b)})};b.prototype.some=function(a,b){return this._items.some(a,b)};b.prototype.sort=function(a){if(!this.length||this._emitBeforeChanges())return this;var b=this._splice(0,this.length);
arguments.length?b.sort(a):b.sort();this._splice.apply(this,[0,0].concat(b));return this};b.prototype.splice=function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];if(this._emitBeforeChanges())return[];c=this._splice.apply(this,[a,b].concat(c))||[];this._emitAfterChanges();return c};b.prototype.toArray=function(){return this._items.slice()};b.prototype.toJSON=function(){return this.toArray()};b.prototype.toLocaleString=function(){return this._items.toLocaleString()};b.prototype.toString=
function(){return this._items.toString()};b.prototype.unshift=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[0,0].concat(a));this._emitAfterChanges();return this.length};b.prototype._createNewInstance=function(a){return new this.constructor(a)};b.prototype._splice=function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];var d=this._items,e=this.constructor.prototype.itemType,f,k;!this._notifications&&
this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=g.schedule(this._boundDispatch));if(b){k=d.splice(a,b);if(this.hasEventListener("before-remove")){var h=p.acquire();h.target=this;h.cancellable=!0;for(var l=0,m=k.length;l<m;l++)f=k[l],h.reset(f),this.emit("before-remove",h),h.defaultPrevented&&(k.splice(l,1),d.splice(a,0,f),a+=1,--l,--m);p.release(h)}this.length=this._items.length;
if(this.hasEventListener("after-remove")){f=p.acquire();f.target=this;f.cancellable=!1;m=k.length;for(l=0;l<m;l++)f.reset(k[l]),this.emit("after-remove",f);p.release(f)}}if(c&&c.length){if(e){l=[];for(m=0;m<c.length;m++)f=c[m],h=e.ensureType(f),null==h&&null!=f||l.push(h);c=l}e=this.hasEventListener("before-add");l=this.hasEventListener("after-add");m=a===this.length;if(e||l){f=p.acquire();f.target=this;f.cancellable=!0;h=p.acquire();h.target=this;h.cancellable=!1;for(var n=0,t=c;n<t.length;n++){var A=
t[n];e?(f.reset(A),this.emit("before-add",f),f.defaultPrevented||(m?d.push(A):d.splice(a++,0,A),this._set("length",d.length),l&&(h.reset(A),this.emit("after-add",h)))):(m?d.push(A):d.splice(a++,0,A),this._set("length",d.length),h.reset(A),this.emit("after-add",h))}p.release(f)}else m?d.push.apply(d,c):d.splice.apply(d,[a,0].concat(c)),this._set("length",d.length)}(c&&c.length||k&&k.length)&&this._notifyChangeEvent(c,k);return k};b.prototype._emitBeforeChanges=function(){var a=!1;if(this.hasEventListener("before-changes")){var b=
p.acquire();b.target=this;b.cancellable=!0;this.emit("before-changes",b);a=b.defaultPrevented;p.release(b)}return a};b.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var a=p.acquire();a.target=this;a.cancellable=!1;this.emit("after-changes",a);p.release(a)}};b.prototype._notifyChangeEvent=function(a,b){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:a,removed:b})};b.prototype._dispatchColChange=function(){this._timer&&
(this._timer.remove(),this._timer=null);if(this._notifications){var a=this._notifications;this._notifications=null;for(var b=function(a){var b=a.changes;n.clear();A.clear();B.clear();for(var d=0;d<b.length;d++){var e=b[d],g=e.added,e=e.removed;if(g)if(0===B.size&&0===A.size)for(var f=0,k=g;f<k.length;f++)g=k[f],n.add(g);else for(f=0,k=g;f<k.length;f++)g=k[f],A.has(g)?(B.add(g),A.delete(g)):B.has(g)||n.add(g);if(e)if(0===B.size&&0===n.size)for(f=0;f<e.length;f++)g=e[f],A.add(g);else for(f=0;f<e.length;f++)g=
e[f],n.has(g)?n.delete(g):(B.delete(g),A.add(g))}var l=h.acquire();n.forEach(function(a){l.push(a)});var m=h.acquire();A.forEach(function(a){m.push(a)});var t=c._items,x=a.items,p=h.acquire();B.forEach(function(a){x.indexOf(a)!==t.indexOf(a)&&p.push(a)});if(a.listeners&&(l.length||m.length||p.length))for(b={target:c,added:l,removed:m,moved:p},d=a.listeners.length,g=0;g<d;g++)e=a.listeners[g],e.removed||e.callback.call(c,b);h.release(l);h.release(m);h.release(p)},c=this,d=0;d<a.length;d++)b(a[d]);
n.clear();A.clear();B.clear()}};b.isCollection=w;c([t.property()],b.prototype,"length",void 0);c([t.property()],b.prototype,"items",null);return b=d=c([t.subclass("esri.core.Collection")],b);var d}(t.declared(l,d));return D})},"esri/core/Evented":function(){define(["require","exports","dojo/aspect","dojo/on"],function(b,a,f,c){function e(a,b,c,f){var d;Array.isArray(b)?d=b:-1<b.indexOf(",")&&(d=b.split(/\s*,\s*/));if(d){var g=[];for(b=0;b<d.length;b++)g.push(e(a,d[b],c,f));g.remove=function(){for(var a=
0;a<g.length;a++)g[a].remove()};return g}return f(a,b)}return function(){function a(){}a.prototype.emit=function(a,b){if(this.hasEventListener(a))return b=b||{},b.target||(b.target=this),c.emit(this,a,b)};a.prototype.on=function(a,b){return e(this,a,b,function(a,c){return f.after(a,"on"+c,b,!0)})};a.prototype.hasEventListener=function(a){a="on"+a;return!(!this[a]||!this[a].after)};return a}()})},"esri/symbols/Symbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/collectionUtils ../core/Logger ../core/urlUtils ../core/Warning ../core/accessorSupport/decorators ../portal/Portal ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./PathSymbol3DLayer ./Symbol ./Symbol3DLayer ./TextSymbol3DLayer ./support/StyleOrigin ./support/Thumbnail".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v,w,y,r,z,x,p,n,A,B){var C={icon:w,object:r,line:y,path:z,fill:v,extrude:t,text:n},F=e.ofType({base:p,key:"type",typeMap:C}),D=h.getLogger("esri.symbols.Symbol3D");return function(a){function b(b){b=a.call(this)||this;b.styleOrigin=null;b.thumbnail=null;b.type=null;var c=b.__accessor__&&b.__accessor__.metadatas&&b.__accessor__.metadatas.symbolLayers;b._set("symbolLayers",new (c&&c.type||e));return b}f(b,a);Object.defineProperty(b.prototype,"color",{get:function(){return null},
set:function(a){D.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"symbolLayers",{set:function(a){l.referenceSetter(a,this._get("symbolLayers"))},enumerable:!0,configurable:!0});b.prototype.readSymbolLayers=function(a,b,c){b=[];for(var d=0;d<a.length;d++){var e=a[d],g=p.typeJSONDictionary.read(e.type),f=C[g];f?(e=new f,e.read(a[d],c),b.push(e)):(D.warn("Unknown symbol layer type: "+
g),c&&c.messages&&c.messages.push(new k("symbol-layer:unsupported","Symbol layers of type '"+(g||"unknown")+"' are not supported",{definition:e,context:c})))}return b};b.prototype.readStyleOrigin=function(a,b,c){if(a.styleUrl&&a.name)return b=d.read(a.styleUrl,c),new A({styleUrl:b,name:a.name});if(a.styleName&&a.name)return new A({portal:c&&c.portal||g.getDefault(),styleName:a.styleName,name:a.name});c&&c.messages&&c.messages.push(new k("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",
{context:c,definition:a}))};b.prototype.writeStyleOrigin=function(a,b,c,e){a.styleUrl&&a.name?(c=d.write(a.styleUrl,e),d.isAbsolute(c)&&(c=d.normalize(c)),b.styleOrigin={styleUrl:c,name:a.name}):a.styleName&&a.name&&(a.portal&&e&&e.portal&&!d.hasSamePortal(a.portal.restUrl,e.portal.restUrl)?e&&e.messages&&e.messages.push(new k("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):b.styleOrigin=
{styleName:a.styleName,name:a.name})};b.prototype.normalizeCtorArgs=function(a){return a instanceof p||a&&C[a.type]?{symbolLayers:[a]}:Array.isArray(a)?{symbolLayers:a}:a};c([m.property({json:{read:!1,write:!1}})],b.prototype,"color",null);c([m.property({type:F,nonNullable:!0,json:{write:!0}}),m.cast(l.castForReferenceSetter)],b.prototype,"symbolLayers",null);c([m.reader("symbolLayers")],b.prototype,"readSymbolLayers",null);c([m.property({type:A})],b.prototype,"styleOrigin",void 0);c([m.reader("styleOrigin")],
b.prototype,"readStyleOrigin",null);c([m.writer("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],b.prototype,"writeStyleOrigin",null);c([m.property({type:B.default,json:{read:!1}})],b.prototype,"thumbnail",void 0);c([m.property({type:String,readOnly:!0,json:{read:!1}})],b.prototype,"type",void 0);return b=c([m.subclass("esri.symbols.Symbol3D")],b)}(m.declared(x))})},"esri/core/collectionUtils":function(){define(["require",
"exports","./Collection"],function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.referenceSetter=function(a,b,l){void 0===l&&(l=f);b||(b=new l);b.removeAll();a&&(Array.isArray(a)||a.isInstanceOf&&a.isInstanceOf(f))?b.addMany(a):b.add(a);return b};a.castForReferenceSetter=function(a){return a}})},"esri/portal/Portal":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper dojo/_base/kernel dojo/_base/lang dojo/_base/url dojo/promise/all ../config ../kernel ../request ../core/Error ../core/global ../core/JSONSupport ../core/Loadable ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/Extent ./PortalQueryParams ./PortalQueryResult ./PortalUser".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v,w,y,r,z,x,p,n,A,B,C,F){var D,H={Bookmark:function(){return x.create(function(a){return b(["./Bookmark"],a)})},Portal:function(){return x.create(function(a){return b(["./Portal"],a)})},PortalFolder:function(){return x.create(function(a){return b(["./PortalFolder"],a)})},PortalGroup:function(){return x.create(function(a){return b(["./PortalGroup"],a)})},PortalItem:function(){return x.create(function(a){return b(["./PortalItem"],a)})},PortalQueryParams:function(){return x.create(function(a){return b(["./PortalQueryParams"],
a)})},PortalQueryResult:function(){return x.create(function(a){return b(["./PortalQueryResult"],a)})},PortalRating:function(){return x.create(function(a){return b(["./PortalRating"],a)})},PortalUser:function(){return x.create(function(a){return b(["./PortalUser"],a)})}};return function(a){function r(b){b=a.call(this)||this;b.access=null;b.allSSL=!1;b.authMode="auto";b.authorizedCrossOriginDomains=null;b.basemapGalleryGroupQuery=null;b.bingKey=null;b.canListApps=!1;b.canListData=!1;b.canListPreProvisionedItems=
!1;b.canProvisionDirectPurchase=!1;b.canSearchPublic=!1;b.canShareBingPublic=!1;b.canSharePublic=!1;b.canSignInArcGIS=!1;b.canSignInIDP=!1;b.colorSetsGroupQuery=null;b.commentsEnabled=!1;b.created=null;b.culture=null;b.customBaseUrl=null;b.defaultBasemap=null;b.defaultExtent=null;b.defaultVectorBasemap=null;b.description=null;b.eueiEnabled=!1;b.featuredGroups=null;b.featuredItemsGroupQuery=null;b.galleryTemplatesGroupQuery=null;b.livingAtlasGroupQuery=null;b.hasCategorySchema=!1;b.helperServices=
null;b.homePageFeaturedContent=null;b.homePageFeaturedContentCount=null;b.httpPort=null;b.httpsPort=null;b.id=null;b.ipCntryCode=null;b.isPortal=!1;b.layerTemplatesGroupQuery=null;b.maxTokenExpirationMinutes=null;b.modified=null;b.name=null;b.portalHostname=null;b.portalMode=null;b.portalProperties=null;b.region=null;b.rotatorPanels=null;b.showHomePageDescription=!1;b.supportsHostedServices=!1;b.symbolSetsGroupQuery=null;b.templatesGroupQuery=null;b.units=null;b.url=g.portalUrl;b.urlKey=null;b.user=
null;b.useStandardizedQuery=!1;b.useVectorBasemaps=!1;b.vectorBasemapGalleryGroupQuery=null;return b}c(r,a);z=r;r.prototype.normalizeCtorArgs=function(a){return"string"===typeof a?{url:a}:a};r.prototype.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)};r.prototype.readAuthorizedCrossOriginDomains=function(a){if(a)for(var b=0;b<a.length;b++){var c=a[b],d=c;p.hasProtocol(d)||(d=p.appUrl.scheme+"://"+d);p.canUseXhr(d)||
g.request.corsEnabledServers.push({host:c,withCredentials:!0})}return a};r.prototype.readDefaultBasemap=function(a){return a?(a=D.fromJSON(a),a.portalItem={portal:this},a):null};r.prototype.readDefaultVectorBasemap=function(a){return a?(a=D.fromJSON(a),a.portalItem={portal:this},a):null};Object.defineProperty(r.prototype,"extraQuery",{get:function(){var a=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!a?" AND orgid:"+this.id:null},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,
"isOrganization",{get:function(){return!!this.access},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"restUrl",{get:function(){var a=this.url;if(a)var b=a.indexOf("/sharing"),a=0<b?a.substring(0,b):this.url.replace(/\/+$/,""),a=a+"/sharing/rest";return a},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"thumbnailUrl",{get:function(){var a=this.restUrl,b=this.thumbnail;return a&&b?this._normalizeSSL(a+"/portals/self/resources/"+b):null},enumerable:!0,configurable:!0});
r.prototype.readUrlKey=function(a){return a?a.toLowerCase():a};r.prototype.readUser=function(a){var b=null;a&&(b=F.fromJSON(a),b.portal=this);return b};r.prototype.load=function(){var a=this,c=x.create(function(a){return b(["../Basemap"],a)}).then(function(a){D=a}).then(function(){return a._fetchSelf()}).then(function(b){if(t.id){var c=t.id;a.credential=c.findCredential(a.restUrl);a.credential||a.authMode!==z.AUTH_MODE_AUTO||(a._esriId_credentialCreateHandle=c.on("credential-create",function(){c.findCredential(a.restUrl)&&
a._signIn()}))}a.read(b)});this.addResolvingPromise(c);return this.when()};r.prototype.fetchBasemaps=function(a){var b=new B;b.query=a||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);b.disableExtraQuery=!0;return this.queryGroups(b).then(function(a){b.num=100;b.query='type:"Web Map" -type:"Web Application"';return a.total?(a=a.results[0],b.sortField=a.sortField||"name",b.sortOrder=a.sortOrder||"desc",a.queryItems(b)):null}).then(function(a){return a&&a.total?
a.results.filter(function(a){return"Web Map"===a.type}).map(function(a){return new D({portalItem:a})}):[]})};r.prototype.fetchCategorySchema=function(){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema").then(function(a){return a.categorySchema}):x.resolve([])};r.prototype.fetchFeaturedGroups=function(){var a=this.featuredGroups,b=new B;b.num=100;b.sortField="title";if(a&&a.length){for(var c=[],d=0;d<a.length;d++){var e=a[d];c.push('(title:"'+e.title+'" AND owner:'+
e.owner+")")}b.query=c.join(" OR ");return this.queryGroups(b).then(function(a){return a.results})}return x.resolve([])};r.getDefault=function(){z._default||(z._default=new z);return z._default};r.prototype.queryGroups=function(a){return this._queryPortal("/community/groups",a,"PortalGroup")};r.prototype.queryItems=function(a){return this._queryPortal("/search",a,"PortalItem")};r.prototype.queryUsers=function(a){a.sortField||(a.sortField="username");return this._queryPortal("/community/users",a,"PortalUser")};
r.prototype.toJSON=function(){throw new w("internal:not-yet-implemented","Portal.toJSON is not yet implemented");};r.prototype._fetchSelf=function(a,b){void 0===a&&(a=this.authMode);void 0===b&&(b=!1);var c=this.restUrl+"/portals/self";a={authMode:a,query:{culture:h.locale}};"auto"===a.authMode&&(a.authMode="no-prompt");b&&(a.query.default=!0);return this._request(c,a)};r.prototype._queryPortal=function(a,b,c){var d=this,e=function(c){return d._request(d.restUrl+a,b.toRequestOptions(d)).then(function(a){var e=
b.clone();e.start=a.nextStart;return new C({nextQueryParams:e,queryParams:b,total:a.total,results:z._resultsToTypedArray(c,{portal:d},a)})}).then(function(a){return m(a.results.map(function(b){return"function"===typeof b.when?b.when():a})).always(function(){return a})})};return c&&H[c]?H[c]().then(function(a){return e(a)}):e()};r.prototype._signIn=function(){var a=this;if(this.authMode===z.AUTH_MODE_ANONYMOUS)return x.reject(new w("portal:invalid-auth-mode",'Current "authMode"\' is "'+this.authMode+
'"'));if("failed"===this.loadStatus)return x.reject(this.loadError);var b=function(b){return x.resolve().then(function(){if("not-loaded"===a.loadStatus)return b||(a.authMode="immediate"),a.load().then(function(){return null});if("loading"===a.loadStatus)return a.load().then(function(){if(a.credential)return null;a.credential=b;return a._fetchSelf("immediate")});if(a.user&&a.credential===b)return null;a.credential=b;return a._fetchSelf("immediate")}).then(function(b){b&&a.read(b)})};return t.id?t.id.getCredential(this.restUrl).then(function(a){return b(a)}):
b(this.credential)};r.prototype._normalizeSSL=function(a){var b=this.allSSL;b||("isSecureContext"in y?b=y.isSecureContext:y.location&&y.location.origin&&(b=0===y.location.origin.indexOf("https:")));if(this.isPortal){var c=new k(a);return-1<this.portalHostname.toLowerCase().indexOf(c.host.toLowerCase())&&c.port&&"80"!==c.port&&"443"!==c.port?b?"https://"+c.host+(this.httpsPort&&443!==this.httpsPort?":"+this.httpsPort:"")+c.path+"?"+c.query:"http://"+c.host+(this.httpPort&&80!==this.httpPort?":"+this.httpPort:
"")+c.path+"?"+c.query:b?a.replace("http:","https:"):a}return b?a.replace("http:","https:"):a};r.prototype._normalizeUrl=function(a){var b=this.credential&&this.credential.token;return this._normalizeSSL(b?a+(-1<a.indexOf("?")?"\x26":"?")+"token\x3d"+b:a)};r.prototype._requestToTypedArray=function(a,c,d){var e=this,g=function(b){return e._request(a,c).then(function(a){var c=z._resultsToTypedArray(b,{portal:e},a);return m(c.map(function(b){return"function"===typeof b.when?b.when():a})).always(function(){return c})})};
return d?x.create(function(a){return b(["./"+d],a)}).then(function(a){return g(a)}):g()};r.prototype._request=function(a,b){var c=this.authMode===z.AUTH_MODE_ANONYMOUS?"anonymous":"auto",d=null,e="auto",g={f:"json"},k="json";b&&(b.authMode&&(c=b.authMode),b.body&&(d=b.body),b.method&&(e=b.method),b.query&&(g=f({},g,b.query)),b.responseType&&(k=b.responseType));b={authMode:c,body:d,callbackParamName:"callback",method:e,query:g,responseType:k,timeout:0};return v(this._normalizeSSL(a),b).then(function(a){return a.data})};
r._resultsToTypedArray=function(a,b,c){if(c){if(c=c.listings||c.notifications||c.userInvitations||c.tags||c.items||c.groups||c.comments||c.provisions||c.results||c.relatedItems||c,a||b)c=c.map(function(c){c=d.mixin(a?a.fromJSON(c):c,b);"function"===typeof c.load&&c.load();return c})}else c=[];return c};r.AUTH_MODE_ANONYMOUS="anonymous";r.AUTH_MODE_AUTO="auto";r.AUTH_MODE_IMMEDIATE="immediate";e([n.property()],r.prototype,"access",void 0);e([n.property()],r.prototype,"allSSL",void 0);e([n.property()],
r.prototype,"authMode",void 0);e([n.property()],r.prototype,"authorizedCrossOriginDomains",void 0);e([n.reader("authorizedCrossOriginDomains")],r.prototype,"readAuthorizedCrossOriginDomains",null);e([n.property()],r.prototype,"basemapGalleryGroupQuery",void 0);e([n.property()],r.prototype,"bingKey",void 0);e([n.property()],r.prototype,"canListApps",void 0);e([n.property()],r.prototype,"canListData",void 0);e([n.property()],r.prototype,"canListPreProvisionedItems",void 0);e([n.property()],r.prototype,
"canProvisionDirectPurchase",void 0);e([n.property()],r.prototype,"canSearchPublic",void 0);e([n.property()],r.prototype,"canShareBingPublic",void 0);e([n.property()],r.prototype,"canSharePublic",void 0);e([n.property()],r.prototype,"canSignInArcGIS",void 0);e([n.property()],r.prototype,"canSignInIDP",void 0);e([n.property()],r.prototype,"colorSetsGroupQuery",void 0);e([n.property()],r.prototype,"commentsEnabled",void 0);e([n.property({type:Date})],r.prototype,"created",void 0);e([n.property()],r.prototype,
"credential",void 0);e([n.property()],r.prototype,"culture",void 0);e([n.property()],r.prototype,"currentVersion",void 0);e([n.property()],r.prototype,"customBaseUrl",void 0);e([n.property()],r.prototype,"defaultBasemap",void 0);e([n.reader("defaultBasemap")],r.prototype,"readDefaultBasemap",null);e([n.property({type:A})],r.prototype,"defaultExtent",void 0);e([n.property()],r.prototype,"defaultVectorBasemap",void 0);e([n.reader("defaultVectorBasemap")],r.prototype,"readDefaultVectorBasemap",null);
e([n.property()],r.prototype,"description",void 0);e([n.property()],r.prototype,"eueiEnabled",void 0);e([n.property({dependsOn:["user","id","canSearchPublic"],readOnly:!0})],r.prototype,"extraQuery",null);e([n.property()],r.prototype,"featuredGroups",void 0);e([n.property()],r.prototype,"featuredItemsGroupQuery",void 0);e([n.property()],r.prototype,"galleryTemplatesGroupQuery",void 0);e([n.property()],r.prototype,"livingAtlasGroupQuery",void 0);e([n.property()],r.prototype,"hasCategorySchema",void 0);
e([n.property()],r.prototype,"helpBase",void 0);e([n.property()],r.prototype,"helperServices",void 0);e([n.property()],r.prototype,"helpMap",void 0);e([n.property()],r.prototype,"homePageFeaturedContent",void 0);e([n.property()],r.prototype,"homePageFeaturedContentCount",void 0);e([n.property()],r.prototype,"httpPort",void 0);e([n.property()],r.prototype,"httpsPort",void 0);e([n.property()],r.prototype,"id",void 0);e([n.property()],r.prototype,"ipCntryCode",void 0);e([n.property({dependsOn:["access"],
readOnly:!0})],r.prototype,"isOrganization",null);e([n.property()],r.prototype,"isPortal",void 0);e([n.property()],r.prototype,"layerTemplatesGroupQuery",void 0);e([n.property()],r.prototype,"maxTokenExpirationMinutes",void 0);e([n.property({type:Date})],r.prototype,"modified",void 0);e([n.property()],r.prototype,"name",void 0);e([n.property()],r.prototype,"portalHostname",void 0);e([n.property()],r.prototype,"portalMode",void 0);e([n.property()],r.prototype,"portalProperties",void 0);e([n.property()],
r.prototype,"region",void 0);e([n.property({dependsOn:["url"],readOnly:!0})],r.prototype,"restUrl",null);e([n.property()],r.prototype,"rotatorPanels",void 0);e([n.property()],r.prototype,"showHomePageDescription",void 0);e([n.property()],r.prototype,"staticImagesUrl",void 0);e([n.property()],r.prototype,"stylesGroupQuery",void 0);e([n.property()],r.prototype,"supportsHostedServices",void 0);e([n.property()],r.prototype,"symbolSetsGroupQuery",void 0);e([n.property()],r.prototype,"templatesGroupQuery",
void 0);e([n.property()],r.prototype,"thumbnail",void 0);e([n.property({dependsOn:["restUrl","thumbnail"],readOnly:!0})],r.prototype,"thumbnailUrl",null);e([n.property()],r.prototype,"units",void 0);e([n.property()],r.prototype,"url",void 0);e([n.property()],r.prototype,"urlKey",void 0);e([n.reader("urlKey")],r.prototype,"readUrlKey",null);e([n.property()],r.prototype,"user",void 0);e([n.reader("user")],r.prototype,"readUser",null);e([n.property()],r.prototype,"useStandardizedQuery",void 0);e([n.property()],
r.prototype,"useVectorBasemaps",void 0);e([n.property()],r.prototype,"vectorBasemapGalleryGroupQuery",void 0);e([l(1,n.cast(B))],r.prototype,"_queryPortal",null);return r=z=e([n.subclass("esri.portal.Portal")],r);var z}(n.declared(r,z))})},"esri/core/Loadable":function(){define("./Promise ./Accessor ./Error ./Warning ./lang dojo/aspect dojo/Deferred".split(" "),function(b,a,f,c,e,l,h){return b.createSubclass([a],{declaredClass:"esri.core.Loadable","-chains-":e.mixin(a._meta.chains,{load:"after"}),
constructor:function(){this._set("loadWarnings",[]);var a=new h;this.addResolvingPromise(a.promise);l.around(this,"load",function(b){return function(){"not-loaded"===this.loadStatus&&(this.loadStatus="loading",b.apply(this));a&&(a.resolve(),a=null);return this.when()}});this.when(function(a){this.loadStatus="loaded"}.bind(this),function(a){this.loadStatus="failed";this.loadError=a}.bind(this))},properties:{loaded:{readOnly:!0,dependsOn:["loadStatus"],get:function(){return"loaded"===this.loadStatus}},
loadError:null,loadStatus:"not-loaded",loadWarnings:{type:[c],readOnly:!0}},load:function(){},cancelLoad:function(){if(this.isFulfilled())return this;this.loadError=new f("load:cancelled","Cancelled");this._promiseProps.cancel(this.loadError);return this}})})},"esri/core/Promise":function(){define("dojo/promise/all dojo/Deferred dojo/aspect dojo/has dojo/errors/create ./scheduling ./Logger ./declare ./lang".split(" "),function(b,a,f,c,e,l,h,d,k){function m(a,b){g.warn("DEPRECATED: "+a+"()"+(b?" -- use "+
b+" instead":""))}c.add("esri-promise-compatibility",!0);c.add("esri-promise-compatibility-deprecation-warnings",!0);var g=h.getLogger("esri.core.Promise"),t=function(c){var d=c._promiseProps;if(!d.resolver.isFulfilled()){var e=d.resolvingPromises,g,f;d.allPromise&&d.allPromise.cancel();var k=new a;for(g=e.length-1;0<=g;g--)f=e[g],f.isCanceled&&f.isCanceled()?e.splice(g,1):f.then(null,null,d.resolver.progress);f=null;(d.allPromise=b(e.concat([k.promise]))).then(function(){d.resolver.resolve(c);c=
d=k=d.allPromise=d.resolvingPromises=null},function(a){d.allPromise=null;if(!a||"cancel"!==a.dojoType){var b=Array.prototype.slice.call(arguments,0);d.resolver.reject(b[0]);c=d=k=d.allPromise=d.resolvingPromises=null}});k&&l.schedule(function(){k&&k.resolve()})}},v=e("CancelError",null,function(a){this.target=a}),w=function(a){return a||new v(this.instance)},y=function(b){this.instance=b;this.canceler=w.bind(this);this.resolver=new a;this.initialized=!1;this.resolvingPromises=[]};y.prototype={canceler:null,
cancel:function(a){if(!this.resolver.isFulfilled()){this.allPromise.cancel();for(var b=this.resolvingPromises.concat(),c=b.length-1;0<=c;c--)b[c].cancel(a);this.resolver.cancel(a)}}};e={declaredClass:"esri.core.Promise",constructor:function(){Object.defineProperty(this,"_promiseProps",{value:new y(this),enumerable:!1,configurable:!1,writable:!0});var a=f.after(this,"postscript",function(b,c){a.remove();a=null;t(this)},!0)},_promiseProps:null,always:function(a){c("esri-promise-compatibility-deprecation-warnings")&&
m("always",".when(callbackOrErrback, callbackOrErrback)");return this.when(a,a)},isResolved:function(){return this._promiseProps.resolver.isResolved()},isRejected:function(){return this._promiseProps.resolver.isRejected()},isFulfilled:function(){return this._promiseProps.resolver.isFulfilled()},otherwise:function(a){c("esri-promise-compatibility-deprecation-warnings")&&m("otherwise",".when().catch(errback)");return this.when(null,a)},catch:function(a){return this.when(null,a)},when:function(b,c,d){var e=
new a(this._promiseProps.canceler);b=e.then(b,c,d);this._promiseProps.resolver.then(e.resolve,e.reject,e.progress);return b},addResolvingPromise:function(a){a&&!this._promiseProps.resolver.isFulfilled()&&(a._promiseProps&&(a=a.when()),this._promiseProps.resolvingPromises.push(a),t(this))}};c("esri-promise-compatibility")||(e=k.mixin(e,{then:function(a,b,d){c("esri-promise-compatibility-deprecation-warnings")&&m("then",".when(callback, errback)");return this.when(a,b,d)},cancel:function(){c("esri-promise-compatibility-deprecation-warnings")&&
m("cancel")},isCanceled:function(){c("esri-promise-compatibility-deprecation-warnings")&&m("isCanceled");return!1},trace:function(){c("esri-promise-compatibility-deprecation-warnings")&&m("trace");return this},traceRejected:function(){c("esri-promise-compatibility-deprecation-warnings")&&m("traceRejected");return this}}));return d(null,e)})},"esri/portal/PortalQueryParams":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/_base/lang ../core/Accessor ../core/kebabDictionary ../core/lang ../core/accessorSupport/decorators ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t){var v=h({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});return function(a){function b(b){b=a.call(this)||this;b.categories=null;b.disableExtraQuery=!1;b.extent=null;b.num=10;b.query=null;b.sortField=null;b.start=1;return b}f(b,a);h=b;Object.defineProperty(b.prototype,"sortOrder",{get:function(){return this._get("sortOrder")||"asc"},set:function(a){"asc"!==a&&"desc"!==a||this._set("sortOrder",a)},enumerable:!0,configurable:!0});
b.prototype.clone=function(){return new h({categories:this.categories?d.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})};b.prototype.toRequestOptions=function(a,b){var c;this.categories&&(c=this.categories.map(function(a){return Array.isArray(a)?JSON.stringify(a):a}));var d;if(this.extent){var f=t.project(this.extent,g.WGS84);f&&(d=f.xmin+
","+f.ymin+","+f.xmax+","+f.ymax)}f=this.query;!this.disableExtraQuery&&a.extraQuery&&(f="("+f+")"+a.extraQuery);a={categories:c,bbox:d,q:f,num:this.num,sortField:null,sortOrder:null,start:this.start};this.sortField&&(a.sortField=v.toJSON(this.sortField),a.sortOrder=this.sortOrder);return{query:e.mixin(b,a)}};c([k.property()],b.prototype,"categories",void 0);c([k.property()],b.prototype,"disableExtraQuery",void 0);c([k.property({type:m})],b.prototype,"extent",void 0);c([k.property()],b.prototype,
"num",void 0);c([k.property()],b.prototype,"query",void 0);c([k.property()],b.prototype,"sortField",void 0);c([k.property()],b.prototype,"sortOrder",null);c([k.property()],b.prototype,"start",void 0);return b=h=c([k.subclass("esri.portal.PortalQueryParams")],b);var h}(k.declared(l))})},"esri/portal/PortalQueryResult":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(b,
a,f,c,e,l){return function(a){function b(b){b=a.call(this)||this;b.nextQueryParams=null;b.queryParams=null;b.results=null;b.total=null;return b}f(b,a);c([l.property()],b.prototype,"nextQueryParams",void 0);c([l.property()],b.prototype,"queryParams",void 0);c([l.property()],b.prototype,"results",void 0);c([l.property()],b.prototype,"total",void 0);return b=c([l.subclass("esri.portal.PortalQueryResult")],b)}(l.declared(e))})},"esri/portal/PortalUser":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/promise/all ../core/Error ../core/JSONSupport ../core/promiseUtils ../core/accessorSupport/decorators ./PortalFolder ./PortalGroup".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g){return function(a){function h(){var b=a.call(this)||this;b.access=null;b.created=null;b.culture=null;b.description=null;b.email=null;b.fullName=null;b.modified=null;b.orgId=null;b.portal=null;b.preferredView=null;b.privileges=null;b.region=null;b.role=null;b.roleId=null;b.units=null;b.username=null;b.userType=null;return b}f(h,a);Object.defineProperty(h.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+
"/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"userContentUrl",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username:null},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/users/"+this.username:null},enumerable:!0,configurable:!0});h.prototype.addItem=function(a){var b=this,c=a&&a.item,d=a&&a.data;a=a&&a.folder;var e=
{method:"post"};c&&(e.query=c._getPostQuery(),null!=d&&("string"===typeof d?e.query.text=d:"object"===typeof d&&(e.query.text=JSON.stringify(d))));d=this.userContentUrl;a&&(d+="/"+a.id);return this.portal._request(d+"/addItem",e).then(function(a){c.id=a.id;c.portal=b.portal;return c.loaded?c._reload():c.load()})};h.prototype.deleteItem=function(a){var b=this.userContentUrl;a.ownerFolder&&(b+="/"+a.ownerFolder);return this.portal._request(b+("/items/"+a.id+"/delete"),{method:"post"}).then(function(){a.id=
null;a.portal=null})};h.prototype.deleteItems=function(a){var b=this.userContentUrl+"/deleteItems",c=a.map(function(a){return a.id});return c.length?(c={method:"post",query:{items:c.join(",")}},this.portal._request(b,c).then(function(){a.forEach(function(a){a.id=null;a.portal=null})})):d.resolve(void 0)};h.prototype.fetchFolders=function(){var a=this;return this.portal._request(this.userContentUrl,{query:{num:1}}).then(function(b){return b&&b.folders?b.folders.map(function(b){b=m.fromJSON(b);b.portal=
a.portal;return b}):[]})};h.prototype.fetchGroups=function(){var a=this;return this.portal._request(this.url).then(function(b){return b&&b.groups?b.groups.map(function(b){b=g.fromJSON(b);b.portal=a.portal;return b}):[]})};h.prototype.fetchItems=function(a){var c=this;a||(a={});var g=this.userContentUrl;a.folder&&(g+="/"+a.folder.id);var f;return d.create(function(a){return b(["./PortalItem"],a)}).then(function(b){f=b;return c.portal._request(g,{query:{folders:!1,num:a.num||10,start:a.start||1}})}).then(function(a){var b;
return a&&a.items?(b=a.items.map(function(a){a=f.fromJSON(a);a.portal=c.portal;return a}),e(b.map(function(a){return a.load()})).always(function(){return{items:b,nextStart:a.nextStart,total:a.total}})):{items:[],nextStart:-1,total:0}})};h.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;b&&a&&(b+="\x26w\x3d"+a);return b};h.prototype.queryFavorites=function(a){return this.favGroupId?(this._favGroup||(this._favGroup=new g({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(a)):
d.reject(new l("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))};h.prototype.toJSON=function(){throw new l("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};c([k.property()],h.prototype,"access",void 0);c([k.property({type:Date})],h.prototype,"created",void 0);c([k.property()],h.prototype,"culture",void 0);c([k.property()],h.prototype,"description",void 0);c([k.property()],h.prototype,"email",void 0);c([k.property()],h.prototype,"favGroupId",
void 0);c([k.property()],h.prototype,"fullName",void 0);c([k.property({type:Date})],h.prototype,"modified",void 0);c([k.property()],h.prototype,"orgId",void 0);c([k.property()],h.prototype,"portal",void 0);c([k.property()],h.prototype,"preferredView",void 0);c([k.property()],h.prototype,"privileges",void 0);c([k.property()],h.prototype,"region",void 0);c([k.property()],h.prototype,"role",void 0);c([k.property()],h.prototype,"roleId",void 0);c([k.property()],h.prototype,"thumbnail",void 0);c([k.property({dependsOn:["url",
"thumbnail","portal.credential.token"],readOnly:!0})],h.prototype,"thumbnailUrl",null);c([k.property()],h.prototype,"units",void 0);c([k.property({dependsOn:["portal.restUrl"],readOnly:!0})],h.prototype,"userContentUrl",null);c([k.property({dependsOn:["portal.restUrl"],readOnly:!0})],h.prototype,"url",null);c([k.property()],h.prototype,"username",void 0);c([k.property()],h.prototype,"userType",void 0);return h=c([k.subclass("esri.portal.PortalUser")],h)}(k.declared(h))})},"esri/portal/PortalFolder":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),
function(b,a,f,c,e,l,h){return function(a){function b(b){b=a.call(this)||this;b.created=null;b.id=null;b.portal=null;b.title=null;b.username=null;return b}f(b,a);Object.defineProperty(b.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username+"/"+this.id:null},enumerable:!0,configurable:!0});b.prototype.toJSON=function(){throw new e("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");};c([h.property({type:Date})],b.prototype,
"created",void 0);c([h.property()],b.prototype,"id",void 0);c([h.property()],b.prototype,"portal",void 0);c([h.property()],b.prototype,"title",void 0);c([h.property({dependsOn:["portal.restUrl"],readOnly:!0})],b.prototype,"url",null);c([h.property()],b.prototype,"username",void 0);return b=c([h.subclass("esri.portal.PortalFolder")],b)}(h.declared(l))})},"esri/portal/PortalGroup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators ./PortalQueryParams".split(" "),
function(b,a,f,c,e,l,h,d,k){return function(a){function b(b){b=a.call(this)||this;b.access=null;b.created=null;b.description=null;b.id=null;b.isInvitationOnly=!1;b.modified=null;b.owner=null;b.portal=null;b.snippet=null;b.sortField=null;b.sortOrder=null;b.tags=null;b.title=null;return b}f(b,a);Object.defineProperty(b.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/groups/"+this.id:null},enumerable:!0,configurable:!0});b.prototype.fetchCategorySchema=function(){var a=this;return this.portal._request(this.url+"/categorySchema").then(function(b){b=b.categorySchema||[];return b.some(function(a){return"contentCategorySetsGroupQuery.LivingAtlas"===a.source})?a._fetchCategorySchemaSet("LivingAtlas"):b})};b.prototype.fetchMembers=function(){return this.portal._request(this.url+"/users")};
b.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;b&&a&&(b+="\x26w\x3d"+a);return b};b.prototype.toJSON=function(){throw new l("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};b.prototype.queryItems=function(a){if(5<parseFloat(this.portal.currentVersion))return a=a||new k,this.portal._queryPortal("/content/groups/"+this.id+"/search",a,"PortalItem");a=a?a.clone():new k;a.query="group:"+this.id+(a.query?" "+a.query:"");return this.portal.queryItems(a)};b.prototype._fetchCategorySchemaSet=
function(a){var b=this;return this.portal._fetchSelf(this.portal.authMode,!0).then(function(a){if(a=a.contentCategorySetsGroupQuery){var c=new k;c.disableExtraQuery=!0;c.num=1;c.query=a;return b.portal.queryGroups(c)}throw new l("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(function(b){if(b.total){b=b.results[0];var c=new k;c.num=1;c.query='typekeywords:"'+a+'"';return b.queryItems(c)}throw new l("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");
}).then(function(a){return a.total?a.results[0].fetchData().then(function(a){return(a=a&&a.categorySchema)&&a.length?a:[]}):[]})};c([d.property()],b.prototype,"access",void 0);c([d.property({type:Date})],b.prototype,"created",void 0);c([d.property()],b.prototype,"description",void 0);c([d.property()],b.prototype,"id",void 0);c([d.property()],b.prototype,"isInvitationOnly",void 0);c([d.property({type:Date})],b.prototype,"modified",void 0);c([d.property()],b.prototype,"owner",void 0);c([d.property()],
b.prototype,"portal",void 0);c([d.property()],b.prototype,"snippet",void 0);c([d.property()],b.prototype,"sortField",void 0);c([d.property()],b.prototype,"sortOrder",void 0);c([d.property()],b.prototype,"tags",void 0);c([d.property()],b.prototype,"thumbnail",void 0);c([d.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],b.prototype,"thumbnailUrl",null);c([d.property()],b.prototype,"title",void 0);c([d.property({dependsOn:["portal.restUrl"],readOnly:!0})],b.prototype,
"url",null);c([e(0,d.cast(k))],b.prototype,"queryItems",null);return b=c([d.subclass("esri.portal.PortalGroup")],b)}(d.declared(h))})},"esri/symbols/ExtrudeSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./edges/utils".split(" "),function(b,a,f,c,e,l,h){return function(a){function b(b){b=a.call(this)||this;b.type="extrude";b.size=void 0;b.material=null;b.edges=null;return b}
f(b,a);d=b;b.prototype.clone=function(){return new d({edges:this.edges&&this.edges.clone(),enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})};c([e.property()],b.prototype,"type",void 0);c([e.property({type:Number,json:{write:!0}})],b.prototype,"size",void 0);c([e.property()],b.prototype,"material",void 0);c([e.property(h.symbol3dEdgesProperty)],b.prototype,"edges",void 0);return b=d=c([e.subclass("esri.symbols.ExtrudeSymbol3DLayer")],
b);var d}(e.declared(l))})},"esri/symbols/Symbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/kebabDictionary ../core/accessorSupport/decorators ./support/ElevationInfo ./support/Symbol3DMaterial".split(" "),function(b,a,f,c,e,l,h,d,k){var m=l({Icon:"icon",Object:"object",Line:"line",Path:"path",Fill:"fill",Extrude:"extrude",Text:"text"});b=function(a){function b(b){b=a.call(this)||this;b.enabled=!0;
b.material=null;b.type=null;return b}f(b,a);b.prototype.writeEnabled=function(a,b,c){a||(b[c]=a)};c([h.property({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],b.prototype,"enabled",void 0);c([h.writer("enabled")],b.prototype,"writeEnabled",null);c([h.property({type:d,json:{read:!1,write:!1}})],b.prototype,"elevationInfo",void 0);c([h.property({type:k.default,json:{write:!0}})],b.prototype,"material",void 0);c([h.property({type:String,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,
writer:m.write}}})],b.prototype,"type",void 0);return b=c([h.subclass("esri.symbols.Symbol3DLayer")],b)}(h.declared(e));(b||(b={})).typeJSONDictionary=m;return b})},"esri/symbols/support/ElevationInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../support/arcadeUtils".split(" "),function(b,a,f,c,e,l,h,d){var k=l({onTheGround:"on-the-ground",
relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),m=l({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"}),g=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}f(b,a);e=b;Object.defineProperty(b.prototype,"requiredFields",{get:function(){return d.extractFieldNames(this.expression)},enumerable:!0,configurable:!0});b.prototype.clone=function(){return new e({expression:this.expression,
title:this.title})};c([h.property({type:String,json:{write:!0}})],b.prototype,"expression",void 0);c([h.property({readOnly:!0,dependsOn:["expression"]})],b.prototype,"requiredFields",null);c([h.property({type:String,json:{write:!0}})],b.prototype,"title",void 0);return b=e=c([h.subclass("esri.layers.support.FeatureExpressionInfo")],b);var e}(h.declared(e));return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}f(b,a);d=b;b.prototype.readFeatureExpressionInfo=function(a,b){if(null!=
a)return a;if(b.featureExpression&&0===b.featureExpression.value)return{expression:"0"}};b.prototype.writeFeatureExpressionInfo=function(a,b,c,d){b[c]=a.write(null,d);"0"===a.expression&&(b.featureExpression={value:0})};Object.defineProperty(b.prototype,"mode",{get:function(){var a=this._get("mode");return a?a:null!=this.offset||this.featureExpressionInfo?"relative-to-ground":"on-the-ground"},set:function(a){this._set("mode",a)},enumerable:!0,configurable:!0});b.prototype.write=function(a,b){return this.offset||
this.mode||this.featureExpressionInfo||this.unit?this.inherited(arguments):null};b.prototype.clone=function(){return new d({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})};c([h.property({type:g,json:{write:!0}})],b.prototype,"featureExpressionInfo",void 0);c([h.reader("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],b.prototype,"readFeatureExpressionInfo",null);c([h.writer("featureExpressionInfo",
{featureExpressionInfo:{type:g},"featureExpression.value":{type:Number}})],b.prototype,"writeFeatureExpressionInfo",null);c([h.property({type:String,dependsOn:["offset","featureExpressionInfo"],json:{read:k.read,write:{writer:k.write,isRequired:!0}}})],b.prototype,"mode",null);c([h.property({type:Number,json:{write:!0}})],b.prototype,"offset",void 0);c([h.property({type:String,json:{read:m.read,write:m.write}})],b.prototype,"unit",void 0);return b=d=c([h.subclass("esri.layers.support.ElevationInfo")],
b);var d}(h.declared(e))})},"esri/support/arcadeUtils":function(){define("require exports dojo/_base/lang ../arcade/arcade ../arcade/Dictionary ../arcade/Feature".split(" "),function(b,a,f,c,e,l){function h(a){var b;try{b=a?c.parseScript(a):null}catch(t){b=null}return b}Object.defineProperty(a,"__esModule",{value:!0});var d=/^\$feature\./i,k={vars:{$feature:"any",$view:"any"},spatialReference:null};a.createSyntaxTree=h;a.createFunction=function(a,b){b=b||f.clone(k);a="string"===typeof a?h(a):a;var d;
try{d=a?c.compileScript(a,b):null}catch(v){d=null}return d};a.createExecContext=function(a,b){return{vars:{$feature:null==a?new l:l.createFromGraphic(a),$view:b&&b.view},spatialReference:b&&b.sr}};a.createFeature=function(a,b,c){return l.createFromGraphicLikeObject(b,a,c)};a.updateExecContext=function(a,b){a.vars.$feature=b};a.evalSyntaxTree=function(a,b){var d;try{d=c.executeScript(a,b,b.spatialReference)}catch(v){d=null}return d};a.executeFunction=function(a,b){var c;try{c=a?a(b,b.spatialReference):
null}catch(v){c=null}return c};a.extractFieldNames=function(a){if(!a)return[];a="string"===typeof a?h(a):a;var b=[];c.extractFieldLiterals(a).forEach(function(a){d.test(a)&&(a=a.replace(d,""),b.push(a))});b.sort();return b.filter(function(a,c){return 0===c||b[c-1]!==a})};a.dependsOnView=function(a){return c.referencesMember(a,"$view")};a.getViewInfo=function(a){if(a&&a.viewingMode&&null!=a.scale&&a.spatialReference)return{view:new e({viewingMode:a.viewingMode,scale:a.scale}),sr:a.spatialReference}};
a.hasGeometryOperations=function(a){return(a="string"===typeof a?h(a):a)&&c.scriptUsesGeometryEngine(a)};a.enableGeometryOperations=function(){return c.enableGeometrySupport()}})},"esri/arcade/arcade":function(){define("require exports dojo/Deferred dojo/has ./arcadeCompiler ./arcadeRuntime ./parser".split(" "),function(b,a,f,c,e,l,h){Object.defineProperty(a,"__esModule",{value:!0});var d="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");
a.compileScript=function(a,b){return c("csp-restrictions")?function(b,c){return l.executeScript(a,b,c)}:e.compileScript(a,b)};a.extend=function(a){l.extend(a);e.extend(a)};a.parseScript=function(a){return h.parseScript(a)};a.validateScript=function(a,b){return h.validateScript(a,b,"simple")};a.scriptCheck=function(a,b,c){return h.scriptCheck(a,b,c,"full")};a.parseAndExecuteScript=function(a,b,c){return l.executeScript(h.parseScript(a),b,c)};a.executeScript=function(a,b,c){return l.executeScript(a,
b,c)};a.referencesMember=function(a,b){return l.referencesMember(a,b)};a.referencesFunction=function(a,b){return l.referencesFunction(a,b)};a.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return h.extractFieldLiterals(a,b)};a.scriptUsesGeometryEngine=function(a){a=l.findFunctionCalls(a);for(var b=0;b<a.length;b++)if(-1<d.indexOf(a[b]))return!0;return!1};a.enableGeometrySupport=function(){var a=new f;b(["esri/geometry/geometryEngine","./functions/geomsync"],function(b,c){c.setGeometryEngine(b);
a.resolve(!0)},function(b){a.reject(b)});return a.promise}})},"esri/arcade/arcadeCompiler":function(){define("require exports ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),function(b,
a,f,c,e,l,h,d,k,m,g,t,v,w,y,r,z,x,p,n,A){function B(a,b,c){try{return c(a,null,b)}catch(oa){throw oa;}}function C(a,b){try{switch(b.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return J(a,b);case "VariableDeclaration":for(var c=[],e=0;e<b.declarations.length;e++)c.push(C(a,b.declarations[e]));return c.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return E(a,b);case "FunctionDeclaration":var e=b.id.name.toLowerCase(),g={applicationCache:void 0===
a.applicationCache?null:a.applicationCache,spatialReference:a.spatialReference,console:a.console,symbols:a.symbols,localScope:{_SymbolsMap:{}},depthCounter:a.depthCounter+1,globalScope:a.globalScope};if(64<g.depthCounter)throw Error("Exceeded maximum function depth");for(var f="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; var lscope \x3d [];\n ",k=0;k<b.params.length;k++){var h=b.params[k].name.toLowerCase(),l=na(h,a);g.localScope._SymbolsMap[h]=
l;f+="lscope['"+l+"']\x3darguments["+k.toString()+"];\n"}f+=E(g,b.body)+"\n return lastStatement; }, runtimeCtx))";f+="\n lastStatement \x3d lc.voidOperation; \n";void 0!==a.globalScope[e]?c="gscope['"+e+"']\x3d"+f:void 0!==a.globalScope._SymbolsMap[e]?c="gscope['"+a.globalScope._SymbolsMap[e]+"']\x3d"+f:(l=na(e,a),a.globalScope._SymbolsMap[e]=l,c="gscope['"+l+"']\x3d"+f);return c;case "ReturnStatement":var n;n=null===b.argument?"return lc.voidOperation;":"return "+C(a,b.argument)+";";return n;case "IfStatement":if("AssignmentExpression"===
b.test.type||"UpdateExpression"===b.test.type)throw Error(d.nodeErrorMessage(b.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var m=C(a,b.test),t=T(a),A="var "+t+" \x3d "+m+";\n if ("+t+" \x3d\x3d\x3d true) {\n"+H(a,b.consequent)+"\n }\n",A=null!==b.alternate?A+("else if ("+t+"\x3d\x3d\x3dfalse)   { \n"+H(a,b.alternate)+"}\n"):A+("else if ("+t+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return A+="else { lang.error({type: '"+b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";
case "ExpressionStatement":var p;p="AssignmentExpression"===b.expression.type?"lastStatement \x3d lc.voidOperation; "+C(a,b.expression)+" \n ":"lastStatement \x3d "+C(a,b.expression)+";";return p;case "AssignmentExpression":return D(a,b);case "UpdateExpression":return F(a,b);case "BreakStatement":return"break;";case "ContinueStatement":return"continue;";case "ForStatement":c="lastStatement \x3d lc.voidOperation; \n";null!==b.init&&(c+=C(a,b.init));var x=T(a),v=T(a),c=c+("var "+x+" \x3d true;")+"\n do { ";
null!==b.update&&(c+=" if ("+x+"\x3d\x3d\x3dfalse) {\n "+C(a,b.update)+"  \n}\n "+x+"\x3dfalse; \n");null!==b.test&&(c+="var "+v+" \x3d "+C(a,b.test)+";",c+="if ("+v+"\x3d\x3d\x3dfalse) { break; } else if ("+v+"!\x3d\x3dtrue) { lang.error({type: '"+b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");c+=C(a,b.body);null!==b.update&&(c+="\n "+C(a,b.update));return c+("\n"+x+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation;");case "ForInStatement":var B=T(a),r=T(a),
w=T(a),y="var "+B+" \x3d "+C(a,b.right)+";\n";"VariableDeclaration"===b.left.type&&(y+=C(a,b.left));var z="VariableDeclaration"===b.left.type?b.left.declarations[0].id.name:b.left.name,z=z.toLowerCase(),c="";null!==a.localScope&&(void 0!==a.localScope[z]?c="lscope['"+z+"']":void 0!==a.localScope._SymbolsMap[z]&&(c="lscope['"+a.localScope._SymbolsMap[z]+"']"));""===c&&(void 0!==a.globalScope[z]?c="gscope['"+z+"']":void 0!==a.globalScope._SymbolsMap[z]&&(c="gscope['"+a.globalScope._SymbolsMap[z]+"']"));
y=y+("if ("+B+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n ")+("else if (lc.isArray("+B+") || lc.isString("+B+")) {")+("var "+r+"\x3d"+B+".length; \n")+("for(var "+w+"\x3d0; "+w+"\x3c"+r+"; "+w+"++) {\n");y+=c+"\x3d"+w+";\n";y+=C(a,b.body);y+="\n}\n";y+=" lastStatement \x3d lc.voidOperation; \n";y+=" \n}\n";y+="else if (lc.isImmutableArray("+B+")) {";y=y+("var "+r+"\x3d"+B+".length(); \n")+("for(var "+w+"\x3d0; "+w+"\x3c"+r+"; "+w+"++) {\n");y+=c+"\x3d"+w+";\n";y+=C(a,b.body);y+=
"\n}\n";y+=" lastStatement \x3d lc.voidOperation; \n";y+=" \n}\n";y+="else if (( "+B+" instanceof lang.Dictionary) || ( "+B+" instanceof lang.Feature)) {";y=y+("var "+r+"\x3d"+B+".keys(); \n")+("for(var "+w+"\x3d0; "+w+"\x3c"+r+".length; "+w+"++) {\n");y+=c+"\x3d"+r+"["+w+"];\n";y+=C(a,b.body);y+="\n}\n";y+=" lastStatement \x3d lc.voidOperation; \n";y+=" \n}\n";return y+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return ea(a,b);case "MemberExpression":var K;try{c=void 0,c=
!0===b.computed?C(a,b.property):"'"+b.property.name+"'",K="lang.member("+C(a,b.object)+","+c+")"}catch(Ba){throw Ba;}return K;case "Literal":return null===b.value||void 0===b.value?"null":JSON.stringify(b.value);case "ThisExpression":throw Error(d.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==b.callee.type)throw Error(d.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));var Y=b.callee.name.toLowerCase(),c="";null!==a.localScope&&(void 0!==a.localScope[Y]?
c="lscope['"+Y+"']":void 0!==a.localScope._SymbolsMap[Y]&&(c="lscope['"+a.localScope._SymbolsMap[Y]+"']"));""===c&&(void 0!==a.globalScope[Y]?c="gscope['"+Y+"']":void 0!==a.globalScope._SymbolsMap[Y]&&(c="gscope['"+a.globalScope._SymbolsMap[Y]+"']"));if(""!==c)for(e="[",g=0;g<b.arguments.length;g++)0<g&&(e+=", "),e+=C(a,b.arguments[g]);else throw Error(d.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));}catch(Ba){throw Ba;}return"lang.callfunc("+c+","+(e+"]")+",runtimeCtx)";case "UnaryExpression":var V;
try{V="lang.unary("+C(a,b.argument)+",'"+b.operator+"')"}catch(Ba){throw Ba;}return V;case "BinaryExpression":var U;try{U="lang.binary("+C(a,b.left)+","+C(a,b.right)+",'"+b.operator+"')"}catch(Ba){throw Ba;}return U;case "LogicalExpression":var Z;try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(d.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)throw Error(d.nodeErrorMessage(b.right,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===b.operator||"||"===b.operator)Z="(lang.logicalCheck("+C(a,b.left)+") "+b.operator+" lang.logicalCheck("+C(a,b.right)+"))";else throw Error(d.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));}catch(Ba){throw Ba;}return Z;case "ConditionalExpression":throw Error(d.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{c=[];for(e=0;e<b.elements.length;e++)"Literal"===b.elements[e].type?c.push(C(a,b.elements[e])):
c.push("lang.aCheck("+C(a,b.elements[e])+",'ArrayExpression')");f="["+c.join(",")+"]"}catch(Ba){throw Ba;}return f;case "ObjectExpression":c="lang.dictionary([";for(e=0;e<b.properties.length;e++){var k=b.properties[e],O="Identifier"===k.key.type?"'"+k.key.name+"'":C(a,k.key),ma=C(a,k.value);0<e&&(c+=",");c+="lang.strCheck("+O+",'ObjectExpression'),lang.aCheck("+ma+", 'ObjectExpression')"}return c+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(d.nodeErrorMessage(b,
"RUNTIME","NOTSUPPORTED"));default:throw Error(d.nodeErrorMessage(b,"RUNTIME","UNREOGNISED"));}}catch(Ba){throw Ba;}}function F(a,b){var c=null,d="";if("MemberExpression"===b.argument.type)return c=C(a,b.argument.object),d=!0===b.argument.computed?C(a,b.argument.property):"'"+b.argument.property.name+"'","lang.memberupdate("+c+","+d+",'"+b.operator+"',"+b.prefix+")";c=b.argument.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lang.update(lscope, '"+c+"','"+b.operator+
"',"+b.prefix+")";if(void 0!==a.localScope._SymbolsMap[c])return"lang.update(lscope, '"+a.localScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")"}if(void 0!==a.globalScope[c])return"lang.update(gscope, '"+c+"','"+b.operator+"',"+b.prefix+")";if(void 0!==a.globalScope._SymbolsMap[c])return"lang.update(gscope, '"+a.globalScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")";throw Error("Variable not recognised");}function D(a,b){var c=C(a,b.right),d=null,e="";if("MemberExpression"===b.left.type)return d=
C(a,b.left.object),e=!0===b.left.computed?C(a,b.left.property):"'"+b.left.property.name+"'","lang.assignmember("+d+","+e+",'"+b.operator+"',"+c+");";d=b.left.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[d])return"lscope['"+d+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+d+"']); ";if(void 0!==a.localScope._SymbolsMap[d])return"lscope['"+a.localScope._SymbolsMap[d]+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+a.localScope._SymbolsMap[d]+"']); "}if(void 0!==a.globalScope[d])return"gscope['"+
d+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+d+"']); ";if(void 0!==a.globalScope._SymbolsMap[d])return"gscope['"+a.globalScope._SymbolsMap[d]+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+a.globalScope._SymbolsMap[d]+"']); ";throw Error("Variable not recognised");}function H(a,b){return"BlockStatement"===b.type?C(a,b):"ReturnStatement"===b.type?C(a,b):"BreakStatement"===b.type?C(a,b):"ContinueStatement"===b.type?C(a,b):"UpdateExpression"===b.type?"lastStatement \x3d "+C(a,b)+";":
"ExpressionStatement"===b.type?C(a,b):"ObjectExpression"===b.type?"lastStatement \x3d "+C(a,b)+";":C(a,b)}function E(a,b){for(var c="",d=0;d<b.body.length;d++)c="ReturnStatement"===b.body[d].type?c+(C(a,b.body[d])+" \n"):"BreakStatement"===b.body[d].type?c+(C(a,b.body[d])+" \n"):"ContinueStatement"===b.body[d].type?c+(C(a,b.body[d])+" \n"):"UpdateExpression"===b.body[d].type?c+("lastStatement \x3d "+C(a,b.body[d])+"; \n"):"ObjectExpression"===b.body[d].type?c+("lastStatement \x3d "+C(a,b.body[d])+
"; \n"):c+(C(a,b.body[d])+" \n");return c}function J(a,b){var c=null===b.init?null:C(a,b.init);c===h.voidOperation&&(c=null);b=b.id.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[b])return"lscope['"+b+"']\x3d"+c+";";if(void 0!==a.localScope._SymbolsMap[b])return"lscope['"+a.localScope._SymbolsMap[b]+"']\x3d"+c+";";var d=na(b,a);a.localScope._SymbolsMap[b]=d;return"lscope['"+d+"']\x3d"+c+";"}if(void 0!==a.globalScope[b])return"gscope['"+b+"']\x3d"+c+";";if(void 0!==a.globalScope._SymbolsMap[b])return"gscope['"+
a.globalScope._SymbolsMap[b]+"']\x3d"+c+";";d=na(b,a);a.globalScope._SymbolsMap[b]=d;return"gscope['"+d+"']\x3d"+c+";"}function ha(a,b,c){b=b.toLowerCase();switch(b){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return b=a.spatialReference._arcadeCacheId,void 0===b&&(c=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(c=!1),c&&(O++,b=a.spatialReference._arcadeCacheId=O)),a=new f({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),
void 0!==b&&(a._arcadeCacheId="SPREF"+b.toString()),a}switch(a.type){case "extent":switch(b){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[b],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(b){case "rings":return b=h.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===b&&(O++,b=O,h.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",b)),a=new e(a.rings,a.spatialReference,
!0===a.hasZ,!0===a.hasM,b);case "type":return"Polygon"}break;case "point":switch(b){case "x":case "y":case "z":case "m":return void 0!==a[b]?a[b]:null;case "type":return"Point"}break;case "polyline":switch(b){case "paths":return b=h.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===b&&(O++,b=O,h.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",b)),a=new e(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polyline"}break;case "multipoint":switch(b){case "points":return b=
h.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===b&&(O++,b=O,h.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",b)),a=new l(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,b,1);case "type":return"Multipoint"}}throw Error(d.nodeErrorMessage(c,"RUNTIME","PROPERTYNOTFOUND"));}function ea(a,b){try{var c=b.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lscope['"+c+"']";if(void 0!==a.localScope._SymbolsMap[c])return"lscope['"+
a.localScope._SymbolsMap[c]+"']"}if(void 0!==a.globalScope[c])return"gscope['"+c+"']";if(void 0!==a.globalScope._SymbolsMap[c])return"gscope['"+a.globalScope._SymbolsMap[c]+"']";throw Error(d.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(oa){throw oa;}}function ba(a){return null===a?"":h.isArray(a)||h.isImmutableArray(a)?"Array":h.isDate(a)?"Date":h.isString(a)?"String":h.isBoolean(a)?"Boolean":h.isNumber(a)?"Number":a instanceof f?"Dictionary":a instanceof c?"Feature":a instanceof x?"Point":
a instanceof p?"Polygon":a instanceof n?"Polyline":a instanceof z?"Multipoint":a instanceof y?"Extent":h.isFunctionParameter(a)?"Function":a===h.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function Q(a,b,c,d){try{if(h.equalityTest(b[c],d))return b[c+1];var e=b.length-c;return 1===e?b[c]:2===e?null:3===e?b[c+2]:Q(a,b,c+2,d)}catch(qa){throw qa;}}function Y(a,b,c,d){try{if(!0===d)return b[c+1];if(3===b.length-c)return b[c+2];var e=b[c+2];if(!1===h.isBoolean(e))throw Error("WHEN needs boolean test conditions");
return Y(a,b,c+2,e)}catch(qa){throw qa;}}function V(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var e=V(a.slice(0,d),b);a=V(a.slice(d,c),b);for(c=[];0<e.length||0<a.length;)0<e.length&&0<a.length?(d=b(e[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(e[0]),e=e.slice(1)):(c.push(a[0]),a=a.slice(1))):0<e.length?(c.push(e[0]),e=e.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function na(a,b){b.symbols.symbolCounter++;return"_T"+b.symbols.symbolCounter.toString()}
function T(a){a.symbols.symbolCounter++;return"_Tvar"+a.symbols.symbolCounter.toString()}function K(a,b,c){var d={};a||(a={});c||(c={});d._SymbolsMap={};d.textformatting=1;d.infinity=1;d.pi=1;for(var e in b)d[e]=1;for(e in c)d[e]=1;for(e in a)d[e]=1;return d}function Z(a){console.log(a)}Object.defineProperty(a,"__esModule",{value:!0});var O=0,W={};k.registerFunctions(W,B);w.registerFunctions(W,B);t.registerFunctions(W,B);m.registerFunctions(W,B);v.registerFunctions(W,B);g.registerFunctions(W,B);W["typeof"]=
function(a,b){return B(a,b,function(a,b,c){h.pcCheck(c,1,1);a=ba(c[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};W.iif=function(a,b){try{return B(a,b,function(a,b,c){h.pcCheck(c,3,3);if(!1===h.isBoolean(c[0]))throw Error("IF Function must have a boolean test condition");return c[0]?c[1]:c[2]})}catch(ja){throw ja;}};W.decode=function(a,b){try{return B(a,b,function(b,c,d){if(2>d.length)throw Error("Missing Parameters");if(2===d.length)return d[1];if(0===(d.length-1)%2)throw Error("Must have a default value result.");
return Q(a,d,1,d[0])})}catch(ja){throw ja;}};W.when=function(a,b){try{return B(a,b,function(b,c,d){if(3>d.length)throw Error("Missing Parameters");if(0===d.length%2)throw Error("Must have a default value result.");b=d[0];if(!1===h.isBoolean(b))throw Error("WHEN needs boolean test conditions");return Y(a,d,0,b)})}catch(ja){throw ja;}};W.top=function(a,b){return B(a,b,function(a,b,c){h.pcCheck(c,2,2);if(h.isArray(c[0]))return h.toNumber(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,h.toNumber(c[1]));
if(h.isImmutableArray(c[0]))return h.toNumber(c[1])>=c[0].length()?c[0].slice(0):c[0].slice(0,h.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};W.first=function(a,b){return B(a,b,function(a,b,c){h.pcCheck(c,1,1);return h.isArray(c[0])?0===c[0].length?null:c[0][0]:h.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):null})};W.sort=function(a,b){return B(a,b,function(a,b,c){h.pcCheck(c,1,2);b=c[0];h.isImmutableArray(b)&&(b=b.toArray());if(!1===h.isArray(b))throw Error("Illegal Argument");
if(1<c.length){if(!1===h.isFunctionParameter(c[1]))throw Error("Illegal Argument");b=V(b,function(b,d){return X.callfunc(c[1],[b,d],a)})}else{if(0===b.length)return[];for(var d={},e=0;e<b.length;e++){var g=ba(b[e]);""!==g&&(d[g]=!0)}if(!0===d.Array||!0===d.Dictionary||!0===d.Feature||!0===d.Point||!0===d.Polygon||!0===d.Polyline||!0===d.Multipoint||!0===d.Extent||!0===d.Function)return b.slice(0);var e=0,g="",f;for(f in d)e++,g=f;b=1<e||"String"===g?V(b,function(a,b){if(null===a||void 0===a||a===
h.voidOperation)return null===b||void 0===b||b===h.voidOperation?0:1;if(null===b||void 0===b||b===h.voidOperation)return-1;a=h.toString(a);b=h.toString(b);return a<b?-1:a===b?0:1}):"Number"===g?V(b,function(a,b){return a-b}):"Boolean"===g?V(b,function(a,b){return a===b?0:b?-1:1}):"Date"===g?V(b,function(a,b){return b-a}):b.slice(0)}return b})};for(var R in W)W[R]=new h.NativeFunction(W[R]);var da=function(){};da.prototype=W;a.functionHelper={fixSpatialReference:h.fixSpatialReference,parseArguments:function(a,
b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(C(a,b.arguments[d]));return c},standardFunction:B};a.extend=function(a){for(var b={mode:"sync",compiled:!0,functions:{},signatures:[],standardFunction:B},c=0;c<a.length;c++)a[c].registerFunctions(b);for(var e in b.functions)W[e]=new h.NativeFunction(b.functions[e]),da.prototype[e]=W[e];for(c=0;c<b.signatures.length;c++)d.addFunctionDeclaration(b.signatures[c],"f")};a.executeScript=function(a,b,c){return a(b,c)};a.extractFieldLiterals=function(a,
b){void 0===b&&(b=!1);return d.findFieldLiterals(a,b)};a.validateScript=function(a,b){return d.validateScript(a,b,"simple")};a.referencesMember=function(a,b){return d.referencesMember(a,b)};a.referencesFunction=function(a,b){return d.referencesFunction(a,b)};var X={error:function(a,b,c){throw Error(d.nodeErrorMessage(a,b,c));},functionDepthchecker:function(a,b){return function(){b.depthCounte++;if(64<b.depthCounter)throw Error("Exceeded maximum function depth");var c=a.apply(this,arguments);b.depthCounte--;
return c}},aCheck:function(a,b){if(h.isFunctionParameter(a))throw Error(d.nodeErrorMessage({type:b},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return a===h.voidOperation?null:a},Dictionary:f,Feature:c,dictionary:function(a){for(var b={},c=0;c<a.length;c+=2){if(h.isFunctionParameter(a[c+1]))throw Error("Illegal Argument");if(!1===h.isString(a[c]))throw Error("Illegal Argument");b[a[c].toString()]=a[c+1]===h.voidOperation?null:a[c+1]}a=new f(b);a.immutable=!1;return a},strCheck:function(a,b){if(!1===h.isString(a))throw Error("Illegal Argument");
return a},unary:function(a,b){if(h.isBoolean(a)){if("!"===b)return!a;if("-"===b)return-1*h.toNumber(a);if("+"===b)return 1*h.toNumber(a);throw Error(d.nodeErrorMessage({type:"UnaryExpression"},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===b)return-1*h.toNumber(a);if("+"===b)return 1*h.toNumber(a);throw Error(d.nodeErrorMessage({type:"UnaryExpression"},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(a){if(!1===h.isBoolean(a))throw Error(d.nodeErrorMessage("LogicalExpression","RUNTIME",
"ONLYORORAND"));return a},logical:function(a,b,c){if(h.isBoolean(a)&&h.isBoolean(b))switch(c){case "||":return a||b;case "\x26\x26":return a&&b;default:throw Error(d.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));}else throw Error(d.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));},binary:function(a,b,c){switch(c){case "\x3d\x3d":return h.equalityTest(a,b);case "\x3d":return h.equalityTest(a,b);case "!\x3d":return!h.equalityTest(a,b);case "\x3c":return h.greaterThanLessThan(a,
b,c);case "\x3e":return h.greaterThanLessThan(a,b,c);case "\x3c\x3d":return h.greaterThanLessThan(a,b,c);case "\x3e\x3d":return h.greaterThanLessThan(a,b,c);case "+":return h.isString(a)||h.isString(b)?h.toString(a)+h.toString(b):h.toNumber(a)+h.toNumber(b);case "-":return h.toNumber(a)-h.toNumber(b);case "*":return h.toNumber(a)*h.toNumber(b);case "/":return h.toNumber(a)/h.toNumber(b);case "%":return h.toNumber(a)%h.toNumber(b);default:throw Error(d.nodeErrorMessage({type:"BinaryExpression"},"RUNTIME",
"OPERATORNOTRECOGNISED"));}},assign:function(a,b,c){switch(b){case "\x3d":return a===h.voidOperation?null:a;case "/\x3d":return h.toNumber(c)/h.toNumber(a);case "*\x3d":return h.toNumber(c)*h.toNumber(a);case "-\x3d":return h.toNumber(c)-h.toNumber(a);case "+\x3d":return h.isString(c)||h.isString(a)?h.toString(c)+h.toString(a):h.toNumber(c)+h.toNumber(a);case "%\x3d":return h.toNumber(c)%h.toNumber(a);default:throw Error(d.nodeErrorMessage("AssignmentExpression","RUNTIME","OPERATORNOTRECOGNISED"));
}},update:function(a,b,c,d){var e=h.toNumber(a[b]);a[b]="++"===c?e+1:e-1;return!1===d?e:"++"===c?e+1:e-1},memberupdate:function(a,b,d,e){var g;if(h.isArray(a))if(h.isNumber(b)){0>b&&(b=a.length+b);if(0>b||b>=a.length)throw Error("Assignment outside of array bounds");g=h.toNumber(a[b]);a[b]="++"===d?g+1:g-1}else throw Error("Invalid Parameter");else if(a instanceof f){if(!1===h.isString(b))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(b))g=h.toNumber(a.field(b)),a.setField(b,
"++"===d?g+1:g-1);else throw Error("Invalid Parameter");}else if(a instanceof c){if(!1===h.isString(b))throw Error("Feature accessor must be a string");if(!0===a.hasField(b))g=h.toNumber(a.field(b)),a.setField(b,"++"===d?g+1:g-1);else throw Error("Invalid Parameter");}else{if(h.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===e?g:"++"===d?g+1:g-1},assignmember:function(a,b,d,e){if(h.isArray(a))if(h.isNumber(b)){0>b&&(b=a.length+b);if(0>b||b>a.length)throw Error("Assignment outside of array bounds");
if(b===a.length&&"\x3d"!==d)throw Error("Invalid Parameter");a[b]=this.assign(e,d,a[b])}else throw Error("Invalid Parameter");else if(a instanceof f){if(!1===h.isString(b))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(b))a.setField(b,this.assign(e,d,a.field(b)));else{if("\x3d"!==d)throw Error("Invalid Parameter");a.setField(b,this.assign(e,d,null))}}else if(a instanceof c){if(!1===h.isString(b))throw Error("Feature accessor must be a string");if(!0===a.hasField(b))a.setField(b,
this.assign(e,d,a.field(b)));else{if("\x3d"!==d)throw Error("Invalid Parameter");a.setField(b,this.assign(e,d,null))}}else{if(h.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(a,b){if(null===a)throw Error(d.nodeErrorMessage("MemberExpression","RUNTIME","NOTFOUND"));if(a instanceof f||a instanceof c){if(h.isString(b))return a.field(b)}else if(a instanceof r){if(h.isString(b))return ha(a,b,"MemberExpression")}else if(h.isArray(a)){if(h.isNumber(b)&&
isFinite(b)&&Math.floor(b)===b){0>b&&(b=a.length+b);if(b>=a.length||0>b)throw Error(d.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return a[b]}}else if(h.isString(a)){if(h.isNumber(b)&&isFinite(b)&&Math.floor(b)===b){0>b&&(b=a.length+b);if(b>=a.length||0>b)throw Error(d.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return a[b]}}else if(h.isImmutableArray(a)&&h.isNumber(b)&&isFinite(b)&&Math.floor(b)===b){0>b&&(b=a.length()+b);if(b>=a.length()||0>b)throw Error(d.nodeErrorMessage("MemberExpression",
"RUNTIME","OUTOFBOUNDS"));return a.get(b)}throw Error(d.nodeErrorMessage("MemberExpression","RUNTIME","INVALIDTYPE"));},callfunc:function(a,b,c){return a instanceof h.NativeFunction?a.fn(c,b):a instanceof h.SizzleFunction?a.fn.apply(this,b):a.apply(this,b)}};a.compileScript=function(a,b){void 0===b&&(b=null);null===b&&(b={vars:{},customfunctions:{}});b={globalScope:K(b.vars,W,b.customfunctions),localScope:null,console:Z,symbols:{symbolCounter:0}};a=C(b,a.body[0].body);""===a&&(a="lc.voidOperation;");
b={lc:h,lang:X,postProcess:function(a){a instanceof h.ReturnResult&&(a=a.value);a instanceof h.ImplicitResult&&(a=a.value);a===h.voidOperation&&(a=null);if(a===h.breakResult)throw Error("Cannot return BREAK");if(a===h.continueResult)throw Error("Cannot return CONTINUE");if(h.isFunctionParameter(a))throw Error("Cannot return FUNCTION");return a},prepare:function(a,b){b||(b=new A({wkid:102100}));var d=a.vars,e=a.customfunctions,g=new da;d||(d={});e||(e={});var k=new f({newline:"\n",tab:"\t",singlequote:"'",
doublequote:'"',forwardslash:"/",backwardslash:"\\"});k.immutable=!1;g._SymbolsMap={textformatting:1,infinity:1,pi:1};g.textformatting=k;g.infinity=Number.POSITIVE_INFINITY;g.pi=Math.PI;for(var h in e)g[h]=e[h],g._SymbolsMap[h]=1;for(h in d)g._SymbolsMap[h]=1,g[h]=d[h]&&"esri.Graphic"===d[h].declaredClass?c.createFromGraphic(d[h]):d[h];return{spatialReference:b,globalScope:g,localScope:null,console:a.console?a.console:Z,symbols:{symbolCounter:0},depthCounter:1,applicationCache:void 0===a.applicationCache?
null:a.applicationCache}}};return(new Function("context","spatialReference","var runtimeCtx\x3dthis.prepare(context, spatialReference);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+a+"\n return lastStatement; } \n return this.postProcess(mainBody());")).bind(b)}})},"esri/arcade/Dictionary":function(){define(["require","exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],
function(b,a,f,c,e){return function(){function a(b){this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=b instanceof a?b.attributes:void 0===b?{}:null===b?{}:b}a.prototype.field=function(a){var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];throw Error("Field not Found");};a.prototype.setField=function(a,b){if(this.immutable)throw Error("Dictionary is Immutable");var c=a.toLowerCase();if(void 0===
this.attributes[a])for(var d in this.attributes)if(d.toLowerCase()===c){this.attributes[d]=b;return}this.attributes[a]=b};a.prototype.hasField=function(a){var b=a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var c in this.attributes)if(c.toLowerCase()===b)return!0;return!1};a.prototype.keys=function(){var a=[],b;for(b in this.attributes)a.push(b);return a=a.sort()};a.prototype.castToText=function(){var a="",b;for(b in this.attributes){""!==a&&(a+=",");var k=this.attributes[b];null==k?
a+=JSON.stringify(b)+":null":c.isBoolean(k)||c.isNumber(k)||c.isString(k)?a+=JSON.stringify(b)+":"+JSON.stringify(k):k instanceof e?a+=JSON.stringify(b)+":"+c.toStringExplicit(k):k instanceof f?a+=JSON.stringify(b)+":"+c.toStringExplicit(k):k instanceof Array?a+=JSON.stringify(b)+":"+c.toStringExplicit(k):k instanceof Date?a+=JSON.stringify(b)+":"+JSON.stringify(k):null!==k&&"object"===typeof k&&void 0!==k.castToText&&(a+=JSON.stringify(b)+":"+k.castToText())}return"{"+a+"}"};return a}()})},"esri/arcade/ImmutableArray":function(){define(["require",
"exports"],function(b,a){return function(){function a(a){void 0===a&&(a=[]);this._elements=a}a.prototype.length=function(){return this._elements.length};a.prototype.get=function(a){return this._elements[a]};a.prototype.toArray=function(){for(var a=[],b=0;b<this.length();b++)a.push(this.get(b));return a};return a}()})},"esri/arcade/languageUtils":function(){define("require exports dojo/number ../kernel ../moment ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v,w,y){function r(a,b,c){if(""===b||null===b||void 0===b||b===c||b===c)return a;do a=a.replace(b,c);while(-1!==a.indexOf(b));return a}function z(a){return a instanceof na||a instanceof l||a instanceof T}function x(a){return"string"===typeof a||a instanceof String}function p(a){return"boolean"===typeof a}function n(a){return"number"===typeof a}function A(a){return a instanceof Array}function B(a){return a instanceof Date}function C(a,b){if(!1===isNaN(a)){if(void 0===
b||null===b||""===b)return a.toString();b=r(b,"\u2030","");b=r(b,"\u00a4","");return f.format(a,{pattern:b})}return a.toString()}function F(a,b){a=e(a);return void 0===b||null===b||""===b?a.format():a.format(D(b))}function D(a){return a.replace(/(LTS)|L|l/g,function(a){return"["+a+"]"})}function H(a,b,c){switch(c){case "\x3e":return a>b;case "\x3c":return a<b;case "\x3e\x3d":return a>=b;case "\x3c\x3d":return a<=b}return!1}function E(b,c){if(b===c||null===b&&c===a.voidOperation||null===c&&b===a.voidOperation)return!0;
if(B(b)&&B(c))return b.getTime()===c.getTime();if(b instanceof d||b instanceof k)return b.equalityTest(c);if(b instanceof v&&c instanceof v){var e=void 0,g=void 0;a.isVersion4?(e=b.cache._arcadeCacheId,g=c.cache._arcadeCacheId):(e=b.getCacheValue("_arcadeCacheId"),g=c.getCacheValue("_arcadeCacheId"));if(void 0!==e&&null!==e)return e===g}return void 0!==b&&void 0!==c&&null!==b&&null!==c&&"object"===typeof b&&"object"===typeof c&&(b._arcadeCacheId===c._arcadeCacheId&&void 0!==b._arcadeCacheId&&null!==
b._arcadeCacheId||b._underlyingGraphic===c._underlyingGraphic&&void 0!==b._underlyingGraphic&&null!==b._underlyingGraphic)?!0:!1}function J(a,b){if(x(a))return a;if(null===a)return"";if(n(a))return C(a,b);if(p(a))return a.toString();if(B(a))return F(a,b);if(a instanceof g)return JSON.stringify(a.toJSON());if(A(a)){b=[];for(var c=0;c<a.length;c++)b[c]=ea(a[c]);return"["+b.join(",")+"]"}if(a instanceof h){b=[];for(c=0;c<a.length();c++)b[c]=ea(a.get(c));return"["+b.join(",")+"]"}return null!==a&&"object"===
typeof a&&void 0!==a.castToText?a.castToText():z(a)?"object, Function":""}function ha(a,b){if(x(a))return a;if(null===a)return"";if(n(a))return C(a,b);if(p(a))return a.toString();if(B(a))return F(a,b);if(a instanceof g)return a instanceof m?'{"xmin":'+a.xmin.toString()+',"ymin":'+a.ymin.toString()+","+(a.hasZ?'"zmin":'+a.zmin.toString()+",":"")+(a.hasM?'"mmin":'+a.mmin.toString()+",":"")+'"xmax":'+a.xmax.toString()+',"ymax":'+a.ymax.toString()+","+(a.hasZ?'"zmax":'+a.zmax.toString()+",":"")+(a.hasM?
'"mmax":'+a.mmax.toString()+",":"")+'"spatialReference":'+Y(a.spatialReference)+"}":Y(a.toJSON(),function(a,b){return a.key===b.key?0:"spatialReference"===a.key?1:"spatialReference"===b.key||a.key<b.key?-1:a.key>b.key?1:0});if(A(a)){b=[];for(var c=0;c<a.length;c++)b[c]=ea(a[c]);return"["+b.join(",")+"]"}if(a instanceof h){b=[];for(c=0;c<a.length();c++)b[c]=ea(a.get(c));return"["+b.join(",")+"]"}return null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():z(a)?"object, Function":""}function ea(a){if(null!==
a){if(p(a)||n(a)||x(a))return JSON.stringify(a);if(a instanceof g||a instanceof h||a instanceof Array)return ha(a);if(a instanceof Date)return JSON.stringify(F(a,""));if(null!==a&&"object"===typeof a&&void 0!==a.castToText)return a.castToText()}return"null"}function ba(b,c){return n(b)?b:null===b||""===b?0:B(b)?NaN:p(b)?b?1:0:A(b)||""===b||void 0===b?NaN:void 0!==c&&x(b)?(c=r(c,"\u2030",""),c=r(c,"\u00a4",""),f.parse(b,{pattern:c})):b===a.voidOperation?0:Number(b)}function Q(a,b){var c;b.fields.some(function(b){b.name===
a&&(c=b.domain);return!!c});return c}function Y(a,b){b||(b={});"function"===typeof b&&(b={cmp:b});var c="boolean"===typeof b.cycles?b.cycles:!1,d=b.cmp&&function(a){return function(b){return function(c,d){return a({key:c,value:b[c]},{key:d,value:b[d]})}}}(b.cmp),e=[];return function X(a){a&&a.toJSON&&"function"===typeof a.toJSON&&(a=a.toJSON());if(void 0!==a){if("number"===typeof a)return isFinite(a)?""+a:"null";if("object"!==typeof a)return JSON.stringify(a);var b,g;if(Array.isArray(a)){g="[";for(b=
0;b<a.length;b++)b&&(g+=","),g+=X(a[b])||"null";return g+"]"}if(null===a)return"null";if(-1!==e.indexOf(a)){if(c)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var f=e.push(a)-1,k=Object.keys(a).sort(d&&d(a));g="";for(b=0;b<k.length;b++){var h=k[b],l=X(a[h]);l&&(g&&(g+=","),g+=JSON.stringify(h)+":"+l)}e.splice(f,1);return"{"+g+"}"}}(a)}Object.defineProperty(a,"__esModule",{value:!0});b=function(){return function(a){this.value=a}}();var V=function(){return function(a){this.value=
a}}(),na=function(){return function(a){this.fn=a}}(),T=function(){return function(a){this.fn=a}}();a.NativeFunction=na;a.ImplicitResult=V;a.ReturnResult=b;a.SizzleFunction=T;a.isVersion4=0===c.version.indexOf("4.");a.voidOperation={type:"VOID"};a.breakResult={type:"BREAK"};a.continueResult={type:"CONTINUE"};a.multiReplace=r;a.isFunctionParameter=z;a.isSimpleType=function(b){return x(b)||n(b)||B(b)||p(b)||null===b||b===a.voidOperation||"number"===typeof b?!0:!1};a.defaultUndefined=function(a,b){return void 0===
a?b:a};a.isString=x;a.isBoolean=p;a.isNumber=n;a.isArray=A;a.isFeatureCursor=function(a){return a&&void 0!==a.isFeatureCursor};a.isImmutableArray=function(a){return a instanceof h};a.isDate=B;a.pcCheck=function(a,b,c){if(a.length<b||a.length>c)throw Error("Function called with wrong number of Parameters");};a.generateUUID=function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"===b?
c:c&3|8).toString(16)})};a.formatNumber=C;a.formatDate=F;a.standardiseDateFormat=D;a.greaterThanLessThan=function(b,c,d){if(null===b){if(null===c||c===a.voidOperation)return H(null,null,d);if(n(c))return H(0,c,d);if(x(c)||p(c))return H(0,ba(c),d);if(B(c))return H(0,c.getTime(),d)}if(b===a.voidOperation){if(null===c||c===a.voidOperation)return H(null,null,d);if(n(c))return H(0,c,d);if(x(c)||p(c))return H(0,ba(c),d);if(B(c))return H(0,c.getTime(),d)}else if(n(b)){if(n(c))return H(b,c,d);if(p(c))return H(b,
ba(c),d);if(null===c||c===a.voidOperation)return H(b,0,d);if(x(c))return H(b,ba(c),d);if(B(c))return H(b,c.getTime(),d)}else if(x(b)){if(x(c))return H(J(b),J(c),d);if(B(c))return H(ba(b),c.getTime(),d);if(n(c))return H(ba(b),c,d);if(null===c||c===a.voidOperation)return H(ba(b),0,d);if(p(c))return H(ba(b),ba(c),d)}else if(B(b)){if(B(c))return H(b,c,d);if(null===c||c===a.voidOperation)return H(b.getTime(),0,d);if(n(c))return H(b.getTime(),c,d);if(p(c)||x(c))return H(b.getTime(),ba(c),d)}else if(p(b)){if(p(c))return H(b,
c,d);if(n(c))return H(ba(b),ba(c),d);if(B(c))return H(ba(b),c.getTime(),d);if(null===c||c===a.voidOperation)return H(ba(b),0,d);if(x(c))return H(ba(b),ba(c),d)}return!E(b,c)||"\x3c\x3d"!==d&&"\x3e\x3d"!==d?!1:!0};a.equalityTest=E;a.toString=J;a.toNumberArray=function(a){var b=[];if(!1===A(a))return null;if(a instanceof h){for(var c=0;c<a.length();c++)b[c]=ba(a.get(c));return b}for(c=0;c<a.length;c++)b[c]=ba(a[c]);return b};a.toStringExplicit=ha;a.toNumber=ba;a.toDate=function(a,b){return B(a)?a:x(a)&&
(a=e(a,[void 0===b||null===b||""===b?e.ISO_8601:b]),a.isValid())?a.toDate():null};a.toDateM=function(a,b){return B(a)?e(a):x(a)&&(a=e(a,[void 0===b||null===b||""===b?e.ISO_8601:b]),a.isValid())?a:null};a.toBoolean=function(a){if(p(a))return a;if(x(a)){if(a=a.toLowerCase(),"true"===a)return!0}else if(n(a))return 0===a||isNaN(a)?!1:!0;return!1};a.fixSpatialReference=function(a,b){if(null===a||void 0===a)return null;if(null===a.spatialReference||void 0===a.spatialReference)a.spatialReference=b;return a};
a.fixNullGeometry=function(a){return null===a?null:a instanceof v?"NaN"===a.x||null===a.x||isNaN(a.x)?null:a:a instanceof w?0===a.rings.length?null:a:a instanceof y?0===a.paths.length?null:a:a instanceof t?0===a.points.length?null:a:a instanceof m?"NaN"===a.xmin||null===a.xmin||isNaN(a.xmin)?null:a:null};a.getDomainValue=function(a,b){if(!a||!a.domain)return null;var c=null;b="string"===a.field.type||"esriFieldTypeString"===a.field.type?J(b):ba(b);for(var d=0;d<a.domain.codedValues.length;d++){var e=
a.domain.codedValues[d];e.code===b&&(c=e)}return null===c?null:c.name};a.getDomainCode=function(a,b){if(!a||!a.domain)return null;var c=null;b=J(b);for(var d=0;d<a.domain.codedValues.length;d++){var e=a.domain.codedValues[d];e.name===b&&(c=e)}return null===c?null:c.code};a.getDomain=function(a,b,c,d){void 0===c&&(c=null);if(!b||!b.fields)return null;for(var e=null,g=0;g<b.fields.length;g++){var f=b.fields[g];f.name.toLowerCase()===a.toString().toLowerCase()&&(e=f)}if(null===e)return null;var k,h;
d||(d=c&&b.typeIdField&&c._field(b.typeIdField));null!=d&&b.types.some(function(a){return a.id===d?((k=a.domains&&a.domains[e.name])&&"inherited"===k.type&&(k=Q(e.name,b),h=!0),!0):!1});h||k||(k=Q(a,b));return{field:e,domain:k}};a.stableStringify=Y;a.autoCastFeatureToGeometry=function(a){if(null===a)return null;for(var b=[],c=0;c<a.length;c++){var d=a[c];d&&d.declaredClass&&"esri.arcade.Feature"===d.declaredClass?b.push(d.geometry()):b.push(d)}return b}})},"esri/arcade/FunctionWrapper":function(){define(["require",
"exports"],function(b,a){return function(){return function(a,b){this.context=this.definition=null;this.definition=a;this.context=b}}()})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","./ImmutablePointArray"],function(b,a,f,c,e){return function(a){function b(b,c,e,g,f){b=a.call(this,b)||this;b._lazyPath=[];b._hasZ=!1;b._hasM=!1;b._hasZ=e;b._hasM=g;b._spRef=c;b._cacheId=f;return b}f(b,a);b.prototype.get=function(a){if(void 0===
this._lazyPath[a]){var b=this._elements[a];if(void 0===b)return;this._lazyPath[a]=new e(b,this._spRef,this._hasZ,this._hasM,this._cacheId,a)}return this._lazyPath[a]};b.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof b?!1:a.getUniqueHash()===this.getUniqueHash()};b.prototype.getUniqueHash=function(){return this._cacheId.toString()};return b}(c)})},"esri/arcade/ImmutablePointArray":function(){define("require exports ../core/tsSupport/extendsHelper ../kernel ./ImmutableArray ../geometry/Point".split(" "),
function(b,a,f,c,e,l){var h=0===c.version.indexOf("4.");return function(a){function b(b,c,d,e,f,k){b=a.call(this,b)||this;b._lazyPt=[];b._hasZ=!1;b._hasM=!1;b._spRef=c;b._hasZ=d;b._hasM=e;b._cacheId=f;b._partId=k;return b}f(b,a);b.prototype.get=function(a){if(void 0===this._lazyPt[a]){var b=this._elements[a];if(void 0===b)return;var c=this._hasZ,d=this._hasM,e=null,e=c&&!d?new l(b[0],b[1],b[2],void 0,this._spRef):d&&c?new l(b[0],b[1],void 0,b[2],this._spRef):c&&d?new l(b[0],b[1],b[2],b[3],this._spRef):
new l(b[0],b[1],this._spRef);h?e.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+a.toString():e.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+a.toString());this._lazyPt[a]=e}return this._lazyPt[a]};b.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof b?!1:a.getUniqueHash()===this.getUniqueHash()};b.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return b}(e)})},
"esri/arcade/Feature":function(){define("require exports ../core/tsSupport/assignHelper ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/support/jsonUtils".split(" "),function(b,a,f,c,e,l,h,d,k){return function(){function a(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=null;this.immutable=this.immutable=this._datesfixed=!0}a.createFromGraphic=function(b){var c=new a;c._geometry=b.geometry;c.attributes=void 0===
b.attributes?{}:null===b.attributes?{}:b.attributes;b._sourceLayer?(c._layer=b._sourceLayer,c._datesfixed=!1):b._layer?(c._layer=b._layer,c._datesfixed=!1):b.layer&&(c._layer=b.layer,c._datesfixed=!1);return c};a.createFromArcadeFeature=function(b){var c=new a;c._datesfixed=b._datesfixed;c.attributes=b.attributes;c._geometry=b._geometry;b._layer&&(c._layer=b._layer);return c};a.createFromArcadeDictionary=function(b){var d=new a;d.attributes=b.field("attributes");null!==d.attributes?d.attributes instanceof
c?(d.attributes=d.attributes.attributes,null===d.attributes&&(d.attributes={})):d.attributes={}:d.attributes={};d._geometry=b.field("geometry");null!==d._geometry&&(d._geometry instanceof c?d._geometry=a.parseGeometryFromDictionary(d._geometry):d._geometry instanceof h||(d._geometry=null));return d};a.createFromGraphicLikeObject=function(b,c,d){void 0===d&&(d=null);var e=new a;null===c&&(c={});e.attributes=c;e._geometry=b;e._layer=d;e._layer&&(e._datesfixed=!1);return e};a.prototype.repurposeFromGraphicLikeObject=
function(a,b,c){void 0===c&&(c=null);null===b&&(b={});this.attributes=b;this._geometry=a;this._datesfixed=(this._layer=c)?!1:!0};a.prototype.castToText=function(){var a="",b;for(b in this.attributes){""!==a&&(a+=",");var c=this.attributes[b];null==c?a+=JSON.stringify(b)+":null":l.isBoolean(c)||l.isNumber(c)||l.isString(c)?a+=JSON.stringify(b)+":"+JSON.stringify(c):c instanceof h?a+=JSON.stringify(b)+":"+l.toStringExplicit(c):c instanceof e?a+=JSON.stringify(b)+":"+l.toStringExplicit(c):c instanceof
Array?a+=JSON.stringify(b)+":"+l.toStringExplicit(c):c instanceof Date?a+=JSON.stringify(b)+":"+JSON.stringify(c):null!==c&&"object"===typeof c&&void 0!==c.castToText&&(a+=JSON.stringify(b)+":"+c.castToText())}return'{"geometry":'+(null===this.geometry()?"null":l.toStringExplicit(this.geometry()))+',"attributes":{'+a+"}}"};a.prototype._fixDates=function(){for(var a=[],b=0;b<this._layer.fields.length;b++){var c=this._layer.fields[b];"date"!==c.type&&"esriFieldTypeDate"!==c.type||a.push(c.name)}0<a.length&&
this._fixDateFields(a);this._datesfixed=!0};a.prototype._fixDateFields=function(a){this.attributes=f({},this.attributes);for(var b=0;b<a.length;b++){var c=this.attributes[a[b]];if(null!==c)if(void 0===c)for(var d in this.attributes){if(d.toLowerCase()===a[b]){c=this.attributes[d];null===c||c instanceof Date||(this.attributes[d]=new Date(c));break}}else c instanceof Date||(this.attributes[a[b]]=new Date(c))}};a.prototype.geometry=function(){return null===this._geometry||this._geometry instanceof h?
this._geometry:this._geometry=k.fromJson(this._geometry)};a.prototype.field=function(a){!1===this._datesfixed&&this._fixDates();var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];if(this._hasFieldDefinition(b))return null;throw Error("Field not Found");};a.prototype._hasFieldDefinition=function(a){if(null===this._layer)return!1;for(var b=0;b<this._layer.fields.length;b++)if(this._layer.fields[b].name.toLowerCase()===
a)return!0;return!1};a.prototype._field=function(a){!1===this._datesfixed&&this._fixDates();var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];return null};a.prototype.setField=function(a,b){if(this.immutable)throw Error("Feature is Immutable");if(!1===l.isSimpleType(b))throw Error("Illegal Value Assignment to Feature");var c=a.toLowerCase();if(void 0===this.attributes[a])for(var d in this.attributes)if(d.toLowerCase()===
c){this.attributes[d]=b;return}this.attributes[a]=b};a.prototype.hasField=function(a){var b=a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var c in this.attributes)if(c.toLowerCase()===b)return!0;return this._hasFieldDefinition(b)?!0:!1};a.prototype.keys=function(){var a=[],b={},c;for(c in this.attributes)a.push(c),b[c.toLowerCase()]=1;if(null!==this._layer)for(c=0;c<this._layer.fields.length;c++){var d=this._layer.fields[c];1!==b[d.name.toLowerCase()]&&a.push(d.name)}return a=a.sort()};
a.parseGeometryFromDictionary=function(b){b=a.convertDictionaryToJson(b,!0);void 0!==b.spatialreference&&(b.spatialReference=b.spatialreference,delete b.spatialreference);void 0!==b.rings&&(b.rings=this.fixPathArrays(b.rings,!0===b.hasZ,!0===b.hasM));void 0!==b.paths&&(b.paths=this.fixPathArrays(b.paths,!0===b.hasZ,!0===b.hasM));void 0!==b.points&&(b.points=this.fixPointArrays(b.points,!0===b.hasZ,!0===b.hasM));return k.fromJSON(b)};a.fixPathArrays=function(a,b,c){var d=[];if(a instanceof Array)for(var g=
0;g<a.length;g++)d.push(this.fixPointArrays(a[g],b,c));else if(a instanceof e)for(g=0;g<a.length();g++)d.push(this.fixPointArrays(a.get(g),b,c));return d};a.fixPointArrays=function(a,b,c){var g=[];if(a instanceof Array)for(var f=0;f<a.length;f++){var k=a[f];k instanceof d?b&&c?g.push([k.x,k.y,k.z,k.m]):b?g.push([k.x,k.y,k.z]):c?g.push([k.x,k.y,k.m]):g.push([k.x,k.y]):g.push(k)}else if(a instanceof e)for(f=0;f<a.length();f++)k=a.get(f),k instanceof d?b&&c?g.push([k.x,k.y,k.z,k.m]):b?g.push([k.x,k.y,
k.z]):c?g.push([k.x,k.y,k.m]):g.push([k.x,k.y]):g.push(k);return g};a.convertDictionaryToJson=function(b,d){void 0===d&&(d=!1);var e={},g;for(g in b.attributes){var f=b.attributes[g];f instanceof c&&(f=a.convertDictionaryToJson(f));d?e[g.toLowerCase()]=f:e[g]=f}return e};a.parseAttributesFromDictionary=function(a){var b={},c;for(c in a.attributes){var d=a.attributes[c];if(l.isSimpleType(d))b[c]=d;else throw Error("Illegal Argument");}return b};a.fromJson=function(b){var c=null;null!==b.geometry&&
void 0!==b.geometry&&(c=k.fromJSON(b.geometry));var d={};if(null!==b.attributes&&void 0!==b.attributes)for(var e in b.attributes){var g=b.attributes[e];if(l.isString(g)||l.isNumber(g)||l.isBoolean(g)||l.isDate(g))d[e]=g;else throw Error("Illegal Argument");}return a.createFromGraphicLikeObject(c,d,null)};a.prototype.domainValueLookup=function(a,b,c){if(null===this._layer||!this._layer.fields)return null;c=l.getDomain(a,this._layer,this,c);if(void 0===b)try{b=this.field(a)}catch(w){return null}return l.getDomainValue(c,
b)};a.prototype.domainCodeLookup=function(a,b,c){if(null===this._layer||!this._layer.fields)return null;a=l.getDomain(a,this._layer,this,c);return l.getDomainCode(a,b)};return a}()})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(b,a){function f(a,b,c,d){return"0"!==a.min&&c.length<Number(a.min)||"*"!==a.max&&c.length>Number(a.max)?-2:1}function c(a,b,c){if(null!==c.localScope&&void 0!==c.localScope[a.toLowerCase()]){var d=c.localScope[a.toLowerCase()];if("FormulaFunction"===
d.type||"any"===d.type)return void 0===d.signature&&(d.signature={min:"0",max:"*"}),f(d.signature,a,b,c)}return void 0!==c.globalScope[a.toLowerCase()]&&(d=c.globalScope[a.toLowerCase()],"FormulaFunction"===d.type||"any"===d.type)?(void 0===d.signature&&(d.signature={min:"0",max:"*"}),f(d.signature,a,b,c)):-1}function e(a,b){void 0===b&&(b=!0);var c=v(a,"SYNTAX","UNREOGNISED");try{switch(a.type){case "VariableDeclarator":return null!==a.init&&"FunctionExpression"===a.init.type?v(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):
"Identifier"!==a.id.type?v(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==a.init?e(a.init,!1):"";case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(c=e(a.declarations[d],b),""!==c)return c;return"";case "ForInStatement":c=e(a.left,b);if(""!==c)break;if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return v(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return v(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return v(a,"SYNTAX",
"LEFTNOTVAR");c=e(a.right,b);if(""!==c)break;c=e(a.body,b);if(""!==c)break;return"";case "ForStatement":if(null!==a.test&&(c=e(a.test,b),""!==c))break;if(null!==a.init&&(c=e(a.init,b),""!==c))break;if(null!==a.update&&(c=e(a.update,b),""!==c))break;if(null!==a.body&&(c=e(a.body,b),""!==c))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":c=e(a.test,b);if(""!==c)break;if(null!==a.consequent&&(c=e(a.consequent,!1),""!==
c))break;if(null!==a.alternate&&(c=e(a.alternate,!1),""!==c))break;return"";case "BlockStatement":for(var g=[],d=0;d<a.body.length;d++)"EmptyStatement"!==a.body[d].type&&g.push(a.body[d]);a.body=g;for(d=0;d<a.body.length;d++)if(c=e(a.body[d],b),""!==c)return c;return"";case "FunctionDeclaration":return!1===b?v(a,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==a.id.type?v(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):e(a.body,!1);case "ReturnStatement":return null!==a.argument?e(a.argument,b):"";case "UpdateExpression":return"Identifier"!==
a.argument.type&&"MemberExpression"!==a.argument.type?v(a,"SYNTAX","ASSIGNMENTTOVARSONLY"):e(a.argument,b);case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return v(a,"SYNTAX","ASSIGNMENTTOVARSONLY");c=e(a.left,b);if(""!==c)break;switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return v(a,"SYNTAX","OPERATORNOTRECOGNISED")}return e(a.right,!1);case "ExpressionStatement":return e(a.expression,!1);
case "Identifier":c="";break;case "MemberExpression":c=e(a.object,b);if(""!==c)break;return!0===a.computed?e(a.property,b):"";case "Literal":return"";case "ThisExpression":return v(a,"SYNTAX","NOTSUPPORTED");case "CallExpression":if("Identifier"!==a.callee.type)return v(a,"SYNTAX","ONLYNODESSUPPORTED");c="";for(d=0;d<a.arguments.length;d++)if(c=e(a.arguments[d],b),""!==c)return c;return"";case "UnaryExpression":c=e(a.argument,b);break;case "BinaryExpression":c=e(a.left,b);if(""!==c)break;c=e(a.right,
b);if(""!==c)break;switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return v(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":c=e(a.left,b);if(""!==c)break;c=e(a.right);if(""!==c)break;switch(a.operator){case "\x26\x26":case "||":break;default:return v(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return v(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":c=
"";for(d=0;d<a.elements.length&&(c=e(a.elements[d],b),""===c);d++);break;case "Array":return v(a,"SYNTAX","NOTSUPPORTED");case "ObjectExpression":c="";for(d=0;d<a.properties.length&&(c="",null!==a.properties[d].key&&("Literal"!==a.properties[d].key.type&&"Identifier"!==a.properties[d].key.type&&(c=v(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[d].key.type&&(g=a.properties[d].key.value,"string"===typeof g||g instanceof String||(c=v(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")))),
""===c&&(c=e(a.properties[d],b)),""===c);d++);break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return v(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(c=e(a.key,b),""!==c))break;c=e(a.value,b)}return c}catch(C){throw C;}}function l(a,b){var d=v(a,"SYNTAX","UNREOGNISED"),e=null,f="";try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type)return v(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");a.id.name.toLowerCase();var k=null===
a.init?"":l(a.init,b);if(""!==k)return k;null===b.localScope?b.globalScope[a.id.name.toLowerCase()]={type:"any"}:b.localScope[a.id.name.toLowerCase()]={type:"any"};return"";case "FunctionDeclaration":e=m(a.id.name.toLowerCase(),a,b);f=g(a,b);if(""!==f)return f;if(null!==b.localScope)return v(a,"SYNTAX","GLOBALFUNCTIONSONLY");e.isnative=!1;b.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[e]};return"";case "VariableDeclaration":for(var d="",h=0;h<a.declarations.length&&(d=l(a.declarations[h],
b),""===d);h++);break;case "IfStatement":d=l(a.test,b);if(""!==d)break;if("AssignmentExpression"===a.test.type||"UpdateExpression"===a.test.type)return v(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==a.consequent&&(d=l(a.consequent,b),""!==d))break;if(null!==a.alternate&&(d=l(a.alternate,b),""!==d))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(h=0;h<a.body.length;h++)if(d=l(a.body[h],b),""!==d)return d;return"";case "ReturnStatement":return null!==a.argument?
l(a.argument,b):"";case "ForInStatement":if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return v(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return v(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return v(a,"SYNTAX","LEFTNOTVAR");d=l(a.left,b);if(""!==d)break;d=l(a.right,b);if(""!==d)break;d=l(a.body,b);if(""!==d)break;return"";case "ForStatement":if(null!==a.init&&(d=l(a.init,b),""!==d))break;if(null!==a.test&&(d=l(a.test,b),""!==d))break;
if(null!==a.body&&(d=l(a.body,b),""!==d))break;if(null!==a.update&&(d=l(a.update,b),""!==d))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type)return v(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var t=!1;if("MemberExpression"===a.argument.type)return l(a.argument,b);null!==b.localScope&&void 0!==b.localScope[a.argument.name.toLowerCase()]&&(t=!0);void 0!==b.globalScope[a.argument.name.toLowerCase()]&&
(t=!0);return!1===t?"Identifier "+a.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return v(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var p=l(a.right,b);if(""!==p)return p;t=!1;if("MemberExpression"===a.left.type)return p=l(a.left,b),""!==p?p:"";null!==b.localScope&&void 0!==b.localScope[a.left.name.toLowerCase()]&&(t=!0);void 0!==b.globalScope[a.left.name.toLowerCase()]&&(t=!0);return!1===t?"Identifier "+a.left.name+
" has not been declared.":"";case "ExpressionStatement":return l(a.expression,b);case "Identifier":var x=a.name.toLowerCase();if(null!==b.localScope&&void 0!==b.localScope[x])return"";d=void 0!==b.globalScope[x]?"":v(a,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":d=l(a.object,b);if(""!==d)break;return!0===a.computed?l(a.property,b):"";case "Literal":return"";case "ThisExpression":d=v(a,"SYNTAX","NOTSUPPORTED");break;case "CallExpression":if("Identifier"!==a.callee.type)return v(a,"SYNTAX",
"ONLYNODESSUPPORTED");d="";for(h=0;h<a.arguments.length;h++)if(d=l(a.arguments[h],b),""!==d)return d;var r=c(a.callee.name,a.arguments,b);-1===r&&(d=v(a,"SYNTAX","NOTFOUND"));-2===r&&(d=v(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":d=l(a.argument,b);break;case "BinaryExpression":d=l(a.left,b);if(""!==d)break;d=l(a.right,b);if(""!==d)break;return"";case "LogicalExpression":d=l(a.left,b);if(""!==d)break;if("AssignmentExpression"===a.left.type||"UpdateExpression"===a.left.type)return v(a.left,
"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");d=l(a.right,b);if(""!==d)break;return"AssignmentExpression"===a.right.type||"UpdateExpression"===a.right.type?v(a.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return v(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":d="";for(h=0;h<a.elements.length&&(d=l(a.elements[h],b),""===d);h++);break;case "ObjectExpression":d="";for(h=0;h<a.properties.length;h++){d="";if(null!==a.properties[h].key&&("Literal"!==a.properties[h].key.type&&
"Identifier"!==a.properties[h].key.type&&(d=v(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[h].key.type)){var w=a.properties[h].key.value;"string"===typeof w||w instanceof String||(d=v(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===d&&(d=l(a.properties[h],b));if(""!==d)break}break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return v(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(d=l(a.key,b),""!==d))break;d=l(a.value,b);break;case "Array":return v(a,
"SYNTAX","NOTSUPPORTED")}return d}catch(ea){throw ea;}}function h(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==a.init?h(a.init,b):c;case "FunctionDeclaration":return h(a.body,b);case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(h(a.declarations[d],b))return!0;return c;case "IfStatement":return h(a.test,b)||null!==a.consequent&&h(a.consequent,b)||null!==a.alternate&&h(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(d=0;d<
a.body.length;d++)if(h(a.body[d],b))return!0;return c;case "ReturnStatement":return null!==a.argument?h(a.argument,b):c;case "UpdateExpression":return h(a.argument,b);case "AssignmentExpression":return(c=h(a.right,b))?c:h(a.left,b);case "ExpressionStatement":return h(a.expression,b);case "ForInStatement":return(c=h(a.left,b))||(c=h(a.right,b))?c:c=h(a.body,b);case "ForStatement":if(null!==a.init&&(c=h(a.init,b))||null!==a.test&&(c=h(a.test,b))||null!==a.body&&(c=h(a.body,b)))return c;null!==a.update&&
(c=h(a.update,b));return c;case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return b.toLowerCase()===a.name.toLowerCase();case "MemberExpression":if(c=h(a.object,b))return c;!0===a.computed&&(c=h(a.property,b));return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(d=0;d<a.arguments.length;d++)h(a.arguments[d],b)&&(c=!0);return c;case "ArrayExpression":for(d=0;d<a.elements.length;d++)h(a.elements[d],b)&&
(c=!0);return c;case "UnaryExpression":return h(a.argument,b);case "BinaryExpression":return(c=h(a.left,b))?c:c=h(a.right,b);case "LogicalExpression":return(c=h(a.left,b))?c:c=h(a.right,b);case "ObjectExpression":for(d=0;d<a.properties.length;d++)h(a.properties[d],b)&&(c=!0);return c;case "Property":return c=h(a.value,b);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(B){throw B;}}function d(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==
a.init?d(a.init,b):c;case "FunctionDeclaration":return d(a.body,b);case "VariableDeclaration":for(var e=0;e<a.declarations.length;e++)if(d(a.declarations[e],b))return!0;return c;case "IfStatement":return d(a.test,b)||null!==a.consequent&&d(a.consequent,b)||null!==a.alternate&&d(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(e=0;e<a.body.length;e++)if(d(a.body[e],b))return!0;return c;case "ReturnStatement":return null!==a.argument?d(a.argument,b):c;case "UpdateExpression":return d(a.argument,
b);case "AssignmentExpression":return d(a.left,b)?!0:d(a.right,b);case "ExpressionStatement":return d(a.expression,b);case "ForInStatement":return(c=d(a.left,b))||(c=d(a.right,b))?c:c=d(a.body,b);case "ForStatement":if(null!==a.init&&(c=d(a.init,b))||null!==a.test&&(c=d(a.test,b))||null!==a.body&&(c=d(a.body,b)))return c;null!==a.update&&(c=d(a.update,b));return c;case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":if(c=
d(a.object,b))return c;!0===a.computed&&(c=d(a.property,b));return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":if(a.callee.name.toLowerCase()===b.toLowerCase())return!0;for(e=0;e<a.arguments.length;e++)d(a.arguments[e],b)&&(c=!0);return c;case "ArrayExpression":for(e=0;e<a.elements.length;e++)d(a.elements[e],b)&&(c=!0);return c;case "UnaryExpression":return d(a.argument,b);case "BinaryExpression":return(c=d(a.left,b))?c:c=d(a.right,b);case "LogicalExpression":return(c=
d(a.left,b))?c:c=d(a.right,b);case "ConditionalExpression":return c;case "ObjectExpression":for(e=0;e<a.properties.length;e++)d(a.properties[e],b)&&(c=!0);return c;case "Property":return c=d(a.value,b);case "Array":return c;default:return c}}catch(B){throw B;}}function k(a,b){var c=[],d;try{switch(a.type){case "VariableDeclarator":return null!==a.init?k(a.init,b):c;case "FunctionDeclaration":return k(a.body,b);case "VariableDeclaration":for(var e=0;e<a.declarations.length;e++)d=k(a.declarations[e],
b),c=c.concat(d);return c;case "ForInStatement":return d=k(a.left,b),c=c.concat(d),d=k(a.right,b),c=c.concat(d),d=k(a.body,b),c=c.concat(d);case "ForStatement":return null!==a.init&&(d=k(a.init,b),c=c.concat(d)),null!==a.test&&(d=k(a.test,b),c=c.concat(d)),null!==a.body&&(d=k(a.body,b),c=c.concat(d)),null!==a.update&&(d=k(a.update,b),c=c.concat(d)),c;case "IfStatement":return d=k(a.test,b),c=c.concat(d),null!==a.consequent&&(d=k(a.consequent,b),c=c.concat(d)),null!==a.alternate&&(d=k(a.alternate,
b),c=c.concat(d)),c;case "EmptyStatement":return c;case "BlockStatement":for(e=0;e<a.body.length;e++)d=k(a.body[e],b),c=c.concat(d);return c;case "ReturnStatement":return null!==a.argument?k(a.argument,b):c;case "UpdateExpression":return k(a.argument,b);case "AssignmentExpression":return c=k(a.left,b),c=c.concat(k(a.right,b));case "ExpressionStatement":return k(a.expression,b);case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":if("Identifier"!==
a.object.type)return c;if(!1===a.computed)c.push(a.object.name.toLowerCase()+"."+a.property.name.toLowerCase());else try{"Literal"===a.property.type&&"string"===typeof a.property.value&&c.push(a.object.name.toLowerCase()+"."+a.property.value.toString().toLowerCase())}catch(C){}return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(e=0;e<a.arguments.length;e++)d=k(a.arguments[e],b),c=c.concat(d);return c;case "ArrayExpression":for(e=0;e<a.elements.length;e++)d=k(a.elements[e],
b),c=c.concat(d);return c;case "UnaryExpression":return k(a.argument,b);case "ObjectExpression":for(e=0;e<a.properties.length;e++)d=k(a.properties[e],b),c=c.concat(d);return c;case "Property":return k(a.value,b);case "BinaryExpression":return d=k(a.left,b),c=c.concat(d),d=k(a.right,b),c=c.concat(d);case "LogicalExpression":return d=k(a.left,b),c=c.concat(d),d=k(a.right,b),c=c.concat(d);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(C){throw C;}}function m(a,b,
c){c=[];if(void 0!==b.params&&null!==b.params)for(var d=0;d<b.params.length;d++)c.push("any");return{name:a,return:"any",params:c}}function g(a,b){b={globalScope:b.globalScope,localScope:{}};for(var c=0;c<a.params.length;c++)b.localScope[a.params[c].name.toLowerCase()]={type:"any"};return l(a.body,b)}function t(a,b,c,d){var e={};if(void 0===a||null===a)a={};if(void 0===c||null===c)c={};e.infinity={type:"any"};e.textformatting={type:"any"};e.pi={type:"any"};for(var g in b)if("simple"!==d||"simple"===
d&&"a"===b[g].av)e[g]={type:"FormulaFunction",signature:{min:b[g].min,max:b[g].max}},"simple"!==d&&(void 0!==b[g].fmin&&(e[g].signature.min=b[g].fmin),void 0!==b[g].fmax&&(e[g].signature.max=b[g].fmax));for(b=0;b<c.length;b++)g=c[b],e[g.name]={type:"FormulaFunction",signature:g};for(g in a)e[g]=a[g],e[g].type="any";return e}function v(a,b,c){var d="";switch(b){case "SYNTAX":d="Syntax Error: ";break;case "RUNTIME":d="Runtime Error: ";break;default:d="Syntax Error: "}try{switch(a.type){case "IfStatement":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=
" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":d+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":d+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(c){case "GLOBALFUNCTIONSONLY":d+=
" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":d+=" Function Definition must have an identifier"}break;case "VariableDeclaration":d+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(c){case "FUNCTIONVARIABLEDECLARATOR":d+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":d+=" Variable Definition must have an identifier"}break;case "Identifier":d+=" Identifier Not Found. ";d+=a.name;break;case "ObjectExpression":switch(c){case "OBJECTPROPERTYMUSTBESTRING":d+=
" Property name must be a string"}break;case "ForStatement":switch(c){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;case "ForInStatement":switch(c){case "ONLY1VAR":d+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":d+=" Can only declare value for use with IN";break;case "LEFTNOVAR":d+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":d+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":d+=
"This type cannot be used in an IN loop"}break;case "MemberExpression":switch(c){case "PROPERTYNOTFOUND":d+="Cannot find member property. ";d+=!1===a.computed?a.property.name:"";break;case "OUTOFBOUNDS":d+="Out of Bounds. ";d+=!1===a.computed?a.property.name:"";break;case "NOTFOUND":d+="Cannot call member method on null. ";d+=!1===a.computed?a.property.name:"";break;case "INVALIDTYPE":d+="Cannot call member property on object of this type. ",d+=!1===a.computed?a.property.name:""}break;case "Property":switch(c){case "ONLYLITERAL":d+=
"Property names must be literals or identifiers"}break;case "Literal":break;case "ThisExpression":d+="THIS construct is not supported.";case "CallExpression":switch(c){case "WRONGSIGNATURE":d+="Function signature does not match: ";d+=a.callee.name;break;case "ONLYNODESUPPORTED":d+="Functions must be declared.";d+=a.callee.name;break;case "NOTAFUNCTION":d+="Not a Function: ";d+=a.callee.name;break;case "NOTFOUND":d+="Function Not Found: "+a.callee.name}break;case "UnaryExpression":switch(c){case "NOTSUPPORTEDUNARYOPERATOR":d+=
"Operator "+a.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":d+="Unary operator "+a.operator+" cannot be used with this argument."}case "BinaryExpression":switch(c){case "OPERATORNOTRECOGNISED":d+="Binary Operator not recognised "+a.operator}break;case "LogicalExpression":switch(c){case "ONLYBOOLEAN":d+="Operator "+a.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":d+="Logical Expression "+
a.operator+" being applied to parameters that are not boolean."}break;case "ConditionalExpression":d+="Conditional statements not supported.";break;case "ArrayExpression":switch(c){case "FUNCTIONCONTEXTILLEGAL":d+=" Cannot Put Function inside Array."}break;case "Array":d+="Expression contains unrecognised array structure.";break;default:d+="Expression contains unrecognised code structures."}}catch(B){throw B;}return d}function w(a,b,c){return{line:a.loc.start.line,character:a.loc.start.column,reason:v(a,
b,c)}}function y(a,b,c,d,e){void 0===e&&(e=!0);b={globalScope:b.globalScope,localScope:{}};for(e=0;e<a.params.length;e++)b.localScope[a.params[e].name.toLowerCase()]={type:"any"};r(a.body,b,c,d,!1)}function r(a,b,d,e,g){void 0===g&&(g=!0);if(null===a)throw Error("Unnexpexted Expression Syntax");var f=null;try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type){e.push(w(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==a.id.type?e.push(w(a,"SYNTAX",
"VARIABLEMUSTHAVEIDENTIFIER")):(a.id.name.toLowerCase(),null===b.localScope?b.globalScope[a.id.name.toLowerCase()]={type:"any"}:b.localScope[a.id.name.toLowerCase()]={type:"any"});null===a.init?"":r(a.init,b,d,e,g);break;case "FunctionDeclaration":!1===g&&e.push(w(a,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==a.id.type&&e.push(w(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));f=m("",a,b);y(a,b,d,e,g);null!==b.localScope&&e.push(w(a,"SYNTAX","GLOBALFUNCTIONSONLY"));f.isnative=!1;"Identifier"===a.id.type&&
(b.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[f]});break;case "VariableDeclaration":for(var k=0;k<a.declarations.length;k++)r(a.declarations[k],b,d,e,g);break;case "IfStatement":null!==a.test&&(r(a.test,b,d,e,g),"AssignmentExpression"!==a.test.type&&"UpdateExpression"!==a.test.type||e.push(w(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==a.consequent&&r(a.consequent,b,d,e,g);null!==a.alternate&&r(a.alternate,b,d,e,g);break;case "EmptyStatement":break;case "BlockStatement":if(null!==
a.body)for(k=0;k<a.body.length;k++)r(a.body[k],b,d,e,g);break;case "ReturnStatement":null!==a.argument&&r(a.argument,b,d,e,g);break;case "ForInStatement":"VariableDeclaration"===a.left.type?(1<a.left.declarations.length&&e.push(w(a,"SYNTAX","ONLY1VAR")),null!==a.left.declarations[0].init&&e.push(w(a,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==a.left.type&&e.push(w(a,"SYNTAX","LEFTNOTVAR"));r(a.left,b,d,e,g);r(a.right,b,d,e,g);r(a.body,b,d,e,g);break;case "ForStatement":null!==a.init&&r(a.init,b,
d,e,g);null!==a.test&&r(a.test,b,d,e,g);null!==a.body&&r(a.body,b,d,e,g);null!==a.update&&r(a.update,b,d,e,g);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?e.push(w(a,"SYNTAX","ASSIGNMENTTOVARSONLY")):("Identifier"===a.argument.type&&(f=!1,!1===d&&(null!==b.localScope&&void 0!==b.localScope[a.argument.name.toLowerCase()]&&(f=!0),void 0!==b.globalScope[a.argument.name.toLowerCase()]&&(f=
!0),!1===f&&e.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."}))),"MemberExpression"===a.argument.type&&r(a.argument,b,d,e,g));break;case "AssignmentExpression":"Identifier"!==a.left.type&&"MemberExpression"!==a.left.type&&e.push(w(a,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:e.push(w(a,"SYNTAX","OPERATORNOTRECOGNISED"))}r(a.right,
b,d,e,g);f=!1;"Identifier"===a.left.type&&(null!==b.localScope&&void 0!==b.localScope[a.left.name.toLowerCase()]&&(f=!0),void 0!==b.globalScope[a.left.name.toLowerCase()]&&(f=!0),!1===d&&!1===f&&e.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."}));"MemberExpression"===a.left.type&&r(a.left,b,d,e,g);break;case "ExpressionStatement":r(a.expression,b,d,e,g);break;case "Identifier":var h=a.name.toLowerCase();
if(null!==b.localScope&&void 0!==b.localScope[h])break;void 0===b.globalScope[h]&&!1===d&&e.push(w(a,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":r(a.object,b,d,e,g);!0===a.computed&&r(a.property,b,d,e,g);break;case "Literal":return"";case "ThisExpression":e.push(w(a,"SYNTAX","NOTSUPPORTED"));break;case "CallExpression":"Identifier"!==a.callee.type&&e.push(w(a,"SYNTAX","ONLYNODESSUPPORTED"));for(k=0;k<a.arguments.length;k++)r(a.arguments[k],b,d,e,g);var l=c(a.callee.name,a.arguments,
b);!1===d&&-1===l&&e.push(w(a,"SYNTAX","NOTFOUND"));-2===l&&e.push(w(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":r(a.argument,b,d,e,g);break;case "BinaryExpression":r(a.left,b,d,e,g);r(a.right,b,d,e,g);switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:e.push(w(a,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(a.operator){case "\x26\x26":case "||":break;
default:e.push(w(a,"SYNTAX","OPERATORNOTRECOGNISED"))}r(a.left,b,d,e,g);"AssignmentExpression"!==a.left.type&&"UpdateExpression"!==a.left.type||e.push(w(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));r(a.right,b,d,e,g);"AssignmentExpression"!==a.right.type&&"UpdateExpression"!==a.right.type||e.push(w(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":e.push(w(a,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(k=0;k<a.elements.length;k++)r(a.elements[k],
b,d,e,g);break;case "Array":e.push(w(a,"SYNTAX","NOTSUPPORTED"));case "ObjectExpression":for(k=0;k<a.properties.length;k++)r(a.properties[k],b,d,e,g);break;case "Property":"Literal"!==a.key.type&&"Identifier"!==a.key.type&&e.push(w(a,"SYNTAX","ONLYLITERAL"));"Literal"===a.key.type&&r(a.key,b,d,e,g);r(a.value,b,d,e,g);break;default:e.push(w(a,"SYNTAX","UNRECOGNISED"))}}catch(E){e.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Unnexpected Syntax"})}}function z(a,
b){var c=[],d;try{switch(a.type){case "VariableDeclarator":return null!==a.init?z(a.init,b):c;case "FunctionDeclaration":return z(a.body,b);case "VariableDeclaration":for(var e=0;e<a.declarations.length;e++)d=z(a.declarations[e],b),c=c.concat(d);return c;case "ForInStatement":return d=z(a.left,b),c=c.concat(d),d=z(a.right,b),c=c.concat(d),d=z(a.body,b),c=c.concat(d);case "ForStatement":return null!==a.init&&(d=z(a.init,b),c=c.concat(d)),null!==a.test&&(d=z(a.test,b),c=c.concat(d)),null!==a.body&&
(d=z(a.body,b),c=c.concat(d)),null!==a.update&&(d=z(a.update,b),c=c.concat(d)),c;case "IfStatement":return d=z(a.test,b),c=c.concat(d),null!==a.consequent&&(d=z(a.consequent,b),c=c.concat(d)),null!==a.alternate&&(d=z(a.alternate,b),c=c.concat(d)),c;case "EmptyStatement":return c;case "BlockStatement":for(e=0;e<a.body.length;e++)d=z(a.body[e],b),c=c.concat(d);return c;case "ReturnStatement":return null!==a.argument?z(a.argument,b):c;case "UpdateExpression":return z(a.argument,b);case "AssignmentExpression":return c=
z(a.left,b),c=c.concat(z(a.right,b));case "ExpressionStatement":return z(a.expression,b);case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(e=0;e<a.arguments.length;e++)d=z(a.arguments[e],b),c=c.concat(d);c.push(a.callee.name.toLowerCase());return c;case "ArrayExpression":for(e=0;e<a.elements.length;e++)d=z(a.elements[e],
b),c=c.concat(d);return c;case "UnaryExpression":return z(a.argument,b);case "ObjectExpression":for(e=0;e<a.properties.length;e++)d=z(a.properties[e],b),c=c.concat(d);return c;case "Property":return z(a.value,b);case "BinaryExpression":return d=z(a.left,b),c=c.concat(d),d=z(a.right,b),c=c.concat(d);case "LogicalExpression":return d=z(a.left,b),c=c.concat(d),d=z(a.right,b),c=c.concat(d);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(C){throw C;}}Object.defineProperty(a,
"__esModule",{value:!0});a.functionDecls={concatenate:{min:"0",max:"*",av:"a"},split:{min:"2",max:"4",av:"a"},guid:{min:"0",max:"1",av:"a"},today:{min:"0",max:"0",av:"a"},now:{min:"0",max:"0",av:"a"},timestamp:{min:"0",max:"0",av:"a"},day:{min:"1",max:"1",av:"a"},month:{min:"1",max:"1",av:"a"},year:{min:"1",max:"1",av:"a"},hour:{min:"1",max:"1",av:"a"},second:{min:"1",max:"1",av:"a"},millisecond:{min:"1",max:"1",av:"a"},minute:{min:"1",max:"1",av:"a"},weekday:{min:"1",max:"1",av:"a"},toutc:{min:"1",
max:"1",av:"a"},tolocal:{min:"1",max:"1",av:"a"},date:{min:"0",max:"7",av:"a"},datediff:{min:"2",max:"3",av:"a"},dateadd:{min:"2",max:"3",av:"a"},trim:{min:"1",max:"1",av:"a"},text:{min:"1",max:"2",av:"a"},left:{min:"2",max:"2",av:"a"},right:{min:"2",max:"2",av:"a"},mid:{min:"2",max:"3",av:"a"},upper:{min:"1",max:"1",av:"a"},proper:{min:"1",max:"2",av:"a"},lower:{min:"1",max:"1",av:"a"},find:{min:"2",max:"3",av:"a"},iif:{min:"3",max:"3",av:"a"},decode:{min:"2",max:"*",av:"a"},when:{min:"2",max:"*",
av:"a"},defaultvalue:{min:"2",max:"2",av:"a"},isempty:{min:"1",max:"1",av:"a"},domaincode:{min:"3",max:"4",av:"a"},domainname:{min:"2",max:"4",av:"a"},polygon:{min:"1",max:"1",av:"a"},point:{min:"1",max:"1",av:"a"},polyline:{min:"1",max:"1",av:"a"},extent:{min:"1",max:"1",av:"a"},multipoint:{min:"1",max:"1",av:"a"},geometry:{min:"1",max:"1",av:"a"},count:{min:"0",max:"*",av:"a"},number:{min:"1",max:"2",av:"a"},acos:{min:"1",max:"1",av:"a"},asin:{min:"1",max:"1",av:"a"},atan:{min:"1",max:"1",av:"a"},
atan2:{min:"2",max:"2",av:"a"},ceil:{min:"1",max:"2",av:"a"},floor:{min:"1",max:"2",av:"a"},round:{min:"1",max:"2",av:"a"},cos:{min:"1",max:"1",av:"a"},exp:{min:"1",max:"1",av:"a"},log:{min:"1",max:"1",av:"a"},min:{min:"0",max:"*",av:"a"},constrain:{min:"3",max:"3",av:"a"},console:{min:"0",max:"*",av:"a"},max:{min:"0",max:"*",av:"a"},pow:{min:"2",max:"2",av:"a"},random:{min:"0",max:"0",av:"a"},sqrt:{min:"1",max:"1",av:"a"},sin:{min:"1",max:"1",av:"a"},tan:{min:"1",max:"1",av:"a"},abs:{min:"1",max:"1",
av:"a"},isnan:{min:"1",max:"1",av:"a"},stdev:{min:"0",max:"*",av:"a"},average:{min:"0",max:"*",av:"a"},mean:{min:"0",max:"*",av:"a"},sum:{min:"0",max:"*",av:"a"},variance:{min:"0",max:"*",av:"a"},distinct:{min:"0",max:"*",av:"a"},first:{min:"1",max:"1",av:"a"},top:{min:"2",max:"2",av:"a"},boolean:{min:"1",max:"1",av:"a"},dictionary:{min:"0",max:"*",av:"a"},typeof:{min:"1",max:"1",av:"a"},reverse:{min:"1",max:"1",av:"a"},replace:{min:"3",max:"4",av:"a"},sort:{min:"1",max:"2",av:"a"},feature:{min:"1",
max:"*",av:"a"},haskey:{min:"2",max:"2",av:"a"},indexof:{min:"2",max:"2",av:"a"},disjoint:{min:"2",max:"2",av:"a"},intersects:{min:"2",max:"2",av:"a"},touches:{min:"2",max:"2",av:"a"},crosses:{min:"2",max:"2",av:"a"},within:{min:"2",max:"2",av:"a"},contains:{min:"2",max:"2",av:"a"},overlaps:{min:"2",max:"2",av:"a"},equals:{min:"2",max:"2",av:"a"},relate:{min:"3",max:"3",av:"a"},intersection:{min:"2",max:"2",av:"a"},union:{min:"1",max:"2",av:"a"},difference:{min:"2",max:"2",av:"a"},symmetricdifference:{min:"2",
max:"2",av:"a"},clip:{min:"2",max:"2",av:"a"},cut:{min:"2",max:"2",av:"a"},area:{min:"1",max:"2",av:"a"},areageodetic:{min:"1",max:"2",av:"a"},length:{min:"1",max:"2",av:"a"},lengthgeodetic:{min:"1",max:"2",av:"a"},distance:{min:"2",max:"3",av:"a"},densify:{min:"2",max:"3",av:"a"},densifygeodetic:{min:"2",max:"3",av:"a"},generalize:{min:"2",max:"4",av:"a"},buffer:{min:"2",max:"3",av:"a"},buffergeodetic:{min:"2",max:"3",av:"a"},offset:{min:"2",max:"6",av:"a"},rotate:{min:"2",max:"3",av:"a"},issimple:{min:"1",
max:"1",av:"a"},simplify:{min:"1",max:"1",av:"a"},centroid:{min:"1",max:"1",av:"a"},multiparttosinglepart:{min:"1",max:"1",av:"a"},setgeometry:{min:"2",max:"2",av:"a"}};a.addFunctionDeclaration=function(b,c){var d=a.functionDecls[b.name.toLowerCase()];void 0===d?a.functionDecls[b.name.toLowerCase()]={min:b.min,max:b.max,av:c}:"a"===d.av&&"f"===c?(void 0!==d.fmin&&delete d.fmin,void 0!==d.fmax&&delete d.fmax,d.fmin=b.min,d.fmax=b.max):"f"===d.av&&"a"===c?(void 0===d.fmin&&(d.fmin=d.min),void 0===d.fmax&&
(d.fmax=d.max),d.min=b.min,d.max=b.max,d.av="a"):"f"===c?(d.fmin=b.min,d.fmax=b.max):"a"===c&&(d.min=b.min,d.max=b.max)};a.checkFunctionSignature=f;a.findFunction=c;a.validateLanguageNode=e;a.testValidityOfExpression=l;a.referencesMemberImpl=h;a.referencesMember=function(a,b){return!0===h(a.body[0].body,b.toLowerCase())?!0:!1};a.referencesFunctionImpl=d;a.referencesFunction=function(a,b){return!0===d(a.body[0].body,b)?!0:!1};a.findFieldLiteralsImpl=k;a.findFieldLiterals=function(a,b){return k(a.body[0].body,
b)};a.extractFunctionDeclaration=m;a.validateFunction=g;a.constructGlobalScope=t;a.validateScript=function(b,c,d){void 0===d&&(d="full");c={globalScope:t(c.vars,a.functionDecls,c.customFunctions,d),localScope:null};return l(b.body[0].body,c)};a.validateLanguage=function(a){return"BlockStatement"!==a.body[0].body.type?"Invalid formula content.":e(a.body[0].body)};a.nodeErrorMessage=v;a.makeError=w;a.extractAllIssuesInFunction=y;a.extractAllIssues=r;a.checkScript=function(b,c,d,e){void 0===e&&(e="full");
var g=[];if("BlockStatement"!==b.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===c||void 0===c)c={vars:{},customFunctions:[]};c={globalScope:t(c.vars,a.functionDecls,c.customFunctions,e),localScope:null};try{r(b.body[0].body,c,d,g)}catch(C){}return g};a.findFunctionCallsImpl=z;a.findFunctionCalls=function(a,b){return z(a.body[0].body,b)}})},"esri/arcade/functions/date":function(){define(["require","exports","../../moment","../languageUtils"],function(b,a,f,c){function e(a){return null===
a?a:isNaN(a.getTime())?null:a}Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=function(a,b){a.today=function(a,e){return b(a,e,function(a,b,d){c.pcCheck(d,0,0);a=new Date;a.setHours(0,0,0,0);return a})};a.now=function(a,e){return b(a,e,function(a,b,d){c.pcCheck(d,0,0);return new Date})};a.timestamp=function(a,e){return b(a,e,function(a,b,d){c.pcCheck(d,0,0);a=new Date;return a=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),
a.getUTCMilliseconds())})};a.toutc=function(a,e){return b(a,e,function(a,b,d){c.pcCheck(d,1,1);a=c.toDate(d[0]);return null===a?null:new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};a.tolocal=function(a,e){return b(a,e,function(a,b,d){c.pcCheck(d,1,1);a=c.toDate(d[0]);return null===a?null:f.utc([a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()]).toDate()})};
a.day=function(a,e){return b(a,e,function(a,b,d){c.pcCheck(d,1,1);a=c.toDate(d[0]);return null===a?NaN:a.getDate()})};a.month=function(a,e){return b(a,e,function(a,b,d){c.pcCheck(d,1,1);a=c.toDate(d[0]);return null===a?NaN:a.getMonth()})};a.year=function(a,e){return b(a,e,function(a,b,d){c.pcCheck(d,1,1);a=c.toDate(d[0]);return null===a?NaN:a.getFullYear()})};a.hour=function(a,e){return b(a,e,function(a,b,d){c.pcCheck(d,1,1);a=c.toDate(d[0]);return null===a?NaN:a.getHours()})};a.second=function(a,
e){return b(a,e,function(a,b,d){c.pcCheck(d,1,1);a=c.toDate(d[0]);return null===a?NaN:a.getSeconds()})};a.millisecond=function(a,e){return b(a,e,function(a,b,d){c.pcCheck(d,1,1);a=c.toDate(d[0]);return null===a?NaN:a.getMilliseconds()})};a.minute=function(a,e){return b(a,e,function(a,b,d){c.pcCheck(d,1,1);a=c.toDate(d[0]);return null===a?NaN:a.getMinutes()})};a.weekday=function(a,e){return b(a,e,function(a,b,d){c.pcCheck(d,1,1);a=c.toDate(d[0]);return null===a?NaN:a.getDay()})};a.date=function(a,
k){return b(a,k,function(a,b,d){c.pcCheck(d,0,7);if(3===d.length)return e(new Date(c.toNumber(d[0]),c.toNumber(d[1]),c.toNumber(d[2]),0,0,0,0));if(4===d.length)return e(new Date(c.toNumber(d[0]),c.toNumber(d[1]),c.toNumber(d[2]),c.toNumber(d[3]),0,0,0));if(5===d.length)return e(new Date(c.toNumber(d[0]),c.toNumber(d[1]),c.toNumber(d[2]),c.toNumber(d[3]),c.toNumber(d[4]),0,0));if(6===d.length)return e(new Date(c.toNumber(d[0]),c.toNumber(d[1]),c.toNumber(d[2]),c.toNumber(d[3]),c.toNumber(d[4]),c.toNumber(d[5]),
0));if(7===d.length)return e(new Date(c.toNumber(d[0]),c.toNumber(d[1]),c.toNumber(d[2]),c.toNumber(d[3]),c.toNumber(d[4]),c.toNumber(d[5]),c.toNumber(d[6])));if(2===d.length){a=c.toString(d[1]);if(""===a)return null;a=c.standardiseDateFormat(a);d=f(c.toString(d[0]),a,!0);return!0===d.isValid()?d.toDate():null}if(1===d.length){if(c.isString(d[0])&&""===d[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;a=c.toNumber(d[0]);return!1===isNaN(a)?e(new Date(a)):c.toDate(d[0])}if(0===d.length)return new Date})};
a.datediff=function(a,e){return b(a,e,function(a,b,d){c.pcCheck(d,2,3);a=c.toDateM(d[0]);b=c.toDateM(d[1]);if(null===a||null===b)return NaN;switch(c.toString(d[2]).toLowerCase()){case "days":case "day":case "d":return a.diff(b,"days",!0);case "months":case "month":return a.diff(b,"months",!0);case "minutes":case "minute":case "m":return"M"===d[2]?a.diff(b,"months",!0):a.diff(b,"minutes",!0);case "seconds":case "second":case "s":return a.diff(b,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return a.diff(b);
case "hours":case "hour":case "h":return a.diff(b,"hours",!0);case "years":case "year":case "y":return a.diff(b,"years",!0);default:return a.diff(b)}})};a.dateadd=function(a,e){return b(a,e,function(a,b,d){c.pcCheck(d,2,3);a=c.toDateM(d[0]);if(null===a)return null;b="milliseconds";switch(c.toString(d[2]).toLowerCase()){case "days":case "day":case "d":b="days";break;case "months":case "month":b="months";break;case "minutes":case "minute":case "m":b="M"===d[2]?"months":"minutes";break;case "seconds":case "second":case "s":b=
"seconds";break;case "milliseconds":case "millisecond":case "ms":b="milliseconds";break;case "hours":case "hour":case "h":b="hours";break;case "years":case "year":case "y":b="years"}a.add(c.toNumber(d[1]),b);return a.toDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t){Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=function(a,b){a.polygon=function(a,d){return b(a,d,function(b,d,g){e.pcCheck(g,1,1);b=null;if(g[0]instanceof f){if(b=e.fixSpatialReference(c.parseGeometryFromDictionary(g[0]),a.spatialReference),!1===b instanceof m)throw Error("Illegal Parameter");}else b=g[0]instanceof m?t.fromJSON(g[0].toJSON()):e.fixSpatialReference(new m(JSON.parse(g[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return e.fixNullGeometry(b)})};a.polyline=function(a,d){return b(a,d,function(b,d,k){e.pcCheck(k,1,1);b=null;if(k[0]instanceof f){if(b=e.fixSpatialReference(c.parseGeometryFromDictionary(k[0]),a.spatialReference),!1===b instanceof g)throw Error("Illegal Parameter");}else b=k[0]instanceof g?t.fromJSON(k[0].toJSON()):e.fixSpatialReference(new g(JSON.parse(k[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return e.fixNullGeometry(b)})};a.point=function(a,d){return b(a,d,function(b,d,g){e.pcCheck(g,1,1);b=null;if(g[0]instanceof f){if(b=e.fixSpatialReference(c.parseGeometryFromDictionary(g[0]),a.spatialReference),!1===b instanceof k)throw Error("Illegal Parameter");}else b=g[0]instanceof k?t.fromJSON(g[0].toJSON()):e.fixSpatialReference(new k(JSON.parse(g[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return e.fixNullGeometry(b)})};a.multipoint=function(a,g){return b(a,g,function(b,g,k){e.pcCheck(k,1,1);b=null;if(k[0]instanceof f){if(b=e.fixSpatialReference(c.parseGeometryFromDictionary(k[0]),a.spatialReference),!1===b instanceof d)throw Error("Illegal Parameter");}else b=k[0]instanceof d?t.fromJSON(k[0].toJSON()):e.fixSpatialReference(new d(JSON.parse(k[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return e.fixNullGeometry(b)})};a.extent=function(a,h){return b(a,h,function(b,h,v){v=e.autoCastFeatureToGeometry(v);e.pcCheck(v,1,1);b=null;v[0]instanceof f?b=e.fixSpatialReference(c.parseGeometryFromDictionary(v[0]),a.spatialReference):v[0]instanceof k?(b={xmin:v[0].x,ymin:v[0].y,xmax:v[0].x,ymax:v[0].y,spatialReference:v[0].spatialReference.toJSON()},v[0].hasZ?(b.zmin=v[0].z,b.zmax=v[0].z):v[0].hasM&&(b.mmin=v[0].m,b.mmax=v[0].m),b=t.fromJSON(b)):b=v[0]instanceof m?t.fromJSON(v[0].extent.toJSON()):
v[0]instanceof g?t.fromJSON(v[0].extent.toJSON()):v[0]instanceof d?t.fromJSON(v[0].extent.toJSON()):v[0]instanceof l?t.fromJSON(v[0].toJSON()):e.fixSpatialReference(new l(JSON.parse(v[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return e.fixNullGeometry(b)})};a.geometry=function(a,d){return b(a,d,function(b,d,g){e.pcCheck(g,1,1);b=null;b=g[0]instanceof
c?e.fixSpatialReference(g[0].geometry(),a.spatialReference):g[0]instanceof f?e.fixSpatialReference(c.parseGeometryFromDictionary(g[0]),a.spatialReference):e.fixSpatialReference(t.fromJSON(JSON.parse(g[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return e.fixNullGeometry(b)})};a.setgeometry=function(a,d){return b(a,d,function(a,b,d){e.pcCheck(d,
2,2);if(d[0]instanceof c){if(!0===d[0].immutable)throw Error("Feature is Immutable");if(d[1]instanceof h||null===d[1])d[0]._geometry=d[1];else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return e.voidOperation})};a.feature=function(a,d){return b(a,d,function(b,d,g){if(0===g.length)throw Error("Missing Parameters");b=null;if(1===g.length)if(e.isString(g[0]))b=c.fromJson(JSON.parse(g[0]));else if(g[0]instanceof c)b=c.createFromArcadeFeature(g[0]);else if(g[0]instanceof h)b=
c.createFromGraphicLikeObject(g[0],null,null);else if(g[0]instanceof f)b=g[0].hasField("geometry")?g[0].field("geometry"):null,d=g[0].hasField("attributes")?g[0].field("attributes"):null,null!==b&&b instanceof f&&(b=c.parseGeometryFromDictionary(b)),null!==d&&(d=c.parseAttributesFromDictionary(d)),b=c.createFromGraphicLikeObject(b,d,null);else throw Error("Illegal Argument");else{if(2===g.length){d=b=null;if(null!==g[0])if(g[0]instanceof h)b=g[0];else if(b instanceof f)b=c.parseGeometryFromDictionary(g[0]);
else throw Error("Illegal Argument");if(null!==g[1])if(g[1]instanceof f)d=c.parseAttributesFromDictionary(g[1]);else throw Error("Illegal Argument");}else{b=null;d={};if(null!==g[0])if(g[0]instanceof h)b=g[0];else if(b instanceof f)b=c.parseGeometryFromDictionary(g[0]);else throw Error("Illegal Argument");for(var k=1;k<g.length;k+=2){var l=e.toString(g[k]),m=g[k+1];if(null===m||void 0===m||e.isString(m)||isNaN(m)||e.isDate(m)||e.isNumber(m)||e.isBoolean(m)){if(e.isFunctionParameter(m)||!1===e.isSimpleType(m))throw Error("Illegal Argument");
d[l]=m===e.voidOperation?null:m}else throw Error("Illegal Argument");}}b=c.createFromGraphicLikeObject(b,d,null)}b._geometry=e.fixSpatialReference(b.geometry(),a.spatialReference);b.immutable=!1;return b})};a.dictionary=function(a,c){return b(a,c,function(a,b,c){if(0===c.length)throw Error("Missing Parameters");if(0!==c.length%2)throw Error("Missing Parameters");a={};for(b=0;b<c.length;b+=2){var d=e.toString(c[b]),g=c[b+1];if(null===g||void 0===g||e.isString(g)||isNaN(g)||e.isDate(g)||e.isNumber(g)||
e.isBoolean(g)||e.isArray(g)||e.isImmutableArray(g)){if(e.isFunctionParameter(g))throw Error("Illegal Argument");a[d]=g===e.voidOperation?null:g}else throw Error("Illegal Argument");}c=new f(a);c.immutable=!1;return c})};a.haskey=function(a,d){return b(a,d,function(a,b,d){e.pcCheck(d,2,2);a=e.toString(d[1]);if(d[0]instanceof c||d[0]instanceof f)return d[0].hasField(a);throw Error("Illegal Argument");})};a.indexof=function(a,c){return b(a,c,function(a,b,c){e.pcCheck(c,2,2);a=c[1];if(e.isArray(c[0])){for(b=
0;b<c[0].length;b++)if(e.equalityTest(a,c[0][b]))return b;return-1}if(e.isImmutableArray(c[0])){var d=c[0].length();for(b=0;b<d;b++)if(e.equalityTest(a,c[0].get(b)))return b;return-1}throw Error("Illegal Argument");})}}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v){function w(a){return z?a.clone():v.fromJSON(a.toJSON())}function y(a){return 0===f.version.indexOf("4.")?g.fromExtent(a):new g({spatialReference:a.spatialReference,rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]]})}Object.defineProperty(a,"__esModule",{value:!0});var r=null,z=0===f.version.indexOf("4.");a.setGeometryEngine=function(a){r=a};a.registerFunctions=function(a,b){function f(a){e.pcCheck(a,2,2);if(!(a[0]instanceof
d&&a[1]instanceof d||a[0]instanceof d&&null===a[1]||a[1]instanceof d&&null===a[0]||null===a[0]&&null===a[1]))throw Error("Illegal Argument");}a.disjoint=function(a,c){return b(a,c,function(a,b,c){c=e.autoCastFeatureToGeometry(c);f(c);return null===c[0]||null===c[1]?!0:r.disjoint(c[0],c[1])})};a.intersects=function(a,c){return b(a,c,function(a,b,c){c=e.autoCastFeatureToGeometry(c);f(c);return null===c[0]||null===c[1]?!1:r.intersects(c[0],c[1])})};a.touches=function(a,c){return b(a,c,function(a,b,c){c=
e.autoCastFeatureToGeometry(c);f(c);return null===c[0]||null===c[1]?!1:r.touches(c[0],c[1])})};a.crosses=function(a,c){return b(a,c,function(a,b,c){c=e.autoCastFeatureToGeometry(c);f(c);return null===c[0]||null===c[1]?!1:r.crosses(c[0],c[1])})};a.within=function(a,c){return b(a,c,function(a,b,c){c=e.autoCastFeatureToGeometry(c);f(c);return null===c[0]||null===c[1]?!1:r.within(c[0],c[1])})};a.contains=function(a,c){return b(a,c,function(a,b,c){c=e.autoCastFeatureToGeometry(c);f(c);return null===c[0]||
null===c[1]?!1:r.contains(c[0],c[1])})};a.overlaps=function(a,c){return b(a,c,function(a,b,c){c=e.autoCastFeatureToGeometry(c);f(c);return null===c[0]||null===c[1]?!1:r.overlaps(c[0],c[1])})};a.equals=function(a,c){return b(a,c,function(a,b,c){e.pcCheck(c,2,2);return c[0]===c[1]?!0:c[0]instanceof d&&c[1]instanceof d?r.equals(c[0],c[1]):e.isDate(c[0])&&e.isDate(c[1])?c[0].getTime()===c[1].getTime():!1})};a.relate=function(a,c){return b(a,c,function(a,b,c){c=e.autoCastFeatureToGeometry(c);e.pcCheck(c,
3,3);if(c[0]instanceof d&&c[1]instanceof d)return r.relate(c[0],c[1],e.toString(c[2]));if(c[0]instanceof d&&null===c[1]||c[1]instanceof d&&null===c[0]||null===c[0]&&null===c[1])return!1;throw Error("Illegal Argument");})};a.intersection=function(a,c){return b(a,c,function(a,b,c){c=e.autoCastFeatureToGeometry(c);f(c);return null===c[0]||null===c[1]?null:r.intersect(c[0],c[1])})};a.union=function(a,c){return b(a,c,function(b,c,g){g=e.autoCastFeatureToGeometry(g);b=[];if(0===g.length)throw Error("Function called with wrong number of Parameters");
if(1===g.length)if(e.isArray(g[0]))for(g=e.autoCastFeatureToGeometry(g[0]),c=0;c<g.length;c++){if(null!==g[c])if(g[c]instanceof d)b.push(g[c]);else throw Error("Illegal Argument");}else if(e.isImmutableArray(g[0]))for(g=e.autoCastFeatureToGeometry(g[0].toArray()),c=0;c<g.length;c++){if(null!==g[c])if(g[c]instanceof d)b.push(g[c]);else throw Error("Illegal Argument");}else{if(g[0]instanceof d)return e.fixSpatialReference(w(g[0]),a.spatialReference);if(null===g[0])return null;throw Error("Illegal Argument");
}else for(c=0;c<g.length;c++)if(null!==g[c])if(g[c]instanceof d)b.push(g[c]);else throw Error("Illegal Argument");return 0===b.length?null:r.union(b)})};a.difference=function(a,c){return b(a,c,function(a,b,c){c=e.autoCastFeatureToGeometry(c);f(c);return null!==c[0]&&null===c[1]?w(c[0]):null===c[0]?null:r.difference(c[0],c[1])})};a.symmetricdifference=function(a,c){return b(a,c,function(a,b,c){c=e.autoCastFeatureToGeometry(c);f(c);return null===c[0]&&null===c[1]?null:null===c[0]?w(c[1]):null===c[1]?
w(c[0]):r.symmetricDifference(c[0],c[1])})};a.clip=function(a,c){return b(a,c,function(a,b,c){c=e.autoCastFeatureToGeometry(c);e.pcCheck(c,2,2);if(!(c[1]instanceof h)&&null!==c[1])throw Error("Illegal Argument");if(null===c[0])return null;if(!(c[0]instanceof d))throw Error("Illegal Argument");return null===c[1]?null:r.clip(c[0],c[1])})};a.cut=function(a,c){return b(a,c,function(a,b,c){c=e.autoCastFeatureToGeometry(c);e.pcCheck(c,2,2);if(!(c[1]instanceof t)&&null!==c[1])throw Error("Illegal Argument");
if(null===c[0])return[];if(!(c[0]instanceof d))throw Error("Illegal Argument");return null===c[1]?[w(c[0])]:r.cut(c[0],c[1])})};a.area=function(a,g){return b(a,g,function(a,b,g){g=e.autoCastFeatureToGeometry(g);e.pcCheck(g,1,2);if(null===g[0])return 0;if(!(g[0]instanceof d))throw Error("Illegal Argument");return r.planarArea(g[0],c.convertSquareUnitsToCode(e.defaultUndefined(g[1],-1)))})};a.areageodetic=function(a,g){return b(a,g,function(a,b,g){g=e.autoCastFeatureToGeometry(g);e.pcCheck(g,1,2);if(null===
g[0])return 0;if(!(g[0]instanceof d))throw Error("Illegal Argument");return r.geodesicArea(g[0],c.convertSquareUnitsToCode(e.defaultUndefined(g[1],-1)))})};a.length=function(a,g){return b(a,g,function(a,b,g){g=e.autoCastFeatureToGeometry(g);e.pcCheck(g,1,2);if(null===g[0])return 0;if(!(g[0]instanceof d))throw Error("Illegal Argument");return r.planarLength(g[0],c.convertLinearUnitsToCode(e.defaultUndefined(g[1],-1)))})};a.lengthgeodetic=function(a,g){return b(a,g,function(a,b,g){g=e.autoCastFeatureToGeometry(g);
e.pcCheck(g,1,2);if(null===g[0])return 0;if(!(g[0]instanceof d))throw Error("Illegal Argument");return r.geodesicLength(g[0],c.convertLinearUnitsToCode(e.defaultUndefined(g[1],-1)))})};a.distance=function(a,g){return b(a,g,function(a,b,g){g=e.autoCastFeatureToGeometry(g);e.pcCheck(g,2,3);if(!(g[0]instanceof d))throw Error("Illegal Argument");if(!(g[1]instanceof d))throw Error("Illegal Argument");return r.distance(g[0],g[1],c.convertLinearUnitsToCode(e.defaultUndefined(g[2],-1)))})};a.densify=function(a,
f){return b(a,f,function(a,b,f){f=e.autoCastFeatureToGeometry(f);e.pcCheck(f,2,3);if(null===f[0])return null;if(!(f[0]instanceof d))throw Error("Illegal Argument");a=e.toNumber(f[1]);if(isNaN(a))throw Error("Illegal Argument");if(0>=a)throw Error("Illegal Argument");return f[0]instanceof g||f[0]instanceof t?r.densify(f[0],a,c.convertLinearUnitsToCode(e.defaultUndefined(f[2],-1))):f[0]instanceof h?r.densify(y(f[0]),a,c.convertLinearUnitsToCode(e.defaultUndefined(f[2],-1))):f[0]})};a.densifygeodetic=
function(a,f){return b(a,f,function(a,b,f){f=e.autoCastFeatureToGeometry(f);e.pcCheck(f,2,3);if(null===f[0])return null;if(!(f[0]instanceof d))throw Error("Illegal Argument");a=e.toNumber(f[1]);if(isNaN(a))throw Error("Illegal Argument");if(0>=a)throw Error("Illegal Argument");return f[0]instanceof g||f[0]instanceof t?r.geodesicDensify(f[0],a,c.convertLinearUnitsToCode(e.defaultUndefined(f[2],-1))):f[0]instanceof h?r.geodesicDensify(y(f[0]),a,c.convertLinearUnitsToCode(e.defaultUndefined(f[2],-1))):
f[0]})};a.generalize=function(a,g){return b(a,g,function(a,b,g){g=e.autoCastFeatureToGeometry(g);e.pcCheck(g,2,4);if(null===g[0])return null;if(!(g[0]instanceof d))throw Error("Illegal Argument");a=e.toNumber(g[1]);if(isNaN(a))throw Error("Illegal Argument");return r.generalize(g[0],a,e.toBoolean(e.defaultUndefined(g[2],!0)),c.convertLinearUnitsToCode(e.defaultUndefined(g[3],-1)))})};a.buffer=function(a,g){return b(a,g,function(a,b,g){g=e.autoCastFeatureToGeometry(g);e.pcCheck(g,2,3);if(null===g[0])return null;
if(!(g[0]instanceof d))throw Error("Illegal Argument");a=e.toNumber(g[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===a?w(g[0]):r.buffer(g[0],a,c.convertLinearUnitsToCode(e.defaultUndefined(g[2],-1)))})};a.buffergeodetic=function(a,g){return b(a,g,function(a,b,g){g=e.autoCastFeatureToGeometry(g);e.pcCheck(g,2,3);if(null===g[0])return null;if(!(g[0]instanceof d))throw Error("Illegal Argument");a=e.toNumber(g[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===a?w(g[0]):r.geodesicBuffer(g[0],
a,c.convertLinearUnitsToCode(e.defaultUndefined(g[2],-1)))})};a.offset=function(a,d){return b(a,d,function(a,b,d){d=e.autoCastFeatureToGeometry(d);e.pcCheck(d,2,6);if(null===d[0])return null;if(!(d[0]instanceof g||d[0]instanceof t))throw Error("Illegal Argument");a=e.toNumber(d[1]);if(isNaN(a))throw Error("Illegal Argument");b=e.toNumber(e.defaultUndefined(d[4],10));if(isNaN(b))throw Error("Illegal Argument");var f=e.toNumber(e.defaultUndefined(d[5],0));if(isNaN(f))throw Error("Illegal Argument");
return r.offset(d[0],a,c.convertLinearUnitsToCode(e.defaultUndefined(d[2],-1)),e.toString(e.defaultUndefined(d[3],"round")).toLowerCase(),b,f)})};a.rotate=function(a,c){return b(a,c,function(a,b,c){c=e.autoCastFeatureToGeometry(c);e.pcCheck(c,2,3);a=c[0];if(null===a)return null;if(!(a instanceof d))throw Error("Illegal Argument");a instanceof h&&(a=g.fromExtent(a));b=e.toNumber(c[1]);if(isNaN(b))throw Error("Illegal Argument");c=e.defaultUndefined(c[2],null);if(null===c)return r.rotate(a,b);if(c instanceof
m)return r.rotate(a,b,c);throw Error("Illegal Argument");})};a.centroid=function(a,c){return b(a,c,function(b,c,f){f=e.autoCastFeatureToGeometry(f);e.pcCheck(f,1,1);if(null===f[0])return null;if(!(f[0]instanceof d))throw Error("Illegal Argument");return f[0]instanceof m?e.fixSpatialReference(w(f[0]),a.spatialReference):f[0]instanceof g?z?f[0].centroid:f[0].getCentroid():f[0]instanceof t?l.centroidPolyline(f[0]):f[0]instanceof k?l.centroidMultiPoint(f[0]):f[0]instanceof h?z?f[0].center:f[0].getExtent().getCenter():
null})};a.multiparttosinglepart=function(a,c){return b(a,c,function(b,c,f){f=e.autoCastFeatureToGeometry(f);e.pcCheck(f,1,1);c=[];if(null===f[0])return null;if(!(f[0]instanceof d))throw Error("Illegal Argument");if(f[0]instanceof m||f[0]instanceof h)return[e.fixSpatialReference(w(f[0]),a.spatialReference)];b=r.simplify(f[0]);if(b instanceof g){c=[];var l=[];for(f=0;f<b.rings.length;f++)if(b.isClockwise(b.rings[f])){var n=v.fromJSON({rings:[b.rings[f]],hasZ:z?b.hasZ:!1,hasM:z?b.hasM:!1,spatialReference:z?
b.spatialReference.toJSON():b.spatialReference.toJson()});c.push(n)}else l.push({ring:b.rings[f],pt:b.getPoint(f,0)});for(b=0;b<l.length;b++)for(f=0;f<c.length;f++)if(c[f].contains(l[b].pt)){c[f].addRing(l[b].ring);break}return c}if(b instanceof t){c=[];for(f=0;f<b.paths.length;f++)l=v.fromJSON({paths:[b.paths[f]],hasZ:z?b.hasZ:!1,hasM:z?b.hasM:!1,spatialReference:z?b.spatialReference.toJSON():b.spatialReference.toJson()}),c.push(l);return c}if(f[0]instanceof k){b=e.fixSpatialReference(w(f[0]),a.spatialReference);
for(f=0;f<b.points.length;f++)c.push(b.getPoint(f));return c}return null})};a.issimple=function(a,c){return b(a,c,function(a,b,c){c=e.autoCastFeatureToGeometry(c);e.pcCheck(c,1,1);if(null===c[0])return!0;if(c[0]instanceof d)return r.isSimple(c[0]);throw Error("Illegal Argument");})};a.simplify=function(a,c){return b(a,c,function(a,b,c){c=e.autoCastFeatureToGeometry(c);e.pcCheck(c,1,1);if(null===c[0])return null;if(c[0]instanceof d)return r.simplify(c[0]);throw Error("Illegal Argument");})}}})},"esri/arcade/kernel":function(){define(["require",
"exports","../geometry/Extent"],function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.errback=function(a){return function(b){a.reject(b)}};a.callback=function(a,b){return function(){try{a.apply(null,arguments)}catch(l){b.reject(l)}}};a.convertSquareUnitsToCode=function(a){if(void 0===a)return null;if("number"===typeof a)return a;switch(a.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square_meters":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 109413;
case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 109405}return null};
a.shapeExtent=function(a){if(null===a)return null;switch(a.type){case "polygon":case "multipoint":case "polyline":return a.extent;case "point":return new f({xmin:a.x,ymin:a.y,xmax:a.x,ymax:a.y,spatialReference:a.spatialReference});case "extent":return a}return null};a.convertLinearUnitsToCode=function(a){if(void 0===a)return null;if("number"===typeof a||"number"===typeof a)return a;switch(a.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 9002}return null};
a.sameGeomType=function(a,b){return a===b||"point"===a&&"esriGeometryPoint"===b||"polyline"===a&&"esriGeometryPolyline"===b||"polygon"===a&&"esriGeometryPolygon"===b||"extent"===a&&"esriGeometryEnvelope"===b||"multipoint"===a&&"esriGeometryMultipoint"===b||"point"===b&&"esriGeometryPoint"===a||"polyline"===b&&"esriGeometryPolyline"===a||"polygon"===b&&"esriGeometryPolygon"===a||"extent"===b&&"esriGeometryEnvelope"===a||"multipoint"===b&&"esriGeometryMultipoint"===a?!0:!1}})},"esri/arcade/functions/centroid":function(){define(["require",
"exports","../../kernel","../../geometry/Point"],function(b,a,f,c){function e(a,b,c){var d={x:0,y:0};b&&(d.z=0);c&&(d.m=0);for(var e=0,f=a[0],k=0;k<a.length;k++){var h=a[k],m;a:if(h.length!==f.length)m=!1;else{for(m=0;m<h.length;m++)if(h[m]!==f[m]){m=!1;break a}m=!0}if(!1===m){m=l(f,h,b);var z=h,x=b,p=c,n={x:(f[0]+z[0])/2,y:(f[1]+z[1])/2};x&&(n.z=(f[2]+z[2])/2);x&&p?n.m=(f[3]+z[3])/2:p&&(n.m=(f[2]+z[2])/2);f=n;f.x*=m;f.y*=m;d.x+=f.x;d.y+=f.y;b&&(f.z*=m,d.z+=f.z);c&&(f.m*=m,d.m+=f.m);e+=m;f=h}}0<e?
(d.x/=e,d.y/=e,b&&(d.z/=e),c&&(d.m/=e)):(d.x=a[0][0],d.y=a[0][1],b&&(d.z=a[0][2]),c&&b?d.m=a[0][3]:c&&(d.m=a[0][2]));return d}function l(a,b,c){var d=b[0]-a[0];a=b[1]-a[1];return c?(b=b[2]-b[2],Math.sqrt(d*d+a*a+b*b)):Math.sqrt(d*d+a*a)}Object.defineProperty(a,"__esModule",{value:!0});var h=0===f.version.indexOf("4.");a.centroidPolyline=function(a){for(var b={x:0,y:0,spatialReference:h?a.spatialReference.toJSON():a.spatialReference.toJson()},d={x:0,y:0,spatialReference:h?a.spatialReference.toJSON():
a.spatialReference.toJson()},g=0,f=0,v=0;v<a.paths.length;v++)if(0!==a.paths[v].length){var w;w=a.paths[v];var y=!0===a.hasZ;if(1>=w.length)w=0;else{for(var r=0,z=1;z<w.length;z++)r+=l(w[z-1],w[z],y);w=r}0===w?(y=e(a.paths[v],!0===a.hasZ,!0===a.hasM),b.x+=y.x,b.y+=y.y,!0===a.hasZ&&(b.z+=y.z),!0===a.hasM&&(b.m+=y.m),++g):(y=e(a.paths[v],!0===a.hasZ,!0===a.hasM),d.x+=y.x*w,d.y+=y.y*w,!0===a.hasZ&&(d.z+=y.z*w),!0===a.hasM&&(d.m+=y.m*w),f+=w)}return 0<f?(d.x/=f,d.y/=f,!0===a.hasZ&&(d.z/=f),!0===a.hasM&&
(d.m/=f),new c(d)):0<g?(b.x/=g,b.y/=g,!0===a.hasZ&&(d.z/=g),!0===a.hasM&&(b.m/=g),new c(b)):null};a.centroidMultiPoint=function(a){if(0===a.points.length)return null;for(var b=0,d=0,e=0,f=0,l=0;l<a.points.length;l++){var w=a.getPoint(l);!0===w.hasZ&&(e+=w.z);!0===w.hasM&&(f+=w.m);b+=w.x;d+=w.y;f+=w.m}b={x:b/a.points.length,y:d/a.points.length,spatialReference:null};b.spatialReference=h?a.spatialReference.toJSON():a.spatialReference.toJson();!0===a.hasZ&&(b.z=e/a.points.length);!0===a.hasM&&(b.m=f/
a.points.length);return new c(b)}})},"esri/arcade/functions/maths":function(){define(["require","exports","dojo/number","../languageUtils"],function(b,a,f,c){function e(a,b,c){if("undefined"===typeof c||0===+c)return Math[a](b);b=+b;c=+c;if(isNaN(b)||"number"!==typeof c||0!==c%1)return NaN;b=b.toString().split("e");b=Math[a](+(b[0]+"e"+(b[1]?+b[1]-c:-c)));b=b.toString().split("e");return+(b[0]+"e"+(b[1]?+b[1]+c:c))}Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=function(a,b){function d(a,
b,d){a=c.toNumber(a);return isNaN(a)?a:isNaN(b)||isNaN(d)||b>d?NaN:a<b?b:a>d?d:a}a.number=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,1,2);a=d[0];return c.isNumber(a)?a:null===a?0:c.isDate(a)||c.isBoolean(a)?Number(a):c.isArray(a)?NaN:""===a||void 0===a?Number(a):c.isString(a)?void 0!==d[1]?(d=c.multiReplace(d[1],"\u2030",""),d=c.multiReplace(d,"\u00a4",""),f.parse(a,{pattern:d})):Number(a.trim()):Number(a)})};a.abs=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,1,1);return Math.abs(c.toNumber(d[0]))})};
a.acos=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,1,1);return Math.acos(c.toNumber(d[0]))})};a.asin=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,1,1);return Math.asin(c.toNumber(d[0]))})};a.atan=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,1,1);return Math.atan(c.toNumber(d[0]))})};a.atan2=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,2,2);return Math.atan2(c.toNumber(d[0]),c.toNumber(d[1]))})};a.ceil=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,
1,2);return 2===d.length?(a=c.toNumber(d[1]),isNaN(a)&&(a=0),e("ceil",c.toNumber(d[0]),-1*a)):Math.ceil(c.toNumber(d[0]))})};a.round=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,1,2);return 2===d.length?(a=c.toNumber(d[1]),isNaN(a)&&(a=0),e("round",c.toNumber(d[0]),-1*a)):Math.round(c.toNumber(d[0]))})};a.floor=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,1,2);return 2===d.length?(a=c.toNumber(d[1]),isNaN(a)&&(a=0),e("floor",c.toNumber(d[0]),-1*a)):Math.floor(c.toNumber(d[0]))})};
a.cos=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,1,1);return Math.cos(c.toNumber(d[0]))})};a.isnan=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,1,1);return"number"===typeof d[0]&&isNaN(d[0])})};a.exp=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,1,1);return Math.exp(c.toNumber(d[0]))})};a.log=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,1,1);return Math.log(c.toNumber(d[0]))})};a.pow=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,2,2);return Math.pow(c.toNumber(d[0]),
c.toNumber(d[1]))})};a.random=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,0,0);return Math.random()})};a.sin=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,1,1);return Math.sin(c.toNumber(d[0]))})};a.sqrt=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,1,1);return Math.sqrt(c.toNumber(d[0]))})};a.tan=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,1,1);return Math.tan(c.toNumber(d[0]))})};a.defaultvalue=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,2,2);return null===
d[0]||""===d[0]||void 0===d[0]?d[1]:d[0]})};a.isempty=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,1,1);return null===d[0]||""===d[0]||void 0===d[0]?!0:!1})};a["boolean"]=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,1,1);return c.toBoolean(d[0])})};a.constrain=function(a,e){return b(a,e,function(a,b,e){c.pcCheck(e,3,3);a=c.toNumber(e[1]);b=c.toNumber(e[2]);if(c.isArray(e[0])){var g=[],f=0;for(e=e[0];f<e.length;f++)g.push(d(e[f],a,b));return g}if(c.isImmutableArray(e[0])){g=[];
for(f=0;f<e[0].length();f++)g.push(d(e[0].get(f),a,b));return g}return d(e[0],a,b)})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(b,a,f,c){function e(a,b,d,e){if(1===e.length){if(f.isArray(e[0]))return c.calculateStat(a,e[0],-1);if(f.isImmutableArray(e[0]))return c.calculateStat(a,e[0].toArray(),-1)}return c.calculateStat(a,e,-1)}Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=function(a,b){a.stdev=function(a,
c){return b(a,c,function(a,b,c){return e("stdev",a,b,c)})};a.variance=function(a,c){return b(a,c,function(a,b,c){return e("variance",a,b,c)})};a.average=function(a,c){return b(a,c,function(a,b,c){return e("mean",a,b,c)})};a.mean=function(a,c){return b(a,c,function(a,b,c){return e("mean",a,b,c)})};a.sum=function(a,c){return b(a,c,function(a,b,c){return e("sum",a,b,c)})};a.min=function(a,c){return b(a,c,function(a,b,c){return e("min",a,b,c)})};a.max=function(a,c){return b(a,c,function(a,b,c){return e("max",
a,b,c)})};a.distinct=function(a,c){return b(a,c,function(a,b,c){return e("distinct",a,b,c)})};a.count=function(a,c){return b(a,c,function(a,b,c){f.pcCheck(c,1,1);if(f.isArray(c[0])||f.isString(c[0]))return c[0].length;if(f.isImmutableArray(c[0]))return c[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(b,a,f){function c(a){for(var b=0,c=0;c<a.length;c++)b+=a[c];return b/a.length}function e(a){for(var b=
c(a),d=0,e=0;e<a.length;e++)d+=Math.pow(b-a[e],2);return d/a.length}Object.defineProperty(a,"__esModule",{value:!0});a.decodeStatType=function(a){switch(a.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};a.calculateStat=function(a,b,d){void 0===d&&(d=1E3);switch(a.toLowerCase()){case "distinct":a:{a=
d;d=[];for(var k={},h=[],g=0;g<b.length;g++){if(void 0!==b[g]&&null!==b[g]&&b[g]!==f.voidOperation){var l=b[g];if(f.isNumber(l)||f.isString(l))void 0===k[l]&&(d.push(l),k[l]=1);else{for(var v=!1,w=0;w<h.length;w++)!0===f.equalityTest(h[w],l)&&(v=!0);!1===v&&(h.push(l),d.push(l))}}if(d.length>=a&&-1!==a){b=d;break a}}b=d}return b;case "avg":case "mean":return c(f.toNumberArray(b));case "min":return Math.min.apply(Math,f.toNumberArray(b));case "sum":b=f.toNumberArray(b);for(d=a=0;d<b.length;d++)a+=
b[d];return a;case "max":return Math.max.apply(Math,f.toNumberArray(b));case "stdev":case "stddev":return Math.sqrt(e(f.toNumberArray(b)));case "var":case "variance":return e(f.toNumberArray(b));case "count":return b.length}return 0}})},"esri/arcade/functions/string":function(){define(["require","exports","../Feature","../languageUtils"],function(b,a,f,c){Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=function(a,b){a.trim=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,
1,1);return c.toString(d[0]).trim()})};a.upper=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,1,1);return c.toString(d[0]).toUpperCase()})};a.proper=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,1,2);a=1;2===d.length&&"firstword"===c.toString(d[1]).toLowerCase()&&(a=2);b=/\s/;d=c.toString(d[0]);for(var e="",f=!0,g=0;g<d.length;g++){var k=d[g];b.test(k)?1===a&&(f=!0):k.toUpperCase()!==k.toLowerCase()&&(f?(k=k.toUpperCase(),f=!1):k=k.toLowerCase());e+=k}return e})};a.lower=function(a,
d){return b(a,d,function(a,b,d){c.pcCheck(d,1,1);return c.toString(d[0]).toLowerCase()})};a.guid=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,0,1);if(0<d.length)switch(c.toString(d[0]).toLowerCase()){case "digits":return c.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return c.generateUUID();case "digits-hyphen-parentheses":return"("+c.generateUUID()+")"}return"{"+c.generateUUID()+"}"})};a.console=function(a,d){return b(a,d,function(b,
d,e){0!==e.length&&(1===e.length?a.console(c.toString(e[0])):a.console(c.toString(e)));return c.voidOperation})};a.mid=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,2,3);a=c.toNumber(d[1]);if(isNaN(a))return"";0>a&&(a=0);if(2===d.length)return c.toString(d[0]).substr(a);b=c.toNumber(d[2]);if(isNaN(b))return"";0>b&&(b=0);return c.toString(d[0]).substr(a,b)})};a.find=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,2,3);a=0;if(2<d.length){a=c.toNumber(c.defaultUndefined(d[2],0));if(isNaN(a))return-1;
0>a&&(a=0)}return c.toString(d[1]).indexOf(c.toString(d[0]),a)})};a.left=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,2,2);a=c.toNumber(d[1]);if(isNaN(a))return"";0>a&&(a=0);return c.toString(d[0]).substr(0,a)})};a.right=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,2,2);a=c.toNumber(d[1]);if(isNaN(a))return"";0>a&&(a=0);return c.toString(d[0]).substr(-1*a,a)})};a.split=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,2,4);a=c.toNumber(c.defaultUndefined(d[2],-1));b=c.toBoolean(c.defaultUndefined(d[3],
!1));-1===a||null===a||!0===b?d=c.toString(d[0]).split(c.toString(d[1])):(isNaN(a)&&(a=-1),-1>a&&(a=-1),d=c.toString(d[0]).split(c.toString(d[1]),a));if(!1===b)return d;b=[];for(var e=0;e<d.length&&!(-1!==a&&b.length>=a);e++)""!==d[e]&&void 0!==d[e]&&b.push(d[e]);return b})};a.text=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,1,2);return c.toStringExplicit(d[0],d[1])})};a.concatenate=function(a,d){return b(a,d,function(a,b,d){a=[];if(1>d.length)return"";if(c.isArray(d[0])){b=c.defaultUndefined(d[2],
"");for(var e=0;e<d[0].length;e++)a[e]=c.toStringExplicit(d[0][e],b);return 1<d.length?a.join(d[1]):a.join("")}if(c.isImmutableArray(d[0])){b=c.defaultUndefined(d[2],"");for(e=0;e<d[0].length();e++)a[e]=c.toStringExplicit(d[0].get(e),b);return 1<d.length?a.join(d[1]):a.join("")}for(e=0;e<d.length;e++)a[e]=c.toStringExplicit(d[e]);return a.join("")})};a.reverse=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,1,1);if(c.isArray(d[0]))return a=d[0].slice(0),a.reverse(),a;if(c.isImmutableArray(d[0]))return a=
d[0].toArray().slice(0),a.reverse(),a;throw Error("Invalid Parameter");})};a.replace=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,3,4);a=c.toString(d[0]);b=c.toString(d[1]);var e=c.toString(d[2]);return(4===d.length?c.toBoolean(d[3]):1)?c.multiReplace(a,b,e):a.replace(b,e)})};a.domainname=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,2,4);if(d[0]instanceof f)return d[0].domainValueLookup(c.toString(d[1]),d[2],void 0===d[3]?void 0:c.toNumber(d[3]));throw Error("Invalid Parameter");
})};a.domaincode=function(a,d){return b(a,d,function(a,b,d){c.pcCheck(d,3,4);if(d[0]instanceof f)return d[0].domainCodeLookup(c.toString(d[1]),d[2],void 0===d[3]?void 0:c.toNumber(d[3]));throw Error("Invalid Parameter");})}}})},"esri/arcade/arcadeRuntime":function(){define("require exports ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v,w,y,r,z,x,p,n,A,B){function C(a,b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(D(a,b.arguments[d]));return c}function F(a,b,c){try{return c(a,b,C(a,b))}catch(pa){throw pa;}}function D(a,b){try{switch(b.type){case "EmptyStatement":return d.voidOperation;case "VariableDeclarator":var g=null===b.init?null:D(a,b.init);g===d.voidOperation&&(g=null);var h=b.id.name.toLowerCase();null!==a.localScope?a.localScope[h]={value:g,valueset:!0,node:b.init}:a.globalScope[h]=
{value:g,valueset:!0,node:b.init};return d.voidOperation;case "VariableDeclaration":for(var l=0;l<b.declarations.length;l++)D(a,b.declarations[l]);return d.voidOperation;case "BlockStatement":var m;a:{for(var n=d.voidOperation,l=0;l<b.body.length;l++)if(n=D(a,b.body[l]),n instanceof d.ReturnResult||n===d.breakResult||n===d.continueResult){m=n;break a}m=n}return m;case "FunctionDeclaration":var t=b.id.name.toLowerCase();a.globalScope[t]={valueset:!0,node:null,value:new e(b,a)};return d.voidOperation;
case "ReturnStatement":var A;if(null===b.argument)A=new d.ReturnResult(d.voidOperation);else{var r=D(a,b.argument);A=new d.ReturnResult(r)}return A;case "IfStatement":var v;if("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)throw Error(k.nodeErrorMessage(b.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var B=D(a,b.test);if(!0===B)v=D(a,b.consequent);else if(!1===B)v=null!==b.alternate?D(a,b.alternate):d.voidOperation;else throw Error(k.nodeErrorMessage(b,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));
return v;case "ExpressionStatement":var p;if("AssignmentExpression"===b.expression.type||"UpdateExpression"===b.expression.type)p=D(a,b.expression);else{var w=D(a,b.expression);p=w===d.voidOperation?d.voidOperation:new d.ImplicitResult(w)}return p;case "AssignmentExpression":var C;var y=D(a,b.right),l=null,x="";if("MemberExpression"===b.left.type){l=D(a,b.left.object);x=!0===b.left.computed?D(a,b.left.property):b.left.property.name;if(d.isArray(l))if(d.isNumber(x)){0>x&&(x=l.length+x);if(0>x||x>l.length)throw Error("Assignment outside of array bounds");
if(x===l.length&&"\x3d"!==b.operator)throw Error("Invalid Parameter");l[x]=E(y,b.operator,l[x],b)}else throw Error("Invalid Parameter");else if(l instanceof f){if(!1===d.isString(x))throw Error("Dictionary accessor must be a string");if(!0===l.hasField(x))l.setField(x,E(y,b.operator,l.field(x),b));else{if("\x3d"!==b.operator)throw Error("Invalid Parameter");l.setField(x,E(y,b.operator,null,b))}}else if(l instanceof c){if(!1===d.isString(x))throw Error("Feature accessor must be a string");if(!0===
l.hasField(x))l.setField(x,E(y,b.operator,l.field(x),b));else{if("\x3d"!==b.operator)throw Error("Invalid Parameter");l.setField(x,E(y,b.operator,null,b))}}else{if(d.isImmutableArray(l))throw Error("Array is Immutable");throw Error("Invalid Parameter");}C=d.voidOperation}else if(l=b.left.name.toLowerCase(),null!==a.localScope&&void 0!==a.localScope[l])a.localScope[l]={value:E(y,b.operator,a.localScope[l].value,b),valueset:!0,node:b.right},C=d.voidOperation;else if(void 0!==a.globalScope[l])a.globalScope[l]=
{value:E(y,b.operator,a.globalScope[l].value,b),valueset:!0,node:b.right},C=d.voidOperation;else throw Error("Variable not recognised");return C;case "UpdateExpression":var z;var F,l=null,x="";if("MemberExpression"===b.argument.type){l=D(a,b.argument.object);x=!0===b.argument.computed?D(a,b.argument.property):b.argument.property.name;if(d.isArray(l))if(d.isNumber(x)){0>x&&(x=l.length+x);if(0>x||x>=l.length)throw Error("Assignment outside of array bounds");F=d.toNumber(l[x]);l[x]="++"===b.operator?
F+1:F-1}else throw Error("Invalid Parameter");else if(l instanceof f){if(!1===d.isString(x))throw Error("Dictionary accessor must be a string");if(!0===l.hasField(x))F=d.toNumber(l.field(x)),l.setField(x,"++"===b.operator?F+1:F-1);else throw Error("Invalid Parameter");}else if(l instanceof c){if(!1===d.isString(x))throw Error("Feature accessor must be a string");if(!0===l.hasField(x))F=d.toNumber(l.field(x)),l.setField(x,"++"===b.operator?F+1:F-1);else throw Error("Invalid Parameter");}else{if(d.isImmutableArray(l))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}z=!1===b.prefix?F:"++"===b.operator?F+1:F-1}else if(l=b.argument.name.toLowerCase(),null!==a.localScope&&void 0!==a.localScope[l])F=d.toNumber(a.localScope[l].value),a.localScope[l]={value:"++"===b.operator?F+1:F-1,valueset:!0,node:b},z=!1===b.prefix?F:"++"===b.operator?F+1:F-1;else if(void 0!==a.globalScope[l])F=d.toNumber(a.globalScope[l].value),a.globalScope[l]={value:"++"===b.operator?F+1:F-1,valueset:!0,node:b},z=!1===b.prefix?F:"++"===b.operator?F+1:F-1;else throw Error("Variable not recognised");
return z;case "BreakStatement":return d.breakResult;case "ContinueStatement":return d.continueResult;case "ForStatement":null!==b.init&&D(a,b.init);x={testResult:!0,lastAction:d.voidOperation};do b:{C=a;y=b;z=x;if(null!==y.test){z.testResult=D(C,y.test);if(!1===z.testResult)break b;if(!0!==z.testResult)throw Error(k.nodeErrorMessage(y,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}z.lastAction=D(C,y.body);z.lastAction===d.breakResult?z.testResult=!1:z.lastAction instanceof d.ReturnResult?z.testResult=
!1:null!==y.update&&D(C,y.update)}while(!0===x.testResult);l=x.lastAction instanceof d.ReturnResult?x.lastAction:d.voidOperation;return l;case "ForInStatement":return H(a,b);case "Identifier":return Y(a,b);case "MemberExpression":return ha(a,b);case "Literal":return b.value;case "ThisExpression":throw Error(k.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "CallExpression":return V(a,b);case "UnaryExpression":return ea(a,b);case "BinaryExpression":return ba(a,b);case "LogicalExpression":return Q(a,
b);case "ConditionalExpression":throw Error(k.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(l=[],x=0;x<b.elements.length;x++){var J=D(a,b.elements[x]);if(d.isFunctionParameter(J))throw Error(k.nodeErrorMessage(b,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));J===d.voidOperation?l.push(null):l.push(J)}}catch(Qa){throw Qa;}return l;case "ObjectExpression":l={};for(x=0;x<b.properties.length;x++){var na=D(a,b.properties[x]);if(d.isFunctionParameter(na.value))throw Error("Illegal Argument");
if(!1===d.isString(na.key))throw Error("Illegal Argument");l[na.key.toString()]=na.value===d.voidOperation?null:na.value}var T=new f(l);T.immutable=!1;return T;case "Property":return{key:"Identifier"===b.key.type?b.key.name:D(a,b.key),value:D(a,b.value)};case "Array":throw Error(k.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));default:throw Error(k.nodeErrorMessage(b,"RUNTIME","UNREOGNISED"));}}catch(Qa){throw Qa;}}function H(a,b){var e=D(a,b.right);"VariableDeclaration"===b.left.type&&D(a,b.left);
var g=null,h="VariableDeclaration"===b.left.type?b.left.declarations[0].id.name:b.left.name;null!==a.localScope&&void 0!==a.localScope[h]&&(g=a.localScope[h]);null===g&&void 0!==a.globalScope[h]&&(g=a.globalScope[h]);if(null===g)throw Error(k.nodeErrorMessage(b,"RUNTIME","VARIABLENOTDECLARED"));if(d.isArray(e)||d.isString(e)){for(var e=e.length,l=0;l<e&&(g.value=l,h=D(a,b.body),h!==d.breakResult);l++)if(h instanceof d.ReturnResult)return h;return d.voidOperation}if(d.isImmutableArray(e)){for(l=0;l<
e.length()&&(g.value=l,h=D(a,b.body),h!==d.breakResult);l++)if(h instanceof d.ReturnResult)return h;return d.voidOperation}if(e instanceof f||e instanceof c)for(e=e.keys(),l=0;l<e.length&&(g.value=e[l],h=D(a,b.body),h!==d.breakResult);l++){if(h instanceof d.ReturnResult)return h}else return d.voidOperation}function E(a,b,c,e){switch(b){case "\x3d":return a===d.voidOperation?null:a;case "/\x3d":return d.toNumber(c)/d.toNumber(a);case "*\x3d":return d.toNumber(c)*d.toNumber(a);case "-\x3d":return d.toNumber(c)-
d.toNumber(a);case "+\x3d":return d.isString(c)||d.isString(a)?d.toString(c)+d.toString(a):d.toNumber(c)+d.toNumber(a);case "%\x3d":return d.toNumber(c)%d.toNumber(a);default:throw Error(k.nodeErrorMessage(e,"RUNTIME","OPERATORNOTRECOGNISED"));}}function J(a,b,c,e){b=b.toLowerCase();switch(b){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return b=a.spatialReference._arcadeCacheId,void 0===b&&(c=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&
(c=!1),c&&(X++,b=a.spatialReference._arcadeCacheId=X)),a=new f({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==b&&(a._arcadeCacheId="SPREF"+b.toString()),a}switch(a.type){case "extent":switch(b){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[b],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(b){case "rings":return b=d.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===
b&&(X++,b=X,d.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",b)),a=new l(a.rings,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polygon"}break;case "point":switch(b){case "x":case "y":case "z":case "m":return void 0!==a[b]?a[b]:null;case "type":return"Point"}break;case "polyline":switch(b){case "paths":return b=d.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===b&&(X++,b=X,d.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",
b)),a=new l(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polyline"}break;case "multipoint":switch(b){case "points":return b=d.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===b&&(X++,b=X,d.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",b)),a=new h(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,b,1);case "type":return"Multipoint"}}throw Error(k.nodeErrorMessage(e,"RUNTIME","PROPERTYNOTFOUND"));}function ha(a,b){try{var e=
D(a,b.object);if(null===e)throw Error(k.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));if(!1===b.computed){if(e instanceof f||e instanceof c)return e.field(b.property.name);if(e instanceof z)return J(e,b.property.name,a,b);throw Error(k.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}var g=D(a,b.property);if(e instanceof f||e instanceof c){if(d.isString(g))return e.field(g)}else if(e instanceof z){if(d.isString(g))return J(e,g,a,b)}else if(d.isArray(e)){if(d.isNumber(g)&&isFinite(g)&&Math.floor(g)===g){0>
g&&(g=e.length+g);if(g>=e.length||0>g)throw Error(k.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return e[g]}}else if(d.isString(e)){if(d.isNumber(g)&&isFinite(g)&&Math.floor(g)===g){0>g&&(g=e.length+g);if(g>=e.length||0>g)throw Error(k.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return e[g]}}else if(d.isImmutableArray(e)&&d.isNumber(g)&&isFinite(g)&&Math.floor(g)===g){0>g&&(g=e.length()+g);if(g>=e.length()||0>g)throw Error(k.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return e.get(g)}throw Error(k.nodeErrorMessage(b,
"RUNTIME","INVALIDTYPE"));}catch(va){throw va;}}function ea(a,b){try{var c=D(a,b.argument);if(d.isBoolean(c)){if("!"===b.operator)return!c;if("-"===b.operator)return-1*d.toNumber(c);if("+"===b.operator)return 1*d.toNumber(c);throw Error(k.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===b.operator)return-1*d.toNumber(c);if("+"===b.operator)return 1*d.toNumber(c);throw Error(k.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(pa){throw pa;}}function ba(a,b){try{var c=
[D(a,b.left),D(a,b.right)],e=c[0],f=c[1];switch(b.operator){case "\x3d\x3d":return d.equalityTest(e,f);case "\x3d":return d.equalityTest(e,f);case "!\x3d":return!d.equalityTest(e,f);case "\x3c":return d.greaterThanLessThan(e,f,b.operator);case "\x3e":return d.greaterThanLessThan(e,f,b.operator);case "\x3c\x3d":return d.greaterThanLessThan(e,f,b.operator);case "\x3e\x3d":return d.greaterThanLessThan(e,f,b.operator);case "+":return d.isString(e)||d.isString(f)?d.toString(e)+d.toString(f):d.toNumber(e)+
d.toNumber(f);case "-":return d.toNumber(e)-d.toNumber(f);case "*":return d.toNumber(e)*d.toNumber(f);case "/":return d.toNumber(e)/d.toNumber(f);case "%":return d.toNumber(e)%d.toNumber(f);default:throw Error(k.nodeErrorMessage(b,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(Ha){throw Ha;}}function Q(a,b){try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(k.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||
"UpdateExpression"===b.right.type)throw Error(k.nodeErrorMessage(b.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var c=D(a,b.left);if(d.isBoolean(c))switch(b.operator){case "||":if(!0===c)return c;var e=D(a,b.right);if(d.isBoolean(e))return e;throw Error(k.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===c)return c;e=D(a,b.right);if(d.isBoolean(e))return e;throw Error(k.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));default:throw Error(k.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));
}else throw Error(k.nodeErrorMessage(b,"RUNTIME","ONLYBOOLEAN"));}catch(va){throw va;}}function Y(a,b){var c;try{var d=b.name.toLowerCase();if(null!==a.localScope&&void 0!==a.localScope[d])return c=a.localScope[d],!0!==c.valueset&&(c.value=D(a,c.node),c.valueset=!0),c.value;if(void 0!==a.globalScope[d])return c=a.globalScope[d],!0!==c.valueset&&(c.value=D(a,c.node),c.valueset=!0),c.value;throw Error(k.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(va){throw va;}}function V(a,b){try{if("Identifier"!==
b.callee.type)throw Error(k.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==a.localScope&&void 0!==a.localScope[b.callee.name.toLowerCase()]){var c=a.localScope[b.callee.name.toLowerCase()];if(c.value instanceof d.NativeFunction)return c.value.fn(a,b);if(c.value instanceof e)return W(a,b,c.value.definition);throw Error(k.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}if(void 0!==a.globalScope[b.callee.name.toLowerCase()]){c=a.globalScope[b.callee.name.toLowerCase()];if(c.value instanceof
d.NativeFunction)return c.value.fn(a,b);if(c.value instanceof e)return W(a,b,c.value.definition);throw Error(k.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}throw Error(k.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));}catch(pa){throw pa;}}function na(a){return null==a?"":d.isArray(a)||d.isImmutableArray(a)?"Array":d.isDate(a)?"Date":d.isString(a)?"String":d.isBoolean(a)?"Boolean":d.isNumber(a)?"Number":a instanceof f?"Dictionary":a instanceof c?"Feature":a instanceof p?"Point":a instanceof n?"Polygon":
a instanceof A?"Polyline":a instanceof x?"Multipoint":a instanceof r?"Extent":d.isFunctionParameter(a)?"Function":a===d.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function T(a,b,c,e){try{var f=D(a,b.arguments[c]);if(d.equalityTest(f,e))return D(a,b.arguments[c+1]);var g=b.arguments.length-c;return 1===g?D(a,b.arguments[c]):2===g?null:3===g?D(a,b.arguments[c+2]):T(a,b,c+2,e)}catch(Ia){throw Ia;}}function K(a,b,c,e){try{if(!0===e)return D(a,b.arguments[c+1]);if(3===
b.arguments.length-c)return D(a,b.arguments[c+2]);var f=D(a,b.arguments[c+2]);if(!1===d.isBoolean(f))throw Error("WHEN needs boolean test conditions");return K(a,b,c+2,f)}catch(Ha){throw Ha;}}function Z(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var e=Z(a.slice(0,d),b);a=Z(a.slice(d,c),b);for(c=[];0<e.length||0<a.length;)0<e.length&&0<a.length?(d=b(e[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(e[0]),e=e.slice(1)):(c.push(a[0]),a=a.slice(1))):0<e.length?(c.push(e[0]),e=
e.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function O(a,b,c){try{var e=a.body;if(c.length!==a.params.length)throw Error("Invalid Parameter calls to function.");for(var f=0;f<c.length;f++)b.localScope[a.params[f].name.toLowerCase()]={value:c[f],valueset:!0,node:null};var g=D(b,e);if(g instanceof d.ReturnResult)return g.value;if(g===d.breakResult)throw Error("Cannot Break from a Function");if(g===d.continueResult)throw Error("Cannot Continue from a Function");return g instanceof d.ImplicitResult?
g.value:g}catch(Ia){throw Ia;}}function W(a,b,c){return F(a,b,function(b,d,e){b={spatialReference:a.spatialReference,applicationCache:void 0===a.applicationCache?null:a.applicationCache,globalScope:a.globalScope,depthCounter:a.depthCounter+1,console:a.console,localScope:{}};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return O(c,b,e)})}function R(a){return function(){var b={applicationCache:void 0===a.context.applicationCache?null:a.context.applicationCache,spatialReference:a.context.spatialReference,
console:a.context.console,localScope:{},depthCounter:a.context.depthCounter+1,globalScope:a.context.globalScope};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return O(a.definition,b,arguments)}}function da(a){console.log(a)}Object.defineProperty(a,"__esModule",{value:!0});var X=0,U={};m.registerFunctions(U,F);y.registerFunctions(U,F);v.registerFunctions(U,F);g.registerFunctions(U,F);w.registerFunctions(U,F);t.registerFunctions(U,F);U["typeof"]=function(a,b){return F(a,b,function(a,
b,c){d.pcCheck(c,1,1);a=na(c[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};U.iif=function(a,b){try{d.pcCheck(null===b.arguments?[]:b.arguments,3,3);var c=D(a,b.arguments[0]);if(!1===d.isBoolean(c))throw Error("IF Function must have a boolean test condition");return!0===c?D(a,b.arguments[1]):D(a,b.arguments[2])}catch(pa){throw pa;}};U.decode=function(a,b){try{if(2>b.arguments.length)throw Error("Missing Parameters");if(2===b.arguments.length)return D(a,b.arguments[1]);
if(0===(b.arguments.length-1)%2)throw Error("Must have a default value result.");var c=D(a,b.arguments[0]);return T(a,b,1,c)}catch(pa){throw pa;}};U.when=function(a,b){try{if(3>b.arguments.length)throw Error("Missing Parameters");if(0===b.arguments.length%2)throw Error("Must have a default value result.");var c=D(a,b.arguments[0]);if(!1===d.isBoolean(c))throw Error("WHEN needs boolean test conditions");return K(a,b,0,c)}catch(pa){throw pa;}};U.top=function(a,b){return F(a,b,function(a,b,c){d.pcCheck(c,
2,2);if(d.isArray(c[0]))return d.toNumber(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,d.toNumber(c[1]));if(d.isImmutableArray(c[0]))return d.toNumber(c[1])>=c[0].length()?c[0].slice(0):c[0].slice(0,d.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};U.first=function(a,b){return F(a,b,function(a,b,c){d.pcCheck(c,1,1);return d.isArray(c[0])?0===c[0].length?null:c[0][0]:d.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):null})};U.sort=function(a,b){return F(a,b,function(a,
b,c){d.pcCheck(c,1,2);a=c[0];d.isImmutableArray(a)&&(a=a.toArray());if(!1===d.isArray(a))throw Error("Illegal Argument");if(1<c.length){if(!1===d.isFunctionParameter(c[1]))throw Error("Illegal Argument");var e=R(c[1]);a=Z(a,function(a,b){return e(a,b)})}else{if(0===a.length)return[];c={};for(b=0;b<a.length;b++){var f=na(a[b]);""!==f&&(c[f]=!0)}if(!0===c.Array||!0===c.Dictionary||!0===c.Feature||!0===c.Point||!0===c.Polygon||!0===c.Polyline||!0===c.Multipoint||!0===c.Extent||!0===c.Function)return a.slice(0);
b=0;var f="",g;for(g in c)b++,f=g;a=1<b||"String"===f?Z(a,function(a,b){if(null===a||void 0===a||a===d.voidOperation)return null===b||void 0===b||b===d.voidOperation?0:1;if(null===b||void 0===b||b===d.voidOperation)return-1;a=d.toString(a);b=d.toString(b);return a<b?-1:a===b?0:1}):"Number"===f?Z(a,function(a,b){return a-b}):"Boolean"===f?Z(a,function(a,b){return a===b?0:b?-1:1}):"Date"===f?Z(a,function(a,b){return b-a}):a.slice(0)}return a})};for(var ma in U)U[ma]={value:new d.NativeFunction(U[ma]),
valueset:!0,node:null};var ja=function(){};ja.prototype=U;ja.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};ja.prototype.pi={value:Math.PI,valueset:!0,node:null};a.functionHelper={fixSpatialReference:d.fixSpatialReference,parseArguments:C,standardFunction:F};a.extend=function(a){for(var b={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:F,evaluateIdentifier:Y,arcadeCustomFunctionHandler:R},c=0;c<a.length;c++)a[c].registerFunctions(b);for(var e in b.functions)U[e]=
{value:new d.NativeFunction(b.functions[e]),valueset:!0,node:null},ja.prototype[e]=U[e];for(c=0;c<b.signatures.length;c++)k.addFunctionDeclaration(b.signatures[c],"f")};a.executeScript=function(a,b,g){g||(g=new B(102100));var k=b.vars,h=b.customfunctions,l=new ja;k||(k={});h||(h={});var m=new f({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});m.immutable=!1;l.textformatting={value:m,valueset:!0,node:null};for(var n in h)l[n]={value:new d.NativeFunction(h[n]),
native:!0,valueset:!0,node:null};for(n in k)l[n]=k[n]&&"esri.Graphic"===k[n].declaredClass?{value:c.createFromGraphic(k[n]),valueset:!0,node:null}:{value:k[n],valueset:!0,node:null};a=D({spatialReference:g,globalScope:l,localScope:null,console:b.console?b.console:da,depthCounter:1,applicationCache:void 0===b.applicationCache?null:b.applicationCache},a.body[0].body);a instanceof d.ReturnResult&&(a=a.value);a instanceof d.ImplicitResult&&(a=a.value);a===d.voidOperation&&(a=null);if(a===d.breakResult)throw Error("Cannot return BREAK");
if(a===d.continueResult)throw Error("Cannot return CONTINUE");if(a instanceof e)throw Error("Cannot return FUNCTION");if(a instanceof d.NativeFunction)throw Error("Cannot return FUNCTION");return a};a.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return k.findFieldLiterals(a,b)};a.validateScript=function(a,b){return k.validateScript(a,b,"simple")};a.referencesMember=function(a,b){return k.referencesMember(a,b)};a.referencesFunction=function(a,b){return k.referencesFunction(a,b)};a.findFunctionCalls=
function(a){return k.findFunctionCalls(a,!1)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/esprima"],function(b,a,f,c){Object.defineProperty(a,"__esModule",{value:!0});a.parseScript=function(a){a=c.parse("function _() { "+a+"\n}");if(null===a.body||void 0===a.body)throw Error("No formula provided.");if(0===a.body.length)throw Error("No formula provided.");if(0===a.body.length)throw Error("No formula provided.");if("BlockStatement"!==a.body[0].body.type)throw Error("Invalid formula content.");
var b=f.validateLanguage(a);if(""!==b)throw Error(b);return a};a.scriptCheck=function(a,b,h,d){var e=[];try{var l=c.parse("function _() { "+a+"\n}",{tolerant:!0,loc:!0}),g=l.errors;if(0<g.length)for(var t=0;t<g.length;t++)e.push({line:g[t].lineNumber,character:g[t].column,reason:g[t].description});var v=f.checkScript(l,b,h,d);for(b=0;b<v.length;b++)e.push(v[b])}catch(w){try{"Unexpected token }"===w.description?(w.index=("function _() { "+a+"\n}").length-1,e.push({line:w.lineNumber,character:w.column,
reason:"Unexpected end of script"})):e.push({line:w.lineNumber,character:w.column,reason:w.description})}catch(y){}}return e};a.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return f.findFieldLiterals(a,b)};a.validateScript=function(a,b,c){void 0===c&&(c="full");return f.validateScript(a,b,c)};a.referencesMember=function(a,b){return f.referencesMember(a,b)};a.referencesFunction=function(a,b){return f.referencesFunction(a,b)}})},"esri/arcade/lib/esprima":function(){(function(b,a){"function"===
typeof define&&define.amd?define(["exports"],a):"undefined"!==typeof exports?a(exports):a(b.esprima={})})(this,function(b){function a(a,b){if(!a)throw Error("ASSERT: "+b);}function f(a){return 48<=a&&57>=a}function c(a){return 0<="0123456789abcdefABCDEF".indexOf(a)}function e(a){return 0<="01234567".indexOf(a)}function l(a){return 10===a||13===a||8232===a||8233===a}function h(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||92===a||128<=a&&cb.NonAsciiIdentifierStart.test(String.fromCharCode(a))}
function d(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||48<=a&&57>=a||92===a||128<=a&&cb.NonAsciiIdentifierPart.test(String.fromCharCode(a))}function k(a){a=a.toLowerCase();switch(a.length){case 2:return"if"===a||"in"===a;case 3:return"var"===a||"for"===a;case 4:return"else"===a;case 5:return"break"===a;case 6:return"return"===a;case 8:return"function"===a.toLowerCase()||"continue"===a;default:return!1}}function m(b,c,d,e,f){a("number"===typeof d,"Comment must have valid position");ca.lastCommentStart>=
d||(ca.lastCommentStart=d,b={type:b,value:c},L.range&&(b.range=[d,e]),L.loc&&(b.loc=f),L.comments.push(b),L.attachComment&&(L.leadingComments.push(b),L.trailingComments.push(b)))}function g(a){var b,c,d;b=G-a;for(c={start:{line:fa,column:G-la-a}};G<ua;)if(d=M.charCodeAt(G),++G,l(d)){L.comments&&(a=M.slice(b+a,G-1),c.end={line:fa,column:G-la-1},m("Line",a,b,G-1,c));13===d&&10===M.charCodeAt(G)&&++G;++fa;la=G;return}L.comments&&(a=M.slice(b+a,G),c.end={line:fa,column:G-la},m("Line",a,b,G,c))}function t(){var a,
b;for(b=0===G;G<ua;)if(a=M.charCodeAt(G),32===a||9===a||11===a||12===a||160===a||5760<=a&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(a))++G;else if(l(a))++G,13===a&&10===M.charCodeAt(G)&&++G,++fa,la=G,b=!0;else if(47===a)if(a=M.charCodeAt(G+1),47===a)++G,++G,g(2),b=!0;else if(42===a){++G;++G;a:{var c=a=void 0,d=void 0,d=void 0;L.comments&&(a=G-2,c={start:{line:fa,column:G-la-2}});for(;G<ua;)if(d=M.charCodeAt(G),l(d))13===d&&10===M.charCodeAt(G+
1)&&++G,++fa,++G,la=G,G>=ua&&V();else{if(42===d&&47===M.charCodeAt(G+1)){++G;++G;L.comments&&(d=M.slice(a+2,G-2),c.end={line:fa,column:G-la},m("Block",d,a,G,c));break a}++G}V()}}else break;else if(b&&45===a)if(45===M.charCodeAt(G+1)&&62===M.charCodeAt(G+2))G+=3,g(3);else break;else if(60===a)if("!--"===M.slice(G+1,G+4))++G,++G,++G,++G,g(4);else break;else break}function v(a){var b,d,e=0;b="u"===a?4:2;for(a=0;a<b;++a)if(G<ua&&c(M[G]))d=M[G++],e=16*e+"0123456789abcdef".indexOf(d.toLowerCase());else return"";
return String.fromCharCode(e)}function w(){var a,b;a=M.charCodeAt(G++);b=String.fromCharCode(a);92===a&&(117!==M.charCodeAt(G)&&V(),++G,(a=v("u"))&&"\\"!==a&&h(a.charCodeAt(0))||V(),b=a);for(;G<ua;){a=M.charCodeAt(G);if(!d(a))break;++G;b+=String.fromCharCode(a);92===a&&(b=b.substr(0,b.length-1),117!==M.charCodeAt(G)&&V(),++G,(a=v("u"))&&"\\"!==a&&d(a.charCodeAt(0))||V(),b+=a)}return b}function y(){var a=G,b=M.charCodeAt(G),c,d=M[G];switch(b){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++G,
L.tokenize&&(40===b?L.openParenToken=L.tokens.length:123===b&&(L.openCurlyToken=L.tokens.length)),{type:S.Punctuator,value:String.fromCharCode(b),lineNumber:fa,lineStart:la,start:a,end:G};default:if(c=M.charCodeAt(G+1),61===c)switch(b){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return G+=2,{type:S.Punctuator,value:String.fromCharCode(b)+String.fromCharCode(c),lineNumber:fa,lineStart:la,start:a,end:G};case 33:case 61:return G+=2,61===M.charCodeAt(G)&&++G,{type:S.Punctuator,
value:M.slice(a,G),lineNumber:fa,lineStart:la,start:a,end:G}}}b=M.substr(G,4);if("\x3e\x3e\x3e\x3d"===b)return G+=4,{type:S.Punctuator,value:b,lineNumber:fa,lineStart:la,start:a,end:G};b=b.substr(0,3);if("\x3e\x3e\x3e"===b||"\x3c\x3c\x3d"===b||"\x3e\x3e\x3d"===b)return G+=3,{type:S.Punctuator,value:b,lineNumber:fa,lineStart:la,start:a,end:G};b=b.substr(0,2);if(d===b[1]&&0<="+-\x3c\x3e\x26|".indexOf(d)||"\x3d\x3e"===b)return G+=2,{type:S.Punctuator,value:b,lineNumber:fa,lineStart:la,start:a,end:G};
if(0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(d))return++G,{type:S.Punctuator,value:d,lineNumber:fa,lineStart:la,start:a,end:G};V()}function r(){var b,d,g;g=M[G];a(f(g.charCodeAt(0))||"."===g,"Numeric literal must start with a decimal digit or a decimal point");d=G;b="";if("."!==g){b=M[G++];g=M[G];if("0"===b){if("x"===g||"X"===g){++G;for(b="";G<ua&&c(M[G]);)b+=M[G++];0===b.length&&V();h(M.charCodeAt(G))&&V();return{type:S.NumericLiteral,value:parseInt("0x"+b,16),lineNumber:fa,lineStart:la,start:d,end:G}}if("b"===
g||"B"===g){++G;for(g="";G<ua;){b=M[G];if("0"!==b&&"1"!==b)break;g+=M[G++]}0===g.length&&V();G<ua&&(b=M.charCodeAt(G),(h(b)||f(b))&&V());return{type:S.NumericLiteral,value:parseInt(g,2),lineNumber:fa,lineStart:la,start:d,end:G}}if("o"===g||"O"===g){e(g)?(g=!0,b="0"+M[G++]):(g=!1,++G,b="");for(;G<ua&&e(M[G]);)b+=M[G++];g||0!==b.length||V();(h(M.charCodeAt(G))||f(M.charCodeAt(G)))&&V();return{type:S.NumericLiteral,value:parseInt(b,8),octal:g,lineNumber:fa,lineStart:la,start:d,end:G}}}for(;f(M.charCodeAt(G));)b+=
M[G++];g=M[G]}if("."===g){for(b+=M[G++];f(M.charCodeAt(G));)b+=M[G++];g=M[G]}if("e"===g||"E"===g){b+=M[G++];g=M[G];if("+"===g||"-"===g)b+=M[G++];if(f(M.charCodeAt(G)))for(;f(M.charCodeAt(G));)b+=M[G++];else V()}h(M.charCodeAt(G))&&V();return{type:S.NumericLiteral,value:parseFloat(b),lineNumber:fa,lineStart:la,start:d,end:G}}function z(){aa=null;t();ba("Regular Expression language structures not supported")}function x(){t();z()}function p(){var a;a=L.tokens[L.tokens.length-1];if(!a)return x();if("Punctuator"===
a.type){if("]"===a.value)return y();if(")"===a.value)return a=L.tokens[L.openParenToken-1],!a||"Keyword"!==a.type||"if"!==a.value.toLowerCase()&&"while"!==a.value.toLowerCase()&&"for"!==a.value.toLowerCase()&&"with"!==a.value.toLowerCase()?y():x();if("}"===a.value){if(L.tokens[L.openCurlyToken-3]&&"Keyword"===L.tokens[L.openCurlyToken-3].type){if(a=L.tokens[L.openCurlyToken-4],!a)return y()}else if(L.tokens[L.openCurlyToken-4]&&"Keyword"===L.tokens[L.openCurlyToken-4].type){if(a=L.tokens[L.openCurlyToken-
5],!a)return x()}else return y();if(0<=Ba.indexOf(a.value))return y()}return x()}return"Keyword"===a.type&&"this"!==a.value?x():y()}function n(){var b;t();if(G>=ua)return{type:S.EOF,lineNumber:fa,lineStart:la,start:G,end:G};b=M.charCodeAt(G);if(h(b)){var g;b=G;if(92===M.charCodeAt(G))g=w();else a:{var m;for(g=G++;G<ua;){m=M.charCodeAt(G);if(92===m){G=g;g=w();break a}if(d(m))++G;else break}g=M.slice(g,G)}return{type:1===g.length?S.Identifier:k(g)?S.Keyword:"null"===g.toLowerCase()?S.NullLiteral:"true"===
g.toLowerCase()||"false"===g.toLowerCase()?S.BooleanLiteral:S.Identifier,value:g,lineNumber:fa,lineStart:la,start:b,end:G}}if(40===b||41===b||59===b)return y();if(39===b||34===b){var n="",A,B,C;m=!1;var q,x;q=fa;x=la;b=M[G];a("'"===b||'"'===b,"String literal must starts with a quote");g=G;for(++G;G<ua;)if(A=M[G++],A===b){b="";break}else if("\\"===A)if((A=M[G++])&&l(A.charCodeAt(0)))++fa,"\r"===A&&"\n"===M[G]&&++G,la=G;else switch(A){case "u":case "x":if("{"===M[G]){++G;B=A=void 0;A=M[G];B=0;for("}"===
A&&V();G<ua;){A=M[G++];if(!c(A))break;B=16*B+"0123456789abcdef".indexOf(A.toLowerCase())}(1114111<B||"}"!==A)&&V();A=65535>=B?String.fromCharCode(B):String.fromCharCode((B-65536>>10)+55296,(B-65536&1023)+56320);n+=A}else C=G,(B=v(A))?n+=B:(G=C,n+=A);break;case "n":n+="\n";break;case "r":n+="\r";break;case "t":n+="\t";break;case "b":n+="\b";break;case "f":n+="\f";break;case "v":n+="\x0B";break;default:e(A)?(B="01234567".indexOf(A),0!==B&&(m=!0),G<ua&&e(M[G])&&(m=!0,B=8*B+"01234567".indexOf(M[G++]),
0<="0123".indexOf(A)&&G<ua&&e(M[G])&&(B=8*B+"01234567".indexOf(M[G++]))),n+=String.fromCharCode(B)):n+=A}else if(l(A.charCodeAt(0)))break;else n+=A;""!==b&&V();return{type:S.StringLiteral,value:n,octal:m,startLineNumber:q,startLineStart:x,lineNumber:fa,lineStart:la,start:g,end:G}}return 46===b?f(M.charCodeAt(G+1))?r():y():f(b)?r():L.tokenize&&47===b?p():y()}function A(){var a,b,c;t();a={start:{line:fa,column:G-la}};b=n();a.end={line:fa,column:G-la};b.type!==S.EOF&&(c=M.slice(b.start,b.end),a={type:Pa[b.type],
value:c,range:[b.start,b.end],loc:a},b.regex&&(a.regex={pattern:b.regex.pattern,flags:b.regex.flags}),L.tokens.push(a));return b}function B(){var a;a=aa;G=a.end;fa=a.lineNumber;la=a.lineStart;aa="undefined"!==typeof L.tokens?A():n();G=a.end;fa=a.lineNumber;la=a.lineStart;return a}function C(){var a,b,c;a=G;b=fa;c=la;aa="undefined"!==typeof L.tokens?A():n();G=a;fa=b;la=c}function F(){this.line=fa;this.column=G-la}function D(){this.start=new F;this.end=null}function H(a){this.start=a.type===S.StringLiteral?
{line:a.startLineNumber,column:a.start-a.startLineStart}:{line:a.lineNumber,column:a.start-a.lineStart};this.end=null}function E(){G=aa.start;aa.type===S.StringLiteral?(fa=aa.startLineNumber,la=aa.startLineStart):(fa=aa.lineNumber,la=aa.lineStart);L.range&&(this.range=[G,0]);L.loc&&(this.loc=new D)}function J(a){L.range&&(this.range=[a.start,0]);L.loc&&(this.loc=new H(a))}function ha(){var a,b,c,d;a=G;b=fa;c=la;t();d=fa!==b;G=a;fa=b;la=c;return d}function ea(a,b,c){var d=Error("Line "+a+": "+c);d.index=
b;d.lineNumber=a;d.column=b-la+1;d.description=c;return d}function ba(b){var c,d;c=Array.prototype.slice.call(arguments,1);d=b.replace(/%(\d)/g,function(b,d){a(d<c.length,"Message reference must be in range");return c[d]});throw ea(fa,G,d);}function Q(b){var c,d;c=Array.prototype.slice.call(arguments,1);d=b.replace(/%(\d)/g,function(b,d){a(d<c.length,"Message reference must be in range");return c[d]});d=ea(fa,G,d);if(L.errors)L.errors.push(d);else throw d;}function Y(a,b){var c=sa.UnexpectedToken;
a&&(c=b?b:a.type===S.EOF?sa.UnexpectedEOS:a.type===S.Identifier?sa.UnexpectedIdentifier:a.type===S.NumericLiteral?sa.UnexpectedNumber:a.type===S.StringLiteral?sa.UnexpectedString:sa.UnexpectedToken);c=c.replace("%0",a?a.value:"ILLEGAL");return a&&"number"===typeof a.lineNumber?ea(a.lineNumber,a.start,c):ea(fa,G,c)}function V(a,b){throw Y(a,b);}function na(a,b){a=Y(a,b);if(L.errors)L.errors.push(a);else throw a;}function T(a){var b=B();b.type===S.Punctuator&&b.value===a||V(b)}function K(){var a;L.errors?
(a=aa,a.type===S.Punctuator&&","===a.value?B():a.type===S.Punctuator&&";"===a.value?(B(),na(a)):na(a,sa.UnexpectedToken)):T(",")}function Z(a){var b=B();b.type===S.Keyword&&b.value.toLowerCase()===a.toLowerCase()||V(b)}function O(a){return aa.type===S.Punctuator&&aa.value===a}function W(a){return aa.type===S.Keyword&&aa.value.toLowerCase()===a.toLowerCase()}function R(){var a;59===M.charCodeAt(G)||O(";")?B():(a=fa,t(),fa===a&&(aa.type===S.EOF||O("}")||V(aa)))}function da(a){return a.type===ga.Identifier||
a.type===ga.MemberExpression}function X(a,b){var c,d=new E;b=wa;c=Xa();wa=b;return d.finishFunctionExpression(null,a,[],c)}function U(){var a,b;a=wa;wa=!0;b=Ka();b=X(b.params);wa=a;return b}function ma(){var a,b=new E;a=B();return a.type===S.StringLiteral||a.type===S.NumericLiteral?(wa&&a.octal&&na(a,sa.StrictOctalLiteral),b.finishLiteral(a)):b.finishIdentifier(a.value)}function ja(){var a,b,c,d=new E;a=aa;if(a.type===S.Identifier)return b=ma(),"get"!==a.value||O(":")||O("(")?"set"!==a.value||O(":")||
O("(")?O(":")?(B(),a=q(),d.finishProperty("init",b,a,!1,!1)):O("(")?(a=U(),d.finishProperty("init",b,a,!0,!1)):d.finishProperty("init",b,b,!1,!0):(b=ma(),T("("),a=aa,a.type!==S.Identifier?(T(")"),na(a),a=X([])):(c=[ab()],T(")"),a=X(c,a)),d.finishProperty("set",b,a,!1,!1)):(b=ma(),T("("),T(")"),a=X([]),d.finishProperty("get",b,a,!1,!1));if(a.type===S.EOF||a.type===S.Punctuator)V(a);else{b=ma();if(O(":"))return B(),a=q(),d.finishProperty("init",b,a,!1,!1);if(O("("))return a=U(),d.finishProperty("init",
b,a,!0,!1);V(B())}}function oa(a){var b=[],c,d,e={},f=String,g=new E;for(!0!==a&&T("{");!O("}");)a=ja(),c=a.key.type===ga.Identifier?a.key.name:f(a.key.value),d="init"===a.kind?La.Data:"get"===a.kind?La.Get:La.Set,c="$"+c,Object.prototype.hasOwnProperty.call(e,c)?(e[c]===La.Data?wa&&d===La.Data?Q(sa.StrictDuplicateProperty):d!==La.Data&&Q(sa.AccessorDataProperty):d===La.Data?Q(sa.AccessorDataProperty):e[c]&d&&Q(sa.AccessorGetSet),e[c]|=d):e[c]=d,b.push(a),O("}")||K();T("}");return g.finishObjectExpression(b)}
function ia(){var a,b,c,d;if(O("("))return T("("),O(")")?(B(),b=lb.ArrowParameterPlaceHolder):(++ca.parenthesisCount,b=Ja(),T(")")),b;if(O("[")){b=[];var e=new E;for(T("[");!O("]");)O(",")?(B(),b.push(null)):(b.push(q()),O("]")||T(","));B();return e.finishArrayExpression(b)}if(O("{"))return oa();a=aa.type;d=new E;if(a===S.Identifier)c=d.finishIdentifier(B().value);else if(a===S.StringLiteral||a===S.NumericLiteral)wa&&aa.octal&&na(aa,sa.StrictOctalLiteral),c=d.finishLiteral(B());else if(a===S.Keyword){if(W("function")){d=
null;var f;c=[];var g=[],k,h=new E;Z("function");O("(")||(d=ab());f=Ka(b);c=f.params;g=f.defaults;a=f.stricted;b=f.firstRestricted;f.message&&(e=f.message);k=wa;f=Xa();wa&&b&&V(b,e);wa&&a&&na(a,e);wa=k;return h.finishFunctionExpression(d,c,g,f)}W("this")?(B(),c=d.finishThisExpression()):V(B())}else a===S.BooleanLiteral?(b=B(),b.value="true"===b.value.toLowerCase(),c=d.finishLiteral(b)):a===S.NullLiteral?(b=B(),b.value=null,c=d.finishLiteral(b)):O("/")||O("/\x3d")?(c="undefined"!==typeof L.tokens?
d.finishLiteral(x()):d.finishLiteral(z()),C()):V(B());return c}function qa(){var a=[];T("(");if(!O(")"))for(;G<ua;){a.push(q());if(O(")"))break;K()}T(")");return a}function pa(){T(".");var a,b=new E;a=B();a.type===S.Identifier||a.type===S.Keyword||a.type===S.BooleanLiteral||a.type===S.NullLiteral||V(a);return b.finishIdentifier(a.value)}function va(){var a;T("[");a=Ja();T("]");return a}function Ha(){var b,c,d=new E;Z("new");var e;a(ca.allowIn,"callee of new expression always allow in keyword.");e=
aa;for(b=W("new")?Ha():ia();;)if(O("["))c=va(),b=(new J(e)).finishMemberExpression("[",b,c);else if(O("."))c=pa(),b=(new J(e)).finishMemberExpression(".",b,c);else break;c=O("(")?qa():[];return d.finishNewExpression(b,c)}function Ia(){var a,b,c=aa,d,e=ca.allowIn;b=aa;ca.allowIn=!0;for(a=W("new")?Ha():ia();;)if(O("."))d=pa(),a=(new J(b)).finishMemberExpression(".",a,d);else if(O("("))d=qa(),a=(new J(b)).finishCallExpression(a,d);else if(O("["))d=va(),a=(new J(b)).finishMemberExpression("[",a,d);else break;
ca.allowIn=e;aa.type!==S.Punctuator||!O("++")&&!O("--")||ha()||(da(a)||Q(sa.InvalidLHSInAssignment),b=B(),a=(new J(c)).finishPostfixExpression(b.value,a));return a}function N(){var a,b,c;aa.type!==S.Punctuator&&aa.type!==S.Keyword?b=Ia():O("++")||O("--")?(c=aa,a=B(),b=N(),da(b)||Q(sa.InvalidLHSInAssignment),b=(new J(c)).finishUnaryExpression(a.value,b)):O("+")||O("-")||O("~")||O("!")?(c=aa,a=B(),b=N(),b=(new J(c)).finishUnaryExpression(a.value,b)):W("delete")||W("void")||W("typeof")?(c=aa,a=B(),b=
N(),b=(new J(c)).finishUnaryExpression(a.value,b),wa&&"delete"===b.operator&&b.argument.type===ga.Identifier&&Q(sa.StrictDelete)):b=Ia();return b}function ra(a,b){var c=0;if(a.type!==S.Punctuator&&a.type!==S.Keyword)return 0;switch(a.value){case "||":c=1;break;case "\x26\x26":c=2;break;case "|":c=3;break;case "^":c=4;break;case "\x26":c=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":c=6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":c=7;
break;case "in":c=b?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":c=8;break;case "+":case "-":c=9;break;case "*":case "/":case "%":c=11}return c}function Za(){var a,b,c,d,e,f;a=aa;b=N();if(b===lb.ArrowParameterPlaceHolder)return b;c=aa;d=ra(c,ca.allowIn);if(0===d)return b;c.prec=d;B();a=[a,aa];f=N();for(e=[b,c,f];0<(d=ra(aa,ca.allowIn));){for(;2<e.length&&d<=e[e.length-2].prec;)f=e.pop(),c=e.pop().value,b=e.pop(),a.pop(),b=(new J(a[a.length-1])).finishBinaryExpression(c,b,f),e.push(b);
c=B();c.prec=d;e.push(c);a.push(aa);b=N();e.push(b)}d=e.length-1;b=e[d];for(a.pop();1<d;)b=(new J(a.pop())).finishBinaryExpression(e[d-1].value,e[d-2],b),d-=2;return b}function Wa(a){var b,c,d,e,f,g,k;e=[];f=[];g=0;k={paramSet:{}};b=0;for(c=a.length;b<c;b+=1)if(d=a[b],d.type===ga.Identifier)e.push(d),f.push(null),ib(k,d,d.name);else if(d.type===ga.AssignmentExpression)e.push(d.left),f.push(d.right),++g,ib(k,d.left,d.left.name);else return null;k.message===sa.StrictParamDupe&&(a=wa?k.stricted:k.firstRestricted,
V(a,k.message));0===g&&(f=[]);return{params:e,defaults:f,rest:null,stricted:k.stricted,firstRestricted:k.firstRestricted,message:k.message}}function q(){var a,b,c,d,e;a=ca.parenthesisCount;b=e=aa;var f,g;g=aa;c=Za();c!==lb.ArrowParameterPlaceHolder&&O("?")&&(B(),f=ca.allowIn,ca.allowIn=!0,b=q(),ca.allowIn=f,T(":"),f=q(),c=(new J(g)).finishConditionalExpression(c,b,f));if(c===lb.ArrowParameterPlaceHolder||O("\x3d\x3e"))if(ca.parenthesisCount===a||ca.parenthesisCount===a+1)if(c.type===ga.Identifier?
d=Wa([c]):c.type===ga.AssignmentExpression?d=Wa([c]):c.type===ga.SequenceExpression?d=Wa(c.expressions):c===lb.ArrowParameterPlaceHolder&&(d=Wa([])),d)return a=d,e=new J(e),T("\x3d\x3e"),d=wa,c=O("{")?Xa():q(),wa&&a.firstRestricted&&V(a.firstRestricted,a.message),wa&&a.stricted&&na(a.stricted,a.message),wa=d,e.finishArrowFunctionExpression(a.params,a.defaults,c,c.type!==ga.BlockStatement);aa.type!==S.Punctuator?a=!1:(a=aa.value,a="\x3d"===a||"*\x3d"===a||"/\x3d"===a||"%\x3d"===a||"+\x3d"===a||"-\x3d"===
a||"\x3c\x3c\x3d"===a||"\x3e\x3e\x3d"===a||"\x3e\x3e\x3e\x3d"===a||"\x26\x3d"===a||"^\x3d"===a||"|\x3d"===a);a&&(da(c)||Q(sa.InvalidLHSInAssignment),b=B(),a=q(),c=(new J(e)).finishAssignmentExpression(b.value,c,a));return c}function Ja(){var a,b=aa;a=q();if(O(",")){for(a=[a];G<ua&&O(",");)B(),a.push(q());a=(new J(b)).finishSequenceExpression(a)}return a}function ab(){var a,b=new E;a=B();a.type!==S.Identifier&&V(a);return b.finishIdentifier(a.value)}function pb(a){var b=null,c,d=new E;c=ab();"const"===
a?(T("\x3d"),b=q()):O("\x3d")&&(B(),b=q());return d.finishVariableDeclarator(c,b)}function zb(a){var b=[];do{b.push(pb(a));if(!O(","))break;B()}while(G<ua);return b}function Oa(a){var b=aa.type,c,d;b===S.EOF&&V(aa);if(b===S.Punctuator&&"{"===aa.value){if(a){T("{");var e=aa;a=G;c=fa;d=la;B();b=O(":");aa=e;G=a;fa=c;la=d;if((aa.type===S.Identifier||aa.type===S.StringLiteral)&&b)return oa(!0);a=new E;for(c=[];G<ua&&!O("}");){d=Ca();if("undefined"===typeof d)break;c.push(d)}T("}");return a.finishBlockStatement(c)}return oa()}a=
new E;if(b===S.Punctuator)switch(aa.value){case ";":return a=new E,T(";"),a.finishEmptyStatement();case "(":return c=Ja(),R(),a.finishExpressionStatement(c)}else if(b===S.Keyword)switch(aa.value.toLowerCase()){case "break":return c=null,Z("break"),59===M.charCodeAt(G)?(B(),ca.inIteration||ca.inSwitch||ba(sa.IllegalBreak),a=a.finishBreakStatement(null)):ha()?(ca.inIteration||ca.inSwitch||ba(sa.IllegalBreak),a=a.finishBreakStatement(null)):(aa.type===S.Identifier&&(c=ab(),d="$"+c.name,Object.prototype.hasOwnProperty.call(ca.labelSet,
d)||ba(sa.UnknownLabel,c.name)),R(),null!==c||ca.inIteration||ca.inSwitch||ba(sa.IllegalBreak),a=a.finishBreakStatement(c)),a;case "continue":return c=null,Z("continue"),59===M.charCodeAt(G)?(B(),ca.inIteration||ba(sa.IllegalContinue),a=a.finishContinueStatement(null)):ha()?(ca.inIteration||ba(sa.IllegalContinue),a=a.finishContinueStatement(null)):(aa.type===S.Identifier&&(c=ab(),d="$"+c.name,Object.prototype.hasOwnProperty.call(ca.labelSet,d)||ba(sa.UnknownLabel,c.name)),R(),null!==c||ca.inIteration||
ba(sa.IllegalContinue),a=a.finishContinueStatement(c)),a;case "for":var f,g,k;g=ca.allowIn;f=b=e=null;Z("for");T("(");if(O(";"))B();else{if(W("var")){ca.allowIn=!1;var l=new E;f=B();k=zb();f=l.finishVariableDeclaration(k,f.value);ca.allowIn=g;1===f.declarations.length&&W("in")&&(B(),c=f,d=Ja(),f=null)}else ca.allowIn=!1,f=Ja(),ca.allowIn=g,W("in")&&(da(f)||Q(sa.InvalidLHSInForIn),B(),c=f,d=Ja(),f=null);"undefined"===typeof c&&T(";")}"undefined"===typeof c&&(O(";")||(b=Ja()),T(";"),O(")")||(e=Ja()));
T(")");k=ca.inIteration;ca.inIteration=!0;g=Oa(!0);ca.inIteration=k;return"undefined"===typeof c?a.finishForStatement(f,b,e,g):a.finishForInStatement(c,d,g);case "function":return jb(a);case "if":return Z("if"),T("("),c=Ja(),T(")"),d=Oa(!0),W("else")?(B(),b=Oa(!0)):b=null,a.finishIfStatement(c,d,b);case "return":return c=null,Z("return"),ca.inFunctionBody||Q(sa.IllegalReturn),32===M.charCodeAt(G)&&h(M.charCodeAt(G+1))?(c=Ja(),R(),a=a.finishReturnStatement(c)):ha()?a=a.finishReturnStatement(null):
(O(";")||O("}")||aa.type===S.EOF||(c=Ja()),R(),a=a.finishReturnStatement(c)),a;case "var":return Z("var"),c=zb(),R(),a.finishVariableDeclaration(c,"var")}c=Ja();if(c.type===ga.Identifier&&O(":"))return B(),b="$"+c.name,Object.prototype.hasOwnProperty.call(ca.labelSet,b)&&ba(sa.Redeclaration,"Label",c.name),ca.labelSet[b]=!0,d=Oa(!1),delete ca.labelSet[b],a.finishLabeledStatement(c,d);R();return a.finishExpressionStatement(c)}function Xa(){var a,b=[],c,d,e,f,g,k=new E;for(T("{");G<ua&&aa.type===S.StringLiteral;){c=
aa;a=Ca();b.push(a);if(a.expression.type!==ga.Literal)break;a=M.slice(c.start+1,c.end-1);"use strict"===a?(wa=!0,d&&na(d,sa.StrictOctalLiteral)):!d&&c.octal&&(d=c)}c=ca.labelSet;d=ca.inIteration;e=ca.inSwitch;f=ca.inFunctionBody;g=ca.parenthesizedCount;ca.labelSet={};ca.inIteration=!1;ca.inSwitch=!1;ca.inFunctionBody=!0;for(ca.parenthesizedCount=0;G<ua&&!O("}");){a=Ca();if("undefined"===typeof a)break;b.push(a)}T("}");ca.labelSet=c;ca.inIteration=d;ca.inSwitch=e;ca.inFunctionBody=f;ca.parenthesizedCount=
g;return k.finishBlockStatement(b)}function ib(a,b,c){c="$"+c;wa?Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.stricted=b,a.message=sa.StrictParamDupe):!a.firstRestricted&&Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.firstRestricted=b,a.message=sa.StrictParamDupe);a.paramSet[c]=!0}function Ka(a){a={params:[],defaultCount:0,defaults:[],firstRestricted:a};T("(");if(!O(")"))for(a.paramSet={};G<ua;){var b=a,c=void 0,d=void 0,e=void 0,c=aa,d=ab();ib(b,c,c.value);O("\x3d")&&(B(),e=q(),
++b.defaultCount);b.params.push(d);b.defaults.push(e);if(O(")"))break;T(",")}T(")");0===a.defaultCount&&(a.defaults=[]);return{params:a.params,defaults:a.defaults,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function jb(){var a,b=[],c=[],d,e,f,g,k,h=new E;Z("function");a=ab();d=Ka(f);b=d.params;c=d.defaults;e=d.stricted;f=d.firstRestricted;d.message&&(g=d.message);k=wa;d=Xa();wa&&f&&V(f,g);wa&&e&&na(e,g);wa=k;return h.finishFunctionDeclaration(a,b,c,d)}function Ca(){if(aa.type===
S.Keyword)return"function"===aa.value.toLowerCase()?jb():Oa(!1);if(aa.type!==S.EOF)return Oa(!1)}function Qa(){var a,b,c,d=[];for(a=0;a<L.tokens.length;++a)b=L.tokens[a],c={type:b.type,value:b.value},b.regex&&(c.regex={pattern:b.regex.pattern,flags:b.regex.flags}),L.range&&(c.range=b.range),L.loc&&(c.loc=b.loc),d.push(c);L.tokens=d}var S,Pa,Ba,ga,lb,La,sa,cb,M,wa,G,fa,la,ua,aa,ca,L;S={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};
Pa={};Pa[S.BooleanLiteral]="Boolean";Pa[S.EOF]="\x3cend\x3e";Pa[S.Identifier]="Identifier";Pa[S.Keyword]="Keyword";Pa[S.NullLiteral]="Null";Pa[S.NumericLiteral]="Numeric";Pa[S.Punctuator]="Punctuator";Pa[S.StringLiteral]="String";Pa[S.RegularExpression]="RegularExpression";Ba="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");
ga={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};lb={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}};
La={Data:1,Get:2,Set:4};sa={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",
MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",
AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};cb={NonAsciiIdentifierStart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/,
NonAsciiIdentifierPart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/};
J.prototype=E.prototype={processComment:function(){var a,b,c,d=L.bottomRightStack,e,f,g=d[d.length-1];if(!(this.type===ga.Program&&0<this.body.length)){if(0<L.trailingComments.length){c=[];for(e=L.trailingComments.length-1;0<=e;--e)f=L.trailingComments[e],f.range[0]>=this.range[1]&&(c.unshift(f),L.trailingComments.splice(e,1));L.trailingComments=[]}else g&&g.trailingComments&&g.trailingComments[0].range[0]>=this.range[1]&&(c=g.trailingComments,delete g.trailingComments);if(g)for(;g&&g.range[0]>=this.range[0];)a=
g,g=d.pop();if(a)a.leadingComments&&a.leadingComments[a.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=a.leadingComments,a.leadingComments=void 0);else if(0<L.leadingComments.length)for(b=[],e=L.leadingComments.length-1;0<=e;--e)f=L.leadingComments[e],f.range[1]<=this.range[0]&&(b.unshift(f),L.leadingComments.splice(e,1));b&&0<b.length&&(this.leadingComments=b);c&&0<c.length&&(this.trailingComments=c);d.push(this)}},finish:function(){L.range&&(this.range[1]=G);L.loc&&(this.loc.end=
new F,L.source&&(this.loc.source=L.source));L.attachComment&&this.processComment()},finishArrayExpression:function(a){this.type=ga.ArrayExpression;this.elements=a;this.finish();return this},finishAssignmentExpression:function(a,b,c){this.type=ga.AssignmentExpression;this.operator=a;this.left=b;this.right=c;this.finish();return this},finishBinaryExpression:function(a,b,c){this.type="||"===a||"\x26\x26"===a?ga.LogicalExpression:ga.BinaryExpression;this.operator=a;this.left=b;this.right=c;this.finish();
return this},finishBlockStatement:function(a){this.type=ga.BlockStatement;this.body=a;this.finish();return this},finishBreakStatement:function(a){this.type=ga.BreakStatement;this.label=a;this.finish();return this},finishCallExpression:function(a,b){this.type=ga.CallExpression;this.callee=a;this.arguments=b;this.finish();return this},finishConditionalExpression:function(a,b,c){this.type=ga.ConditionalExpression;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishContinueStatement:function(a){this.type=
ga.ContinueStatement;this.label=a;this.finish();return this},finishEmptyStatement:function(){this.type=ga.EmptyStatement;this.finish();return this},finishExpressionStatement:function(a){this.type=ga.ExpressionStatement;this.expression=a;this.finish();return this},finishForStatement:function(a,b,c,d){this.type=ga.ForStatement;this.init=a;this.test=b;this.update=c;this.body=d;this.finish();return this},finishForInStatement:function(a,b,c){this.type=ga.ForInStatement;this.left=a;this.right=b;this.body=
c;this.each=!1;this.finish();return this},finishFunctionDeclaration:function(a,b,c,d){this.type=ga.FunctionDeclaration;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishFunctionExpression:function(a,b,c,d){this.type=ga.FunctionExpression;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishIdentifier:function(a){this.type=ga.Identifier;
this.name=a;this.finish();return this},finishIfStatement:function(a,b,c){this.type=ga.IfStatement;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishLiteral:function(a){this.type=ga.Literal;this.value=a.value;this.raw=M.slice(a.start,a.end);a.regex&&(this.regex=a.regex);this.finish();return this},finishMemberExpression:function(a,b,c){this.type=ga.MemberExpression;this.computed="["===a;this.object=b;this.property=c;this.finish();return this},finishObjectExpression:function(a){this.type=
ga.ObjectExpression;this.properties=a;this.finish();return this},finishPostfixExpression:function(a,b){this.type=ga.UpdateExpression;this.operator=a;this.argument=b;this.prefix=!1;this.finish();return this},finishProgram:function(a){this.type=ga.Program;this.body=a;this.finish();return this},finishProperty:function(a,b,c,d,e){this.type=ga.Property;this.key=b;this.value=c;this.kind=a;this.method=d;this.shorthand=e;this.finish();return this},finishReturnStatement:function(a){this.type=ga.ReturnStatement;
this.argument=a;this.finish();return this},finishUnaryExpression:function(a,b){this.type="++"===a||"--"===a?ga.UpdateExpression:ga.UnaryExpression;this.operator=a;this.argument=b;this.prefix=!0;this.finish();return this},finishVariableDeclaration:function(a,b){this.type=ga.VariableDeclaration;this.declarations=a;this.kind=b;this.finish();return this},finishVariableDeclarator:function(a,b){this.type=ga.VariableDeclarator;this.id=a;this.init=b;this.finish();return this}};b.version="2.0.0-dev";b.tokenize=
function(a,b){var c,d;c=String;"string"===typeof a||a instanceof String||(a=c(a));M=a;G=0;fa=0<M.length?1:0;la=0;ua=M.length;aa=null;ca={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};L={};b=b||{};b.tokens=!0;L.tokens=[];L.tokenize=!0;L.openParenToken=-1;L.openCurlyToken=-1;L.range="boolean"===typeof b.range&&b.range;L.loc="boolean"===typeof b.loc&&b.loc;"boolean"===typeof b.comment&&b.comment&&(L.comments=[]);"boolean"===typeof b.tolerant&&b.tolerant&&(L.errors=
[]);try{C();if(aa.type===S.EOF)return L.tokens;for(B();aa.type!==S.EOF;)try{B()}catch(rb){if(L.errors){L.errors.push(rb);break}else throw rb;}Qa();d=L.tokens;"undefined"!==typeof L.comments&&(d.comments=L.comments);"undefined"!==typeof L.errors&&(d.errors=L.errors)}catch(rb){throw rb;}finally{L={}}return d};b.parse=function(a,b){var c,d;d=String;"string"===typeof a||a instanceof String||(a=d(a));M=a;G=0;fa=0<M.length?1:0;la=0;ua=M.length;aa=null;ca={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,
inIteration:!1,inSwitch:!1,lastCommentStart:-1};L={};"undefined"!==typeof b&&(L.range="boolean"===typeof b.range&&b.range,L.loc="boolean"===typeof b.loc&&b.loc,L.attachComment="boolean"===typeof b.attachComment&&b.attachComment,L.loc&&null!==b.source&&void 0!==b.source&&(L.source=d(b.source)),"boolean"===typeof b.tokens&&b.tokens&&(L.tokens=[]),"boolean"===typeof b.comment&&b.comment&&(L.comments=[]),"boolean"===typeof b.tolerant&&b.tolerant&&(L.errors=[]),L.attachComment&&(L.range=!0,L.comments=
[],L.bottomRightStack=[],L.trailingComments=[],L.leadingComments=[]));try{var e;t();C();e=new E;wa=!1;var f;a=[];for(var g,k,h;G<ua;){g=aa;if(g.type!==S.StringLiteral)break;f=Ca();a.push(f);if(f.expression.type!==ga.Literal)break;k=M.slice(g.start+1,g.end-1);"use strict"===k?(wa=!0,h&&na(h,sa.StrictOctalLiteral)):!h&&g.octal&&(h=g)}for(;G<ua;){f=Ca();if("undefined"===typeof f)break;a.push(f)}c=e.finishProgram(a);"undefined"!==typeof L.comments&&(c.comments=L.comments);"undefined"!==typeof L.tokens&&
(Qa(),c.tokens=L.tokens);"undefined"!==typeof L.errors&&(c.errors=L.errors)}catch(nb){throw nb;}finally{L={}}return c};b.Syntax=function(){var a,b={};"function"===typeof Object.create&&(b=Object.create(null));for(a in ga)ga.hasOwnProperty(a)&&(b[a]=ga[a]);"function"===typeof Object.freeze&&Object.freeze(b);return b}()})},"esri/symbols/support/Symbol3DMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./materialUtils".split(" "),
function(b,a,f,c,e,l,h){Object.defineProperty(a,"__esModule",{value:!0});b=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}f(b,a);d=b;b.prototype.clone=function(){return new d({color:this.color?this.color.clone():null})};c([l.property(h.colorAndTransparencyProperty)],b.prototype,"color",void 0);return b=d=c([l.subclass("esri.symbols.support.Symbol3DMaterial")],b);var d}(l.declared(e));a.Symbol3DMaterial=b;a.default=b})},"esri/symbols/support/materialUtils":function(){define("require exports ../../Color ../../core/screenUtils ../../core/accessorSupport/ensureType ../../webdoc/support/opacityUtils".split(" "),
function(b,a,f,c,e,l){function h(a,b){a=null!=b.transparency?l.transparencyToOpacity(b.transparency):1;if((b=b.color)&&Array.isArray(b))return new f([b[0]||0,b[1]||0,b[2]||0,a])}function d(a,b){b.color=a.toJSON().slice(0,3);a=l.opacityToTransparency(a.a);0!==a&&(b.transparency=a)}Object.defineProperty(a,"__esModule",{value:!0});a.readColorAndTransparency=h;a.writeColorAndTransparency=d;a.colorAndTransparencyProperty={type:f,json:{type:[e.Integer],read:{source:["color","transparency"],reader:h},write:{target:{color:{type:[e.Integer]},
transparency:{type:e.Integer}},writer:d}}};a.screenSizeProperty={type:Number,cast:c.toPt,json:{write:!0}}})},"esri/core/screenUtils":function(){define(["require","exports"],function(b,a){function f(b){return b?72*b/a.DPI:0}Object.defineProperty(a,"__esModule",{value:!0});var c=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;a.DPI=96;a.pt2px=function(b){return b?b/72*a.DPI:0};a.px2pt=f;a.toPt=function(a){if("string"===typeof a){if(c.test(a)){var b=a.match(c),e=Number(b[1]),b=b[3]&&b[3].toLowerCase();a="-"===a.charAt(0);
e="px"===b?f(e):e;return a?-e:e}console.warn("screenUtils.toPt: input not recognized!");return null}return a}})},"esri/webdoc/support/opacityUtils":function(){define(["require","exports","../../core/accessorSupport/ensureType"],function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.opacityToTransparency=function(a){a=f.ensureInteger(100*(1-a));return Math.max(0,Math.min(a,100))};a.transparencyToOpacity=function(a){return Math.max(0,Math.min(1-a/100,1))}})},"esri/symbols/edges/utils":function(){define(["require",
"exports","./Edges3D","./SketchEdges3D","./SolidEdges3D"],function(b,a,f,c,e){function l(a,b,f){if(!a)return a;switch(a.type){case "solid":return b=new e,b.read(a,f),b;case "sketch":return b=new c,b.read(a,f),b}}Object.defineProperty(a,"__esModule",{value:!0});a.read=l;a.symbol3dEdgesProperty={types:{key:"type",base:f,typeMap:{solid:e,sketch:c}},json:{read:l,write:!0}}})},"esri/symbols/edges/Edges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper dojo/_base/lang ../../Color ../../core/JSONSupport ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t){return function(a){function b(b){b=a.call(this)||this;b.color=new h([0,0,0,1]);b.extensionLength=0;b.size=m.px2pt(1);return b}f(b,a);b.prototype.normalizeCtorArgs=function(a){a&&a.type&&(a=l.mixin({},a),delete a.type);return a};b.prototype.clone=function(){};b.prototype.cloneProperties=function(){return{color:k.clone(this.color),size:this.size,extensionLength:this.extensionLength}};c([g.property({type:String,readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],b.prototype,
"type",void 0);c([g.property(t.colorAndTransparencyProperty)],b.prototype,"color",void 0);c([g.property(e({},t.screenSizeProperty,{json:{write:{overridePolicy:function(a){return{enabled:!!a}}}}}))],b.prototype,"extensionLength",void 0);c([g.property(t.screenSizeProperty)],b.prototype,"size",void 0);return b=c([g.subclass("esri.symbols.edges.Edges3D")],b)}(g.declared(d))})},"esri/symbols/edges/SketchEdges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Edges3D".split(" "),
function(b,a,f,c,e,l){return function(a){function b(b){b=a.call(this)||this;b.type="sketch";return b}f(b,a);k=b;b.prototype.clone=function(){return new k(this.cloneProperties())};c([e.property({type:String})],b.prototype,"type",void 0);return b=k=c([e.subclass("esri.symbols.edges.SketchEdges3D")],b);var k}(e.declared(l))})},"esri/symbols/edges/SolidEdges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Edges3D".split(" "),
function(b,a,f,c,e,l){return function(a){function b(b){b=a.call(this)||this;b.type="solid";return b}f(b,a);k=b;b.prototype.clone=function(){return new k(this.cloneProperties())};c([e.property({type:String})],b.prototype,"type",void 0);return b=k=c([e.subclass("esri.symbols.support.SolidEdges3D")],b);var k}(e.declared(l))})},"esri/symbols/FillSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./edges/utils ./support/Symbol3DFillMaterial ./support/Symbol3DOutline".split(" "),
function(b,a,f,c,e,l,h,d,k){return function(a){function b(b){b=a.call(this)||this;b.type="fill";b.material=null;b.outline=null;b.edges=null;return b}f(b,a);l=b;b.prototype.clone=function(){return new l({edges:this.edges&&this.edges.clone(),enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone()})};c([e.property()],b.prototype,"type",void 0);c([e.property({type:d.default})],b.prototype,
"material",void 0);c([e.property({type:k.default,json:{write:!0}})],b.prototype,"outline",void 0);c([e.property(h.symbol3dEdgesProperty)],b.prototype,"edges",void 0);return b=l=c([e.subclass("esri.symbols.FillSymbol3DLayer")],b);var l}(e.declared(l))})},"esri/symbols/support/Symbol3DFillMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Symbol3DMaterial".split(" "),function(b,a,f,c,e,l){Object.defineProperty(a,
"__esModule",{value:!0});b=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}f(b,a);k=b;b.prototype.clone=function(){return new k({color:this.color?this.color.clone():null,colorMixMode:this.colorMixMode})};c([e.property({type:String,json:{read:!0,write:!0}})],b.prototype,"colorMixMode",void 0);return b=k=c([e.subclass("esri.symbols.support.Symbol3DFillMaterial")],b);var k}(e.declared(l.default));a.Symbol3DFillMaterial=b;a.default=b})},"esri/symbols/support/Symbol3DOutline":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/screenUtils ../../core/accessorSupport/decorators ./materialUtils".split(" "),
function(b,a,f,c,e,l,h,d,k){Object.defineProperty(a,"__esModule",{value:!0});b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.color=new e([0,0,0,1]);b.size=h.px2pt(1);return b}f(b,a);l=b;b.prototype.clone=function(){return new l({color:this.color?this.color.clone():null,size:this.size})};c([d.property(k.colorAndTransparencyProperty)],b.prototype,"color",void 0);c([d.property(k.screenSizeProperty)],b.prototype,"size",void 0);return b=l=c([d.subclass("esri.symbols.support.Symbol3DOutline")],
b);var l}(d.declared(l));a.Symbol3DOutline=b;a.default=b})},"esri/symbols/IconSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ../core/accessorSupport/decorators ./Symbol3DLayer ./support/IconSymbol3DLayerResource ./support/materialUtils ./support/Symbol3DOutline".split(" "),function(b,a,f,c,e,l,h,d,k,m){var g=e({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",
bottomLeft:"bottom-left",bottomRight:"bottom-right"},{ignoreUnknown:!0});return function(a){function b(b){b=a.call(this)||this;b.material=null;b.resource=null;b.type="icon";b.size=12;b.anchor=void 0;b.outline=void 0;return b}f(b,a);e=b;b.prototype.clone=function(){return new e({anchor:this.anchor,enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone(),resource:this.resource&&this.resource.clone(),
size:this.size})};c([l.property()],b.prototype,"material",void 0);c([l.property({type:d.default,json:{write:!0}})],b.prototype,"resource",void 0);c([l.property()],b.prototype,"type",void 0);c([l.property(k.screenSizeProperty)],b.prototype,"size",void 0);c([l.property({type:String,json:{read:g.read,write:g.write}})],b.prototype,"anchor",void 0);c([l.property({type:m.default,json:{write:!0}})],b.prototype,"outline",void 0);return b=e=c([l.subclass("esri.symbols.IconSymbol3DLayer")],b);var e}(l.declared(h))})},
"esri/symbols/support/IconSymbol3DLayerResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/urlUtils ../../core/accessorSupport/decorators".split(" "),function(b,a,f,c,e,l,h){Object.defineProperty(a,"__esModule",{value:!0});b=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}f(b,a);d=b;b.prototype.readHref=function(a,b,c){return a?l.read(a,c):b.dataURI};b.prototype.writeHref=
function(a,b,c,d){a&&(l.isDataProtocol(a)?b.dataURI=a:(b.href=l.write(a,d),l.isAbsolute(b.href)&&(b.href=l.normalize(b.href))))};b.prototype.clone=function(){return new d({href:this.href,primitive:this.primitive})};c([h.property({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],b.prototype,"href",void 0);c([h.reader("href")],b.prototype,"readHref",null);c([h.writer("href",{href:{type:String},dataURI:{type:String}})],b.prototype,"writeHref",null);c([h.property({type:String,json:{write:!0}})],
b.prototype,"primitive",void 0);return b=d=c([h.subclass("esri.symbols.support.IconSymbol3DLayerResource")],b);var d}(h.declared(e));a.IconSymbol3DLayerResource=b;a.default=b})},"esri/symbols/LineSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/screenUtils ../core/accessorSupport/decorators ./Symbol3DLayer ./support/materialUtils".split(" "),function(b,a,f,c,e,l,h,d){return function(a){function b(b){b=a.call(this)||this;
b.material=null;b.type="line";b.size=e.px2pt(1);return b}f(b,a);g=b;b.prototype.clone=function(){return new g({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})};c([l.property()],b.prototype,"material",void 0);c([l.property()],b.prototype,"type",void 0);c([l.property(d.screenSizeProperty)],b.prototype,"size",void 0);return b=g=c([l.subclass("esri.symbols.LineSymbol3DLayer")],b);var g}(l.declared(h))})},
"esri/symbols/ObjectSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ../core/accessorSupport/decorators ./Symbol3DLayer ./support/ObjectSymbol3DLayerResource ./support/Symbol3DMaterial".split(" "),function(b,a,f,c,e,l,h,d,k){var m=e({center:"center",top:"top",bottom:"bottom",origin:"origin"},{ignoreUnknown:!0});return function(a){function b(b){b=a.call(this)||this;b.material=null;b.resource=null;b.type=
"object";b.width=void 0;b.height=void 0;b.depth=void 0;b.anchor=void 0;b.heading=void 0;b.tilt=void 0;b.roll=void 0;return b}f(b,a);e=b;b.prototype.clone=function(){return new e({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,depth:this.depth,enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),height:this.height,material:this.material&&this.material.clone(),resource:this.resource&&this.resource.clone(),width:this.width})};Object.defineProperty(b.prototype,
"isPrimitive",{get:function(){return!this.resource||"string"!==typeof this.resource.href},enumerable:!0,configurable:!0});c([l.property({type:k.default})],b.prototype,"material",void 0);c([l.property({type:d.default,json:{write:!0}})],b.prototype,"resource",void 0);c([l.property()],b.prototype,"type",void 0);c([l.property({type:Number,json:{write:!0}})],b.prototype,"width",void 0);c([l.property({type:Number,json:{write:!0}})],b.prototype,"height",void 0);c([l.property({type:Number,json:{write:!0}})],
b.prototype,"depth",void 0);c([l.property({type:String,json:{read:m.read,write:m.write}})],b.prototype,"anchor",void 0);c([l.property({type:Number,json:{write:!0}})],b.prototype,"heading",void 0);c([l.property({type:Number,json:{write:!0}})],b.prototype,"tilt",void 0);c([l.property({type:Number,json:{write:!0}})],b.prototype,"roll",void 0);c([l.property({readOnly:!0,dependsOn:["resource","resource.href"]})],b.prototype,"isPrimitive",null);return b=e=c([l.subclass("esri.symbols.ObjectSymbol3DLayer")],
b);var e}(l.declared(h))})},"esri/symbols/support/ObjectSymbol3DLayerResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/urlUtils ../../core/accessorSupport/decorators".split(" "),function(b,a,f,c,e,l,h,d){Object.defineProperty(a,"__esModule",{value:!0});var k=l({invertedCone:"inverted-cone"});b=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}
f(b,a);e=b;b.prototype.readHref=function(a,b,c){return h.read(a,c)};b.prototype.writeHref=function(a,b,c,d){a&&(b.href=h.write(a,d),h.isAbsolute(b.href)&&(b.href=h.normalize(b.href)))};b.prototype.readPrimitive=function(a){return k.fromJSON(a)};b.prototype.writePrimitive=function(a,b){b.primitive=k.toJSON(a)};b.prototype.clone=function(){return new e({href:this.href,primitive:this.primitive})};c([d.property({type:String,json:{write:!0}})],b.prototype,"href",void 0);c([d.reader("href")],b.prototype,
"readHref",null);c([d.writer("href")],b.prototype,"writeHref",null);c([d.property({type:String,json:{write:!0}})],b.prototype,"primitive",void 0);c([d.reader("primitive")],b.prototype,"readPrimitive",null);c([d.writer("primitive")],b.prototype,"writePrimitive",null);return b=e=c([d.subclass("esri.symbols.support.ObjectSymbol3DLayerResource")],b);var e}(d.declared(e));a.ObjectSymbol3DLayerResource=b;a.default=b})},"esri/symbols/PathSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer".split(" "),
function(b,a,f,c,e,l){return function(a){function b(b){b=a.call(this)||this;b.material=null;b.type="path";b.size=void 0;return b}f(b,a);k=b;b.prototype.readSize=function(a,b){return a||b.width||0};b.prototype.clone=function(){return new k({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})};c([e.property()],b.prototype,"material",void 0);c([e.property()],b.prototype,"type",void 0);c([e.property({type:Number,
json:{write:{enabled:!0,target:{size:{type:Number},width:{type:Number}}}}})],b.prototype,"size",void 0);c([e.reader("size",["size","width"])],b.prototype,"readSize",null);return b=k=c([e.subclass("esri.symbols.PathSymbol3DLayer")],b);var k}(e.declared(l))})},"esri/symbols/Symbol":function(){define(["../core/lang","../core/kebabDictionary","../core/JSONSupport","../Color"],function(b,a,f,c){var e=a({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",
esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"}),l=0;return f.createSubclass({declaredClass:"esri.symbols.Symbol",constructor:function(){this.id="sym"+l++},properties:{type:{type:String,value:null,json:{read:e.fromJSON,write:{ignoreOrigin:!0,writer:function(a,b){b.type=e.toJSON(this.type)}}}},color:{type:c,value:new c([0,0,0,1]),json:{read:function(a){return a&&b.isDefined(a[0])?
[a[0],a[1],a[2],a[3]/255]:a},write:{allowNull:!0}}}}})})},"esri/symbols/TextSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Symbol3DLayer ./support/materialUtils ./support/Symbol3DHalo".split(" "),function(b,a,f,c,e,l,h,d,k){return function(a){function b(b){b=a.call(this)||this;b.font=null;b.halo=null;b.material=null;b.size=void 0;b.text=void 0;b.type="text";return b}f(b,a);
h=b;b.prototype.writeFont=function(a,b){a&&(b.font=e.clone(a))};b.prototype.clone=function(){return new h({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),font:this.font&&e.clone(this.font),halo:this.halo&&e.clone(this.halo),material:this.material&&this.material.clone(),size:this.size,text:this.text})};c([l.property()],b.prototype,"font",void 0);c([l.writer("font",{"font.family":{type:String},"font.weight":{type:String},"font.style":{type:String},"font.decoration":{type:String},
"font.size":{type:Number}})],b.prototype,"writeFont",null);c([l.property({type:k.default,json:{write:!0}})],b.prototype,"halo",void 0);c([l.property()],b.prototype,"material",void 0);c([l.property(d.screenSizeProperty)],b.prototype,"size",void 0);c([l.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);c([l.property()],b.prototype,"type",void 0);return b=h=c([l.subclass("esri.symbols.TextSymbol3DLayer")],b);var h}(l.declared(h))})},"esri/symbols/support/Symbol3DHalo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./materialUtils".split(" "),
function(b,a,f,c,e,l,h,d,k){Object.defineProperty(a,"__esModule",{value:!0});b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.color=new e([0,0,0,1]);b.size=0;return b}f(b,a);l=b;b.prototype.clone=function(){return new l({color:h.clone(this.color),size:this.size})};c([d.property(k.colorAndTransparencyProperty)],b.prototype,"color",void 0);c([d.property(k.screenSizeProperty)],b.prototype,"size",void 0);return b=l=c([d.subclass("esri.symbols.support.Symbol3DHalo")],b);var l}(d.declared(l));
a.Symbol3DHalo=b;a.default=b})},"esri/symbols/support/StyleOrigin":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../portal/Portal".split(" "),function(b,a,f,c,e,l,h){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.portal=null;return b}f(b,a);d=b;b.prototype.clone=function(){return new d({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,
portal:this.portal})};c([l.property({type:String})],b.prototype,"name",void 0);c([l.property({type:String})],b.prototype,"styleUrl",void 0);c([l.property({type:String})],b.prototype,"styleName",void 0);c([l.property({type:h})],b.prototype,"portal",void 0);return b=d=c([l.subclass("esri.symbols.support.StyleOrigin")],b);var d}(l.declared(e))})},"esri/symbols/support/Thumbnail":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),
function(b,a,f,c,e,l){Object.defineProperty(a,"__esModule",{value:!0});b=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}f(b,a);e=b;b.prototype.clone=function(){return new e({url:this.url})};c([l.property({type:String})],b.prototype,"url",void 0);return b=e=c([l.subclass("esri.symbols.support.Thumbnail")],b);var e}(l.declared(e));a.Thumbnail=b;a.default=b})},"esri/symbols/callouts/calloutUtils":function(){define(["require","exports","./Callout3D","./LineCallout3D"],function(b,
a,f,c){function e(a){if(!a)return!1;a=a.verticalOffset;return!a||0>=a.screenLength||0>=a.maxWorldLength?!1:!0}function l(a,b,e){if(!a)return a;switch(a.type){case "line":return b=new c,b.read(a,e),b}}Object.defineProperty(a,"__esModule",{value:!0});a.hasVisibleVerticalOffset=e;a.hasVisibleCallout=function(a){if(!a||!a.supportsCallout||!a.supportsCallout())return!1;var b=a.callout;return b&&b.visible?e(a)?!0:!1:!1};a.isCalloutSupport=function(a){return"point-3d"===a.type||"label-3d"===a.type};a.read=
l;a.calloutProperty={types:{key:"type",base:f,typeMap:{line:c}},json:{read:l,write:!0}}})},"esri/symbols/callouts/Callout3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/_base/lang ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(b,a,f,c,e,l,h){return function(a){function b(b){b=a.call(this)||this;b.visible=!0;return b}f(b,a);b.prototype.normalizeCtorArgs=function(a){a&&a.type&&(a=e.mixin({},
a),delete a.type);return a};b.prototype.clone=function(){};c([h.property({type:String,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],b.prototype,"type",void 0);c([h.property({readOnly:!0})],b.prototype,"visible",void 0);return b=c([h.subclass("esri.symbols.callouts.Callout3D")],b)}(h.declared(l))})},"esri/symbols/callouts/LineCallout3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators ./Callout3D ./LineCallout3DBorder ../support/materialUtils".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g){return function(a){function b(b){b=a.call(this)||this;b.type="line";b.color=new e([0,0,0,1]);b.size=h.px2pt(1);b.border=null;return b}f(b,a);k=b;Object.defineProperty(b.prototype,"visible",{get:function(){return 0<this.size&&0<this.color.a},enumerable:!0,configurable:!0});b.prototype.clone=function(){return new k({color:l.clone(this.color),size:this.size,border:l.clone(this.border)})};c([d.property({type:String})],b.prototype,"type",void 0);c([d.property(g.colorAndTransparencyProperty)],
b.prototype,"color",void 0);c([d.property(g.screenSizeProperty)],b.prototype,"size",void 0);c([d.property({type:m.default,json:{write:!0}})],b.prototype,"border",void 0);c([d.property({dependsOn:["size","color"],readOnly:!0})],b.prototype,"visible",null);return b=k=c([d.subclass("esri.symbols.callouts.LineCallout3D")],b);var k}(d.declared(k))})},"esri/symbols/callouts/LineCallout3DBorder":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),
function(b,a,f,c,e,l,h,d,k){Object.defineProperty(a,"__esModule",{value:!0});b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.color=new e("white");return b}f(b,a);l=b;b.prototype.clone=function(){return new l({color:h.clone(this.color)})};c([d.property(k.colorAndTransparencyProperty)],b.prototype,"color",void 0);return b=l=c([d.subclass("esri.symbols.callouts.LineCallout3DBorder")],b);var l}(d.declared(l));a.LineCallout3DBorder=b;a.default=b})},"esri/symbols/support/Symbol3DVerticalOffset":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./materialUtils".split(" "),
function(b,a,f,c,e,l,h){Object.defineProperty(a,"__esModule",{value:!0});b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.screenLength=0;b.minWorldLength=0;return b}f(b,a);d=b;b.prototype.writeMinWorldLength=function(a,b,c){a&&(b[c]=a)};b.prototype.clone=function(){return new d({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})};c([l.property(h.screenSizeProperty)],b.prototype,"screenLength",void 0);c([l.property({type:Number,
json:{write:!0}})],b.prototype,"minWorldLength",void 0);c([l.writer("minWorldLength")],b.prototype,"writeMinWorldLength",null);c([l.property({type:Number,json:{write:!0}})],b.prototype,"maxWorldLength",void 0);return b=d=c([l.subclass("esri.symbols.support.Symbol3DVerticalOffset")],b);var d}(l.declared(e));a.Symbol3DVerticalOffset=b;a.default=b})},"esri/symbols/LineSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./LineSymbol3DLayer ./PathSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g){var t=e.ofType({base:null,key:"type",typeMap:{line:d,text:g,path:k}});return function(a){function b(b){b=a.call(this)||this;b.symbolLayers=new t;b.type="line-3d";return b}f(b,a);d=b;b.prototype.clone=function(){return new d({styleOrigin:l.clone(this.styleOrigin),symbolLayers:l.clone(this.symbolLayers),thumbnail:l.clone(this.thumbnail)})};c([h.property({type:t})],b.prototype,"symbolLayers",void 0);c([h.property()],b.prototype,"type",void 0);return b=d=c([h.subclass("esri.symbols.LineSymbol3D")],
b);var d}(h.declared(m))})},"esri/symbols/MeshSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./FillSymbol3DLayer ./Symbol3D".split(" "),function(b,a,f,c,e,l,h,d,k){var m=e.ofType({base:null,key:"type",typeMap:{fill:d}});return function(a){function b(b){b=a.call(this)||this;b.symbolLayers=new m;b.type="mesh-3d";return b}f(b,a);d=b;b.prototype.clone=function(){return new d({styleOrigin:l.clone(this.styleOrigin),
symbolLayers:l.clone(this.symbolLayers),thumbnail:l.clone(this.thumbnail)})};c([h.property({type:m})],b.prototype,"symbolLayers",void 0);c([h.property()],b.prototype,"type",void 0);return b=d=c([h.subclass("esri.symbols.MeshSymbol3D")],b);var d}(h.declared(k))})},"esri/symbols/PictureFillSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ./FillSymbol ./support/urlUtils".split(" "),function(b,a,f,c,e,l){var h={xscale:1,yscale:1,xoffset:0,yoffset:0,width:12,
height:12},d=b(e,{declaredClass:"esri.symbols.PictureFillSymbol",properties:{type:"picture-fill",url:l.urlPropertyDefinition,xscale:{value:1,json:{write:!0}},yscale:{value:1,json:{write:!0}},width:{value:12,cast:c.toPt,json:{write:!0}},height:{value:12,cast:c.toPt,json:{write:!0}},xoffset:{value:0,cast:c.toPt,json:{write:!0}},yoffset:{value:0,cast:c.toPt,json:{write:!0}},source:l.sourcePropertyDefinition},getDefaults:function(){return a.mixin(this.inherited(arguments),h)},normalizeCtorArgs:function(a,
b,d,e){if(a&&"string"!==typeof a&&null==a.imageData)return a;var f={};a&&(f.url=a);b&&(f.outline=b);null!=d&&(f.width=c.toPt(d));null!=e&&(f.height=c.toPt(e));return f},clone:function(){var a=new d({color:f.clone(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});a._set("source",f.clone(this.source));return a}});d.defaultProps=h;return d})},"esri/symbols/FillSymbol":function(){define(["./Symbol",
"./SimpleLineSymbol"],function(b,a){return b.createSubclass({declaredClass:"esri.symbols.FillSymbol",properties:{outline:{type:a,json:{read:{default:null},write:!0}},type:null}})})},"esri/symbols/SimpleLineSymbol":function(){define(["../core/declare","dojo/_base/lang","../core/lang","../core/screenUtils","./LineSymbol"],function(b,a,f,c,e){var l={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dash-dot",STYLE_DASHDOTDOT:"long-dash-dot-dot",STYLE_NULL:"none",STYLE_SHORTDASH:"short-dash",
STYLE_SHORTDOT:"short-dot",STYLE_SHORTDASHDOT:"short-dash-dot",STYLE_SHORTDASHDOTDOT:"short-dash-dot-dot",STYLE_LONGDASH:"long-dash",STYLE_LONGDASHDOT:"long-dash-dot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},h={color:[0,0,0,1],style:l.STYLE_SOLID,width:.75,cap:l.CAP_BUTT,join:l.JOIN_MITER,miterLimit:7.5},d=b(e,{declaredClass:"esri.symbols.SimpleLineSymbol",properties:{type:"simple-line",style:{value:l.STYLE_SOLID,json:{read:function(a,
b){return f.valueOf(this._jsonStyles,a)||void 0},write:function(a,b){b.style=this._jsonStyles[a]}}},cap:{value:l.CAP_BUTT,json:{read:!1,write:!1}},join:{value:l.JOIN_MITER,json:{read:!1,write:!1}},miterLimit:{value:7.5,cast:c.toPt,json:{read:!1,write:!1}}},_jsonStyles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot","dash-dot":"esriSLSDashDot","long-dash-dot-dot":"esriSLSDashDotDot",none:"esriSLSNull","inside-frame":"esriSLSInsideFrame","short-dash":"esriSLSShortDash","short-dot":"esriSLSShortDot",
"short-dash-dot":"esriSLSShortDashDot","short-dash-dot-dot":"esriSLSShortDashDotDot","long-dash":"esriSLSLongDash","long-dash-dot":"esriSLSLongDashDot"},getDefaults:function(){return a.mixin(this.inherited(arguments),h)},normalizeCtorArgs:function(a,b,d,e,f,h){if(a&&"string"!==typeof a)return a;var g={};null!=a&&(g.style=a);null!=b&&(g.color=b);null!=d&&(g.width=c.toPt(d));null!=e&&(g.cap=e);null!=f&&(g.join=f);null!=h&&(g.miterLimit=c.toPt(h));return g},clone:function(){return new d({color:f.clone(this.color),
style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit})}});a.mixin(d,l);d.defaultProps=h;return d})},"esri/symbols/LineSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],function(b,a,f){return b(f,{declaredClass:"esri.symbols.LineSymbol",properties:{color:{},type:"simple-line",width:{value:.75,cast:a.toPt,json:{write:!0}}}})})},"esri/symbols/support/urlUtils":function(){define(["require","exports","../../core/urlUtils"],function(b,a,f){function c(a,
b,c){return b.imageData?f.makeData({mediaType:b.contentType||"image/png",isBase64:!0,data:b.imageData}):e(b.url,c)}function e(a,b){return!b||"service"!==b.origin&&"portal-item"!==b.origin||!b.layer||"feature"!==b.layer.type&&"stream"!==b.layer.type||f.isAbsolute(a)||!b.layer.parsedUrl?f.read(a,b):f.join(b.layer.parsedUrl.path,"images",a)}function l(a,b,c,e){f.isDataProtocol(a)?(a=f.dataComponents(a),b.contentType=a.mediaType,b.imageData=a.data,c&&c.imageData===b.imageData&&c.url&&(b.url=h(c.url,e))):
b.url=h(a,e)}function h(a,b){return f.write(a,b)}Object.defineProperty(a,"__esModule",{value:!0});a.readImageDataOrUrl=c;a.read=e;a.writeImageDataAndUrl=l;a.write=h;a.urlPropertyDefinition={json:{read:{source:["imageData","url"],reader:c},write:{writer:function(a,b,c,e){l(a,b,this.source,e)}}}};a.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(a,b,c){a={};b.imageData&&(a.imageData=b.imageData);b.contentType&&(a.contentType=b.contentType);b.url&&(a.url=
e(b.url,c));return a}}}}})},"esri/symbols/PictureMarkerSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ./MarkerSymbol ./support/urlUtils".split(" "),function(b,a,f,c,e,l){var h={width:12,height:12,angle:0,xoffset:0,yoffset:0},d=b(e,{declaredClass:"esri.symbols.PictureMarkerSymbol",properties:{color:{json:{write:!1}},type:"picture-marker",url:l.urlPropertyDefinition,source:l.sourcePropertyDefinition,height:{json:{read:{source:["height","size"],reader:function(a,
b){return b.size||a}},write:!0},cast:c.toPt},width:{json:{read:{source:["width","size"],reader:function(a,b){return b.size||a}},write:!0},cast:c.toPt},size:{json:{write:!1}}},getDefaults:function(){return a.mixin(this.inherited(arguments),h)},normalizeCtorArgs:function(a,b,d){if(a&&"string"!==typeof a&&null==a.imageData)return a;var e={};a&&(e.url=a);null!=b&&(e.width=c.toPt(b));null!=d&&(e.height=c.toPt(d));return e},clone:function(){var a=new d({angle:this.angle,height:this.height,url:this.url,
width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});a._set("source",f.clone(this.source));return a}});d.defaultProps=h;return d})},"esri/symbols/MarkerSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],function(b,a,f){return b(f,{declaredClass:"esri.symbols.MarkerSymbol",properties:{angle:{value:0,json:{read:function(a){return a&&-1*a},write:function(a,b){b.angle=a&&-1*a}}},type:{},xoffset:{value:0,cast:a.toPt,json:{write:!0}},yoffset:{value:0,cast:a.toPt,json:{write:!0}},
size:{value:9,cast:function(b){return"auto"===b?b:a.toPt(b)},json:{write:!0}}}})})},"esri/symbols/PointSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Error ../core/lang ../core/accessorSupport/decorators ./IconSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),function(b,a,f,c,e,l,h,d,k,m,g,t,v,w){var y=e.ofType({base:null,
key:"type",typeMap:{icon:k,object:m,text:t}});return function(a){function b(b){b=a.call(this)||this;b.verticalOffset=null;b.callout=null;b.symbolLayers=new y;b.type="point-3d";return b}f(b,a);e=b;b.prototype.writeSymbolLayers=function(a,b,c,d){var e=a.filter(function(a){return"text"!==a.type});d&&d.messages&&e.length<a.length&&(a=a.find(function(a){return"text"===a.type}),d.messages.push(new l("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:a})));
b[c]=e.map(function(a){return a.write({},d)}).toArray()};b.prototype.supportsCallout=function(){if(1!==(this.symbolLayers?this.symbolLayers.length:0))return!1;switch(this.symbolLayers.getItemAt(0).type){case "icon":case "text":case "object":return!0}return!1};b.prototype.hasVisibleCallout=function(){return v.hasVisibleCallout(this)};b.prototype.hasVisibleVerticalOffset=function(){return v.hasVisibleVerticalOffset(this)};b.prototype.clone=function(){return new e({verticalOffset:h.clone(this.verticalOffset),
callout:h.clone(this.callout),styleOrigin:h.clone(this.styleOrigin),symbolLayers:h.clone(this.symbolLayers),thumbnail:h.clone(this.thumbnail)})};c([d.property({type:w.default,json:{write:!0}})],b.prototype,"verticalOffset",void 0);c([d.property(v.calloutProperty)],b.prototype,"callout",void 0);c([d.property({type:y})],b.prototype,"symbolLayers",void 0);c([d.writer("web-scene","symbolLayers")],b.prototype,"writeSymbolLayers",null);c([d.property()],b.prototype,"type",void 0);return b=e=c([d.subclass("esri.symbols.PointSymbol3D")],
b);var e}(d.declared(g))})},"esri/symbols/PolygonSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Error ../core/lang ../core/accessorSupport/decorators ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer".split(" "),function(b,a,f,c,e,l,h,d,k,m,g,t,v,w,y){var r=e.ofType({base:null,key:"type",typeMap:{extrude:k,fill:m,icon:g,
line:t,object:v,text:y}});return function(a){function b(b){b=a.call(this)||this;b.type="polygon-3d";return b}f(b,a);e=b;b.prototype.writeSymbolLayers=function(a,b,c,d){var e=a.filter(function(a){return"text"!==a.type});d&&d.messages&&e.length<a.length&&(a=a.find(function(a){return"text"===a.type}),d.messages.push(new l("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:a})));b[c]=e.map(function(a){return a.write({},d)}).toArray()};b.prototype.clone=
function(){return new e({styleOrigin:h.clone(this.styleOrigin),symbolLayers:h.clone(this.symbolLayers),thumbnail:h.clone(this.thumbnail)})};b.fromJSON=function(a){var b=new e;b.read(a);if(2===b.symbolLayers.length&&"fill"===b.symbolLayers.getItemAt(0).type&&"line"===b.symbolLayers.getItemAt(1).type){var c=b.symbolLayers.getItemAt(0),d=b.symbolLayers.getItemAt(1);!d.enabled||a.symbolLayers&&a.symbolLayers[1]&&!1===a.symbolLayers[1].enable||(c.outline={size:d.size,color:d.material.color});b.symbolLayers.removeAt(1)}return b};
c([d.property({type:r})],b.prototype,"symbolLayers",void 0);c([d.writer("web-scene","symbolLayers")],b.prototype,"writeSymbolLayers",null);c([d.property()],b.prototype,"type",void 0);return b=e=c([d.subclass("esri.symbols.PolygonSymbol3D")],b);var e}(d.declared(w))})},"esri/symbols/SimpleFillSymbol":function(){define(["../core/declare","dojo/_base/lang","../core/lang","./FillSymbol","./SimpleLineSymbol"],function(b,a,f,c,e){var l={style:"solid",outline:new e,color:[0,0,0,.25]},h=b(c,{declaredClass:"esri.symbols.SimpleFillSymbol",
properties:{color:{},type:"simple-fill",style:{value:"solid",type:String,json:{read:function(a){return f.valueOf(this._styles,a)||void 0},write:function(a,b){b.style=this._styles[a]}}}},_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical","forward-diagonal":"esriSFSForwardDiagonal","backward-diagonal":"esriSFSBackwardDiagonal",cross:"esriSFSCross","diagonal-cross":"esriSFSDiagonalCross"},getDefaults:function(){return a.mixin(this.inherited(arguments),
l)},normalizeCtorArgs:function(a,b,c){if(a&&"string"!==typeof a)return a;var d={};a&&(d.style=a);b&&(d.outline=b);c&&(d.color=c);return d},clone:function(){return new h({color:f.clone(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}});a.mixin(h,{STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forward-diagonal",STYLE_BACKWARD_DIAGONAL:"backward-diagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonal-cross"});
h.defaultProps=l;return h})},"esri/symbols/SimpleMarkerSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(b,a,f,c,e,l){var h={style:"circle",color:[255,255,255,.25],outline:new l,size:12,angle:0,xoffset:0,yoffset:0},d=b(e,{declaredClass:"esri.symbols.SimpleMarkerSymbol",properties:{color:{json:{write:function(a,b){a&&"x"!==this.style&&"cross"!==this.style&&(b.color=a.toJSON())}}},type:"simple-marker",size:{value:12},
style:{type:String,value:"circle",json:{read:function(a){return f.valueOf(this._styles,a)},write:function(a,b){b.style=this._styles[a]}}},path:{type:String,value:null,set:function(a){this.style="path";this._set("path",a)},json:{write:!0}},outline:{type:l,json:{write:!0}}},_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},getDefaults:function(){return a.mixin(this.inherited(arguments),h)},normalizeCtorArgs:function(a,
b,d,e){if(a&&"string"!==typeof a)return a;var f={};a&&(f.style=a);null!=b&&(f.size=c.toPt(b));d&&(f.outline=d);e&&(f.color=e);return f},clone:function(){return new d({angle:this.angle,color:f.clone(this.color),outline:this.outline&&this.outline.clone(),size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})},read:function m(b,c){return this.getInherited(m,arguments).call(this,a.mixin({outline:null},b),c)}});a.mixin(d,{STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",
STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"});d.defaultProps=h;return d})},"esri/symbols/TextSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ../Color ./Symbol ./Font".split(" "),function(b,a,f,c,e,l,h){var d={text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:{},angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},k=b(l,{declaredClass:"esri.symbols.TextSymbol",properties:{backgroundColor:{type:e,json:{write:!0}},borderLineColor:{type:e,
json:{write:!0}},borderLineSize:{type:Number,json:{write:!0}},color:{},font:{type:h,json:{write:!0}},horizontalAlignment:{value:"center",json:{write:!0}},kerning:{value:!0,json:{write:!0}},haloColor:{type:e,json:{write:!0}},haloSize:{type:Number,cast:c.toPt,json:{write:!0}},rightToLeft:{json:{write:!0}},rotated:{value:!1,json:{write:!0}},text:{type:String,json:{write:!0}},type:"text",verticalAlignment:{type:String,json:{write:!0}},xoffset:{value:0,type:Number,cast:c.toPt,json:{write:!0}},yoffset:{value:0,
type:Number,cast:c.toPt,json:{write:!0}},angle:{type:Number,value:0,json:{read:function(a){return a&&-1*a},write:function(a,b){b.angle=a&&-1*a}}},width:{json:{write:!0}}},getDefaults:function(){return a.mixin(this.inherited(arguments),d)},normalizeCtorArgs:function(a,b,c){if(a&&"string"!==typeof a)return a;var d={};a&&(d.text=a);b&&(d.font=b);c&&(d.color=c);return d},clone:function(){return new k({angle:this.angle,backgroundColor:f.clone(this.backgroundColor),borderLineColor:f.clone(this.borderLineColor),
borderLineSize:this.borderLineSize,color:f.clone(this.color),font:this.font&&this.font.clone(),haloColor:f.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}});a.mixin(k,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",
DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});k.defaultProps=d;return k})},"esri/symbols/Font":function(){define(["dojo/_base/lang","../core/JSONSupport","../core/lang","../core/screenUtils"],function(b,a,f,c){var e={style:"normal",weight:"normal",size:9,family:"serif",decoration:"none"},l=a.createSubclass({declaredClass:"esri.symbols.Font",properties:{decoration:{},family:{},size:{cast:c.toPt},style:{},weight:{}},getDefaults:function(){return e},normalizeCtorArgs:function(a,
b,e,f){if(a&&"string"!==typeof a)return a;var d={};null!=a&&(d.size=c.toPt(a));null!=b&&(d.style=b);null!=e&&(d.weight=e);f&&(d.family=f);return d},toJSON:function(){return f.fixJson({size:this.size,style:this.style,decoration:this.decoration,weight:this.weight,family:this.family})},clone:function(){return new l({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}});l.defaultProps=e;b.mixin(l,{STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",
WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});return l})},"esri/symbols/WebStyleSymbol":function(){define("require exports ../core/tsSupport/extendsHelper ../core/tsSupport/decorateHelper ../core/Logger ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../portal/Portal ./Symbol ./support/Thumbnail".split(" "),function(b,a,f,c,e,l,h,d,k,m,g){var t=e.getLogger("esri.symbols.WebStyleSymbol");return function(a){function e(b){b=a.call(this,
b)||this;b.styleName=null;b.portal=null;b.styleUrl=null;b.thumbnail=null;b.name=null;b.type="web-style";return b}f(e,a);m=e;e.prototype._readStyleUrl=function(a,b,c){return h.read(a,c)};e.prototype._writeStyleUrl=function(a,b,c,d){b.styleUrl=h.write(a,d);h.isAbsolute(b.styleUrl)&&(b.styleUrl=h.normalize(b.styleUrl))};e.prototype._writeType=function(a,b,c,d){b.type="styleSymbolReference"};e.prototype.read=function(a,b){this.portal=b?b.portal:void 0;this.inherited(arguments,[a,b]);return this};e.prototype.clone=
function(){return new m({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};e.prototype.fetchSymbol=function(){var a=this;return l.create(function(a){return b(["./support/styleUtils"],a)}).then(function(b){b=b.resolveWebStyleSymbol(a,{portal:a.portal});b.catch(function(a){t.error("#fetchSymbol()","Failed to create symbol from style",a)});return b})};c([d.property({json:{write:!1}})],e.prototype,"color",void 0);c([d.property({type:String,json:{write:!0}})],e.prototype,
"styleName",void 0);c([d.property({type:k,json:{write:!1}})],e.prototype,"portal",void 0);c([d.property({type:String,json:{write:!0}})],e.prototype,"styleUrl",void 0);c([d.reader("styleUrl")],e.prototype,"_readStyleUrl",null);c([d.writer("styleUrl")],e.prototype,"_writeStyleUrl",null);c([d.property({type:g.default,json:{read:!1}})],e.prototype,"thumbnail",void 0);c([d.property({type:String,json:{write:!0}})],e.prototype,"name",void 0);c([d.property({type:String,readOnly:!0,json:{read:!1}})],e.prototype,
"type",void 0);c([d.writer("type")],e.prototype,"_writeType",null);return e=m=c([d.subclass("esri.symbols.WebStyleSymbol")],e);var m}(d.declared(m))})},"esri/symbols/support/symbolConversion":function(){define("require exports dojo/_base/lang ../../Color ../../symbols ../../core/Error ../../core/lang ../FillSymbol3DLayer ../Font ../IconSymbol3DLayer ../LabelSymbol3D ../LineSymbol3D ../LineSymbol3DLayer ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../TextSymbol ../TextSymbol3DLayer ../WebStyleSymbol".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v,w,y,r,z,x,p,n,A,B){function C(a){var b=a.color?a.color.clone():new c([255,255,255]),d,e,f;a instanceof w?(a.color&&0===a.color.r&&0===a.color.g&&0===a.color.b&&(b=new c([255,255,255])),d={href:a.url},e=a.width<=a.height?a.height:a.width):(d=a.style,d in F?d=F[d]:(console.log(d+' cannot be mapped to Icon symbol. Fallback to "circle"'),d="circle"),d={primitive:d},e=a.size,a.outline&&a.outline.color&&0<a.outline.width&&(f={size:a.outline.width,color:a.outline.color.clone()}));
return new y(new m({size:e,resource:d,material:{color:b},outline:f}))}Object.defineProperty(a,"__esModule",{value:!0});var F={};F[p.STYLE_CIRCLE]="circle";F[p.STYLE_CROSS]="cross";F[p.STYLE_DIAMOND]="kite";F[p.STYLE_SQUARE]="square";F[p.STYLE_X]="x";a.to3D=function(a,b,c,m){void 0===b&&(b=!1);void 0===c&&(c=!1);void 0===m&&(m=!0);if(!a)return{symbol:null};if(e.isSymbol3D(a)||a instanceof B)m=a.clone();else if(a instanceof x)m=new t(new v({size:a.width||1,material:{color:a.color?a.color.clone():[255,
255,255]}}));else if(a instanceof p)m=C(a);else if(a instanceof w)m=C(a);else if(a instanceof z)m=new d({material:{color:a.color?a.color.clone():[255,255,255]}}),a.outline&&a.outline.color&&(m.outline={size:a.outline.width||0,color:a.outline.color}),m=new r(m);else if(a instanceof n){var D=f.clone(k.defaultProps);a.font&&f.mixin(D,a.font);var F;F=a.haloColor;var H=a.haloSize;F=F&&0<H?{color:h.clone(F),size:H}:null;m=new (m?g:y)(new A({size:D.size,font:{family:D.family,weight:D.weight,style:D.style},
halo:F,material:{color:a.color.clone()},text:a.text}))}else return{error:new l("symbol-conversion:unsupported-2d-symbol","2D symbol of type '"+(a.type||a.declaredClass)+"' is unsupported in 3D",{symbol:a})};b&&(m.id=a.id);if(c&&e.isSymbol3D(m))for(a=0;a<m.symbolLayers.length;++a)m.symbolLayers.getItemAt(a)._ignoreDrivers=!0;return{symbol:m}}})},"esri/symbols":function(){define("require exports ./symbols/ExtrudeSymbol3DLayer ./symbols/FillSymbol ./symbols/FillSymbol3DLayer ./symbols/Font ./symbols/IconSymbol3DLayer ./symbols/LabelSymbol3D ./symbols/LineSymbol3D ./symbols/LineSymbol3DLayer ./symbols/MarkerSymbol ./symbols/MeshSymbol3D ./symbols/ObjectSymbol3DLayer ./symbols/PathSymbol3DLayer ./symbols/PictureFillSymbol ./symbols/PictureMarkerSymbol ./symbols/PointSymbol3D ./symbols/PolygonSymbol3D ./symbols/SimpleFillSymbol ./symbols/SimpleLineSymbol ./symbols/SimpleMarkerSymbol ./symbols/Symbol ./symbols/Symbol3D ./symbols/Symbol3DLayer ./symbols/TextSymbol ./symbols/TextSymbol3DLayer ./symbols/WebStyleSymbol ./symbols/support/jsonUtils".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v,w,y,r,z,x,p,n,A,B,C,F,D,H,E,J){Object.defineProperty(a,"__esModule",{value:!0});a.ExtrudeSymbol3DLayer=f;a.BaseFillSymbol=c;a.FillSymbol3DLayer=e;a.Font=l;a.IconSymbol3DLayer=h;a.LabelSymbol3D=d;a.LineSymbol3D=k;a.LineSymbol3DLayer=m;a.BaseMarkerSymbol=g;a.MeshSymbol3D=t;a.ObjectSymbol3DLayer=v;a.PathSymbol3DLayer=w;a.PictureFillSymbol=y;a.PictureMarkerSymbol=r;a.PointSymbol3D=z;a.PolygonSymbol3D=x;a.SimpleFillSymbol=p;a.SimpleLineSymbol=n;a.SimpleMarkerSymbol=A;
a.BaseSymbol=B;a.BaseSymbol3D=C;a.BaseSymbol3DLayer=F;a.TextSymbol=D;a.TextSymbol3DLayer=H;a.WebStyleSymbol=E;a.fromJSON=J.fromJSON;a.isSymbol=function(b){return b instanceof a.BaseSymbol};a.isSymbol2D=function(a){if(!a)return!1;switch(a.type){case "picture-fill":case "picture-marker":case "simple-fill":case "simple-line":case "simple-marker":case "text":return!0;default:return!1}};a.isSymbol3D=function(a){if(!a)return!1;switch(a.type){case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return!0;
default:return!1}}})},"esri/symbols/support/typeUtils":function(){define("require exports ../../core/accessorSupport/ensureType ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol ../TextSymbol ../WebStyleSymbol".split(" "),function(b,a,f,c,e,l,h,d,k,m,g,t,v,w,y,r){Object.defineProperty(a,"__esModule",{value:!0});a.types={base:w,key:"type",typeMap:{"simple-fill":g,
"picture-fill":h,"picture-marker":d,"simple-line":t,"simple-marker":v,text:y,"label-3d":c,"line-3d":e,"mesh-3d":l,"point-3d":k,"polygon-3d":m,"web-style":r}};a.rendererTypes={base:w,key:"type",typeMap:{"simple-fill":g,"picture-fill":h,"picture-marker":d,"simple-line":t,"simple-marker":v,text:y,"line-3d":e,"mesh-3d":l,"point-3d":k,"polygon-3d":m,"web-style":r}};a.labelTypes={base:w,key:"type",typeMap:{text:y,"label-3d":c}};a.types3D={base:w,key:"type",typeMap:{"label-3d":c,"line-3d":e,"mesh-3d":l,
"point-3d":k,"polygon-3d":m,"web-style":r}};a.rendererTypes3D={base:w,key:"type",typeMap:{"line-3d":e,"mesh-3d":l,"point-3d":k,"polygon-3d":m,"web-style":r}};a.labelTypes3D={base:w,key:"type",typeMap:{"label-3d":c}};a.ensureType=f.ensureOneOfType(a.types)})},"esri/tasks/support/QuantizationParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators".split(" "),
function(b,a,f,c,e,l,h,d,k){Object.defineProperty(a,"__esModule",{value:!0});var m=h({upperLeft:"upper-left",lowerLeft:"lower-left"});b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.extent=null;b.mode="view";b.originPosition="upper-left";return b}f(b,a);g=b;b.prototype.clone=function(){return new g(d.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};c([k.property({type:e.Extent,json:{write:!0}})],b.prototype,"extent",
void 0);c([k.property({type:String,json:{write:!0}})],b.prototype,"mode",void 0);c([k.property({type:String,json:{read:m.read,write:m.write}})],b.prototype,"originPosition",void 0);c([k.property({type:Number,json:{write:!0}})],b.prototype,"tolerance",void 0);return b=g=c([k.subclass("esri.tasks.support.QuantizationParameters")],b);var g}(k.declared(l));a.default=b})},"esri/tasks/support/StatisticDefinition":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(b,a,f,c,e,l){return function(a){function b(b){b=a.call(this)||this;b.maxPointCount=void 0;b.maxRecordCount=void 0;b.maxVertexCount=void 0;b.onStatisticField=null;b.outStatisticFieldName=null;b.statisticType=null;return b}f(b,a);e=b;b.prototype.clone=function(){return new e({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType})};
c([l.property({type:Number,json:{write:!0}})],b.prototype,"maxPointCount",void 0);c([l.property({type:Number,json:{write:!0}})],b.prototype,"maxRecordCount",void 0);c([l.property({type:Number,json:{write:!0}})],b.prototype,"maxVertexCount",void 0);c([l.property({type:String,json:{write:!0}})],b.prototype,"onStatisticField",void 0);c([l.property({type:String,json:{write:!0}})],b.prototype,"outStatisticFieldName",void 0);c([l.property({type:String,json:{write:!0}})],b.prototype,"statisticType",void 0);
return b=e=c([l.subclass("esri.tasks.support.StatisticDefinition")],b);var e}(l.declared(e))})},"esri/layers/support/FeatureProcessing":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/lang ../../core/accessorSupport/decorators ../../layers/support/Field".split(" "),function(b,a,f,c,e,l,h,d){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}f(b,a);e=b;b.fromWorker=function(a){if(!a)return null;
var b=new e;b.fields=a.fields&&a.fields.map(function(a){return d.fromJSON(a)});b.options=a.options;b.process=new (Function.bind.apply(Function,[void 0].concat(a.process.args,[a.process.body])));return b};b.prototype.clone=function(){return new e(l.clone({fields:this.fields,options:this.options,process:this.process}))};b.prototype.toWorker=function(){var a=this.process.toString();return{fields:this.fields,options:this.options,process:{body:a.substring(a.indexOf("{")+1,a.lastIndexOf("}")),args:a.slice(a.indexOf("(")+
1,a.indexOf(")")).match(/([^\s,]+)/g)}}};c([h.property({type:[d]})],b.prototype,"fields",void 0);c([h.property()],b.prototype,"options",void 0);c([h.property()],b.prototype,"process",void 0);return b=e=c([h.subclass("esri.layers.support.FeatureProcessing")],b);var e}(h.declared(e))})},"esri/layers/support/Field":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./domains ./fieldType".split(" "),
function(b,a,f,c,e,l,h,d){return function(a){function b(b){b=a.call(this)||this;b.alias=null;b.domain=null;b.editable=!1;b.length=-1;b.name=null;b.nullable=!0;b.type=null;return b}f(b,a);e=b;b.prototype.readDomain=function(a){var b=a&&a.type;return"range"===b?h.RangeDomain.fromJSON(a):"codedValue"===b?h.CodedValueDomain.fromJSON(a):null};b.prototype.clone=function(){return new e({alias:this.alias,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,
nullable:this.nullable,type:this.type})};c([l.property({type:String,json:{write:!0}})],b.prototype,"alias",void 0);c([l.property({types:h.types,json:{write:!0}})],b.prototype,"domain",void 0);c([l.reader("domain")],b.prototype,"readDomain",null);c([l.property({type:Boolean,json:{write:!0}})],b.prototype,"editable",void 0);c([l.property({type:Number,json:{write:!0}})],b.prototype,"length",void 0);c([l.property({type:String,json:{write:!0}})],b.prototype,"name",void 0);c([l.property({type:Boolean,json:{write:!0}})],
b.prototype,"nullable",void 0);c([l.property({type:String,json:{read:d.kebabDict.read,write:d.kebabDict.write}})],b.prototype,"type",void 0);return b=e=c([l.subclass("esri.layers.support.Field")],b);var e}(l.declared(e))})},"esri/layers/support/domains":function(){define("require exports ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),function(b,a,f,c,e,l){Object.defineProperty(a,"__esModule",{value:!0});a.CodedValueDomain=f;a.DomainBase=c;a.InheritedDomain=e;a.RangeDomain=
l;a.types={key:"type",base:a.DomainBase,typeMap:{range:a.RangeDomain,"coded-value":a.CodedValueDomain}}})},"esri/layers/support/CodedValueDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ./Domain".split(" "),function(b,a,f,c,e,l,h){return function(a){function b(b){b=a.call(this,b)||this;b.codedValues=null;b.type="coded-value";return b}f(b,a);d=b;b.prototype.writeCodedValues=
function(a,b){var c=null;a&&(c=a.map(function(a){return e.fixJson(e.clone(a))}));b.codedValues=c};b.prototype.getName=function(a){var b=null;if(this.codedValues){var c=String(a);this.codedValues.some(function(a){String(a.code)===c&&(b=a.name);return!!b})}return b};b.prototype.clone=function(){return new d({codedValues:e.clone(this.codedValues),name:this.name})};c([l.property({json:{write:!0}})],b.prototype,"codedValues",void 0);c([l.writer("codedValues")],b.prototype,"writeCodedValues",null);c([l.property()],
b.prototype,"type",void 0);return b=d=c([l.subclass("esri.layers.support.CodedValueDomain")],b);var d}(l.declared(h))})},"esri/layers/support/Domain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators".split(" "),function(b,a,f,c,e,l,h){var d=l({inherited:"inherited",codedValue:"coded-value",range:"range"});return function(a){function b(b){b=a.call(this,
b)||this;b.name=null;b.type=null;return b}f(b,a);c([h.property({json:{write:!0}})],b.prototype,"name",void 0);c([h.property({json:{read:d.read,write:d.write}})],b.prototype,"type",void 0);return b=c([h.subclass("esri.layers.support.Domain")],b)}(h.declared(e))})},"esri/layers/support/InheritedDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),function(b,a,f,c,e,l){return function(a){function b(b){b=
a.call(this,b)||this;b.type="inherited";return b}f(b,a);h=b;b.prototype.clone=function(){return new h};c([e.property()],b.prototype,"type",void 0);return b=h=c([e.subclass("esri.layers.support.InheritedDomain")],b);var h}(e.declared(l))})},"esri/layers/support/RangeDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),function(b,a,f,c,e,l){return function(a){function b(b){b=
a.call(this,b)||this;b.maxValue=null;b.minValue=null;b.type="range";return b}f(b,a);h=b;b.prototype.clone=function(){return new h({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};c([e.property({json:{read:{source:"range",reader:function(a,b){return b.range&&b.range[1]}},write:{target:"range",writer:function(a,b,c){b[c]=[this.minValue,a]}}}})],b.prototype,"maxValue",void 0);c([e.property({json:{read:{source:"range",reader:function(a,b){return b.range&&b.range[0]}},write:{target:"range",
writer:function(a,b,c){b[c]=[a,this.maxValue]}}}})],b.prototype,"minValue",void 0);c([e.property()],b.prototype,"type",void 0);return b=h=c([e.subclass("esri.layers.support.RangeDomain")],b);var h}(e.declared(l))})},"esri/layers/support/fieldType":function(){define(["require","exports","../../core/kebabDictionary"],function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.kebabDict=f({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",
esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})})},"esri/tasks/operations/query":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ../../geometry/support/normalizeUtils ./pbfQueryUtils ./urlUtils".split(" "),
function(b,a,f,c,e,l,h,d,k){function m(a){var b=a.geometry;a=a.toJSON();b&&(a.geometry=JSON.stringify(b),a.geometryType=l.getJsonType(b),a.inSR=b.spatialReference.wkid||JSON.stringify(b.spatialReference));a.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=a.groupByFieldsForStatistics.join(","));a.objectIds&&(a.objectIds=a.objectIds.join(","));a.orderByFields&&(a.orderByFields=a.orderByFields.join(","));a.outFields&&(a.outFields=a.outFields.join(","));a.outSR?a.outSR=a.outSR.wkid||JSON.stringify(a.outSR):
b&&(a.returnGeometry||a.returnCentroid)&&(a.outSR=a.inSR);a.returnGeometry&&delete a.returnGeometry;a.outStatistics&&(a.outStatistics=JSON.stringify(a.outStatistics));a.pixelSize&&(a.pixelSize=JSON.stringify(a.pixelSize));a.quantizationParameters&&(a.quantizationParameters=JSON.stringify(a.quantizationParameters));a.source&&(a.layer=JSON.stringify({source:a.source}),delete a.source);a.timeExtent&&(b=a.timeExtent,a.time=[null!=b.startTime?b.startTime:"null",null!=b.endTime?b.endTime:"null"],delete a.timeExtent);
return a}function g(a,b,d,g,l){void 0===g&&(g={});var t="string"===typeof a?e.urlToObject(a):a;a=b.geometry?[b.geometry]:[];g.responseType="pbf"===d?"array-buffer":"json";return h.normalizeCentralMeridian(a).then(function(a){if(a=a&&a[0])b=b.clone(),b.geometry=a;a=k.mapParameters(f({},t.query,{f:d},l,m(b)));return c(t.path+"/query",f({},g,{query:a,callbackParamName:"callback"}))})}Object.defineProperty(a,"__esModule",{value:!0});a.queryToQueryStringParameters=m;a.executeQuery=function(a,b,c){return g(a,
b,"json",c)};a.executeQueryPBF=function(a,b,c){return g(a,b,"pbf",c).then(function(a){var b=d.parsePBFFeatureQuery(a.data);a.data=b;return a})};a.executeQueryForIds=function(a,b,c){return g(a,b,"json",c,{returnIdsOnly:!0})};a.executeQueryForCount=function(a,b,c){return g(a,b,"json",c,{returnIdsOnly:!0,returnCountOnly:!0})};a.executeQueryForExtent=function(a,b,c){return g(a,b,"json",c,{returnExtentOnly:!0,returnCountOnly:!0}).then(function(a){var b=a.data;if(!b.hasOwnProperty("extent")){if(b.features)throw Error("Layer does not support extent calculation.");
if(b.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");}return a})}})},"esri/tasks/operations/pbfQueryUtils":function(){define(["require","exports","../../core/Error","../../core/Logger","../../core/pbf"],function(b,a,f,c,e){function l(a){if(a>=C.length){var b=new f("query:parsing-pbf","Error while parsing FeatureSet PBF payload. Unknown GeometryType");n.error(b)}return C[a]}function h(a){var b,c=b||(b={});c[c.STRING=1]="STRING";c[c.FLOAT=2]="FLOAT";c[c.DOUBLE=3]="DOUBLE";
c[c.INT=4]="INT";c[c.UINT=5]="UINT";c[c.SINT=6]="SINT";for(c[c.BOOL=7]="BOOL";a.next();)switch(a.tag()){case b.STRING:return a.getString();case b.FLOAT:return a.getFloat();case b.DOUBLE:return a.getDouble();case b.INT:return a.getInt64();case b.UINT:return a.getUInt64();case b.SINT:return a.getSInt64();case b.BOOL:return a.getBool();default:return a.skip(),null}return null}function d(a){var b,c=b||(b={});c[c.NAME=1]="NAME";c[c.TYPE=2]="TYPE";c[c.ALIAS=3]="ALIAS";c[c.SQL_TYPE=4]="SQL_TYPE";c[c.DOMAIN=
5]="DOMAIN";c[c.DEFAULT_VALUE=6]="DEFAULT_VALUE";for(c={domain:null,defaultValue:null,sqlType:B[0],type:A[0]};a.next();)switch(a.tag()){case b.NAME:c.name=a.getString();break;case b.TYPE:c.type=A[a.getEnum()];break;case b.ALIAS:c.alias=a.getString();break;case b.SQL_TYPE:c.sqlType=B[a.getEnum()];break;case b.DOMAIN:c.domain=a.getString();break;case b.DEFAULT_VALUE:c.defaultValue=a.getString();break;default:a.skip()}return c}function k(a,b){var c,d=c||(c={});d[d.ATTRIBUTES=1]="ATTRIBUTES";d[d.GEOMETRY=
2]="GEOMETRY";d[d.CENTROID=4]="CENTROID";for(var d={attributes:{}},e=0;a.next();)switch(a.tag()){case c.ATTRIBUTES:var f=a.getMessage(),g=b[e++].name;d.attributes[g]=h(f);break;case c.GEOMETRY:var f=a.getMessage(),k=(g=void 0,g={});k[k.TYPE=1]="TYPE";k[k.LENGTHS=2]="LENGTHS";k[k.COORDS=3]="COORDS";for(var k=[],l=void 0;f.next();)switch(f.tag()){case g.LENGTHS:for(var n=f.getUInt32(),n=f._pos+n;f._pos<n;)k.push(f.getUInt32());break;case g.COORDS:for(var l=f.getUInt32(),n=f._pos+l,l=Array(l),m=0;f._pos<
n;)l[m++]=f.getSInt32();break;default:f.skip()}d.geometry={lengths:k,coords:l};break;case c.CENTROID:f=a.getMessage();k=(g=void 0,g={});k[k.TYPE=1]="TYPE";k[k.LENGTHS=2]="LENGTHS";k[k.COORDS=3]="COORDS";for(l=void 0;f.next();)switch(f.tag()){case g.COORDS:l=f.getUInt32();k=f._pos+l;l=Array(l);for(n=0;f._pos<k;)l[n++]=f.getSInt32();break;default:f.skip()}d.centroid={coords:l};break;default:a.skip()}return d}function m(a,b){return{x:a[b+0],y:a[b+1]}}function g(a,b){return{x:a[b+0],y:a[b+1],z:a[b+2]}}
function t(a,b){return{x:a[b+0],y:a[b+1],m:a[b+2]}}function v(a,b){return{x:a[b+0],y:a[b+1],z:a[b+2],m:a[b+3]}}function w(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],f=e.geometry,e=e.attributes,f=f?b(f.coords,0):void 0;c.push({attributes:e,geometry:f})}return c}function y(a,b,c,d){for(var e=[],f=0;f<a.length;f++){var g=a[f],h=g.geometry,k=g.attributes,g=g.centroid,l=void 0,g=g?m(g.coords,0):void 0;if(h){for(var l=[],n=0;n<h.coords.length;n+=d){for(var A=[],t=0;t<d;t++)A.push(h.coords[n+t]);l.push(A)}l=
{points:l,hasM:c,hasZ:b}}e.push({attributes:k,centroid:g,geometry:l})}return e}function r(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],f=e.geometry,g=e.attributes,h=e.centroid,e=void 0,h=h?m(h.coords,0):void 0;if(f)for(var k=[],l=0,e={paths:k},n=0,A=f.lengths;n<A.length;n++){for(var t=A[n],B=[],r=0;r<t;r++){for(var p=[],v=0;v<b;v++)p.push(f.coords[l++]);B.push(p)}k.push(B)}c.push({attributes:g,centroid:h,geometry:e})}return c}function z(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],f=e.geometry,
g=e.attributes,h=e.centroid,e=void 0,h=h?m(h.coords,0):void 0;if(f)for(var k=[],l=0,e={rings:k},n=0,A=f.lengths;n<A.length;n++){for(var t=A[n],B=[],r=0;r<t;r++){for(var p=[],v=0;v<b;v++)p.push(f.coords[l++]);B.push(p)}k.push(B)}c.push({attributes:g,centroid:h,geometry:e})}return c}function x(a){var b=a.hasM;return(a=a.hasZ)&&b?4:a||b?3:2}function p(a){var b=[];switch(a.geometryType){case "esriGeometryPoint":b=m;a.hasZ&&a.hasM?b=v:a.hasZ?b=g:a.hasM&&(b=t);b=w(a.features,b);break;case "esriGeometryMultipoint":b=
x(a);b=y(a.features,a.hasZ,a.hasM,b);break;case "esriGeometryPolyline":b=x(a);b=r(a.features,b);break;case "esriGeometryPolygon":b=x(a);b=z(a.features,b);break;default:n.error("Unable to parse unknown geometry type ")}return{exceededTransferLimit:a.exceededTransferLimit,features:b,fields:a.fields.map(function(a){return{name:a.name,type:a.type,alias:a.alias,sqlType:a.sqlType,domain:null,defaultValue:a.defaultValue}}),hasM:a.hasM,hasZ:a.hasZ,geometryType:a.geometryType,objectIdFieldName:a.objectIdFieldName,
spatialReference:a.spatialReference,transform:a.transform}}Object.defineProperty(a,"__esModule",{value:!0});var n=c.getLogger("esri.tasks.operations.pbfQueryUtils"),A="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),B="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),
C=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],F=["upperLeft","lowerLeft"];a.parsePBFFeatureQuery=function(a){try{var b,c=b||(b={});c[c.QUERY_RESULT=2]="QUERY_RESULT";for(var g=new e(new Uint8Array(a),new DataView(a)),h;g.next();)switch(g.tag()){case b.QUERY_RESULT:var m=g.getMessage(),A=(a=void 0,a={});A[A.FEATURE_RESULT=1]="FEATURE_RESULT";for(c={};m.next();)switch(m.tag()){case a.FEATURE_RESULT:var t=m.getMessage(),B=void 0,r=B||(B={});r[r.OBJECT_ID_NAME=
1]="OBJECT_ID_NAME";r[r.UNIQUE_ID_NAME=2]="UNIQUE_ID_NAME";r[r.GLOBAL_ID_NAME=3]="GLOBAL_ID_NAME";r[r.GEOHASH_NAME=4]="GEOHASH_NAME";r[r.GEOMETRY_PROPERTIES=5]="GEOMETRY_PROPERTIES";r[r.SERVER_GENS=6]="SERVER_GENS";r[r.GEOMETRY_TYPE=7]="GEOMETRY_TYPE";r[r.SPATIAL_REFERENCE=8]="SPATIAL_REFERENCE";r[r.EXCEEDED_TRANSFER_LIMIT=9]="EXCEEDED_TRANSFER_LIMIT";r[r.HAS_Z=10]="HAS_Z";r[r.HAS_M=11]="HAS_M";r[r.TRANSFORM=12]="TRANSFORM";r[r.FIELDS=13]="FIELDS";r[r.FEATURES=15]="FEATURES";var v={fields:[],features:[]};
for(v.geometryType=l(0);t.next();)switch(t.tag()){case B.OBJECT_ID_NAME:v.objectIdFieldName=t.getString();break;case B.GLOBAL_ID_NAME:v.globalIdFieldName=t.getString();break;case B.GEOHASH_NAME:v.geohashFieldName=t.getString();break;case B.GEOMETRY_PROPERTIES:var C=t.getMessage(),w=void 0,x=w||(w={});x[x.AREA_FIELD_NAME=1]="AREA_FIELD_NAME";x[x.LENGTH_FIELD_NAME=2]="LENGTH_FIELD_NAME";x[x.UNITS=3]="UNITS";for(var y={};C.next();)switch(C.tag()){case w.AREA_FIELD_NAME:y.shapeAreaFieldName=C.getString();
break;case w.LENGTH_FIELD_NAME:y.shapeLengthFieldName=C.getString();break;case w.UNITS:y.units=C.getString();break;default:C.skip()}v.geometryProperties=y;break;case B.GEOMETRY_TYPE:v.geometryType=l(t.getEnum());break;case B.SPATIAL_REFERENCE:var z=t.getMessage(),D=(w=void 0,w={});D[D.WKID=1]="WKID";D[D.LASTEST_WKID=2]="LASTEST_WKID";D[D.VCS_WKID=3]="VCS_WKID";D[D.LATEST_VCS_WKID=4]="LATEST_VCS_WKID";D[D.WKT=5]="WKT";for(y={};z.next();)switch(z.tag()){case w.WKID:y.wkid=z.getUInt32();break;case w.WKT:y.wkt=
z.getString();break;default:z.skip()}v.spatialReference=y;break;case B.HAS_Z:v.hasZ=t.getBool();break;case B.HAS_M:v.hasM=t.getBool();break;case B.TRANSFORM:var da=t.getMessage(),X=(w=void 0,w={});X[X.ORIGIN_POSTION=1]="ORIGIN_POSTION";X[X.SCALE=2]="SCALE";X[X.TRANSLATE=3]="TRANSLATE";for(var U=F[0],ma=y=void 0;da.next();)switch(da.tag()){case w.ORIGIN_POSTION:U=F[da.getEnum()];break;case w.SCALE:var ja=da.getMessage(),oa=void 0,ia=oa||(oa={});ia[ia.X=1]="X";ia[ia.Y=2]="Y";ia[ia.M=3]="M";ia[ia.Z=
4]="Z";for(var qa=[0,0];ja.next();)switch(ja.tag()){case oa.X:qa[0]=ja.getDouble();break;case oa.Y:qa[1]=ja.getDouble();break;case oa.M:qa.push(ja.getDouble());break;case oa.Z:qa.push(ja.getDouble());break;default:ja.skip()}y=qa;break;case w.TRANSLATE:var pa=da.getMessage(),va=(oa=void 0,oa={});va[va.X=1]="X";va[va.Y=2]="Y";va[va.M=3]="M";va[va.Z=4]="Z";for(qa=[0,0];pa.next();)switch(pa.tag()){case oa.X:qa[0]=pa.getDouble();break;case oa.Y:qa[1]=pa.getDouble();break;case oa.M:qa.push(pa.getDouble());
break;case oa.Z:qa.push(pa.getDouble());break;default:pa.skip()}ma=qa;break;default:da.skip()}v.transform={originPosition:U,scale:y,translate:ma};break;case B.EXCEEDED_TRANSFER_LIMIT:var Ha=t.getBool();v.exceededTransferLimit=Ha;break;case B.FIELDS:var Ia=t.getMessage();v.fields.push(d(Ia));break;case B.FEATURES:var N=t.getMessage();v.features.push(k(N,v.fields));break;default:t.skip()}c.featureResult=v;break;default:m.skip()}h=c;break;default:g.skip()}return p(h.featureResult)}catch(ra){return b=
new f("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:ra}),n.error(b),{features:[]}}}})},"esri/core/pbf":function(){define(["require","exports"],function(b,a){return function(){function a(a,b,f,h){this._tag=0;this._dataType=99;this._data=a;this._dataView=b;this._pos=f||0;this._end=h||a.byteLength}a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)};a.prototype.next=function(a){for(;;){if(this._pos===this._end)return!1;var b=this._decodeVarint();
this._tag=b>>3;this._dataType=b&7;if(!a||a===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=function(){var a=4294967295,a=(this._data[this._pos]&127)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&127)<<7)>>>0;if(128>this._data[this._pos++])return a;
a=(a|(this._data[this._pos]&127)<<14)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&127)<<21)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&15)<<28)>>>0;if(128>this._data[this._pos++])return a};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=function(){var a=this.getUInt32();return a>>>1^-(a&1)|0};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=function(){var a=0!==this._data[this._pos];
this._skip(1);return a};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=function(){var a=this._dataView,b=this._pos,a=a.getUint32(b,!0)+4294967296*a.getUint32(b+4,!0);this._skip(8);return a};a.prototype.getSFixed64=function(){var a=this._dataView,b=this._pos,a=a.getUint32(b,!0)+4294967296*a.getInt32(b+4,!0);this._skip(8);return a};a.prototype.getDouble=function(){var a=this._dataView.getFloat64(this._pos,!0);this._skip(8);return a};a.prototype.getFixed32=function(){var a=
this._dataView.getUint32(this._pos,!0);this._skip(4);return a};a.prototype.getSFixed32=function(){var a=this._dataView.getInt32(this._pos,!0);this._skip(4);return a};a.prototype.getFloat=function(){var a=this._dataView.getFloat32(this._pos,!0);this._skip(4);return a};a.prototype.getString=function(){var a=this._getLength(),b=this._pos,b=this._toString(this._data,b,b+a);this._skip(a);return b};a.prototype.getBytes=function(){var a=this._getLength(),b=this._pos,b=this._toBytes(this._data,b,b+a);this._skip(a);
return b};a.prototype.getMessage=function(){var b=this._getLength(),e=this._pos,e=new a(this._data,this._dataView,e,e+b);this._skip(b);return e};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(a){if(this._pos+a>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=a};a.prototype._decodeVarint=
function(){var a=this._data,b=this._pos,f=0,h;if(10<=this._end-b){if(h=a[b++],f|=h&127,0!==(h&128)&&(h=a[b++],f|=(h&127)<<7,0!==(h&128)&&(h=a[b++],f|=(h&127)<<14,0!==(h&128)&&(h=a[b++],f|=(h&127)<<21,0!==(h&128)&&(h=a[b++],f+=268435456*(h&127),0!==(h&128)&&(h=a[b++],f+=34359738368*(h&127),0!==(h&128)&&(h=a[b++],f+=4398046511104*(h&127),0!==(h&128)&&(h=a[b++],f+=562949953421312*(h&127),0!==(h&128)&&(h=a[b++],f+=72057594037927936*(h&127),0!==(h&128)&&(h=a[b++],f+=0x7fffffffffffffff*(h&127),0!==(h&128)))))))))))throw Error("Varint too long!");
}else{for(var d=1;b!==this._end;){h=a[b];if(0===(h&128))break;++b;f+=(h&127)*d;d*=128}if(b===this._end)throw Error("Varint overrun!");++b;f+=h*d}this._pos=b;return f};a.prototype._decodeSVarint=function(){var a=this._decodeVarint();return a%2?-(a+1)/2:a/2};a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(a,b,f){var c="",d="";for(f=Math.min(this._end,f);b<f;++b){var e=a[b];e&128?d+="%"+e.toString(16):
(c+=decodeURIComponent(d)+String.fromCharCode(e),d="")}d.length&&(c+=decodeURIComponent(d));return c};a.prototype._toBytes=function(a,b,f){f=Math.min(this._end,f);return new Uint8Array(a.buffer,b,f-b)};return a}()})},"esri/tasks/operations/urlUtils":function(){define(["require","exports"],function(b,a){function f(a){var b={},c;for(c in a)if("declaredClass"!==c){var h=a[c];if(null!=h&&"function"!==typeof h)if(Array.isArray(h)){b[c]=[];for(var d=0;d<h.length;d++)b[c][d]=f(h[d])}else"object"===typeof h?
h.toJSON&&(b[c]=JSON.stringify(h)):b[c]=h}return b}Object.defineProperty(a,"__esModule",{value:!0});a.mapParameters=f})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ../../geometry/Extent ./viewpointUtils ./libs/gl-matrix/mat2d ./libs/gl-matrix/vec2".split(" "),function(b,a,f,c,e,l,h,d,k,m,g){var t=[0,0];return function(a){function b(){for(var b=
[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=a.apply(this,b)||this;b.pixelRatio=1;b.size=[0,0];return b}f(b,a);l=b;Object.defineProperty(b.prototype,"center",{get:function(){var a=this.viewpoint.targetGeometry;return g.set(g.create(),a.x,a.y)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"extent",{get:function(){return k.getExtent(new d,this.viewpoint,this.size)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"height",{get:function(){return this.size?this.size[1]:
0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"id",{get:function(){return this._get("id")+1},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"inverseTransform",{get:function(){return m.invert(m.create(),this.transform)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"latitude",{get:function(){return this.viewpoint.targetGeometry.latitude},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"longitude",{get:function(){return this.viewpoint.targetGeometry.longitude},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"resolution",{get:function(){return k.getResolution(this.viewpoint)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"rotation",{get:function(){return this.viewpoint.rotation},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"scale",{get:function(){return this.viewpoint.scale},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"screenCenter",{get:function(){return g.scale(g.create(),
this.size,.5)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"spatialReference",{get:function(){return this.viewpoint.targetGeometry.spatialReference},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"transform",{get:function(){return k.getTransform(m.create(),this.viewpoint,this.size,this.pixelRatio)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"transformNoRotation",{get:function(){return k.getTransformNoRotation(m.create(),this.viewpoint,
this.size,this.pixelRatio)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"clippedExtent",{get:function(){return k.getClippedExtent(new d,this.viewpoint,this.size)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"width",{get:function(){return this.size?this.size[0]:0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"worldScreenWidth",{get:function(){return k.getWorldScreenWidth(this.spatialReference,this.resolution)},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"worldWidth",{get:function(){return k.getWorldWidth(this.spatialReference)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"wrappable",{get:function(){return!!this.spatialReference&&this.spatialReference.isWrappable},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"x",{get:function(){return this.center[0]},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"y",{get:function(){return this.center[1]},enumerable:!0,
configurable:!0});b.prototype.copy=function(a){this.viewpoint&&this.size?(this._set("viewpoint",k.copy(this.viewpoint,a.viewpoint)),this._set("size",g.copy(this.size,a.size))):(this.viewpoint=a.viewpoint.clone(),g.copy(this.size,a.size));this._set("pixelRatio",a.pixelRatio);return this};b.prototype.clone=function(){return new l({viewpoint:this.viewpoint.clone(),size:g.clone(this.size)})};b.prototype.toMap=function(a,b,c){if(Array.isArray(b))return g.transformMat2d(a,b,this.inverseTransform);t[0]=
b;t[1]=c;return g.transformMat2d(a,t,this.inverseTransform)};b.prototype.toScreen=function(a,b,c){if(Array.isArray(b))return g.transformMat2d(a,b,this.transform);t[0]=b;t[1]=c;return g.transformMat2d(a,t,this.transform)};b.prototype.pixelSizeAt=function(a){return k.pixelSizeAt(a,this.viewpoint,this.size)};c([h.property({dependsOn:["viewpoint"]})],b.prototype,"center",null);c([h.property({readOnly:!0,dependsOn:["viewpoint","size"]})],b.prototype,"extent",null);c([h.property({readOnly:!0,dependsOn:["size"]})],
b.prototype,"height",null);c([h.property({value:0,readOnly:!0,dependsOn:["transform"]})],b.prototype,"id",null);c([h.property({readOnly:!0,dependsOn:["transform"]})],b.prototype,"inverseTransform",null);c([h.property({readOnly:!0,dependsOn:["viewpoint"]})],b.prototype,"latitude",null);c([h.property({readOnly:!0,dependsOn:["viewpoint"]})],b.prototype,"longitude",null);c([h.property({type:Number,json:{write:!0}})],b.prototype,"pixelRatio",void 0);c([h.property({readOnly:!0,dependsOn:["viewpoint"]})],
b.prototype,"resolution",null);c([h.property({readOnly:!0,dependsOn:["viewpoint"]})],b.prototype,"rotation",null);c([h.property({readOnly:!0,dependsOn:["viewpoint"]})],b.prototype,"scale",null);c([h.property({readOnly:!0,dependsOn:["size"]})],b.prototype,"screenCenter",null);c([h.property({json:{write:!0}})],b.prototype,"size",void 0);c([h.property({readOnly:!0,dependsOn:["viewpoint"]})],b.prototype,"spatialReference",null);c([h.property({readOnly:!0,dependsOn:["viewpoint","size","pixelRatio"]})],
b.prototype,"transform",null);c([h.property({readOnly:!0,dependsOn:["viewpoint","size","pixelRatio"]})],b.prototype,"transformNoRotation",null);c([h.property({type:e,json:{write:!0}})],b.prototype,"viewpoint",void 0);c([h.property({readOnly:!0,dependsOn:["viewpoint","size"]})],b.prototype,"clippedExtent",null);c([h.property({readOnly:!0,dependsOn:["size"]})],b.prototype,"width",null);c([h.property({readOnly:!0,dependsOn:["worldWidth","resolution"]})],b.prototype,"worldScreenWidth",null);c([h.property({readOnly:!0,
dependsOn:["spatialReference"]})],b.prototype,"worldWidth",null);c([h.property({readOnly:!0,dependsOn:["spatialReference"]})],b.prototype,"wrappable",null);c([h.property({readOnly:!0,dependsOn:["center"]})],b.prototype,"x",null);c([h.property({readOnly:!0,dependsOn:["center"]})],b.prototype,"y",null);return b=l=c([h.subclass("esri.views.2d.ViewState")],b);var l}(h.declared(l))})},"esri/Viewpoint":function(){define(["./core/JSONSupport","./Camera","./geometry/support/typeUtils","./geometry/support/jsonUtils"],
function(b,a,f,c){var e=b.createSubclass({declaredClass:"esri.Viewpoint",properties:{rotation:{type:Number,value:0,cast:function(a){a%=360;0>a&&(a+=360);return a},json:{write:!0}},scale:{type:Number,value:0,json:{write:!0}},targetGeometry:{value:null,types:f.types,json:{read:function(a){return c.fromJSON(a)},write:!0}},camera:{value:null,type:a,json:{write:!0}}},clone:function(){return new e({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry?this.targetGeometry.clone():null,
camera:this.camera?this.camera.clone():null})}});return e})},"esri/Camera":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/accessorSupport/decorators ./geometry/Point ./views/3d/support/mathUtils".split(" "),function(b,a,f,c,e,l,h,d){return function(a){function b(b,c,d,e){b=a.call(this)||this;b.position=null;b.heading=0;b.tilt=0;b.fov=55;return b}f(b,a);e=b;b.prototype.getDefaults=function(a){if(!a.position)return{position:new h([0,
0,0])}};b.prototype.normalizeCtorArgs=function(a,b,c,d){a&&"object"===typeof a&&("x"in a||Array.isArray(a))&&(a={position:a},null!=b&&(a.heading=b),null!=c&&(a.tilt=c),null!=d&&(a.fov=d));return a};b.prototype.equals=function(a){return a?this.tilt===a.tilt&&this.heading===a.heading&&this.fov===a.fov&&this.position.equals(a.position):!1};b.prototype.clone=function(){return new e({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})};c([l.property({type:h,json:{write:{isRequired:!0}}})],
b.prototype,"position",void 0);c([l.property({type:Number,json:{write:{isRequired:!0}}}),l.cast(d.cyclicalDeg.normalize)],b.prototype,"heading",void 0);c([l.property({type:Number,json:{write:{isRequired:!0}}}),l.cast(function(a){return d.clamp(a,-180,180)})],b.prototype,"tilt",void 0);c([l.property({json:{read:!1,write:!1}})],b.prototype,"fov",void 0);return b=e=c([l.subclass("esri.Camera")],b);var e}(l.declared(e))})},"esri/views/2d/viewpointUtils":function(){define("require exports ../../Viewpoint ../../core/Error ../../core/promiseUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils ./libs/gl-matrix/common ./libs/gl-matrix/mat2d ./libs/gl-matrix/vec2".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v,w,y,r){function z(a,b,c,d){return d&&c&&!d.equals(c)&&t.canProject(d,c)&&d.isWebMercator?(d.isWebMercator?(c=b[1],89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c=Math.sin(w.toRadian(c)),a=r.set(a,6378137*w.toRadian(b[0]),3189068.5*Math.log((1+c)/(1-c)))):(c=w.toDegree(b[0]/6378137),a=r.set(a,c-360*Math.floor((c+180)/360),w.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*b[1]/6378137))))),a):r.copy(a,b)}function x(a){return a.wkid?a:a.spatialReference||k.WGS84}function p(a,
b){return b.type?r.set(a,b.x,b.y):r.copy(a,b)}function n(a,b){return Math.max(a.width/b[0],a.height/b[1])*J(a.spatialReference)}function A(a,b,c){var e;if(!a)return null;if(Array.isArray(a)&&2===a.length&&"number"===typeof a[0]&&"number"===typeof a[1])return new d(a);if(a.reduce)return a.reduce(function(a,c){return A(c,b,a)},c);a instanceof h?e=a:a.geometry&&(e=a.geometry);if(!e)return null;a="point"===e.type?new l({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference}):e.extent;
if(!a)return null;e=t.canProject(a,b);if(!a.spatialReference.equals(b)&&e)a=t.project(a,b);else if(!e)return null;return c=c?c.union(a):a.clone()}function B(a,b){if(!a)return new f({targetGeometry:new d,scale:0,rotation:0});var c=b.spatialReference,e=b.size,g=b.viewpoint,h=b.constraints,k=null;"esri.Viewpoint"===a.declaredClass?k=a:a.viewpoint?k=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(k=a.target);var m=null;if(k&&k.targetGeometry)m=k.targetGeometry;else if(a instanceof l)m=
a;else if(a||a&&(a.hasOwnProperty("center")||a.hasOwnProperty("extent")||a.hasOwnProperty("target")))m=A(a.center,c)||A(a.extent,c)||A(a.target,c)||A(a,c);!m&&g&&g.targetGeometry?m=g.targetGeometry:!m&&b.extent&&(m=b.extent);var B=x(m);c||(c=x(b.spatialReference||b.extent||m));if(!v.canProject(m,c)&&B&&!B.equals(c))return null;var C=p(r.create(),m.center?m.center:m),B=new d(z(C,C,B,c),c),C=null,C=k&&k.targetGeometry&&"point"===k.targetGeometry.type?k.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:
a.hasOwnProperty("zoom")&&-1!==a.zoom&&h&&h.effectiveLODs?h.zoomToScale(a.zoom):Array.isArray(m)||"point"===m.type||"extent"===m.type&&0===m.width&&0===m.height?b.extent&&t.canProject(b.extent,c)?n(t.project(b.extent,c),e):b.extent?n(b.extent,e):g.scale:t.canProject(m.extent,c)?n(t.project(m.extent,c),e):n(m.extent,e);b=0;k?b=k.rotation:a.hasOwnProperty("rotation")?b=a.rotation:g&&(b=g.rotation);a=new f({targetGeometry:B,scale:C,rotation:b});h&&(a=h.fit(a),h.rotationEnabled||(a.rotation=b));return a}
function C(a,b){var c=a.targetGeometry,d=b.targetGeometry;c.x=d.x;c.y=d.y;c.spatialReference=d.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function F(a,b,c){return c?r.set(a,.5*(b[0]-c.right+c.left),.5*(b[1]-c.bottom+c.top)):r.scale(a,b,.5)}function D(b,c,d,e){a.getTransform(b,c,d,e);return y.invert(b,b)}function H(a,b,c){var d=w.toRadian(b.rotation)||0;b=Math.abs(Math.cos(d));d=Math.abs(Math.sin(d));return r.set(a,Math.round(c[1]*d+c[0]*b),Math.round(c[1]*b+c[0]*d))}function E(a){return a.scale*
(1/(39.37*m.getMetersPerUnitForSR(a.targetGeometry.spatialReference)*96))}function J(a){return 39.37*m.getMetersPerUnitForSR(a)*96}function ha(a){return a.isWrappable?(a=g.getInfo(a),a.valid[1]-a.valid[0]):0}function ea(a,b){return Math.round(ha(a)/b)}Object.defineProperty(a,"__esModule",{value:!0});var ba=180/Math.PI;a.extentToScale=n;a.create=B;a.copy=C;a.getAnchor=F;a.getExtent=function(){var a=r.create();return function(b,c,d){var e=c.targetGeometry;p(a,e);c=.5*E(c);b.xmin=a[0]-c*d[0];b.ymin=
a[1]-c*d[1];b.xmax=a[0]+c*d[0];b.ymax=a[1]+c*d[1];b.spatialReference=e.spatialReference;return b}}();a.setExtent=function(b,c,d,e,f){a.centerAt(b,c,d.center);b.scale=n(d,e);f&&f.constraints&&f.constraints.constrain(b);return b};a.getOuterExtent=function(){var a=r.create(),b=r.create();return function(c,d,e){p(a,d.targetGeometry);H(b,d,e);e=.5*E(d);c.set({xmin:a[0]-e*b[0],ymin:a[1]-e*b[1],xmax:a[0]+e*b[0],ymax:a[1]+e*b[1],spatialReference:d.targetGeometry.spatialReference});return c}}();a.getClippedExtent=
function(){var a=r.create(),b=r.create();return function(c,d,e){var f=E(d),g=d.targetGeometry.spatialReference,h=ea(g,f);p(a,d.targetGeometry);H(b,d,e);g.isWrappable&&b[0]>h&&(b[0]=h);d=.5*f;c.set({xmin:a[0]-d*b[0],ymin:a[1]-d*b[1],xmax:a[0]+d*b[0],ymax:a[1]+d*b[1],spatialReference:g});return c}}();a.getOuterSize=H;a.getPaddingScreenTranslation=function(){var a=r.create();return function(b,c,d){return r.sub(b,r.scale(b,c,.5),F(a,c,d))}}();var Q=function(){var b=y.create(),c=r.create();return function(d,
e,f,g){var h=E(e);e=w.toRadian(e.rotation)||0;r.set(c,h,h);y.fromScaling(b,c);y.rotate(b,b,e);y.translate(b,b,a.getPaddingScreenTranslation(c,f,g));y.translate(b,b,[0,g.top-g.bottom]);return r.set(d,b[4],b[5])}}();a.getResolution=E;a.getResolutionToScaleFactor=J;a.getMatrix=function(){var a=r.create(),b=r.create(),c=r.create();return function(d,e,f,g,h,k){r.negate(a,e);r.scale(b,f,.5*k);r.set(c,1/g*k,-1/g*k);y.identity(d);y.translate(d,d,b);h&&y.rotate(d,d,h);y.scale(d,d,c);y.translate(d,d,a);return d}}();
a.getTransform=function(){var b=r.create();return function(c,d,e,f){var g=E(d),h=w.toRadian(d.rotation)||0;p(b,d.targetGeometry);return a.getMatrix(c,b,e,g,h,f)}}();a.getTransformNoRotation=function(){var b=r.create();return function(c,d,e,f){var g=E(d);p(b,d.targetGeometry);return a.getMatrix(c,b,e,g,0,f)}}();a.getWorldWidth=ha;a.getWorldScreenWidth=ea;a.createAsync=function(a,b){if(a=B(a,b))return e.resolve(a);a=new c("viewpointUtils-createAsync:different-spatialReference","Target spatialReference cannot be projected and is different from out spatialReference");
return e.reject(a)};a.angleBetween=function(){var a=r.create(),b=r.create(),c=r.create();return function(d,e,f){r.subtract(a,d,e);r.normalize(a,a);r.subtract(b,d,f);r.normalize(b,b);r.cross(c,a,b);d=Math.acos(r.dot(a,b)/(r.length(a)*r.length(b)))*ba;0>c[2]&&(d=-d);isNaN(d)&&(d=0);return d}}();a.addPadding=function(){var a=r.create();return function(b,c,d,e){var f=b.targetGeometry;C(b,c);Q(a,c,d,e);f.x+=a[0];f.y+=a[1];return b}}();a.removePadding=function(){var a=r.create();return function(b,c,d,e){var f=
b.targetGeometry;C(b,c);Q(a,c,d,e);f.x-=a[0];f.y-=a[1];return b}}();a.centerAt=function(){var a=r.create();return function(b,c,d){C(b,c);c=b.targetGeometry;var e=x(d),f=x(c);p(a,d);z(a,a,e,f);c.x=a[0];c.y=a[1];return b}}();a.pixelSizeAt=function(a,b,c){return E(b)};a.resize=function(){var b=r.create();return function(c,d,e,f,g){g||(g="center");r.sub(b,e,f);r.scale(b,b,.5);e=b[0];f=b[1];switch(g){case "center":r.set(b,0,0);break;case "left":r.set(b,-e,0);break;case "top":r.set(b,0,f);break;case "right":r.set(b,
e,0);break;case "bottom":r.set(b,0,-f);break;case "top-left":r.set(b,-e,f);break;case "bottom-left":r.set(b,-e,-f);break;case "top-right":r.set(b,e,f);break;case "bottom-right":r.set(b,e,-f)}a.translateBy(c,d,b);return c}}();a.rotateBy=function(a,b,c){C(a,b);a.rotation+=c;return a};a.rotateTo=function(a,b,c){C(a,b);a.rotation=c;return a};a.scaleBy=function(){var b=r.create();return function(c,d,e,f,g){C(c,d);isNaN(e)||0===e||(a.toMap(b,f,d,g),c.scale=d.scale*e,a.toScreen(b,b,c,g),a.translateBy(c,
c,r.set(b,b[0]-f[0],f[1]-b[1])));return c}}();a.scaleTo=function(a,b,c){C(a,b);a.scale=c;return a};a.scaleAndRotateBy=function(){var b=r.create();return function(c,d,e,f,g,h){C(c,d);isNaN(e)||0===e||(a.toMap(b,g,d,h),c.scale=d.scale*e,c.rotation+=f,a.toScreen(b,b,c,h),a.translateBy(c,c,r.set(b,b[0]-g[0],g[1]-b[1])));return c}}();a.padAndScaleAndRotateBy=function(){var b=r.create(),c=r.create();return function(d,e,f,g,h,k,l){a.getPaddingScreenTranslation(c,k,l);r.add(b,h,c);return g?a.scaleAndRotateBy(d,
e,f,g,b,k):a.scaleBy(d,e,f,b,k)}}();a.toMap=function(){var a=y.create();return function(b,c,d,e){return r.transformMat2d(b,c,D(a,d,e,1))}}();a.toScreen=function(){var b=y.create();return function(c,d,e,f){return r.transformMat2d(c,d,a.getTransform(b,e,f,1))}}();a.translateBy=function(){var a=r.create(),b=y.create();return function(c,d,e){C(c,d);var f=E(d),g=c.targetGeometry;y.fromRotation(b,w.toRadian(d.rotation)||0);y.scale(b,b,r.fromValues(f,f));r.transformMat2d(a,e,b);g.x+=a[0];g.y+=a[1];return c}}()})},
"esri/views/2d/libs/gl-matrix/common":function(){define([],function(){if(!b)var b=1E-6;if(!a)var a="undefined"!==typeof Float32Array?Float32Array:Array;if(!f)var f=Math.random;var c={GLMAT_EPSILON:b,GLMAT_ARRAY_TYPE:a,GLMAT_RANDOM:f,setMatrixArrayType:function(a){c.GLMAT_ARRAY_TYPE=a}},e=Math.PI/180,l=180/Math.PI;c.toRadian=function(a){return a*e};c.toDegree=function(a){return a*l};c.setMatrixArrayType(Array);return c})},"esri/views/2d/libs/gl-matrix/mat2d":function(){define(["./common"],function(b){var a=
b.GLMAT_ARRAY_TYPE;b={create:function(){var b=new a(6);b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=0;b[5]=0;return b},clone:function(b){var c=new a(6);c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=b[4];c[5]=b[5];return c},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,b){var c=b[0],f=b[1],h=b[2],d=b[3],k=b[4];b=b[5];var m=c*d-f*h;if(!m)return null;m=1/m;a[0]=d*m;a[1]=-f*m;a[2]=
-h*m;a[3]=c*m;a[4]=(h*b-d*k)*m;a[5]=(f*k-c*b)*m;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,b,e){var c=b[0],f=b[1],d=b[2],k=b[3],m=b[4];b=b[5];var g=e[0],t=e[1],v=e[2],w=e[3],y=e[4];e=e[5];a[0]=c*g+d*t;a[1]=f*g+k*t;a[2]=c*v+d*w;a[3]=f*v+k*w;a[4]=c*y+d*e+m;a[5]=f*y+k*e+b;return a}};b.mul=b.multiply;b.rotate=function(a,b,e){var c=b[0],f=b[1],d=b[2],k=b[3],m=b[4];b=b[5];var g=Math.sin(e);e=Math.cos(e);a[0]=c*e+d*g;a[1]=f*e+k*g;a[2]=c*-g+d*e;a[3]=f*-g+k*e;a[4]=m;
a[5]=b;return a};b.scale=function(a,b,e){var c=b[1],f=b[2],d=b[3],k=b[4],m=b[5],g=e[0];e=e[1];a[0]=b[0]*g;a[1]=c*g;a[2]=f*e;a[3]=d*e;a[4]=k;a[5]=m;return a};b.translate=function(a,b,e){var c=b[0],f=b[1],d=b[2],k=b[3],m=b[4];b=b[5];var g=e[0];e=e[1];a[0]=c;a[1]=f;a[2]=d;a[3]=k;a[4]=c*g+d*e+m;a[5]=f*g+k*e+b;return a};b.fromRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=-c;a[3]=b;a[4]=0;a[5]=0;return a};b.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];a[4]=0;a[5]=
0;return a};b.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=b[0];a[5]=b[1];return a};b.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};b.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};return b})},"esri/views/2d/libs/gl-matrix/vec2":function(){define(["./common"],function(b){var a=b.GLMAT_ARRAY_TYPE,f=b.GLMAT_RANDOM,c={create:function(){var b=new a(2);
b[0]=0;b[1]=0;return b},clone:function(b){var c=new a(2);c[0]=b[0];c[1]=b[1];return c},fromValues:function(b,c){var e=new a(2);e[0]=b;e[1]=c;return e},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,c){a[0]=b;a[1]=c;return a},add:function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a},subtract:function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}};c.sub=c.subtract;c.multiply=function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a};c.mul=c.multiply;c.divide=function(a,b,c){a[0]=
b[0]/c[0];a[1]=b[1]/c[1];return a};c.div=c.divide;c.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);return a};c.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);return a};c.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a};c.scaleAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;return a};c.distance=function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)};c.dist=c.distance;c.squaredDistance=function(a,b){var c=b[0]-a[0];a=b[1]-
a[1];return c*c+a*a};c.sqrDist=c.squaredDistance;c.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};c.len=c.length;c.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};c.sqrLen=c.squaredLength;c.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};c.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};c.normalize=function(a,b){var c=b[0],d=b[1],c=c*c+d*d;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};c.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};c.cross=function(a,
b,c){b=b[0]*c[1]-b[1]*c[0];a[0]=a[1]=0;a[2]=b;return a};c.lerp=function(a,b,c,d){var e=b[0];b=b[1];a[0]=e+d*(c[0]-e);a[1]=b+d*(c[1]-b);return a};c.random=function(a,b){b=b||1;var c=2*f()*Math.PI;a[0]=Math.cos(c)*b;a[1]=Math.sin(c)*b;return a};c.transformMat2=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b;a[1]=c[1]*d+c[3]*b;return a};c.transformMat2d=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b+c[4];a[1]=c[1]*d+c[3]*b+c[5];return a};c.transformMat3=function(a,b,c){var d=b[0];b=b[1];a[0]=
c[0]*d+c[3]*b+c[6];a[1]=c[1]*d+c[4]*b+c[7];return a};c.transformMat4=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[4]*b+c[12];a[1]=c[1]*d+c[5]*b+c[13];return a};c.forEach=function(){var a=c.create();return function(b,c,d,e,f,g){c||(c=2);d||(d=0);for(e=e?Math.min(e*c+d,b.length):b.length;d<e;d+=c)a[0]=b[d],a[1]=b[d+1],f(a,a,g),b[d]=a[0],b[d+1]=a[1];return b}}();c.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};return c})},"esri/views/2d/layers/features/controllers/BaseController":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Accessor ../../../../../core/HandleOwner ../../../../../core/accessorSupport/decorators".split(" "),
function(b,a,f,c,e,l,h){Object.defineProperty(a,"__esModule",{value:!0});b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.processor=null;b.remoteClient=null;b.service=null;b.tileStore=null;return b}f(b,a);b.prototype.initialize=function(){this.handles.add([this.tileStore.on("add",this.onTileAdded.bind(this)),this.tileStore.on("remove",this.onTileRemoved.bind(this))])};b.prototype.destroy=function(){};Object.defineProperty(b.prototype,"spatialReference",{get:function(){var a=
this.get("tileStore.spatialReference");return a&&a.toJSON()||null},enumerable:!0,configurable:!0});c([h.property()],b.prototype,"processor",void 0);c([h.property({constructOnly:!0})],b.prototype,"remoteClient",void 0);c([h.property({constructOnly:!0})],b.prototype,"service",void 0);c([h.property({dependsOn:["tileStore.spatialReference"]})],b.prototype,"spatialReference",null);c([h.property({constructOnly:!0})],b.prototype,"tileStore",void 0);return b=c([h.subclass()],b)}(h.declared(e,l));a.default=
b})},"esri/core/HandleOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Handles ./accessorSupport/decorators".split(" "),function(b,a,f,c,e,l,h){return function(a){function b(){var b=a.call(this)||this;b.handles=new l;return b}f(b,a);b.prototype.destroy=function(){this.handles.destroy()};c([h.property({readOnly:!0})],b.prototype,"handles",void 0);return b=c([h.subclass("esri.core.HandleOwner")],b)}(h.declared(e))})},"esri/core/Handles":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Collection ./accessorSupport/decorators".split(" "),
function(b,a,f,c,e,l,h){return function(a){function b(b){b=a.call(this)||this;b._groups=new Map;return b}f(b,a);b.prototype.destroy=function(){this.removeAll()};Object.defineProperty(b.prototype,"size",{get:function(){var a=0;this._groups.forEach(function(b){a+=b.length});return a},enumerable:!0,configurable:!0});b.prototype.add=function(a,b){if(!this._isHandle(a)&&!Array.isArray(a)&&!l.isCollection(a))return this;var c=this._getOrCreateGroup(b);Array.isArray(a)||l.isCollection(a)?a.forEach(function(a){return c.push(a)}):
c.push(a);this.notifyChange("size");return this};b.prototype.has=function(a){return this._groups.has(this._ensureGroupKey(a))};b.prototype.remove=function(a){if(Array.isArray(a)||l.isCollection(a))return a.forEach(this.remove,this),this;if(!this.has(a))return this;for(var b=this._getGroup(a),c=0;c<b.length;c++)b[c].remove();this._deleteGroup(a);this.notifyChange("size");return this};b.prototype.removeAll=function(){this._groups.forEach(function(a){for(var b=0;b<a.length;b++)a[b].remove()});this._groups.clear();
this.notifyChange("size");return this};b.prototype._isHandle=function(a){return a&&!!a.remove};b.prototype._getOrCreateGroup=function(a){if(this.has(a))return this._getGroup(a);var b=[];this._groups.set(this._ensureGroupKey(a),b);return b};b.prototype._getGroup=function(a){return this._groups.get(this._ensureGroupKey(a))};b.prototype._deleteGroup=function(a){return this._groups.delete(this._ensureGroupKey(a))};b.prototype._ensureGroupKey=function(a){return a||"_default_"};c([h.property({readOnly:!0})],
b.prototype,"size",null);return b=c([h.subclass("esri.core.Handles")],b)}(h.declared(e))})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(b,a,f,c,e,l){var h=function(){function a(a,b,c,d,e,f,k,h){this.x=a;this.ymin=b;this.ymax=c;this.invM=d;this.leftAdjust=e;this.rightAdjust=f;this.leftBound=k;this.rightBound=h}a.create=function(b,c){b[1]>c[1]&&(h=[c,b],b=h[0],c=h[1]);h=b[0];b=b[1];var d=c[0];c=c[1];var e=
d-h,f=c-b,f=0!==f?e/f:0,g=(Math.ceil(b)-b)*f,k=(Math.floor(b)-b)*f;return new a(h,Math.floor(b),Math.ceil(c),f,0>e?g:k,0>e?k:g,0>e?d:h,0>e?h:d);var h};a.prototype.incrRow=function(){this.x+=this.invM};a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),d=[[0,0],[0,0],[0,0],[0,0]];return function(){function a(a,b){var c=this;this.tileInfo=a;this.fullExtent=
b;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var d=a.lods.slice();d.sort(function(a,b){return b.scale-a.scale});var e=this._lodInfos=d.map(function(c){return f.create(a,c,b)});d.forEach(function(a,b){c._infoByLevel[a.level]=e[b];c._infoByScale[a.scale]=e[b];c.scales[b]=a.scale},this);this._wrap=a.isWrappable}a.prototype.getTileBounds=function(a,b){var c=this._infoByLevel[b.level];return c?c.getTileBounds(a,b):a};a.prototype.getTileCoords=function(a,b){var c=this._infoByLevel[b.level];
return c?c.getTileCoords(a,b):a};a.prototype.getTileCoverage=function(a,b){void 0===b&&(b=192);var e=this.getClosestInfoForScale(a.scale),f=c.pool.acquire(e),g=this._wrap,k;k=Infinity;var m=-Infinity,z,x,p=f.spans;d[0][0]=d[0][1]=d[1][1]=d[3][0]=-b;d[1][0]=d[2][0]=a.size[0]+b;d[2][1]=d[3][1]=a.size[1]+b;for(b=0;b<d.length;b++){var n=d[b];a.toMap(n,n);n[0]=e.getColumnForX(n[0]);n[1]=e.getRowForY(n[1])}a=[];n=3;for(b=0;4>b;b++){if(d[b][1]!==d[n][1]){var A=h.create(d[b],d[n]);k=Math.min(A.ymin,k);m=
Math.max(A.ymax,m);void 0===a[A.ymin]&&(a[A.ymin]=[]);a[A.ymin].push(A)}n=b}if(null==k||null==m||100<m-k)return null;for(n=[];k<m;){null!=a[k]&&(n=n.concat(a[k]));z=Infinity;x=-Infinity;for(b=n.length-1;0<=b;b--)A=n[b],z=Math.min(z,A.getLeftCol()),x=Math.max(x,A.getRightCol());z=Math.floor(z);x=Math.floor(x);if(k>=e.first[1]&&k<=e.last[1])if(g)if(e.size[0]<e.worldSize[0])for(A=Math.floor(x/e.worldSize[0]),b=Math.floor(z/e.worldSize[0]);b<=A;b++)p.push(new l(k,Math.max(e.getFirstColumnForWorld(b),
z),Math.min(e.getLastColumnForWorld(b),x)));else p.push(new l(k,z,x));else z>e.last[0]||x<e.first[0]||(z=Math.max(z,e.first[0]),x=Math.min(x,e.last[0]),p.push(new l(k,z,x)));k+=1;for(b=n.length-1;0<=b;b--)A=n[b],A.ymax>=k?A.incrRow():n.splice(b,1)}return f};a.prototype.getTileIdAtParent=function(a,b){b=e.pool.acquire(b);var c=this._infoByLevel[b.level];if(a.resolution<c.resolution)throw Error("Cannot calculate parent tile. destination LOD's resolution "+a.resolution+" is not a parent resolution of "+
c.resolution);return a.resolution===c.resolution?b.id:e.getId(a.level,Math.floor(b.row*c.resolution/a.resolution+.01),Math.floor(b.col*c.resolution/a.resolution+.01),b.world)};a.prototype.getTileParentId=function(a){a=e.pool.acquire(a);var b=this._lodInfos.indexOf(this._infoByLevel[a.level])-1;if(0>b)return e.pool.release(a),null;b=this.getTileIdAtParent(this._lodInfos[b],a);e.pool.release(a);return b};a.prototype.getTileResolution=function(a){return(a=this._infoByLevel[a.level])?a.resolution:-1};
a.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?a.scale:-1};a.prototype.intersects=function(a,b){var c=e.pool.acquire(b);b=this._infoByLevel[c.level];var d=a.lodInfo;if(d.resolution>b.resolution){var f=e.pool.acquire(this.getTileIdAtParent(d,c)),g=d.denormalizeCol(f.col,f.world);b=a.spans.some(function(a){return a.row===f.row&&a.colFrom<=g&&a.colTo>=g});e.pool.release(c);e.pool.release(f);return b}if(d.resolution<b.resolution){var k=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],
b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,-Infinity]);a=k[0];var h=k[1],l=k[2],k=k[3],m=b.denormalizeCol(c.col,c.world),n=d.getColumnForX(b.getXForColumn(m)),A=d.getRowForY(b.getYForRow(c.row)),m=d.getColumnForX(b.getXForColumn(m+1))-1;b=d.getRowForY(b.getYForRow(c.row+1))-1;e.pool.release(c);return!(n>k||m<l||A>h||b<a)}var B=d.denormalizeCol(c.col,c.world);b=a.spans.some(function(a){return a.row===c.row&&a.colFrom<=
B&&a.colTo>=B});e.pool.release(c);return b};a.prototype.getClosestInfoForScale=function(a){var b=this.scales;this._infoByScale[a]||(a=b.reduce(function(b,c,d,e){return Math.abs(c-a)<Math.abs(b-a)?c:b},b[0]));return this._infoByScale[a]};return a}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(b,a,f,c){function e(a,b,c){a[0]=b;a[1]=c;return a}var l=new c("0/0/0/0");return function(){function a(a,b,c,
e,f,h,l,y,r,z,x,p){this.level=a;this.resolution=b;this.scale=c;this.origin=e;this.first=f;this.last=h;this.size=l;this.norm=y;this.worldStart=r;this.worldEnd=z;this.worldSize=x;this.wrap=p}a.create=function(b,c,h){var d=f.getInfo(b.spatialReference),k=[b.origin.x,b.origin.y],l=[b.size[0]*c.resolution,b.size[1]*c.resolution],m=[-Infinity,-Infinity],y=[Infinity,Infinity],r=[Infinity,Infinity];h&&(e(m,Math.max(0,Math.floor((h.xmin-k[0])/l[0])),Math.max(0,Math.floor((k[1]-h.ymax)/l[1]))),e(y,Math.max(0,
Math.floor((h.xmax-k[0])/l[0])),Math.max(0,Math.floor((k[1]-h.ymin)/l[1]))),e(r,y[0]-m[0]+1,y[1]-m[1]+1));var z;b.isWrappable?(b=[Math.ceil(Math.round(2*d.origin[1]/c.resolution)/b.size[0]),r[1]],d=[Math.floor((d.origin[0]-k[0])/l[0]),m[1]],h=[b[0]+d[0]-1,y[1]],z=!0):(d=m,h=y,b=r,z=!1);return new a(c.level,c.resolution,c.scale,k,m,y,r,l,d,h,b,z)};a.prototype.normalizeCol=function(a){if(!this.wrap)return a;var b=this.worldSize[0];return 0>a?b-1-Math.abs((a+1)%b):a%b};a.prototype.denormalizeCol=function(a,
b){return this.wrap?this.worldSize[0]*b+a:a};a.prototype.getWorldForColumn=function(a){return this.wrap?Math.floor(a/this.worldSize[0]):0};a.prototype.getFirstColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]};a.prototype.getLastColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]+this.size[0]-1};a.prototype.getColumnForX=function(a){return(a-this.origin[0])/this.norm[0]};a.prototype.getXForColumn=function(a){return this.origin[0]+a*this.norm[0]};a.prototype.getRowForY=
function(a){return(this.origin[1]-a)/this.norm[1]};a.prototype.getYForRow=function(a){return this.origin[1]-a*this.norm[1]};a.prototype.getTileBounds=function(a,b){l.set(b);var c=this.denormalizeCol(l.col,l.world),d=l.row;b=this.getXForColumn(c);var e=this.getYForRow(d+1),c=this.getXForColumn(c+1),d=this.getYForRow(d);a[0]=b;a[1]=e;a[2]=c;a[3]=d;return a};a.prototype.getTileCoords=function(a,b){l.set(b);Array.isArray(a)?e(a,this.getXForColumn(this.denormalizeCol(l.col,l.world)),this.getYForRow(l.row)):
(a.x=this.getXForColumn(this.denormalizeCol(l.col,l.world)),a.y=this.getYForRow(l.row));return a};return a}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],function(b,a,f,c,e){return function(){function a(a){this.lodInfo=a;this.spans=f.acquire()}a.prototype.release=function(){for(var a=0,b=this.spans;a<b.length;a++)e.pool.release(b[a]);f.release(this.spans)};a.prototype.forEach=function(a,b){var c=this.spans,
d=this.lodInfo,e=d.level;if(0!==c.length)for(var f=0;f<c.length;f++)for(var h=c[f],l=h.row,y=h.colTo,h=h.colFrom;h<=y;h++)a.call(b,e,l,d.normalizeCol(h),d.getWorldForColumn(h))};a.pool=new c(a,!0);return a}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(b,a,f){return function(){function a(a,b,c){this.row=a;this.colFrom=b;this.colTo=c}a.pool=new f(a,!0);return a}()})},"esri/views/2d/tiling/TileQueue":function(){define(["require","exports",
"../../../core/QueueProcessor"],function(b,a,f){function c(a,b){a.length=0;b.forEach(function(b){return a.push(b)});return a}var e=new Set,l=[],h=new Map;return function(){function a(a){var b=this;this.tileInfoView=null;this.tileInfoView=a.tileInfoView;this._queues=a.tileServers&&0<a.tileServers.length?a.tileServers.map(function(){return new f({concurrency:a.concurrency||6,process:a.process,peeker:function(a){return b._peek(a)}})}):[new f({concurrency:a.concurrency||6,process:a.process,peeker:function(a){return b._peek(a)}})]}
Object.defineProperty(a.prototype,"length",{get:function(){return this._queues.reduce(function(a,b){return a+b.length},0)},enumerable:!0,configurable:!0});a.prototype.clear=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].clear()};a.prototype.find=function(a,b){b=0;for(var c=this._queues;b<c.length;b++){var d=c[b].find(a);if(d)return d}};a.prototype.has=function(a){for(var b=0,c=this._queues;b<c.length;b++)if(c[b].has(a))return!0;return!1};a.prototype.pause=function(){for(var a=0,b=this._queues;a<
b.length;a++)b[a].pause()};a.prototype.push=function(a){return this._queues[a.row%this._queues.length].push(a)};a.prototype.reset=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].reset()};a.prototype.resume=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].resume()};a.prototype._peek=function(a){var b=this;if(!this.state)return a[0];var d=this.tileInfoView,f=Number.NEGATIVE_INFINITY,k=Number.POSITIVE_INFINITY;a.forEach(function(a){var c=b.tileInfoView.getTileScale(a);h.has(c)||(h.set(c,
[]),f=Math.max(c,f),k=Math.min(c,k));h.get(c).push(a);e.add(c)});var w=this.state.scale;h.has(w)||(c(l,e),l.sort(),w=l.reduce(function(a,b,c,d){return Math.abs(b-w)<Math.abs(a-w)?b:a},l[0]));w=Math.min(w,f);w=Math.max(w,k);a=h.get(w);var y=d.getClosestInfoForScale(w),r=y.getColumnForX(this.state.center[0]),z=y.getRowForY(this.state.center[1]);a.sort(function(a,b){var c=y.denormalizeCol(a.col,a.world),d=y.denormalizeCol(b.col,b.world);return Math.sqrt((r-c)*(r-c)+(z-a.row)*(z-a.row))-Math.sqrt((r-
d)*(r-d)+(z-b.row)*(z-b.row))});e.clear();h.clear();return a[0]};return a}()})},"esri/core/QueueProcessor":function(){define(["require","exports","dojo/Deferred","./Queue","./scheduling"],function(b,a,f,c,e){var l={};return function(){function a(a){this._apiPromises=new Map;this._processingItems=new Map;this._isPaused=!1;this._scheduledNextHandle=null;this.concurrency=1;this.ordered=!1;a.concurrency&&(this.concurrency=a.concurrency);this.ordered=!!a.ordered;this._queue=new c(a.peeker?{peeker:a.peeker}:
void 0);this.process=a.process}Object.defineProperty(a.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._queue.clear();var a=[];this._processingItems.forEach(function(b){return a.push(b.resultPromise)});this._processingItems.clear();a.forEach(function(a){return a.cancel()});a.length=0;this._apiPromises.forEach(function(b){return a.push(b)});this._apiPromises.clear();a.forEach(function(a){return a.cancel()});
this._cancelNext()};a.prototype.find=function(a,b){var c=this,d=void 0;this._apiPromises.forEach(function(e,f){a.call(b,f)&&(d=c._apiPromises.get(f).promise)});return d};a.prototype.has=function(a){return this._apiPromises.has(a)};a.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};a.prototype.push=function(a){var b=this;if(this._apiPromises.has(a))return this._apiPromises.get(a).promise;var c=new f(function(c){var d=b._processingItems.get(a);d?d.resultPromise.cancel(c):
(b._remove(a),b._scheduleNext())});this._add(a,c);this._scheduleNext();return c.promise};a.prototype.reset=function(){var a=[];this._processingItems.forEach(function(b){return a.push(b)});this._processingItems.clear();for(var b=0;b<a.length;b++){var c=a[b];c.resultPromise.isFulfilled()?this._processReset(c):c.resultPromise.cancel(l)}};a.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};a.prototype._scheduleNext=function(){var a=this;this._isPaused||this._scheduledNextHandle||
(this._scheduledNextHandle=e.schedule(function(){a._scheduledNextHandle=null;a._next()}))};a.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};a.prototype._processResult=function(a,b){this._remove(a.item);this._scheduleNext();a.dfd.resolve(b)};a.prototype._processError=function(a,b){b===l?this._processReset(a):(this._remove(a.item),this._scheduleNext(),a.dfd.reject(b))};a.prototype._processReset=function(a){this._remove(a.item);
this._add(a.item,a.dfd);this._scheduleNext()};a.prototype._processOrdered=function(a,b){var c=this,d=!1;if(!1===b.ok&&b.error===l)this._processReset(a);else{a.result=b;this._itemsToProcess||(this._itemsToProcess=[]);this._processingItems.forEach(function(a){d||(a.result?c._itemsToProcess.push(a):d=!0)});a=0;for(b=this._itemsToProcess;a<b.length;a++){var e=b[a];!1===e.result.ok?this._processError(e,e.result.error):this._processResult(e,e.result.value)}this._itemsToProcess.length=0}};a.prototype._process=
function(a){var b=this;if(null!=a){var c=this._apiPromises.get(a),d=this.process(a);if(d&&"function"===typeof d.then){var e={item:a,resultPromise:d,result:null,dfd:c};this._processingItems.set(a,e);this.ordered?d.then(function(a){return b._processOrdered(e,{ok:!0,value:a})},function(a){return b._processOrdered(e,{ok:!1,error:a})}):d.then(function(a){return b._processResult(e,a)},function(a){return b._processError(e,a)})}else c.resolve(d),this._remove(a);this._scheduleNext()}};a.prototype._add=function(a,
b){this._apiPromises.set(a,b);this._queue.push(a)};a.prototype._remove=function(a){this._queue.remove(a);this._apiPromises.delete(a);this._processingItems.delete(a)};a.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=null)};return a}()})},"esri/core/Queue":function(){define(["require","exports"],function(b,a){return function(){function a(a){this._items=[];this._itemSet=new Set;this._peeker=function(a){return a[0]};this._length=
0;a&&a.peeker&&(this._peeker=a.peeker)}Object.defineProperty(a.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};a.prototype.peek=function(){if(0!==this._length)return this._peeker(this._items)};a.prototype.push=function(a){this.contains(a)||this._add(a)};a.prototype.contains=function(a){return 0<this._length&&this._itemSet.has(a)};a.prototype.pop=function(){if(0!==this._length){var a=
this.peek();this._remove(a);return a}};a.prototype.remove=function(a){this.contains(a)&&this._remove(a)};a.prototype._add=function(a){this._items.push(a);this._itemSet.add(a);this._length++};a.prototype._remove=function(a){this._itemSet.delete(a);this._items.splice(this._items.indexOf(a),1);this._length--};return a}()})},"esri/views/2d/layers/features/controllers/MemoryController":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/assignHelper ../../../../../geometry ../../../../../core/Error ../../../../../core/Logger ../../../../../core/promiseUtils ../../../../../core/workers ../../../../../core/accessorSupport/decorators ../../../../../geometry/support/spatialReferenceUtils ../../../../../layers/support/FeatureProcessing ../../../../../tasks/support/QuantizationParameters ../../../../../tasks/support/Query ../../../ViewState ./BaseController ../../../tiling/TileInfoView ../../../tiling/TileQueue".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v,w,y,r,z,x,p){Object.defineProperty(a,"__esModule",{value:!0});var n=d.getLogger("esri.views.2d.layers.features.controllers.MemoryController");b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.type="memory";b._processingInMainThread=!1;b._promises=new Map;return b}f(b,a);b.prototype.initialize=function(){var a=this;this._tileQueue=new p({tileInfoView:new x(this.tileStore.tileInfo),process:function(b){return a._fetchFeatureSet(b)}});this._memorySource=
m.open(this.service.source,{client:this});this.handles.add(this.watch("processor",this._switchProcessor.bind(this)))};b.prototype.destroy=function(){this._promises.forEach(function(a){return a.cancel()});this._promises.clear()};Object.defineProperty(b.prototype,"processing",{get:function(){return v.fromWorker(this.configuration.processing)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"updating",{get:function(){return 0<this._promises.size},enumerable:!0,configurable:!0});b.prototype.setViewState=
function(a){this._viewState=r.fromJSON(a);this._tileQueue.pause();this._tileQueue.state=this._viewState;this._tileQueue.resume()};b.prototype.queryFeatures=function(a){return this._memorySource.invoke("queryFeatures",a)};b.prototype.queryFeatureCount=function(a){return this._memorySource.invoke("queryFeatureCount",a)};b.prototype.queryObjectIds=function(a){return this._memorySource.invoke("queryObjectIds",a)};b.prototype.queryExtent=function(a){return this._memorySource.invoke("queryExtent",a)};b.prototype.onTileAdded=
function(a){this._fetchTile(a)};b.prototype.onTileRemoved=function(a){var b=this._promises.get(a);b&&(b.cancel(),this._promises.delete(a),this.notifyChange("updating"))};b.prototype._switchProcessor=function(a,b){this.handles.remove("processor");this._tileQueue.pause();this._tileQueue.reset();a=0;for(b=this.tileStore.tiles;a<b.length;a++){var c=b[a];this._tileQueue.has(c.key)||this._fetchTile(c)}this._tileQueue.resume()};b.prototype._fetchTile=function(a){var b=this,c=this._tileQueue.push(a.key).then(function(c){b._cleanupPromise(a);
b.processor.onTileData(a,c)}).catch(function(c){b._cleanupPromise(a);"cancel"!==c.dojoType&&(b.processor.onTileError(a,c.message),n.error("query-error",{error:c}));return k.reject(c)});this._promises.set(a,c);this.notifyChange("updating")};b.prototype._fetchFeatureSet=function(a){var b=this,c=this.tileStore.findByKey(a);a=this._getQuantizationParameters(c);var d=this.processor.queryInfo,e=d.pixelBuffer*c.resolution,c=c.bounds.slice();c[0]-=e;c[1]-=e;c[2]+=e;c[3]+=e;return this._query(c,d,a).then(function(a){var b=
d.orderByFields;if(b){var b=b[0].split(" "),c=b[0];"DESC"===b[1]&&a.features.sort(function(a,b){return b.attributes[c]-a.attributes[c]})}return a}).then(function(a){return b._wrapPoints(a,d)}).then(function(a){return a.features.length?a:null})};b.prototype._query=function(a,b,c){var d=this,e=this._createQuery(a,c,b);return this.queryFeatures(e.toJSON()).then(function(a){return d._applyProcessing(a,e)})};b.prototype._createQuery=function(a,b,c){var d=new y;d.outFields=this.processor.queryInfo.outFields;
d.where=this.processor.queryInfo.definitionExpression||"1\x3d1";d.geometry=l.Extent.fromJSON({xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:this.spatialReference});this.service.capabilities.query.supportsQuantization?(d.quantizationParameters=b,"esriGeometryPolyline"===this.service.geometryType&&(d.maxAllowableOffset=b.tolerance)):d.maxAllowableOffset=b.tolerance;d.resultType="tile";d.returnExceededLimitFeatures=!1;d.returnGeometry=!0;d.returnCentroid=c.returnCentroid;d.orderByFields=c.orderByFields;
return d};b.prototype._applyProcessing=function(a,b){var c=this.processing;if(!c)return a;if(this._processingInMainThread)return this.remoteClient.invoke("executeProcessing",{query:b.toJSON(),featureSet:JSON.stringify(a)}).then(function(a){return JSON.parse(a)});try{var d=c.process(a,b,c.options);return d?d:k.reject(new h("FeatureLayer","invalid processing.process() method, returns nothing"))}catch(E){return this._processingInMainThread=!0,this.remoteClient.invoke("executeProcessing",{query:b.toJSON(),
featureSet:JSON.stringify(a)}).then(function(a){return JSON.parse(a)})}};b.prototype._getQuantizationParameters=function(a){return w.default.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:a.resolution,extent:{xmin:a.bounds[0],ymin:a.bounds[1],xmax:a.bounds[2],ymax:a.bounds[3],spatialReference:this.spatialReference}})};b.prototype._wrapPoints=function(a,b){if(0===a.features.length)return a;var c=b.returnCentroid;b=b.pixelBuffer;var d=a.geometryType,f=a.spatialReference,g=a.transform;if("esriGeometryPoint"!==
d&&"esriGeometryMultipoint"!==d&&!c||!t.isWrappable(f))return a;c=a.features;f=t.getInfo(f);g=Math.round((f.valid[1]-f.valid[0])/g.scale[0]);if(512===g){f=[];for(d=0;d<c.length;d++){var h=c[d],k=h.geometry,h=h.attributes;k&&(k.x<b?(k={geometry:e({},k),attributes:h},k.geometry.x+=g,f.push(k)):k.x>512-b&&(k={geometry:e({},k),attributes:h},k.geometry.x-=g,f.push(k)))}c.push.apply(c,f)}else for(f=0;f<c.length;f++)if(k=c[f].geometry)k.x<-b?k.x+=g:k.x>512+b&&(k.x-=g);return a};b.prototype._cleanupPromise=
function(a){this._promises.delete(a);this.notifyChange("updating")};c([g.property()],b.prototype,"configuration",void 0);c([g.property({readOnly:!0,dependsOn:["configuration"]})],b.prototype,"processing",null);c([g.property()],b.prototype,"updating",null);return b=c([g.subclass()],b)}(g.declared(z.default));a.default=b})},"esri/core/workers":function(){define(["require","exports","./workers/workers"],function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});for(var c in f)a.hasOwnProperty(c)||
(a[c]=f[c])})},"esri/core/workers/workers":function(){define("require exports dojo/sniff dojo/promise/all ../Logger ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),function(b,a,f,c,e,l,h,d,k){function m(){if(r)return r;for(var a=g+t,b=[],d=function(a){var c=k.create(a).then(function(b){return y[a]=b});b.push(c)},e=0;e<a;e++)d(e);return r=c(b).then(function(){})}Object.defineProperty(a,"__esModule",{value:!0});a.Connection=h;a.RemoteClient=d;(h=f("host-browser")?navigator.hardwareConcurrency:
0)||(h=f("safari")&&f("mac")||f("trident")?8:2);var g=f("esri-workers-debug")?1:Math.max(1,Math.ceil(h/2)),t=f("esri-workers-debug")?1:Math.max(1,Math.floor(h/2)),v=e.getLogger("esri.core.workers"),w=0,y=[];a.initialize=function(){m()};a.open=function(c,d,e){void 0===d&&(d={});if(Array.isArray(c))return new a.Connection(c.map(function(b){return new a.RemoteClient(b,d.client)}));if("string"!==typeof c){v.warn("workers-open:signature-deprecated","DEPRECATED: workers.open() changed signature.");var f=
c;c=d;d={client:f,strategy:e?"dedicated":"distributed"}}var h=d.strategy||"distributed";return"local"===h?l.create(function(d){b([c],function(b){d(a.RemoteClient.connect(b))})}).then(function(b){return new a.Connection([new a.RemoteClient(b,d.client)])}):m().then(function(){if("dedicated"===h){var b=g+w++;w%=t;return y[b].open(c).then(function(b){return new a.Connection([new a.RemoteClient(b,d.client)])})}return l.all(y.map(function(a){return a.open(c)})).then(function(b){return new a.Connection(b.map(function(b){return new a.RemoteClient(b,
d.client)}))})})};a.terminate=function(){for(var a=0;a<y.length;a++)y[a]&&y[a].terminate();y.length=0};var r})},"esri/core/workers/Connection":function(){define(["require","exports","../promiseUtils"],function(b,a,f){return function(){function a(a){this._clientIdx=0;this._clients=a}a.prototype.broadcast=function(a,b,c){for(var d=[],e=0,f=this._clients;e<f.length;e++)d.push(f[e].invoke(a,b,c));return d};a.prototype.close=function(){for(var a=0,b=this._clients;a<b.length;a++)b[a].close();this._clients=
[]};a.prototype.invoke=function(a,b,c,d){var e=d&&d.client;if(!this._clients||!this._clients.length)return f.reject(Error("Connection closed"));null!=e&&-1!==this._clients.indexOf(e)||this._clients.some(function(a){return a.isBusy()?!1:(e=a,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,e=this._clients[this._clientIdx]);a=e.invoke(a,b,c);d&&(d.client=e);return a};a.prototype.openPorts=function(){return f.all(this._clients.map(function(a){return a.openPort()}))};return a}()})},"esri/core/workers/WorkerOwner":function(){define("require exports dojo/Deferred ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),
function(b,a,f,c,e,l,h,d,k){var m=l.getLogger("esri.core.workers"),g=d.MessageType.CANCEL,t=d.MessageType.INVOKE,v=d.MessageType.OPEN,w=d.MessageType.OPENED,y=d.MessageType.RESPONSE;return function(){function a(a,b){this._outJobs=new Map;this._inJobs=new Map;this.worker=a;this.id=b;a.addEventListener("message",this._onMessage.bind(this));a.addEventListener("error",function(a){a.preventDefault();m.error(a)})}a.create=function(b){return k.createWorker().then(function(c){return new a(c,b)})};a.prototype.terminate=
function(){this.worker.terminate()};a.prototype.open=function(a){var b=this,c=d.newJobId(),e=new f(function(a){b._outJobs["delete"](c);b._post({type:g,jobId:c})});this._outJobs.set(c,e);this._post({type:v,jobId:c,modulePath:a});return e.promise};a.prototype._onMessage=function(a){if(a=d.receiveMessage(a))switch(a.type){case w:case y:this._onResponse(a);break;case g:this._onCancel(a);break;case t:this._onInvoke(a)}};a.prototype._onCancel=function(a){(a=this._inJobs.get(a.jobId))&&a.cancel()};a.prototype._onInvoke=
function(a){var b=this,e=a.methodName,f=a.jobId;a=a.data;var g=this._inJobs,k=c.workerMessages[e],l;try{if("function"!==typeof k)throw new TypeError(e+" is not a function");l=k.call(null,a)}catch(F){this._post({type:y,jobId:f,error:d.toInvokeError(F)});return}h.isThenable(l)?(g.set(f,l),l.then(function(a){g["delete"](f);b._post({type:y,jobId:f},a)}).catch(function(a){g["delete"](f);a||(a={message:"Error encountered at method"+e});a.dojoType&&"cancel"===a.dojoType||b._post({type:y,jobId:f,error:d.toInvokeError(a)})})):
this._post({type:y,jobId:f},l)};a.prototype._onResponse=function(a){var b=a.jobId,c=a.error;a=a.data;var d=this._outJobs.get(b);d&&(this._outJobs["delete"](b),c?d.reject(e.fromJSON(JSON.parse(c))):d.resolve(a))};a.prototype._post=function(a,b,c){return d.postMessage(this.worker,a,b,c)};return a}()})},"esri/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper dojo/_base/kernel ../../config ../../request ../Logger ../promiseUtils ../sniff ../urlUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v){function w(){return C?C:C=d.create(function(a){var b=new MessageChannel,c=b.port1,d=b.port2,e=function(b){k.add("esri-workers-supports-transfer-arraybuffer",Number(null!=b.data));c.removeEventListener("message",e);c.close();d.close();k("esri-workers-supports-transfer-arraybuffer")||x.warn("This browser doesn't support ArrayBuffer transfer.");a()};c.addEventListener("message",e);c.start();d.start();b=new ArrayBuffer(0);d.postMessage(b,[b])})}function y(a){return w().then(function(){return d.create(function(b){function d(l){if(l=
t.receiveMessage(l))switch(l.type){case B:l=a;var m=e.workers.loaderUrl||g.DEFAULT_LOADER_URL,r;null!=e["default"]?(r=f({},e),delete r["default"],r=JSON.parse(JSON.stringify(r))):r=JSON.parse(JSON.stringify(e));var p=e.workers.loaderConfig,p=g.default({baseUrl:p.baseUrl,locale:c.locale,has:f({"esri-cors":1,"dojo-test-sniff":0,"config-deferredInstrumentation":0,"host-webworker":1,"events-keypress-typed":0,"esri-workers-supports-transfer-arraybuffer":k("esri-workers-supports-transfer-arraybuffer")},
p.has),map:f({},p.map),paths:f({},p.paths),packages:p.packages||[]});l.postMessage({type:A,configure:{esriConfig:r,loaderUrl:m,loaderConfig:p}});break;case n:a.removeEventListener("message",d),a.removeEventListener("error",h),b(a)}}function h(b){b.preventDefault();a.removeEventListener("message",d);a.removeEventListener("error",h);x.warn("Failed to create Worker. Fallback to execute module in main thread",b);a=new v;a.addEventListener("message",d);a.addEventListener("error",h)}a.addEventListener("message",
d);a.addEventListener("error",h)})})}Object.defineProperty(a,"__esModule",{value:!0});var r=m.normalize(b.toUrl("./worker.js")),z=!m.hasSameOrigin(r,location.href),x=h.getLogger("esri.core.workers"),p=null,n=t.MessageType.CONFIGURED,A=t.MessageType.CONFIGURE,B=t.MessageType.HANDSHAKE,C=null;a.createWorker=function(){if(!k("esri-workers"))return y(new v);if(!z){var a=void 0;try{a=new Worker(r)}catch(D){x.warn("Failed to create Worker. Fallback to execute module in main thread",event),a=new v}return y(a)}p||
(p=l(r,{responseType:"text"}));return p.then(function(a){return new Worker(URL.createObjectURL(new Blob([a.data],{type:"text/javascript"})))}).catch(function(a){x.warn("Failed to create Worker. Fallback to execute module in main thread",a);return new v}).then(function(a){return y(a)})}})},"esri/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper","dojo/has","../urlUtils"],function(b,a,f,c,e){Object.defineProperty(a,"__esModule",{value:!0});c=c("esri-built")?
"dojo/dojo-lite.js":"dojo/dojo.js";a.DEFAULT_LOADER_URL=e.makeAbsolute(e.removeQueryParameters(b.toUrl(c)));a.DEFAULT_CONFIG={baseUrl:function(){var a=e.removeQueryParameters(b.toUrl("dojo/x.js"));return e.makeAbsolute(a.slice(0,a.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},{name:"globalize",main:"dist/globalize"},{name:"maquette",main:"dist/maquette.umd"},{name:"maquette-css-transitions",
main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}};a.default=function(c){var h={async:c.async,isDebug:c.isDebug,locale:c.locale,baseUrl:c.baseUrl,has:f({},c.has),map:f({},c.map),packages:c.packages&&c.packages.concat()||[],paths:f({},c.paths)};c.hasOwnProperty("async")||
(h.async=!0);c.hasOwnProperty("isDebug")||(h.isDebug=!1);c.baseUrl||(h.baseUrl=a.DEFAULT_CONFIG.baseUrl);a.DEFAULT_CONFIG.packages.forEach(function(a){a:{for(var c=h.packages,d=0;d<c.length;d++)if(c[d].name===a.name)break a;a=f({},a);d=e.removeQueryParameters(b.toUrl(a.name+"/x.js"));d=d.slice(0,d.length-5);a.location=e.makeAbsolute(d);c.push(a)}});c=h.map=h.map||{};for(var d=0,k=Object.keys(a.DEFAULT_CONFIG.map);d<k.length;d++){var l=k[d];c[l]||(c[l]=a.DEFAULT_CONFIG.map[l])}return h}})},"esri/core/workers/WorkerFallback":function(){define(["require",
"exports","dojo/has","../global","./utils"],function(b,a,f,c,e){var l=function(){return function(){var a=this,b=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(c){a[c]=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];return b[c].apply(b,a)}})}}(),h=c.MutationObserver||c.WebKitMutationObserver,d=function(){var a;if(c.process&&c.process.nextTick)a=function(a){c.process.nextTick(a)};else if(c.Promise)a=function(a){c.Promise.resolve().then(a)};
else if(h){var b=[],d=document.createElement("div");(new h(function(){for(;0<b.length;)b.shift()()})).observe(d,{attributes:!0});a=function(a){b.push(a);d.setAttribute("queueStatus","1")}}return a}();return function(){function a(){this._dispatcher=new l;this._isInitialized=!1;this._workerPostMessage({type:e.MessageType.HANDSHAKE})}a.prototype.terminate=function(){};Object.defineProperty(a.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(a){this._onmessageHandler&&
this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=a)&&this.addEventListener("message",a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(a){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=a)&&this.addEventListener("error",a)},enumerable:!0,configurable:!0});a.prototype.postMessage=function(a,b){var c=this;d(function(){c._workerMessageHandler(new MessageEvent("message",
{data:a}))})};a.prototype.dispatchEvent=function(a){return this._dispatcher.dispatchEvent(a)};a.prototype.addEventListener=function(a,b,c){this._dispatcher.addEventListener(a,b,c)};a.prototype.removeEventListener=function(a,b,c){this._dispatcher.removeEventListener(a,b,c)};a.prototype._workerPostMessage=function(a,b){var c=this;d(function(){c.dispatchEvent(new MessageEvent("message",{data:a}))})};a.prototype._workerMessageHandler=function(a){var c=this;if(a=e.receiveMessage(a)){var d=a.jobId;switch(a.type){case e.MessageType.CONFIGURE:this._isInitialized||
this._workerPostMessage({type:e.MessageType.CONFIGURED});break;case e.MessageType.OPEN:b(["esri/core/workers/RemoteClient",a.modulePath],function(a,b){a=a.connect(b);c._workerPostMessage({type:e.MessageType.OPENED,jobId:d,data:a})})}}};return a}()})},"esri/views/2d/layers/features/processors/SymbolProcessor":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../renderers ../../../../../core/executeAsync ../../../../../core/MapPool ../../../../../core/promiseUtils ../../../../../core/SetPool ../../../../../core/accessorSupport/decorators ../../../../../geometry/SpatialReference ../../../../../layers/support/Field ../../../../../renderers/support/jsonUtils ../../../engine/webgl/rendererInfoUtils ../../../engine/webgl/Utils ../../../engine/webgl/mesh/factories/WGLMeshFactory ./BaseProcessor".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v,w,y,r,z){function x(a,b){y.isMarkerSymbol(a)||y.isLineSymbol(a)?b.add(a):y.isFillSymbol(a)&&(b.add(a),a.outline&&"none"!==a.outline.style&&b.add(a.outline))}function p(a,b){b.has(a)||b.set(a,new Set);var c=a.text;a=b.get(a);b=c.length;for(var d=0;d<b;d++){var e=c.charCodeAt(d);a.add(e)}}Object.defineProperty(a,"__esModule",{value:!0});b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b._symbolToMosaicItemMap=new Map;b._visualSetPromises=new Map;
b.type="symbol";return b}f(b,a);b.prototype.destroy=function(){this._visualSetPromises.forEach(function(a,b){a.cancel()});this._visualSetPromises.clear();this._symbolToMosaicItemMap.clear();this.notifyChange("updating")};Object.defineProperty(b.prototype,"factory",{get:function(){if(!this.configuration)return null;var a={fields:this.service.fields.map(function(a){return t.fromJSON(a)})};return r.default.from(this.renderer,a,this._symbolToMosaicItemMap,this.service.geometryType,this.service.objectIdField,
g.fromJSON(this.spatialReference),this.configuration.devicePixelRatio)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"queryInfo",{get:function(){var a=this.configuration,b=a.renderer,c=a.definitionExpression,d=a.outFields,e=a.gdbVersion,a=a.historicMoment,f=this.service.geometryType,g=this._getReturnCentroid(this.rendererInfo.renderer),f="esriGeometryPoint"===f||"esriGeometryMultipoint"===f||g?20:0,h=null;(b=b.visualVariables)&&b.some(function(a){if("size"===a.type&&a.field&&
!a.normalizationField)return h=[a.field+" DESC"],!0});return{definitionExpression:c,orderByFields:h,outFields:d,pixelBuffer:f,returnCentroid:g,returnGeometry:!0,gdbVersion:e,historicMoment:a}},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"renderer",{get:function(){return this.configuration?v.fromJSON(this.configuration.renderer):null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"rendererInfo",{get:function(){return this.configuration?w.createRendererInfo(v.fromJSON(this.configuration.renderer),
this.tileStore.spatialReference,{fields:this.service.fields}):null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"updating",{get:function(){return 0<this._visualSetPromises.size},enumerable:!0,configurable:!0});b.prototype.onTileData=function(a,b){var c=this;b=b&&b.features&&0!==b.features.length?this._processFeatures(a,b.features).then(function(b){return c.remoteClient.invoke("tileRenderer.onTileData",{tileKey:a.id,data:b&&b.message||null},b&&b.transferList||void 0)}).catch(function(b){return c._handleError(a,
b)}):this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:a.id,data:null});this._visualSetPromises.set(a,b);b.then(function(){return c._cleanPromise(a)},function(){return c._cleanPromise(a)});this.notifyChange("updating")};b.prototype.onTileError=function(a,b){var c=this;b=this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:a.id,error:b});this._visualSetPromises.set(a,b);b.then(function(){return c._cleanPromise(a)},function(){return c._cleanPromise(a)});this.notifyChange("updating")};
b.prototype.onTileUpdate=function(a,b){var c=this,d;d=this._processFeatures(a,b.addOrUpdate).then(function(a){return c.remoteClient.invoke("tileRenderer.onTileUpdate",{tileId:b.tileId,data:{remove:b.remove,addOrUpdate:a&&a.message||null}},a&&a.transferList||void 0)}).catch(function(b){return c._handleError(a,b)});this._visualSetPromises.set(a,d);d.then(function(){return c._cleanPromise(a)},function(){return c._cleanPromise(a)});this.notifyChange("updating")};b.prototype.onTileAdded=function(a){};
b.prototype.onTileRemoved=function(a){var b=this._visualSetPromises;b.has(a)&&(b.get(a).cancel(),b.delete(a),this.notifyChange("updating"))};b.prototype._cleanPromise=function(a){this._visualSetPromises.delete(a);this.notifyChange("updating")};b.prototype._processFeatures=function(a,b){var c=this;return b&&b.length?this._getMosaicItems(b).then(function(){return c._writeFeatures(a,b)}):d.resolve(null)};b.prototype._writeFeatures=function(a,b){var c=this,d=0,e=this.factory,f=e.createMeshData(b.length),
g={viewingMode:"",scale:a.scale};return l(function(){var a=b[d++],c=d===b.length;e.write(f,a,g);return c}).then(function(){return c._encodeDisplayData(f)})};b.prototype._encodeDisplayData=function(a){var b={},c=[];a.encode(b,c);return{message:b,transferList:c}};b.prototype._handleError=function(a,b){if(b&&"cancel"!==b.dojoType)return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:a.id,error:b.message})};b.prototype._getReturnCentroid=function(a){function b(a){if(!a)return!1;a=a.type;
return"simple-marker"===a||"picture-marker"===a||"text"===a}if("esriGeometryPolygon"!==this.service.geometryType)return!1;switch(a.type){case "simple":return b(a.symbol);case "unique-value":return b(a.defaultSymbol)||a.uniqueValueInfos.some(function(a){return b(a.symbol)});case "class-breaks":return b(a.defaultSymbol)||a.classBreakInfos.some(function(a){return b(a.symbol)});default:return!0}};b.prototype._getMosaicItems=function(a){a=k.acquire();for(var b=h.acquire(),c=0,f=this.renderer.getSymbols();c<
f.length;c++){var g=f[c];y.isTextSymbol(g)?p(g,b):x(g,a)}(this.renderer instanceof e.UniqueValueRenderer||this.renderer instanceof e.ClassBreaksRenderer)&&(c=this.renderer.backgroundFillSymbol)&&x(c,a);var l=this._symbolToMosaicItemMap,n=h.acquire(),m=[],A=0;a.forEach(function(a){l.has(a.id)||(n.set(A,a),m.push({symbol:a.toJSON(),id:A}),A++)});b.forEach(function(a,b){if(l.has(b.id)){var c=l.get(b.id).glyphMosaicItems,d=[];a.forEach(function(a){if(c&&c.length<a||!c[a])d[a]=a});0<d.length&&(n.set(A,
b),m.push({symbol:b.toJSON(),id:A,glyphIds:d}),A++)}else{n.set(A,b);var e=[];a.forEach(function(a){return e.push(a)});m.push({symbol:b.toJSON(),id:A,glyphIds:e});A++}});if(0<m.length)return this.remoteClient.invoke("tileRenderer.getMaterialItems",m).then(function(a){for(var b=0;b<a.length;b++){var c=a[b],d=n.get(c.id);if(d)if(y.isTextSymbol(d))if(l.has(d.id)){if(d=l.get(d.id).glyphMosaicItems,c=c.mosaicItem.glyphMosaicItems)for(var e=0;e<c.length;e++)null!=c[e]&&(d[e]=c[e])}else l.set(d.id,c.mosaicItem);
else l.set(d.id,c.mosaicItem)}h.release(n)});k.release(a);h.release(b);return d.resolve()};c([m.property()],b.prototype,"configuration",void 0);c([m.property({dependsOn:["configuration"]})],b.prototype,"factory",null);c([m.property({constructOnly:!0})],b.prototype,"queryInfo",null);c([m.property({dependsOn:["configuration"]})],b.prototype,"renderer",null);c([m.property({dependsOn:["configuration"]})],b.prototype,"rendererInfo",null);c([m.property({readOnly:!0})],b.prototype,"updating",null);return b=
c([m.subclass()],b)}(m.declared(z.default));a.default=b})},"esri/renderers":function(){define("require exports ./renderers/ClassBreaksRenderer ./renderers/HeatmapRenderer ./renderers/Renderer ./renderers/SimpleRenderer ./renderers/UniqueValueRenderer ./renderers/support/jsonUtils".split(" "),function(b,a,f,c,e,l,h,d){Object.defineProperty(a,"__esModule",{value:!0});a.ClassBreaksRenderer=f;a.HeatmapRenderer=c;a.BaseRenderer=e;a.SimpleRenderer=l;a.UniqueValueRenderer=h;a.isRenderer=function(b){return b instanceof
a.BaseRenderer};a.fromJSON=d.fromJSON})},"esri/renderers/ClassBreaksRenderer":function(){define("../core/declare ../core/lang ../core/kebabDictionary ../core/Error ../core/Logger ../core/accessorSupport/ensureType dojo/_base/lang ../support/arcadeUtils ../symbols/Symbol ../symbols/PolygonSymbol3D ../symbols/support/jsonUtils ../symbols/support/typeUtils ./Renderer ./support/LegendOptions ./support/ClassBreakInfo".split(" "),function(b,a,f,c,e,l,h,d,k,m,g,t,v,w,y){var r=e.getLogger("esri.renderers.ClassBreaksRenderer");
w=w.LegendOptions;y=y.ClassBreakInfo;var z=f({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),x=l.ensureType(y),p=b(v,{declaredClass:"esri.renderers.ClassBreaksRenderer",properties:{backgroundFillSymbol:{types:{base:k,key:"type",typeMap:{"simple-fill":t.types.typeMap["simple-fill"],"picture-fill":t.types.typeMap["picture-fill"],"polygon-3d":t.types.typeMap["polygon-3d"]}},value:null,json:{origins:{"web-scene":{read:g.read,write:{target:{backgroundFillSymbol:{type:m}},
writer:g.writeTarget}}},read:g.read,write:g.writeTarget}},classBreakInfos:{type:[y],json:{read:function(a,b,c){if(Array.isArray(a)){var d=b.minValue;return a.map(function(a){var b=new y;b.read(a,c);null==b.minValue&&(b.minValue=d);null==b.maxValue&&(b.maxValue=b.minValue);d=b.maxValue;return b})}},write:function(a,b,c,d){a=a.map(function(a){return a.write({},d)});this._areClassBreaksConsecutive()&&a.forEach(function(a){delete a.classMinValue});b[c]=a}}},minValue:{type:Number,readOnly:!0,dependsOn:["classBreakInfos"],
get:function(){return this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0},json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}},defaultLabel:{type:String,value:null,json:{write:!0}},defaultSymbol:{types:t.rendererTypes,value:null,json:{origins:{"web-scene":{read:g.read,write:{target:{defaultSymbol:{types:t.rendererTypes3D}},writer:g.writeTarget}}},read:g.read,write:g.writeTarget}},valueExpression:{type:String,
value:null,json:{write:!0}},valueExpressionTitle:{type:String,value:null,json:{write:!0}},compiledFunc:{dependsOn:["valueExpression"],get:function(){return d.createFunction(this.valueExpression)}},legendOptions:{type:w,value:null,json:{write:!0}},field:{value:null,cast:function(a){return null==a?a:"function"===typeof a?a:l.ensureString(a)},json:{type:String,write:function(a,b,d,e){"string"===typeof a?b[d]=a:e&&e.messages?e.messages.push(new c("property:unsupported","ClassBreaksRenderer.field set to a function cannot be written to JSON")):
r.error(".field: cannot write field to JSON since it's not a string value")}}},isMaxInclusive:!0,normalizationField:{type:String,value:null,json:{write:!0}},normalizationTotal:{type:Number,value:null,json:{write:!0}},normalizationType:{type:String,value:null,dependsOn:["normalizationField","normalizationTotal"],get:function(){var a=this._get("normalizationType"),b=!!this.normalizationField,c=null!=this.normalizationTotal;if(b||c)a=b&&"field"||c&&"percent-of-total",b&&c&&console.warn("warning: both normalizationField and normalizationTotal are set!");
else if("field"===a||"percent-of-total"===a)a=null;return a},json:{read:z.fromJSON,write:function(a,b){if(a=z.toJSON(a))b.normalizationType=a}}},requiredFields:{dependsOn:["field","normalizationField","valueExpression"]},type:{value:"class-breaks",json:{write:function(a,b){b.type="classBreaks"}}}},constructor:function(){this.classBreakInfos=[]},addClassBreakInfo:function(b,c,d){b="number"===typeof b?new y({minValue:b,maxValue:c,symbol:d}):x(a.clone(b));this.classBreakInfos.push(b);1===this.classBreakInfos.length&&
this.notifyChange("minValue")},removeClassBreakInfo:function(a,b){var c,d,e=this.classBreakInfos.length;for(d=0;d<e;d++)if(c=[this.classBreakInfos[d].minValue,this.classBreakInfos[d].maxValue],c[0]==a&&c[1]==b){this.classBreakInfos.splice(d,1);break}},getBreakIndex:function(a,b){var c=this.field,e=a.attributes,f=this.classBreakInfos.length,g=this.isMaxInclusive;if(this.valueExpression)a=d.executeFunction(this.compiledFunc,d.createExecContext(a,d.getViewInfo(b)));else if(h.isFunction(c))a=c(a);else if(a=
parseFloat(e[c]),b=this.normalizationType)if(c=parseFloat(this.normalizationTotal),e=parseFloat(e[this.normalizationField]),"log"===b)a=Math.log(a)*Math.LOG10E;else if("percent-of-total"===b&&!isNaN(c))a=a/c*100;else if("field"===b&&!isNaN(e)){if(isNaN(a)||isNaN(e))return-1;a/=e}if(null!=a&&!isNaN(a)&&"number"===typeof a)for(e=0;e<f;e++)if(b=[this.classBreakInfos[e].minValue,this.classBreakInfos[e].maxValue],b[0]<=a&&(g?a<=b[1]:a<b[1]))return e;return-1},getClassBreakInfo:function(a,b){a=this.getBreakIndex(a,
b);return-1!==a?this.classBreakInfos[a]:null},getSymbol:function(a,b){a=this.getBreakIndex(a,b);return-1<a?this.classBreakInfos[a].symbol:this.defaultSymbol},getSymbols:function(){var a=[];this.classBreakInfos.forEach(function(b){b.symbol&&a.push(b.symbol)});this.defaultSymbol&&a.push(this.defaultSymbol);return a},clone:function(){return new p({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&
this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:a.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:a.clone(this.visualVariables),legendOptions:a.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})},collectRequiredFields:function(a){this.inherited(arguments);
[this.field,this.normalizationField].forEach(function(b){b&&(a[b]=!0)});this.valueExpression&&d.extractFieldNames(this.valueExpression).forEach(function(b){a[b]=!0})},_areClassBreaksConsecutive:function(){for(var a=this.classBreakInfos,b=1;b<a.length;b++)if(a[b-1].maxValue!==a[b].minValue)return!1;return!0}});return p})},"esri/renderers/Renderer":function(){define("../core/declare ../core/Accessor ../core/JSONSupport ../core/kebabDictionary ../core/screenUtils ../core/lang ../core/Error ../support/arcadeUtils ../webdoc/support/opacityUtils dojo/_base/lang ../Color ./support/utils ./support/AuthoringInfo".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v){var w=c({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),y=c({widthAndDepth:"width-and-depth"}),r=c({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});c({classedSize:"classed-size",classedColor:"classed-color",univariateColorSize:"univariate-color-size"});
c({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"});c({percentTotal:"percent-of-total"});var z=Math.PI,x=k.opacityToTransparency,p=k.transparencyToOpacity;return b([a,f],{declaredClass:"esri.renderers.Renderer",properties:{authoringInfo:{type:v,value:null,json:{write:!0}},requiredFields:{dependsOn:["visualVariables"],get:function(){var a=Object.create(null);
this.collectRequiredFields(a);return Object.keys(a).sort()}},type:{type:String,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}},visualVariables:{json:{read:{source:["visualVariables","rotationType","rotationExpression"],reader:function(a,b){return this._readVariables(a,b)}},write:function(a,b,c,d){var e=[];a.forEach(function(a,b){"size"===a.type?e.push(this._writeSizeInfo(a,d,b)):"color"===a.type?e.push(this._writeColorInfo(a,d,b)):"opacity"===a.type?e.push(this._writeOpacityInfo(a,d,b)):"rotation"===
a.type&&e.push(this._writeRotationInfo(a,d,b))},this);b.visualVariables=e}}}},constructor:function(){this._cache={}},_rotationRE:/^\[([^\]]+)\]$/i,_viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,_visualVariablesSetter:function(a){var b=this._cache;this.visualVariables&&this.visualVariables.forEach(function(a,c){b.hasOwnProperty(c)&&(b[c]=null)},this);a&&a.some(function(a){return!!a.target})&&a.sort(function(a,b){return a.target===b.target?0:a.target?1:-1});a&&a.forEach(function(a,c){"color"===
a.type?b[c]=this._processColorInfo(a):"opacity"===a.type?b[c]=this._processOpacityInfo(a):"size"===a.type?b[c]=this._processSizeInfo(a):"rotation"===a.type&&(b[c]=this._processRotationInfo(a))},this);this._set("visualVariables",a)},getSymbol:function(a,b){},getVisualVariableValues:function(a,b){var c=this.visualVariables,d;c&&(d=c.map(function(c){var d,e=c.type,f=e+"Info";b=m.mixin({},b);b[f]=c;switch(e){case "size":d=this.getSize(a,b);break;case "color":d=this.getColor(a,b);break;case "opacity":d=
this.getOpacity(a,b);break;case "rotation":d=this.getRotationAngle(a,b)}return{variable:c,value:d}},this).filter(function(a){return null!=a.value},this));return d},hasVisualVariables:function(a,b){return a?!!this.getVisualVariablesForType(a,b):!!(this.getVisualVariablesForType("size",b)||this.getVisualVariablesForType("color",b)||this.getVisualVariablesForType("opacity",b)||this.getVisualVariablesForType("rotation",b))},getVisualVariablesForType:function(a,b){var c=this.visualVariables,d;c&&(d=c.filter(function(c){return c.type===
a&&("string"===typeof b?c.target===b:!1===b?!c.target:!0)}))&&0===d.length&&(d=void 0);return d},getSize:function(a,b){var c=this._getVarInfo(b&&b.sizeInfo,"size"),d=c.variable,c=this._cache[c.cacheKey],e=null;if(d)var f=d.minSize,e=d.maxSize,f="object"===typeof f&&f?this._getSize(a,f,c&&c.minSize,b):f,e="object"===typeof e&&e?this._getSize(a,e,c&&c.maxSize,b):e,e=this._getSize(a,d,c&&c.root,b,[f,e]);return e},getSizeRangeAtScale:function(a,b){var c;a=this._getVarInfo(a,"size");var d=this._cache[a.cacheKey],
e={scale:b};if((a=a.variable)&&b){b=a.minSize;var f=a.maxSize;a="object"===typeof b&&b?this._getSize({},b,d&&d.minSize,e):b;d="object"===typeof f&&f?this._getSize({},f,d&&d.maxSize,e):f;if(null!=a||null!=d)a>d&&(c=d,d=a,a=c),c={minSize:a,maxSize:d}}return c},getColor:function(a,b){var c=this._getVarInfo(b&&b.colorInfo,"color");return this._getColorComponent(a,c.variable,this._cache[c.cacheKey],b)},getOpacity:function(a,b){var c=this._getVarInfo(b&&b.opacityInfo,"opacity");return this._getColorComponent(a,
c.variable,this._cache[c.cacheKey],b,!0)},getRotationAngle:function(a,b){var c=this._getVarInfo(b&&b.rotationInfo,"rotation"),e=c.variable,f=this._cache[c.cacheKey],g=e.axis||"heading",c="heading"===g&&"arithmetic"===e.rotationType?90:0,g="heading"===g&&"arithmetic"===e.rotationType?-1:1,e=e.field,f=f&&f.compiledFunc,h=a.attributes,k=0;if(e||f)f?k=d.executeFunction(f,d.createExecContext(a,d.getViewInfo(b))):m.isFunction(e)?k=e.apply(this,arguments):h&&(k=h[e]||0),k="number"!==typeof k||isNaN(k)?null:
c+g*k;return k},collectRequiredFields:function(a){var b=[];this.visualVariables&&(b=b.concat(this.visualVariables));b.forEach(function(b){b&&(b.field&&(a[b.field]=!0),b.normalizationField&&(a[b.normalizationField]=!0),b.valueExpression&&d.extractFieldNames(b.valueExpression).forEach(function(b){a[b]=!0}))})},_getVarInfo:function(a,b){var c;a&&a.type===b&&this.visualVariables?(c=this.visualVariables.indexOf(a),a=this.visualVariables[c]):this.visualVariables&&(a=(a=this.getVisualVariablesForType(b))&&
a[0],c=this.visualVariables.indexOf(a));return{variable:a,cacheKey:c}},_readSizeInfo:function(a){a.axis&&(a.axis=y.fromJSON(a.axis));a.valueUnit&&(a.valueUnit=r.fromJSON(a.valueUnit));return a},_readColorInfo:function(a){a&&(a.colors&&a.colors.forEach(function(b,c){m.isArray(b)?a.colors[c]=g.fromJSON(b):a.colors[c]=new g(b)}),a.stops&&a.stops.forEach(function(b,c){b.color&&m.isArray(b.color)?a.stops[c].color=g.fromJSON(b.color):b.color&&(a.stops[c].color=new g(b.color))}));return a},_readOpacityInfo:function(a){var b;
a&&(b=m.mixin({},a),b.transparencyValues&&(b.opacityValues=b.transparencyValues.map(p),delete b.transparencyValues),b.stops&&(b.stops=b.stops.map(function(a){a=m.mixin({},a);a.opacity=p(a.transparency);delete a.transparency;return a})));return b},_readVariables:function(a,b){a&&(a=a.map(function(a){a=l.clone(a);a.type=w.fromJSON(a.type);"size"===a.type?a=this._readSizeInfo(a):"color"===a.type?a=this._readColorInfo(a):"opacity"===a.type&&(a=this._readOpacityInfo(a));return a},this));var c=b.rotationType;
if(b=b.rotationExpression)c={type:"rotation",rotationType:c},(b=b.match(this._rotationRE))&&b[1]&&(c.field=b[1],a||(a=[]),a.push(c));return a},_createCache:function(a){var b=a&&a.valueExpression,c=d.createSyntaxTree(b),c=d.createFunction(c),e=!(!a||!a.expression)||this._viewScaleRE.test(b);return{ipData:this._interpolateData(a),hasExpr:!!b,compiledFunc:c,isScaleDriven:e}},_processColorInfo:function(a){a&&(a.colors&&a.colors.forEach(function(b,c){b instanceof g||(a.colors[c]=new g(b))}),a.stops&&a.stops.forEach(function(b,
c){!b.color||b.color instanceof g||(a.stops[c].color=new g(b.color))}),this._sortStops(a.stops));return this._createCache(a)},_processOpacityInfo:function(a){this._sortStops(a&&a.stops);return this._createCache(a)},_processSizeInfo:function(a){a.stops&&Array.isArray(a.stops)?a.stops=this._processSizeInfoStops(a.stops):(a.minSize=a.minSize&&this._processSizeInfoSize(a.minSize),a.maxSize=a.maxSize&&this._processSizeInfoSize(a.maxSize));return{root:this._createCache(a),minSize:this._createCache(a.minSize),
maxSize:this._createCache(a.maxSize)}},_processSizeInfoSize:function(a){"object"===typeof a?a.stops=this._processSizeInfoStops(a.stops):a=e.toPt(a);return a},_processSizeInfoStops:function(a){a&&Array.isArray(a)&&(a.forEach(function(a){a.size=e.toPt(a.size)}),this._sortStops(a));return a},_sortStops:function(a){a&&Array.isArray(a)&&a.sort(function(a,b){return a.value-b.value})},_processRotationInfo:function(a){return this._createCache(a)},_getSize:function(a,b,c,e,f){var g=a.attributes,h=b.field,
k=b.stops,l=0,n=c&&c.hasExpr,A=c&&c.compiledFunc,r=c&&c.ipData,p=c&&c.isScaleDriven,B="number"===typeof a,v=B?a:null;if(h||p||n){var x=e&&e.scale,w=f?f[0]:b.minSize,y=f?f[1]:b.maxSize,C=b.minDataValue,F=b.maxDataValue,W=b.valueUnit||"unknown",R=b.valueRepresentation,l=b.scaleBy,da=b.normalizationField,X=g?parseFloat(g[da]):void 0,U=e&&e.shape;p?v=null==x?this._getAverageValue(b):x:"number"!==typeof v&&(n?v=d.executeFunction(A,d.createExecContext(a,d.getViewInfo(e))):m.isFunction(h)?v=h.apply(this,
arguments):g&&(v=g[h]));if(null==v||da&&!B&&(isNaN(X)||0===X))return null;isNaN(X)||B||(v/=X);if(k)y=this._lookupData(v,r),v=y[0],w=y[1],v===w?l=k[v].size:(v=k[v].size,k=k[w].size,l=v+(k-v)*y[2]);else if(null!=w&&null!=y&&null!=C&&null!=F)v<=C?l=w:v>=F?l=y:(k=(v-C)/(F-C),"area"===l&&U?(w=(v="circle"===U)?z*Math.pow(w/2,2):w*w,k=w+k*((v?z*Math.pow(y/2,2):y*y)-w),l=v?2*Math.sqrt(k/z):Math.sqrt(k)):l=w+k*(y-w));else if("unknown"===W)null!=w&&null!=C?(w&&C?(k=v/C,l="circle"===U?2*Math.sqrt(k*Math.pow(w/
2,2)):"square"===U||"diamond"===U||"image"===U?Math.sqrt(k*Math.pow(w,2)):k*w):l=v+(w||C),l=l<w?w:l,null!=y&&l>y&&(l=y)):l=v;else{k=(e&&e.resolution?e.resolution:1)*t.meterIn[W];if("area"===R)l=Math.sqrt(v/z)/k,l*=2;else if(l=v/k,"radius"===R||"distance"===R)l*=2;null!=w&&l<w&&(l=w);null!=y&&l>y&&(l=y)}}else b&&(l=k&&k[0]&&k[0].size,null==l&&(l=b.minSize));return l=isNaN(l)?0:l},_getAverageValue:function(a){var b=a.stops,c;b?(c=b[0].value,a=b[b.length-1].value):(c=a.minDataValue||0,a=a.maxDataValue||
0);return(c+a)/2},_getColorComponent:function(a,b,c,e,f,g){var h=a.attributes,k=b&&b.field,l="number"===typeof a,n=l?a:null,t=c&&c.hasExpr,r=c&&c.compiledFunc,A=c&&c.ipData,p;if(k||t){var v=b.normalizationField,B=h?parseFloat(h[v]):void 0;"number"!==typeof n&&(t?n=d.executeFunction(r,d.createExecContext(a,d.getViewInfo(e))):m.isFunction(k)?n=k.apply(this,arguments):h&&(n=h[k]));null==n||v&&!l&&(isNaN(B)||0===B)||(isNaN(B)||l||(n/=B),p=f?this._getOpacity(n,b,A):this._getColor(n,b,A))}else b&&(h=b.stops,
f?(p=h&&h[0]&&h[0].opacity,null==p&&(p=b.opacityValues&&b.opacityValues[0])):p=h&&h[0]&&h[0].color||b.colors&&b.colors[0]);g&&(g.data=n,g.value=p);return g||p},_interpolateData:function(a){var b;if(a)if(a.colors||a.opacityValues){var c=(a.colors||a.opacityValues).length,d=a.minDataValue,e=(a.maxDataValue-d)/(c-1);b=[];for(a=0;a<c;a++)b[a]=d+a*e}else a.stops&&(b=a.stops.map(function(a){return a.value||0}));return b},_getOpacity:function(a,b,c){a=this._lookupData(a,c);var d;b=b||this.opacityInfo;a&&
(c=a[0],d=a[1],c===d?d=this._getOpacValue(b,c):(c=this._getOpacValue(b,c),b=this._getOpacValue(b,d),d=c+(b-c)*a[2]));return d},_getOpacValue:function(a,b){return a.opacityValues?a.opacityValues[b]:a.stops[b].opacity},_getColor:function(a,b,c){a=this._lookupData(a,c);var d;b=b||this.colorInfo;a&&(d=a[0],c=a[1],d=d===c?this._getColorObj(b,d):g.blendColors(this._getColorObj(b,d),this._getColorObj(b,c),a[2]),d=new g(d));return d},_getColorObj:function(a,b){return a.colors?a.colors[b]:a.stops[b].color},
_lookupData:function(a,b){var c;if(b){var d=0,e=b.length-1;b.some(function(b,c){if(a<b)return e=c,!0;d=c;return!1});c=[d,e,(a-b[d])/(b[e]-b[d])]}return c},_processForContext:function(a,b,c){if(b&&"web-scene"===b.origin){var d=null!=a.expression,e=null!=a.valueExpressionTitle&&"rotation"===a.type;b.messages&&(d&&b.messages.push(new h("property:unsupported",a.type+"VisualVariable.expression is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:c+
".expression",context:b})),e&&b.messages.push(new h("property:unsupported",a.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:c+".valueExpressionTitle",context:b})));d&&delete a.expression;e&&delete a.valueExpressionTitle}else"size"===a.type&&this._convertExpressionToArcade(a)},_writeRotationInfo:function(a,b,c){a&&(a=m.mixin({},a),this._processForContext(a,b,"visualVariables["+c+"]"),a.type=w.toJSON(a.type),
a=l.fixJson(a,!0));return a},_convertExpressionToArcade:function(a){a&&a.expression&&(a.valueExpression="$view.scale")},_writeSizeInfo:function(a,b,c){if(a){a=m.mixin({},a);this._processForContext(a,b,"string"===typeof c?c:"visualVariables["+c+"]");var d=a.minSize,e=a.maxSize;d&&(a.minSize="number"===typeof d?d:this._writeSizeInfo(d,b,"visualVariables["+c+"].minSize"));e&&(a.maxSize="number"===typeof e?e:this._writeSizeInfo(e,b,"visualVariables["+c+"].maxSize"));b=a.legendOptions;c=a.axis;a.type=
w.toJSON(a.type);c&&(a.axis=y.toJSON(c));b&&(a.legendOptions=m.mixin({},b),b=b.customValues)&&(a.legendOptions.customValues=b.slice(0));a.stops&&(a.stops=a.stops.map(function(a){a=m.mixin({},a);null===a.label&&delete a.label;return a}));a=l.fixJson(a,!0)}return a},_writeColorInfo:function(a,b,c){a&&(a=m.mixin({},a),this._processForContext(a,b,"visualVariables["+c+"]"),a.type=w.toJSON(a.type),a.colors&&(a.colors=a.colors.map(function(a){return g.toJSON(a)})),a.stops&&(a.stops=a.stops.map(function(a){a=
m.mixin({},a);a.color&&(a.color=g.toJSON(a.color));null==a.value&&(a.value=0);null===a.label&&delete a.label;return a})),a.legendOptions&&(a.legendOptions=m.mixin({},a.legendOptions)),a=l.fixJson(a,!0));return a},_writeOpacityInfo:function(a,b,c){var d;a&&(d=m.mixin({},a),this._processForContext(d,b,"visualVariables["+c+"]"),d.type=w.toJSON(d.type),d.opacityValues&&(d.transparencyValues=d.opacityValues.map(x),delete d.opacityValues),d.stops&&(d.stops=d.stops.map(function(a){a=m.mixin({},a);a.transparency=
x(a.opacity);delete a.opacity;null===a.label&&delete a.label;return a})),d.legendOptions&&(d.legendOptions=m.mixin({},d.legendOptions)),d=l.fixJson(d,!0));return d}})})},"esri/renderers/support/utils":function(){define(["dojo/_base/lang","dojo/date/locale","../../Color","../../core/numberUtils","dojo/i18n!dojo/cldr/nls/gregorian"],function(b,a,f,c,e){function l(a){return a&&a.map(function(a){return new f(a)})}function h(a,b,c){var d="";0===b?d=k.lt+" ":b===c&&(d=k.gt+" ");return d+a}var d={},k={lte:"\x3c\x3d",
gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},m={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},g={millisecond:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},second:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},minute:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},hour:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},day:{selector:"date",dateOptions:{formatLength:"long"}},month:{selector:"date",
dateOptions:{formatLength:"long"}},year:{selector:"date",dateOptions:{selector:"year"}}},t={formatLength:"short",fullYear:!0},v={formatLength:"short"};b.mixin(d,{meterIn:{inches:1/.0254,feet:1/.3048,"us-feet":3.28084,yards:1/.9144,miles:1/1609.344,"nautical-miles":1/1852,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,"decimal-degrees":180/20015077},timelineDateFormatOptions:{selector:"date",dateOptions:{formatLength:"short",fullYear:!0}},formatDate:function(c,d){var f=[];null==
c||c instanceof Date||(c=new Date(c));d=d||{};d=b.mixin({},d);var g=d.selector?d.selector.toLowerCase():null,h=!g||-1<g.indexOf("time"),g=!g||-1<g.indexOf("date");h&&(d.timeOptions=d.timeOptions||v,d.timeOptions&&(d.timeOptions=b.mixin({},d.timeOptions),d.timeOptions.selector=d.timeOptions.selector||"time",f.push(d.timeOptions)));g&&(d.dateOptions=d.dateOptions||t,d.dateOptions&&(d.dateOptions=b.mixin({},d.dateOptions),d.dateOptions.selector=d.dateOptions.selector||"date",f.push(d.dateOptions)));
f&&f.length?(f=f.map(function(b){return a.format(c,b)}),d=1==f.length?f[0]:e["dateTimeFormat-medium"].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return f[b]})):d=a.format(c);return d},createColorStops:function(a){var b=a.values,e=a.colors,f=a.labelIndexes,g=a.isDate,k=a.dateFormatOptions;a=[];return a=b.map(function(a,l){var m=null;if(!f||-1<f.indexOf(l)){var n;(n=g?d.formatDate(a,k):c.format(a))&&(m=h(n,l,b.length-1))}return{value:a,color:e[l],label:m}})},updateColorStops:function(a){var b=
a.stops,e=a.changes,f=a.isDate,g=a.dateFormatOptions,k=[],l,m=b.map(function(a){return a.value});e.forEach(function(a){k.push(a.index);m[a.index]=a.value});l=c.round(m,{indexes:k});b.forEach(function(a,e){a.value=m[e];if(null!=a.label){var k,n=null;(k=f?d.formatDate(l[e],g):c.format(l[e]))&&(n=h(k,e,b.length-1));a.label=n}})},createClassBreakLabel:function(a){var b=a.minValue,d=a.maxValue,e=a.isFirstBreak?"":k.gt+" ";a="percent-of-total"===a.normalizationType?k.pct:"";b=null==b?"":c.format(b);d=null==
d?"":c.format(d);return e+b+a+" "+k.ld+" "+d+a},setLabelsForClassBreaks:function(a){var b=a.classBreakInfos,e=a.classificationMethod,f=a.normalizationType,g=[];b&&b.length&&("standard-deviation"===e?console.log("setLabelsForClassBreaks: cannot set labels for class breaks generated using 'standard-deviation' method."):a.round?(g.push(b[0].minValue),b.forEach(function(a){g.push(a.maxValue)}),g=c.round(g),b.forEach(function(a,b){a.label=d.createClassBreakLabel({minValue:0===b?g[0]:g[b],maxValue:g[b+
1],isFirstBreak:0===b,normalizationType:f})})):b.forEach(function(a,b){a.label=d.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===b,normalizationType:f})}))},updateClassBreak:function(a){var b=a.classBreaks,c=a.normalizationType,e=a.change,f=e.index,e=e.value,g=-1,h=-1,k=b.length;"standard-deviation"===a.classificationMethod?console.log("updateClassBreak: cannot update labels for class breaks generated using 'standard-deviation' method."):(0===f?g=f:f===k?h=f-1:(h=f-
1,g=f),-1<g&&g<k&&(a=b[g],a.minValue=e,a.label=d.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===g,normalizationType:c})),-1<h&&h<k&&(a=b[h],a.maxValue=e,a.label=d.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===h,normalizationType:c})))},calculateDateFormatInterval:function(a){var b,c,d=a.length,e,f,g,h,k,l,t=Infinity,v;a=a.map(function(a){return new Date(a)});for(b=0;b<d-1;b++){e=a[b];g=[];k=Infinity;l="";for(c=b+1;c<d;c++)f=a[c],f=
e.getFullYear()!==f.getFullYear()&&"year"||e.getMonth()!==f.getMonth()&&"month"||e.getDate()!==f.getDate()&&"day"||e.getHours()!==f.getHours()&&"hour"||e.getMinutes()!==f.getMinutes()&&"minute"||e.getSeconds()!==f.getSeconds()&&"second"||"millisecond",h=m[f],h<k&&(k=h,l=f),g.push(f);k<t&&(t=k,v=l)}return v},createUniqueValueLabel:function(a){var b=a.value,e=a.fieldInfo,f=a.domain;a=a.dateFormatInterval;var h=String(b);(f=f&&f.codedValues?f.getName(b):null)?h=f:"number"===typeof b&&(h=e&&"date"===
e.type?d.formatDate(b,a&&g[a]):c.format(b));return h},cloneColorVariable:function(a){var c;a&&(c=b.mixin({},a),c.colors=l(c.colors),c.stops=c.stops&&c.stops.map(function(a){a=b.mixin({},a);a.color&&(a.color=new f(a.color));return a}),c.legendOptions&&(c.legendOptions=b.mixin({},c.legendOptions)));return c},cloneOpacityVariable:function(a){var c;if(a){c=b.mixin({},a);if(a=c.opacityValues)c.opacityValues=a.slice(0);if(a=c.stops)c.stops=a.map(function(a){return b.mixin({},a)});if(a=c.legendOptions)c.legendOptions=
b.mixin({},a)}return c},cloneSizeVariable:function(a){var c;a&&(c=b.mixin({},a),c.stops&&(c.stops=c.stops.map(function(a){return b.mixin({},a)})),(a=c.minSize)&&"object"===typeof a&&(c.minSize=d.cloneSizeVariable(a)),(a=c.maxSize)&&"object"===typeof a&&(c.maxSize=d.cloneSizeVariable(a)),a=c.legendOptions)&&(c.legendOptions=b.mixin({},a),a=a.customValues)&&(c.legendOptions.customValues=a.slice(0));return c}});return d})},"esri/core/numberUtils":function(){define(["dojo/number","dojo/i18n!dojo/cldr/nls/number"],
function(b,a){function f(a,b){return a-b}var c=/^-?(\d+)(\.(\d+))?$/i,e=new RegExp("\\"+a.decimal+"0+$","g"),l=/(\d)0*$/g,h={numDigits:function(a){var b=String(a),d=b.match(c);a={integer:0,fractional:0};d&&d[1]?(a.integer=d[1].split("").length,a.fractional=d[3]?d[3].split("").length:0):-1<b.toLowerCase().indexOf("e")&&(d=b.split("e"),b=d[0],d=d[1],b&&d&&(b=Number(b),d=Number(d),(a=0<d)||(d=Math.abs(d)),b=h.numDigits(b),a?(b.integer+=d,b.fractional=d>b.fractional?0:b.fractional-d):(b.fractional+=d,
b.integer=d>b.integer?1:b.integer-d),a=b));return a},percentChange:function(a,b,c,e){var d={previous:null,next:null},f;null!=c&&(f=a-c,d.previous=Math.floor(Math.abs(100*(b-c-f)/f)));null!=e&&(f=e-a,d.next=Math.floor(Math.abs(100*(e-b-f)/f)));return d},round:function(a,b){a=a.slice(0);var c,d,e,k,l,y,r,z,x=b&&null!=b.tolerance?b.tolerance:2,p=b&&b.indexes,n=b&&null!=b.strictBounds?b.strictBounds:!1;if(p)p.sort(f);else for(p=[],l=0;l<a.length;l++)p.push(l);for(l=0;l<p.length;l++)if(z=p[l],b=a[z],c=
0===z?null:a[z-1],d=z===a.length-1?null:a[z+1],e=h.numDigits(b),e=e.fractional){y=0;for(r=!1;y<=e&&!r;){k=b;r=y;var A=void 0,B=void 0,A=Number(k.toFixed(r));A<k?B=A+1/Math.pow(10,r):(B=A,A-=1/Math.pow(10,r));A=Number(A.toFixed(r));B=Number(B.toFixed(r));k=[A,B];k=n&&0===l?k[1]:k[0];r=x;var A=h.percentChange(b,k,c,d),C=B=void 0,B=void 0,B=null==A.previous||A.previous<=r,C=null==A.next||A.next<=r;r=B=B&&C||A.previous+A.next<=2*r;y++}r&&(a[z]=k)}return a},format:function(a,c){c=c||{places:20,round:-1};
(a=b.format(a,c))&&(a=a.replace(l,"$1").replace(e,""));return a}};return h})},"esri/renderers/support/AuthoringInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ./AuthoringInfoVisualVariable".split(" "),function(b,a,f,c,e,l,h,d){var k=l({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",
esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),m=l({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size"});return function(a){function b(b){b=a.call(this)||this;b.lengthUnit=null;b.visualVariables=null;return b}f(b,a);e=b;Object.defineProperty(b.prototype,"classificationMethod",{get:function(){if("class-breaks-size"===this.type||"class-breaks-color"===this.type){var a=this._get("classificationMethod");return a?
a:"manual"}return null},set:function(a){this._set("classificationMethod",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"fields",{get:function(){return"predominance"===this.type?this._get("fields"):null},set:function(a){this._set("fields",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"standardDeviationInterval",{get:function(){return"standard-deviation"===this.classificationMethod?this._get("standardDeviationInterval"):null},set:function(a){this._set("standardDeviationInterval",
a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"type",{get:function(){return this._get("type")},set:function(a){var b=a;"classed-size"===a?b="class-breaks-size":"classed-color"===a&&(b="class-breaks-color");this._set("type",b)},enumerable:!0,configurable:!0});b.prototype.clone=function(){return new e({classificationMethod:this.classificationMethod,fields:this.fields&&this.fields.slice(0),lengthUnit:this.lengthUnit,standardDeviationInterval:this.standardDeviationInterval,type:this.type,
visualVariables:this.visualVariables&&this.visualVariables.map(function(a){return a.clone()})})};c([h.property({type:String,value:null,dependsOn:["type"],json:{read:k.read,write:k.write}})],b.prototype,"classificationMethod",null);c([h.property({type:[String],value:null,dependsOn:["type"],json:{write:!0}})],b.prototype,"fields",null);c([h.property({type:String,json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],b.prototype,"lengthUnit",void 0);c([h.property({type:Number,value:null,
dependsOn:["classificationMethod"],json:{write:!0}})],b.prototype,"standardDeviationInterval",null);c([h.property({type:String,value:null,json:{read:m.read,write:m.write}})],b.prototype,"type",null);c([h.property({type:[d],json:{write:!0}})],b.prototype,"visualVariables",void 0);return b=e=c([h.subclass("esri.renderers.support.AuthoringInfo")],b);var e}(h.declared(e))})},"esri/renderers/support/AuthoringInfoVisualVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/decorators/cast".split(" "),
function(b,a,f,c,e,l,h,d){var k=l({percentTotal:"percent-of-total"}),m=l({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity"}),g={key:function(a){return"number"===typeof a?"number":"string"},typeMap:{number:Number,string:String},base:null};return function(a){function b(b){b=a.call(this)||this;b.endTime=null;b.field=null;b.maxSliderValue=null;b.minSliderValue=null;b.startTime=null;b.type=null;b.units=null;return b}f(b,a);e=b;b.prototype.castEndTime=function(a){return"string"===typeof a||
"number"===typeof a?a:null};b.prototype.castStartTime=function(a){return"string"===typeof a||"number"===typeof a?a:null};Object.defineProperty(b.prototype,"style",{get:function(){return"color"===this.type?this._get("style"):null},set:function(a){this._set("style",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"theme",{get:function(){return"color"===this.type?this._get("theme")||"high-to-low":null},set:function(a){this._set("theme",a)},enumerable:!0,configurable:!0});b.prototype.clone=
function(){return new e({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})};c([h.property({types:g,json:{write:!0}})],b.prototype,"endTime",void 0);c([d.cast("endTime")],b.prototype,"castEndTime",null);c([h.property({type:String,json:{write:!0}})],b.prototype,"field",void 0);c([h.property({type:Number,json:{write:!0}})],b.prototype,"maxSliderValue",
void 0);c([h.property({type:Number,json:{write:!0}})],b.prototype,"minSliderValue",void 0);c([h.property({types:g,json:{write:!0}})],b.prototype,"startTime",void 0);c([d.cast("startTime")],b.prototype,"castStartTime",null);c([h.property({type:String,value:null,dependsOn:["type"],json:{read:k.read,write:k.write}})],b.prototype,"style",null);c([h.property({type:String,value:null,dependsOn:["type"],json:{write:!0}})],b.prototype,"theme",null);c([h.property({type:String,json:{read:m.read,write:m.write}})],
b.prototype,"type",void 0);c([h.property({type:String,json:{write:!0}})],b.prototype,"units",void 0);return b=e=c([h.subclass("esri.renderers.support.AuthoringInfoVisualVariable")],b);var e}(h.declared(e))})},"esri/renderers/support/LegendOptions":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(b,a,f,c,e,l){Object.defineProperty(a,"__esModule",{value:!0});
b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.title=null;return b}f(b,a);e=b;b.prototype.clone=function(){return new e({title:this.title})};c([l.property({type:String,json:{write:!0}})],b.prototype,"title",void 0);return b=e=c([l.subclass("esri.renderers.support.LegendOptions")],b);var e}(l.declared(e));a.LegendOptions=b;a.default=b})},"esri/renderers/support/ClassBreakInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),
function(b,a,f,c,e,l,h,d){Object.defineProperty(a,"__esModule",{value:!0});b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.description=null;b.label=null;b.minValue=null;b.maxValue=0;b.symbol=null;return b}f(b,a);e=b;b.prototype.clone=function(){return new e({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})};c([l.property({type:String,json:{write:!0}})],b.prototype,"description",void 0);
c([l.property({type:String,json:{write:!0}})],b.prototype,"label",void 0);c([l.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],b.prototype,"minValue",void 0);c([l.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],b.prototype,"maxValue",void 0);c([l.property({types:d.rendererTypes,json:{origins:{"web-scene":{read:h.read,write:{target:{symbol:{types:d.rendererTypes3D}},writer:h.writeTarget}}},read:h.read,write:h.writeTarget}})],
b.prototype,"symbol",void 0);return b=e=c([l.subclass("esri.renderers.support.ClassBreakInfo")],b);var e}(l.declared(e));a.ClassBreakInfo=b;a.default=b})},"esri/renderers/HeatmapRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/lang ../core/accessorSupport/decorators ./Renderer ./support/HeatmapColorStop".split(" "),function(b,a,f,c,e,l,h,d,k){return function(a){function b(b){b=a.call(this)||this;b.blurRadius=10;b.colorStops=
[new k.HeatmapColorStop({ratio:0,color:new e("rgba(255, 140, 0, 0)")}),new k.HeatmapColorStop({ratio:.75,color:new e("rgba(255, 140, 0, 1)")}),new k.HeatmapColorStop({ratio:.9,color:new e("rgba(255, 0,   0, 1)")})];b.field=null;b.fieldOffset=0;b.maxPixelIntensity=100;b.minPixelIntensity=0;b.type="heatmap";return b}f(b,a);d=b;b.prototype.clone=function(){return new d({blurRadius:this.blurRadius,colorStops:l.clone(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})};
c([h.property({type:Number,json:{write:!0}})],b.prototype,"blurRadius",void 0);c([h.property({type:[k.HeatmapColorStop],json:{write:!0}})],b.prototype,"colorStops",void 0);c([h.property({type:String,json:{write:!0}})],b.prototype,"field",void 0);c([h.property({type:Number,json:{write:{overridePolicy:function(a,b,c){return{enabled:null==c}}}}})],b.prototype,"fieldOffset",void 0);c([h.property({type:Number,json:{write:!0}})],b.prototype,"maxPixelIntensity",void 0);c([h.property({type:Number,json:{write:!0}})],
b.prototype,"minPixelIntensity",void 0);c([h.property({dependsOn:["field"],readOnly:!0})],b.prototype,"requiredFields",void 0);return b=d=c([h.subclass("esri.renderers.HeatmapRenderer")],b);var d}(h.declared(d))})},"esri/renderers/support/HeatmapColorStop":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(b,a,f,c,e,l,h){Object.defineProperty(a,
"__esModule",{value:!0});b=function(a){function b(b){b=a.call(this)||this;b.color=null;b.ratio=null;return b}f(b,a);d=b;b.prototype.clone=function(){return new d({color:this.color,ratio:this.ratio})};c([h.property({type:e,json:{write:!0}})],b.prototype,"color",void 0);c([h.property({type:Number,json:{write:!0}})],b.prototype,"ratio",void 0);return b=d=c([h.subclass("esri.renderers.support.HeatmapColorStop")],b);var d}(h.declared(l));a.HeatmapColorStop=b;a.default=b})},"esri/renderers/SimpleRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Renderer ../symbols/support/jsonUtils ../symbols/support/typeUtils".split(" "),
function(b,a,f,c,e,l,h,d,k){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.description=null;b.label=null;b.symbol=null;b.type="simple";return b}f(b,a);h=b;b.prototype.writeSymbolWebScene=function(a,b,c,e){d.writeTarget(a,b,c,e)};b.prototype.writeSymbol=function(a,b,c,e){d.writeTarget(a,b,c,e)};b.prototype.readSymbol=function(a,b,c){return d.read(a,b,c)};b.prototype.getSymbol=function(a,b){return this.symbol};b.prototype.getSymbols=function(){return this.symbol?[this.symbol]:
[]};b.prototype.clone=function(){return new h({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:e.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};c([l.property({type:String,json:{write:!0}})],b.prototype,"description",void 0);c([l.property({type:String,json:{write:!0}})],b.prototype,"label",void 0);c([l.property({types:k.rendererTypes})],b.prototype,"symbol",void 0);c([l.writer("web-scene","symbol",{symbol:{types:k.rendererTypes3D}})],
b.prototype,"writeSymbolWebScene",null);c([l.writer("symbol")],b.prototype,"writeSymbol",null);c([l.reader("symbol")],b.prototype,"readSymbol",null);return b=h=c([l.subclass("esri.renderers.SimpleRenderer")],b);var h}(l.declared(h))})},"esri/renderers/UniqueValueRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../symbols ../core/arrayUtils ../core/Error ../core/lang ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../portal/Portal ./Renderer ./support/diffUtils ./support/LegendOptions ./support/UniqueValueInfo ../support/arcadeUtils ../symbols/support/jsonUtils ../symbols/support/styleUtils ../symbols/support/typeUtils".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v,w,y,r,z,x,p,n,A,B){var C=m.getLogger("esri.renderers.UniqueValueRenderer"),F=v.ensureType(x.default);return function(a){function b(b){b=a.call(this)||this;b._valueInfoMap={};b._isDefaultSymbolDerived=!1;b.type="unique-value";b.backgroundFillSymbol=null;b.field=null;b.field2=null;b.field3=null;b.valueExpression=null;b.valueExpressionTitle=null;b.legendOptions=null;b.defaultLabel=null;b.fieldDelimiter=null;b.portal=null;b.styleOrigin=null;b.diff={uniqueValueInfos:function(a,
b){if(a||b){if(!a||!b)return{type:"complete",oldValue:a,newValue:b};for(var c=!1,d={type:"collection",added:[],removed:[],changed:[],unchanged:[]},e=function(e){var f=h.find(a,function(a){return a.value===b[e].value});f?r.diff(f,b[e])?d.changed.push({type:"complete",oldValue:f,newValue:b[e]}):d.unchanged.push({oldValue:f,newValue:b[e]}):d.added.push(b[e]);c=!0},f=0;f<b.length;f++)e(f);e=function(e){h.find(b,function(b){return b.value===a[e].value})||(d.removed.push(a[e]),c=!0)};for(f=0;f<a.length;f++)e(f);
return c?d:void 0}}};b._set("uniqueValueInfos",[]);return b}f(b,a);m=b;b.prototype.writeType=function(a,b,c,d){b.type="uniqueValue"};b.prototype.writeBackgroundFillSymbolWebScene=function(a,b,c,d){n.writeTarget(a,b,c,d)};b.prototype.castField=function(a){return null==a?a:"function"===typeof a?a:v.ensureString(a)};b.prototype.writeField=function(a,b,c,e){"string"===typeof a?b[c]=a:e&&e.messages?e.messages.push(new d("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):
C.error(".field: cannot write field to JSON since it's not a string value")};Object.defineProperty(b.prototype,"compiledFunc",{get:function(){return p.createFunction(this.valueExpression)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"defaultSymbol",{set:function(a){this._isDefaultSymbolDerived=!1;this._set("defaultSymbol",a)},enumerable:!0,configurable:!0});b.prototype.readDefaultSymbol=function(a,b,c){return n.read(a,b,c)};b.prototype.writeDefaultSymbolWebScene=function(a,b,
c,d){this._isDefaultSymbolDerived||n.writeTarget(a,b,c,d)};b.prototype.writeDefaultSymbol=function(a,b,c,d){this._isDefaultSymbolDerived||n.writeTarget(a,b,c,d)};b.prototype.readPortal=function(a,b,c){return c.portal||w.getDefault()};b.prototype.readStyleOrigin=function(a,b,c){if(b.styleName)return Object.freeze({styleName:b.styleName});if(b.styleUrl)return a=g.read(b.styleUrl,c),Object.freeze({styleUrl:a})};b.prototype.writeStyleOrigin=function(a,b,c,d){a.styleName?b.styleName=a.styleName:a.styleUrl&&
(b.styleUrl=g.write(a.styleUrl,d),g.isAbsolute(b.styleUrl)&&(b.styleUrl=g.normalize(b.styleUrl)))};Object.defineProperty(b.prototype,"uniqueValueInfos",{set:function(a){this.styleOrigin?C.error("#uniqueValueInfos\x3d","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",a),this._updateValueInfoMap())},enumerable:!0,configurable:!0});b.prototype.addUniqueValueInfo=function(a,b){this.styleOrigin?C.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):
(a="object"===typeof a?F(a):new x.default({value:a,symbol:b}),this.uniqueValueInfos.push(a),this._valueInfoMap[a.value]=a)};b.prototype.removeUniqueValueInfo=function(a){if(this.styleOrigin)C.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(var b=0;b<this.uniqueValueInfos.length;b++)if(this.uniqueValueInfos[b].value===a+""){delete this._valueInfoMap[a];this.uniqueValueInfos.splice(b,1);break}};b.prototype.getUniqueValueInfo=
function(a,b){var c=this.field,d=a.attributes,e;this.valueExpression?e=p.executeFunction(this.compiledFunc,p.createExecContext(a,p.getViewInfo(b))):"function"!==typeof c&&this.field2?(a=this.field2,b=this.field3,e=[],c&&e.push(d[c]),a&&e.push(d[a]),b&&e.push(d[b]),e=e.join(this.fieldDelimiter||"")):"function"===typeof c?e=c(a):c&&(e=d[c]);return this._valueInfoMap[e+""]};b.prototype.getSymbol=function(a,b){return(a=this.getUniqueValueInfo(a,b))&&a.symbol||this.defaultSymbol};b.prototype.getSymbols=
function(){for(var a=[],b=0,c=this.uniqueValueInfos;b<c.length;b++){var d=c[b];d.symbol&&a.push(d.symbol)}this.defaultSymbol&&a.push(this.defaultSymbol);return a};b.prototype.clone=function(){var a=new m({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:k.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:k.clone(this.visualVariables),legendOptions:k.clone(this.legendOptions),
authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:k.clone(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(a._isDefaultSymbolDerived=!0);a._set("portal",this.portal);var b=k.clone(this.uniqueValueInfos);this.styleOrigin&&(a._set("styleOrigin",Object.freeze(k.clone(this.styleOrigin))),Object.freeze(b));a._set("uniqueValueInfos",b);a._updateValueInfoMap();return a};b.prototype.collectRequiredFields=function(a){this.inherited(arguments);[this.field,this.field2,
this.field3].forEach(function(b){b&&"string"===typeof b&&(a[b]=!0)});this.valueExpression&&p.extractFieldNames(this.valueExpression).forEach(function(b){a[b]=!0})};b.prototype.populateFromStyle=function(){var a=this;return A.fetchStyle(this.styleOrigin,{portal:this.portal}).then(function(b){var c=[];a._valueInfoMap={};b&&b.data&&Array.isArray(b.data.items)&&b.data.items.forEach(function(d){var e=new l.WebStyleSymbol({styleUrl:b.styleUrl,styleName:b.styleName,portal:a.portal,name:d.name});a.defaultSymbol||
d.name!==b.data.defaultItem||(a.defaultSymbol=e,a._isDefaultSymbolDerived=!0);e=new x.default({value:d.name,symbol:e});c.push(e);a._valueInfoMap[d.name]=e});a._set("uniqueValueInfos",Object.freeze(c));!a.defaultSymbol&&a.uniqueValueInfos.length&&(a.defaultSymbol=a.uniqueValueInfos[0].symbol,a._isDefaultSymbolDerived=!0);return a})};b.prototype._updateValueInfoMap=function(){var a=this;this._valueInfoMap={};this.uniqueValueInfos.forEach(function(b){return a._valueInfoMap[b.value+""]=b})};b.fromPortalStyle=
function(a,b){var c=new m(b&&b.properties);c._set("styleOrigin",Object.freeze({styleName:a}));c._set("portal",b&&b.portal||w.getDefault());b=c.populateFromStyle();b.catch(function(b){C.error("#fromPortalStyle('"+a+"'[, ...])","Failed to create unique value renderer from style name",b)});return b};b.fromStyleUrl=function(a,b){b=new m(b&&b.properties);b._set("styleOrigin",Object.freeze({styleUrl:a}));b=b.populateFromStyle();b.catch(function(b){C.error("#fromStyleUrl('"+a+"'[, ...])","Failed to create unique value renderer from style URL",
b)});return b};c([t.property()],b.prototype,"type",void 0);c([t.writer("type")],b.prototype,"writeType",null);c([t.property({types:{base:l.BaseSymbol,key:"type",typeMap:{"simple-fill":B.rendererTypes.typeMap["simple-fill"],"picture-fill":B.rendererTypes.typeMap["picture-fill"],"polygon-3d":B.rendererTypes.typeMap["polygon-3d"]}},json:{read:n.read,write:n.writeTarget}})],b.prototype,"backgroundFillSymbol",void 0);c([t.writer("web-scene","backgroundFillSymbol",{backgroundFillSymbol:{type:l.PolygonSymbol3D}})],
b.prototype,"writeBackgroundFillSymbolWebScene",null);c([t.property({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],b.prototype,"field",void 0);c([t.cast("field")],b.prototype,"castField",null);c([t.writer("field")],b.prototype,"writeField",null);c([t.property({type:String,json:{write:!0}})],b.prototype,"field2",void 0);c([t.property({type:String,json:{write:!0}})],b.prototype,"field3",void 0);c([t.property({type:String,json:{write:!0}})],b.prototype,"valueExpression",void 0);
c([t.property({type:String,json:{write:!0}})],b.prototype,"valueExpressionTitle",void 0);c([t.property({dependsOn:["valueExpression"]})],b.prototype,"compiledFunc",null);c([t.property({type:z.default,json:{write:!0}})],b.prototype,"legendOptions",void 0);c([t.property({type:String,json:{write:!0}})],b.prototype,"defaultLabel",void 0);c([t.property({types:B.rendererTypes})],b.prototype,"defaultSymbol",null);c([t.reader("defaultSymbol")],b.prototype,"readDefaultSymbol",null);c([t.writer("web-scene",
"defaultSymbol",{defaultSymbol:{types:B.rendererTypes3D}})],b.prototype,"writeDefaultSymbolWebScene",null);c([t.writer("defaultSymbol")],b.prototype,"writeDefaultSymbol",null);c([t.property({type:String,json:{write:!0}})],b.prototype,"fieldDelimiter",void 0);c([t.property({type:w,readOnly:!0})],b.prototype,"portal",void 0);c([t.reader("portal",["styleName"])],b.prototype,"readPortal",null);c([t.property({readOnly:!0})],b.prototype,"styleOrigin",void 0);c([t.reader("styleOrigin",["styleName","styleUrl"])],
b.prototype,"readStyleOrigin",null);c([t.writer("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],b.prototype,"writeStyleOrigin",null);c([t.property({type:[x.default],json:{write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],b.prototype,"uniqueValueInfos",null);c([t.property({dependsOn:["field","field2","field3","valueExpression"],readOnly:!0})],b.prototype,"requiredFields",void 0);c([e(1,t.cast(B.ensureType))],b.prototype,"addUniqueValueInfo",null);
return b=m=c([t.subclass("esri.renderers.UniqueValueRenderer")],b);var m}(t.declared(y))})},"esri/core/arrayUtils":function(){define(["require","exports"],function(b,a){function f(a,b,c){for(var d=a.length,e=0;e<d;e++)if(b.call(c,a[e],e,a))return e;return-1}function c(a,b,c){void 0===c&&(c=a.length);for(var d=Math.max(0,h-5),e=-1,f=d;f<c;++f)if(a[f]===b){e=f;break}if(-1===e){for(f=0;f<d;++f)if(a[f]===b){e=f;break}if(-1===e)return}a[e]=a[c-1];a.pop();h=e;return b}function e(a,b){return-1===a.indexOf(b)}
function l(a,b,c){return!a.some(b.bind(null,c))}Object.defineProperty(a,"__esModule",{value:!0});a.findIndex=f;a.find=function(a,b,c){for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return f}};a.equals=function(a,b,c){if(!a&&!b)return!0;if(!a||!b||a.length!==b.length)return!1;if(c)for(var d=0;d<a.length;d++){if(!c(a[d],b[d]))return!1}else for(d=0;d<a.length;d++)if(a[d]!==b[d])return!1;return!0};a.difference=function(a,b,c){var d;c?(d=b.filter(l.bind(null,a,c)),a=a.filter(l.bind(null,
b,c))):(d=b.filter(e.bind(null,a)),a=a.filter(e.bind(null,b)));return{added:d,removed:a}};a.intersect=function(a,b,c){return a&&b?c?a.filter(function(a){return-1<f(b,function(b){return c(a,b)})}):a.filter(function(a){return-1<b.indexOf(a)}):[]};a.constant=function(a,b){for(var c=Array(a),d=0;d<a;d++)c[d]=b;return c};a.range=function(a,b){void 0===b&&(b=a,a=0);for(var c=Array(b-a),d=a;d<b;d++)c[d-a]=d;return c};a.binaryIndexOf=function(a,b,c){for(var d=a.length,e=0,f=d-1;e<f;){var h=e+Math.floor((f-
e)/2);b>a[h]?e=h+1:f=h}f=a[e];return c?b>=a[d-1]?-1:f===b?e:e-1:f===b?e:-1};a.removeUnordered=c;a.removeUnorderedMany=function(a,b,e){void 0===e&&(e=a.length);var d=[];b.forEach(function(b){void 0!==c(a,b,e)&&(d.push(b),--e)});return d};var h=0;a.keysOfMap=function(a){var b=[];a.forEach(function(a,c){return b.push(c)});return b};a.keysOfSet=function(a){var b=[];a.forEach(function(a){return b.push(a)});return b}})},"esri/renderers/support/diffUtils":function(){define("require exports dojo/_base/lang ../../core/Accessor ../../core/Collection ../../core/accessorSupport/utils".split(" "),
function(b,a,f,c,e,l){function h(a){return a instanceof e?Object.keys(a.items):a instanceof c?l.getProperties(a).keys():a?Object.keys(a):[]}function d(a,b){return a instanceof e?a.items[b]:a[b]}function k(a,b){return Array.isArray(a)&&Array.isArray(b)?a.length!==b.length:!1}function m(a){return a?a.declaredClass:null}function g(a,b){var e=a.diff;if(e&&f.isFunction(e))return e(a,b);var l=h(a),v=h(b);if(0!==l.length||0!==v.length){if(!l.length||!v.length||k(a,b))return{type:"complete",oldValue:a,newValue:b};
var x=v.filter(function(a){return-1===l.indexOf(a)}),p=l.filter(function(a){return-1===v.indexOf(a)}),x=l.filter(function(c){return-1<v.indexOf(c)&&d(a,c)!==d(b,c)}).concat(x,p).sort();if((p=m(a))&&-1<t.indexOf(p)&&x.length)return{type:"complete",oldValue:a,newValue:b};var n,p=a instanceof c&&b instanceof c,A;for(A in x){var B=x[A],w=d(a,B),F=d(b,B),D=void 0;!p&&(f.isFunction(w)||f.isFunction(F))||w===F||null==w&&null==F||!(D=e&&e[B]&&f.isFunction(e[B])?e[B](w,F):"object"===typeof w&&"object"===typeof F&&
m(w)===m(F)?g(w,F):{type:"complete",oldValue:w,newValue:F})||(n=n||{type:"partial",diff:{}},n.diff[B]=D)}return n}}Object.defineProperty(a,"__esModule",{value:!0});var t=["esri.Color","esri.portal.Portal"];a.diff=function(a,b){if(!f.isFunction(a)&&!f.isFunction(b)&&(a||b))return!a||!b||"object"===typeof a&&"object"===typeof a&&m(a)!==m(b)?{type:"complete",oldValue:a,newValue:b}:g(a,b)}})},"esri/renderers/support/UniqueValueInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),
function(b,a,f,c,e,l,h,d){Object.defineProperty(a,"__esModule",{value:!0});b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.description=null;b.label=null;b.symbol=null;b.value=null;return b}f(b,a);e=b;b.prototype.clone=function(){return new e({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})};c([l.property({type:String,json:{write:!0}})],b.prototype,"description",void 0);c([l.property({type:String,json:{write:!0}})],
b.prototype,"label",void 0);c([l.property({types:d.rendererTypes,json:{origins:{"web-scene":{read:h.read,write:{target:{symbol:{types:d.rendererTypes3D}},writer:h.writeTarget}}},read:h.read,write:h.writeTarget}})],b.prototype,"symbol",void 0);c([l.property({type:String,json:{write:!0}})],b.prototype,"value",void 0);return b=e=c([l.subclass("esri.renderers.support.UniqueValueInfo")],b);var e}(l.declared(e));a.UniqueValueInfo=b;a.default=b})},"esri/symbols/support/styleUtils":function(){define("require exports ../../request ../../symbols ../../core/Error ../../core/promiseUtils ../../core/urlUtils ../../portal/Portal ../../portal/PortalQueryParams ./jsonUtils ./StyleOrigin ./Thumbnail".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t){function v(a,b){return x(a).then(function(b){return{data:b.data,baseUrl:h.removeFile(a),styleUrl:a}})}function w(a,b){b=b.portal||d.getDefault();var c,e=b.url+" - "+(b.user&&b.user.username)+" - "+a;p[e]||(p[e]=y(a,b).then(function(a){c=a;return a.fetchData()}).then(function(b){return{data:b,baseUrl:c.itemUrl,styleName:a}}));return p[e]}function y(a,b){return b.load().then(function(){var c=new k({disableExtraQuery:!0,query:"owner:"+n+" AND type:"+A+' AND typekeywords:"'+
a+'"'});return b.queryItems(c)}).then(function(b){b=b.results;var c=null,d=a.toLowerCase();if(b&&Array.isArray(b))for(var f=0;f<b.length;f++){var g=b[f];if(g.typeKeywords.some(function(a){return a.toLowerCase()===d})&&g.type===A&&g.owner===n){c=g;break}}if(c)return c.load();throw new e("symbolstyleutils:style-not-found","The style '"+a+"' could not be found",{styleName:a});})}function r(a,b){return a.styleUrl?v(a.styleUrl,b):a.styleName?w(a.styleName,b):l.reject(new e("symbolstyleutils:style-url-and-name-missing",
"Either styleUrl or styleName is required to resolve a style"))}function z(a,b,d){for(var f=a.data,k={portal:d.portal,url:h.urlToObject(a.baseUrl),origin:"portal-item"},n=function(e){if(e.name!==b)return"continue";var f=h.read(e.webRef,k),l={portal:d.portal,url:h.urlToObject(h.removeFile(f)),origin:"portal-item"};return{value:x(f).then(function(f){if((f=m.fromJSON(f.data,l))&&f.isInstanceOf(c.BaseSymbol3D)){if(e.thumbnail)if(e.thumbnail.href){var n=h.read(e.thumbnail.href,k);f.thumbnail=new t.default({url:n})}else e.thumbnail.imageData&&
(f.thumbnail=new t.default({url:"data:image/png;base64,"+e.thumbnail.imageData}));a.styleUrl?f.styleOrigin=new g({portal:d.portal,styleUrl:a.styleUrl,name:b}):a.styleName&&(f.styleOrigin=new g({portal:d.portal,styleName:a.styleName,name:b}))}return f})}},r=0,f=f.items;r<f.length;r++){var A=n(f[r]);if("object"===typeof A)return A.value}return l.reject(new e("symbolstyleutils:symbol-name-not-found","The symbol name '"+b+"' could not be found",{symbolName:b}))}function x(a){return f(h.normalize(a),{responseType:"json",
query:{f:"json"}})}Object.defineProperty(a,"__esModule",{value:!0});var p={};a.fetchStyle=r;a.resolveWebStyleSymbol=function(a,b){return a.name?r(a,b).then(function(c){return z(c,a.name,b)}):l.reject(new e("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))};a.fetchSymbolFromStyle=z;a.styleNameFromItem=function(a){var b=0;for(a=a.typeKeywords;b<a.length;b++){var c=a[b];if(/^Esri.*Style$/.test(c)&&"Esri Style"!==c)return c}};var n="esri_en",A="Style"})},
"esri/renderers/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/object ../../core/Warning ../ClassBreaksRenderer ../HeatmapRenderer ../SimpleRenderer ../UniqueValueRenderer".split(" "),function(b,a,f,c,e,l,h,d,k){function m(a,b,c){if(!a)return null;if(a&&(a.styleName||a.styleUrl)&&"uniqueValue"!==a.type)return c&&c.messages&&c.messages.push(new e("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+a.type+"'",{definition:a,
context:c})),null;b=a?t[a.type]||null:null;if(b)return b=new b,b.read(a,c),b;c&&c.messages&&a&&c.messages.push(new e("renderer:unsupported","Renderers of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:c}));return null}function g(a,b,c){return a?c&&"web-scene"===c.origin&&"heatmap"===a.type?(c.messages&&c.messages.push(new f("renderer:unsupported","Renderer of type '"+a.declaredClass+"' are not supported in scenes.",{renderer:a,context:c})),null):a.write(b,c):null}Object.defineProperty(a,
"__esModule",{value:!0});var t={simple:d,uniqueValue:k,classBreaks:l,heatmap:h};a.read=m;a.writeTarget=function(a,b,d,e){(a=g(a,{},e))&&c.setDeepValue(d,a,b)};a.write=g;a.fromJSON=function(a,b){return m(a,null,b)}})},"esri/core/executeAsync":function(){define("require exports dojo/has ./nextTick ./now ./promiseUtils".split(" "),function(b,a,f,c,e,l){function h(){var a=0===k.length;if(!a){for(var b=e();!a&&e()-b<d;){var f=k[g];if(f){if(!0===f()){var l=m.get(f);k[g]=null;m.delete(f);l()}g=(g+1)%k.length}else k.splice(g,
1),g=(a=0===k.length)?0:g%k.length}a||c(h)}}var d=f("host-browser")?6:200,k=[],m=new Map,g=0;return function(a){return a?l.create(function(b){k.push(a);m.set(a,b);1===k.length&&c(h)},function(){k[k.indexOf(a)]=null;m.delete(a)}):l.reject(new TypeError("callback is not a function"))}})},"esri/core/MapPool":function(){define(["require","exports","./ObjectPool"],function(b,a,f){b=function(){function a(a,b){void 0===a&&(a=50);void 0===b&&(b=50);this._pool=new f(Map,!1,function(a){return a.clear()},b,
a)}a.prototype.acquire=function(){return this._pool.acquire()};a.prototype.release=function(a){this._pool.release(a)};a.acquire=function(){return c.acquire()};a.release=function(a){return c.release(a)};return a}();var c=new b(100);return b})},"esri/core/SetPool":function(){define(["require","exports","./ObjectPool"],function(b,a,f){b=function(){function a(a,b){void 0===a&&(a=50);void 0===b&&(b=50);this._pool=new f(Set,!1,function(a){return a.clear()},b,a)}a.prototype.acquire=function(){return this._pool.acquire()};
a.prototype.release=function(a){this._pool.release(a)};a.acquire=function(){return c.acquire()};a.release=function(a){return c.release(a)};return a}();var c=new b(100);return b})},"esri/views/2d/engine/webgl/rendererInfoUtils":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../Graphic ../../../../arcade/Feature ../../../../support/arcadeUtils ./enums ./visualVariablesUtils".split(" "),function(b,a,f,c,e,l,h,d){function k(a,b,d){if(!a)return null;var e=0,g={};a=
a.clone();var h=a.visualVariables,k=null;if("simple"!==a.type){var t=a.valueExpression;if(!a.field&&t){var p="$$fake"+e++,n=l.createFunction(t);g[p]=function(a,c){m.repurposeFromGraphicLikeObject(a.geometry,a.attributes,d);return l.executeFunction(n,{vars:{$feature:m,$view:l.getViewInfo(c)},spatialReference:b})};a.field=p;a.valueExpression=null;k=function(a,b){b.attributes[p]=g[p](b);return a.valueExpression?a.getSymbol(c.fromJSON(b)):a.getSymbol(b)}}}h&&(a.visualVariables=h.map(function(a){if(a.normalizationField){var c=
a.field,h=a.normalizationField,k="$$fake"+e++;g[k]=function(a,b){return a.attributes[c]/a.attributes[h]};a=f({},a);a.field=k;delete a.normalizationField;return a}if(a.valueExpression&&"$view.scale"!==a.valueExpression){var n=a.valueExpression,k="$$fake"+e++,r=l.createFunction(n);g[k]=function(a,c){m.repurposeFromGraphicLikeObject(a.geometry,a.attributes,d);return l.executeFunction(r,{vars:{$feature:m,$view:l.getViewInfo(c)},spatialReference:b})};a=f({},a);a.field=k;delete a.valueExpression}return a}));
return{renderer:a,normalizingFunctions:g,getSymbolFunction:k}}Object.defineProperty(a,"__esModule",{value:!0});var m=new e;a.createRendererInfo=function(a,b,c){var e=(b=k(a,b,c)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},b.normalizingFunctions),f=b&&b.getSymbolFunction;a=b&&b.renderer||a;b=d.convertVisualVariables(a.visualVariables);return{renderer:a,vvFields:b.vvFields,vvRanges:b.vvRanges,getValue:function(a,b){var c=e[b];return c?c(a):a.attributes[b]},getSymbol:function(a){return f?
f(this.renderer,a):this.renderer.getSymbol?this.renderer.getSymbol.call(this.renderer,a):null}}};a.getNormalizedRenderer=function(a,b,c){return(b=k(a,b,c)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},b.renderer)||a};a.getSymbol=function(a,b){return a.getSymbol(b)};a.isRendererWebGLCompatible=function(a){if(!a||-1===["simple","class-breaks","unique-value","heatmap"].indexOf(a.type))return!1;if(a.visualVariables){var b=0;for(a=a.visualVariables;b<a.length;b++){var c=a[b];switch(c.type){case "color":case "opacity":if(c.stops&&
8<c.stops.length)return!1;break;case "size":if(d.getTypeOfSizeVisualVariable(c)===h.WGLVVFlag.SIZE_FIELD_STOPS&&c.stops&&6<c.stops.length)return!1}}}return!0}})},"esri/Graphic":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./geometry ./PopupTemplate ./core/JSONSupport ./core/lang ./core/accessorSupport/decorators ./geometry/support/typeUtils ./symbols/support/jsonUtils ./symbols/support/typeUtils".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v){b=function(a){function b(b,c,e,f){b=a.call(this,b,c,e,f)||this;b.layer=null;b.sourceLayer=null;Object.defineProperty(b,"uid",{value:d.generateUID()});return b}c(b,a);d=b;b.prototype.normalizeCtorArgs=function(a,b,c,d){return a&&!a.declaredClass?a:{geometry:a,symbol:b,attributes:c,popupTemplate:d}};Object.defineProperty(b.prototype,"attributes",{set:function(a){var b=this._get("attributes");b!==a&&(this._set("attributes",a),this._notifyLayer("attributes",b,a))},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"geometry",{set:function(a){var b=this._get("geometry");b!==a&&(this._set("geometry",a),this._notifyLayer("geometry",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"popupTemplate",{get:function(){return this.get("sourceLayer.popupTemplate")||null},set:function(a){void 0===a?this._clearOverride("popupTemplate"):this._override("popupTemplate",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"symbol",{set:function(a){var b=this._get("symbol");b!==a&&(this._set("symbol",a),this._notifyLayer("symbol",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"visible",{set:function(a){var b=this._get("visible");b!==a&&(this._set("visible",a),this._notifyLayer("visible",b,a))},enumerable:!0,configurable:!0});b.prototype.getAttribute=function(a){return this.attributes&&this.attributes[a]};b.prototype.setAttribute=function(a,b){if(this.attributes){var c=this.getAttribute(a);
this.attributes[a]=b;this._notifyLayer("attributes",c,b,a)}else this.attributes=(c={},c[a]=b,c),this._notifyLayer("attributes",void 0,b,a)};b.prototype.toJSON=function(){return{geometry:this.geometry&&this.geometry.toJSON(),symbol:this.symbol&&this.symbol.toJSON(),attributes:f({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}};b.prototype.clone=function(){return new d({attributes:k.clone(this.attributes),geometry:this.geometry&&this.geometry.clone()||null,layer:this.layer,
popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:this.symbol&&this.symbol.clone()||null,visible:this.visible})};b.prototype._notifyLayer=function(a,b,c,d){this.layer&&(a={graphic:this,property:a,oldValue:b,newValue:c},d&&(a.attributeName=d),this.layer.graphicChanged(a))};e([m.property({value:null})],b.prototype,"attributes",null);e([m.property({value:null,types:g.types,json:{read:l.fromJSON}})],b.prototype,"geometry",null);e([m.property()],b.prototype,
"layer",void 0);e([m.property({dependsOn:["sourceLayer.popupTemplate"],type:h})],b.prototype,"popupTemplate",null);e([m.property()],b.prototype,"sourceLayer",void 0);e([m.property({value:null,types:v.types,json:{read:t.read}})],b.prototype,"symbol",null);e([m.property({type:Boolean,value:!0,set:function(a){}})],b.prototype,"visible",null);return b=d=e([m.subclass("esri.Graphic")],b);var d}(m.declared(d));var w=0;(function(a){a.generateUID=function(){return w++}})(b||(b={}));return b})},"esri/PopupTemplate":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/Collection ./core/date ./core/JSONSupport ./core/kebabDictionary ./core/lang ./core/accessorSupport/decorators ./layers/support/fieldUtils ./support/Action ./support/arcadeUtils".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v,w){var y=k({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),r=k({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.actions=null;b.content="";b.expressionInfos=null;b.fieldInfos=null;b.layerOptions=null;b.overwriteActions=!1;b.title="";b.relatedRecordsInfo=null;return b}c(b,a);d=b;b.prototype.readContent=function(a,b){var c=this,
d=b.description,e=b.mediaInfos;a=b.showAttachments;if((b=b.popupElements)&&b.length)return b.map(function(a){"text"!==a.type||a.text?"media"===a.type&&(a.mediaInfos||e)&&(a.mediaInfos||(a.mediaInfos=e),a.mediaInfos=c._readMediaInfos(a.mediaInfos)):a.text=d;return a});b=[];d?b.push({type:"text",text:d}):b.push({type:"fields"});e&&e.length&&b.push({type:"media",mediaInfos:this._readMediaInfos(e)});a&&b.push({type:"attachments",displayType:"list"});return b.length?b:d};b.prototype.writeContent=function(a,
b){var c=this;b.showAttachments=!1;"string"===typeof a?b.description=a:Array.isArray(a)&&(b.popupElements=m.clone(a),b.popupElements.forEach(function(a){"attachments"!==a.type||b.showAttachments?"media"!==a.type||b.mediaInfos?"text"!==a.type||b.description?"fields"!==a.type||b.fieldInfos||(a.fieldInfos&&(b.fieldInfos=c._writeFieldInfos(m.clone(a.fieldInfos))),delete a.fieldInfos):(a.text&&(b.description=a.text),delete a.text):(a.mediaInfos&&(b.mediaInfos=m.clone(a.mediaInfos),b.mediaInfos.forEach(function(a){a.type=
r.toJSON(a.type)})),delete a.mediaInfos):b.showAttachments=!0;return a}))};b.prototype.writeExpressionInfos=function(a,b){b.expressionInfos=a||null};b.prototype.readFieldInfos=function(a){if(a)return a.forEach(function(a){var b=a.format&&a.format.dateFormat,c=a.stringFieldOption;b&&(a.format.dateFormat=h.fromJSON(b));c&&(a.stringFieldOption=y.fromJSON(c))}),a};b.prototype.writeFieldInfos=function(a,b){b.fieldInfos=a?this._writeFieldInfos(m.clone(a)):a};b.prototype.writeLayerOptions=function(a,b){b.layerOptions=
a||null};b.prototype.writeTitle=function(a,b){b.title=a||""};b.prototype.writeRelatedRecordsInfo=function(a,b){b.relatedRecordsInfo=a||null};Object.defineProperty(b.prototype,"requiredFields",{get:function(){return this.collectRequiredFields()},enumerable:!0,configurable:!0});b.prototype.clone=function(){var a=this.actions,a=a?m.clone(a.toArray()):[];return new d({actions:a,content:Array.isArray(this.content)?m.clone(this.content):this.content,fieldInfos:this.fieldInfos?m.clone(this.fieldInfos):null,
layerOptions:this.layerOptions?m.clone(this.layerOptions):null,overwriteActions:this.overwriteActions,relatedRecordsInfo:this.relatedRecordsInfo?m.clone(this.relatedRecordsInfo):null,title:this.title})};b.prototype.collectRequiredFields=function(){return this._getActionsFields(this.actions).concat(this._getTitleFields(this.title),this._getContentFields(this.content),this._getExpressionInfoFields(this.expressionInfos)).filter(function(a,b,c){return b===c.indexOf(a)})};b.prototype._getContentElementFields=
function(a){var b=this;if(!a||"attachments"===a.type)return[];if("fields"===a.type)return this._getFieldInfoFields(a.fieldInfos||this.fieldInfos);if("media"===a.type)return(a.mediaInfos||[]).reduce(function(a,c){return a.concat(b._getMediaInfoFields(c))},[]);if("text"===a.type)return t.extractFieldNames(a.text)};b.prototype._getMediaInfoFields=function(a){var b=a.caption,c=a.value||{},d=c.fields,e=void 0===d?[]:d,d=c.normalizeField,f=c.tooltipField,g=c.sourceURL,c=c.linkURL;a=t.extractFieldNames(a.title).concat(t.extractFieldNames(b),
t.extractFieldNames(g),t.extractFieldNames(c),e);d&&a.push(d);f&&a.push(f);return a};b.prototype._getContentFields=function(a){var b=this;return"string"===typeof a?t.extractFieldNames(a):Array.isArray(a)?a.reduce(function(a,c){return a.concat(b._getContentElementFields(c))},[]):[]};b.prototype._getExpressionInfoFields=function(a){return a?a.reduce(function(a,b){return a.concat(w.extractFieldNames(b.expression))},[]):[]};b.prototype._getFieldInfoFields=function(a){return a?a.filter(function(a){return"undefined"===
typeof a.visible?!0:!!a.visible}).map(function(a){return a.fieldName}).filter(function(a){return-1===a.indexOf("relationships/")&&-1===a.indexOf("expression/")}):[]};b.prototype._getActionsFields=function(a){var b=this;return a?a.toArray().reduce(function(a,c){return a.concat(b._getActionFields(c))},[]):[]};b.prototype._getActionFields=function(a){return t.extractFieldNames(a.title).concat(t.extractFieldNames(a.className),t.extractFieldNames(a.image))};b.prototype._getTitleFields=function(a){return"string"===
typeof a?t.extractFieldNames(a):[]};b.prototype._readMediaInfos=function(a){a.forEach(function(a){a.type=r.fromJSON(a.type)});return a};b.prototype._writeFieldInfos=function(a){a.forEach(function(a){var b=a.format&&a.format.dateFormat,c=a.stringFieldOption;b&&(a.format.dateFormat=h.toJSON(b));c&&(a.stringFieldOption=y.toJSON(c));a.format||delete a.format});return a};e([g.property({type:l.ofType(v)})],b.prototype,"actions",void 0);e([g.property()],b.prototype,"content",void 0);e([g.reader("content",
["description","popupElements","mediaInfos","showAttachments"])],b.prototype,"readContent",null);e([g.writer("content")],b.prototype,"writeContent",null);e([g.property()],b.prototype,"expressionInfos",void 0);e([g.writer("expressionInfos")],b.prototype,"writeExpressionInfos",null);e([g.property()],b.prototype,"fieldInfos",void 0);e([g.reader("fieldInfos")],b.prototype,"readFieldInfos",null);e([g.writer("fieldInfos")],b.prototype,"writeFieldInfos",null);e([g.property()],b.prototype,"layerOptions",
void 0);e([g.writer("layerOptions")],b.prototype,"writeLayerOptions",null);e([g.property()],b.prototype,"overwriteActions",void 0);e([g.property()],b.prototype,"title",void 0);e([g.writer("title")],b.prototype,"writeTitle",null);e([g.property()],b.prototype,"relatedRecordsInfo",void 0);e([g.writer("relatedRecordsInfo")],b.prototype,"writeRelatedRecordsInfo",null);e([g.property({dependsOn:["actions","title","content","fieldInfos","expressionInfos"],readOnly:!0})],b.prototype,"requiredFields",null);
return b=d=e([g.subclass("esri.PopupTemplate")],b);var d}(g.declared(d))})},"esri/core/date":function(){define(["require","exports","./kebabDictionary"],function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});var c={"short-date":"(datePattern: 'M/d/y', selector: 'date')","short-date-le":"(datePattern: 'd/M/y', selector: 'date')","long-month-day-year":"(datePattern: 'MMMM d, y', selector: 'date')","day-short-month-year":"(datePattern: 'd MMM y', selector: 'date')","long-date":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",
"short-date-short-time":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-le-short-time":"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-short-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","short-date-le-short-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')","short-date-long-time":"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",
"short-date-le-long-time":"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-long-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')","short-date-le-long-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-year":"(datePattern: 'MMMM y', selector: 'date')","short-month-year":"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"};b=f({shortDate:"short-date",
shortDateLE:"short-date-le",longDate:"long-date",dayShortMonthYear:"day-short-month-year",longMonthDayYear:"long-month-day-year",shortDateLongTime:"short-date-long-time",shortDateLELongTime:"short-date-le-long-time",shortDateShortTime:"short-date-short-time",shortDateLEShortTime:"short-date-le-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLongTime24:"short-date-long-time-24",shortDateLELongTime24:"short-date-le-long-time-24",
longMonthYear:"long-month-year",shortMonthYear:"short-month-year"});a.toJSON=b.toJSON;a.fromJSON=b.fromJSON;a.getFormat=function(a){return c[a]}})},"esri/layers/support/fieldUtils":function(){define(["require","exports","dojo/_base/lang"],function(b,a,f){function c(a,b,c){if(a)for(var d=0;d<a.length;d++){var h=a[d],g=f.getObject(h,!1,b);(g=g&&"function"!==typeof g&&e(g,c))&&f.setObject(h,g.name,b)}}function e(a,b){if("string"!==typeof a)return null;if(null!=b){a=a.toLowerCase();for(var c=0;c<b.length;c++){var e=
b[c];if(e&&e.name.toLowerCase()===a)return e}}return null}Object.defineProperty(a,"__esModule",{value:!0});a.extractFieldNames=function(a){if(!a||"string"!==typeof a)return[];a=a.match(/{[^}]*}/g);if(!a)return[];var b=/\{(\w+):.+\}/;return(a=a.filter(function(a){return!(0===a.indexOf("{relationships/")||0===a.indexOf("{expression/"))}).map(function(a){return a.replace(b,"{$1}")}))?a.map(function(a){return a.slice(1,-1)}):[]};a.fixRendererFields=function(b,e){if(null!=b&&null!=e){var d=0;for(b=Array.isArray(b)?
b:[b];d<b.length;d++){var f=b[d];c(a.rendererFields,f,e);if(f.visualVariables)for(var h=0,f=f.visualVariables;h<f.length;h++)c(a.visualVariableFields,f[h],e)}}};a.getField=e;a.rendererFields="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" ");a.visualVariableFields=["field","normalizationField"];a.numericTypes=["integer","small-integer","single","double"];a.isNumericField=
function(b,c){return b?-1<a.numericTypes.indexOf(b.type)&&b.name!==c.objectIdField:!1};a.isStringField=function(a,b){return a?"string"===a.type&&a.name!==b.objectIdField:!1};a.isDateField=function(a){return a?"date"===a.type:!1}})},"esri/support/Action":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Identifiable ../core/accessorSupport/decorators".split(" "),function(b,a,f,c,e,l,h){return function(a){function b(b){b=
a.call(this)||this;b.className=null;b.temporary=!1;b.image=null;b.id=null;b.title=null;b.visible=!0;return b}f(b,a);d=b;b.prototype.clone=function(){return new d({className:this.className,image:this.image,id:this.id,title:this.title,visible:this.visible})};c([h.property()],b.prototype,"className",void 0);c([h.property()],b.prototype,"temporary",void 0);c([h.property()],b.prototype,"image",void 0);c([h.property()],b.prototype,"id",void 0);c([h.property()],b.prototype,"title",void 0);c([h.property()],
b.prototype,"visible",void 0);return b=d=c([h.subclass("esri.support.Action")],b);var d}(h.declared(e,l))})},"esri/views/2d/engine/webgl/enums":function(){define(["require","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});(function(a){a[a.FILL=0]="FILL";a[a.LINE=1]="LINE";a[a.MARKER=2]="MARKER";a[a.TEXT=3]="TEXT";a[a.NONE=4]="NONE";a[a.UNKNOWN=5]="UNKNOWN";a[a.COUNT=5]="COUNT"})(a.WGLGeometryType||(a.WGLGeometryType={}));(function(a){a[a.SUCCEEDED=0]="SUCCEEDED";a[a.FAILED_OUT_OF_MEMORY=
1]="FAILED_OUT_OF_MEMORY"})(a.WGLGeometryTransactionStatus||(a.WGLGeometryTransactionStatus={}));(function(a){a[a.NONE=0]="NONE";a[a.FILL=1]="FILL";a[a.LINE=2]="LINE";a[a.MARKER=3]="MARKER";a[a.TEXT=4]="TEXT";a[a.HITTEST=5]="HITTEST";a[a.HIGHLIGHT=6]="HIGHLIGHT";a[a.CLIP=7]="CLIP";a[a.DEBUG=8]="DEBUG"})(a.WGLDrawPhase||(a.WGLDrawPhase={}));(function(a){a[a.SIZE=0]="SIZE";a[a.COLOR=1]="COLOR";a[a.OPACITY=2]="OPACITY";a[a.ROTATION=3]="ROTATION"})(a.VVType||(a.VVType={}));(function(a){a[a.NONE=0]="NONE";
a[a.OPACITY=1]="OPACITY";a[a.COLOR=2]="COLOR";a[a.ROTATION=4]="ROTATION";a[a.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";a[a.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS";a[a.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";a[a.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(a.WGLVVFlag||(a.WGLVVFlag={}));(function(a){a[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";a[a.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";a[a.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(a.WGLVVTarget||
(a.WGLVVTarget={}));(function(a){a[a.INITIALIZED=0]="INITIALIZED";a[a.NO_DATA=1]="NO_DATA";a[a.READY=2]="READY";a[a.MODIFIED=3]="MODIFIED";a[a.INVALID=4]="INVALID"})(a.TileStatus||(a.TileStatus={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.BUTT=1]="BUTT";a[a.ROUND=2]="ROUND";a[a.SQUARE=3]="SQUARE"})(a.CapType||(a.CapType={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.MITER=1]="MITER";a[a.BEVEL=2]="BEVEL";a[a.ROUND=3]="ROUND"})(a.JoinType||(a.JoinType={}));(function(a){a.SIMPLE_MARKER="esriSMS";a.SIMPLE_LINE=
"esriSLS";a.SIMPLE_FILL="esriSFS";a.PICTURE_MARKER="esriPMS";a.PICTURE_FILL="esriPFS";a.TEXT="esriTS"})(a.EsriSymbolType||(a.EsriSymbolType={}));(function(a){a.SIMPLE_MARKER="simple-marker";a.SIMPLE_LINE="simple-line";a.SIMPLE_FILL="simple-fill";a.PICTURE_MARKER="picture-marker";a.PICTURE_FILL="picture-fill";a.TEXT="text"})(a.EsriSymbolTypeKebab||(a.EsriSymbolTypeKebab={}))})},"esri/views/2d/engine/webgl/visualVariablesUtils":function(){define("require exports ../../../../core/screenUtils ./color ./enums ./Utils ../../../3d/layers/support/FastSymbolUpdates".split(" "),
function(b,a,f,c,e,l,h){function d(a){return l.isNumber(a.minDataValue)&&l.isNumber(a.maxDataValue)&&null!=a.minSize&&null!=a.maxSize?e.WGLVVFlag.SIZE_MINMAX_VALUE:(a.expression&&"view.scale"===a.expression||a.valueExpression&&"$view.scale"===a.valueExpression)&&Array.isArray(a.stops)?e.WGLVVFlag.SIZE_SCALE_STOPS:(null!=a.field||a.expression&&"view.scale"!==a.expression||a.valueExpression&&"$view.scale"!==a.valueExpression)&&Array.isArray(a.stops)?e.WGLVVFlag.SIZE_FIELD_STOPS:(null!=a.field||a.expression&&
"view.scale"!==a.expression||a.valueExpression&&"$view.scale"!==a.valueExpression)&&null!=a.valueUnit?e.WGLVVFlag.SIZE_UNIT_VALUE:e.WGLVVFlag.NONE}function k(a){return{value:a.value,size:f.toPt(a.size)}}function m(a){return a.map(function(a){return k(a)})}function g(a){return"string"===typeof a||"number"===typeof a?f.toPt(a):{type:"size",expression:a.expression,stops:m(a.stops)}}function t(a){var b={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if(l.isString(a.field))if(a.stops){if(8<a.stops.length)return null;
a=a.stops;for(var c=0;8>c;++c){var d=a[Math.min(c,a.length-1)];b.values[c]=d.value;b.opacities[c]=d.opacity}}else if(a.opacityValues){if(!l.isDefined(a.minDataValue)||!l.isDefined(a.maxDataValue)||2!==a.opacityValues.length)return null;b.values[0]=a.minDataValue;b.opacities[0]=a.opacityValues[0];b.values[1]=a.maxDataValue;b.opacities[1]=a.opacityValues[1];for(c=2;8>c;++c)b.values[c]=a.maxDataValue,b.opacities[c]=a.opacityValues[1]}else return null;else if(a.stops&&0<=a.stops.length||a.opacityValues&&
0<=a.opacityValues.length)for(a=a.stops&&0<=a.stops.length?a.stops[0].opacity:a.opacityValues[0],c=0;8>c;c++)b.values[c]=Infinity,b.opacities[c]=a;else return null;return b}Object.defineProperty(a,"__esModule",{value:!0});a.getTypeOfSizeVisualVariable=d;a.getVisualVariableSizeValueRepresentationRatio=function(a,b){if(!a||!b)return a;switch(b){case "radius":case "distance":return 2*a;case "area":return Math.sqrt(a)}return a};a.stopToSizeStop=k;a.normalizeSizeStops=m;a.normalizeSizeElement=g;a.getVisualVariablesFields=
function(a){var b=a&&0<a.length?{}:null;b&&a.forEach(function(a){var c=a.type;a.field&&(b[c]=a.field)});return b};a.convertVisualVariables=function(a){var b=a&&0<a.length?{}:null,k=b?{}:null;if(!b)return{vvFields:b,vvRanges:k};for(var l=0;l<a.length;l++){var v=a[l],x=v.type;v.field&&(b[x]=v.field);if("size"===x){k.size||(k.size={});var p=v;switch(d(p)){case e.WGLVVFlag.SIZE_MINMAX_VALUE:k.size.minMaxValue={minDataValue:p.minDataValue,maxDataValue:p.maxDataValue,minSize:g(p.minSize),maxSize:g(p.maxSize)};
break;case e.WGLVVFlag.SIZE_SCALE_STOPS:k.size.scaleStops={stops:m(p.stops)};break;case e.WGLVVFlag.SIZE_FIELD_STOPS:for(var v=[],x=[],p=m(p.stops),n=p.length,A=0;6>A;A++){var B=p[Math.min(A,n-1)];v.push(B.value);x.push(f.pt2px(B.size))}k.size.fieldStops={values:v,sizes:x};break;case e.WGLVVFlag.SIZE_UNIT_VALUE:k.size.unitValue={unit:p.valueUnit,valueRepresentation:p.valueRepresentation}}}else if("color"===x)for(v=h.convertVisualVariables([v],{modelSize:null,symbolSize:null,unitInMeters:1,transformation:null}),
k.color=v.color,A=0;32>A;A+=4)c.premultiplyAlpha(k.color.colors,A,!0);else"opacity"===x?k.opacity=t(v):"rotation"===x&&(k.rotation={type:v.rotationType})}return{vvFields:b,vvRanges:k}}})},"esri/views/2d/engine/webgl/color":function(){define(["require","exports","./number"],function(b,a,f){function c(a,b){Array.isArray(b)?(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]):(a[0]=b.r,a[1]=b.g,a[2]=b.b,a[3]=b.a);return a}function e(a,b,c){void 0===b&&(b=0);void 0===c&&(c=!1);var d=a[b+3];a[b+0]*=d;a[b+1]*=d;a[b+
2]*=d;c||(a[b+3]*=255);return a}Object.defineProperty(a,"__esModule",{value:!0});a.white=[255,255,255,1];var l=[0,0,0,0];a.premultiplyAlpha=e;a.copyAndPremultiply=function(a){return e(c([],a))};a.premultiplyAlphaUint32=function(a){e(c(l,a));return f.i8888to32(l[0],l[1],l[2],l[3])};a.premultiplyAlphaRGBA=function(a){var b=a.a;return f.i8888to32(a.r*b,a.g*b,a.b*b,255*b)}})},"esri/views/2d/engine/webgl/number":function(){define(["require","exports"],function(b,a){Object.defineProperty(a,"__esModule",
{value:!0});var f=new Float32Array(1),c=new Uint32Array(f.buffer);a.nextHighestPowerOfTwo=function(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a};a.toUint32=function(a){f[0]=a;return c[0]};a.i1616to32=function(a,b){return 65535&a|b<<16};a.i8888to32=function(a,b,c,d){return a&255|(b&255)<<8|(c&255)<<16|d<<24};a.i8816to32=function(a,b,c){return a&255|(b&255)<<8|c<<16};a.numTo32=function(a){return a|0}})},"esri/views/2d/engine/webgl/Utils":function(){define("require exports ../../../../arcade/Dictionary ../../../../arcade/Feature ../../../../core/Logger ../../../../core/screenUtils ../../../../support/arcadeUtils ./color ./enums ./SymbolProperties".split(" "),
function(b,a,f,c,e,l,h,d,k,m){function g(a){return a.map(function(a){return a.name})}function t(a){for(var b={},c=0;c<a.length;c++){var d=a[c];b[d.name]=d.strideInBytes}return b}function v(a){switch(a){case "esriSMS":return"simple-marker";case "esriPMS":return"picture-marker";case "esriSLS":return"simple-line";case "esriPLS":return"picture-line";case "esriSFS":return"simple-fill";case "esriPFS":return"picture-fill";case "esriTS":return"text"}return a}function w(a){if(a=v(a.type)){switch(a){case "simple-marker":case "picture-marker":return!0;
case "CIMPointSymbol":return!0}return!1}}function y(a){if(a=v(a.type)){switch(a){case "simple-fill":case "picture-fill":return!0;case "CIMPolygonSymbol":return!0}return!1}}function r(a){if(a=v(a.type)){switch(a){case "simple-line":case "picture-line":return!0;case "CIMLineSymbol":return!0}return!1}}function z(a){if(a=v(a.type)){switch(a){case "text":return!0;case "CIMTextSymbol":return!0}return!1}}function x(a){return a&&a.length||0}function p(a){return"string"===typeof a}Object.defineProperty(a,
"__esModule",{value:!0});var n=e.getLogger("esri.views.2d.engine.webgl.Utils");a.C_HITTEST_SEARCH_SIZE=4;a.C_VBO_GEOMETRY="geometry";a.C_VBO_PERINSTANCE="per_instance";a.C_VBO_PERINSTANCE_VV="per_instance_vv";a.C_VBO_VISIBILITY="visibility";a.C_ICON_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:24,divisor:0}];a.C_ICON_VERTEX_DEF_VV=[{name:a.C_VBO_GEOMETRY,strideInBytes:40,divisor:0}];a.C_ICON_HEATMAP=[{name:a.C_VBO_GEOMETRY,strideInBytes:28,divisor:0}];a.C_FILL_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,
strideInBytes:24,divisor:0}];a.C_FILL_VERTEX_DEF_VV=[{name:a.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];a.C_LINE_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];a.C_LINE_VERTEX_DEF_VV=[{name:a.C_VBO_GEOMETRY,strideInBytes:44,divisor:0}];a.C_TEXT_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];a.C_TEXT_VERTEX_DEF_VV=[{name:a.C_VBO_GEOMETRY,strideInBytes:36,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];
a.C_ICON_VERTEX_NAMES=g(a.C_ICON_VERTEX_DEF);a.C_ICON_VERTEX_NAMES_VV=g(a.C_ICON_VERTEX_DEF_VV);a.C_FILL_VERTEX_NAMES=g(a.C_FILL_VERTEX_DEF);a.C_FILL_VERTEX_NAMES_VV=g(a.C_FILL_VERTEX_DEF_VV);a.C_LINE_VERTEX_NAMES=g(a.C_LINE_VERTEX_DEF);a.C_LINE_VERTEX_NAMES_VV=g(a.C_LINE_VERTEX_DEF_VV);a.C_TEXT_VERTEX_NAMES=g(a.C_TEXT_VERTEX_DEF);a.C_TEXT_VERTEX_NAMES_VV=g(a.C_TEXT_VERTEX_DEF_VV);a.C_ICON_STRIDE_SPEC=t(a.C_ICON_VERTEX_DEF);a.C_ICON_STRIDE_SPEC_VV=t(a.C_ICON_VERTEX_DEF_VV);a.C_ICON_STRIDE_SPEC_HEATMAP=
t(a.C_ICON_HEATMAP);a.C_FILL_STRIDE_SPEC=t(a.C_FILL_VERTEX_DEF);a.C_FILL_STRIDE_SPEC_VV=t(a.C_FILL_VERTEX_DEF_VV);a.C_LINE_STRIDE_SPEC=t(a.C_LINE_VERTEX_DEF);a.C_LINE_STRIDE_SPEC_VV=t(a.C_LINE_VERTEX_DEF_VV);a.C_TEXT_STRIDE_SPEC=t(a.C_TEXT_VERTEX_DEF);a.C_TEXT_STRIDE_SPEC_VV=t(a.C_TEXT_VERTEX_DEF_VV);a.getStrides=function(b,c,d){void 0===d&&(d=!1);switch(b){case k.WGLGeometryType.MARKER:return c?a.C_ICON_STRIDE_SPEC_VV:d?a.C_ICON_STRIDE_SPEC_HEATMAP:a.C_ICON_STRIDE_SPEC;case k.WGLGeometryType.FILL:return c?
a.C_FILL_STRIDE_SPEC_VV:a.C_FILL_STRIDE_SPEC;case k.WGLGeometryType.LINE:return c?a.C_LINE_STRIDE_SPEC_VV:a.C_LINE_STRIDE_SPEC;case k.WGLGeometryType.TEXT:return c?a.C_TEXT_STRIDE_SPEC_VV:a.C_TEXT_STRIDE_SPEC}return null};a.getSymbolGeometryType=function(a){return w(a)?k.WGLGeometryType.MARKER:r(a)?k.WGLGeometryType.LINE:y(a)?k.WGLGeometryType.FILL:z(a)?k.WGLGeometryType.TEXT:k.WGLGeometryType.UNKNOWN};a.normalizeSymbolType=v;a.isMarkerSymbol=w;a.isFillSymbol=y;a.isLineSymbol=r;a.isPictureSymbol=
function(a){if(a=v(a.type))switch(a){case "picture-marker":case "picture-line":case "picture-fill":return!0}return!1};a.isTextSymbol=z;a.getTextProperties=function(a){return m.TextProperties.pool.acquire(a.color?d.copyAndPremultiply(a.color):[255,255,255,255],a.haloColor?d.copyAndPremultiply(a.haloColor):[255,255,255,255],l.pt2px(a.haloSize),l.pt2px(a.font.size),a.angle*Math.PI/180,a.xoffset/a.font.size,a.yoffset/a.font.size,"left"===a.horizontalAlignment?0:"right"===a.horizontalAlignment?1:.5,"top"===
a.verticalAlignment?0:"bottom"===a.verticalAlignment?1:.5)};a.isSameUniformValue=function(a,b){return!1};a.isSameMaterialInfo=function(a,b){if(a.materialKey!==b.materialKey||x(a.texBindingInfo)!==x(b.texBindingInfo)||x(a.materialParams)!==x(b.materialParams))return!1;for(var c=a.texBindingInfo.length,d=0;d<c;++d){var e=a.texBindingInfo[d],f=b.texBindingInfo[d];if(e.unit!==f.unit||e.pageId!==f.pageId||e.semantic!==f.semantic)return!1}a=a.materialParams.length;for(d=0;d<a;)return!1;return!0};a.serializeString=
function(a,b,c){for(var d=0,e=a.length,f=0;f<e;++f)b&&(b[c+d]=a.charCodeAt(f)),++d;b&&(b[c+d]=0);++d;return d};a.deserializeString=function(a,b,c){var d=0;a.s="";for(var e=!0;e;){var f=b[c+d];++d;0!==f?a.s+=String.fromCharCode(f):e=!1}return d};a.isDefined=function(a){return null!==a&&void 0!==a};a.isNumber=function(a){return"number"===typeof a};a.isString=p;a.isStringOrNull=function(a){return null==a||p(a)};a.lerp=function(a,b,c){return a+(b-a)*c};b=function(){function a(){this._arr=[];this._push=
this._push.bind(this)}a.prototype._push=function(a,b){this._arr.push(b)};a.prototype.getKeys=function(a){this._arr.length=0;a&&a.forEach(this._push);return this._arr};return a}();a.KeysGetter=b;b=function(){function a(){this._arr=[];this._push=this._push.bind(this)}a.prototype._push=function(a,b){this._arr.push(a)};a.prototype.getValues=function(a){this._arr.length=0;a&&a.forEach(this._push);return this._arr};return a}();a.ValuesGetter=b;a.getCapType=function(a){switch(a){case "butt":return k.CapType.BUTT;
case "round":return k.CapType.ROUND;case "square":return k.CapType.SQUARE;default:return n.error("Cannot interpret unknown cap: "+a),k.CapType.UNKNOWN}};a.getJoinType=function(a){switch(a){case "miter":return k.JoinType.MITER;case "bevel":return k.JoinType.BEVEL;case "round":return k.JoinType.ROUND;default:return n.error("Cannot interpret unknown join: "+a),k.JoinType.UNKNOWN}};a.getVVType=function(a){switch(a){case "opacity":return k.VVType.OPACITY;case "color":return k.VVType.COLOR;case "rotation":return k.VVType.ROTATION;
case "size":return k.VVType.SIZE;default:return n.error("Cannot interpret unknown vv: "+a),null}};a.createArcadeFunction=function(a,b){var d=a.spatialReference,e=a.layer,g=h.createFunction(a.valueExpression),k=new c;return function(a,c){k.repurposeFromGraphicLikeObject(a.geometry,a.attributes,e);a=c&&new f({viewingMode:c.viewingMode,scale:c.scale});a=h.executeFunction(g,{vars:{$feature:k,$view:a||{}},spatialReference:d});return b?b(a):a}};a.copyMeshData=function(a,b,c,d,e,f,g){for(var h in f)for(var k=
f[h].stride,l=f[h].data,m=c[h].data,n=k*e.vertexCount/4,r=k*a/4,t=k*e.vertexFrom/4,k=0;k<n;++k)m[k+r]=l[k+t];c=e.indexCount;for(k=0;k<c;++k)d[k+b]=g[k+e.indexFrom]-e.vertexFrom+a}})},"esri/views/2d/engine/webgl/SymbolProperties":function(){define(["require","exports","../../../../core/ObjectPool"],function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});b=function(){function a(){this.color=[0,0,0,0];this.haloColor=[0,0,0,0];this.haloSize=0;this.size=12;this.vAnchor=this.hAnchor=this.offsetY=
this.offsetX=this.angle=0}a.prototype.acquire=function(a,b,c,d,f,m,g,t,v){this.color=a;this.haloColor=b;this.haloSize=c;this.size=d;this.angle=f;this.offsetX=m;this.offsetY=g;this.hAnchor=t;this.vAnchor=v};a.prototype.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=this.size=this.haloSize=this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0};a.pool=new f(a);return a}();a.TextProperties=
b})},"esri/views/3d/layers/support/FastSymbolUpdates":function(){define(["require","exports","../../../../renderers/support/utils","../graphics/graphicUtils","../../lib/glMatrix"],function(b,a,f,c,e){function l(a){return null!==a&&void 0!==a}function h(a){return"number"===typeof a}function d(a,b){a&&a.push(b)}function k(a,b,c,e,g){var k=a.minSize,n=a.maxSize;if(a.expression)return d(g,"Could not convert size info: expression not supported"),!1;if(a.useSymbolValue)return a=e.symbolSize[c],b.minSize[c]=
a,b.maxSize[c]=a,b.offset[c]=b.minSize[c],b.factor[c]=0,b.type[c]=1,!0;if(l(a.field)){if(l(a.stops)){if(2===a.stops.length&&h(a.stops[0].size)&&h(a.stops[1].size))return m(a.stops[0].size,a.stops[1].size,a.stops[0].value,a.stops[1].value,b,c),b.type[c]=1,!0;d(g,"Could not convert size info: stops only supported with 2 elements");return!1}if(h(k)&&h(n)&&l(a.minDataValue)&&l(a.maxDataValue))return m(k,n,a.minDataValue,a.maxDataValue,b,c),b.type[c]=1,!0;if(null!=f.meterIn[a.valueUnit])return b.minSize[c]=
-Infinity,b.maxSize[c]=Infinity,b.offset[c]=0,b.factor[c]=1/f.meterIn[a.valueUnit],b.type[c]=1,!0;"unknown"===a.valueUnit?d(g,"Could not convert size info: proportional size not supported"):d(g,"Could not convert size info: scale-dependent size not supported");return!1}if(!l(a.field)){if(a.stops&&a.stops[0]&&h(a.stops[0].size))return b.minSize[c]=a.stops[0].size,b.maxSize[c]=a.stops[0].size,b.offset[c]=b.minSize[c],b.factor[c]=0,b.type[c]=1,!0;if(h(k))return b.minSize[c]=k,b.maxSize[c]=k,b.offset[c]=
k,b.factor[c]=0,b.type[c]=1,!0}d(g,"Could not convert size info: unsupported variant of sizeInfo");return!1}function m(a,b,c,d,e,f){d=0<Math.abs(d-c)?(b-a)/(d-c):0;e.minSize[f]=0<d?a:b;e.maxSize[f]=0<d?b:a;e.offset[f]=a-c*d;e.factor[f]=d}function g(a,b,c,e){if(a.normalizationField||a.valueRepresentation)return d(e,"Could not convert size info: unsupported property"),null;var f=a.field;if(null!=f&&"string"!==typeof f)return d(e,"Could not convert size info: field is not a string"),null;if(!b.size)b.size=
{field:a.field,minSize:[0,0,0],maxSize:[0,0,0],offset:[0,0,0],factor:[0,0,0],type:[0,0,0]};else if(a.field)if(!b.size.field)b.size.field=a.field;else if(a.field!==b.size.field)return d(e,"Could not convert size info: multiple fields in use"),null;switch(a.axis){case "width":return(f=k(a,b.size,0,c,e))?b:null;case "height":return(f=k(a,b.size,2,c,e))?b:null;case "depth":return(f=k(a,b.size,1,c,e))?b:null;case "width-and-depth":return(f=k(a,b.size,0,c,e))&&k(a,b.size,1,c,e),f?b:null;case null:case void 0:case "all":return(f=
(f=(f=k(a,b.size,0,c,e))&&k(a,b.size,1,c,e))&&k(a,b.size,2,c,e))?b:null;default:return d(e,'Could not convert size info: unknown axis "'+a.axis+'""'),null}}function t(a,b,c){for(var e=0;3>e;++e){var f=b.unitInMeters;1===a.type[e]&&(f*=b.modelSize[e],a.type[e]=2);a.minSize[e]/=f;a.maxSize[e]/=f;a.offset[e]/=f;a.factor[e]/=f}if(0!==a.type[0])b=0;else if(0!==a.type[1])b=1;else if(0!==a.type[2])b=2;else return d(c,"No size axis contains a valid size or scale"),!1;for(e=0;3>e;++e)0===a.type[e]&&(a.minSize[e]=
a.minSize[b],a.maxSize[e]=a.maxSize[b],a.offset[e]=a.offset[b],a.factor[e]=a.factor[b],a.type[e]=a.type[b]);return!0}function v(a,b,c){a[4*b+0]=c.r/255;a[4*b+1]=c.g/255;a[4*b+2]=c.b/255;a[4*b+3]=c.a}function w(a,b,c){if(a.normalizationField)return d(c,"Could not convert color info: unsupported property"),null;if("string"===typeof a.field)if(a.stops){if(8<a.stops.length)return d(c,"Could not convert color info: too many color stops"),null;b.color={field:a.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};a=a.stops;for(c=0;8>c;++c){var e=a[Math.min(c,a.length-1)];b.color.values[c]=e.value;v(b.color.colors,c,e.color)}}else if(a.colors){if(!l(a.minDataValue)||!l(a.maxDataValue))return d(c,"Could not convert color info: missing data values"),null;if(2!==a.colors.length)return d(c,"Could not convert color info: invalid colors array"),null;b.color={field:a.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0]};b.color.values[0]=a.minDataValue;v(b.color.colors,0,a.colors[0]);b.color.values[1]=a.maxDataValue;v(b.color.colors,1,a.colors[1]);for(c=2;8>c;++c)b.color.values[c]=a.maxDataValue,v(b.color.colors,c,a.colors[1])}else return d(c,"Could not convert color info: missing stops or colors"),null;else if(a.stops&&0<=a.stops.length||a.colors&&0<=a.colors.length)for(a=a.stops&&0<=a.stops.length?a.stops[0].color:a.colors[0],b.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},c=0;8>c;c++)b.color.values[c]=Infinity,v(b.color.colors,c,a);else return d(c,"Could not convert color info: no field and no colors/stops"),null;return b}function y(a,b,c,d){a=2===c&&"arithmetic"===a.rotationType;b.offset[c]=a?90:0;b.factor[c]=a?-1:1;b.type[c]=1}function r(a,b,c){if("string"!==typeof a.field)return d(c,"Could not convert rotation info: field is not a string"),null;if(!b.rotation)b.rotation={field:a.field,offset:[0,0,0],factor:[1,
1,1],type:[0,0,0]};else if(a.field)if(!b.rotation.field)b.rotation.field=a.field;else if(a.field!==b.rotation.field)return d(c,"Could not convert rotation info: multiple fields in use"),null;switch(a.axis){case "tilt":return y(a,b.rotation,0,c),b;case "roll":return y(a,b.rotation,1,c),b;case null:case void 0:case "heading":return y(a,b.rotation,2,c),b;default:return d(c,'Could not convert rotation info: unknown axis "'+a.axis+'""'),null}}function z(a,b,c){if(!a)return null;var e=!b.supportedTypes||
!!b.supportedTypes.size,f=!b.supportedTypes||!!b.supportedTypes.color,h=!b.supportedTypes||!!b.supportedTypes.rotation;return(a=a.reduce(function(a,k){if(!a)return a;if(k.valueExpression)return d(c,"Could not convert visual variables: arcade expressions not supported"),null;switch(k.type){case "size":return e?g(k,a,b,c):a;case "color":return f?w(k,a,c):a;case "rotation":return h?r(k,a,c):a;default:return d(c,"Could not convert visual variables: unsupported type "+k.type),null}},{size:null,color:null,
rotation:null}))&&a.size&&!t(a.size,b,c)?null:a}function x(a,b,c){if(!!a!==!!b||a&&a.field!==b.field)return!1;if(a&&"rotation"===c)for(c=0;3>c;c++)if(a.type[c]!==b.type[c]||a.offset[c]!==b.offset[c]||a.factor[c]!==b.factor[c])return!1;return!0}function p(a,b){var c={vvSizeEnabled:!1,vvSizeMinSize:null,vvSizeMaxSize:null,vvSizeOffset:null,vvSizeFactor:null,vvSizeValue:null,vvColorEnabled:!1,vvColorValues:null,vvColorColors:null,vvSymbolAnchor:null,vvSymbolRotation:null},d=a&&null!=a.size;a&&a.size?
(c.vvSizeEnabled=!0,c.vvSizeMinSize=a.size.minSize,c.vvSizeMaxSize=a.size.maxSize,c.vvSizeOffset=a.size.offset,c.vvSizeFactor=a.size.factor):a&&d&&(c.vvSizeValue=b.transformation.scale);a&&d&&(c.vvSymbolAnchor=b.transformation.anchor,c.vvSymbolRotation=b.transformation.rotation);a&&a.color&&(c.vvColorEnabled=!0,c.vvColorValues=a.color.values,c.vvColorColors=a.color.colors);return c}Object.defineProperty(a,"__esModule",{value:!0});a.convertVisualVariables=z;a.initFastSymbolUpdatesState=function(a,
b,c){return b&&a&&!a.disableFastUpdates?(a=z(a.visualVariables,c))?{enabled:!0,visualVariables:a,materialParameters:p(a,c),customTransformation:a&&null!=a.size}:{enabled:!1}:{enabled:!1}};a.updateFastSymbolUpdatesState=function(a,b,c){if(!b||!a.enabled)return!1;var d=a.visualVariables;b=z(b.visualVariables,c);if(!(b&&x(d.size,b.size,"size")&&x(d.color,b.color,"color")&&x(d.rotation,b.rotation,"rotation")))return!1;a.visualVariables=b;a.materialParameters=p(b,c);a.customTransformation=b&&null!=b.size;
return!0};a.getMaterialParams=p;var n;(function(a){var b=e.mat4d,d=e.vec3,f=b.create(),g=d.create();a.evaluateModelTransform=function(a,d,e){if(!a.vvSizeEnabled)return e;b.set(e,f);c.computeObjectRotation(a.vvSymbolRotation[2],a.vvSymbolRotation[0],a.vvSymbolRotation[1],f);if(a.vvSizeEnabled){for(e=0;3>e;++e){var h=a.vvSizeOffset[e]+d[0]*a.vvSizeFactor[e],k=e;var l=a.vvSizeMinSize[e],m=a.vvSizeMaxSize[e],h=h<l?l:h>m?m:h;g[k]=h}b.scale(f,g,f)}else b.scale(f,a.vvSizeValue,f);b.translate(f,a.vvSymbolAnchor,
f);return f}})(n||(n={}));a.evaluateModelTransform=n.evaluateModelTransform})},"esri/views/3d/layers/graphics/graphicUtils":function(){define("require exports ../../../../geometry ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/centroid ../../../../geometry/support/coordsUtils ../../../../geometry/support/webMercatorUtils ../../../../layers/graphics/dehydratedFeatures ../../lib/glMatrix ../../support/mathUtils".split(" "),function(b,
a,f,c,e,l,h,d,k,m,g){function t(a){var b=a.paths[0];if(!b||0===b.length)return null;b=h.getPointOnPath(b,h.getPathLength(b)/2);return k.makeDehydratedPoint(b[0],b[1],b[2],a.spatialReference)}function v(a){if(Array.isArray(a)){for(var b=0;b<a.length;b++)if(!v(a[b]))return!1;return!0}return null==a||0<=a}Object.defineProperty(a,"__esModule",{value:!0});var w=[1,1,1];a.computeCentroid=function(a){if("point"===a.type)return a;if(k.isHydratedGeometry(a))switch(a.type){case "extent":return a.center;case "polygon":return a.centroid;
case "polyline":return t(a);case "mesh":return a.extent.center}else switch(a.type){case "extent":var b=g.isFinite(a.zmin);return k.makeDehydratedPoint(.5*(a.xmax+a.xmin),.5*(a.ymax+a.ymin),b?.5*(a.zmax+a.zmin):void 0,a.spatialReference);case "polygon":return b=l.ringsCentroid(a.rings,k.hasZ(a)),k.makeDehydratedPoint(b[0],b[1],b[2],a.spatialReference);case "polyline":return t(a)}};a.convertPointSR=function(a,b){var c=a.spatialReference;c.isWebMercator&&b.isWGS84?(d.xyToLngLat(a.x,a.y,y),a.x=y[0],a.y=
y[1],a.spatialReference=f.SpatialReference.WGS84):b.isWebMercator&&c.isWGS84&&(d.lngLatToXY(a.x,a.y,y),a.x=y[0],a.y=y[1],a.spatialReference=f.SpatialReference.WebMercator)};a.enlargeExtent=function(a,b,c){if(a){b||(b=e.create());var d=.5*a.width*(c-1);c=.5*a.height*(c-1);a.width<1E-7*a.height?d+=c/20:a.height<1E-7*a.width&&(c+=d/20);m.vec4d.set4(a.xmin-d,a.ymin-c,a.xmax+d,a.ymax+c,b);return b}return null};a.updateVertexAttributeAuxpos1w=function(a,b){for(var c=0;c<a.geometries.length;++c){var d=a.geometries[c].data.vertexAttributes.auxpos1;
d&&d.data[3]!==b&&(d.data[3]=b,a.geometryVertexAttrsUpdated(c))}};a.mixinColorAndOpacity=function(a,b){var c=[1,1,1,1];null!=a&&(c[0]=a[0],c[1]=a[1],c[2]=a[2]);null!==b&&void 0!==b?c[3]=b:null!=a&&3<a.length&&(c[3]=a[3]);return c};a.overrideColor=function(a,b,c,d,e,f){void 0===f&&(f=[0,0,0,0]);for(var g=0;3>g;++g)f[g]=a&&null!=a[g]?a[g]:c&&null!=c[g]?c[g]:e[g];f[3]=null!=b?b:null!=d?d:e[3];return f};a.computeObjectScale=function(a,b,c,d){void 0===a&&(a=w);void 0===d&&(d=1);var e=Array(3);if(null==
b||null==c)e[0]=1,e[1]=1,e[2]=1;else{for(var f=void 0,g=0,h=2;0<=h;h--){var k=a[h],l=void 0,m=null!=k,t=0===h&&!f&&!m,p=c[h];"symbolValue"===k||t?l=0!==p?b[h]/p:1:m&&"proportional"!==k&&isFinite(k)&&(l=0!==p?k/p:1);null!=l&&(f=e[h]=l,g=Math.max(g,Math.abs(l)))}for(h=2;0<=h;h--)null==e[h]?e[h]=f:0===e[h]&&(e[h]=.001*g)}for(h=2;0<=h;h--)e[h]/=d;return e};a.computeSizeWithResourceSize=function(a,b){var c=b.width,d=b.depth,e=b.height;b=b.isPrimitive?10:1;if(null==c&&null==e&&null==d)return[b*a[0],b*a[1],
b*a[2]];for(var c=[c,d,e],f,d=0;3>d;d++)if(e=c[d],null!=e){f=e/a[d];break}for(d=0;3>d;d++)null==c[d]&&(c[d]=a[d]*f);return c};a.validateSymbolLayerSize=function(a){null!=a.isPrimitive&&(a=[a.width,a.depth,a.height]);return v(a)?null:"Symbol sizes may not be negative values"};a.computeObjectRotation=function(a,b,c,d){void 0===d&&(d=m.mat4d.identity());a=a||0;b=b||0;c=c||0;0!==a&&m.mat4d.rotateZ(d,-a/180*Math.PI,d);0!==b&&m.mat4d.rotateX(d,b/180*Math.PI,d);0!==c&&m.mat4d.rotateY(d,c/180*Math.PI,d);
return d};a.demResolutionForBoundingBox=function(a,b){return null!=b.minDemResolution?b.minDemResolution:c.isPoint(a)?b.minDemResolutionForPoints:.01*c.maximumDimension(a)};var y=[0,0]})},"esri/geometry/support/aaBoundingBox":function(){define(["require","exports","../Extent","./aaBoundingRect"],function(b,a,f,c){function e(b){void 0===b&&(b=a.ZERO);return[b[0],b[1],b[2],b[3],b[4],b[5]]}function l(a){return a[0]>=a[3]?0:a[3]-a[0]}function h(a){return a[1]>=a[4]?0:a[4]-a[1]}function d(a){return a[2]>=
a[5]?0:a[5]-a[2]}function k(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a}function m(a){return 6===a.length}Object.defineProperty(a,"__esModule",{value:!0});a.create=e;a.fromValues=function(a,b,c,d,e,f){return[a,b,c,d,e,f]};a.fromExtent=function(a,b){void 0===b&&(b=e());b[0]=a.xmin;b[1]=a.ymin;b[2]=a.zmin;b[3]=a.xmax;b[4]=a.ymax;b[5]=a.zmax;return b};a.toExtent=function(a,b){return isFinite(a[2])||isFinite(a[5])?new f({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],zmin:a[2],
zmax:a[5],spatialReference:b}):new f({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],spatialReference:b})};a.fromMinMax=function(a,b,c){void 0===c&&(c=e());c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=b[0];c[4]=b[1];c[5]=b[2];return c};a.expandPointInPlace=function(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[3]&&(a[3]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[4]&&(a[4]=b[1]);b[2]<a[2]&&(a[2]=b[2]);b[2]>a[5]&&(a[5]=b[2])};a.expand=function(a,b,d){void 0===d&&(d=a);m(b)?(d[0]=Math.min(a[0],b[0]),d[1]=Math.min(a[1],b[1]),d[2]=Math.min(a[2],
b[2]),d[3]=Math.max(a[3],b[3]),d[4]=Math.max(a[4],b[4]),d[5]=Math.max(a[5],b[5])):c.is(b)?(d[0]=Math.min(a[0],b[0]),d[1]=Math.min(a[1],b[1]),d[3]=Math.max(a[3],b[2]),d[4]=Math.max(a[4],b[3])):2===b.length?(d[0]=Math.min(a[0],b[0]),d[1]=Math.min(a[1],b[1]),d[3]=Math.max(a[3],b[0]),d[4]=Math.max(a[4],b[1])):3===b.length&&(d[0]=Math.min(a[0],b[0]),d[1]=Math.min(a[1],b[1]),d[2]=Math.min(a[2],b[2]),d[3]=Math.max(a[3],b[0]),d[4]=Math.max(a[4],b[1]),d[5]=Math.max(a[5],b[2]));return d};a.expandWithBuffer=
function(a,b,c,d,e){void 0===e&&(e=a);var f=a[0],g=a[1],h=a[2],k=a[3],l=a[4];a=a[5];for(var m=0;m<d;m++)f=Math.min(f,b[c+3*m]),g=Math.min(g,b[c+3*m+1]),h=Math.min(h,b[c+3*m+2]),k=Math.max(k,b[c+3*m]),l=Math.max(l,b[c+3*m+1]),a=Math.max(a,b[c+3*m+2]);e[0]=f;e[1]=g;e[2]=h;e[3]=k;e[4]=l;e[5]=a;return e};a.expandWithNestedArray=function(a,b,c,d){void 0===d&&(d=a);var e=b.length,f=a[0],g=a[1],h=a[2],k=a[3],l=a[4];a=a[5];if(c)for(c=0;c<e;c++){var m=b[c],f=Math.min(f,m[0]),g=Math.min(g,m[1]),h=Math.min(h,
m[2]),k=Math.max(k,m[0]),l=Math.max(l,m[1]);a=Math.max(a,m[2])}else for(c=0;c<e;c++)m=b[c],f=Math.min(f,m[0]),g=Math.min(g,m[1]),k=Math.max(k,m[0]),l=Math.max(l,m[1]);d[0]=f;d[1]=g;d[2]=h;d[3]=k;d[4]=l;d[5]=a;return d};a.allFinite=function(a){for(var b=0;6>b;b++)if(!isFinite(a[b]))return!1;return!0};a.width=l;a.depth=h;a.height=d;a.center=function(a,b){void 0===b&&(b=[0,0,0]);b[0]=a[0]+l(a)/2;b[1]=a[1]+h(a)/2;b[2]=a[2]+d(a)/2;return b};a.size=function(a,b){void 0===b&&(b=[0,0,0]);b[0]=l(a);b[1]=h(a);
b[2]=d(a);return b};a.maximumDimension=function(a){return Math.max(l(a),d(a),h(a))};a.containsPoint=function(a,b){return b[0]>=a[0]&&b[1]>=a[1]&&b[2]>=a[2]&&b[0]<=a[3]&&b[1]<=a[4]&&b[2]<=a[5]};a.containsPointWithMargin=function(a,b,c){return b[0]>=a[0]-c&&b[1]>=a[1]-c&&b[2]>=a[2]-c&&b[0]<=a[3]+c&&b[1]<=a[4]+c&&b[2]<=a[5]+c};a.contains=function(a,b){return b[0]>=a[0]&&b[1]>=a[1]&&b[2]>=a[2]&&b[3]<=a[3]&&b[4]<=a[4]&&b[5]<=a[5]};a.intersects=function(a,b){return Math.max(b[0],a[0])<=Math.min(b[3],a[3])&&
Math.max(b[1],a[1])<=Math.min(b[4],a[4])&&Math.max(b[2],a[2])<=Math.min(b[5],a[5])};a.offset=function(a,b,c,d,e){void 0===e&&(e=a);e[0]=a[0]+b;e[1]=a[1]+c;e[2]=a[2]+d;e[3]=a[3]+b;e[4]=a[4]+c;e[5]=a[5]+d;return e};a.setMin=function(a,b,c){void 0===c&&(c=a);c[0]=b[0];c[1]=b[1];c[2]=b[2];c!==a&&(c[3]=a[3],c[4]=a[4],c[5]=a[5]);return c};a.setMax=function(a,b,c){void 0===c&&(c=a);c[3]=b[0];c[4]=b[1];c[5]=b[2];c!==a&&(c[0]=a[0],c[1]=a[1],c[2]=a[2]);return a};a.set=k;a.empty=function(b){return b?k(b,a.NEGATIVE_INFINITY):
e(a.NEGATIVE_INFINITY)};a.toRect=function(a,b){b||(b=c.create());b[0]=a[0];b[1]=a[1];b[2]=a[3];b[3]=a[4];return b};a.fromRect=function(a,b){a[0]=b[0];a[1]=b[1];a[3]=b[2];a[4]=b[3];return a};a.is=m;a.isPoint=function(a){return 0===l(a)&&0===h(a)&&0===d(a)};a.equals=function(a,b,c){if(null==a||null==b)return a===b;if(!m(a)||!m(b))return!1;if(c)for(var d=0;d<a.length;d++){if(!c(a[d],b[d]))return!1}else for(d=0;d<a.length;d++)if(a[d]!==b[d])return!1;return!0};a.POSITIVE_INFINITY=[-Infinity,-Infinity,
-Infinity,Infinity,Infinity,Infinity];a.NEGATIVE_INFINITY=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity];a.ZERO=[0,0,0,0,0,0]})},"esri/layers/graphics/dehydratedFeatures":function(){define("require exports ../../Graphic ../../geometry/SpatialReference ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect".split(" "),function(b,a,f,c,e,l){function h(a){switch(a){case "esriGeometryPoint":return"point";case "esriGeometryMultipoint":return"multipoint";case "esriGeometryPolyline":return"polyline";
case "esriGeometryPolygon":return"polygon";case "esriGeometryEnvelope":return"extent"}}function d(a,b,c){return{uid:f.generateUID(),attributes:a.attributes,geometry:k(a.geometry,b,c),visible:!0}}function k(a,b,c){switch(b){case "point":return{x:a.x,y:a.y,z:a.z,type:b,spatialReference:c};case "polyline":var d=a;return{paths:d.paths,hasZ:d.hasZ,hasM:d.hasM,type:b,spatialReference:c};case "polygon":return{rings:a.rings,hasZ:d.hasZ,hasM:d.hasM,type:b,spatialReference:c};case "multipoint":return{points:a.points,
hasZ:d.hasZ,hasM:d.hasM,type:b,spatialReference:c};case "extent":return{xmin:a.xmin,ymin:a.ymin,zmin:a.zmin,mmin:a.mmin,xmax:a.xmax,ymax:a.ymax,zmax:a.zmax,mmax:a.mmax,hasZ:a.hasZ,hasM:a.hasM,type:b,spatialReference:c}}}function m(a){return"point"===a.type?null!=a.z:"extent"===a.type?null!=a.zmin:a.hasZ}function g(a){return"declaredClass"in a}function t(a,b){e.empty(b);"mesh"===a.type&&(a=a.extent);switch(a.type){case "point":b[0]=b[3]=a.x;b[1]=b[4]=a.y;m(a)&&(b[2]=b[5]=a.z);break;case "polyline":for(var c=
0;c<a.paths.length;c++)e.expandWithNestedArray(b,a.paths[c],m(a));break;case "polygon":for(c=0;c<a.rings.length;c++)e.expandWithNestedArray(b,a.rings[c],m(a));break;case "multipoint":e.expandWithNestedArray(b,a.points,m(a));break;case "extent":b[0]=a.xmin,b[1]=a.ymin,b[3]=a.xmax,b[4]=a.ymax,null!=a.zmin&&(b[2]=a.zmin),null!=a.zmax&&(b[5]=a.zmax)}}function v(a,b){l.empty(b);"mesh"===a.type&&(a=a.extent);switch(a.type){case "point":b[0]=b[2]=a.x;b[1]=b[3]=a.y;break;case "polyline":for(var c=0;c<a.paths.length;c++)l.expandWithNestedArray(b,
a.paths[c]);break;case "polygon":for(c=0;c<a.rings.length;c++)l.expandWithNestedArray(b,a.rings[c]);break;case "multipoint":l.expandWithNestedArray(b,a.points);break;case "extent":b[0]=a.xmin,b[1]=a.ymin,b[2]=a.xmax,b[3]=a.ymax}}Object.defineProperty(a,"__esModule",{value:!0});a.isPoint=function(a){return"point"===a.type};a.mapJSONGeometryType=h;a.fromFeatureSetJSON=function(a){var b=h(a.geometryType),e=c.fromJSON(a.spatialReference);return a.features.map(function(a){return d(a,b,e)})};a.fromJSON=
d;a.fromJSONGeometry=k;a.makeDehydratedPoint=function(a,b,c,d){return{x:a,y:b,z:c,spatialReference:d,type:"point"}};a.hasZ=m;a.isHydratedGeometry=function(a){return"declaredClass"in a};a.isHydratedGraphic=g;a.hydrateGraphic=function(a,b){if(!a||g(a))return a;b=new f({layer:b,sourceLayer:b});b.read(a);return b};a.computeAABB=t;a.expandAABB=function(a,b){t(a,w);e.expand(b,w)};a.computeAABR=v;a.expandAABR=function(a,b){v(a,y);l.expand(b,y)};var w=e.create(),y=l.create()})},"esri/views/2d/engine/webgl/mesh/factories/WGLMeshFactory":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../enums ../../MaterialInfo ../../Utils ../../visualVariablesUtils ../../WGLDisplayObject ../VertexVector ../templates/meshTemplateUtils ../templates/WGLMarkerTemplate ../../util/Matcher ../../util/serializationUtils ../../util/vvFlagUtils ../../util/Writer".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v,w,y,r){Object.defineProperty(a,"__esModule",{value:!0});var z=c.getLogger("esri.views.2d.engine.webgl.WGLMeshFactory"),x=function(){function a(){this._materials=[]}a.prototype.insert=function(a){var b=this._materials.length;this._materials.push(a);return b};a.prototype.createSpriteMaterial=function(a,b,c){var d=this._materials.length;a=l.default.fromSprite(a,b,c);this._materials.push(a);return d};a.prototype.createGlyphMaterial=function(a,b,c){var d=this._materials.length;
a=l.default.fromGlyph(a,b,c);this._materials.push(a);return d};a.prototype.get=function(a){return this._materials[a]};a.prototype.serialize=function(a){w.serializeList(a,this._materials);return a};a.deserialize=function(b){var c=new a;c._materials=w.deserializeList(b,l.default);return c};return a}();a.MaterialStore=x;var p=function(){function a(a,b,c){this.displayObjects=a;this.vertexVectorsMap=b;this._materials=c}a.prototype.get=function(a){return this.vertexVectorsMap[a]};a.prototype.pushDisplayObject=
function(a){this.displayObjects.push(a)};a.prototype.encode=function(a,b){var c=w.serializeList(new r.default(Uint32Array,this._guessSize()),this.displayObjects).buffer(),d=this._materials.serialize(new r.default(Uint32Array)).buffer(),e={};b.push(c);b.push(d);for(var f in this.vertexVectorsMap){var g=this.vertexVectorsMap[f];e[f]={};g.transfer(e[f],b)}a.displayObjects=c;a.materialStore=d;a.vertexBuffersMap=e;this.destroy()};a.prototype.destroy=function(){this.displayObjects=this.vertexVectorsMap=
null};a.prototype._guessSize=function(){for(var a=this.displayObjects,b=Math.min(a.length,4),c=0,d=0;d<b;d++)c=Math.max(c,a[d].displayRecords.length);return 2*(12*a.length+a.length*c*40)};return a}(),n=function(){function a(){this._vvMap=new Map}a.prototype.set=function(a,b){this._vvMap.set(a,b)};a.prototype.getValue=function(a,b,c){return this._vvMap.has(a)?this._vvMap.get(a)(b,c):0};return a}();b=function(){function a(a,b,c,d,e,f,g,h,k){this._matcher=a;this._materials=c;this._geometryType=d;this._idField=
e;this._pixelRatio=k;this._vvMap=null;this._vvFlags=g;this._vvBuf=new ArrayBuffer(16);this._vvBufU32=new Uint32Array(this._vvBuf);this._vvBufF32=new Float32Array(this._vvBuf);this._createVVFunctionMap(f,b,h)}a.from=function(b,c,d,e,f,g,h){switch(b.type){case "simple":return a._fromSimpleRenderer(b,c,d,e,f,g,h);case "unique-value":case "uniqueValue":return a._fromUniqueValueRenderer(b,c,d,e,f,g,h);case "class-breaks":case "classBreaks":return a._fromClassBreaksRenderer(b,c,d,e,f,g,h);default:return z.error("Tried to create WGLMeshFactory from an unknown renderer type!"),
null}};Object.defineProperty(a.prototype,"materials",{get:function(){return this._materials},enumerable:!0,configurable:!0});a.prototype.createMeshData=function(a){var b=Array(e.WGLGeometryType.COUNT),c=this._matcher.getDefault(),d=!!y.getMarkerVVFlags(this._vvFlags),f=!!y.getFillVVFlags(this._vvFlags),g=!!y.getLineVVFlags(this._vvFlags,!0)||!!y.getLineVVFlags(this._vvFlags,!1),h=!!y.getTextVVFlags(this._vvFlags);c&&1===c.length&&c[0]instanceof t.default?(b[e.WGLGeometryType.MARKER]=new m.VertexVectors(e.WGLGeometryType.MARKER,
d,a),b[e.WGLGeometryType.FILL]=new m.VertexVectors(e.WGLGeometryType.FILL,f,0),b[e.WGLGeometryType.LINE]=new m.VertexVectors(e.WGLGeometryType.LINE,g,0),b[e.WGLGeometryType.TEXT]=new m.VertexVectors(e.WGLGeometryType.TEXT,h,0)):(b[e.WGLGeometryType.MARKER]=new m.VertexVectors(e.WGLGeometryType.MARKER,d,a),b[e.WGLGeometryType.FILL]=new m.VertexVectors(e.WGLGeometryType.FILL,f,a),b[e.WGLGeometryType.LINE]=new m.VertexVectors(e.WGLGeometryType.LINE,g,a),b[e.WGLGeometryType.TEXT]=new m.VertexVectors(e.WGLGeometryType.TEXT,
h,a));return new p([],b,this._materials)};a.prototype.write=function(a,b,c){var d=1===this._matcher.size()&&this._matcher.getDefault()||this._matcher.match(b,c),e=b.attributes[this._idField],f=new k(e);this._computeVV(b,c);if(d){for(c=0;c<d.length;c++){var g=d[c],h=a.get(g.geometryType);g.writeMesh(f.displayRecords,h,this._geometryType,e,b,this._pixelRatio,this._vvBufU32)}a.pushDisplayObject(f)}};a.prototype._isErrorVV=function(a){return null===a||isNaN(a)||Infinity===a};a.prototype._computeVV=function(a,
b){if(!this._vvMap)return 0;var c=this._vvMap.getValue(e.VVType.SIZE,a,b),d=this._vvMap.getValue(e.VVType.COLOR,a,b),f=this._vvMap.getValue(e.VVType.OPACITY,a,b);a=this._vvMap.getValue(e.VVType.ROTATION,a,b);this._vvBufF32[e.VVType.SIZE]=this._isErrorVV(c)?NaN:c;this._vvBufF32[e.VVType.COLOR]=this._isErrorVV(d)?NaN:d;this._vvBufF32[e.VVType.OPACITY]=this._isErrorVV(f)?NaN:f;this._vvBufF32[e.VVType.ROTATION]=this._isErrorVV(a)?NaN:a;return 0};a.prototype._createVVFunctionMap=function(a,b,c){if(a&&
a.length)for(var d=0;d<a.length;d++){var e=a[d],f=h.getVVType(e.type);if(e=this._createGetValueFunction(e,b,c))this._vvMap||(this._vvMap=new n),this._vvMap.set(f,e)}};a.prototype._createGetValueFunction=function(a,b,c){if(h.getVVType(a.type)===e.VVType.SIZE){var f=d.getTypeOfSizeVisualVariable(a);return f===e.WGLVVFlag.SIZE_SCALE_STOPS?null:this._createNormalizedFunction(a,b,c,f===e.WGLVVFlag.SIZE_UNIT_VALUE&&function(b){return d.getVisualVariableSizeValueRepresentationRatio(b,a.valueRepresentation)})}return this._createNormalizedFunction(a,
b,c)};a.prototype._createNormalizedFunction=function(a,b,c,d){var e=a.field;if(e){if("string"===typeof e){var f=a.normalizationField;return f?function(a){if(a.attributes[e]&&a.attributes[f])return a=a.attributes[e]/a.attributes[f],d?d(a):a}:d?function(a){return d(a.attributes[e])}:function(a){return a.attributes[e]}}if("function"===typeof e)return z.error("Function field types are not currently supported.\n                      Please use a valueExpression instead"),function(a){};z.error("The field for a vv must be a string or a number, but got "+
typeof e);return function(a){}}if(a.valueExpression&&"$view.scale"!==a.valueExpression)return h.createArcadeFunction({valueExpression:a.valueExpression,spatialReference:c,layer:b},d);z.error("Unable to create a normalized function for visual variable: "+a);return function(a){}};a._fromSimpleRenderer=function(b,c,d,e,f,h,k){var l=b.getSymbols();b=b.visualVariables;var m=y.getVVFlags(b),n=new v.default,p=new x;l.length&&n.setDefault(g.createMeshTemplates([],p,l[0],d,m,k));return new a(n,c,p,e,f,b,m,
h,k)};a._fromUniqueValueRenderer=function(b,c,d,e,f,h,k){var l=b.uniqueValueInfos,m=b.visualVariables,n=y.getVVFlags(m),p=[b.field];b.field2&&p.push(b.field2);b.field3&&p.push(b.field3);for(var t=b.valueExpression,p=new v.MapMatcher(p,b.fieldDelimiter,t?{valueExpression:t,spatialReference:h,layer:c}:null),t=new x,r=b.backgroundFillSymbol,r=r&&g.createMeshTemplates([],t,r,d,n,k),w=0;w<l.length;w++){var A=l[w],B=g.createMeshTemplates([],t,A.symbol,d,n,k);p.add(A.value,r?r.concat(B):B)}if(b=b.defaultSymbol)d=
g.createMeshTemplates([],t,b,d,n,k),p.setDefault(r?r.concat(d):d);return new a(p,c,t,e,f,m,n,h,k)};a._fromClassBreaksRenderer=function(b,c,d,e,f,h,k){for(var l=b.isMaxInclusive,m=b.visualVariables,n=b.valueExpression,p=b.normalizationField,t=b.normalizationTotal,r=b.normalizationType,w=y.getVVFlags(m),l=new v.IntervalMatcher(b.field,l,n?{valueExpression:n,spatialReference:h,layer:c}:null,{normalizationField:p,normalizationTotal:t,normalizationType:r}),n=new x,p=(p=b.backgroundFillSymbol)&&g.createMeshTemplates([],
n,p,d,w,k,!0),t=0,r=b.classBreakInfos;t<r.length;t++){var A=r[t],z=g.createMeshTemplates([],n,A.symbol,d,w,k);l.add({min:A.minValue,max:A.maxValue},p?p.concat(z):z)}if(b=b.defaultSymbol)d=g.createMeshTemplates([],n,b,d,w,k),l.setDefault(p?p.concat(d):d);return new a(l,c,n,e,f,m,w,h,k)};return a}();a.default=b})},"esri/views/2d/engine/webgl/MaterialInfo":function(){define("require exports ./enums ./MaterialInfoUtils ./MaterialInfoUtils_updateMaterialVariations ./MaterialKeyInfo ./util/serializationUtils".split(" "),
function(b,a,f,c,e,l,h){Object.defineProperty(a,"__esModule",{value:!0});var d=function(){function a(a,b,c){this.unit=a;this.pageId=b;this.semantic=c}a.prototype.clone=function(){return new a(this.unit,this.pageId,this.semantic)};a.prototype.serialize=function(a){a.writeInt32(this.unit);a.writeInt32(this.pageId);return a};a.deserialize=function(b){var c=b.readInt32();b=b.readInt32();return new a(c,b,"u_texture")};return a}();a.TexBindingInfo=d;var k=function(){function a(a,b){this.name=a;this.value=
b}a.prototype.clone=function(){return new a(this.name,this.value)};a.prototype.serialize=function(a){a.writeInt32(this.value);return a};a.deserialize=function(b){b=b.readInt32();return new a("u_my_param",b)};return a}();a.MaterialParam=k;b=function(){function a(){this.texBindingInfo=[];this.materialParams=[]}a.fromSprite=function(b,e,h){var g=new a,k=new l;k.geometryType=e;b?(k.sdf=b.sdf,k.pattern=!0,g.texBindingInfo.push(new d(1,b.page,"u_texture"))):(k.sdf=!1,k.pattern=!1);0===h?k.vvOpacity=k.vvSizeMinMaxValue=
k.vvSizeScaleStops=k.vvSizeFieldStops=k.vvSizeUnitValue=k.vvColor=k.vvRotation=!1:(k.vvOpacity=0!==(h&f.WGLVVFlag.OPACITY),k.vvSizeMinMaxValue=0!==(h&f.WGLVVFlag.SIZE_MINMAX_VALUE),k.vvSizeScaleStops=0!==(h&f.WGLVVFlag.SIZE_SCALE_STOPS),k.vvSizeFieldStops=0!==(h&f.WGLVVFlag.SIZE_FIELD_STOPS),k.vvSizeUnitValue=0!==(h&f.WGLVVFlag.SIZE_UNIT_VALUE),k.vvColor=0!==(h&f.WGLVVFlag.COLOR),k.vvRotation=0!==(h&f.WGLVVFlag.ROTATION));k.visibility=!1;g.materialKey=c.getMaterialKey(k);g.materialKeyInfo=k;return g};
a.fromGlyph=function(b,e,h){var g=new a,k=new l;k.geometryType=e;k.sdf=!0;k.pattern=!1;k.visibility=!1;k.heatmap=!1;g.texBindingInfo.push(new d(2,b.page,"u_texture"));0===h?k.vvOpacity=k.vvSizeMinMaxValue=k.vvSizeScaleStops=k.vvSizeFieldStops=k.vvSizeUnitValue=k.vvColor=k.vvRotation=!1:(k.vvOpacity=0!==(h&f.WGLVVFlag.OPACITY),k.vvSizeMinMaxValue=0!==(h&f.WGLVVFlag.SIZE_MINMAX_VALUE),k.vvSizeScaleStops=0!==(h&f.WGLVVFlag.SIZE_SCALE_STOPS),k.vvSizeFieldStops=0!==(h&f.WGLVVFlag.SIZE_FIELD_STOPS),k.vvSizeUnitValue=
0!==(h&f.WGLVVFlag.SIZE_UNIT_VALUE),k.vvColor=0!==(h&f.WGLVVFlag.COLOR),k.vvRotation=0!==(h&f.WGLVVFlag.ROTATION));g.materialKey=c.getMaterialKey(k);g.materialKeyInfo=k;return g};a.prototype.copy=function(a){this.materialParams=a.materialParams.map(function(a){return a.clone()});this.texBindingInfo=a.texBindingInfo.map(function(a){return a.clone()});a.materialKeyInfo&&(this.materialKeyInfo=new l,this.materialKeyInfo.copy(a.materialKeyInfo));this.materialKey=a.materialKey};a.prototype.serialize=function(a){a.writeInt32(this.materialKey);
h.serializeList(a,this.texBindingInfo);h.serializeList(a,this.materialParams);return a};a.deserialize=function(b){var c=new a;c.materialKey=b.readInt32();c.texBindingInfo=h.deserializeList(b,d);c.materialParams=h.deserializeList(b,k);c.materialKeyInfo=new l;e(c.materialKeyInfo,c.materialKey);return c};return a}();a.default=b})},"esri/views/2d/engine/webgl/MaterialInfoUtils":function(){define(["require","exports","./enums","./MaterialInfo","./MaterialKeyInfo"],function(b,a,f,c,e){function l(a){var b=
[];b[0]=a.sdf?!0:!1;b[1]=a.vvSizeMinMaxValue?!0:!1;b[2]=a.vvSizeScaleStops?!0:!1;b[3]=a.vvSizeFieldStops?!0:!1;b[4]=a.vvSizeUnitValue?!0:!1;b[5]=a.vvColor?!0:!1;b[6]=a.vvRotation?!0:!1;b[7]=a.vvOpacity?!0:!1;b[8]=a.visibility?!0:!1;b[9]=a.pattern?!0:!1;b[10]=a.heatmap?!0:!1;return b.reduce(function(a,b,c){b&&(a|=1<<c+2);return a},0)}function h(a){if(a.geometryType===f.WGLGeometryType.UNKNOWN)return-1;var b=l(a)<<2;return a.geometryType+b}Object.defineProperty(a,"__esModule",{value:!0});a.createTextMaterialInfo=
function(a,b){var d=new c.default,g=new e;g.geometryType=f.WGLGeometryType.TEXT;g.sdf=!0;g.pattern=!1;g.visibility=!1;g.heatmap=!1;d.texBindingInfo.push(new c.TexBindingInfo(2,a.page,"u_texture"));0===b?g.vvOpacity=g.vvSizeMinMaxValue=g.vvSizeScaleStops=g.vvSizeFieldStops=g.vvSizeUnitValue=g.vvColor=g.vvRotation=!1:(g.vvOpacity=0!==(b&f.WGLVVFlag.OPACITY),g.vvSizeMinMaxValue=0!==(b&f.WGLVVFlag.SIZE_MINMAX_VALUE),g.vvSizeScaleStops=0!==(b&f.WGLVVFlag.SIZE_SCALE_STOPS),g.vvSizeFieldStops=0!==(b&f.WGLVVFlag.SIZE_FIELD_STOPS),
g.vvSizeUnitValue=0!==(b&f.WGLVVFlag.SIZE_UNIT_VALUE),g.vvColor=0!==(b&f.WGLVVFlag.COLOR),g.vvRotation=0!==(b&f.WGLVVFlag.ROTATION));d.materialKey=h(g);d.materialKeyInfo=g;return d};a.createMaterialInfo=function(a,b,l){var d=new c.default,k=new e;k.geometryType=b;a?(a=a.spriteMosaicItem,k.sdf=a.sdf,k.pattern=!0,d.texBindingInfo.push(new c.TexBindingInfo(1,a.page,"u_texture"))):(k.sdf=!1,k.pattern=!1);0===l?k.vvOpacity=k.vvSizeMinMaxValue=k.vvSizeScaleStops=k.vvSizeFieldStops=k.vvSizeUnitValue=k.vvColor=
k.vvRotation=!1:(k.vvOpacity=0!==(l&f.WGLVVFlag.OPACITY),k.vvSizeMinMaxValue=0!==(l&f.WGLVVFlag.SIZE_MINMAX_VALUE),k.vvSizeScaleStops=0!==(l&f.WGLVVFlag.SIZE_SCALE_STOPS),k.vvSizeFieldStops=0!==(l&f.WGLVVFlag.SIZE_FIELD_STOPS),k.vvSizeUnitValue=0!==(l&f.WGLVVFlag.SIZE_UNIT_VALUE),k.vvColor=0!==(l&f.WGLVVFlag.COLOR),k.vvRotation=0!==(l&f.WGLVVFlag.ROTATION));k.visibility=!1;d.materialKey=h(k);d.materialKeyInfo=k;return d};a.getMaterialKey=h;a.getMaterialVariations=function(a){var b=a&3;a>>=2;return{geometryType:b,
variations:[0!==(a&1),0!==(a&2),0!==(a&4),0!==(a&8),0!==(a&16),0!==(a&32),0!==(a&64),0!==(a&128),0!==(a&256),0!==(a&512),0!==(a&1024),0!==(a&2048),0!==(a&4096)]}}})},"esri/views/2d/engine/webgl/MaterialKeyInfo":function(){define(["require","exports"],function(b,a){return function(){function a(){this.heatmap=this.pattern=this.visibility=this.vvOpacity=this.vvRotation=this.vvColor=this.vvSizeUnitValue=this.vvSizeFieldStops=this.vvSizeScaleStops=this.vvSizeMinMaxValue=this.sdf=!1}a.prototype.copy=function(a){this.geometryType=
a.geometryType;this.sdf=a.sdf;this.vvSizeMinMaxValue=a.vvSizeMinMaxValue;this.vvSizeScaleStops=a.vvSizeScaleStops;this.vvSizeFieldStops=a.vvSizeFieldStops;this.vvSizeUnitValue=a.vvSizeUnitValue;this.vvColor=a.vvColor;this.vvRotation=a.vvRotation;this.vvOpacity=a.vvOpacity;this.visibility=a.visibility;this.pattern=a.pattern;this.heatmap=a.heatmap};a.prototype.hasVV=function(){void 0===this._hasVV&&(this._hasVV=this.vvColor||this.vvOpacity||this.vvRotation||this.vvSizeMinMaxValue||this.vvSizeScaleStops||
this.vvSizeFieldStops||this.vvSizeUnitValue);return this._hasVV};a.prototype.hasVVSize=function(){return this.vvSizeMinMaxValue||this.vvSizeFieldStops||this.vvSizeScaleStops||this.vvSizeUnitValue};a.prototype.hasVVColor=function(){return this.vvColor};a.prototype.hasVVRotation=function(){return this.vvRotation};a.prototype.hasVVOpacity=function(){return this.vvOpacity};return a}()})},"esri/views/2d/engine/webgl/MaterialInfoUtils_updateMaterialVariations":function(){define(["require","exports"],function(b,
a){return function(a,b){a.geometryType=b&3;b>>=2;a.sdf=0!==(b&4);a.vvSizeMinMaxValue=0!==(b&8);a.vvSizeScaleStops=0!==(b&16);a.vvSizeFieldStops=0!==(b&32);a.vvSizeUnitValue=0!==(b&64);a.vvColor=0!==(b&128);a.vvRotation=0!==(b&256);a.vvOpacity=0!==(b&512);a.visibility=0!==(b&1024);a.pattern=0!==(b&2048);a.heatmap=0!==(b&4096);return a}})},"esri/views/2d/engine/webgl/util/serializationUtils":function(){define(["require","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.serializeList=
function(a,b){if(null===b)a.writeInt32(0);else{a.writeInt32(b.length);for(var c=0;c<b.length;c++)b[c].serialize(a);return a}};a.deserializeList=function(a,b,e){for(var c=a.readInt32(),c=Array(c),f=0;f<c.length;f++)c[f]=b.deserialize(a,e);return c}})},"esri/views/2d/engine/webgl/WGLDisplayObject":function(){define(["require","exports","./WGLDisplayRecord","./util/serializationUtils"],function(b,a,f,c){return function(){function a(a){this.displayRecords=[];this.id=a}a.prototype.serialize=function(a){a.writeInt32(this.id);
c.serializeList(a,this.displayRecords);return a};a.deserialize=function(b,e){e=e.store;var d=b.readInt32(),h=new a(d);h.displayRecords=c.deserializeList(b,f,{id:d,store:e});return h};return a}()})},"esri/views/2d/engine/webgl/WGLDisplayRecord":function(){define(["require","exports","../../../../core/Logger","./MeshData"],function(b,a,f,c){var e=f.getLogger("esri/views/2d/engine/webgl/WGLDisplayRecord");return function(){function a(a,b,c){this.id=a;this.geometryType=b;this._materialInfo=c;this.meshData=
null;this.indexCount=this.indexFrom=this.vertexCount=this.vertexFrom=this.zOrder=this.symbolLevel=0}Object.defineProperty(a.prototype,"sortKey",{get:function(){void 0===this._sortKey&&this._computeSortKey();return this._sortKey},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"materialInfo",{get:function(){return"number"===typeof this._materialInfo?(e.error("Tried to read materialInfo, but found an index! Was materialInfo deserialized correctly?"),null):this._materialInfo},set:function(a){this._materialInfo=
a},enumerable:!0,configurable:!0});a.prototype.copy=function(){var b=new a(this.id,this.geometryType,this._materialInfo);b.vertexFrom=this.vertexFrom;b.vertexCount=this.vertexCount;b.indexFrom=this.indexFrom;b.indexCount=this.indexCount;b.zOrder=this.zOrder;b.symbolLevel=this.symbolLevel;b.meshData=this.meshData;return b};a.prototype.setMeshDataFromBuffers=function(a,b,e){var d=new c,f;for(f in b){for(var h=b[f].stride,k=b[f].data,l=[],y=0;y<h*a.vertexCount/4;++y)l[y]=k[y+h*a.vertexFrom/4];d.vertexData.set(f,
l)}for(y=d.indexData.length=0;y<a.indexCount;++y)d.indexData[y]=e[y+a.indexFrom]-a.vertexFrom;d.vertexCount=a.vertexCount;this.meshData=d};a.prototype.readMeshDataFromBuffers=function(a,b){this.meshData?this.meshData.clear():this.meshData=new c;for(var d in a){for(var e=a[d].stride,f=a[d].data,h=[],l=0;l<e*this.vertexCount/4;++l)h[l]=f[l+e*this.vertexFrom/4];this.meshData.vertexData.set(d,h)}for(l=this.meshData.indexData.length=0;l<this.indexCount;++l)this.meshData.indexData[l]=b[l+this.indexFrom]-
this.vertexFrom;this.meshData.vertexCount=this.vertexCount};a.prototype.writeMeshDataToBuffers=function(a,b,c,e){for(var d in b)for(var f=b[d].stride,h=this.meshData.vertexData.get(d),k=b[d].data,l=0;l<f*this.meshData.vertexCount/4;++l)k[l+f*a/4]=h[l];for(l=0;l<this.meshData.indexData.length;++l)e[l+c]=this.meshData.indexData[l]+a;this.vertexFrom=a;this.vertexCount=this.meshData.vertexCount;this.indexFrom=c;this.indexCount=this.meshData.indexData.length};a.writeAllMeshDataToBuffers=function(a,b,c){for(var d=
0,e=0,f=0;f<a.length;f++){var h=a[f];h.writeMeshDataToBuffers(d,b,e,c);d+=h.vertexCount;e+=h.indexCount}};a.prototype._computeSortKey=function(){this._sortKey=(this.symbolLevel&31)<<12|(this.zOrder&127)<<4|this.geometryType&7};a.prototype.serialize=function(a){a.writeInt32(this.geometryType);a.writeInt32(this._materialInfo);a.writeInt32(this.symbolLevel);a.writeInt32(this.zOrder);a.writeInt32(this.vertexFrom);a.writeInt32(this.vertexCount);a.writeInt32(this.indexFrom);a.writeInt32(this.indexCount);
return a};a.deserialize=function(b,c){var d=b.readInt32(),e=c.store&&c.store.get(b.readInt32())||b.readInt32();c=new a(c.id,d,e);c.symbolLevel=b.readInt32();c.zOrder=b.readInt32();c.vertexFrom=b.readInt32();c.vertexCount=b.readInt32();c.indexFrom=b.readInt32();c.indexCount=b.readInt32();return c};return a}()})},"esri/views/2d/engine/webgl/MeshData":function(){define(["require","exports"],function(b,a){return function(){function a(){this.vertexData=new Map;this.vertexCount=0;this.indexData=[]}a.prototype.clear=
function(){this.vertexData.clear();this.vertexCount=0;this.indexData=[]};a.prototype.update=function(a,b,f){for(var c in a)this.vertexData.set(c,a[c]);for(c in this.vertexData)null===a[c]&&this.vertexData.delete(c);this.vertexCount=b;this.indexData=f};return a}()})},"esri/views/2d/engine/webgl/mesh/VertexVector":function(){define(["require","exports","../Utils","../util/Writer"],function(b,a,f,c){Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function a(a,b){this.data=a;this.stride=
b;this.vertexCount=0}a.prototype.transfer=function(a,b){var c=this.data.buffer();a.vertexCount=this.vertexCount;a.data=c;a.stride=this.stride;b.push(c)};return a}();a.default=e;b=function(){function a(a,b,k){this.geometryType=a;this.indexVector=new c.default(Uint32Array,k);this.namedVectors={};a=f.getStrides(a,b);for(var d in a){b=a[d];var g=new c.default(Uint32Array,b/4*k);this.namedVectors[d]=new e(g,b)}}a.prototype.get=function(a){return this.namedVectors[a].data};a.prototype.transfer=function(a,
b){var c=this.indexVector.buffer(),d={};b.push(c);for(var e in this.namedVectors){var f=this.namedVectors[e];d[e]={};f.transfer(d[e],b)}a.geometryType=this.geometryType;a.indexBuffer=c;a.namedBuffers=d;this.destroy()};a.prototype.destroy=function(){this.namedVectors=this.indexVector=null};return a}();a.VertexVectors=b})},"esri/views/2d/engine/webgl/util/Writer":function(){define(["require","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});b=function(){function a(a,b){this._pos=
0;b=b?this._roundToNearest4(b):40;this._array=new ArrayBuffer(b);this._buffer=new a(this._array);this._ctor=a}Object.defineProperty(a.prototype,"length",{get:function(){return this._pos},enumerable:!0,configurable:!0});a.prototype._roundToNearest4=function(a){a=Math.round(a);return a+(4-a%4)};a.prototype._ensureSize=function(a){if(this._pos+a>=this._buffer.length){a=this._roundToNearest4(1.5*(this._array.byteLength+4*a));a=new ArrayBuffer(a);var b=new this._ctor(a);b.set(this._buffer,0);this._array=
a;this._buffer=b}};a.prototype.writeInt32=function(a){this._ensureSize(1);var b=this._pos;this._buffer[this._pos++]=a;return b};a.prototype.writeUint32=function(a){this._ensureSize(1);var b=this._pos;this._buffer[this._pos++]=a;return b};a.prototype.push=function(a){this._ensureSize(1);var b=this._pos;this._buffer[this._pos++]=a;return b};a.prototype.writeRegion=function(a){this._ensureSize(a.length);var b=this._pos;this._buffer.set(a,this._pos);this._pos+=a.length;return b};a.prototype.buffer=function(){var a=
this._array.slice(0,4*this._pos);this.destroy();return a};a.prototype.destroy=function(){this._buffer=this._array=null};return a}();a.default=b})},"esri/views/2d/engine/webgl/mesh/templates/meshTemplateUtils":function(){define("require exports ../../../../../../core/Logger ../../enums ../templates/WGLFillTemplate ../templates/WGLLineTemplate ../templates/WGLMarkerTemplate ../templates/WGLTextTemplate ../../util/vvFlagUtils".split(" "),function(b,a,f,c,e,l,h,d,k){Object.defineProperty(a,"__esModule",
{value:!0});var m=f.getLogger("esri.views.2d.engine.webgl.mesh.templates.decompose");a.createMeshTemplates=function(a,b,f,w,y,r,z){void 0===z&&(z=!1);(w=w.get(f.id))||m.error("Tried to get mosaicItem for symbol: "+f.id+", but didn't find one!");switch(f.type){case c.EsriSymbolTypeKebab.SIMPLE_MARKER:return a.push(h.default.fromSimpleMarker(b,k.getMarkerVVFlags(y),f,w.spriteMosaicItem,r)),a;case c.EsriSymbolTypeKebab.PICTURE_MARKER:return a.push(h.default.fromPictureMarker(b,k.getMarkerVVFlags(y),
f,w.spriteMosaicItem,r)),a;case c.EsriSymbolTypeKebab.SIMPLE_FILL:return a.push(e.default.fromSimpleFill(b,k.getFillVVFlags(y),f,w.spriteMosaicItem,r,z)),f.outline&&a.push(l.default.fromSimpleLine(b,k.getLineVVFlags(y,!0),f.outline,null,r)),a;case c.EsriSymbolTypeKebab.PICTURE_FILL:return a.push(e.default.fromPictureFill(b,k.getFillVVFlags(y),f,w.spriteMosaicItem,r,z)),f.outline&&a.push(l.default.fromSimpleLine(b,k.getLineVVFlags(y,!0),f.outline,null,r)),a;case c.EsriSymbolTypeKebab.SIMPLE_LINE:return a.push(l.default.fromSimpleLine(b,
k.getLineVVFlags(y,!1),f,w.spriteMosaicItem,r)),a;case c.EsriSymbolTypeKebab.TEXT:return a.push(d.default.fromText(b,k.getTextVVFlags(y),f,w.glyphMosaicItems,r)),a;default:return m.error("Unable to create mesh template for unknown symbol type: "+f.type),a}}})},"esri/views/2d/engine/webgl/mesh/templates/WGLFillTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper dojo/has ../../../../../../core/Logger ../../../../../../core/libs/earcut/earcut ../../color ../../definitions ../../enums ../../number ../../TileClipper ../../WGLDisplayRecord ../Tesselator ./WGLMeshTemplate".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v,w){Object.defineProperty(a,"__esModule",{value:!0});var y=e.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLFillTemplate"),r=[],z=[];b=function(a){function b(b,d,e,f,h,l,m,p){var n=a.call(this)||this;n.fillColor=f;n.tl=h;n.br=l;n.aux=m;n.isBFS=p;n.geometryType=k.WGLGeometryType.FILL;n.useLibtess=!1;f=c("esri-featurelayer-webgl");n.useLibtess="libtess"===((f||{}).tesselator||"libtess");n.useLibtess&&(n._tesselator=new v.default);n.vvFlags=d;n._materialStore=
b;n.materialId=n._materialStore.createSpriteMaterial(e,n.geometryType,d);n._tileClipper=new g.TileClipper(0,0,0,1,8);n._tileClipper.setExtent(512);return n}f(b,a);b.fromSimpleFill=function(a,c,d,e,f,g){void 0===g&&(g=!1);d=(d=d.color)&&h.premultiplyAlphaRGBA(d)||0;if(!e)return new b(a,c,null,d,0,0,0,g);var k=e.rect;f=k.x+1;var l=k.y+1,n=k.x+1+e.width,p=k.y+1+e.height,k=m.i1616to32(f,l),r=m.i1616to32(n,p);f=m.i8888to32(m.nextHighestPowerOfTwo(n-f),m.nextHighestPowerOfTwo(p-l),0,0);return new b(a,c,
e,d,k,r,f,g)};b.fromPictureFill=function(a,c,e,f,g,h){void 0===h&&(h=!1);g=d.PICTURE_FILL_COLOR;var k=f.rect,l=k.x+1+f.width,n=k.y+1+f.height,k=m.i1616to32(k.x+1,k.y+1),l=m.i1616to32(l,n);e=m.i8888to32(m.nextHighestPowerOfTwo(e.width),m.nextHighestPowerOfTwo(e.height),0,0);return new b(a,c,f,g,k,l,e,h)};b.prototype.writeMesh=function(a,b,c,d,e,f,g){r.length=0;if("esriGeometryPolygon"!==c)y.error("Unable to handle geometryType: "+c);else{var h=e.geometry,h=(e=this._isClippingRequired(h))?this._clip(h,
!this.useLibtess):h.rings;return this.useLibtess?this._writeMeshLibtess(a,b,c,d,h,e,f,g):this._writeMeshEarcut(a,b,c,d,h,e,f,g)}};b.prototype._isClippingRequired=function(a){var b=0;for(a=a.rings;b<a.length;b++){var c=a[b],d=c.length;if(!(3>d)){var e=c[0][0],f=c[0][1];if(-8>e||520<e||-8>f||520<f)return!0;for(var g=1;g<d;++g)if(e+=c[g][0],f+=c[g][1],-8>e||520<e||-8>f||520<f)return!0}}return!1};b.prototype._clip=function(a,b){var c;this._tileClipper.reset(3);for(var d=0,e=a.rings;d<e.length;d++){var f=
e[d],g=f.length;if(!(3>g)){a=f[0][0];c=f[0][1];this._tileClipper.moveTo(a,c);for(var h=1;h<g;++h)a+=f[h][0],c+=f[h][1],this._tileClipper.lineTo(a,c);this._tileClipper.close()}}return this._tileClipper.result(b)};b.prototype._writeMeshLibtess=function(a,b,c,d,e,f,g,h){if(e&&e.length){c=this._materialStore.get(this.materialId);g=[];var k=b.indexVector;b=b.get("geometry");var l=new t(d,this.geometryType,this.materialId),m=this._getOffset(b,c);l.vertexFrom=m;l.indexFrom=k.length;a.push(l);this._tesselator.beginPolygon(r,
g);for(a=0;a<e.length;a++){var n=e[a];if(!(3>n.length)){this._tesselator.beginContour();var p=void 0,x=void 0;f?(p=n[0].x,x=n[0].y):(p=n[0][0],x=n[0][1]);var w=[p,x,0];this._tesselator.addVertex(w,w);for(w=1;w<n.length-1;w++){var v=void 0,A=void 0;f?(p=n[w].x,x=n[w].y):(v=n[w][0],A=n[w][1],p+=v,x+=A);v=[p,x,0];this._tesselator.addVertex(v,v)}this._tesselator.endContour()}}this._tesselator.endPolygon();this._writeVerticesLibTess(l,b,d,r,c,h);this._writeIndicesLibTess(l,k,m,g)}};b.prototype._writeMeshEarcut=
function(a,b,c,d,e,f,g,h){if(e&&e.length){c=this._materialStore.get(this.materialId);g=b.indexVector;b=b.get("geometry");var k=new t(d,this.geometryType,this.materialId),l=this._getOffset(b,c);k.vertexFrom=l;k.indexFrom=g.length;a.push(k);for(var m=a=0,n=0;n<e.length;n++){var p=e[n],x=m,w=void 0,v=void 0;f?(w=p[0].x,v=p[0].y):(w=p[0][0],v=p[0][1]);r[m++]=w;r[m++]=v;for(var A=0,y=1;y<p.length;++y){var B=void 0,D=void 0;f?(B=w,D=v,w=p[y].x,v=p[y].y,B=w-B,D=v-D):(B=p[y][0],D=p[y][1],w+=B,v+=D);A-=B*
(v+v+D);r[m++]=w;r[m++]=v}0<A?(0<x-a&&(this._write(k,g,b,l,d,r,z,a,x,c,h),a=x),z.length=0):0>A?0<x-a?z.push(.5*(x-a)):m=x:m=x}0<m-a&&this._write(k,g,b,l,d,r,z,a,m,c,h);r.length=z.length=0}};b.prototype._write=function(a,b,c,d,e,f,g,h,k,m,p){d=l(f.slice(h,k),g,2);d.length&&(h=this._getOffset(c,m),this._writeVertices(a,c,e,f,g,m,p),this._writeIndices(a,b,h,d))};b.prototype._getOffset=function(a,b){b=b.materialKeyInfo.hasVV()?8:6;return a.length/b};b.prototype._writeVertices=function(a,b,c,d,e,f,g){for(e=
0;e<d.length;e+=2){var h=m.i1616to32(d[e],d[e+1]);b.push(h);b.push(c);b.push(this.fillColor);b.push(this.tl);b.push(this.br);b.push(this.aux);this._writeVV(b,g,f);a.vertexCount++}};b.prototype._writeIndices=function(a,b,c,d){for(var e=0;e<d.length;e+=3)b.push(c+d[e]),b.push(c+d[e+1]),b.push(c+d[e+2]),a.indexCount+=3};b.prototype._writeVerticesLibTess=function(a,b,c,d,e,f){for(var g=0;g<d.length;g+=2){var h=m.i1616to32(d[g],d[g+1]);b.push(h);b.push(c);b.push(this.fillColor);b.push(this.tl);b.push(this.br);
b.push(this.aux);this._writeVV(b,f,e);a.vertexCount++}};b.prototype._writeIndicesLibTess=function(a,b,c,d){for(var e=0;e<d.length;e++)b.push(c+d[e]),a.indexCount++};b.prototype._writeVV=function(a,b,c){c.materialKeyInfo.hasVV()&&(this.isBFS?(a.push(4294967295),a.push(4294967295)):(a.push(b[k.VVType.COLOR]),a.push(b[k.VVType.OPACITY])))};return b}(w.default);a.default=b})},"esri/views/2d/engine/webgl/definitions":function(){define(["require","exports"],function(b,a){Object.defineProperty(a,"__esModule",
{value:!0});a.EXTRUDE_SCALE=64;a.PICTURE_FILL_COLOR=4294967295;a.TILE_SIZE=512})},"esri/views/2d/engine/webgl/TileClipper":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(b,a,f,c){Object.defineProperty(a,"__esModule",{value:!0});var e=function(){return function(a,b,c){this.ratio=a;this.x=b;this.y=c}}();b=function(){function a(a,b,c,e,f){void 0===e&&(e=8);void 0===f&&(f=8);this.lines=[];this.starts=[];this.pixelRatio=e;this.pixelMargin=f;this.tileSize=512*e;this.dz=
a;this.yPos=b;this.xPos=c}a.prototype.setExtent=function(a){this.finalRatio=this.tileSize/a*(1<<this.dz);var b=this.pixelRatio*this.pixelMargin,b=b/this.finalRatio;a>>=this.dz;b>a&&(b=a);this.margin=b;this.xmin=a*this.xPos-b;this.ymin=a*this.yPos-b;this.xmax=this.xmin+a+2*b;this.ymax=this.ymin+a+2*b};a.prototype.reset=function(a){this.type=a;this.lines=[];this.starts=[];this.line=null;this.start=0};a.prototype.moveTo=function(a,b){this._pushLine();this._prevIsIn=this._isIn(a,b);this._moveTo(a,b,this._prevIsIn);
this._prevPt=new f.Point(a,b);this._firstPt=new f.Point(a,b);this._dist=0};a.prototype.lineTo=function(a,b){var c=this._isIn(a,b),d=new f.Point(a,b),h=f.Point.distance(this._prevPt,d),k,l,y;if(c)this._prevIsIn?this._lineTo(a,b,!0):(k=this._prevPt,l=d,a=this._intersect(l,k),this.start=this._dist+h*(1-this._r),this._lineTo(a.x,a.y,!0),this._lineTo(l.x,l.y,!0));else if(this._prevIsIn)l=this._prevPt,k=d,a=this._intersect(l,k),this._lineTo(a.x,a.y,!0),this._lineTo(k.x,k.y,!1);else{var r=this._prevPt;if(!(r.x<=
this.xmin&&d.x<=this.xmin||r.x>=this.xmax&&d.x>=this.xmax||r.y<=this.ymin&&d.y<=this.ymin||r.y>=this.ymax&&d.y>=this.ymax)){a=[];if(r.x<this.xmin&&d.x>this.xmin||r.x>this.xmin&&d.x<this.xmin)b=(this.xmin-r.x)/(d.x-r.x),y=r.y+b*(d.y-r.y),y<=this.ymin?l=!1:y>=this.ymax?l=!0:a.push(new e(b,this.xmin,y));if(r.x<this.xmax&&d.x>this.xmax||r.x>this.xmax&&d.x<this.xmax)b=(this.xmax-r.x)/(d.x-r.x),y=r.y+b*(d.y-r.y),y<=this.ymin?l=!1:y>=this.ymax?l=!0:a.push(new e(b,this.xmax,y));if(r.y<this.ymin&&d.y>this.ymin||
r.y>this.ymin&&d.y<this.ymin)b=(this.ymin-r.y)/(d.y-r.y),y=r.x+b*(d.x-r.x),y<=this.xmin?k=!1:y>=this.xmax?k=!0:a.push(new e(b,y,this.ymin));if(r.y<this.ymax&&d.y>this.ymax||r.y>this.ymax&&d.y<this.ymax)b=(this.ymax-r.y)/(d.y-r.y),y=r.x+b*(d.x-r.x),y<=this.xmin?k=!1:y>=this.xmax?k=!0:a.push(new e(b,y,this.ymax));if(0===a.length)k?l?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):l?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(1<a.length&&
a[0].ratio>a[1].ratio)this.start=this._dist+h*a[1].ratio,this._lineTo(a[1].x,a[1].y,!0),this._lineTo(a[0].x,a[0].y,!0);else for(this.start=this._dist+h*a[0].ratio,k=0;k<a.length;k++)this._lineTo(a[k].x,a[k].y,!0)}this._lineTo(d.x,d.y,!1)}this._dist+=h;this._prevIsIn=c;this._prevPt=d};a.prototype.close=function(){var a,b;0<this.line.length&&(a=this._firstPt,b=this._prevPt,a.x===b.x&&a.y===b.y||this.lineTo(a.x,a.y),a=this.line,b=a.length,4<=b&&(a[0].x===a[1].x&&a[0].x===a[b-2].x||a[0].y===a[1].y&&a[0].y===
a[b-2].y)&&(a.pop(),a[0].x=a[b-2].x,a[0].y=a[b-2].y))};a.prototype.result=function(a){void 0===a&&(a=!0);this._pushLine();if(0===this.lines.length)return null;3===this.type&&a&&l.simplify(this.tileSize,this.margin*this.finalRatio,this.lines);return this.lines};a.prototype.resultWithStarts=function(){if(2!==this.type)throw Error("Only valid for lines");this._pushLine();var a=this.lines,b=a.length;if(0===b)return null;for(var c=[],e=0;e<b;e++)c.push({line:a[e],start:this.starts[e]||0});return c};a.prototype._isIn=
function(a,b){return a>=this.xmin&&a<=this.xmax&&b>=this.ymin&&b<=this.ymax};a.prototype._intersect=function(a,b){var c,d,e;if(b.x>=this.xmin&&b.x<=this.xmax)d=b.y<=this.ymin?this.ymin:this.ymax,e=(d-a.y)/(b.y-a.y),c=a.x+e*(b.x-a.x);else if(b.y>=this.ymin&&b.y<=this.ymax)c=b.x<=this.xmin?this.xmin:this.xmax,e=(c-a.x)/(b.x-a.x),d=a.y+e*(b.y-a.y);else{d=b.y<=this.ymin?this.ymin:this.ymax;c=b.x<=this.xmin?this.xmin:this.xmax;var h=(c-a.x)/(b.x-a.x),k=(d-a.y)/(b.y-a.y);h<k?(e=h,d=a.y+h*(b.y-a.y)):(e=
k,c=a.x+k*(b.x-a.x))}this._r=e;return new f.Point(c,d)};a.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):2===this.type?1<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):3===this.type&&3<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)));this.line=[];this.start=0};a.prototype._moveTo=function(a,b,c){3!==this.type?c&&(a=Math.round((a-(this.xmin+this.margin))*
this.finalRatio),b=Math.round((b-(this.ymin+this.margin))*this.finalRatio),this.line.push(new f.Point(a,b))):(c||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),b<this.ymin&&(b=this.ymin),b>this.ymax&&(b=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),b=Math.round((b-(this.ymin+this.margin))*this.finalRatio),this.line.push(new f.Point(a,b)),this._is_v=this._is_h=!1)};a.prototype._lineTo=function(a,b,c){if(3!==this.type)if(c){a=Math.round((a-(this.xmin+this.margin))*this.finalRatio);
b=Math.round((b-(this.ymin+this.margin))*this.finalRatio);if(0<this.line.length&&(c=this.line[this.line.length-1],c.equals(a,b)))return;this.line.push(new f.Point(a,b))}else this.line&&0<this.line.length&&this._pushLine();else if(c||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),b<this.ymin&&(b=this.ymin),b>this.ymax&&(b=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),b=Math.round((b-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){c=this.line[this.line.length-
1];var d=c.x===a,e=c.y===b;d&&e||(this._is_h&&d?(c.x=a,c.y=b,c=this.line[this.line.length-2],this._is_h=c.x===a,this._is_v=c.y===b):this._is_v&&e?(c.x=a,c.y=b,c=this.line[this.line.length-2],this._is_h=c.x===a,this._is_v=c.y===b):(this.line.push(new f.Point(a,b)),this._is_h=d,this._is_v=e))}else this.line.push(new f.Point(a,b))};return a}();a.TileClipper=b;b=function(){function a(){}a.prototype.setExtent=function(a){this._ratio=4096===a?1:4096/a};a.prototype.reset=function(a){this.type=a;this.lines=
[];this.line=null};a.prototype.moveTo=function(a,b){this.line&&this.lines.push(this.line);this.line=[];var c=this._ratio;this.line.push(new f.Point(Math.round(a*c),Math.round(b*c)))};a.prototype.lineTo=function(a,b){var c=this._ratio;this.line.push(new f.Point(Math.round(a*c),Math.round(b*c)))};a.prototype.close=function(){var a=this.line;a&&!a[0].isEqual(a[a.length-1])&&a.push(a[0])};a.prototype.result=function(){this.line&&this.lines.push(this.line);if(0===this.lines.length)return null;3===this.type&&
1!==this._ratio&&l.simplify(4096,64,this.lines);return this.lines};return a}();a.SimpleBuilder=b;var l=function(){function a(){}a.simplify=function(b,c,e){if(e){var d=-c,f=b+c,h=-c,k=b+c;b=[];c=[];for(var l=e.length,m=0;m<l;++m){var z=e[m];if(z&&!(2>z.length))for(var x=z[0],p=void 0,n=z.length,A=1;A<n;++A)p=z[A],x.x===p.x&&(x.x<=d&&(x.y>p.y?(b.push(m),b.push(A),b.push(0),b.push(-1)):(c.push(m),c.push(A),c.push(0),c.push(-1))),x.x>=f&&(x.y<p.y?(b.push(m),b.push(A),b.push(1),b.push(-1)):(c.push(m),
c.push(A),c.push(1),c.push(-1)))),x.y===p.y&&(x.y<=h&&(x.x<p.x?(b.push(m),b.push(A),b.push(2),b.push(-1)):(c.push(m),c.push(A),c.push(2),c.push(-1))),x.y>=k&&(x.x>p.x?(b.push(m),b.push(A),b.push(3),b.push(-1)):(c.push(m),c.push(A),c.push(3),c.push(-1)))),x=p}0!==b.length&&0!==c.length&&(a.fillParent(e,c,b),a.fillParent(e,b,c),d=[],a.calcDeltas(d,c,b),a.calcDeltas(d,b,c),a.addDeltas(d,e))}};a.fillParent=function(a,b,e){for(var d=e.length,f=b.length,h=0;h<f;h+=4){for(var k=b[h],l=b[h+1],m=b[h+2],z=
a[k][l-1],k=a[k][l],l=8092,x=-1,p=0;p<d;p+=4)if(e[p+2]===m){var n=e[p],A=e[p+1],B=a[n][A-1],n=a[n][A];switch(m){case 0:case 1:c.between(z.y,B.y,n.y)&&c.between(k.y,B.y,n.y)&&(B=Math.abs(n.y-B.y),B<l&&(l=B,x=p));break;case 2:case 3:c.between(z.x,B.x,n.x)&&c.between(k.x,B.x,n.x)&&(B=Math.abs(n.x-B.x),B<l&&(l=B,x=p))}}b[h+3]=x}};a.calcDeltas=function(b,c,e){for(var d=c.length,f=0;f<d;f+=4){var h=a.calcDelta(f,c,e,[]);b.push(c[f]);b.push(c[f+1]);b.push(c[f+2]);b.push(h)}};a.calcDelta=function(b,c,e,f){b=
c[b+3];if(-1===b)return 0;var d=f.length;if(1<d&&f[d-2]===b)return 0;f.push(b);return a.calcDelta(b,e,c,f)+1};a.addDeltas=function(a,b){for(var c=a.length,d=0,e=0;e<c;e+=4){var f=a[e+3];f>d&&(d=f)}for(e=0;e<c;e+=4){var h=b[a[e]],k=a[e+1],f=d-a[e+3];switch(a[e+2]){case 0:h[k-1].x-=f;h[k].x-=f;break;case 1:h[k-1].x+=f;h[k].x+=f;break;case 2:h[k-1].y-=f;h[k].y-=f;break;case 3:h[k-1].y+=f,h[k].y+=f}}a=b.length;for(c=0;c<a;++c)h=b[c],!h||2>h.length||h[h.length-1].x!==h[0].x&&h[h.length-1].y!==h[0].y&&
h.push(h[0])};return a}()})},"esri/views/2d/engine/webgl/Geometry":function(){define(["require","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});b=function(){function a(a,b){this.x=a;this.y=b}a.prototype.clone=function(){return new a(this.x,this.y)};a.prototype.equals=function(a,b){return a===this.x&&b===this.y};a.prototype.isEqual=function(a){return a.x===this.x&&a.y===this.y};a.prototype.setCoords=function(a,b){this.x=a;this.y=b};a.prototype.normalize=function(){var a=this.x,
b=this.y,a=Math.sqrt(a*a+b*b);this.x/=a;this.y/=a};a.prototype.rightPerpendicular=function(){var a=this.x;this.x=this.y;this.y=-a};a.prototype.move=function(a,b){this.x+=a;this.y+=b};a.prototype.assign=function(a){this.x=a.x;this.y=a.y};a.prototype.assignAdd=function(a,b){this.x=a.x+b.x;this.y=a.y+b.y};a.prototype.assignSub=function(a,b){this.x=a.x-b.x;this.y=a.y-b.y};a.prototype.rotate=function(a,b){var c=this.x,e=this.y;this.x=c*a-e*b;this.y=c*b+e*a};a.prototype.scale=function(a){this.x*=a;this.y*=
a};a.prototype.length=function(){var a=this.x,b=this.y;return Math.sqrt(a*a+b*b)};a.distance=function(a,b){var c=b.x-a.x;a=b.y-a.y;return Math.sqrt(c*c+a*a)};a.add=function(b,e){return new a(b.x+e.x,b.y+e.y)};a.sub=function(b,e){return new a(b.x-e.x,b.y-e.y)};return a}();a.Point=b})},"esri/views/2d/engine/webgl/GeometryUtils":function(){define(["require","exports"],function(b,a){function f(a,b){a%=b;return 0<=a?a:a+b}Object.defineProperty(a,"__esModule",{value:!0});a.C_INFINITY=Number.POSITIVE_INFINITY;
a.C_PI=Math.PI;a.C_2PI=2*a.C_PI;a.C_PI_BY_2=a.C_PI/2;a.C_RAD_TO_256=128/a.C_PI;a.C_256_TO_RAD=a.C_PI/128;a.C_DEG_TO_256=256/360;a.C_DEG_TO_RAD=a.C_PI/180;a.C_SQRT2=1.414213562;a.C_SQRT2_INV=1/a.C_SQRT2;var c=1/Math.LN2;a.positiveMod=f;a.radToByte=function(b){return f(b*a.C_RAD_TO_256,256)};a.degToByte=function(b){return f(b*a.C_DEG_TO_256,256)};a.log2=function(a){return Math.log(a)*c};a.sqr=function(a){return a*a};a.clamp=function(a,b,c){return Math.min(Math.max(a,b),c)};a.interpolate=function(a,
b,c){return a*(1-c)+b*c};a.between=function(a,b,c){return a>=b&&a<=c||a>=c&&a<=b}})},"esri/views/2d/engine/webgl/mesh/Tesselator":function(){define(["require","exports","../../../../../core/Logger","../../../../../core/libs/libtess/libtess"],function(b,a,f,c){Object.defineProperty(a,"__esModule",{value:!0});var e=f.getLogger("esri.views.2d.engine.webgl.mesh.templates.Tesselator");b=function(){function a(){this._indexCounter=this._currentVertexIndex=0;this._triangleIndices=[-1,-1,-1];this.glu=new c.GluTesselator;
this.glu.gluTessCallback(c.gluEnum.GLU_TESS_BEGIN,this._begincallback.bind(this));this.glu.gluTessCallback(c.gluEnum.GLU_TESS_VERTEX_DATA,this._vertexCallback.bind(this));this.glu.gluTessCallback(c.gluEnum.GLU_TESS_END,this._endcallback.bind(this));this.glu.gluTessCallback(c.gluEnum.GLU_TESS_COMBINE,this._combinecallback.bind(this));this.glu.gluTessCallback(c.gluEnum.GLU_TESS_ERROR,this._errorcallback.bind(this));this.glu.gluTessCallback(c.gluEnum.GLU_TESS_EDGE_FLAG,this._edgeCallback.bind(this));
this.glu.gluTessProperty(c.gluEnum.GLU_TESS_WINDING_RULE,c.windingRule.GLU_TESS_WINDING_ODD)}a.prototype.beginPolygon=function(a,b){this._triangleIndices[0]=-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=-1;this._indexCounter=this._currentVertexIndex=0;this.glu.gluTessBeginPolygon(a);this._indices=b};a.prototype.endPolygon=function(){this.glu.gluTessEndPolygon()};a.prototype.beginContour=function(){this.glu.gluTessBeginContour()};a.prototype.endContour=function(){this.glu.gluTessEndContour()};
a.prototype.addVertex=function(a,b){this.glu.gluTessVertex(a,b)};a.prototype._vertexCallback=function(a,b){b[b.length]=a[0];b[b.length]=a[1];this._triangleIndices[this._currentVertexIndex]=-1;if(2<=this._currentVertexIndex){for(a=0;3>a;a++)-1===this._triangleIndices[a]&&(this._triangleIndices[a]=this._indexCounter++),this._indices[this._indices.length]=this._triangleIndices[a];this._currentVertexIndex=0}else this._currentVertexIndex++};a.prototype._begincallback=function(a){this._triangleIndices[0]=
-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=-1;this._currentVertexIndex=0};a.prototype._endcallback=function(){this._currentVertexIndex=0};a.prototype._errorcallback=function(a){e.error("Encountered error during tesselation: "+a)};a.prototype._combinecallback=function(a,b,c){return[a[0],a[1],a[2]]};a.prototype._edgeCallback=function(a){};return a}();a.default=b})},"esri/core/libs/libtess/libtess":function(){define([],function(){var b={DEBUG:!1,assert:function(a,f){if(b.DEBUG&&!a)throw Error("Assertion failed"+
(f?": "+f:""));},GLU_TESS_MAX_COORD:1E150,TRUE_PROJECT:!1,GLU_TESS_DEFAULT_TOLERANCE:0,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,
GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111,GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,
GLU_INVALID_VALUE:100901},geom:{}};b.geom.vertEq=function(a,b){return a.s===b.s&&a.t===b.t};b.geom.vertLeq=function(a,b){return a.s<b.s||a.s===b.s&&a.t<=b.t};b.geom.edgeEval=function(a,f,c){b.assert(b.geom.vertLeq(a,f)&&b.geom.vertLeq(f,c));var e=f.s-a.s,l=c.s-f.s;return 0<e+l?e<l?f.t-a.t+e/(e+l)*(a.t-c.t):f.t-c.t+l/(e+l)*(c.t-a.t):0};b.geom.edgeSign=function(a,f,c){b.assert(b.geom.vertLeq(a,f)&&b.geom.vertLeq(f,c));var e=f.s-a.s,l=c.s-f.s;return 0<e+l?(f.t-c.t)*e+(f.t-a.t)*l:0};b.geom.transLeq=function(a,
b){return a.t<b.t||a.t===b.t&&a.s<=b.s};b.geom.transEval=function(a,f,c){b.assert(b.geom.transLeq(a,f)&&b.geom.transLeq(f,c));var e=f.t-a.t,l=c.t-f.t;return 0<e+l?e<l?f.s-a.s+e/(e+l)*(a.s-c.s):f.s-c.s+l/(e+l)*(c.s-a.s):0};b.geom.transSign=function(a,f,c){b.assert(b.geom.transLeq(a,f)&&b.geom.transLeq(f,c));var e=f.t-a.t,l=c.t-f.t;return 0<e+l?(f.s-c.s)*e+(f.s-a.s)*l:0};b.geom.edgeGoesLeft=function(a){return b.geom.vertLeq(a.dst(),a.org)};b.geom.edgeGoesRight=function(a){return b.geom.vertLeq(a.org,
a.dst())};b.geom.vertL1dist=function(a,b){return Math.abs(a.s-b.s)+Math.abs(a.t-b.t)};b.geom.vertCCW=function(a,b,c){return 0<=a.s*(b.t-c.t)+b.s*(c.t-a.t)+c.s*(a.t-b.t)};b.geom.interpolate_=function(a,b,c,e){a=0>a?0:a;c=0>c?0:c;return a<=c?0===c?(b+e)/2:b+a/(a+c)*(e-b):e+c/(a+c)*(b-e)};b.geom.edgeIntersect=function(a,f,c,e,l){var h,d;b.geom.vertLeq(a,f)||(h=a,a=f,f=h);b.geom.vertLeq(c,e)||(h=c,c=e,e=h);b.geom.vertLeq(a,c)||(h=a,a=c,c=h,h=f,f=e,e=h);b.geom.vertLeq(c,f)?b.geom.vertLeq(f,e)?(h=b.geom.edgeEval(a,
c,f),d=b.geom.edgeEval(c,f,e),0>h+d&&(h=-h,d=-d),l.s=b.geom.interpolate_(h,c.s,d,f.s)):(h=b.geom.edgeSign(a,c,f),d=-b.geom.edgeSign(a,e,f),0>h+d&&(h=-h,d=-d),l.s=b.geom.interpolate_(h,c.s,d,e.s)):l.s=(c.s+f.s)/2;b.geom.transLeq(a,f)||(h=a,a=f,f=h);b.geom.transLeq(c,e)||(h=c,c=e,e=h);b.geom.transLeq(a,c)||(h=a,a=c,c=h,h=f,f=e,e=h);b.geom.transLeq(c,f)?b.geom.transLeq(f,e)?(h=b.geom.transEval(a,c,f),d=b.geom.transEval(c,f,e),0>h+d&&(h=-h,d=-d),l.t=b.geom.interpolate_(h,c.t,d,f.t)):(h=b.geom.transSign(a,
c,f),d=-b.geom.transSign(a,e,f),0>h+d&&(h=-h,d=-d),l.t=b.geom.interpolate_(h,c.t,d,e.t)):l.t=(c.t+f.t)/2};b.mesh={};b.mesh.makeEdge=function(a){var f=b.mesh.makeEdgePair_(a.eHead);b.mesh.makeVertex_(f,a.vHead);b.mesh.makeVertex_(f.sym,a.vHead);b.mesh.makeFace_(f,a.fHead);return f};b.mesh.meshSplice=function(a,f){var c=!1,e=!1;a!==f&&(f.org!==a.org&&(e=!0,b.mesh.killVertex_(f.org,a.org)),f.lFace!==a.lFace&&(c=!0,b.mesh.killFace_(f.lFace,a.lFace)),b.mesh.splice_(f,a),e||(b.mesh.makeVertex_(f,a.org),
a.org.anEdge=a),c||(b.mesh.makeFace_(f,a.lFace),a.lFace.anEdge=a))};b.mesh.deleteEdge=function(a){var f=a.sym,c=!1;a.lFace!==a.rFace()&&(c=!0,b.mesh.killFace_(a.lFace,a.rFace()));a.oNext===a?b.mesh.killVertex_(a.org,null):(a.rFace().anEdge=a.oPrev(),a.org.anEdge=a.oNext,b.mesh.splice_(a,a.oPrev()),c||b.mesh.makeFace_(a,a.lFace));f.oNext===f?(b.mesh.killVertex_(f.org,null),b.mesh.killFace_(f.lFace,null)):(a.lFace.anEdge=f.oPrev(),f.org.anEdge=f.oNext,b.mesh.splice_(f,f.oPrev()));b.mesh.killEdge_(a)};
b.mesh.addEdgeVertex=function(a){var f=b.mesh.makeEdgePair_(a),c=f.sym;b.mesh.splice_(f,a.lNext);f.org=a.dst();b.mesh.makeVertex_(c,f.org);f.lFace=c.lFace=a.lFace;return f};b.mesh.splitEdge=function(a){var f=b.mesh.addEdgeVertex(a).sym;b.mesh.splice_(a.sym,a.sym.oPrev());b.mesh.splice_(a.sym,f);a.sym.org=f.org;f.dst().anEdge=f.sym;f.sym.lFace=a.rFace();f.winding=a.winding;f.sym.winding=a.sym.winding;return f};b.mesh.connect=function(a,f){var c=!1,e=b.mesh.makeEdgePair_(a),l=e.sym;f.lFace!==a.lFace&&
(c=!0,b.mesh.killFace_(f.lFace,a.lFace));b.mesh.splice_(e,a.lNext);b.mesh.splice_(l,f);e.org=a.dst();l.org=f.org;e.lFace=l.lFace=a.lFace;a.lFace.anEdge=l;c||b.mesh.makeFace_(e,a.lFace);return e};b.mesh.zapFace=function(a){var f=a.anEdge,c=f.lNext,e;do if(e=c,c=e.lNext,e.lFace=null,null===e.rFace()){e.oNext===e?b.mesh.killVertex_(e.org,null):(e.org.anEdge=e.oNext,b.mesh.splice_(e,e.oPrev()));var l=e.sym;l.oNext===l?b.mesh.killVertex_(l.org,null):(l.org.anEdge=l.oNext,b.mesh.splice_(l,l.oPrev()));b.mesh.killEdge_(e)}while(e!==
f);f=a.prev;a=a.next;a.prev=f;f.next=a};b.mesh.meshUnion=function(a,b){var c=a.fHead,e=a.vHead,f=a.eHead,h=b.fHead,d=b.vHead;b=b.eHead;h.next!==h&&(c.prev.next=h.next,h.next.prev=c.prev,h.prev.next=c,c.prev=h.prev);d.next!==d&&(e.prev.next=d.next,d.next.prev=e.prev,d.prev.next=e,e.prev=d.prev);b.next!==b&&(f.sym.next.sym.next=b.next,b.next.sym.next=f.sym.next,b.sym.next.sym.next=f,f.sym.next=b.sym.next);return a};b.mesh.deleteMesh=function(a){};b.mesh.makeEdgePair_=function(a){var f=new b.GluHalfEdge,
c=new b.GluHalfEdge,e=a.sym.next;c.next=e;e.sym.next=f;f.next=a;a.sym.next=c;f.sym=c;f.oNext=f;f.lNext=c;c.sym=f;c.oNext=c;return c.lNext=f};b.mesh.splice_=function(a,b){var c=a.oNext,e=b.oNext;c.sym.lNext=b;e.sym.lNext=a;a.oNext=e;b.oNext=c};b.mesh.makeVertex_=function(a,f){var c=f.prev,e=new b.GluVertex(f,c);c.next=e;f.prev=e;f=e.anEdge=a;do f.org=e,f=f.oNext;while(f!==a)};b.mesh.makeFace_=function(a,f){var c=f.prev,e=new b.GluFace(f,c);c.next=e;f.prev=e;e.anEdge=a;e.inside=f.inside;f=a;do f.lFace=
e,f=f.lNext;while(f!==a)};b.mesh.killEdge_=function(a){var b=a.next;a=a.sym.next;b.sym.next=a;a.sym.next=b};b.mesh.killVertex_=function(a,b){var c=a.anEdge,e=c;do e.org=b,e=e.oNext;while(e!==c);b=a.prev;a=a.next;a.prev=b;b.next=a};b.mesh.killFace_=function(a,b){var c=a.anEdge,e=c;do e.lFace=b,e=e.lNext;while(e!==c);b=a.prev;a=a.next;a.prev=b;b.next=a};b.normal={};b.normal.S_UNIT_X_=1;b.normal.S_UNIT_Y_=0;b.normal.projectPolygon=function(a,f,c,e){var l=!1,h=[f,c,e];0===f&&0===c&&0===e&&(b.normal.computeNormal_(a,
h),l=!0);c=b.normal.longAxis_(h);f=a.mesh.vHead;if(b.TRUE_PROJECT){b.normal.normalize_(h);e=[0,0,0];var d=[0,0,0];e[c]=0;e[(c+1)%3]=b.normal.S_UNIT_X_;e[(c+2)%3]=b.normal.S_UNIT_Y_;c=b.normal.dot_(e,h);e[0]-=c*h[0];e[1]-=c*h[1];e[2]-=c*h[2];b.normal.normalize_(e);d[0]=h[1]*e[2]-h[2]*e[1];d[1]=h[2]*e[0]-h[0]*e[2];d[2]=h[0]*e[1]-h[1]*e[0];b.normal.normalize_(d);for(h=f.next;h!==f;h=h.next)h.s=b.normal.dot_(h.coords,e),h.t=b.normal.dot_(h.coords,d)}else for(e=(c+1)%3,d=(c+2)%3,c=0<h[c]?1:-1,h=f.next;h!==
f;h=h.next)h.s=h.coords[e],h.t=c*h.coords[d];l&&b.normal.checkOrientation_(a)};b.normal.dot_=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};b.normal.normalize_=function(a){var f=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];b.assert(0<f);f=Math.sqrt(f);a[0]/=f;a[1]/=f;a[2]/=f};b.normal.longAxis_=function(a){var b=0;Math.abs(a[1])>Math.abs(a[0])&&(b=1);Math.abs(a[2])>Math.abs(a[b])&&(b=2);return b};b.normal.computeNormal_=function(a,f){var c=[-2*b.GLU_TESS_MAX_COORD,-2*b.GLU_TESS_MAX_COORD,-2*b.GLU_TESS_MAX_COORD],
e=[2*b.GLU_TESS_MAX_COORD,2*b.GLU_TESS_MAX_COORD,2*b.GLU_TESS_MAX_COORD],l=[],h=[],d;a=a.mesh.vHead;for(d=a.next;d!==a;d=d.next)for(var k=0;3>k;++k){var m=d.coords[k];m<e[k]&&(e[k]=m,h[k]=d);m>c[k]&&(c[k]=m,l[k]=d)}d=0;c[1]-e[1]>c[0]-e[0]&&(d=1);c[2]-e[2]>c[d]-e[d]&&(d=2);if(e[d]>=c[d])f[0]=0,f[1]=0,f[2]=1;else{c=0;e=h[d];l=l[d];h=[0,0,0];e=[e.coords[0]-l.coords[0],e.coords[1]-l.coords[1],e.coords[2]-l.coords[2]];k=[0,0,0];for(d=a.next;d!==a;d=d.next)k[0]=d.coords[0]-l.coords[0],k[1]=d.coords[1]-
l.coords[1],k[2]=d.coords[2]-l.coords[2],h[0]=e[1]*k[2]-e[2]*k[1],h[1]=e[2]*k[0]-e[0]*k[2],h[2]=e[0]*k[1]-e[1]*k[0],m=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],m>c&&(c=m,f[0]=h[0],f[1]=h[1],f[2]=h[2]);0>=c&&(f[0]=f[1]=f[2]=0,f[b.normal.longAxis_(e)]=1)}};b.normal.checkOrientation_=function(a){for(var b=0,c=a.mesh.fHead,e=c.next;e!==c;e=e.next){var l=e.anEdge;if(!(0>=l.winding)){do b+=(l.org.s-l.dst().s)*(l.org.t+l.dst().t),l=l.lNext;while(l!==e.anEdge)}}if(0>b)for(a=a.mesh.vHead,b=a.next;b!==a;b=b.next)b.t=-b.t};
b.render={};b.render.renderMesh=function(a,f,c){for(var e=!1,l=-1,h=f.fHead.prev;h!==f.fHead;h=h.prev)if(h.inside){e||(a.callBeginCallback(b.primitiveType.GL_TRIANGLES),e=!0);var d=h.anEdge;b.assert(d.lNext.lNext.lNext===d,"renderMesh called with non-triangulated mesh");do{if(c){var k=d.rFace().inside?0:1;l!==k&&(l=k,a.callEdgeFlagCallback(!!l))}a.callVertexCallback(d.org.data);d=d.lNext}while(d!==h.anEdge)}e&&a.callEndCallback()};b.render.renderBoundary=function(a,f){for(var c=f.fHead.next;c!==f.fHead;c=
c.next)if(c.inside){a.callBeginCallback(b.primitiveType.GL_LINE_LOOP);var e=c.anEdge;do a.callVertexCallback(e.org.data),e=e.lNext;while(e!==c.anEdge);a.callEndCallback()}};b.sweep={};b.sweep.SENTINEL_COORD_=4*b.GLU_TESS_MAX_COORD;b.sweep.TOLERANCE_NONZERO_=!1;b.sweep.computeInterior=function(a){a.fatalError=!1;b.sweep.removeDegenerateEdges_(a);b.sweep.initPriorityQ_(a);b.sweep.initEdgeDict_(a);for(var f;null!==(f=a.pq.extractMin());){for(;;){var c=a.pq.minimum();if(null===c||!b.geom.vertEq(c,f))break;
c=a.pq.extractMin();b.sweep.spliceMergeVertices_(a,f.anEdge,c.anEdge)}b.sweep.sweepEvent_(a,f)}f=a.dict.getMin().getKey();a.event=f.eUp.org;b.sweep.doneEdgeDict_(a);b.sweep.donePriorityQ_(a);b.sweep.removeDegenerateFaces_(a.mesh);a.mesh.checkMesh()};b.sweep.addWinding_=function(a,b){a.winding+=b.winding;a.sym.winding+=b.sym.winding};b.sweep.edgeLeq_=function(a,f,c){a=a.event;f=f.eUp;c=c.eUp;if(f.dst()===a)return c.dst()===a?b.geom.vertLeq(f.org,c.org)?0>=b.geom.edgeSign(c.dst(),f.org,c.org):0<=b.geom.edgeSign(f.dst(),
c.org,f.org):0>=b.geom.edgeSign(c.dst(),a,c.org);if(c.dst()===a)return 0<=b.geom.edgeSign(f.dst(),a,f.org);f=b.geom.edgeEval(f.dst(),a,f.org);a=b.geom.edgeEval(c.dst(),a,c.org);return f>=a};b.sweep.deleteRegion_=function(a,f){f.fixUpperEdge&&b.assert(0===f.eUp.winding);f.eUp.activeRegion=null;a.dict.deleteNode(f.nodeUp);f.nodeUp=null};b.sweep.fixUpperEdge_=function(a,f){b.assert(a.fixUpperEdge);b.mesh.deleteEdge(a.eUp);a.fixUpperEdge=!1;a.eUp=f;f.activeRegion=a};b.sweep.topLeftRegion_=function(a){var f=
a.eUp.org;do a=a.regionAbove();while(a.eUp.org===f);a.fixUpperEdge&&(f=b.mesh.connect(a.regionBelow().eUp.sym,a.eUp.lNext),b.sweep.fixUpperEdge_(a,f),a=a.regionAbove());return a};b.sweep.topRightRegion_=function(a){var b=a.eUp.dst();do a=a.regionAbove();while(a.eUp.dst()===b);return a};b.sweep.addRegionBelow_=function(a,f,c){var e=new b.ActiveRegion;e.eUp=c;e.nodeUp=a.dict.insertBefore(f.nodeUp,e);return c.activeRegion=e};b.sweep.isWindingInside_=function(a,f){switch(a.windingRule){case b.windingRule.GLU_TESS_WINDING_ODD:return 0!==
(f&1);case b.windingRule.GLU_TESS_WINDING_NONZERO:return 0!==f;case b.windingRule.GLU_TESS_WINDING_POSITIVE:return 0<f;case b.windingRule.GLU_TESS_WINDING_NEGATIVE:return 0>f;case b.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return 2<=f||-2>=f}b.assert(!1);return!1};b.sweep.computeWinding_=function(a,f){f.windingNumber=f.regionAbove().windingNumber+f.eUp.winding;f.inside=b.sweep.isWindingInside_(a,f.windingNumber)};b.sweep.finishRegion_=function(a,f){var c=f.eUp,e=c.lFace;e.inside=f.inside;e.anEdge=
c;b.sweep.deleteRegion_(a,f)};b.sweep.finishLeftRegions_=function(a,f,c){var e=f;for(f=f.eUp;e!==c;){e.fixUpperEdge=!1;var l=e.regionBelow(),h=l.eUp;if(h.org!==f.org){if(!l.fixUpperEdge){b.sweep.finishRegion_(a,e);break}h=b.mesh.connect(f.lPrev(),h.sym);b.sweep.fixUpperEdge_(l,h)}f.oNext!==h&&(b.mesh.meshSplice(h.oPrev(),h),b.mesh.meshSplice(f,h));b.sweep.finishRegion_(a,e);f=l.eUp;e=l}return f};b.sweep.addRightEdges_=function(a,f,c,e,l,h){var d=!0;do b.assert(b.geom.vertLeq(c.org,c.dst())),b.sweep.addRegionBelow_(a,
f,c.sym),c=c.oNext;while(c!==e);for(null===l&&(l=f.regionBelow().eUp.rPrev());;){e=f.regionBelow();c=e.eUp.sym;if(c.org!==l.org)break;c.oNext!==l&&(b.mesh.meshSplice(c.oPrev(),c),b.mesh.meshSplice(l.oPrev(),c));e.windingNumber=f.windingNumber-c.winding;e.inside=b.sweep.isWindingInside_(a,e.windingNumber);f.dirty=!0;!d&&b.sweep.checkForRightSplice_(a,f)&&(b.sweep.addWinding_(c,l),b.sweep.deleteRegion_(a,f),b.mesh.deleteEdge(l));d=!1;f=e;l=c}f.dirty=!0;b.assert(f.windingNumber-c.winding===e.windingNumber);
h&&b.sweep.walkDirtyRegions_(a,f)};b.sweep.callCombine_=function(a,f,c,e,l){var h=[f.coords[0],f.coords[1],f.coords[2]];f.data=null;f.data=a.callCombineCallback(h,c,e);null===f.data&&(l?a.fatalError||(a.callErrorCallback(b.errorType.GLU_TESS_NEED_COMBINE_CALLBACK),a.fatalError=!0):f.data=c[0])};b.sweep.spliceMergeVertices_=function(a,f,c){var e=[null,null,null,null];e[0]=f.org.data;e[1]=c.org.data;b.sweep.callCombine_(a,f.org,e,[.5,.5,0,0],!1);b.mesh.meshSplice(f,c)};b.sweep.vertexWeights_=function(a,
f,c,e,l){var h=b.geom.vertL1dist(f,a),d=b.geom.vertL1dist(c,a),k=l+1;e[l]=.5*d/(h+d);e[k]=.5*h/(h+d);a.coords[0]+=e[l]*f.coords[0]+e[k]*c.coords[0];a.coords[1]+=e[l]*f.coords[1]+e[k]*c.coords[1];a.coords[2]+=e[l]*f.coords[2]+e[k]*c.coords[2]};b.sweep.getIntersectData_=function(a,f,c,e,l,h){var d=[0,0,0,0],k=[c.data,e.data,l.data,h.data];f.coords[0]=f.coords[1]=f.coords[2]=0;b.sweep.vertexWeights_(f,c,e,d,0);b.sweep.vertexWeights_(f,l,h,d,2);b.sweep.callCombine_(a,f,k,d,!0)};b.sweep.checkForRightSplice_=
function(a,f){var c=f.regionBelow(),e=f.eUp,l=c.eUp;if(b.geom.vertLeq(e.org,l.org)){if(0<b.geom.edgeSign(l.dst(),e.org,l.org))return!1;b.geom.vertEq(e.org,l.org)?e.org!==l.org&&(a.pq.remove(e.org.pqHandle),b.sweep.spliceMergeVertices_(a,l.oPrev(),e)):(b.mesh.splitEdge(l.sym),b.mesh.meshSplice(e,l.oPrev()),f.dirty=c.dirty=!0)}else{if(0>b.geom.edgeSign(e.dst(),l.org,e.org))return!1;f.regionAbove().dirty=f.dirty=!0;b.mesh.splitEdge(e.sym);b.mesh.meshSplice(l.oPrev(),e)}return!0};b.sweep.checkForLeftSplice_=
function(a,f){var c=f.regionBelow();a=f.eUp;var e=c.eUp;b.assert(!b.geom.vertEq(a.dst(),e.dst()));if(b.geom.vertLeq(a.dst(),e.dst())){if(0>b.geom.edgeSign(a.dst(),e.dst(),a.org))return!1;f.regionAbove().dirty=f.dirty=!0;c=b.mesh.splitEdge(a);b.mesh.meshSplice(e.sym,c);c.lFace.inside=f.inside}else{if(0<b.geom.edgeSign(e.dst(),a.dst(),e.org))return!1;f.dirty=c.dirty=!0;c=b.mesh.splitEdge(e);b.mesh.meshSplice(a.lNext,e.sym);c.rFace().inside=f.inside}return!0};b.sweep.checkForIntersect_=function(a,f){var c=
f.regionBelow(),e=f.eUp,l=c.eUp,h=e.org,d=l.org,k=e.dst(),m=l.dst(),g=new b.GluVertex;b.assert(!b.geom.vertEq(m,k));b.assert(0>=b.geom.edgeSign(k,a.event,h));b.assert(0<=b.geom.edgeSign(m,a.event,d));b.assert(h!==a.event&&d!==a.event);b.assert(!f.fixUpperEdge&&!c.fixUpperEdge);if(h===d||Math.min(h.t,k.t)>Math.max(d.t,m.t))return!1;if(b.geom.vertLeq(h,d)){if(0<b.geom.edgeSign(m,h,d))return!1}else if(0>b.geom.edgeSign(k,d,h))return!1;b.geom.edgeIntersect(k,h,m,d,g);b.assert(Math.min(h.t,k.t)<=g.t);
b.assert(g.t<=Math.max(d.t,m.t));b.assert(Math.min(m.s,k.s)<=g.s);b.assert(g.s<=Math.max(d.s,h.s));b.geom.vertLeq(g,a.event)&&(g.s=a.event.s,g.t=a.event.t);var t=b.geom.vertLeq(h,d)?h:d;b.geom.vertLeq(t,g)&&(g.s=t.s,g.t=t.t);if(b.geom.vertEq(g,h)||b.geom.vertEq(g,d))return b.sweep.checkForRightSplice_(a,f),!1;if(!b.geom.vertEq(k,a.event)&&0<=b.geom.edgeSign(k,a.event,g)||!b.geom.vertEq(m,a.event)&&0>=b.geom.edgeSign(m,a.event,g)){if(m===a.event)return b.mesh.splitEdge(e.sym),b.mesh.meshSplice(l.sym,
e),f=b.sweep.topLeftRegion_(f),e=f.regionBelow().eUp,b.sweep.finishLeftRegions_(a,f.regionBelow(),c),b.sweep.addRightEdges_(a,f,e.oPrev(),e,e,!0),!0;if(k===a.event)return b.mesh.splitEdge(l.sym),b.mesh.meshSplice(e.lNext,l.oPrev()),c=f,f=b.sweep.topRightRegion_(f),h=f.regionBelow().eUp.rPrev(),c.eUp=l.oPrev(),l=b.sweep.finishLeftRegions_(a,c,null),b.sweep.addRightEdges_(a,f,l.oNext,e.rPrev(),h,!0),!0;0<=b.geom.edgeSign(k,a.event,g)&&(f.regionAbove().dirty=f.dirty=!0,b.mesh.splitEdge(e.sym),e.org.s=
a.event.s,e.org.t=a.event.t);0>=b.geom.edgeSign(m,a.event,g)&&(f.dirty=c.dirty=!0,b.mesh.splitEdge(l.sym),l.org.s=a.event.s,l.org.t=a.event.t);return!1}b.mesh.splitEdge(e.sym);b.mesh.splitEdge(l.sym);b.mesh.meshSplice(l.oPrev(),e);e.org.s=g.s;e.org.t=g.t;e.org.pqHandle=a.pq.insert(e.org);b.sweep.getIntersectData_(a,e.org,h,k,d,m);f.regionAbove().dirty=f.dirty=c.dirty=!0;return!1};b.sweep.walkDirtyRegions_=function(a,f){for(var c=f.regionBelow();;){for(;c.dirty;)f=c,c=c.regionBelow();if(!f.dirty&&
(c=f,f=f.regionAbove(),null===f||!f.dirty))break;f.dirty=!1;var e=f.eUp,l=c.eUp;e.dst()!==l.dst()&&b.sweep.checkForLeftSplice_(a,f)&&(c.fixUpperEdge?(b.sweep.deleteRegion_(a,c),b.mesh.deleteEdge(l),c=f.regionBelow(),l=c.eUp):f.fixUpperEdge&&(b.sweep.deleteRegion_(a,f),b.mesh.deleteEdge(e),f=c.regionAbove(),e=f.eUp));if(e.org!==l.org)if(e.dst()===l.dst()||f.fixUpperEdge||c.fixUpperEdge||e.dst()!==a.event&&l.dst()!==a.event)b.sweep.checkForRightSplice_(a,f);else if(b.sweep.checkForIntersect_(a,f))break;
e.org===l.org&&e.dst()===l.dst()&&(b.sweep.addWinding_(l,e),b.sweep.deleteRegion_(a,f),b.mesh.deleteEdge(e),f=c.regionAbove())}};b.sweep.connectRightVertex_=function(a,f,c){var e=c.oNext,l=f.regionBelow(),h=f.eUp,d=l.eUp,k=!1;h.dst()!==d.dst()&&b.sweep.checkForIntersect_(a,f);b.geom.vertEq(h.org,a.event)&&(b.mesh.meshSplice(e.oPrev(),h),f=b.sweep.topLeftRegion_(f),e=f.regionBelow().eUp,b.sweep.finishLeftRegions_(a,f.regionBelow(),l),k=!0);b.geom.vertEq(d.org,a.event)&&(b.mesh.meshSplice(c,d.oPrev()),
c=b.sweep.finishLeftRegions_(a,l,null),k=!0);k?b.sweep.addRightEdges_(a,f,c.oNext,e,e,!0):(e=b.geom.vertLeq(d.org,h.org)?d.oPrev():h,e=b.mesh.connect(c.lPrev(),e),b.sweep.addRightEdges_(a,f,e,e.oNext,e.oNext,!1),e.sym.activeRegion.fixUpperEdge=!0,b.sweep.walkDirtyRegions_(a,f))};b.sweep.connectLeftDegenerate_=function(a,f,c){var e=f.eUp;if(b.geom.vertEq(e.org,c))b.assert(b.sweep.TOLERANCE_NONZERO_),b.sweep.TOLERANCE_NONZERO_&&b.sweep.spliceMergeVertices_(a,e,c.anEdge);else if(b.geom.vertEq(e.dst(),
c)){if(b.assert(b.sweep.TOLERANCE_NONZERO_),b.sweep.TOLERANCE_NONZERO_){f=b.sweep.topRightRegion_(f);var e=f.regionBelow(),l=e.eUp.sym,h=l.oNext,d=h;e.fixUpperEdge&&(b.assert(h!==l),b.sweep.deleteRegion_(a,e),b.mesh.deleteEdge(l),l=h.oPrev());b.mesh.meshSplice(c.anEdge,l);b.geom.edgeGoesLeft(h)||(h=null);b.sweep.addRightEdges_(a,f,l.oNext,d,h,!0)}}else b.mesh.splitEdge(e.sym),f.fixUpperEdge&&(b.mesh.deleteEdge(e.oNext),f.fixUpperEdge=!1),b.mesh.meshSplice(c.anEdge,e),b.sweep.sweepEvent_(a,c)};b.sweep.connectLeftVertex_=
function(a,f){var c=new b.ActiveRegion;c.eUp=f.anEdge.sym;var c=a.dict.search(c).getKey(),e=c.regionBelow(),l=c.eUp,h=e.eUp;0===b.geom.edgeSign(l.dst(),f,l.org)?b.sweep.connectLeftDegenerate_(a,c,f):(e=b.geom.vertLeq(h.dst(),l.dst())?c:e,c.inside||e.fixUpperEdge?(l=e===c?b.mesh.connect(f.anEdge.sym,l.lNext):b.mesh.connect(h.dNext(),f.anEdge).sym,e.fixUpperEdge?b.sweep.fixUpperEdge_(e,l):b.sweep.computeWinding_(a,b.sweep.addRegionBelow_(a,c,l)),b.sweep.sweepEvent_(a,f)):b.sweep.addRightEdges_(a,c,
f.anEdge,f.anEdge,null,!0))};b.sweep.sweepEvent_=function(a,f){a.event=f;for(var c=f.anEdge;null===c.activeRegion;)if(c=c.oNext,c===f.anEdge){b.sweep.connectLeftVertex_(a,f);return}f=b.sweep.topLeftRegion_(c.activeRegion);var e=f.regionBelow(),c=e.eUp,e=b.sweep.finishLeftRegions_(a,e,null);e.oNext===c?b.sweep.connectRightVertex_(a,f,e):b.sweep.addRightEdges_(a,f,e.oNext,c,c,!0)};b.sweep.addSentinel_=function(a,f){var c=new b.ActiveRegion,e=b.mesh.makeEdge(a.mesh);e.org.s=b.sweep.SENTINEL_COORD_;e.org.t=
f;e.dst().s=-b.sweep.SENTINEL_COORD_;e.dst().t=f;a.event=e.dst();c.eUp=e;c.windingNumber=0;c.inside=!1;c.fixUpperEdge=!1;c.sentinel=!0;c.dirty=!1;c.nodeUp=a.dict.insert(c)};b.sweep.initEdgeDict_=function(a){a.dict=new b.Dict(a,b.sweep.edgeLeq_);b.sweep.addSentinel_(a,-b.sweep.SENTINEL_COORD_);b.sweep.addSentinel_(a,b.sweep.SENTINEL_COORD_)};b.sweep.doneEdgeDict_=function(a){for(var f=0,c;null!==(c=a.dict.getMin().getKey());)c.sentinel||(b.assert(c.fixUpperEdge),b.assert(1===++f)),b.assert(0===c.windingNumber),
b.sweep.deleteRegion_(a,c);a.dict=null};b.sweep.removeDegenerateEdges_=function(a){for(var f=a.mesh.eHead,c,e=f.next;e!==f;e=c){c=e.next;var l=e.lNext;b.geom.vertEq(e.org,e.dst())&&e.lNext.lNext!==e&&(b.sweep.spliceMergeVertices_(a,l,e),b.mesh.deleteEdge(e),e=l,l=e.lNext);if(l.lNext===e){if(l!==e){if(l===c||l===c.sym)c=c.next;b.mesh.deleteEdge(l)}if(e===c||e===c.sym)c=c.next;b.mesh.deleteEdge(e)}}};b.sweep.initPriorityQ_=function(a){var f=new b.PriorityQ;a.pq=f;a=a.mesh.vHead;var c;for(c=a.next;c!==
a;c=c.next)c.pqHandle=f.insert(c);f.init()};b.sweep.donePriorityQ_=function(a){a.pq.deleteQ();a.pq=null};b.sweep.removeDegenerateFaces_=function(a){for(var f,c=a.fHead.next;c!==a.fHead;c=f)f=c.next,c=c.anEdge,b.assert(c.lNext!==c),c.lNext.lNext===c&&(b.sweep.addWinding_(c.oNext,c),b.mesh.deleteEdge(c))};b.tessmono={};b.tessmono.tessellateMonoRegion_=function(a){a=a.anEdge;for(b.assert(a.lNext!==a&&a.lNext.lNext!==a);b.geom.vertLeq(a.dst(),a.org);a=a.lPrev());for(;b.geom.vertLeq(a.org,a.dst());a=a.lNext);
for(var f=a.lPrev(),c;a.lNext!==f;)if(b.geom.vertLeq(a.dst(),f.org)){for(;f.lNext!==a&&(b.geom.edgeGoesLeft(f.lNext)||0>=b.geom.edgeSign(f.org,f.dst(),f.lNext.dst()));)c=b.mesh.connect(f.lNext,f),f=c.sym;f=f.lPrev()}else{for(;f.lNext!==a&&(b.geom.edgeGoesRight(a.lPrev())||0<=b.geom.edgeSign(a.dst(),a.org,a.lPrev().org));)c=b.mesh.connect(a,a.lPrev()),a=c.sym;a=a.lNext}for(b.assert(f.lNext!==a);f.lNext.lNext!==a;)c=b.mesh.connect(f.lNext,f),f=c.sym};b.tessmono.tessellateInterior=function(a){for(var f,
c=a.fHead.next;c!==a.fHead;c=f)f=c.next,c.inside&&b.tessmono.tessellateMonoRegion_(c)};b.tessmono.discardExterior=function(a){for(var f,c=a.fHead.next;c!==a.fHead;c=f)f=c.next,c.inside||b.mesh.zapFace(c)};b.tessmono.setWindingNumber=function(a,f,c){for(var e,l=a.eHead.next;l!==a.eHead;l=e)e=l.next,l.rFace().inside!==l.lFace.inside?l.winding=l.lFace.inside?f:-f:c?b.mesh.deleteEdge(l):l.winding=0};b.Dict=function(a,f){this.head_=new b.DictNode;this.frame_=a;this.leq_=f};b.Dict.prototype.deleteDict_=
function(){};b.Dict.prototype.insertBefore=function(a,f){do a=a.prev;while(null!==a.key&&!this.leq_(this.frame_,a.key,f));f=new b.DictNode(f,a.next,a);a.next.prev=f;return a.next=f};b.Dict.prototype.insert=function(a){return this.insertBefore(this.head_,a)};b.Dict.prototype.deleteNode=function(a){a.next.prev=a.prev;a.prev.next=a.next};b.Dict.prototype.search=function(a){var b=this.head_;do b=b.next;while(null!==b.key&&!this.leq_(this.frame_,a,b.key));return b};b.Dict.prototype.getMin=function(){return this.head_.next};
b.Dict.prototype.getMax=function(){return this.head_.prev};b.DictNode=function(a,b,c){this.key=a||null;this.next=b||this;this.prev=c||this};b.DictNode.prototype.getKey=function(){return this.key};b.DictNode.prototype.getSuccessor=function(){return this.next};b.DictNode.prototype.getPredecessor=function(){return this.prev};b.GluTesselator=function(){this.state_=b.GluTesselator.tessState_.T_DORMANT;this.errorCallback_=this.mesh=this.lastEdge_=null;this.normal_=[0,0,0];this.windingRule=b.windingRule.GLU_TESS_WINDING_ODD;
this.fatalError=!1;this.combineCallback_=this.event=this.pq=this.dict=null;this.boundaryOnly_=!1;this.polygonData_=this.meshCallback_=this.endCallback_=this.vertexCallback_=this.edgeFlagCallback_=this.beginCallback_=null};b.GluTesselator.tessState_={T_DORMANT:0,T_IN_POLYGON:1,T_IN_CONTOUR:2};b.GluTesselator.prototype.gluDeleteTess=function(){this.requireState_(b.GluTesselator.tessState_.T_DORMANT)};b.GluTesselator.prototype.gluTessProperty=function(a,f){switch(a){case b.gluEnum.GLU_TESS_TOLERANCE:return;
case b.gluEnum.GLU_TESS_WINDING_RULE:switch(f){case b.windingRule.GLU_TESS_WINDING_ODD:case b.windingRule.GLU_TESS_WINDING_NONZERO:case b.windingRule.GLU_TESS_WINDING_POSITIVE:case b.windingRule.GLU_TESS_WINDING_NEGATIVE:case b.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:this.windingRule=f;return}break;case b.gluEnum.GLU_TESS_BOUNDARY_ONLY:this.boundaryOnly_=!!f;return;default:this.callErrorCallback(b.gluEnum.GLU_INVALID_ENUM);return}this.callErrorCallback(b.gluEnum.GLU_INVALID_VALUE)};b.GluTesselator.prototype.gluGetTessProperty=
function(a){switch(a){case b.gluEnum.GLU_TESS_TOLERANCE:return 0;case b.gluEnum.GLU_TESS_WINDING_RULE:return a=this.windingRule,b.assert(a===b.windingRule.GLU_TESS_WINDING_ODD||a===b.windingRule.GLU_TESS_WINDING_NONZERO||a===b.windingRule.GLU_TESS_WINDING_POSITIVE||a===b.windingRule.GLU_TESS_WINDING_NEGATIVE||a===b.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO),a;case b.gluEnum.GLU_TESS_BOUNDARY_ONLY:return b.assert(!0===this.boundaryOnly_||!1===this.boundaryOnly_),this.boundaryOnly_;default:this.callErrorCallback(b.gluEnum.GLU_INVALID_ENUM)}return!1};
b.GluTesselator.prototype.gluTessNormal=function(a,b,c){this.normal_[0]=a;this.normal_[1]=b;this.normal_[2]=c};b.GluTesselator.prototype.gluTessCallback=function(a,f){f=f?f:null;switch(a){case b.gluEnum.GLU_TESS_BEGIN:case b.gluEnum.GLU_TESS_BEGIN_DATA:this.beginCallback_=f;break;case b.gluEnum.GLU_TESS_EDGE_FLAG:case b.gluEnum.GLU_TESS_EDGE_FLAG_DATA:this.edgeFlagCallback_=f;break;case b.gluEnum.GLU_TESS_VERTEX:case b.gluEnum.GLU_TESS_VERTEX_DATA:this.vertexCallback_=f;break;case b.gluEnum.GLU_TESS_END:case b.gluEnum.GLU_TESS_END_DATA:this.endCallback_=
f;break;case b.gluEnum.GLU_TESS_ERROR:case b.gluEnum.GLU_TESS_ERROR_DATA:this.errorCallback_=f;break;case b.gluEnum.GLU_TESS_COMBINE:case b.gluEnum.GLU_TESS_COMBINE_DATA:this.combineCallback_=f;break;case b.gluEnum.GLU_TESS_MESH:this.meshCallback_=f;break;default:this.callErrorCallback(b.gluEnum.GLU_INVALID_ENUM)}};b.GluTesselator.prototype.gluTessVertex=function(a,f){var c=!1,e=[0,0,0];this.requireState_(b.GluTesselator.tessState_.T_IN_CONTOUR);for(var l=0;3>l;++l){var h=a[l];h<-b.GLU_TESS_MAX_COORD&&
(h=-b.GLU_TESS_MAX_COORD,c=!0);h>b.GLU_TESS_MAX_COORD&&(h=b.GLU_TESS_MAX_COORD,c=!0);e[l]=h}c&&this.callErrorCallback(b.errorType.GLU_TESS_COORD_TOO_LARGE);this.addVertex_(e,f)};b.GluTesselator.prototype.gluTessBeginPolygon=function(a){this.requireState_(b.GluTesselator.tessState_.T_DORMANT);this.state_=b.GluTesselator.tessState_.T_IN_POLYGON;this.mesh=new b.GluMesh;this.polygonData_=a};b.GluTesselator.prototype.gluTessBeginContour=function(){this.requireState_(b.GluTesselator.tessState_.T_IN_POLYGON);
this.state_=b.GluTesselator.tessState_.T_IN_CONTOUR;this.lastEdge_=null};b.GluTesselator.prototype.gluTessEndContour=function(){this.requireState_(b.GluTesselator.tessState_.T_IN_CONTOUR);this.state_=b.GluTesselator.tessState_.T_IN_POLYGON};b.GluTesselator.prototype.gluTessEndPolygon=function(){this.requireState_(b.GluTesselator.tessState_.T_IN_POLYGON);this.state_=b.GluTesselator.tessState_.T_DORMANT;b.normal.projectPolygon(this,this.normal_[0],this.normal_[1],this.normal_[2]);b.sweep.computeInterior(this);
if(!this.fatalError){var a=this.mesh;this.boundaryOnly_?b.tessmono.setWindingNumber(a,1,!0):b.tessmono.tessellateInterior(a);this.mesh.checkMesh();if(this.beginCallback_||this.endCallback_||this.vertexCallback_||this.edgeFlagCallback_)this.boundaryOnly_?b.render.renderBoundary(this,this.mesh):b.render.renderMesh(this,this.mesh,!!this.edgeFlagCallback_);if(this.meshCallback_){b.tessmono.discardExterior(this.mesh);this.meshCallback_(this.mesh);this.polygonData_=this.mesh=null;return}}b.mesh.deleteMesh(this.mesh);
this.mesh=this.polygonData_=null};b.GluTesselator.prototype.requireState_=function(a){this.state_!==a&&this.gotoState_(a)};b.GluTesselator.prototype.gotoState_=function(a){for(;this.state_!==a;)if(this.state_<a)switch(this.state_){case b.GluTesselator.tessState_.T_DORMANT:this.callErrorCallback(b.errorType.GLU_TESS_MISSING_BEGIN_POLYGON);this.gluTessBeginPolygon(null);break;case b.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(b.errorType.GLU_TESS_MISSING_BEGIN_CONTOUR),this.gluTessBeginContour()}else switch(this.state_){case b.GluTesselator.tessState_.T_IN_CONTOUR:this.callErrorCallback(b.errorType.GLU_TESS_MISSING_END_CONTOUR);
this.gluTessEndContour();break;case b.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(b.errorType.GLU_TESS_MISSING_END_POLYGON),this.gluTessEndPolygon()}};b.GluTesselator.prototype.addVertex_=function(a,f){var c=this.lastEdge_;null===c?(c=b.mesh.makeEdge(this.mesh),b.mesh.meshSplice(c,c.sym)):(b.mesh.splitEdge(c),c=c.lNext);c.org.data=f;c.org.coords[0]=a[0];c.org.coords[1]=a[1];c.org.coords[2]=a[2];c.winding=1;c.sym.winding=-1;this.lastEdge_=c};b.GluTesselator.prototype.callBeginCallback=
function(a){this.beginCallback_&&this.beginCallback_(a,this.polygonData_)};b.GluTesselator.prototype.callVertexCallback=function(a){this.vertexCallback_&&this.vertexCallback_(a,this.polygonData_)};b.GluTesselator.prototype.callEdgeFlagCallback=function(a){this.edgeFlagCallback_&&this.edgeFlagCallback_(a,this.polygonData_)};b.GluTesselator.prototype.callEndCallback=function(){this.endCallback_&&this.endCallback_(this.polygonData_)};b.GluTesselator.prototype.callCombineCallback=function(a,b,c){return this.combineCallback_?
this.combineCallback_(a,b,c,this.polygonData_)||null:null};b.GluTesselator.prototype.callErrorCallback=function(a){this.errorCallback_&&this.errorCallback_(a,this.polygonData_)};b.GluFace=function(a,b){this.next=a||this;this.prev=b||this;this.anEdge=null;this.inside=!1};b.GluHalfEdge=function(a){this.next=a||this;this.activeRegion=this.lFace=this.org=this.lNext=this.oNext=this.sym=null;this.winding=0};b.GluHalfEdge.prototype.rFace=function(){return this.sym.lFace};b.GluHalfEdge.prototype.dst=function(){return this.sym.org};
b.GluHalfEdge.prototype.oPrev=function(){return this.sym.lNext};b.GluHalfEdge.prototype.lPrev=function(){return this.oNext.sym};b.GluHalfEdge.prototype.dPrev=function(){return this.lNext.sym};b.GluHalfEdge.prototype.rPrev=function(){return this.sym.oNext};b.GluHalfEdge.prototype.dNext=function(){return this.rPrev().sym};b.GluHalfEdge.prototype.rNext=function(){return this.oPrev().sym};b.GluMesh=function(){this.vHead=new b.GluVertex;this.fHead=new b.GluFace;this.eHead=new b.GluHalfEdge;this.eHeadSym=
new b.GluHalfEdge;this.eHead.sym=this.eHeadSym;this.eHeadSym.sym=this.eHead};b.GluMesh.prototype.checkMesh=function(){if(b.DEBUG){var a=this.fHead,f=this.vHead,c=this.eHead,e,l;for(e=e=a;(l=e.next)!==a;e=l){b.assert(l.prev===e);e=l.anEdge;do b.assert(e.sym!==e),b.assert(e.sym.sym===e),b.assert(e.lNext.oNext.sym===e),b.assert(e.oNext.sym.lNext===e),b.assert(e.lFace===l),e=e.lNext;while(e!==l.anEdge)}b.assert(l.prev===e&&null===l.anEdge);for(e=e=f;(a=e.next)!==f;e=a){b.assert(a.prev===e);e=a.anEdge;
do b.assert(e.sym!==e),b.assert(e.sym.sym===e),b.assert(e.lNext.oNext.sym===e),b.assert(e.oNext.sym.lNext===e),b.assert(e.org===a),e=e.oNext;while(e!==a.anEdge)}b.assert(a.prev===e&&null===a.anEdge&&null===a.data);for(f=f=c;(e=f.next)!==c;f=e)b.assert(e.sym.next===f.sym),b.assert(e.sym!==e),b.assert(e.sym.sym===e),b.assert(null!==e.org),b.assert(null!==e.dst()),b.assert(e.lNext.oNext.sym===e),b.assert(e.oNext.sym.lNext===e);b.assert(e.sym.next===f.sym&&e.sym===this.eHeadSym&&e.sym.sym===e&&null===
e.org&&null===e.dst()&&null===e.lFace&&null===e.rFace())}};b.GluVertex=function(a,b){this.next=a||this;this.prev=b||this;this.data=this.anEdge=null;this.coords=[0,0,0];this.pqHandle=this.t=this.s=0};b.PriorityQ=function(){this.verts_=[];this.order_=null;this.size_=0;this.initialized_=!1;this.heap_=new b.PriorityQHeap};b.PriorityQ.prototype.deleteQ=function(){this.verts_=this.order_=this.heap_=null};b.PriorityQ.prototype.init=function(){this.order_=[];for(var a=0;a<this.size_;a++)this.order_[a]=a;
a=function(a){return function(c,f){return b.geom.vertLeq(a[c],a[f])?1:-1}}(this.verts_);this.order_.sort(a);this.initialized_=!0;this.heap_.init();if(b.DEBUG)for(var f=0+this.size_-1,a=0;a<f;++a)b.assert(b.geom.vertLeq(this.verts_[this.order_[a+1]],this.verts_[this.order_[a]]))};b.PriorityQ.prototype.insert=function(a){if(this.initialized_)return this.heap_.insert(a);var b=this.size_++;this.verts_[b]=a;return-(b+1)};b.PriorityQ.prototype.extractMin=function(){if(0===this.size_)return this.heap_.extractMin();
var a=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var f=this.heap_.minimum();if(b.geom.vertLeq(f,a))return this.heap_.extractMin()}do--this.size_;while(0<this.size_&&null===this.verts_[this.order_[this.size_-1]]);return a};b.PriorityQ.prototype.minimum=function(){if(0===this.size_)return this.heap_.minimum();var a=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var f=this.heap_.minimum();if(b.geom.vertLeq(f,a))return f}return a};b.PriorityQ.prototype.remove=function(a){if(0<=
a)this.heap_.remove(a);else for(a=-(a+1),b.assert(a<this.verts_.length&&null!==this.verts_[a]),this.verts_[a]=null;0<this.size_&&null===this.verts_[this.order_[this.size_-1]];)--this.size_};b.PriorityQHeap=function(){this.heap_=b.PriorityQHeap.reallocNumeric_([0],b.PriorityQHeap.INIT_SIZE_+1);this.verts_=[null,null];this.handles_=[0,0];this.size_=0;this.max_=b.PriorityQHeap.INIT_SIZE_;this.freeList_=0;this.initialized_=!1;this.heap_[1]=1};b.PriorityQHeap.INIT_SIZE_=32;b.PriorityQHeap.reallocNumeric_=
function(a,b){for(var c=Array(b),e=0;e<a.length;e++)c[e]=a[e];for(;e<b;e++)c[e]=0;return c};b.PriorityQHeap.prototype.init=function(){for(var a=this.size_;1<=a;--a)this.floatDown_(a);this.initialized_=!0};b.PriorityQHeap.prototype.insert=function(a){var f=++this.size_;2*f>this.max_&&(this.max_*=2,this.handles_=b.PriorityQHeap.reallocNumeric_(this.handles_,this.max_+1));var c;0===this.freeList_?c=f:(c=this.freeList_,this.freeList_=this.handles_[this.freeList_]);this.verts_[c]=a;this.handles_[c]=f;
this.heap_[f]=c;this.initialized_&&this.floatUp_(f);return c};b.PriorityQHeap.prototype.isEmpty=function(){return 0===this.size_};b.PriorityQHeap.prototype.minimum=function(){return this.verts_[this.heap_[1]]};b.PriorityQHeap.prototype.extractMin=function(){var a=this.heap_,b=this.verts_,c=this.handles_,e=a[1],l=b[e];0<this.size_&&(a[1]=a[this.size_],c[a[1]]=1,b[e]=null,c[e]=this.freeList_,this.freeList_=e,0<--this.size_&&this.floatDown_(1));return l};b.PriorityQHeap.prototype.remove=function(a){var f=
this.heap_,c=this.verts_,e=this.handles_;b.assert(1<=a&&a<=this.max_&&null!==c[a]);var l=e[a];f[l]=f[this.size_];e[f[l]]=l;l<=--this.size_&&(1>=l?this.floatDown_(l):b.geom.vertLeq(c[f[l>>1]],c[f[l]])?this.floatDown_(l):this.floatUp_(l));c[a]=null;e[a]=this.freeList_;this.freeList_=a};b.PriorityQHeap.prototype.floatDown_=function(a){for(var f=this.heap_,c=this.verts_,e=this.handles_,l=f[a];;){var h=a<<1;h<this.size_&&b.geom.vertLeq(c[f[h+1]],c[f[h]])&&(h+=1);b.assert(h<=this.max_);var d=f[h];if(h>
this.size_||b.geom.vertLeq(c[l],c[d])){f[a]=l;e[l]=a;break}f[a]=d;e[d]=a;a=h}};b.PriorityQHeap.prototype.floatUp_=function(a){for(var f=this.heap_,c=this.verts_,e=this.handles_,l=f[a];;){var h=a>>1,d=f[h];if(0===h||b.geom.vertLeq(c[d],c[l])){f[a]=l;e[l]=a;break}f[a]=d;e[d]=a;a=h}};b.ActiveRegion=function(){this.nodeUp=this.eUp=null;this.windingNumber=0;this.fixUpperEdge=this.dirty=this.sentinel=this.inside=!1};b.ActiveRegion.prototype.regionBelow=function(){return this.nodeUp.getPredecessor().getKey()};
b.ActiveRegion.prototype.regionAbove=function(){return this.nodeUp.getSuccessor().getKey()};return b})},"esri/views/2d/engine/webgl/mesh/templates/WGLMeshTemplate":function(){define(["require","exports","../../../../../../core/tsSupport/extendsHelper"],function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});b=function(){return function(){}}();a.default=b})},"esri/views/2d/engine/webgl/mesh/templates/WGLLineTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../color ../../definitions ../../enums ../../LineTess ../../number ../../TileClipper ../../Utils ../../WGLDisplayRecord ./WGLMeshTemplate".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v,w){Object.defineProperty(a,"__esModule",{value:!0});var y=c.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate"),r=k.allocTriangles(20),z=k.allocTriangles(20),x=[k.allocExtrudeVectors(),k.allocExtrudeVectors()],p=k.allocExtrudeVectors(),n=h.TILE_SIZE+8,A=new k.Tessellator({distanceAlongCorrection:!0}),B=new g.TileClipper(0,0,0,1,8);B.setExtent(512);b=function(a){function b(b,c,f,g,h,k,l,m,n,p,r){var t=a.call(this)||this;t.capType=k;t.joinType=l;t.fillColor=m;
t.tl=n;t.br=p;t.hasPattern=r;t.geometryType=d.WGLGeometryType.LINE;t.halfWidth=h*e.pt2px(0<g?.5*(g+1/h):0);t._materialStore=b;t.vvFlags=c;t.materialId=t._materialStore.createSpriteMaterial(f,t.geometryType,c);return t}f(b,a);b.fromSimpleLine=function(a,c,d,e,f){var g=d.color,h=t.getCapType("round"),k=t.getJoinType("round"),g=g&&l.premultiplyAlphaRGBA(g)||0;"none"===d.style&&(g=0);if(!e)return new b(a,c,e,d.width,f,h,k,g,0,0,!1);var n=e.rect,p=n.x+1+e.width,r=n.y+1+e.height,n=m.i1616to32(n.x+1,n.y+
1),p=m.i1616to32(p,r);return new b(a,c,e,d.width,f,h,k,g,n,p,!0)};b.fromPictureLineSymbol=function(a,b,c,d){y.error("PictureLineSymbol support does not exist!");return null};b.prototype.writeMesh=function(a,b,c,d,e,f,g){f=this._materialStore.get(this.materialId);var h=b.indexVector;b=b.get("geometry");var k=this.halfWidth,l=new v(d,this.geometryType,this.materialId),m=this._getOffset(b,f);l.vertexFrom=m;l.indexFrom=h.length;a.push(l);switch(c){case "esriGeometryPolyline":a=this._clipLines(e.geometry.paths);
this._write(l,h,b,m,d,k,a,f,g);break;case "esriGeometryPolygon":a=this._clipLines(e.geometry.rings);this._write(l,h,b,m,d,k,a,f,g);break;default:y.error("Unable to handle geometryType: "+c)}};b.prototype._clipLines=function(a){for(var b=[],c=!1,d=0;d<a.length;){var e=[],f=a[d];B.reset(2);var g=f[0],h=g[0],g=g[1];if(c)B.moveTo(h,g);else{if(-8>h||h>n||-8>g||g>n){c=!0;continue}e.push({x:h,y:g})}for(var k=!1,l=f.length,m=1;m<l;++m)if(h+=f[m][0],g+=f[m][1],c)B.lineTo(h,g);else{if(-8>h||h>n||-8>g||g>n){k=
!0;break}e.push({x:h,y:g})}if(k)c=!0;else{if(c){if(e=B.resultWithStarts())for(c=0;c<e.length;c++)b.push(e[c])}else b.push({line:e,start:0});d++;c=!1}}return b};b.prototype._getOffset=function(a,b){b=b.materialKeyInfo.hasVV()?11:8;return a.length/b};b.prototype._write=function(a,b,c,d,e,f,g,h,l){for(var m=0,n=0;n<g.length;n++){var t=g[n],v=t.line;if(!(2>v.length))for(var w=v[0],z=v[v.length-1],y=z.x-w.x,w=z.y-w.y,y=1E-6>y*y+w*w,B=t.start%65535,t=x[1],w=0;w<v.length;w++){var D=v[w],z=t===x[w%2]?x[(w+
1)%2]:x[w%2],C=0===w,Y=w===v.length-1;Y&&y&&!this.hasPattern?k.copyExtrudeVectors(z,p):(this._computeExtrudeVectors(z,w,v,y),m+=this._writeVertices(c,e,f,D.x,D.y,z,B,m,h,l),!z.capCenter||y&&Y||this._writePieIndices(a,b,d,z),y&&C&&!this.hasPattern&&k.copyExtrudeVectors(p,z));C||this._writeBridgeIndices(a,b,d,t,z);if(!Y){var Y=v[w+1],C=[Y.x-D.x,Y.y-D.y],F=k.length(C),C=[C[0]/F,C[1]/F],F=B+F;if(65535<F){var E=(65535-B)/(F-B),B=D.x+(Y.x-D.x)*E,D=D.y+(Y.y-D.y)*E,Y=t;A.buttCap(Y,C,C);m+=this._writeVertices(c,
e,f,B,D,Y,65535,m,h,l);A.bridge(r,z,Y);this._writeBridgeIndices(a,b,d,z,Y);A.buttCap(Y,C,C);B=F-65535}else B=F,t=z}}}a.vertexCount=m};b.prototype._writeVertices=function(a,b,c,d,e,f,g,h,k,l){var n=0,p=m.i1616to32(d,e),r=f.vectors;f=r.items;for(r=r.count;n<r;++n){var t=f[n].vector,x=t[0],t=t[1],w=f[n].texCoords,v=w[0],z=w[1],A=f[n].direction,w=A[0],y=A[1],A=m.i1616to32(g,31*c),x=m.i8888to32(Math.round(31*x),Math.round(31*t),Math.round(31*v),Math.round(31*z)),t=m.i8888to32(Math.round(31*w),Math.round(31*
y),0,0);a.push(p);a.push(b);a.push(this.fillColor);a.push(x);a.push(A);a.push(this.tl);a.push(this.br);a.push(t);this._writeVV(a,l,k);f[n].base={index:h+n,point:[d,e]}}return n};b.prototype._writeVV=function(a,b,c){c.materialKeyInfo.hasVV()&&(a.push(b[d.VVType.SIZE]),a.push(b[d.VVType.COLOR]),a.push(b[d.VVType.OPACITY]))};b.prototype._writeBridgeIndices=function(a,b,c,d,e){A.bridge(r,d,e);for(d=0;d<r.count;++d)e=r.items[d],b.push(c+e.v1.base.index),b.push(c+e.v2.base.index),b.push(c+e.v3.base.index),
a.indexCount+=3};b.prototype._writePieIndices=function(a,b,c,d){A.pie(z,d);for(d=0;d<z.count;++d){var e=z.items[d];b.push(c+e.v1.base.index);b.push(c+e.v2.base.index);b.push(c+e.v3.base.index);a.indexCount+=3}};b.prototype._computeExtrudeVectors=function(a,b,c,d){var e=c[b],f=[void 0,void 0],g=[void 0,void 0];if(0<b&&b<c.length-1){var h=c[(b+c.length-1)%c.length],l=c[(b+1)%c.length];k.normalize(f,[e.x-h.x,e.y-h.y]);k.normalize(g,[l.x-e.x,l.y-e.y])}else if(0===b)l=c[(b+1)%c.length],k.normalize(g,[l.x-
e.x,l.y-e.y]),d?(h=c[c.length-2],k.normalize(f,[e.x-h.x,e.y-h.y])):f=g;else if(b===c.length-1)h=c[(b+c.length-1)%c.length],k.normalize(f,[e.x-h.x,e.y-h.y]),d?(h=c[1],k.normalize(g,[h.x-e.x,h.y-e.y])):g=f;else{console.error("Vertex index 'i' out of range.");return}d||0!==b?d||b!==c.length-1?this._computeJoinExtrudeVectors(a,f,g):this._computeCapExtrudeVectors(a,f,g,k.CapPosition.END):this._computeCapExtrudeVectors(a,f,g,k.CapPosition.START)};b.prototype._computeCapExtrudeVectors=function(a,b,c,e){switch(this.capType){case d.CapType.BUTT:A.buttCap(a,
b,c);break;case d.CapType.ROUND:var f=k.getNumberOfSlices(Math.PI);A.roundCap(a,b,c,e,f,e===k.CapPosition.START?-1:1);break;case d.CapType.SQUARE:A.squareCap(a,b,c,e);break;default:y.error("Encountered unknown cap type: "+this.capType+", defaulting to BUTT"),A.buttCap(a,b,c)}};b.prototype._computeJoinExtrudeVectors=function(a,b,c){var e=k.getRads(b,c);if(e>Math.PI-.05)A.rectJoin(a,b,c);else if(this.joinType===d.JoinType.MITER||.1>e).05>e?A.fastMiterJoin(a,b,c):e<k.MITER_SAFE_RADS?A.miterJoin(a,b,
c):A.bevelJoin(a,b,c,k.SYSTEM_MAG_LIMIT);else if(this.joinType===d.JoinType.BEVEL)A.bevelJoin(a,b,c,1);else if(this.joinType===d.JoinType.ROUND){var f=k.getNumberOfSlices(e);2.3>e?2>f||.5>e?A.bevelJoin(a,b,c,1):A.roundJoin(a,b,c,f):A.unitRoundJoin(a,b,c,f)}};return b}(w.default);a.default=b})},"esri/views/2d/engine/webgl/LineTess":function(){define(["require","exports"],function(b,a){function f(a){var b={items:[],count:0},c;for(c=0;c<a;++c)b.items.push(void 0);return b}function c(a,b){n.vector[0]=
a.vector[0];n.vector[1]=a.vector[1];n.texCoords[0]=a.texCoords[0];n.texCoords[1]=a.texCoords[1];n.direction[0]=a.direction[0];n.direction[1]=a.direction[1];n.base=a.base;a.vector[0]=b.vector[0];a.vector[1]=b.vector[1];a.texCoords[0]=b.texCoords[0];a.texCoords[1]=b.texCoords[1];a.direction[0]=b.direction[0];a.direction[1]=b.direction[1];a.base=b.base;b.vector[0]=n.vector[0];b.vector[1]=n.vector[1];b.texCoords[0]=n.texCoords[0];b.texCoords[1]=n.texCoords[1];b.direction[0]=n.direction[0];b.direction[1]=
n.direction[1];b.base=n.base}function e(a,b){return a[0]*b[0]+a[1]*b[1]}function l(a){return Math.sqrt(e(a,a))}function h(a,b){var c=l(b);a[0]=b[0]/c;a[1]=b[1]/c;return a}function d(a,b){a[0]=-b[1];a[1]=b[0];return a}function k(a,b){return a[0]*b[1]-a[1]*b[0]}function m(a,b){a[0]=-b[0];a[1]=-b[1];return a}function g(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a}function t(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a}function v(a,b){a=e(a,b);return.999<a?0:-.999>a?Math.PI:Math.acos(a)}function w(a,b,c,
d,e){if(0===d)a.count=0;else{var f=l(b),h=g(A[0],b,1/f);c=g(A[1],c,1/f);h=v(h,c);h=(e?-1:1)*h/d;e=Math.cos(h);h=Math.sin(h);c=b[0];var k=b[1];for(b=0;b<d-1;++b)f=c,c=e*f-h*k,k=h*f+e*k,a.items[b][0]=c,a.items[b][1]=k;a.count=d-1}}function y(a){var b=a.count,c=Math.floor(b/2),d;for(d=0;d<c;++d){var e=a.items[d];a.items[d]=a.items[b-d-1];a.items[b-d-1]=e}}Object.defineProperty(a,"__esModule",{value:!0});var r;(function(a){a[a.ENTRY=1]="ENTRY";a[a.EXIT=2]="EXIT";a[a.CAP=3]="CAP"})(r=a.VectorRole||(a.VectorRole=
{}));var z;(function(a){a[a.START=1]="START";a[a.END=2]="END"})(z=a.CapPosition||(a.CapPosition={}));a.SYSTEM_MAG_LIMIT=3.8;a.MITER_SAFE_RADS=2*Math.acos(1/a.SYSTEM_MAG_LIMIT);var x=a.SYSTEM_MAG_LIMIT*a.SYSTEM_MAG_LIMIT,p=16/(2*Math.PI);a.allocTriangles=function(a){var b={items:[],count:0},c;for(c=0;c<a;++c)b.items.push({v1:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v2:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v3:{vector:[void 0,
void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]}});return b};a.allocExtrudeVectors=function(){var a={items:[],count:0},b;for(b=0;30>b;++b)a.items.push({vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]});b={};b[r.ENTRY]=f(20);b[r.EXIT]=f(20);b[r.CAP]=f(20);return{vectors:a,lists:b}};a.copyExtrudeVectors=function(a,b){var c;for(c=0;c<b.vectors.count;++c)a.vectors.items[c].vector[0]=b.vectors.items[c].vector[0],a.vectors.items[c].vector[1]=b.vectors.items[c].vector[1],
a.vectors.items[c].texCoords[0]=b.vectors.items[c].texCoords[0],a.vectors.items[c].texCoords[1]=b.vectors.items[c].texCoords[1],a.vectors.items[c].direction[0]=b.vectors.items[c].direction[0],a.vectors.items[c].direction[1]=b.vectors.items[c].direction[1],a.vectors.items[c].base=b.vectors.items[c].base;a.vectors.count=b.vectors.count;var d=b.lists[r.ENTRY],e=a.lists[r.ENTRY],f=b.lists[r.EXIT],g=a.lists[r.EXIT],h=b.lists[r.CAP],k=a.lists[r.CAP];for(c=0;c<d.count;++c)e.items[c]=d.items[c];e.count=d.count;
for(c=0;c<f.count;++c)g.items[c]=f.items[c];g.count=f.count;for(c=0;c<h.count;++c)k.items[c]=h.items[c];k.count=h.count;a.capCenter=b.capCenter};var n={vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0],base:void 0};a.swapExtrudeVectors=c;var A=[];for(b=0;32>b;++b)A.push([void 0,void 0]);var B=function(a){var b={items:[],count:0},c;for(c=0;c<a;++c)b.items.push([void 0,void 0]);return b}(16);a.length=l;a.normalize=h;a.getNumberOfSlices=function(a){return Math.max(Math.round(a*
p),1)};a.getRads=v;a.reverse=y;var C=[void 0,void 0],F=[void 0,void 0],D=[0,0],H=[0,0],E=[0,0],J=[0,0],ha=Math.cos(Math.PI/4),ea=Math.sin(Math.PI/4),ba=Math.sqrt(2);b=function(){function a(a){this._distanceAlongCorrection=a.distanceAlongCorrection}a.prototype.bridge=function(a,b,d){var e=b.vectors;b=b.lists[r.EXIT];var f=d.vectors,g=d.lists[r.ENTRY],h,k;if(b.count===g.count+1)d=b.items,h=e.items,k=g.items,f=f.items;else if(g.count===b.count+1)d=g.items,h=f.items,k=b.items,f=e.items;else if(b.count===
g.count)d=g.items,h=f.items,k=b.items,f=e.items;else{console.error("Cannot bridge "+b.count+" to "+g.count+".");a.count=0;return}e=b.count+g.count-2;a.count=e;C[0]=d;C[1]=k;F[0]=h;F[1]=f;for(b=0;b<e;++b)d=a.items[b],h=(b+0)%2,h=F[h][C[h][Math.floor((b+0)/2)]],d.v1.vector[0]=h.vector[0],d.v1.vector[1]=h.vector[1],d.v1.texCoords[0]=h.texCoords[0],d.v1.texCoords[1]=h.texCoords[1],d.v1.direction[0]=h.direction[0],d.v1.direction[1]=h.direction[1],d.v1.base=h.base,h=(b+1)%2,h=F[h][C[h][Math.floor((b+1)/
2)]],d.v2.vector[0]=h.vector[0],d.v2.vector[1]=h.vector[1],d.v2.texCoords[0]=h.texCoords[0],d.v2.texCoords[1]=h.texCoords[1],d.v2.direction[0]=h.direction[0],d.v2.direction[1]=h.direction[1],d.v2.base=h.base,h=(b+2)%2,h=F[h][C[h][Math.floor((b+2)/2)]],d.v3.vector[0]=h.vector[0],d.v3.vector[1]=h.vector[1],d.v3.texCoords[0]=h.texCoords[0],d.v3.texCoords[1]=h.texCoords[1],d.v3.direction[0]=h.direction[0],d.v3.direction[1]=h.direction[1],d.v3.base=h.base,h=d.v1.base&&d.v1.base.point||D,k=d.v2.base&&d.v2.base.point||
D,f=d.v3.base&&d.v3.base.point||D,H[0]=h[0]+d.v1.vector[0],H[1]=h[1]+d.v1.vector[1],E[0]=k[0]+d.v2.vector[0],E[1]=k[1]+d.v2.vector[1],J[0]=f[0]+d.v3.vector[0],J[1]=f[1]+d.v3.vector[1],0>(E[0]-H[0])*(J[1]-H[1])-(J[0]-H[0])*(E[1]-H[1])||c(d.v2,d.v3)};a.prototype.pie=function(a,b){if(0===b.lists[r.CAP].count)a.count=0;else if(1===b.lists[r.CAP].count)console.error("A single vector is not enough to define a pie."),a.count=0;else{a.count=b.lists[r.CAP].count-1;var d;for(d=0;d<a.count;++d){var e=a.items[d],
f=b.vectors.items[b.lists[r.CAP].items[d]];e.v1.vector[0]=f.vector[0];e.v1.vector[1]=f.vector[1];e.v1.texCoords[0]=f.texCoords[0];e.v1.texCoords[1]=f.texCoords[1];e.v1.direction[0]=f.direction[0];e.v1.direction[1]=f.direction[1];e.v1.base=f.base;f=b.vectors.items[b.lists[r.CAP].items[d+1]];e.v2.vector[0]=f.vector[0];e.v2.vector[1]=f.vector[1];e.v2.texCoords[0]=f.texCoords[0];e.v2.texCoords[1]=f.texCoords[1];e.v2.direction[0]=f.direction[0];e.v2.direction[1]=f.direction[1];e.v2.base=f.base;f=b.vectors.items[b.capCenter];
e.v3.vector[0]=f.vector[0];e.v3.vector[1]=f.vector[1];e.v3.texCoords[0]=f.texCoords[0];e.v3.texCoords[1]=f.texCoords[1];e.v3.direction[0]=f.direction[0];e.v3.direction[1]=f.direction[1];e.v3.base=f.base;var f=e.v1.base&&e.v1.base.point||D,g=e.v2.base&&e.v2.base.point||D,h=e.v3.base&&e.v3.base.point||D;H[0]=f[0]+e.v1.vector[0];H[1]=f[1]+e.v1.vector[1];E[0]=g[0]+e.v2.vector[0];E[1]=g[1]+e.v2.vector[1];J[0]=h[0]+e.v3.vector[0];J[1]=h[1]+e.v3.vector[1];0>(E[0]-H[0])*(J[1]-H[1])-(J[0]-H[0])*(E[1]-H[1])||
c(e.v2,e.v3)}}};a.prototype.buttCap=function(a,b,c){this.fastMiterJoin(a,b,c)};a.prototype.roundCap=function(a,b,c,d,e,f){void 0===f&&(f=0);this.fastMiterJoin(a,b,c);c=d===z.START?0:1;d=d===z.START?1:0;a.capCenter=a.vectors.count;b=a.vectors.items[a.capCenter];b.vector[0]=0;b.vector[1]=0;b.texCoords[0]=0;b.texCoords[1]=0;b.direction[0]=0;b.direction[1]=0;++a.vectors.count;w(B,a.vectors.items[c].vector,a.vectors.items[d].vector,e,!1);e=a.vectors.count;b=a.lists[r.CAP];b.items[0]=c;c=a.vectors.items[c].texCoords[1];
var g=a.vectors.items[d].texCoords[1],h;for(h=0;h<B.count;++h){var k=f*(1-Math.abs(B.count/2-h)/(B.count/2)),l=c+h/(B.count-1)*(g-c),m=B.items[h],n=a.vectors.items[e+h];n.vector[0]=m[0];n.vector[1]=m[1];n.texCoords[0]=k;n.texCoords[1]=l;n.direction[0]=0;n.direction[1]=0;b.items[h+1]=e+h}b.items[B.count+1]=d;b.count=B.count+2;a.vectors.count=e+B.count};a.prototype.squareCap=function(a,b,c,d){this.fastMiterJoin(a,b,c);b=d===z.START?0:1;c=d===z.START?1:0;var e=A[0],f=A[1],h=A[2],k=A[3];d=A[4];var l=
a.vectors.items[b].vector;e[0]=ha*l[0]-ea*l[1];e[1]=ea*l[0]+ha*l[1];g(k,e,ba);f[0]=ha*e[0]-ea*e[1];f[1]=ea*e[0]+ha*e[1];h[0]=ha*f[0]-ea*f[1];h[1]=ea*f[0]+ha*f[1];g(d,h,ba);b=a.vectors.items[b];b.vector[0]=k[0];b.vector[1]=k[1];a=a.vectors.items[c];a.vector[0]=d[0];a.vector[1]=d[1]};a.prototype.fastMiterJoin=function(a,b,c){c=d(A[0],c);b=m(A[1],c);var e=a.vectors.items[0];e.vector[0]=c[0];e.vector[1]=c[1];e.texCoords[0]=0;e.texCoords[1]=-1;e.direction[0]=0;e.direction[1]=0;c=a.vectors.items[1];c.vector[0]=
b[0];c.vector[1]=b[1];c.texCoords[0]=0;c.texCoords[1]=1;c.direction[0]=0;c.direction[1]=0;a.vectors.count=2;b=a.lists[r.ENTRY];b.items[0]=0;b.items[1]=1;b.count=2;b=a.lists[r.EXIT];b.items[0]=0;b.items[1]=1;b.count=2;a.lists[r.CAP].count=0;a.capCenter=void 0};a.prototype.miterJoin=function(a,b,c){var f=d(A[0],b),k=d(A[1],c),l=A[2];l[0]=f[0]+k[0];l[1]=f[1]+k[1];k=h(A[3],l);f=e(k,f);k=g(A[4],k,1/f);f=m(A[5],k);this._distanceAlongCorrection?(l=a.vectors.items[0],l.vector[0]=k[0],l.vector[1]=k[1],l.texCoords[0]=
0,l.texCoords[1]=-1,l.direction[0]=b[0],l.direction[1]=b[1],l=a.vectors.items[1],l.vector[0]=f[0],l.vector[1]=f[1],l.texCoords[0]=0,l.texCoords[1]=1,l.direction[0]=b[0],l.direction[1]=b[1],b=a.vectors.items[2],b.vector[0]=k[0],b.vector[1]=k[1],b.texCoords[0]=0,b.texCoords[1]=-1,b.direction[0]=c[0],b.direction[1]=c[1],b=a.vectors.items[3],b.vector[0]=f[0],b.vector[1]=f[1],b.texCoords[0]=0,b.texCoords[1]=1,b.direction[0]=c[0],b.direction[1]=c[1],a.vectors.count=4,c=a.lists[r.ENTRY],c.items[0]=0,c.items[1]=
1,c.count=2,c=a.lists[r.EXIT],c.items[0]=2,c.items[1]=3):(l=a.vectors.items[0],l.vector[0]=k[0],l.vector[1]=k[1],l.texCoords[0]=0,l.texCoords[1]=-1,l.direction[0]=0,l.direction[1]=0,l=a.vectors.items[1],l.vector[0]=f[0],l.vector[1]=f[1],l.texCoords[0]=0,l.texCoords[1]=1,l.direction[0]=0,l.direction[1]=0,a.vectors.count=2,c=a.lists[r.ENTRY],c.items[0]=0,c.items[1]=1,c.count=2,c=a.lists[r.EXIT],c.items[0]=0,c.items[1]=1);c.count=2;a.lists[r.CAP].count=0;a.capCenter=void 0};a.prototype.bevelJoin=function(a,
b,c,f){var l=f*f;f=k(b,c);var n=0<f?[-1,1]:[1,-1],p=n[0],n=n[1],w=0<f?m(A[0],d(A[1],b)):d(A[2],b),v=0<f?m(A[3],d(A[4],c)):d(A[5],c),z=A[6];z[0]=w[0]+v[0];z[1]=w[1]+v[1];var B=h(A[7],z),C=m(A[8],B),D=e(B,w),z=k(B,w),F=Math.abs(z/D),z=1+F*F,E=z<x?[F,this._distanceAlongCorrection]:[Math.sqrt(x-1),!0],H=E[0],E=E[1],J=z<l?[F,this._distanceAlongCorrection]:[Math.sqrt(l-1),!0],F=J[0];(J=J[1])&&E?(E=a.vectors.items[0],t(E.vector,m(A[9],w),g(A[10],m(A[11],b),H)),E.texCoords[0]=0,E.texCoords[1]=p,E.direction[0]=
this._distanceAlongCorrection?b[0]:0,E.direction[1]=this._distanceAlongCorrection?b[1]:0,C=a.vectors.items[1],t(C.vector,m(A[12],v),g(A[13],c,H)),C.texCoords[0]=0,C.texCoords[1]=p,C.direction[0]=this._distanceAlongCorrection?c[0]:0,C.direction[1]=this._distanceAlongCorrection?c[1]:0,p=a.vectors.items[2],p.vector[0]=0,p.vector[1]=0,p.texCoords[0]=0,p.texCoords[1]=0,p.direction[0]=0,p.direction[1]=0,p=a.vectors.items[3],t(p.vector,w,g(A[14],b,F)),p.texCoords[0]=0,p.texCoords[1]=n,p.direction[0]=this._distanceAlongCorrection?
b[0]:0,p.direction[1]=this._distanceAlongCorrection?b[1]:0,b=a.vectors.items[4],t(b.vector,v,g(A[15],m(A[16],c),F)),b.texCoords[0]=0,b.texCoords[1]=n,b.direction[0]=this._distanceAlongCorrection?c[0]:0,b.direction[1]=this._distanceAlongCorrection?c[1]:0,a.vectors.count=5,c=a.lists[r.ENTRY],c.items[0]=0,c.items[1]=2,c.items[2]=3,c.count=3,c=a.lists[r.EXIT],c.items[0]=1,c.items[1]=2,c.items[2]=4,c.count=3,z<l?(l=a.lists[r.CAP],l.count=0,a.capCenter=void 0):(l=a.lists[r.CAP],l.items[0]=3,l.items[1]=
4,l.count=2,a.capCenter=2)):!J&&E?(E=a.vectors.items[0],t(E.vector,m(A[9],w),g(A[10],m(A[11],b),H)),E.texCoords[0]=0,E.texCoords[1]=p,E.direction[0]=this._distanceAlongCorrection?b[0]:0,E.direction[1]=this._distanceAlongCorrection?b[1]:0,C=a.vectors.items[1],t(C.vector,m(A[12],v),g(A[13],c,H)),C.texCoords[0]=0,C.texCoords[1]=p,C.direction[0]=this._distanceAlongCorrection?c[0]:0,C.direction[1]=this._distanceAlongCorrection?c[1]:0,p=a.vectors.items[2],p.vector[0]=0,p.vector[1]=0,p.texCoords[0]=0,p.texCoords[1]=
0,p.direction[0]=0,p.direction[1]=0,p=a.vectors.items[3],g(p.vector,B,1/D),p.texCoords[0]=0,p.texCoords[1]=n,p.direction[0]=0,p.direction[1]=0,a.vectors.count=4,c=a.lists[r.ENTRY],c.items[0]=0,c.items[1]=2,c.items[2]=3,c.count=3,c=a.lists[r.EXIT],c.items[0]=1,c.items[1]=2,c.items[2]=3,c.count=3,a.lists[r.CAP].count=0,a.capCenter=void 0):J&&!E?(E=a.vectors.items[0],g(E.vector,C,1/D),E.texCoords[0]=0,E.texCoords[1]=p,E.direction[0]=0,E.direction[1]=0,C=a.vectors.items[1],C.vector[0]=0,C.vector[1]=0,
C.texCoords[0]=0,C.texCoords[1]=0,C.direction[0]=0,C.direction[1]=0,p=a.vectors.items[2],t(p.vector,w,g(A[9],b,F)),p.texCoords[0]=0,p.texCoords[1]=n,p.direction[0]=this._distanceAlongCorrection?b[0]:0,p.direction[1]=this._distanceAlongCorrection?b[1]:0,p=a.vectors.items[3],t(p.vector,v,g(A[10],m(A[11],c),F)),p.texCoords[0]=0,p.texCoords[1]=n,p.direction[0]=this._distanceAlongCorrection?c[0]:0,p.direction[1]=this._distanceAlongCorrection?c[1]:0,a.vectors.count=4,c=a.lists[r.ENTRY],c.items[0]=0,c.items[1]=
1,c.items[2]=2,c.count=3,c=a.lists[r.EXIT],c.items[0]=0,c.items[1]=1,c.items[2]=3,c.count=3,z<l?(l=a.lists[r.CAP],l.count=0,a.capCenter=void 0):(l=a.lists[r.CAP],l.items[0]=2,l.items[1]=3,l.count=2,a.capCenter=1)):J||E||(E=a.vectors.items[0],g(E.vector,C,1/D),E.texCoords[0]=0,E.texCoords[1]=p,E.direction[0]=0,E.direction[1]=0,C=a.vectors.items[1],g(C.vector,B,1/D),C.texCoords[0]=0,C.texCoords[1]=n,C.direction[0]=0,C.direction[1]=0,a.vectors.count=2,c=a.lists[r.ENTRY],c.items[0]=0,c.items[1]=1,c.count=
2,c=a.lists[r.EXIT],c.items[0]=0,c.items[1]=1,c.count=2,a.lists[r.CAP].count=0,a.capCenter=void 0);0>f&&(y(a.lists[r.ENTRY]),y(a.lists[r.EXIT]))};a.prototype.roundJoin=function(a,b,c,f){var l=k(b,c),n=0<l?[-1,1]:[1,-1],p=n[0],n=n[1],v=0<l?m(A[0],d(A[1],b)):d(A[2],b),z=0<l?m(A[3],d(A[4],c)):d(A[5],c),C=A[6];C[0]=v[0]+z[0];C[1]=v[1]+z[1];var D=h(A[7],C),C=m(A[8],D),F=e(D,v),D=k(D,v),D=Math.abs(D/F),E=1+D*D<x?[D,this._distanceAlongCorrection]:[Math.sqrt(x-1),!0],D=E[0];E[1]?(E=a.vectors.items[0],E.vector[0]=
v[0],E.vector[1]=v[1],E.texCoords[0]=0,E.texCoords[1]=n,E.direction[0]=0,E.direction[1]=0,E=a.vectors.items[1],E.vector[0]=z[0],E.vector[1]=z[1],E.texCoords[0]=0,E.texCoords[1]=n,E.direction[0]=0,E.direction[1]=0,E=a.vectors.items[2],t(E.vector,m(A[9],v),g(A[10],m(A[11],b),D)),E.texCoords[0]=0,E.texCoords[1]=p,E.direction[0]=this._distanceAlongCorrection?b[0]:0,E.direction[1]=this._distanceAlongCorrection?b[1]:0,b=a.vectors.items[3],t(b.vector,m(A[12],z),g(A[13],c,D)),b.texCoords[0]=0,b.texCoords[1]=
p,b.direction[0]=this._distanceAlongCorrection?c[0]:0,b.direction[1]=this._distanceAlongCorrection?c[1]:0,c=a.vectors.items[4],c.vector[0]=0,c.vector[1]=0,c.texCoords[0]=0,c.texCoords[1]=0,c.direction[0]=0,c.direction[1]=0,a.vectors.count=5,c=a.lists[r.ENTRY],c.items[0]=2,c.items[1]=4,c.items[2]=0,c.count=3,c=a.lists[r.EXIT],c.items[0]=3,c.items[1]=4,c.items[2]=1,c.count=3,a.capCenter=4):(E=a.vectors.items[0],E.vector[0]=v[0],E.vector[1]=v[1],E.texCoords[0]=0,E.texCoords[1]=n,E.direction[0]=0,E.direction[1]=
0,E=a.vectors.items[1],E.vector[0]=z[0],E.vector[1]=z[1],E.texCoords[0]=0,E.texCoords[1]=n,E.direction[0]=0,E.direction[1]=0,E=a.vectors.items[2],g(E.vector,C,1/F),E.texCoords[0]=0,E.texCoords[1]=p,E.direction[0]=0,E.direction[1]=0,b=a.vectors.items[3],b.vector[0]=0,b.vector[1]=0,b.texCoords[0]=0,b.texCoords[1]=0,b.direction[0]=0,b.direction[1]=0,a.vectors.count=4,c=a.lists[r.ENTRY],c.items[0]=2,c.items[1]=3,c.items[2]=0,c.count=3,c=a.lists[r.EXIT],c.items[0]=2,c.items[1]=3,c.items[2]=1,c.count=3,
a.capCenter=3);w(B,v,z,f,0>l);f=a.vectors.count;v=a.lists[r.CAP];for(z=v.items[0]=0;z<B.count;++z)c=B.items[z],p=a.vectors.items[f+z],p.vector[0]=c[0],p.vector[1]=c[1],p.texCoords[0]=0,p.texCoords[1]=n,p.direction[0]=0,p.direction[1]=0,v.items[z+1]=f+z;v.items[B.count+1]=1;v.count=B.count+2;a.vectors.count=f+B.count;0>l&&(y(a.lists[r.ENTRY]),y(a.lists[r.EXIT]))};a.prototype.unitRoundJoin=function(a,b,c,e){var f=k(b,c),g=0<f?[-1,1]:[1,-1],h=g[0],g=g[1];b=0<f?m(A[0],d(A[1],b)):d(A[2],b);c=0<f?m(A[3],
d(A[4],c)):d(A[5],c);var l=a.vectors.items[0];l.vector[0]=b[0];l.vector[1]=b[1];l.texCoords[0]=0;l.texCoords[1]=g;l.direction[0]=0;l.direction[1]=0;l=a.vectors.items[1];l.vector[0]=c[0];l.vector[1]=c[1];l.texCoords[0]=0;l.texCoords[1]=g;l.direction[0]=0;l.direction[1]=0;l=a.vectors.items[2];m(l.vector,b);l.texCoords[0]=0;l.texCoords[1]=h;l.direction[0]=0;l.direction[1]=0;l=a.vectors.items[3];m(l.vector,c);l.texCoords[0]=0;l.texCoords[1]=h;l.direction[0]=0;l.direction[1]=0;h=a.vectors.items[4];h.vector[0]=
0;h.vector[1]=0;h.texCoords[0]=0;h.texCoords[1]=0;h.direction[0]=0;h.direction[1]=0;a.vectors.count=5;h=a.lists[r.ENTRY];h.items[0]=2;h.items[1]=0;h.count=2;h=a.lists[r.EXIT];h.items[0]=3;h.items[1]=1;h.count=2;a.capCenter=4;w(B,b,c,e,0>f);e=a.vectors.count;b=a.lists[r.CAP];for(h=b.items[0]=0;h<B.count;++h)c=B.items[h],l=a.vectors.items[e+h],l.vector[0]=c[0],l.vector[1]=c[1],l.texCoords[0]=0,l.texCoords[1]=g,l.direction[0]=0,l.direction[1]=0,b.items[h+1]=e+h;b.items[B.count+1]=1;b.count=B.count+2;
a.vectors.count=e+B.count;0>f&&(y(a.lists[r.ENTRY]),y(a.lists[r.EXIT]))};a.prototype.rectJoin=function(a,b,c){b=d(A[0],b);c=d(A[1],c);var e=a.vectors.items[0];e.vector[0]=b[0];e.vector[1]=b[1];e.texCoords[0]=0;e.texCoords[1]=-1;e.direction[0]=0;e.direction[1]=0;e=a.vectors.items[1];e.vector[0]=c[0];e.vector[1]=c[1];e.texCoords[0]=0;e.texCoords[1]=-1;e.direction[0]=0;e.direction[1]=0;e=a.vectors.items[2];m(e.vector,b);e.texCoords[0]=0;e.texCoords[1]=1;e.direction[0]=0;e.direction[1]=0;b=a.vectors.items[3];
m(b.vector,c);b.texCoords[0]=0;b.texCoords[1]=1;b.direction[0]=0;b.direction[1]=0;a.vectors.count=4;b=a.lists[r.ENTRY];b.items[0]=0;b.items[1]=2;b.count=2;b=a.lists[r.EXIT];b.items[0]=1;b.items[1]=3;b.count=2;a.capCenter=void 0};return a}();a.Tessellator=b})},"esri/views/2d/engine/webgl/mesh/templates/WGLMarkerTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../core/libs/gl-matrix/mat2d ../../../../../../core/libs/gl-matrix/vec2 ../../color ../../definitions ../../enums ../../number ../../WGLDisplayRecord ./WGLMeshTemplate".split(" "),
function(b,a,f,c,e,l,h,d,k,m,g,t,v){Object.defineProperty(a,"__esModule",{value:!0});var w=c.getLogger("esri.views.2d.engine.webgl.WGLMeshTemplate");b=function(a){function b(b,c,d,e,f,k,r,t,v,w,y){var n=a.call(this)||this;n.geometryType=m.WGLGeometryType.MARKER;var p=h.create(),x=l.create();l.translate(x,x,new Float32Array([d,-e]));f&&l.rotate(x,x,3.14159265359/180*f);n._materialStore=b;n.vvFlags=c;n.materialId=b.createSpriteMaterial(y,n.geometryType,c);n.fillColor=k;n.outlineColor=v;n.xOffset=d;
n.yOffset=e;n.sizeOutlineWidth=g.i8888to32(r,t,w,0);b=Math.round(y.rect.x/4);c=Math.round(y.rect.y/4);d=b+Math.round(y.rect.width/4);y=c+Math.round(y.rect.height/4);p.set([-.5*r,-.5*t]);h.transformMat2d(p,p,x);n.offsetAndTexUpperLeft=g.i8888to32(p[0],p[1],b,c);p.set([.5*r,-.5*t]);h.transformMat2d(p,p,x);n.offsetAndTexUpperRight=g.i8888to32(p[0],p[1],d,c);p.set([-.5*r,.5*t]);h.transformMat2d(p,p,x);n.offsetAndTexBottomLeft=g.i8888to32(p[0],p[1],b,y);p.set([.5*r,.5*t]);h.transformMat2d(p,p,x);n.offsetAndTexBottomRight=
g.i8888to32(p[0],p[1],d,y);return n}f(b,a);b.fromPictureMarker=function(a,c,d,f,g){var h=Math.round(g*e.pt2px(d.width)),l=Math.round(g*e.pt2px(d.height)),m=k.PICTURE_FILL_COLOR,n=f.sdf?.5:1,p=Math.round(n*g*e.pt2px(d.xoffset||0));g=Math.round(n*g*e.pt2px(d.yoffset||0));return new b(a,c,p,g,d.angle,m,h,l,0,0,f)};b.fromSimpleMarker=function(a,c,f,g,h){var k=d.premultiplyAlphaRGBA(f.color),l=Math.round(h*e.pt2px(f.size)),m=Math.round(.5*h*e.pt2px(f.xoffset||0));h=Math.round(.5*h*e.pt2px(f.yoffset||0));
var n=f.outline,p=(n&&n.color&&d.premultiplyAlphaRGBA(n.color))|0,n=(n&&n.width&&Math.round(e.pt2px(n.width)))|0;return new b(a,c,m,h,f.angle,k,l,l,p,n,g)};b.prototype.writeMesh=function(a,b,c,d,e,f,g){f=this._materialStore.get(this.materialId);var h=b.indexVector;b=b.get("geometry");var k=new t(d,this.geometryType,this.materialId),l=this._getOffset(b,f);a.push(k);k.vertexFrom=l;k.indexFrom=h.length;switch(c){case "esriGeometryPoint":c=e.geometry;a=c.x;c=c.y;this._writeVertices(k,b,d,this._getPos(a,
c),f,g);this._writeIndices(k,h,l);break;case "esriGeometryPolyline":this._writeMany(k,h,b,l,d,e.geometry.paths[0],f,g);break;case "esriGeometryPolygon":(c=e.centroid)?(a=c.x,c=c.y,this._writeVertices(k,b,d,this._getPos(a,c),f,g),this._writeIndices(k,h,l)):w.error("Tried to render polygon geometries as markers, but found no centroid!");break;case "esriGeometryMultipoint":this._writeMany(k,h,b,l,d,e.geometry.points,f,g);break;default:w.error("Unable to handle geometryType: "+c)}};b.prototype._getPos=
function(a,b){return g.i1616to32(a,b)};b.prototype._writeMany=function(a,b,c,d,e,f,g,h){for(var k=0,l=0,m=0,n=0;n<f.length;n++){var p=f[n],r=p[0],p=p[1];this._writeVertices(a,c,e,this._getPos(r+k,p+l),g,h);this._writeIndices(a,b,d+m);k+=r;l+=p;m+=4}};b.prototype._getOffset=function(a,b){b=b.materialKeyInfo.hasVV()?10:6;return a.length/b};b.prototype._writeVertices=function(a,b,c,d,e,f){b.push(d);b.push(this.offsetAndTexUpperLeft);b.push(c);b.push(this.fillColor);b.push(this.outlineColor);b.push(this.sizeOutlineWidth);
this._writeVV(b,f,e);b.push(d);b.push(this.offsetAndTexUpperRight);b.push(c);b.push(this.fillColor);b.push(this.outlineColor);b.push(this.sizeOutlineWidth);this._writeVV(b,f,e);b.push(d);b.push(this.offsetAndTexBottomLeft);b.push(c);b.push(this.fillColor);b.push(this.outlineColor);b.push(this.sizeOutlineWidth);this._writeVV(b,f,e);b.push(d);b.push(this.offsetAndTexBottomRight);b.push(c);b.push(this.fillColor);b.push(this.outlineColor);b.push(this.sizeOutlineWidth);this._writeVV(b,f,e);a.vertexCount+=
4};b.prototype._writeVV=function(a,b,c){c.materialKeyInfo.hasVV()&&(a.push(b[m.VVType.SIZE]),a.push(b[m.VVType.COLOR]),a.push(b[m.VVType.OPACITY]),a.push(b[m.VVType.ROTATION]))};b.prototype._writeIndices=function(a,b,c){b.push(c+0);b.push(c+1);b.push(c+2);b.push(c+1);b.push(c+3);b.push(c+2);a.indexCount+=6};return b}(v.default);a.default=b})},"esri/core/libs/gl-matrix/mat2d":function(){define(["./common"],function(b){var a={create:function(){var a=new b.ARRAY_TYPE(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=
0;a[5]=0;return a},clone:function(a){var c=new b.ARRAY_TYPE(6);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];return c},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},fromValues:function(a,c,e,l,h,d){var f=new b.ARRAY_TYPE(6);f[0]=a;f[1]=c;f[2]=e;f[3]=l;f[4]=h;f[5]=d;return f},set:function(a,b,e,l,h,d,k){a[0]=b;a[1]=e;a[2]=l;a[3]=h;a[4]=d;a[5]=k;return a},invert:function(a,
b){var c=b[0],f=b[1],h=b[2],d=b[3],k=b[4];b=b[5];var m=c*d-f*h;if(!m)return null;m=1/m;a[0]=d*m;a[1]=-f*m;a[2]=-h*m;a[3]=c*m;a[4]=(h*b-d*k)*m;a[5]=(f*k-c*b)*m;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,b,e){var c=b[0],f=b[1],d=b[2],k=b[3],m=b[4];b=b[5];var g=e[0],t=e[1],v=e[2],w=e[3],y=e[4];e=e[5];a[0]=c*g+d*t;a[1]=f*g+k*t;a[2]=c*v+d*w;a[3]=f*v+k*w;a[4]=c*y+d*e+m;a[5]=f*y+k*e+b;return a}};a.mul=a.multiply;a.rotate=function(a,b,e){var c=b[0],f=b[1],d=b[2],k=b[3],
m=b[4];b=b[5];var g=Math.sin(e);e=Math.cos(e);a[0]=c*e+d*g;a[1]=f*e+k*g;a[2]=c*-g+d*e;a[3]=f*-g+k*e;a[4]=m;a[5]=b;return a};a.scale=function(a,b,e){var c=b[1],f=b[2],d=b[3],k=b[4],m=b[5],g=e[0];e=e[1];a[0]=b[0]*g;a[1]=c*g;a[2]=f*e;a[3]=d*e;a[4]=k;a[5]=m;return a};a.translate=function(a,b,e){var c=b[0],f=b[1],d=b[2],k=b[3],m=b[4];b=b[5];var g=e[0];e=e[1];a[0]=c;a[1]=f;a[2]=d;a[3]=k;a[4]=c*g+d*e+m;a[5]=f*g+k*e+b;return a};a.fromRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=
-c;a[3]=b;a[4]=0;a[5]=0;return a};a.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];a[4]=0;a[5]=0;return a};a.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=b[0];a[5]=b[1];return a};a.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};a.add=function(a,b,e){a[0]=b[0]+e[0];a[1]=b[1]+e[1];a[2]=
b[2]+e[2];a[3]=b[3]+e[3];a[4]=b[4]+e[4];a[5]=b[5]+e[5];return a};a.subtract=function(a,b,e){a[0]=b[0]-e[0];a[1]=b[1]-e[1];a[2]=b[2]-e[2];a[3]=b[3]-e[3];a[4]=b[4]-e[4];a[5]=b[5]-e[5];return a};a.sub=a.subtract;a.multiplyScalar=function(a,b,e){a[0]=b[0]*e;a[1]=b[1]*e;a[2]=b[2]*e;a[3]=b[3]*e;a[4]=b[4]*e;a[5]=b[5]*e;return a};a.multiplyScalarAndAdd=function(a,b,e,l){a[0]=b[0]+e[0]*l;a[1]=b[1]+e[1]*l;a[2]=b[2]+e[2]*l;a[3]=b[3]+e[3]*l;a[4]=b[4]+e[4]*l;a[5]=b[5]+e[5]*l;return a};a.exactEquals=function(a,
b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]};a.equals=function(a,c){var e=a[0],f=a[1],h=a[2],d=a[3],k=a[4];a=a[5];var m=c[0],g=c[1],t=c[2],v=c[3],w=c[4];c=c[5];return Math.abs(e-m)<=b.EPSILON*Math.max(1,Math.abs(e),Math.abs(m))&&Math.abs(f-g)<=b.EPSILON*Math.max(1,Math.abs(f),Math.abs(g))&&Math.abs(h-t)<=b.EPSILON*Math.max(1,Math.abs(h),Math.abs(t))&&Math.abs(d-v)<=b.EPSILON*Math.max(1,Math.abs(d),Math.abs(v))&&Math.abs(k-w)<=b.EPSILON*Math.max(1,Math.abs(k),
Math.abs(w))&&Math.abs(a-c)<=b.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))};return a})},"esri/core/libs/gl-matrix/common":function(){define([],function(){var b={EPSILON:1E-6};b.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;b.RANDOM=Math.random;b.ENABLE_SIMD=!1;b.SIMD_AVAILABLE=b.ARRAY_TYPE===Float32Array&&"SIMD"in this;b.USE_SIMD=b.ENABLE_SIMD&&b.SIMD_AVAILABLE;b.setMatrixArrayType=function(a){b.ARRAY_TYPE=a};var a=Math.PI/180;b.toRadian=function(b){return b*a};b.equals=function(a,
c){return Math.abs(a-c)<=b.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))};return b})},"esri/core/libs/gl-matrix/vec2":function(){define(["./common"],function(b){var a={create:function(){var a=new b.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a},clone:function(a){var c=new b.ARRAY_TYPE(2);c[0]=a[0];c[1]=a[1];return c},fromValues:function(a,c){var e=new b.ARRAY_TYPE(2);e[0]=a;e[1]=c;return e},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,e){a[0]=b;a[1]=e;return a},add:function(a,b,e){a[0]=
b[0]+e[0];a[1]=b[1]+e[1];return a},subtract:function(a,b,e){a[0]=b[0]-e[0];a[1]=b[1]-e[1];return a}};a.sub=a.subtract;a.multiply=function(a,b,e){a[0]=b[0]*e[0];a[1]=b[1]*e[1];return a};a.mul=a.multiply;a.divide=function(a,b,e){a[0]=b[0]/e[0];a[1]=b[1]/e[1];return a};a.div=a.divide;a.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};a.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a};a.min=function(a,b,e){a[0]=Math.min(b[0],e[0]);a[1]=Math.min(b[1],e[1]);
return a};a.max=function(a,b,e){a[0]=Math.max(b[0],e[0]);a[1]=Math.max(b[1],e[1]);return a};a.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};a.scale=function(a,b,e){a[0]=b[0]*e;a[1]=b[1]*e;return a};a.scaleAndAdd=function(a,b,e,l){a[0]=b[0]+e[0]*l;a[1]=b[1]+e[1]*l;return a};a.distance=function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)};a.dist=a.distance;a.squaredDistance=function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a};a.sqrDist=a.squaredDistance;
a.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};a.len=a.length;a.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};a.sqrLen=a.squaredLength;a.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};a.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};a.normalize=function(a,b){var c=b[0],f=b[1],c=c*c+f*f;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};a.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};a.cross=function(a,b,e){b=b[0]*e[1]-b[1]*e[0];a[0]=a[1]=0;a[2]=
b;return a};a.lerp=function(a,b,e,l){var c=b[0];b=b[1];a[0]=c+l*(e[0]-c);a[1]=b+l*(e[1]-b);return a};a.random=function(a,c){c=c||1;var e=2*b.RANDOM()*Math.PI;a[0]=Math.cos(e)*c;a[1]=Math.sin(e)*c;return a};a.transformMat2=function(a,b,e){var c=b[0];b=b[1];a[0]=e[0]*c+e[2]*b;a[1]=e[1]*c+e[3]*b;return a};a.transformMat2d=function(a,b,e){var c=b[0];b=b[1];a[0]=e[0]*c+e[2]*b+e[4];a[1]=e[1]*c+e[3]*b+e[5];return a};a.transformMat3=function(a,b,e){var c=b[0];b=b[1];a[0]=e[0]*c+e[3]*b+e[6];a[1]=e[1]*c+e[4]*
b+e[7];return a};a.transformMat4=function(a,b,e){var c=b[0];b=b[1];a[0]=e[0]*c+e[4]*b+e[12];a[1]=e[1]*c+e[5]*b+e[13];return a};a.forEach=function(){var b=a.create();return function(a,e,f,h,d,k){e||(e=2);f||(f=0);for(h=h?Math.min(h*e+f,a.length):a.length;f<h;f+=e)b[0]=a[f],b[1]=a[f+1],d(b,b,k),a[f]=b[0],a[f+1]=b[1];return a}}();a.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};a.equals=function(a,c){var e=a[0];a=a[1];var f=c[0];c=c[1];
return Math.abs(e-f)<=b.EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(a-c)<=b.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))};return a})},"esri/views/2d/engine/webgl/mesh/templates/WGLTextTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../color ../../definitions ../../enums ../../Geometry ../../number ../../TextShaping ../../WGLDisplayRecord ./WGLMeshTemplate".split(" "),function(b,
a,f,c,e,l,h,d,k,m,g,t,v){Object.defineProperty(a,"__esModule",{value:!0});var w=c.getLogger("esri.views.2d.engine.webgl.WGLTextTemplate"),y=function(){function a(a,b,c,d,e,f,g,h,k){this.materialId=a;this.vertexOffsetUpperLeft=b;this.vertexOffsetUpperRight=c;this.vertexOffsetLowerLeft=d;this.vertexOffsetLowerRight=e;this.texFontSizeUpperLeft=f;this.texFontSizeUpperRight=g;this.texFontSizeLowerLeft=h;this.texFontSizeLowerRight=k}a.from=function(b,c,d,e,f){var g=b.glyphMosaicItem,h=g.rect,l=g.metrics,
n=Math.round(h.x/4),p=Math.round(h.y/4),g=n+Math.round(h.width/4),r=p+Math.round(h.height/4);b=new k.Point(b.x+0+l.left-4,b.y+-17-l.top-4);var h=new k.Point(b.x+h.width,b.y+h.height),l=new k.Point(b.x,h.y),t=new k.Point(h.x,b.y);if(d){var v=Math.cos(d);d=Math.sin(d);b.rotate(v,d);h.rotate(v,d);l.rotate(v,d);t.rotate(v,d)}d=m.i1616to32(32*b.x,32*b.y);b=m.i1616to32(32*t.x,32*t.y);l=m.i1616to32(32*l.x,32*l.y);h=m.i1616to32(32*h.x,32*h.y);t=m.i8888to32(n,p,e,f);p=m.i8888to32(g,p,e,f);n=m.i8888to32(n,
r,e,f);e=m.i8888to32(g,r,e,f);return new a(c,d,b,l,h,t,p,n,e)};return a}();b=function(a){function b(b,c,e,f,g,h,k,l,m,r,t,v,w,y,z,Y,V){var n=a.call(this)||this;n.color=e;n.textSize=f;n.xOffset=g;n.yOffset=h;n.haloColor=k;n.haloSize=l;n.shapingXOffset=m;n.shapingYOffset=r;n.textPropColor=t;n.textPropSize=v;n.textPropAngle=w;n.textPropHAnchor=y;n.textPropVAnchor=z;n.textPropHaloColor=Y;n.textPropHaloSize=V;n.geometryType=d.WGLGeometryType.TEXT;n._materialStore=b;n.vvFlags=c;return n}f(b,a);b.fromText=
function(a,c,d,f,g){var k=d.haloColor;g=(d.color&&l.premultiplyAlphaRGBA(d.color))|0;var m=d.font.size,n=d.xoffset/d.font.size*24,p=d.yoffset/d.font.size*24,k=(k&&l.premultiplyAlphaRGBA(k))|0,r=10*e.pt2px(e.toPt(d.haloSize||0)),t=g||h.PICTURE_FILL_COLOR,v=e.pt2px(d.font.size),w=d.angle*Math.PI/180,x=e.pt2px(d.xoffset),y=e.pt2px(d.yoffset),z="left"===d.horizontalAlignment?0:"right"===d.horizontalAlignment?1:.5,A="top"===d.verticalAlignment?0:"bottom"===d.verticalAlignment?1:.5,B=k||4294967295,T=e.pt2px(e.toPt(d.haloSize||
0));a=new b(a,c,g,m,x,y,k,r,n,p,t,v,w,z,A,B,T);a.computeGlyphs(f,d.text,!1,!1);return a};b.prototype.writeMesh=function(a,b,c,d,e,f,g){f=b.indexVector;var h=b.get("geometry");b=b.get("visibility");var k=this._getOffset(h);switch(c){case "esriGeometryPoint":e=e.geometry;c=e.x;e=e.y;this._writeVertices(a,f,h,b,k,d,c,e,g);break;case "esriGeometryPolygon":if(e.centroid){e=e.centroid;c=e.x;e=e.y;this._writeVertices(a,f,h,b,k,d,c,e,g);break}default:w.error("Unable to handle geometryType: "+c)}};b.prototype.computeGlyphs=
function(a,b,c,e){if(!b||!b.length)return this._computedGlyphs=[],null;b=(new g([a],240,24,0,[this.shapingXOffset,this.shapingYOffset],this.textPropHAnchor,this.textPropVAnchor,.5)).getShaping(b,c);c=Array(b.length);for(var f=0;f<b.length;f++){var h=this.textPropAngle,k=this.textSize,l=this.haloSize,m=this._materialStore.createGlyphMaterial(b[f].glyphMosaicItem,d.WGLGeometryType.TEXT,this.vvFlags);c[f]=y.from(b[f],m,h,k,l)}this._computedGlyphs=c;return e?g.getBox(b,[a]):null};b.prototype._getOffset=
function(a){return a.length/(this.vvFlags?9:5)};b.prototype._writeVertices=function(a,b,c,d,e,f,g,h,k){var l=this._computedGlyphs;g+=this.xOffset;var n=h+this.yOffset;h=m.i1616to32(2*g,2*n);g=m.i1616to32(2*g+1,2*n);n=0;if(this.haloSize)for(var p=0;p<l.length;p++,n+=4){var r=l[p].materialId,v=this._materialStore.get(r),r=new t(f,this.geometryType,r);r.vertexFrom=e;r.indexFrom=b.length;this._writeVertex(r,c,d,f,g,this.haloColor,l[p],v,k);this._writeIndices(r,b,e+n);a.push(r)}for(p=0;p<l.length;p++,
n+=4)r=l[p].materialId,v=this._materialStore.get(r),r=new t(f,this.geometryType,r),r.vertexFrom=e,r.indexFrom=b.length,this._writeVertex(r,c,d,f,h,this.color,l[p],v,k),this._writeIndices(r,b,e+n),a.push(r)};b.prototype._writeVertex=function(a,b,c,d,e,f,g,h,k){b.push(e);b.push(d);b.push(f);b.push(g.vertexOffsetUpperLeft);b.push(g.texFontSizeUpperLeft);this._writeVV(b,k,h);b.push(e);b.push(d);b.push(f);b.push(g.vertexOffsetUpperRight);b.push(g.texFontSizeUpperRight);this._writeVV(b,k,h);b.push(e);b.push(d);
b.push(f);b.push(g.vertexOffsetLowerLeft);b.push(g.texFontSizeLowerLeft);this._writeVV(b,k,h);b.push(e);b.push(d);b.push(f);b.push(g.vertexOffsetLowerRight);b.push(g.texFontSizeLowerRight);this._writeVV(b,k,h);c.push(4294967295);a.vertexCount+=4};b.prototype._writeVV=function(a,b,c){c.materialKeyInfo.hasVV()&&(a.push(b[d.VVType.SIZE]),a.push(b[d.VVType.COLOR]),a.push(b[d.VVType.OPACITY]),a.push(b[d.VVType.ROTATION]))};b.prototype._writeIndices=function(a,b,c){b.push(c+0);b.push(c+1);b.push(c+2);b.push(c+
1);b.push(c+3);b.push(c+2);a.indexCount+=6};return b}(v.default);a.default=b})},"esri/views/2d/engine/webgl/TextShaping":function(){define(["require","exports"],function(b,a){return function(){function a(a,b,f,h,d,k,m,g){this._glyphItems=a;this._maxWidth=b;this._lineHeight=f;this._letterSpacing=h;this._offset=d;this._hAnchor=k;this._vAnchor=m;this._justify=g}a.prototype.getShaping=function(a,b){for(var c=this._letterSpacing,e=this._lineHeight,d=this._justify,f=this._maxWidth,m=[],g=0,t=0,v=0,w=0,
y=-1,r=0,z=-1,x=a.length,p=0;p<x;p++){var n=a.charCodeAt(p);if(10===n){if(p!==x-1){if(y>=w){var g=m[y],A=g.x+g.glyphMosaicItem.metrics.advance,r=Math.max(A,r);d&&this._applyJustification(m,w,y);w=m.length}t=b?t-e:t+e;g=0;++v}}else{for(var A=void 0,B=0,C=this._glyphItems;B<C.length&&!(A=C[B][n]);B++);if(A){m.push({codePoint:n,x:g,y:t,glyphMosaicItem:A});g+=A.metrics.advance+c;if(0<f&&g>f&&0<=z){B=z+1;A=m[B].x;r=Math.max(A,r);for(C=B;C<m.length;C++)m[C].y=b?m[C].y-e:m[C].y+e,m[C].x-=A;d&&this._applyJustification(m,
w,z);t=b?t-e:t+e;g-=A;++v;w=B;z=-1}++y;32===n&&(z=m.length-1)}}}y>=w&&(g=m[y],r=Math.max(r,g.x+g.glyphMosaicItem.metrics.advance),d&&this._applyJustification(m,w,y));if(0<m.length)for(a=(d-this._hAnchor)*r,c=(-this._vAnchor*(v+1)+.5)*e,b&&v&&(c+=v*e),a+=this._offset[0],c+=this._offset[1],b=0;b<m.length;b++)e=m[b],e.x+=a,e.y+=c;return m};a.getBox=function(a,b){var c=a.length;if(0!==c){for(var e=a[0].x,d=e,f=a[0].y,m=f,g=f,t=1;t<c;t++){var v=a[t],w=v.x;w<e&&(e=w);w>d&&(d=w);v=v.y;v<f&&(f=v);v>m&&(m=
v);v!==g&&(g=this._glyphWidth(a[t-1].codePoint,b),d=Math.max(d,a[t-1].x+g),g=v)}b=this._glyphWidth(a[c-1].codePoint,b);d=Math.max(d,a[c-1].x+b);f+=17;return{x:e,y:f,width:d-e,height:m+7-f}}};a.prototype._applyJustification=function(a,b,f){for(var c=a[f],c=(c.x+c.glyphMosaicItem.metrics.advance)*this._justify;b<=f;b++)a[b].x-=c};a._glyphWidth=function(a,b){for(var c,e=0;e<b.length&&!(c=b[e][a]);e++);return c?c.metrics.advance:0};return a}()})},"esri/views/2d/engine/webgl/util/vvFlagUtils":function(){define(["require",
"exports","../enums","../visualVariablesUtils"],function(b,a,f,c){function e(a,b){void 0===b&&(b=!1);var c=f.WGLVVFlag.SIZE_FIELD_STOPS|f.WGLVVFlag.SIZE_MINMAX_VALUE|f.WGLVVFlag.SIZE_SCALE_STOPS|f.WGLVVFlag.SIZE_UNIT_VALUE;a=(a&(f.WGLVVTarget.FIELD_TARGETS_OUTLINE|f.WGLVVTarget.MINMAX_TARGETS_OUTLINE|f.WGLVVTarget.SCALE_TARGETS_OUTLINE|f.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return b?c&a:c&~a}function l(a){var b=e(a,!1);return a&(f.WGLVVFlag.COLOR|f.WGLVVFlag.OPACITY|f.WGLVVFlag.ROTATION|b)}Object.defineProperty(a,
"__esModule",{value:!0});a.getVVFlags=function(a){if(!a)return f.WGLVVFlag.NONE;for(var b=0,e=0;e<a.length;e++){var h=a[e];if("size"===h.type){var g=c.getTypeOfSizeVisualVariable(h),b=b|g;"outline"===h.target&&(b|=g<<4)}else"color"===h.type?b|=f.WGLVVFlag.COLOR:"opacity"===h.type?b|=f.WGLVVFlag.OPACITY:"rotation"===h.type&&(b|=f.WGLVVFlag.ROTATION)}return b};a.getSizeFlagsMask=e;a.getMarkerVVFlags=l;a.getFillVVFlags=function(a){return a&(f.WGLVVFlag.COLOR|f.WGLVVFlag.OPACITY)};a.getLineVVFlags=function(a,
b){if(b)return b=e(a,!0),a&b;b=e(a,!1);return a&(f.WGLVVFlag.COLOR|f.WGLVVFlag.OPACITY|b)};a.getTextVVFlags=function(a){return l(a)}})},"esri/views/2d/engine/webgl/util/Matcher":function(){define(["require","exports","../../../../../core/tsSupport/extendsHelper","../../../../../core/Logger","../Utils"],function(b,a,f,c,e){Object.defineProperty(a,"__esModule",{value:!0});var l=c.getLogger("esri/views/2d/engine/webgl/util/Matcher");b=function(){function a(){this._defaultResult=null}a.prototype.size=
function(){return 1};a.prototype.getDefault=function(){return this._defaultResult};a.prototype.setDefault=function(a){this._defaultResult=a};a.prototype.match=function(a,b){return this.getDefault()};return a}();a.default=b;c=function(a){function b(b,c,d,f){var g=a.call(this)||this;g._intervals=[];g._isMaxInclusive=c;d?g._getValue=e.createArcadeFunction(d):b&&b.length?"function"===typeof b?(g._field=null,g._getValue=b):(g._field=b,g._normalizationInfo=f,g._getValue=g._getValueFromField.bind(g)):g._field=
null;return g}f(b,a);b.prototype.add=function(a,b){this._intervals.push({interval:a,result:b});this._intervals.sort(function(a,b){return a.interval.min-b.interval.min})};b.prototype.size=function(){return a.prototype.size.call(this)+this._intervals.length};b.prototype.match=function(a,b){if(!this._getValue)return this.getDefault();a=this._getValue(a,b);if(!a&&(null===a||void 0===a||isNaN(a)))return this.getDefault();for(b=0;b<this._intervals.length;b++){var c=this._intervals[b],d=c.interval,c=c.result,
e=this._isMaxInclusive?a<=d.max:a<d.max;if(a>=d.min&&e)return c}return this.getDefault()};b.prototype._needsNormalization=function(){var a=this._normalizationInfo;return a&&(a.normalizationField||a.normalizationTotal||a.normalizationType)};b.prototype._getValueFromField=function(a){var b=a.attributes[this._field];if(!this._needsNormalization())return b;var c=this._normalizationInfo,d=c.normalizationField,e=c.normalizationTotal,c=c.normalizationType;a=!!d&&a.attributes[d];if(c)switch(c){case "field":return(a||
void 0)&&b/a;case "log":return Math.log(b)*Math.LOG10E;case "percent-of-total":return b/e*100;default:l.error("Found unknown normalization type: "+c)}else l.error("Normalization is required, but no type was set!")};return b}(b);a.IntervalMatcher=c;b=function(a){function b(b,c,d){var f=a.call(this)||this;f._resultsMap=new Map;d?f._getValue=e.createArcadeFunction(d):b&&b.length?"function"===typeof b[0]?(f._fields=null,f._getValue=b[0]):(f._fields=b,f._seperator=c||"",f._getValue=f._getValueFromFields.bind(f)):
f._fields=null;return f}f(b,a);b.prototype.add=function(a,b){this._resultsMap.set(a.toString(),b)};b.prototype.size=function(){return a.prototype.size.call(this)+this._resultsMap.size};b.prototype.match=function(a,b){if(!this._getValue)return this.getDefault();a=this._getValue(a,b);if(!a&&(null===a||void 0===a))return this.getDefault();a=a.toString();return this._resultsMap.has(a)?this._resultsMap.get(a):this.getDefault()};b.prototype._getValueFromFields=function(a){for(var b=[],c=0,d=this._fields;c<
d.length;c++)b.push(a.attributes[d[c]]);return b.join(this._seperator)};return b}(b);a.MapMatcher=b})},"esri/views/2d/layers/features/processors/BaseProcessor":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Accessor ../../../../../core/HandleOwner ../../../../../core/accessorSupport/decorators ../../../support/Evented".split(" "),function(b,a,f,c,e,l,h,d){Object.defineProperty(a,"__esModule",{value:!0});
b=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}f(b,a);b.prototype.initialize=function(){this.handles.add([this.tileStore.on("add",this.onTileAdded.bind(this)),this.tileStore.on("remove",this.onTileRemoved.bind(this))])};b.prototype.destroy=function(){};Object.defineProperty(b.prototype,"spatialReference",{get:function(){var a=this.get("tileStore.spatialReference");return a&&a.toJSON()||null},enumerable:!0,configurable:!0});c([h.property({constructOnly:!0})],b.prototype,
"remoteClient",void 0);c([h.property({constructOnly:!0})],b.prototype,"service",void 0);c([h.property({dependsOn:["tileStore.spatialReference"]})],b.prototype,"spatialReference",null);c([h.property({constructOnly:!0})],b.prototype,"tileStore",void 0);return b=c([h.subclass()],b)}(h.declared(e,l,d.default));a.default=b})},"*noref":1}});
define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/promiseUtils ../../../../core/accessorSupport/decorators ../../../../layers/support/TileInfo ./controllers ./processors ./TileStore".split(" "),function(b,a,f,c,e,l,h,d,k,m,g){Object.defineProperty(a,"__esModule",{value:!0});b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.controller=null;b.processor=null;b.remoteClient=
null;b.serviceAndViewInfo=null;b.tileStore=null;return b}f(b,a);b.prototype.initialize=function(){var a=this;this.watch("updating",function(b){a.remoteClient.invoke("setUpdating",b)})};b.prototype.destroy=function(){this.controller&&this.controller.destroy();this.processor&&this.processor.destroy()};Object.defineProperty(b.prototype,"updating",{get:function(){var a=this.controller,b=this.processor;return!a||!b||a.updating||b.updating||!1},enumerable:!0,configurable:!0});b.prototype.startup=function(a){var b=
d.fromJSON(a.tileInfo);this.serviceAndViewInfo=a;this.tileStore=new g.default(b)};b.prototype.configure=function(a){var b=this,c=this.controller,d=this.processor,e=a.controller,f=a.processor;a=[null,null];e&&(a[0]=k.createController(e.type,{remoteClient:this.remoteClient,tileStore:this.tileStore,serviceAndViewInfo:this.serviceAndViewInfo}));f&&(a[1]=m.createProcessor(f.type,{remoteClient:this.remoteClient,tileStore:this.tileStore,serviceAndViewInfo:this.serviceAndViewInfo}));return l.all(a).then(function(a){var g=
a[0];a=a[1];g&&(c&&c.destroy(),b.controller=c=g,c.configuration=e,a||(b.controller.processor=b.processor));a&&(d&&d.destroy(),b.processor=d=a,d.configuration=f,c.processor=d)})};b.prototype.registerTile=function(a){this.tileStore.add(a)};b.prototype.unregisterTile=function(a){this.tileStore.delete(a)};c([h.property({dependsOn:["controller.updating","processor.updating"]})],b.prototype,"updating",null);c([h.property()],b.prototype,"controller",void 0);c([h.property()],b.prototype,"processor",void 0);
return b=c([h.subclass()],b)}(h.declared(e));a.default=b});