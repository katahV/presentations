// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/assignHelper ./enums ./enums ./MaterialInfoUtils ./mesh ./textMeshUtils ./Utils ./visualVariablesUtils ./WGLDisplayObject ./WGLDisplayRecord".split(" "),function(E,r,F,k,g,z,A,B,f,v,C,D){function w(f,l){if(!f)return k.WGLVVFlag.NONE;for(var m=0,g=0;g<f.length;g++){var n=f[g];"size"===n.type&&"outline"!==n.target?m|=v.getTypeOfSizeVisualVariable(n):"color"===n.type?m|=k.WGLVVFlag.COLOR:"opacity"===n.type?m|=k.WGLVVFlag.OPACITY:l&&"rotation"===n.type&&
(m|=k.WGLVVFlag.ROTATION)}return m}Object.defineProperty(r,"__esModule",{value:!0});var l=[];r.getDisplayObject=function(u,q,m,x,n,r,p){q=u.attributes[q];var y=new C(q);l.length=0;var a=m.renderer,e=m.getSymbol(u);if(e){var b=f.isMarkerSymbol(e)||f.isTextSymbol(e);if("esriGeometryPoint"===x||"esriGeometryPolyline"===x)l.push({symbol:e,vv:w(a.visualVariables,b)});else if(b){if(a.backgroundFillSymbol){var b=a.backgroundFillSymbol,d=k.WGLVVFlag.NONE;if(a.visualVariables)for(var h=0,t=a.visualVariables;h<
t.length;h++){var c=t[h],c=c.type;"color"===c?d|=k.WGLVVFlag.COLOR:"opacity"===c&&(d|=k.WGLVVFlag.OPACITY)}l.push({symbol:b,vv:d,isBFS:!0});if(b.outline&&"none"!==b.outline.style){d=k.WGLVVFlag.NONE;if(a.visualVariables)for(h=0,t=a.visualVariables;h<t.length;h++)if(c=t[h],"size"===c.type&&"outline"===c.target){d|=v.getTypeOfSizeVisualVariable(c);break}l.push({symbol:b.outline,vv:d})}}l.push({symbol:e,vv:w(a.visualVariables,!0)})}else if(f.isFillSymbol(e)){c=k.WGLVVFlag.NONE;if(a.visualVariables)for(d=
0,h=a.visualVariables;d<h.length;d++)b=h[d],b=b.type,"color"===b?c|=k.WGLVVFlag.COLOR:"opacity"===b&&(c|=k.WGLVVFlag.OPACITY);l.push({symbol:e,vv:c});if(e.outline&&"none"!==e.outline.style){c=k.WGLVVFlag.NONE;if(a.visualVariables)for(d=0,a=a.visualVariables;d<a.length;d++)if(b=a[d],"size"===b.type&&"outline"===b.target){c|=v.getTypeOfSizeVisualVariable(b);break}l.push({symbol:e.outline,vv:c})}}else f.isLineSymbol(e)&&l.push({symbol:e,vv:w(a.visualVariables,b)})}for(e=0;e<l.length;e++){a=l[e];b=a.symbol;
c=f.getSymbolGeometryType(b);d=0!==a.vv;switch(c){case g.WGLGeometryType.MARKER:p.icon||(p.icon=f.getStrides(g.WGLGeometryType.MARKER,d,!1));break;case g.WGLGeometryType.LINE:p.line||(p.line=f.getStrides(g.WGLGeometryType.LINE,d));break;case g.WGLGeometryType.FILL:p.fill||(p.fill=f.getStrides(g.WGLGeometryType.FILL,d));break;case g.WGLGeometryType.TEXT:p.text||(p.text=f.getStrides(g.WGLGeometryType.TEXT,d))}if(c===g.WGLGeometryType.TEXT)for(c=0,a=B.createTextDisplayRecords(u,a,q,m,r,f.getTextProperties(b));c<
a.length;c++)y.displayRecords.push(a[c]);else if(h=r.get(b),d=z.createMaterialInfo(h,c,a.vv),d.materialKeyInfo.hasVV(),a=A.createMesh(q,m,d.materialKeyInfo,h,c,x,n,u,b,a.isBFS))b=new D(q,c,d),b.meshData=a,y.displayRecords.push(b)}return y}});