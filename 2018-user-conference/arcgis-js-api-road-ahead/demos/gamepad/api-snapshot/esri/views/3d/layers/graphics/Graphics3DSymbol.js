// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/extendsHelper ./Graphics3DGraphic ./Graphics3DSymbolLayerFactory ../../support/PromiseLightweight".split(" "),function(u,v,p,q,r,t){return function(l){function g(a,f,c){var b=l.call(this)||this;b.symbol=a;a=a.symbolLayers;c&&(a=c.concat(a));c=a.length;b.childGraphics3DSymbols=Array(a.length);b.childGraphics3DSymbolPromises=Array(a.length);for(var e=f.layerOrder,d=0,g=0,m=!1,n=function(a,b){b&&(this.childGraphics3DSymbols[a]=b,g++);d--;!this.isRejected()&&
m&&1>d&&(0<g?this.resolve():this.reject())},h=0;h<c;h++){var k=a.getItemAt(h);!1!==k.enabled&&(f.layerOrder=e+(1-(1+h)/c),f.layerOrderDelta=1/c,k=r.make(b.symbol,k,f,k._ignoreDrivers))&&(d++,b.childGraphics3DSymbolPromises[h]=k,k.then(n.bind(b,h,k),n.bind(b,h,null)))}f.layerOrder=e;m=!0;!b.isRejected()&&1>d&&b.resolve();return b}p(g,l);g.prototype.createGraphics3DGraphic=function(a,f){for(var c=a.graphic,b=Array(this.childGraphics3DSymbols.length),e=0;e<this.childGraphics3DSymbols.length;e++){var d=
this.childGraphics3DSymbols[e];d&&(b[e]=d.createGraphics3DGraphic(a))}return new q(c,f||this,b,a.layer)};g.prototype.layerPropertyChanged=function(a,f){for(var c=this.childGraphics3DSymbols.length,b=function(b){var c=e.childGraphics3DSymbols[b],d=function(a){return a._graphics[b]};if(c&&!c.layerPropertyChanged(a,f,d))return{value:!1}},e=this,d=0;d<c;d++){var g=b(d);if("object"===typeof g)return g.value}return!0};g.prototype.applyRendererDiff=function(a,f,c){return this.isResolved()?this.childGraphics3DSymbols.reduce(function(b,
e,d){return b&&(!e||e.applyRendererDiff(a,f,c,d))},!0):!1};g.prototype.getFastUpdateStatus=function(){var a=0,f=0,c=0;this.childGraphics3DSymbolPromises.forEach(function(b){b&&!b.isFulfilled()?a++:b&&b.isFastUpdatesEnabled()?c++:b&&f++});return{loading:a,slow:f,fast:c}};g.prototype.setDrawOrder=function(a,f){for(var c=this.childGraphics3DSymbols.length,b=1/c,e=0;e<c;e++){var d=this.childGraphics3DSymbols[e];d&&d.setDrawOrder(a+(1-(1+e)/c),b,f)}};g.prototype.destroy=function(){this.isFulfilled()||
this.reject();for(var a=0;a<this.childGraphics3DSymbolPromises.length;a++)this.childGraphics3DSymbolPromises[a]&&this.childGraphics3DSymbolPromises[a].destroy()};return g}(t.Promise)});