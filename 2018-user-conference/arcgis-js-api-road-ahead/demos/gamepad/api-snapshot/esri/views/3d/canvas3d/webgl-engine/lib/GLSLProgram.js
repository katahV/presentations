// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define(["./gl-matrix"],function(h){function w(f,d){var h=B++,e,k,l,x=function(){if(void 0===e){e=d.createProgram();for(var b=0;b<f.length;++b)d.attachShader(e,f[b].getGLName());z()}},z=function(){void 0!==e&&(d.linkProgram(e),d.getProgramParameter(e,d.LINK_STATUS)||console.error("Could not initialize shader\nVALIDATE_STATUS: "+d.getProgramParameter(e,d.VALIDATE_STATUS)+", gl error ["+d.getError()+"]infoLog: "+d.getProgramInfoLog(e)),k={},l={})};this.clearLookupTables=function(){k={};l={};m={};n={};
p={};q={};y={}};this.dispose=function(){for(var b=0;b<f.length;++b){var a=f[b].getGLName();d.isShader(a)&&d.deleteShader(a)}d.isProgram(e)&&d.deleteProgram(e);r===this&&w.unuse(d)};this.getId=function(){return h};this.getShader=function(b){return f["vertex"===b?0:1]};this.changeShaderDefines=function(b,a){f[b].changeDefines(a)&&z()};this.use=function(){r!==this&&(x(),d.useProgram(e),r=this)};this.getLocation=function(b){x();void 0===k[b]&&(k[b]=d.getUniformLocation(e,b));return k[b]};this.hasUniform=
function(b){return null!==this.getLocation(b)};this.getAttribLocation=function(b){x();void 0===l[b]&&(l[b]=d.getAttribLocation(e,b));return l[b]};var m={};this.uniform1i=function(b,a){var c=m[b];if(void 0===c||a!==c)this.use(),d.uniform1i(this.getLocation(b,d),a),m[b]=a};this.uniform1f=function(b,a){var c=m[b];if(void 0===c||a!==c)this.use(),d.uniform1f(this.getLocation(b,d),a),m[b]=a};var n={};this.uniform2f=function(b,a,c){var e=n[b];if(void 0===e||a!==e[0]||c!==e[1])this.use(),d.uniform2f(this.getLocation(b,
d),a,c),void 0===e?n[b]=t.createFrom(a,c):t.set2(a,c,e)};this.uniform2fv=function(b,a){var c=n[b];if(2<a.length||void 0===c||a[0]!==c[0]||a[1]!==c[1])this.use(),d.uniform2fv(this.getLocation(b,d),a),void 0===c?n[b]=t.create(a):t.set(a,c)};var p={};this.uniform3f=function(b,a,c,e){var g=p[b];if(void 0===g||a!==g[0]||c!==g[1]||e!==g[2])this.use(),d.uniform3f(this.getLocation(b,d),a,c,e),void 0===g?p[b]=u.createFrom(a,c,e):u.set3(a,c,e,g)};this.uniform3fv=function(b,a){var c=p[b];if(3<a.length||void 0===
c||a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2])this.use(),d.uniform3fv(this.getLocation(b,d),a),void 0===c?p[b]=u.create(a):u.set(a,c)};var q={};this.uniform4f=function(b,a,c,e,g){var f=q[b];if(void 0===f||a!==f[0]||c!==f[1]||e!==f[2]||g!==f[3])this.use(),d.uniform4f(this.getLocation(b,d),a,c,e,g),void 0===f?q[b]=v.createFrom(a,c,e,g):v.set4(a,c,e,g,f)};this.uniform4fv=function(b,a){var c=q[b];if(4<a.length||void 0===c||a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3])this.use(),d.uniform4fv(this.getLocation(b,
d),a),void 0===c?q[b]=v.create(a):v.set(a,c)};var y={};this.uniformMatrix4fv=function(b,a){var c=y[b];if(16<a.length||void 0===c||c[0]!==a[0]||c[1]!==a[1]||c[2]!==a[2]||c[3]!==a[3]||c[4]!==a[4]||c[5]!==a[5]||c[6]!==a[6]||c[7]!==a[7]||c[8]!==a[8]||c[9]!==a[9]||c[10]!==a[10]||c[11]!==a[11]||c[12]!==a[12]||c[13]!==a[13]||c[14]!==a[14]||c[15]!==a[15])this.use(),d.uniformMatrix4fv(this.getLocation(b,d),!1,a),void 0===c?y[b]=A.create(a):A.set(a,c)};this.dispose=function(){if(void 0!==e){for(var b=0;b<f.length;++b){var a=
f[b].getGLName();d.detachShader(e,a);d.deleteShader(a)}d.deleteProgram(e)}}}var t=h.vec2d,u=h.vec3d,v=h.vec4d,A=h.mat4d,B=0,r;w.unuse=function(f){r=null;f.useProgram(null)};return w});