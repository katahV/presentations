// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/tsSupport/awaiterHelper":function(){define(["dojo/Deferred","dojo/when"],function(y,e){return function(m,h,l,p){function u(d){try{z(p.next(d))}catch(k){q.reject(k)}}function r(d){try{z(p["throw"](d))}catch(k){q.reject(k)}}function z(d){d.done?e(d.value).then(q.resolve,q.reject):e(d.value).then(u,r)}var q=new y;z((p=p.apply(m,h||[])).next());return q.promise}})},"esri/core/tsSupport/generatorHelper":function(){define([],function(){return function(y,e){function m(q){return function(d){return h([q,
d])}}function h(q){if(p)throw new TypeError("Generator is already executing.");for(;l;)try{if(p=1,u&&(r=u[q[0]&2?"return":q[0]?"throw":"next"])&&!(r=r.call(u,q[1])).done)return r;if(u=0,r)q=[0,r.value];switch(q[0]){case 0:case 1:r=q;break;case 4:return l.label++,{value:q[1],done:!1};case 5:l.label++;u=q[1];q=[0];continue;case 7:q=l.ops.pop();l.trys.pop();continue;default:if(!(r=l.trys,r=0<r.length&&r[r.length-1])&&(6===q[0]||2===q[0])){l=0;continue}if(3===q[0]&&(!r||q[1]>r[0]&&q[1]<r[3]))l.label=
q[1];else if(6===q[0]&&l.label<r[1])l.label=r[1],r=q;else if(r&&l.label<r[2])l.label=r[2],l.ops.push(q);else{r[2]&&l.ops.pop();l.trys.pop();continue}}q=e.call(y,l)}catch(d){q=[6,d],u=0}finally{p=r=0}if(q[0]&5)throw q[1];return{value:q[0]?q[1]:void 0,done:!0}}var l={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},p,u,r,z;return z={next:m(0),"throw":m(1),"return":m(2)},"function"===typeof Symbol&&(z[Symbol.iterator]=function(){return this}),z}})},"esri/views/3d/support/meshProcessing":function(){define(["require",
"exports","../webgl-engine/lib/Util"],function(y,e,m){Object.defineProperty(e,"__esModule",{value:!0});e.computeNeighbors=function(e,h){for(var l=e.length/3,m=new Uint32Array(h+1),p=new Uint32Array(h+1),q=function(a,b){a<b?m[a+1]++:p[b+1]++},d=0;d<l;d++){var k=e[3*d],f=e[3*d+1],v=e[3*d+2];q(k,f);q(f,v);q(v,k)}for(d=f=k=0;d<h;d++)v=m[d+1],q=p[d+1],m[d+1]=k,p[d+1]=f,k+=v,f+=q;for(var x=new Uint32Array(6*l),t=m[h],q=function(a,b,c){if(a<b){var g=m[a+1]++;x[2*g]=b;x[2*g+1]=c}else g=p[b+1]++,x[2*t+2*g]=
a,x[2*t+2*g+1]=c},d=0;d<l;d++)k=e[3*d],f=e[3*d+1],v=e[3*d+2],q(k,f,d),q(f,v,d),q(v,k,d);k=function(a,b){var c=2*a;a=b-a;for(b=1;b<a;b++){var g=x[c+2*b],n=x[c+2*b+1],d=b-1;for(d;0<=d&&x[c+2*d]>g;d--)x[c+2*d+2]=x[c+2*d],x[c+2*d+3]=x[c+2*d+1];x[c+2*d+2]=g;x[c+2*d+3]=n}};for(d=0;d<h;d++)k(m[d],m[d+1]),k(t+p[d],t+p[d+1]);for(var B=new Int32Array(3*l),A=function(a,b){return a===e[3*b]?0:a===e[3*b+1]?1:a===e[3*b+2]?2:-1},l=function(a,b){a=A(a,b);B[3*b+a]=-1},k=function(a,b,c,d){a=A(a,b);B[3*b+a]=d;c=A(c,
d);B[3*d+c]=b},d=0;d<h;d++){for(var f=m[d],v=m[d+1],q=p[d],a=p[d+1];f<v&&q<a;){var b=x[2*f],c=x[2*t+2*q];b===c?(k(d,x[2*f+1],c,x[2*t+2*q+1]),f++,q++):b<c?(l(d,x[2*f+1]),f++):(l(c,x[2*t+2*q+1]),q++)}for(;f<v;)l(d,x[2*f+1]),f++;for(;q<a;)c=x[2*t+2*q],l(c,x[2*t+2*q+1]),q++}return B};var h=null;e.deduplicate=function(e,p,u,r,z){void 0===u&&(u=0);void 0===r&&(r=0);void 0===z&&(z=e.byteLength/(4*p));e=new Uint32Array(e,r,z*p);r=new Uint32Array(z);var q=Math.floor(1.1*z)+1;if(null==h||h.length<2*q)h=new Uint32Array(m.nextHighestPowerOfTwo(2*
q));for(var d=0;d<2*q;d++)h[d]=0;for(var k=0,f=0!==u?Math.ceil(7.84*1.96/(u*u)*u*(1-u)):z,d=0;d<z;d++){if(d===f){var v=1-k/d;if(v+1.96*Math.sqrt(v*(1-v)/d)<u)return null;f*=2}for(var v=d*p,l,t=l=0;t<p;t++)l=e[v+t]+l|0,l=l+(l<<11)+(l>>>2)|0;l>>>=0;for(var t=l%q,B=k;0!==h[2*t+1];){if(h[2*t]===l){var A=h[2*t+1]-1,a=A*p;a:{for(var b=0;b<p;b++)if(e[v+b]!==e[a+b]){a=!1;break a}a=!0}if(a){B=r[A];break}}t++;t>=q&&(t-=q)}B===k&&(h[2*t]=l,h[2*t+1]=d+1,k++);r[d]=B}if(0!==u&&1-k/z<u)return null;u=new Uint32Array(p*
k);for(d=k=0;d<z;d++)if(r[d]===k){q=e;f=d*p;v=u;l=k*p;t=p;for(B=0;B<t;B++)v[l+B]=q[f+B];k++}return{buffer:u.buffer,indices:r,uniqueCount:k}}})},"esri/views/3d/webgl-engine/lib/Util":function(){define(["require","exports","../../support/geometryUtils","./gl-matrix"],function(y,e,m,h){function l(a,b){if(!a)throw a=Error("dummy"),a.stack&&console.log(a.stack),new X(b);}function p(a,b,c){return a<b?b:a>c?c:a}function u(a){return a/180*Math.PI}function r(a){return 180*a/Math.PI}function z(a,b,c){h.mat4d.multiply(b,
a,t);h.mat4d.inverse(t);for(a=0;8>a;++a)h.mat4d.multiplyVec4(t,B[a],A),h.vec3d.set3(A[0]/A[3],A[1]/A[3],A[2]/A[3],c[a])}function q(a,b){m.plane.fromPoints(a[4],a[0],a[3],b[0]);m.plane.fromPoints(a[1],a[5],a[6],b[1]);m.plane.fromPoints(a[4],a[5],a[1],b[2]);m.plane.fromPoints(a[3],a[2],a[6],b[3]);m.plane.fromPoints(a[0],a[1],a[2],b[4]);m.plane.fromPoints(a[5],a[4],a[7],b[5])}function d(a,b,c,g){var n=6378137/Math.sqrt(1-e.ECCENTRICITY_SQUARED*Math.pow(Math.sin(a),2)),d=Math.cos(a);g[0]=(n+c)*Math.cos(b)*
d;g[1]=(n*(1-e.ECCENTRICITY_SQUARED)+c)*Math.sin(a);g[2]=-(n+c)*Math.sin(b)*d}function k(a){for(var b in a)return b}function f(a,b){a[12]=b[0];a[13]=b[1];a[14]=b[2]}function v(a,b){void 0===b&&(b=0);for(var c=0,g=0;4>g;g++)c+=a[b+g]*Z[g];return c}function x(a){return a-Math.floor(a)}Object.defineProperty(e,"__esModule",{value:!0});var t=h.mat4d.create(),B=[h.vec4d.createFrom(-1,-1,-1,1),h.vec4d.createFrom(1,-1,-1,1),h.vec4d.createFrom(1,1,-1,1),h.vec4d.createFrom(-1,1,-1,1),h.vec4d.createFrom(-1,
-1,1,1),h.vec4d.createFrom(1,-1,1,1),h.vec4d.createFrom(1,1,1,1),h.vec4d.createFrom(-1,1,1,1)],A=h.vec4d.create(),a=[h.vec3d.create(),h.vec3d.create(),h.vec3d.create(),h.vec3d.create(),h.vec3d.create(),h.vec3d.create(),h.vec3d.create(),h.vec3d.create()],b=h.vec3d.create(),c=h.vec3d.create(),g=h.vec3d.create(),n=h.vec3d.create(),w=h.vec3d.create(),H=h.vec3d.create(),Q=h.vec3d.create(),M=h.vec3d.create(),P=h.vec3d.create(),O=h.vec3d.create(),N=h.vec3d.create(),R=h.vec3d.create(),V=h.vec3d.create(),
aa=h.vec3d.createFrom(0,0,0),X=function(){function a(a){this.message=a}a.prototype.toString=function(){return"AssertException: "+this.message};return a}();e.AssertException=X;e.EARTH_RADIUS=6378137;e.METER2FEET=3.28084;e.ECCENTRICITY_SQUARED=.0066943799901414;e.VertexAttrConstants={POSITION:"position",NORMAL:"normal",NORMALCOMPRESSED:"normalCompressed",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",REGION:"region",COMPONENTINDEX:"componentIndex"};
e.assert=l;e.verify=function(a,b){a||(console.log("Verify failed: "+b),console.log(Error("dummy").stack))};e.isPowerOfTwo=function(a){return 0===(a&a-1)};e.lerp=function(a,b,c){return a+(b-a)*c};e.clamp=p;e.encodeInt16=function(a){return p(Math.round(32767*a),-32767,32767)};e.encodeNormal=function(a,b){var c=Math.abs(a[0]),g=Math.abs(a[1]),n=1/(c+g+Math.abs(a[2])),c=c*n,g=g*n,n=Math.min(a[2]*n,0);b[0]=W(a[0])*(c-n);b[1]=W(a[1])*(g-n)};var W="function"===typeof Math.sign?Math.sign:function(a){return+(0<
a)-+(0>a)||0};e.fallbackIfUndefined=function(a,b){return void 0===a?b:a};e.hex2rgb=function(a){a=Math.floor(a);return[(a>>16&255)/255,(a>>8&255)/255,(a&255)/255]};e.rgb2hex=function(a){var b=p(Math.round(255*a[0]),0,255),c=p(Math.round(255*a[1]),0,255);a=p(Math.round(255*a[2]),0,255);return"0x"+((b<<16)+(c<<8)+a).toString(16)};e.dec2hex=function(a){a=a.toString(16);return"00000000".substr(0,8-a.length)+a};e.deg2rad=u;e.rad2deg=r;e.azimuthElevationAngle2Direction=function(a,b){a=1.5*Math.PI-a;b=.5*
Math.PI-b;return[Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b)]};e.raySphere=function(a,c,g,n,d){g=g||aa;var w=h.vec3d.subtract(a,g,b);g=h.vec3d.dot(c,c);var f=2*h.vec3d.dot(c,w);n=h.vec3d.dot(w,w)-n*n;n=f*f-4*g*n;if(0>n)return!1;w=Math.sqrt(n);n=(-f-w)/(2*g);g=(-f+w)/(2*g);if(0>n||g<n&&0<g)n=g;return 0<n?(d&&h.vec3d.add(a,h.vec3d.scale(c,n,V),d),!0):!1};e.rayTriangle3D=function(a,b,c,g,n,d,w,f,H){void 0===H&&(H=h.vec3d.create());var k=g[w]-c[d],e=g[w+1]-c[d+1],q=g[w+2]-c[d+2];g=n[f]-
c[d];w=n[f+1]-c[d+1];n=n[f+2]-c[d+2];var l=b[1]*n-w*b[2],m=b[2]*g-n*b[0],v=b[0]*w-g*b[1];f=k*l+e*m+q*v;if(-1E-5<f&&1E-5>f)return!1;f=1/f;var p=a[0]-c[d],L=a[1]-c[d+1];a=a[2]-c[d+2];H[1]=f*(p*l+L*m+a*v);if(0>H[1]||1<H[1])return!1;c=L*q-e*a;a=a*k-q*p;k=p*e-k*L;H[2]=f*(b[0]*c+b[1]*a+b[2]*k);if(0>H[2]||1<H[1]+H[2])return!1;H[0]=f*(g*c+w*a+n*k);return!0};e.rayBoxTest=function(a,b,c,g){var n,d=(c[0]-a[0])/b[0],w=(g[0]-a[0])/b[0];d>w&&(n=d,d=w,w=n);var f=(c[1]-a[1])/b[1],H=(g[1]-a[1])/b[1];f>H&&(n=f,f=H,
H=n);if(d>H||f>w)return!1;f>d&&(d=f);H<w&&(w=H);c=(c[2]-a[2])/b[2];a=(g[2]-a[2])/b[2];c>a&&(n=c,c=a,a=n);if(d>a||c>w)return!1;a<w&&(w=a);return 0>w?!1:!0};e.rayRay2D=function(a,b,c,g,n,d){void 0===d&&(d=h.vec2d.create());var w=(g[n]-c[n])*(b[0]-a[0])-(g[0]-c[0])*(b[n]-a[n]);if(0===w)return!1;c=((g[0]-c[0])*(a[n]-c[n])-(g[n]-c[n])*(a[0]-c[0]))/w;d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[n]+c*(b[n]-a[n]);return!0};e.matrixToFrustumPoints=z;e.matrixToFrustumPlanes=function(b,c,g,n){void 0===n&&(n=g,g=a);z(b,c,
g);q(g,n)};e.frustumPointsToPlanes=q;e.project=function(a,b,c,g,n){n||(n=a);A[0]=a[0];A[1]=a[1];A[2]=a[2];A[3]=1;h.mat4d.multiplyVec4(b,A);2<n.length&&(n[2]=-A[2]);h.mat4d.multiplyVec4(c,A);l(0!==A[3]);n[0]=A[0]/A[3];n[1]=A[1]/A[3];n[2]=A[2]/A[3];n[0]=(.5*n[0]+.5)*g[2]+g[0];n[1]=(.5*n[1]+.5)*g[3]+g[1]};e.geodeticToGeocentricLatidude=function(a){return Math.atan((1-e.ECCENTRICITY_SQUARED)*Math.tan(a))};e.latLon2positionWGS84Ellipsoid=d;e.pos2latLon=function(a,b){var c=h.vec3d.length(a);b[0]=Math.asin(p(a[1]/
c,-1,1));b[1]=(0>a[2]?1:-1)*Math.acos(p(a[0]/(Math.cos(b[0])*c),-1,1));b[0]=r(b[0]);b[1]=r(b[1]);b[2]=c};e.pos2latLonWGS84Ellipsoid=function(a,b){var c=a[0],g=-a[2],n=a[1],d=Math.sqrt(Math.pow(6378137,2)*(1-e.ECCENTRICITY_SQUARED));a=Math.sqrt(Math.pow(c,2)+Math.pow(g,2));var w=Math.atan2(6378137*n,d*a),c=Math.atan2(g,c),g=Math.atan2(n+Math.pow(Math.sqrt((Math.pow(6378137,2)-Math.pow(d,2))/Math.pow(d,2)),2)*d*Math.pow(Math.sin(w),3),a-6378137*e.ECCENTRICITY_SQUARED*Math.pow(Math.cos(w),3));a=a/Math.cos(g)-
6378137/Math.sqrt(1-e.ECCENTRICITY_SQUARED*Math.pow(Math.sin(g),2))+e.EARTH_RADIUS;b[0]=g;b[1]=c;b[2]=a};e.computeGlobeTransformation=function(a,b,g){var n=u(a[0]);a=u(a[1]);d(n,a,b,c);h.mat4d.translate(g,c);h.mat4d.rotateY(g,.5*Math.PI+a);h.mat4d.rotateX(g,.5*Math.PI-n);return g};e.readUInt16=function(a,b){return a[b]+(a[b+1]<<8)};e.readUInt32=function(a,b){return a[b]+(a[b+1]<<8)+(a[b+2]<<16)+(a[b+3]<<24)};e.setIfDefined=function(a,b,c){void 0!==b[a]&&(c[a]=b[a])};e.array2object=function(a,b){var c=
{};if(void 0!==b)for(var g=0;g<a.length;g++){var n=a[g];c[b(n)]=n}else for(b=0;b<a.length;b++)n=a[b],c[n]=n;return c};e.object2array=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};e.mergeObjects=function(a,b,c){void 0===c&&(c={});if(c!==a)for(var g in a)c[g]=a[g];if(c!==b)for(var n in b)c[n]=b[n];return c};e.subtractObjects=function(a,b){var c={},g;for(g in a)void 0===b[g]&&(c[g]=a[g]);return c};e.intersectObjects=function(a,b){var c={},g;for(g in a)void 0!==b[g]&&(c[g]=a[g]);return c};
e.getFirstObjectKey=k;e.getFirstObjectValue=function(a){return a[k(a)]};e.objectEmpty=function(a){for(var b in a)return!1;return!0};e.byteBuffer2base64image=function(a,b,c,g,n){var d=4*b;l(a.length===d*c,"buffer length must match image resolution");var w=document.createElement("canvas");w.width=b;w.height=c;var f=w.getContext("2d");b=f.getImageData(0,0,b,c);for(var H=b.data,k=0;k<c;++k)for(var e=k*d,q=(c-1-k)*d,h=0;h<d;++h)H[e++]=a[q++];f.putImageData(b,0,0);return w.toDataURL(g,n)};e.cround=function(a){return Math.round(100*
a)/100};e.logWithBase=function(a,b){return Math.log(a)/Math.log(b)};e.setMatrixTranslation=f;e.setMatrixTranslation3=function(a,b,c,g){a[12]=b;a[13]=c;a[14]=g};e.getMatrixTranslation=function(a,b){void 0===b&&(b=h.vec3d.create());b[0]=a[12];b[1]=a[13];b[2]=a[14];return b};e.createTranslationMatrix=function(a,b){a=h.mat4d.identity(a);f(a,b);return a};e.isTranslationMatrix=function(a){return 1===a[0]&&0===a[1]&&0===a[2]&&0===a[3]&&0===a[4]&&1===a[5]&&0===a[6]&&0===a[7]&&0===a[8]&&0===a[9]&&1===a[10]&&
0===a[11]&&1===a[15]};e.fovx2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/b)};e.fovy2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/c)};e.fovx2fovd=function(a,b,c){return 2*Math.atan(Math.sqrt(b*b+c*c)*Math.tan(.5*a)/b)};e.fovy2fovd=function(a,b,c){return 2*Math.atan(Math.sqrt(b*b+c*c)*Math.tan(.5*a)/c)};e.fovd2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/Math.sqrt(b*b+c*c))};e.fovd2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/Math.sqrt(b*b+c*c))};e.nextHighestPowerOfTwo=
function(a){--a;for(var b=1;32>b;b<<=1)a|=a>>b;return a+1};e.nextHighestPowerOfTen=function(a){return Math.pow(10,Math.ceil(Math.LOG10E*Math.log(a)))};e.lineLineDistanceSquared3D=function(a,b,c,d,f){g[0]=a[0]-c[0];g[1]=a[1]-c[1];g[2]=a[2]-c[2];n[0]=d[0]-c[0];n[1]=d[1]-c[1];n[2]=d[2]-c[2];if(1E-4>Math.abs(n[0])&&1E-4>Math.abs(n[1])&&1E-4>Math.abs(n[2]))return f.success=!1,f;w[0]=b[0]-a[0];w[1]=b[1]-a[1];w[2]=b[2]-a[2];if(1E-4>Math.abs(w[0])&&1E-4>Math.abs(w[1])&&1E-4>Math.abs(w[2]))return f.success=
!1,f;b=g[0]*n[0]+g[1]*n[1]+g[2]*n[2];d=n[0]*w[0]+n[1]*w[1]+n[2]*w[2];var k=g[0]*w[0]+g[1]*w[1]+g[2]*w[2],e=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],q=(w[0]*w[0]+w[1]*w[1]+w[2]*w[2])*e-d*d;if(1E-4>Math.abs(q))return f.success=!1,f;k=p((b*d-k*e)/q,0,1);b=p((b+d*k)/e,0,1);H[0]=a[0]+k*w[0];H[1]=a[1]+k*w[1];H[2]=a[2]+k*w[2];Q[0]=c[0]+b*n[0];Q[1]=c[1]+b*n[1];Q[2]=c[2]+b*n[2];a=h.vec3d.dist2(H,Q);f.success=!0;f.dist2=a;f.pa=H;f.pb=Q;return f};e.pointLineSegmentDistanceSquared2D=function(a,b,c){N[0]=b[0]-a[0];N[1]=
b[1]-a[1];N[2]=0;R[0]=c[0]-a[0];R[1]=c[1]-a[1];R[2]=0;V[0]=c[0];V[1]=c[1];V[2]=0;b=h.vec2d.dot(R,N);c=h.vec2d.dot(N,N);b=p(b/c,0,1);O[0]=N[0]*b;O[1]=N[1]*b;M[0]=a[0]+O[0];M[1]=a[1]+O[1];h.vec2d.subtract(V,M,P);a=h.vec2d.dot(P,P);b=h.vec2d.dot(R,R);c=h.vec2d.dot(N,N);var g=h.vec2d.dot(O,O);if(g>b||g>c)a=Number.MAX_VALUE;return a};e.packFloatRGBA=function(a,b,c){void 0===c&&(c=0);a=p(a,0,Y);for(var g=0;4>g;g++)b[c+g]=Math.floor(256*x(a*ba[g]))};e.unpackFloatRGBA=v;var ba=[1,256,65536,16777216],Z=[1/
256,1/65536,1/16777216,1/4294967296],Y=v(new Uint8ClampedArray([255,255,255,255]));e.inverseProjectionInfo=function(a,b,c,g,n){0===a[11]?(g[0]=2/(b*a[0]),g[1]=2/(c*a[5]),g[2]=(1+a[12])/a[0],g[3]=(1+a[13])/a[5],h.vec2d.set2(0,1,n)):(g[0]=-2/(b*a[0]),g[1]=-2/(c*a[5]),g[2]=(1-a[8])/a[0],g[3]=(1-a[9])/a[5],h.vec2d.set2(1,0,n))}})},"esri/views/3d/support/geometryUtils":function(){define(["require","exports","./geometryUtils/lineSegment","./geometryUtils/plane","./geometryUtils/triangle"],function(y,e,
m,h,l){Object.defineProperty(e,"__esModule",{value:!0});e.plane=h;e.triangle=l;e.lineSegment=m})},"esri/views/3d/support/geometryUtils/lineSegment":function(){define(["require","exports","../../lib/glMatrix","../mathUtils"],function(y,e,m,h){function l(e,h){void 0===e&&(e=m.vec3d.create());void 0===h&&(h=m.vec3d.create());return{origin:e,vector:h}}Object.defineProperty(e,"__esModule",{value:!0});e.create=l;e.fromOriginAndVector=function(e,h,p){void 0===p&&(p=l());m.vec3d.set(e,p.origin);m.vec3d.set(h,
p.vector);return p};e.distance2=function(e,l){l=m.vec3d.subtract(l,e.origin);var r=m.vec3d.dot(e.vector,l),q=m.vec3d.dot(e.vector,e.vector),r=h.clamp(r/q,0,1);e=m.vec3d.subtract(m.vec3d.scale(e.vector,r,p),l,p);return m.vec3d.dot(e,e)};var p=m.vec3d.create()})},"esri/views/3d/lib/glMatrix":function(){define([],function(){var y={};(function(e,m){m(e,!0);m(e,!1)})(y,function(e,m){var h={};(function(){if("undefined"!=typeof Float32Array){var a=new Float32Array(1),b=new Int32Array(a.buffer);h.invsqrt=
function(c){a[0]=c;b[0]=1597463007-(b[0]>>1);var g=a[0];return g*(1.5-.5*c*g*g)}}else h.invsqrt=function(a){return 1/Math.sqrt(a)}})();var l=Array;"undefined"!=typeof Float32Array&&(l=m?Float32Array:Array);var p={create:function(a){var b=new l(3);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2]):b[0]=b[1]=b[2]=0;return b},createFrom:function(a,b,c){var g=new l(3);g[0]=a;g[1]=b;g[2]=c;return g},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},set3:function(a,b,c,g){g[0]=a;g[1]=b;g[2]=c;return g},add:function(a,
b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c},subtract:function(a,b,c){if(!c||a===c)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a;c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c},multiply:function(a,b,c){if(!c||a===c)return a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a;c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];return c},max:function(a,b,c){c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2]);return c},min:function(a,
b,c){c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b},scale:function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c},normalize:function(a,b){b||(b=a);var c=a[0],g=a[1];a=a[2];var n=Math.sqrt(c*c+g*g+a*a);if(!n)return b[0]=0,b[1]=0,b[2]=0,b;if(1===n)return b[0]=c,b[1]=g,b[2]=a,b;n=1/n;b[0]=c*n;b[1]=g*n;b[2]=a*n;return b},cross:function(a,b,
c){c||(c=a);var g=a[0],n=a[1];a=a[2];var d=b[0],f=b[1];b=b[2];c[0]=n*b-a*f;c[1]=a*d-g*b;c[2]=g*f-n*d;return c},length:function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)},length2:function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,b,c){c||(c=a);var g=a[0]-b[0],n=a[1]-b[1];a=a[2]-b[2];b=Math.sqrt(g*g+n*n+a*a);if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/b;c[0]=g*b;c[1]=n*b;c[2]=a*b;return c},lerp:function(a,
b,c,g){g||(g=a);g[0]=a[0]+c*(b[0]-a[0]);g[1]=a[1]+c*(b[1]-a[1]);g[2]=a[2]+c*(b[2]-a[2]);return g},dist:function(a,b){var c=b[0]-a[0],g=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(c*c+g*g+a*a)},dist2:function(a,b){var c=b[0]-a[0],g=b[1]-a[1];a=b[2]-a[2];return c*c+g*g+a*a}},u=null,r=new l(4);p.unproject=function(a,b,c,g,n){n||(n=a);u||(u=x.create());var d=u;r[0]=2*(a[0]-g[0])/g[2]-1;r[1]=2*(a[1]-g[1])/g[3]-1;r[2]=2*a[2]-1;r[3]=1;x.multiply(c,b,d);if(!x.inverse(d))return null;x.multiplyVec4(d,r);if(0===
r[3])return null;n[0]=r[0]/r[3];n[1]=r[1]/r[3];n[2]=r[2]/r[3];return n};var z=p.createFrom(1,0,0),q=p.createFrom(0,1,0),d=p.createFrom(0,0,1);p.rotationTo=function(a,b,c){c||(c=t.create());var g=p.dot(a,b),n=p.create();if(1<=g)t.set(B,c);else if(-.999999>g)p.cross(z,a,n),1E-6>n.length&&p.cross(q,a,n),1E-6>n.length&&p.cross(d,a,n),p.normalize(n),t.fromAxisAngle(n,Math.PI,c);else{var g=Math.sqrt(2*(1+g)),w=1/g;p.cross(a,b,n);c[0]=n[0]*w;c[1]=n[1]*w;c[2]=n[2]*w;c[3]=.5*g;t.normalize(c)}1<c[3]?c[3]=1:
-1>c[3]&&(c[3]=-1);return c};var k=p.create(),f=p.create();p.project=function(a,b,c,g){g||(g=a);p.direction(b,c,k);p.subtract(a,b,f);a=p.dot(k,f);p.scale(k,a,g);p.add(g,b,g)};p.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var v={create:function(a){var b=new l(9);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]):b[0]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=0;return b},createFrom:function(a,b,c,g,n,d,f,k,e){var w=new l(9);w[0]=a;w[1]=b;w[2]=c;w[3]=
g;w[4]=n;w[5]=d;w[6]=f;w[7]=k;w[8]=e;return w},determinant:function(a){var b=a[3],c=a[4],g=a[5],n=a[6],d=a[7],f=a[8];return a[0]*(f*c-g*d)+a[1]*(-f*b+g*n)+a[2]*(d*b-c*n)},inverse:function(a,b){var c=a[0],g=a[1],n=a[2],d=a[3],f=a[4],k=a[5],e=a[6],q=a[7];a=a[8];var h=a*f-k*q,l=-a*d+k*e,m=q*d-f*e,p=c*h+g*l+n*m;if(!p)return null;p=1/p;b||(b=v.create());b[0]=h*p;b[1]=(-a*g+n*q)*p;b[2]=(k*g-n*f)*p;b[3]=l*p;b[4]=(a*c-n*e)*p;b[5]=(-k*c+n*d)*p;b[6]=m*p;b[7]=(-q*c+g*e)*p;b[8]=(f*c-g*d)*p;return b},multiply:function(a,
b,c){c||(c=a);var g=a[0],n=a[1],d=a[2],f=a[3],k=a[4],e=a[5],q=a[6],h=a[7];a=a[8];var l=b[0],m=b[1],v=b[2],p=b[3],r=b[4],t=b[5],u=b[6],x=b[7];b=b[8];c[0]=l*g+m*f+v*q;c[1]=l*n+m*k+v*h;c[2]=l*d+m*e+v*a;c[3]=p*g+r*f+t*q;c[4]=p*n+r*k+t*h;c[5]=p*d+r*e+t*a;c[6]=u*g+x*f+b*q;c[7]=u*n+x*k+b*h;c[8]=u*d+x*e+b*a;return c},add:function(a,b,c){c||(c=a);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];c[4]=a[4]+b[4];c[5]=a[5]+b[5];c[6]=a[6]+b[6];c[7]=a[7]+b[7];c[8]=a[8]+b[8];return c},subtract:function(a,
b,c){c||(c=a);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];c[4]=a[4]-b[4];c[5]=a[5]-b[5];c[6]=a[6]-b[6];c[7]=a[7]-b[7];c[8]=a[8]-b[8];return c},multiplyVec2:function(a,b,c){c||(c=b);var g=b[0];b=b[1];c[0]=g*a[0]+b*a[3]+a[6];c[1]=g*a[1]+b*a[4]+a[7];return c},multiplyVec3:function(a,b,c){c||(c=b);var g=b[0],n=b[1];b=b[2];c[0]=g*a[0]+n*a[3]+b*a[6];c[1]=g*a[1]+n*a[4]+b*a[7];c[2]=g*a[2]+n*a[5]+b*a[8];return c},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];
b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},identity:function(a){a||(a=v.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(!b||a===b){b=a[1];var c=a[2],g=a[5];a[1]=a[3];a[2]=a[6];a[3]=b;a[5]=a[7];a[6]=c;a[7]=g;return a}b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return b},toMat4:function(a,b){b||(b=x.create());b[15]=1;b[14]=0;b[13]=0;b[12]=0;b[11]=0;b[10]=a[8];b[9]=a[7];b[8]=a[6];b[7]=0;b[6]=a[5];
b[5]=a[4];b[4]=a[3];b[3]=0;b[2]=a[2];b[1]=a[1];b[0]=a[0];return b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},x={create:function(a){var b=new l(16);4===arguments.length?(b[0]=arguments[0],b[1]=arguments[1],b[2]=arguments[2],b[3]=arguments[3],b[4]=arguments[4],b[5]=arguments[5],b[6]=arguments[6],b[7]=arguments[7],b[8]=arguments[8],b[9]=arguments[9],b[10]=arguments[10],b[11]=arguments[11],b[12]=arguments[12],b[13]=arguments[13],
b[14]=arguments[14],b[15]=arguments[15]):a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b},createFrom:function(a,b,c,g,n,d,f,k,e,q,h,m,v,p,r,t){var w=new l(16);w[0]=a;w[1]=b;w[2]=c;w[3]=g;w[4]=n;w[5]=d;w[6]=f;w[7]=k;w[8]=e;w[9]=q;w[10]=h;w[11]=m;w[12]=v;w[13]=p;w[14]=r;w[15]=t;return w},createFromMatrixRowMajor:function(a){var b=new l(16);b[0]=a[0];b[4]=a[1];b[8]=
a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},createFromMatrix:function(a){var b=new l(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];
b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},setRowMajor:function(a,b){b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},identity:function(a){a||(a=x.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(!b||a===b){b=a[1];
var c=a[2],g=a[3],n=a[6],d=a[7],f=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=b;a[6]=a[9];a[7]=a[13];a[8]=c;a[9]=n;a[11]=a[14];a[12]=g;a[13]=d;a[14]=f;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b},determinant:function(a){var b=a[0],c=a[1],g=a[2],n=a[3],d=a[4],f=a[5],k=a[6],e=a[7],q=a[8],h=a[9],l=a[10],m=a[11],v=a[12],p=a[13],r=a[14];a=a[15];return v*h*k*n-
q*p*k*n-v*f*l*n+d*p*l*n+q*f*r*n-d*h*r*n-v*h*g*e+q*p*g*e+v*c*l*e-b*p*l*e-q*c*r*e+b*h*r*e+v*f*g*m-d*p*g*m-v*c*k*m+b*p*k*m+d*c*r*m-b*f*r*m-q*f*g*a+d*h*g*a+q*c*k*a-b*h*k*a-d*c*l*a+b*f*l*a},inverse:function(a,b){b||(b=a);var c=a[0],g=a[1],n=a[2],d=a[3],f=a[4],k=a[5],e=a[6],q=a[7],h=a[8],l=a[9],m=a[10],v=a[11],p=a[12],r=a[13],t=a[14];a=a[15];var u=c*k-g*f,x=c*e-n*f,z=c*q-d*f,B=g*e-n*k,A=g*q-d*k,y=n*q-d*e,F=h*r-l*p,D=h*t-m*p,E=h*a-v*p,G=l*t-m*r,I=l*a-v*r,J=m*a-v*t,C=u*J-x*I+z*G+B*E-A*D+y*F;if(!C)return null;
C=1/C;b[0]=(k*J-e*I+q*G)*C;b[1]=(-g*J+n*I-d*G)*C;b[2]=(r*y-t*A+a*B)*C;b[3]=(-l*y+m*A-v*B)*C;b[4]=(-f*J+e*E-q*D)*C;b[5]=(c*J-n*E+d*D)*C;b[6]=(-p*y+t*z-a*x)*C;b[7]=(h*y-m*z+v*x)*C;b[8]=(f*I-k*E+q*F)*C;b[9]=(-c*I+g*E-d*F)*C;b[10]=(p*A-r*z+a*u)*C;b[11]=(-h*A+l*z-v*u)*C;b[12]=(-f*G+k*D-e*F)*C;b[13]=(c*G-g*D+n*F)*C;b[14]=(-p*B+r*x-t*u)*C;b[15]=(h*B-l*x+m*u)*C;return b},toRotationMat:function(a,b){b||(b=x.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];
b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},toMat3:function(a,b){b||(b=v.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b},toInverseMat3:function(a,b){var c=a[0],g=a[1],n=a[2],d=a[4],f=a[5],k=a[6],e=a[8],q=a[9];a=a[10];var h=a*f-k*q,l=-a*d+k*e,m=q*d-f*e,p=c*h+g*l+n*m;if(!p)return null;p=1/p;b||(b=v.create());b[0]=h*p;b[1]=(-a*g+n*q)*p;b[2]=(k*g-n*f)*p;b[3]=l*p;b[4]=(a*c-n*e)*p;b[5]=(-k*c+n*d)*p;b[6]=m*p;b[7]=
(-q*c+g*e)*p;b[8]=(f*c-g*d)*p;return b},multiply:function(a,b,c){c||(c=a);var g=a[0],n=a[1],d=a[2],f=a[3],k=a[4],e=a[5],q=a[6],h=a[7],l=a[8],m=a[9],p=a[10],v=a[11],r=a[12],t=a[13],u=a[14];a=a[15];var x=b[0],z=b[1],B=b[2],A=b[3],y=b[4],F=b[5],D=b[6],E=b[7],G=b[8],I=b[9],J=b[10],C=b[11],S=b[12],T=b[13],U=b[14];b=b[15];c[0]=x*g+z*k+B*l+A*r;c[1]=x*n+z*e+B*m+A*t;c[2]=x*d+z*q+B*p+A*u;c[3]=x*f+z*h+B*v+A*a;c[4]=y*g+F*k+D*l+E*r;c[5]=y*n+F*e+D*m+E*t;c[6]=y*d+F*q+D*p+E*u;c[7]=y*f+F*h+D*v+E*a;c[8]=G*g+I*k+J*
l+C*r;c[9]=G*n+I*e+J*m+C*t;c[10]=G*d+I*q+J*p+C*u;c[11]=G*f+I*h+J*v+C*a;c[12]=S*g+T*k+U*l+b*r;c[13]=S*n+T*e+U*m+b*t;c[14]=S*d+T*q+U*p+b*u;c[15]=S*f+T*h+U*v+b*a;return c},multiplyVec3:function(a,b,c){c||(c=b);var g=b[0],n=b[1];b=b[2];c[0]=a[0]*g+a[4]*n+a[8]*b+a[12];c[1]=a[1]*g+a[5]*n+a[9]*b+a[13];c[2]=a[2]*g+a[6]*n+a[10]*b+a[14];return c},multiplyVec4:function(a,b,c){c||(c=b);var g=b[0],n=b[1],d=b[2];b=b[3];c[0]=a[0]*g+a[4]*n+a[8]*d+a[12]*b;c[1]=a[1]*g+a[5]*n+a[9]*d+a[13]*b;c[2]=a[2]*g+a[6]*n+a[10]*
d+a[14]*b;c[3]=a[3]*g+a[7]*n+a[11]*d+a[15]*b;return c},translate:function(a,b,c){var g=b[0],n=b[1];b=b[2];var d,f,k,e,q,h,l,m,p,v,r,t;if(!c||a===c)return a[12]=a[0]*g+a[4]*n+a[8]*b+a[12],a[13]=a[1]*g+a[5]*n+a[9]*b+a[13],a[14]=a[2]*g+a[6]*n+a[10]*b+a[14],a[15]=a[3]*g+a[7]*n+a[11]*b+a[15],a;d=a[0];f=a[1];k=a[2];e=a[3];q=a[4];h=a[5];l=a[6];m=a[7];p=a[8];v=a[9];r=a[10];t=a[11];c[0]=d;c[1]=f;c[2]=k;c[3]=e;c[4]=q;c[5]=h;c[6]=l;c[7]=m;c[8]=p;c[9]=v;c[10]=r;c[11]=t;c[12]=d*g+q*n+p*b+a[12];c[13]=f*g+h*n+v*
b+a[13];c[14]=k*g+l*n+r*b+a[14];c[15]=e*g+m*n+t*b+a[15];return c},scale:function(a,b,c){var g=b[0],n=b[1];b=b[2];if(!c||a===c)return a[0]*=g,a[1]*=g,a[2]*=g,a[3]*=g,a[4]*=n,a[5]*=n,a[6]*=n,a[7]*=n,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;c[0]=a[0]*g;c[1]=a[1]*g;c[2]=a[2]*g;c[3]=a[3]*g;c[4]=a[4]*n;c[5]=a[5]*n;c[6]=a[6]*n;c[7]=a[7]*n;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},maxScale:function(a){return Math.max(Math.max(Math.sqrt(a[0]*a[0]+
a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))},rotate:function(a,b,c,g){var n=c[0],d=c[1];c=c[2];var f=Math.sqrt(n*n+d*d+c*c),k,e,q,h,l,m,p,v,r,t,u,x,z,B,A,y,F,D,E,G;if(!f)return null;1!==f&&(f=1/f,n*=f,d*=f,c*=f);k=Math.sin(b);e=Math.cos(b);q=1-e;b=a[0];f=a[1];h=a[2];l=a[3];m=a[4];p=a[5];v=a[6];r=a[7];t=a[8];u=a[9];x=a[10];z=a[11];B=n*n*q+e;A=d*n*q+c*k;y=c*n*q-d*k;F=n*d*q-c*k;D=d*d*q+e;E=c*d*q+n*k;G=n*c*q+d*k;n=d*c*q-n*k;d=c*c*q+e;g?a!==
g&&(g[12]=a[12],g[13]=a[13],g[14]=a[14],g[15]=a[15]):g=a;g[0]=b*B+m*A+t*y;g[1]=f*B+p*A+u*y;g[2]=h*B+v*A+x*y;g[3]=l*B+r*A+z*y;g[4]=b*F+m*D+t*E;g[5]=f*F+p*D+u*E;g[6]=h*F+v*D+x*E;g[7]=l*F+r*D+z*E;g[8]=b*G+m*n+t*d;g[9]=f*G+p*n+u*d;g[10]=h*G+v*n+x*d;g[11]=l*G+r*n+z*d;return g},rotateX:function(a,b,c){var g=Math.sin(b);b=Math.cos(b);var n=a[4],d=a[5],f=a[6],k=a[7],e=a[8],q=a[9],h=a[10],l=a[11];c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[4]=n*
b+e*g;c[5]=d*b+q*g;c[6]=f*b+h*g;c[7]=k*b+l*g;c[8]=n*-g+e*b;c[9]=d*-g+q*b;c[10]=f*-g+h*b;c[11]=k*-g+l*b;return c},rotateY:function(a,b,c){var g=Math.sin(b);b=Math.cos(b);var n=a[0],d=a[1],f=a[2],k=a[3],e=a[8],q=a[9],h=a[10],l=a[11];c?a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=n*b+e*-g;c[1]=d*b+q*-g;c[2]=f*b+h*-g;c[3]=k*b+l*-g;c[8]=n*g+e*b;c[9]=d*g+q*b;c[10]=f*g+h*b;c[11]=k*g+l*b;return c},rotateZ:function(a,b,c){var g=Math.sin(b);b=Math.cos(b);
var n=a[0],d=a[1],f=a[2],k=a[3],e=a[4],q=a[5],h=a[6],l=a[7];c?a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=n*b+e*g;c[1]=d*b+q*g;c[2]=f*b+h*g;c[3]=k*b+l*g;c[4]=n*-g+e*b;c[5]=d*-g+q*b;c[6]=f*-g+h*b;c[7]=k*-g+l*b;return c},frustum:function(a,b,c,g,n,d,f){f||(f=x.create());var k=b-a,w=g-c,e=d-n;f[0]=2*n/k;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=2*n/w;f[6]=0;f[7]=0;f[8]=(b+a)/k;f[9]=(g+c)/w;f[10]=-(d+n)/e;f[11]=-1;f[12]=0;f[13]=0;f[14]=-(d*n*2)/
e;f[15]=0;return f},perspective:function(a,b,c,g,n){a=c*Math.tan(a*Math.PI/360);b*=a;return x.frustum(-b,b,-a,a,c,g,n)},ortho:function(a,b,c,g,n,d,f){f||(f=x.create());var k=b-a,w=g-c,e=d-n;f[0]=2/k;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=2/w;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=-2/e;f[11]=0;f[12]=-(a+b)/k;f[13]=-(g+c)/w;f[14]=-(d+n)/e;f[15]=1;return f},lookAt:function(a,b,c,g){g||(g=x.create());var n,d,f,k,e,q,h,l,m=a[0],p=a[1];a=a[2];f=c[0];k=c[1];d=c[2];h=b[0];c=b[1];n=b[2];if(m===h&&p===c&&a===n)return x.identity(g);
b=m-h;c=p-c;h=a-n;l=1/Math.sqrt(b*b+c*c+h*h);b*=l;c*=l;h*=l;n=k*h-d*c;d=d*b-f*h;f=f*c-k*b;(l=Math.sqrt(n*n+d*d+f*f))?(l=1/l,n*=l,d*=l,f*=l):f=d=n=0;k=c*f-h*d;e=h*n-b*f;q=b*d-c*n;(l=Math.sqrt(k*k+e*e+q*q))?(l=1/l,k*=l,e*=l,q*=l):q=e=k=0;g[0]=n;g[1]=k;g[2]=b;g[3]=0;g[4]=d;g[5]=e;g[6]=c;g[7]=0;g[8]=f;g[9]=q;g[10]=h;g[11]=0;g[12]=-(n*m+d*p+f*a);g[13]=-(k*m+e*p+q*a);g[14]=-(b*m+c*p+h*a);g[15]=1;return g},fromRotationTranslation:function(a,b,c){c||(c=x.create());var g=a[0],n=a[1],d=a[2],f=a[3],k=g+g,e=
n+n,q=d+d;a=g*k;var h=g*e,g=g*q,l=n*e,n=n*q,d=d*q,k=f*k,e=f*e,f=f*q;c[0]=1-(l+d);c[1]=h+f;c[2]=g-e;c[3]=0;c[4]=h-f;c[5]=1-(a+d);c[6]=n+k;c[7]=0;c[8]=g+e;c[9]=n-k;c[10]=1-(a+l);c[11]=0;c[12]=b[0];c[13]=b[1];c[14]=b[2];c[15]=1;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},t={create:function(a){var b=new l(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=
a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,g){var n=new l(4);n[0]=a;n[1]=b;n[2]=c;n[3]=g;return n},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=t.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}},B=t.identity();t.calculateW=function(a,b){var c=a[0],g=a[1],n=a[2];if(!b||a===b)return a[3]=-Math.sqrt(Math.abs(1-c*c-g*g-n*n)),a;b[0]=c;b[1]=g;b[2]=n;b[3]=-Math.sqrt(Math.abs(1-c*c-g*g-n*n));return b};t.dot=function(a,b){return a[0]*b[0]+
a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};t.inverse=function(a,b){var c=a[0],g=a[1],n=a[2],d=a[3],c=(c=c*c+g*g+n*n+d*d)?1/c:0;if(!b||a===b)return a[0]*=-c,a[1]*=-c,a[2]*=-c,a[3]*=c,a;b[0]=-a[0]*c;b[1]=-a[1]*c;b[2]=-a[2]*c;b[3]=a[3]*c;return b};t.conjugate=function(a,b){if(!b||a===b)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};t.length=function(a){var b=a[0],c=a[1],g=a[2];a=a[3];return Math.sqrt(b*b+c*c+g*g+a*a)};t.normalize=function(a,b){b||(b=a);var c=a[0],g=a[1],
n=a[2];a=a[3];var d=Math.sqrt(c*c+g*g+n*n+a*a);if(0===d)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;d=1/d;b[0]=c*d;b[1]=g*d;b[2]=n*d;b[3]=a*d;return b};t.add=function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};t.multiply=function(a,b,c){c||(c=a);var g=a[0],n=a[1],d=a[2];a=a[3];var f=b[0],k=b[1],e=b[2];b=b[3];c[0]=g*b+a*f+n*e-d*k;c[1]=n*b+a*k+d*f-g*e;c[2]=d*b+a*e+g*k-n*f;c[3]=a*b-g*f-n*k-d*e;return c};t.multiplyVec3=
function(a,b,c){c||(c=b);var g=b[0],n=b[1],d=b[2];b=a[0];var f=a[1],k=a[2];a=a[3];var e=a*g+f*d-k*n,q=a*n+k*g-b*d,h=a*d+b*n-f*g,g=-b*g-f*n-k*d;c[0]=e*a+g*-b+q*-k-h*-f;c[1]=q*a+g*-f+h*-b-e*-k;c[2]=h*a+g*-k+e*-f-q*-b;return c};t.scale=function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};t.toMat3=function(a,b){b||(b=v.create());var c=a[0],g=a[1],n=a[2],d=a[3],f=c+c,k=g+g,e=n+n;a=c*f;var q=c*k,c=c*e,h=g*k,g=g*e,n=n*e,f=d*f,k=d*
k,d=d*e;b[0]=1-(h+n);b[1]=q+d;b[2]=c-k;b[3]=q-d;b[4]=1-(a+n);b[5]=g+f;b[6]=c+k;b[7]=g-f;b[8]=1-(a+h);return b};t.toMat4=function(a,b){b||(b=x.create());var c=a[0],g=a[1],n=a[2],d=a[3],f=c+c,k=g+g,e=n+n;a=c*f;var q=c*k,c=c*e,h=g*k,g=g*e,n=n*e,f=d*f,k=d*k,d=d*e;b[0]=1-(h+n);b[1]=q+d;b[2]=c-k;b[3]=0;b[4]=q-d;b[5]=1-(a+n);b[6]=g+f;b[7]=0;b[8]=c+k;b[9]=g-f;b[10]=1-(a+h);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};t.slerp=function(a,b,c,g){g||(g=a);var d=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3],f,
k;if(1<=Math.abs(d))return g!==a&&(g[0]=a[0],g[1]=a[1],g[2]=a[2],g[3]=a[3]),g;f=Math.acos(d);k=Math.sqrt(1-d*d);if(.001>Math.abs(k))return g[0]=.5*a[0]+.5*b[0],g[1]=.5*a[1]+.5*b[1],g[2]=.5*a[2]+.5*b[2],g[3]=.5*a[3]+.5*b[3],g;d=Math.sin((1-c)*f)/k;c=Math.sin(c*f)/k;g[0]=a[0]*d+b[0]*c;g[1]=a[1]*d+b[1]*c;g[2]=a[2]*d+b[2]*c;g[3]=a[3]*d+b[3]*c;return g};t.fromRotationMatrix=function(a,b){b||(b=t.create());var c=a[0]+a[4]+a[8],g;if(0<c)g=Math.sqrt(c+1),b[3]=.5*g,g=.5/g,b[0]=(a[7]-a[5])*g,b[1]=(a[2]-a[6])*
g,b[2]=(a[3]-a[1])*g;else{g=t.fromRotationMatrix.s_iNext=t.fromRotationMatrix.s_iNext||[1,2,0];c=0;a[4]>a[0]&&(c=1);a[8]>a[3*c+c]&&(c=2);var d=g[c],f=g[d];g=Math.sqrt(a[3*c+c]-a[3*d+d]-a[3*f+f]+1);b[c]=.5*g;g=.5/g;b[3]=(a[3*f+d]-a[3*d+f])*g;b[d]=(a[3*d+c]+a[3*c+d])*g;b[f]=(a[3*f+c]+a[3*c+f])*g}return b};v.toQuat4=t.fromRotationMatrix;(function(){var a=v.create();t.fromAxes=function(b,c,g,d){a[0]=c[0];a[3]=c[1];a[6]=c[2];a[1]=g[0];a[4]=g[1];a[7]=g[2];a[2]=b[0];a[5]=b[1];a[8]=b[2];return t.fromRotationMatrix(a,
d)}})();t.identity=function(a){a||(a=t.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};t.fromAngleAxis=function(a,b,c){c||(c=t.create());a*=.5;var g=Math.sin(a);c[3]=Math.cos(a);c[0]=g*b[0];c[1]=g*b[1];c[2]=g*b[2];return c};t.toAngleAxis=function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<c?(b[3]=2*Math.acos(a[3]),c=h.invsqrt(c),b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};t.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var A={create:function(a){var b=
new l(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,g){var d=new l(4);d[0]=a;d[1]=b;d[2]=c;d[3]=g;return d},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=A.create());a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,b){if(!b||a===b)return b=a[1],a[1]=a[2],a[2]=b,a;b[0]=a[0];b[1]=a[2];b[2]=a[1];b[3]=a[3];return b},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,
b){b||(b=a);var c=a[0],g=a[1],d=a[2];a=a[3];var f=c*a-d*g;if(!f)return null;f=1/f;b[0]=a*f;b[1]=-g*f;b[2]=-d*f;b[3]=c*f;return b},multiply:function(a,b,c){c||(c=a);var g=a[0],d=a[1],f=a[2];a=a[3];c[0]=g*b[0]+d*b[2];c[1]=g*b[1]+d*b[3];c[2]=f*b[0]+a*b[2];c[3]=f*b[1]+a*b[3];return c},rotate:function(a,b,c){c||(c=a);var g=a[0],d=a[1],f=a[2];a=a[3];var k=Math.sin(b);b=Math.cos(b);c[0]=g*b+d*k;c[1]=g*-k+d*b;c[2]=f*b+a*k;c[3]=f*-k+a*b;return c},multiplyVec2:function(a,b,c){c||(c=b);var g=b[0];b=b[1];c[0]=
g*a[0]+b*a[1];c[1]=g*a[2]+b*a[3];return c},scale:function(a,b,c){c||(c=a);var g=a[1],d=a[2],f=a[3],k=b[0];b=b[1];c[0]=a[0]*k;c[1]=g*b;c[2]=d*k;c[3]=f*b;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};m=m?"":"d";e["glMath"+m]=h;e["vec2"+m]={create:function(a){var b=new l(2);a?(b[0]=a[0],b[1]=a[1]):(b[0]=0,b[1]=0);return b},createFrom:function(a,b){var c=new l(2);c[0]=a;c[1]=b;return c},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];return c},subtract:function(a,
b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;return c},dist:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)},dist2:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a},set:function(a,b){b[0]=a[0];b[1]=a[1];return b},set2:function(a,b,c){c[0]=a;c[1]=b;return c},negate:function(a,
b){b||(b=a);b[0]=-a[0];b[1]=-a[1];return b},normalize:function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];0<c?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0;return b},cross:function(a,b,c){a=a[0]*b[1]-a[1]*b[0];if(!c)return a;c[0]=c[1]=0;c[2]=a;return c},length:function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},direction:function(a,b,c){c||(c=a);var g=a[0]-b[0];a=a[1]-b[1];b=g*g+a*a;if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/Math.sqrt(b);c[0]=g*
b;c[1]=a*b;return c},lerp:function(a,b,c,g){g||(g=a);g[0]=a[0]+c*(b[0]-a[0]);g[1]=a[1]+c*(b[1]-a[1]);return g},str:function(a){return"["+a[0]+", "+a[1]+"]"}};e["vec3"+m]=p;e["vec4"+m]={create:function(a){var b=new l(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):(b[0]=0,b[1]=0,b[2]=0,b[3]=0);return b},createFrom:function(a,b,c,g){var d=new l(4);d[0]=a;d[1]=b;d[2]=c;d[3]=g;return d},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c},subtract:function(a,
b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];c[3]=a[3]*b[3];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];c[3]=a[3]/b[3];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];
return b},set4:function(a,b,c,g,d){d[0]=a;d[1]=b;d[2]=c;d[3]=g;return d},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b},lerp:function(a,b,c,g){g||(g=a);g[0]=a[0]+c*(b[0]-a[0]);g[1]=a[1]+c*(b[1]-a[1]);g[2]=a[2]+c*(b[2]-a[2]);g[3]=a[3]+c*(b[3]-a[3]);return g},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};e["mat2"+m]=A;e["mat3"+m]=v;e["mat4"+m]=x;e["quat4"+m]=t});return y})},"esri/views/3d/support/mathUtils":function(){define(["require","exports",
"../lib/glMatrix"],function(y,e,m){function h(d){return Math.asin(1<d?1:-1>d?-1:d)}function l(d){return Math.acos(1<d?1:-1>d?-1:d)}function p(d,k,f){return d<k?k:d>f?f:d}function u(d){for(var k in d){var f=d[k];f instanceof Function&&(d[k]=f.bind(d))}return d}Object.defineProperty(e,"__esModule",{value:!0});e.deg2rad=function(d){return d*Math.PI/180};e.rad2deg=function(d){return 180*d/Math.PI};e.asin=h;e.acos=l;e.sign=Math.sign||function(d){return+(0<d)-+(0>d)||+d};e.log2=Math.log2||function(d){return Math.log(d)/
Math.LN2};e.fovx2fovy=function(d,k,f){return 2*Math.atan(f*Math.tan(.5*d)/k)};e.fovy2fovx=function(d,k,f){return 2*Math.atan(k*Math.tan(.5*d)/f)};e.makeOrthonormal=function(d,k,f){f=f||d;var e=m.vec3d.dot(d,k);m.vec3d.set3(d[0]-e*k[0],d[1]-e*k[1],d[2]-e*k[2],f);m.vec3d.normalize(f)};e.tangentFrame=function(d,k,f){Math.abs(d[0])>Math.abs(d[1])?m.vec3d.set3(0,1,0,k):m.vec3d.set3(1,0,0,k);m.vec3d.cross(d,k,f);m.vec3d.normalize(k);m.vec3d.cross(f,d,k);m.vec3d.normalize(f)};e.cartesianToSpherical=function(d,
k){var f=m.vec3d.length(d),e=h(d[2]/f);m.vec3d.set3(f,e,Math.atan2(d[1]/f,d[0]/f),k)};e.sphericalToCartesian=function(d,k){var f=d[0],e=d[1];d=d[2];var q=Math.cos(e);m.vec3d.set3(f*q*Math.cos(d),f*q*Math.sin(d),f*Math.sin(e),k)};e.lerp=function(d,k,f){return d+(k-d)*f};e.bilerp=function(d,k,f,e,q,h){d+=(k-d)*q;return d+(f+(e-f)*q-d)*h};e.slerp=function(d,k,f,e){void 0===e&&(e=d);var h=m.vec3d.length(d),l=m.vec3d.length(k),p=m.vec3d.dot(d,k)/(h*l);if(.9999999999999999>p){var p=Math.acos(p),v=((1-f)*
h+f*l)/Math.sin(p),l=v/l*Math.sin(f*p);m.vec3d.scale(d,v/h*Math.sin((1-f)*p),z);m.vec3d.scale(k,l,q);return m.vec3d.add(z,q,e)}return m.vec3d.lerp(d,k,f,e)};e.angle=function(d,k,f){d=m.vec3d.normalize(d,z);k=m.vec3d.normalize(k,q);var e=l(m.vec3d.dot(d,k));return f&&(d=m.vec3d.cross(d,k,r),0>m.vec3d.dot(d,f))?-e:e};e.clamp=p;e.isFinite=Number.isFinite||function(d){return"number"===typeof d&&window.isFinite(d)};e.isNaN=Number.isNaN||function(d){return d!==d};e.makePiecewiseLinearFunction=function(d){var k=
d.length;return function(f){var e=0;if(f<=d[0][0])return d[0][1];if(f>=d[k-1][0])return d[k-1][1];for(;f>d[e][0];)e++;var q=d[e][0];f=(q-f)/(q-d[e-1][0]);return f*d[e-1][1]+(1-f)*d[e][1]}};e.vectorEquals=function(d,k){if(null==d||null==k)return d!==k;if(d.length!==k.length)return!1;for(var f=0;f<d.length;f++)if(d[f]!==k[f])return!1;return!0};e.floatEqualRelative=function(d,k,f){void 0===f&&(f=1E-6);if(e.isNaN(d)||e.isNaN(k))return!1;if(d===k)return!0;var q=Math.abs(d-k),h=Math.abs(d),l=Math.abs(k);
if(0===d||0===k||1E-12>h&&1E-12>l){if(q>.01*f)return!1}else if(q/(h+l)>f)return!1;return!0};e.floatEqualAbsolute=function(d,k,f){void 0===f&&(f=1E-6);return e.isNaN(d)||e.isNaN(k)?!1:(d>k?d-k:k-d)<=f};y=function(){function d(d,f){this.min=d;this.max=f;this.range=f-d}d.prototype.ndiff=function(d,f){void 0===f&&(f=0);return Math.ceil((d-f)/this.range)*this.range+f};d.prototype._normalize=function(d,f,e,q){void 0===q&&(q=0);e-=q;e<d?e+=this.ndiff(d-e):e>f&&(e-=this.ndiff(e-f));return e+q};d.prototype.normalize=
function(d,f){return this._normalize(this.min,this.max,d,f)};d.prototype.clamp=function(d,f){void 0===f&&(f=0);return p(d-f,this.min,this.max)+f};d.prototype.monotonic=function(d,f,e){return d<f?f:f+this.ndiff(d-f,e)};d.prototype.minimalMonotonic=function(d,f,e){return this._normalize(d,d+this.range,f,e)};d.prototype.center=function(d,f,e){f=this.monotonic(d,f,e);return this.normalize((d+f)/2,e)};d.prototype.diff=function(d,f,e){return this.monotonic(d,f,e)-d};d.prototype.contains=function(d,f,e){f=
this.minimalMonotonic(d,f);e=this.minimalMonotonic(d,e);return e>d&&e<f};return d}();e.Cyclical=y;e.cyclical2PI=u(new y(0,2*Math.PI));e.cyclicalPI=u(new y(-Math.PI,Math.PI));e.cyclicalDeg=u(new y(0,360));var r=m.vec3d.create(),z=m.vec3d.create(),q=m.vec3d.create()})},"esri/views/3d/support/geometryUtils/plane":function(){define(["require","exports","../../lib/glMatrix"],function(y,e,m){function h(q){void 0===q&&(q=e.UP);return[q[0],q[1],q[2],q[3]]}function l(e,d,k){void 0===k&&(k=h());m.vec3d.set(d,
k);k[3]=-m.vec3d.dot(d,e);return k}function p(e,d,k,f){void 0===f&&(f=h());m.vec3d.cross(d,e,z);return l(k,m.vec3d.normalize(z),f)}Object.defineProperty(e,"__esModule",{value:!0});e.create=h;e.fromValues=function(e,d,k,f,l){void 0===l&&(l=h());l[0]=e;l[1]=d;l[2]=k;l[3]=f;return l};e.fromNormalAndOffset=function(e,d,k){void 0===k&&(k=h());m.vec3d.set(e,k);k[3]=d;return k};e.fromPositionAndNormal=l;e.projectVector=function(e,d,k){void 0===k&&(k=d);return m.vec3d.cross(e,m.vec3d.cross(d,e,r),k)};e.distance=
function(e,d){return m.vec3d.dot(e,d)+e[3]};e.fromPoints=function(e,d,k,f){void 0===f&&(f=h());return p(m.vec3d.subtract(e,d,u),m.vec3d.subtract(k,d,r),e,f)};e.set=function(e,d){e[0]=d[0];e[1]=d[1];e[2]=d[2];e[3]=d[3];return e};e.negate=function(e,d){void 0===d&&(d=e);d[0]=-e[0];d[1]=-e[1];d[2]=-e[2];d[3]=-e[3];return d};e.fromVectorsAndPoint=p;e.intersectRay=function(e,d,k,f){var h=m.vec3d.dot(e,k);if(0===h)return!1;e=-(m.vec3d.dot(e,d)+e[3])/h;m.vec3d.add(d,m.vec3d.scale(k,e,f),f);return!0};e.UP=
[0,0,1,0];var u=m.vec3d.create(),r=m.vec3d.create(),z=m.vec3d.create()})},"esri/views/3d/support/geometryUtils/triangle":function(){define(["require","exports","../../lib/glMatrix","./lineSegment"],function(y,e,m,h){function l(d,f,e){var k=m.vec2d.dist(d,f);f=m.vec2d.dist(f,e);d=m.vec2d.dist(e,d);e=(k+f+d)/2;return Math.sqrt(e*(e-k)*(e-f)*(e-d))}Object.defineProperty(e,"__esModule",{value:!0});e.create=function(d,f,e){void 0===d&&(d=m.vec3d.create());void 0===f&&(f=m.vec3d.create());void 0===e&&(e=
m.vec3d.create());return{p0:d,p1:f,p2:e}};e.distance2=function(e,l){var v=e.p0,x=e.p1;e=e.p2;var A=m.vec3d.subtract(x,v,p),a=m.vec3d.subtract(e,x,u),b=m.vec3d.subtract(v,e,r),c=m.vec3d.subtract(l,v,z),g=m.vec3d.subtract(l,x,q),n=m.vec3d.subtract(l,e,d),w=m.vec3d.cross(A,b),H=m.vec3d.dot(m.vec3d.cross(A,w,k),c),g=m.vec3d.dot(m.vec3d.cross(a,w,k),g),n=m.vec3d.dot(m.vec3d.cross(b,w,k),n);if(0<H&&0<g&&0<n)return l=m.vec3d.dot(w,c),l*l/m.vec3d.dot(w,w);v=h.distance2(h.fromOriginAndVector(v,A,f),l);x=h.distance2(h.fromOriginAndVector(x,
a,f),l);l=h.distance2(h.fromOriginAndVector(e,b,f),l);return Math.min(v,x,l)};e.areaPoints2d=l;e.area2d=function(d){return l(d.p0,d.p1,d.p2)};var p=m.vec3d.create(),u=m.vec3d.create(),r=m.vec3d.create(),z=m.vec3d.create(),q=m.vec3d.create(),d=m.vec3d.create(),k=m.vec3d.create(),f=h.create()})},"esri/views/3d/webgl-engine/lib/gl-matrix":function(){define([],function(){var y={};(function(e,m){m(e,!0);m(e,!1)})(y,function(e,m){var h={};(function(){if("undefined"!=typeof Float32Array){var a=new Float32Array(1),
b=new Int32Array(a.buffer);h.invsqrt=function(c){a[0]=c;b[0]=1597463007-(b[0]>>1);var g=a[0];return g*(1.5-.5*c*g*g)}}else h.invsqrt=function(a){return 1/Math.sqrt(a)}})();var l=Array;"undefined"!=typeof Float32Array&&(l=m?Float32Array:Array);var p={create:function(a){var b=new l(3);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2]):b[0]=b[1]=b[2]=0;return b},createFrom:function(a,b,c){var g=new l(3);g[0]=a;g[1]=b;g[2]=c;return g},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},set3:function(a,b,c,g){g[0]=
a;g[1]=b;g[2]=c;return g},add:function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c},subtract:function(a,b,c){if(!c||a===c)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a;c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c},multiply:function(a,b,c){if(!c||a===c)return a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a;c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];return c},max:function(a,b,c){c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=
Math.max(a[2],b[2]);return c},min:function(a,b,c){c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b},scale:function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c},normalize:function(a,b){b||(b=a);var c=a[0],g=a[1];a=a[2];var d=Math.sqrt(c*c+g*g+a*a);if(!d)return b[0]=0,b[1]=0,b[2]=0,b;if(1===d)return b[0]=c,b[1]=g,b[2]=a,b;d=1/d;b[0]=c*d;b[1]=
g*d;b[2]=a*d;return b},cross:function(a,b,c){c||(c=a);var g=a[0],d=a[1];a=a[2];var f=b[0],e=b[1];b=b[2];c[0]=d*b-a*e;c[1]=a*f-g*b;c[2]=g*e-d*f;return c},length:function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)},length2:function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,b,c){c||(c=a);var g=a[0]-b[0],d=a[1]-b[1];a=a[2]-b[2];b=Math.sqrt(g*g+d*d+a*a);if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/b;c[0]=g*b;c[1]=
d*b;c[2]=a*b;return c},lerp:function(a,b,c,g){g||(g=a);g[0]=a[0]+c*(b[0]-a[0]);g[1]=a[1]+c*(b[1]-a[1]);g[2]=a[2]+c*(b[2]-a[2]);return g},dist:function(a,b){var c=b[0]-a[0],g=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(c*c+g*g+a*a)},dist2:function(a,b){var c=b[0]-a[0],g=b[1]-a[1];a=b[2]-a[2];return c*c+g*g+a*a}},u=null,r=new l(4);p.unproject=function(a,b,c,g,d){d||(d=a);u||(u=x.create());var f=u;r[0]=2*(a[0]-g[0])/g[2]-1;r[1]=2*(a[1]-g[1])/g[3]-1;r[2]=2*a[2]-1;r[3]=1;x.multiply(c,b,f);if(!x.inverse(f))return null;
x.multiplyVec4(f,r);if(0===r[3])return null;d[0]=r[0]/r[3];d[1]=r[1]/r[3];d[2]=r[2]/r[3];return d};var z=p.createFrom(1,0,0),q=p.createFrom(0,1,0),d=p.createFrom(0,0,1);p.rotationTo=function(a,b,c){c||(c=t.create());var g=p.dot(a,b),f=p.create();if(1<=g)t.set(B,c);else if(-.999999>g)p.cross(z,a,f),1E-6>f.length&&p.cross(q,a,f),1E-6>f.length&&p.cross(d,a,f),p.normalize(f),t.fromAxisAngle(f,Math.PI,c);else{var g=Math.sqrt(2*(1+g)),e=1/g;p.cross(a,b,f);c[0]=f[0]*e;c[1]=f[1]*e;c[2]=f[2]*e;c[3]=.5*g;t.normalize(c)}1<
c[3]?c[3]=1:-1>c[3]&&(c[3]=-1);return c};var k=p.create(),f=p.create();p.project=function(a,b,c,g){g||(g=a);p.direction(b,c,k);p.subtract(a,b,f);a=p.dot(k,f);p.scale(k,a,g);p.add(g,b,g)};p.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var v={create:function(a){var b=new l(9);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]):b[0]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=0;return b},createFrom:function(a,b,c,g,d,f,e,k,h){var n=new l(9);n[0]=a;n[1]=
b;n[2]=c;n[3]=g;n[4]=d;n[5]=f;n[6]=e;n[7]=k;n[8]=h;return n},determinant:function(a){var b=a[3],c=a[4],g=a[5],d=a[6],f=a[7],e=a[8];return a[0]*(e*c-g*f)+a[1]*(-e*b+g*d)+a[2]*(f*b-c*d)},inverse:function(a,b){var c=a[0],g=a[1],d=a[2],f=a[3],e=a[4],k=a[5],h=a[6],l=a[7];a=a[8];var q=a*e-k*l,p=-a*f+k*h,m=l*f-e*h,r=c*q+g*p+d*m;if(!r)return null;r=1/r;b||(b=v.create());b[0]=q*r;b[1]=(-a*g+d*l)*r;b[2]=(k*g-d*e)*r;b[3]=p*r;b[4]=(a*c-d*h)*r;b[5]=(-k*c+d*f)*r;b[6]=m*r;b[7]=(-l*c+g*h)*r;b[8]=(e*c-g*f)*r;return b},
multiply:function(a,b,c){c||(c=a);var g=a[0],d=a[1],f=a[2],e=a[3],k=a[4],h=a[5],l=a[6],q=a[7];a=a[8];var p=b[0],m=b[1],r=b[2],v=b[3],u=b[4],t=b[5],z=b[6],x=b[7];b=b[8];c[0]=p*g+m*e+r*l;c[1]=p*d+m*k+r*q;c[2]=p*f+m*h+r*a;c[3]=v*g+u*e+t*l;c[4]=v*d+u*k+t*q;c[5]=v*f+u*h+t*a;c[6]=z*g+x*e+b*l;c[7]=z*d+x*k+b*q;c[8]=z*f+x*h+b*a;return c},multiplyVec2:function(a,b,c){c||(c=b);var g=b[0];b=b[1];c[0]=g*a[0]+b*a[3]+a[6];c[1]=g*a[1]+b*a[4]+a[7];return c},multiplyVec3:function(a,b,c){c||(c=b);var g=b[0],d=b[1];
b=b[2];c[0]=g*a[0]+d*a[3]+b*a[6];c[1]=g*a[1]+d*a[4]+b*a[7];c[2]=g*a[2]+d*a[5]+b*a[8];return c},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},identity:function(a){a||(a=v.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(!b||a===b){b=a[1];var c=a[2],g=a[5];a[1]=a[3];a[2]=a[6];a[3]=b;a[5]=a[7];a[6]=c;a[7]=g;return a}b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=
a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return b},toMat4:function(a,b){b||(b=x.create());b[15]=1;b[14]=0;b[13]=0;b[12]=0;b[11]=0;b[10]=a[8];b[9]=a[7];b[8]=a[6];b[7]=0;b[6]=a[5];b[5]=a[4];b[4]=a[3];b[3]=0;b[2]=a[2];b[1]=a[1];b[0]=a[0];return b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},x={create:function(a){var b=new l(16);4===arguments.length?(b[0]=arguments[0],b[1]=arguments[1],b[2]=arguments[2],b[3]=arguments[3],b[4]=arguments[4],
b[5]=arguments[5],b[6]=arguments[6],b[7]=arguments[7],b[8]=arguments[8],b[9]=arguments[9],b[10]=arguments[10],b[11]=arguments[11],b[12]=arguments[12],b[13]=arguments[13],b[14]=arguments[14],b[15]=arguments[15]):a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b},createFrom:function(a,b,c,g,d,f,e,k,h,q,p,m,r,v,u,t){var n=new l(16);n[0]=a;n[1]=b;n[2]=c;n[3]=g;n[4]=d;
n[5]=f;n[6]=e;n[7]=k;n[8]=h;n[9]=q;n[10]=p;n[11]=m;n[12]=r;n[13]=v;n[14]=u;n[15]=t;return n},createFromMatrixRowMajor:function(a){var b=new l(16);b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},createFromMatrix:function(a){var b=new l(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=
a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},setRowMajor:function(a,b){b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},identity:function(a){a||(a=x.create());a[0]=
1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(!b||a===b){b=a[1];var c=a[2],g=a[3],d=a[6],f=a[7],e=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=b;a[6]=a[9];a[7]=a[13];a[8]=c;a[9]=d;a[11]=a[14];a[12]=g;a[13]=f;a[14]=e;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b},
determinant:function(a){var b=a[0],c=a[1],g=a[2],d=a[3],f=a[4],e=a[5],k=a[6],h=a[7],l=a[8],q=a[9],p=a[10],m=a[11],r=a[12],v=a[13],u=a[14];a=a[15];return r*q*k*d-l*v*k*d-r*e*p*d+f*v*p*d+l*e*u*d-f*q*u*d-r*q*g*h+l*v*g*h+r*c*p*h-b*v*p*h-l*c*u*h+b*q*u*h+r*e*g*m-f*v*g*m-r*c*k*m+b*v*k*m+f*c*u*m-b*e*u*m-l*e*g*a+f*q*g*a+l*c*k*a-b*q*k*a-f*c*p*a+b*e*p*a},inverse:function(a,b){b||(b=a);var c=a[0],g=a[1],d=a[2],f=a[3],e=a[4],k=a[5],h=a[6],l=a[7],q=a[8],p=a[9],m=a[10],r=a[11],v=a[12],u=a[13],t=a[14];a=a[15];var z=
c*k-g*e,x=c*h-d*e,B=c*l-f*e,A=g*h-d*k,y=g*l-f*k,K=d*l-f*h,F=q*u-p*v,D=q*t-m*v,E=q*a-r*v,G=p*t-m*u,I=p*a-r*u,J=m*a-r*t,C=z*J-x*I+B*G+A*E-y*D+K*F;if(!C)return null;C=1/C;b[0]=(k*J-h*I+l*G)*C;b[1]=(-g*J+d*I-f*G)*C;b[2]=(u*K-t*y+a*A)*C;b[3]=(-p*K+m*y-r*A)*C;b[4]=(-e*J+h*E-l*D)*C;b[5]=(c*J-d*E+f*D)*C;b[6]=(-v*K+t*B-a*x)*C;b[7]=(q*K-m*B+r*x)*C;b[8]=(e*I-k*E+l*F)*C;b[9]=(-c*I+g*E-f*F)*C;b[10]=(v*y-u*B+a*z)*C;b[11]=(-q*y+p*B-r*z)*C;b[12]=(-e*G+k*D-h*F)*C;b[13]=(c*G-g*D+d*F)*C;b[14]=(-v*A+u*x-t*z)*C;b[15]=
(q*A-p*x+m*z)*C;return b},toRotationMat:function(a,b){b||(b=x.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},toMat3:function(a,b){b||(b=v.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b},toInverseMat3:function(a,b){var c=a[0],g=a[1],d=a[2],f=a[4],e=a[5],k=a[6],h=a[8],l=a[9];a=a[10];var q=a*e-k*l,p=-a*f+k*h,m=
l*f-e*h,r=c*q+g*p+d*m;if(!r)return null;r=1/r;b||(b=v.create());b[0]=q*r;b[1]=(-a*g+d*l)*r;b[2]=(k*g-d*e)*r;b[3]=p*r;b[4]=(a*c-d*h)*r;b[5]=(-k*c+d*f)*r;b[6]=m*r;b[7]=(-l*c+g*h)*r;b[8]=(e*c-g*f)*r;return b},multiply:function(a,b,c){c||(c=a);var g=a[0],d=a[1],f=a[2],e=a[3],k=a[4],h=a[5],l=a[6],q=a[7],p=a[8],m=a[9],r=a[10],v=a[11],u=a[12],t=a[13],z=a[14];a=a[15];var x=b[0],B=b[1],A=b[2],y=b[3],K=b[4],F=b[5],D=b[6],E=b[7],G=b[8],I=b[9],J=b[10],C=b[11],S=b[12],T=b[13],U=b[14];b=b[15];c[0]=x*g+B*k+A*p+
y*u;c[1]=x*d+B*h+A*m+y*t;c[2]=x*f+B*l+A*r+y*z;c[3]=x*e+B*q+A*v+y*a;c[4]=K*g+F*k+D*p+E*u;c[5]=K*d+F*h+D*m+E*t;c[6]=K*f+F*l+D*r+E*z;c[7]=K*e+F*q+D*v+E*a;c[8]=G*g+I*k+J*p+C*u;c[9]=G*d+I*h+J*m+C*t;c[10]=G*f+I*l+J*r+C*z;c[11]=G*e+I*q+J*v+C*a;c[12]=S*g+T*k+U*p+b*u;c[13]=S*d+T*h+U*m+b*t;c[14]=S*f+T*l+U*r+b*z;c[15]=S*e+T*q+U*v+b*a;return c},multiplyVec3:function(a,b,c){c||(c=b);var g=b[0],d=b[1];b=b[2];c[0]=a[0]*g+a[4]*d+a[8]*b+a[12];c[1]=a[1]*g+a[5]*d+a[9]*b+a[13];c[2]=a[2]*g+a[6]*d+a[10]*b+a[14];return c},
multiplyVec4:function(a,b,c){c||(c=b);var g=b[0],d=b[1],f=b[2];b=b[3];c[0]=a[0]*g+a[4]*d+a[8]*f+a[12]*b;c[1]=a[1]*g+a[5]*d+a[9]*f+a[13]*b;c[2]=a[2]*g+a[6]*d+a[10]*f+a[14]*b;c[3]=a[3]*g+a[7]*d+a[11]*f+a[15]*b;return c},translate:function(a,b,c){var g=b[0],d=b[1];b=b[2];var f,e,k,h,l,q,p,m,r,v,u,t;if(!c||a===c)return a[12]=a[0]*g+a[4]*d+a[8]*b+a[12],a[13]=a[1]*g+a[5]*d+a[9]*b+a[13],a[14]=a[2]*g+a[6]*d+a[10]*b+a[14],a[15]=a[3]*g+a[7]*d+a[11]*b+a[15],a;f=a[0];e=a[1];k=a[2];h=a[3];l=a[4];q=a[5];p=a[6];
m=a[7];r=a[8];v=a[9];u=a[10];t=a[11];c[0]=f;c[1]=e;c[2]=k;c[3]=h;c[4]=l;c[5]=q;c[6]=p;c[7]=m;c[8]=r;c[9]=v;c[10]=u;c[11]=t;c[12]=f*g+l*d+r*b+a[12];c[13]=e*g+q*d+v*b+a[13];c[14]=k*g+p*d+u*b+a[14];c[15]=h*g+m*d+t*b+a[15];return c},scale:function(a,b,c){var g=b[0],d=b[1];b=b[2];if(!c||a===c)return a[0]*=g,a[1]*=g,a[2]*=g,a[3]*=g,a[4]*=d,a[5]*=d,a[6]*=d,a[7]*=d,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;c[0]=a[0]*g;c[1]=a[1]*g;c[2]=a[2]*g;c[3]=a[3]*g;c[4]=a[4]*d;c[5]=a[5]*d;c[6]=a[6]*d;c[7]=a[7]*d;c[8]=a[8]*
b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},maxScale:function(a){return Math.max(Math.max(Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))},rotate:function(a,b,c,g){var d=c[0],f=c[1];c=c[2];var e=Math.sqrt(d*d+f*f+c*c),k,h,l,q,p,m,r,v,u,t,z,x,B,A,y,K,F,D,E,G;if(!e)return null;1!==e&&(e=1/e,d*=e,f*=e,c*=e);k=Math.sin(b);h=Math.cos(b);l=1-h;b=a[0];e=a[1];q=a[2];p=a[3];
m=a[4];r=a[5];v=a[6];u=a[7];t=a[8];z=a[9];x=a[10];B=a[11];A=d*d*l+h;y=f*d*l+c*k;K=c*d*l-f*k;F=d*f*l-c*k;D=f*f*l+h;E=c*f*l+d*k;G=d*c*l+f*k;d=f*c*l-d*k;f=c*c*l+h;g?a!==g&&(g[12]=a[12],g[13]=a[13],g[14]=a[14],g[15]=a[15]):g=a;g[0]=b*A+m*y+t*K;g[1]=e*A+r*y+z*K;g[2]=q*A+v*y+x*K;g[3]=p*A+u*y+B*K;g[4]=b*F+m*D+t*E;g[5]=e*F+r*D+z*E;g[6]=q*F+v*D+x*E;g[7]=p*F+u*D+B*E;g[8]=b*G+m*d+t*f;g[9]=e*G+r*d+z*f;g[10]=q*G+v*d+x*f;g[11]=p*G+u*d+B*f;return g},rotateX:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var f=
a[4],e=a[5],k=a[6],h=a[7],l=a[8],q=a[9],p=a[10],m=a[11];c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[4]=f*b+l*d;c[5]=e*b+q*d;c[6]=k*b+p*d;c[7]=h*b+m*d;c[8]=f*-d+l*b;c[9]=e*-d+q*b;c[10]=k*-d+p*b;c[11]=h*-d+m*b;return c},rotateY:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var f=a[0],e=a[1],k=a[2],h=a[3],l=a[8],q=a[9],p=a[10],m=a[11];c?a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=
f*b+l*-d;c[1]=e*b+q*-d;c[2]=k*b+p*-d;c[3]=h*b+m*-d;c[8]=f*d+l*b;c[9]=e*d+q*b;c[10]=k*d+p*b;c[11]=h*d+m*b;return c},rotateZ:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var f=a[0],e=a[1],k=a[2],h=a[3],l=a[4],q=a[5],p=a[6],m=a[7];c?a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=f*b+l*d;c[1]=e*b+q*d;c[2]=k*b+p*d;c[3]=h*b+m*d;c[4]=f*-d+l*b;c[5]=e*-d+q*b;c[6]=k*-d+p*b;c[7]=h*-d+m*b;return c},frustum:function(a,b,c,d,f,e,k){k||(k=x.create());
var g=b-a,n=d-c,h=e-f;k[0]=2*f/g;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=2*f/n;k[6]=0;k[7]=0;k[8]=(b+a)/g;k[9]=(d+c)/n;k[10]=-(e+f)/h;k[11]=-1;k[12]=0;k[13]=0;k[14]=-(e*f*2)/h;k[15]=0;return k},perspective:function(a,b,c,d,f){a=c*Math.tan(a*Math.PI/360);b*=a;return x.frustum(-b,b,-a,a,c,d,f)},ortho:function(a,b,c,d,f,e,k){k||(k=x.create());var g=b-a,n=d-c,h=e-f;k[0]=2/g;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=2/n;k[6]=0;k[7]=0;k[8]=0;k[9]=0;k[10]=-2/h;k[11]=0;k[12]=-(a+b)/g;k[13]=-(d+c)/n;k[14]=-(e+f)/h;k[15]=
1;return k},lookAt:function(a,b,c,d){d||(d=x.create());var g,f,e,k,h,l,q,p,m=a[0],r=a[1];a=a[2];e=c[0];k=c[1];f=c[2];q=b[0];c=b[1];g=b[2];if(m===q&&r===c&&a===g)return x.identity(d);b=m-q;c=r-c;q=a-g;p=1/Math.sqrt(b*b+c*c+q*q);b*=p;c*=p;q*=p;g=k*q-f*c;f=f*b-e*q;e=e*c-k*b;(p=Math.sqrt(g*g+f*f+e*e))?(p=1/p,g*=p,f*=p,e*=p):e=f=g=0;k=c*e-q*f;h=q*g-b*e;l=b*f-c*g;(p=Math.sqrt(k*k+h*h+l*l))?(p=1/p,k*=p,h*=p,l*=p):l=h=k=0;d[0]=g;d[1]=k;d[2]=b;d[3]=0;d[4]=f;d[5]=h;d[6]=c;d[7]=0;d[8]=e;d[9]=l;d[10]=q;d[11]=
0;d[12]=-(g*m+f*r+e*a);d[13]=-(k*m+h*r+l*a);d[14]=-(b*m+c*r+q*a);d[15]=1;return d},fromRotationTranslation:function(a,b,c){c||(c=x.create());var d=a[0],f=a[1],e=a[2],k=a[3],h=d+d,l=f+f,q=e+e;a=d*h;var p=d*l,d=d*q,m=f*l,f=f*q,e=e*q,h=k*h,l=k*l,k=k*q;c[0]=1-(m+e);c[1]=p+k;c[2]=d-l;c[3]=0;c[4]=p-k;c[5]=1-(a+e);c[6]=f+h;c[7]=0;c[8]=d+l;c[9]=f-h;c[10]=1-(a+m);c[11]=0;c[12]=b[0];c[13]=b[1];c[14]=b[2];c[15]=1;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+
a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},t={create:function(a){var b=new l(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,d){var g=new l(4);g[0]=a;g[1]=b;g[2]=c;g[3]=d;return g},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=t.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}},B=t.identity();t.calculateW=function(a,b){var c=a[0],
d=a[1],f=a[2];if(!b||a===b)return a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-f*f)),a;b[0]=c;b[1]=d;b[2]=f;b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-f*f));return b};t.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};t.inverse=function(a,b){var c=a[0],d=a[1],f=a[2],e=a[3],c=(c=c*c+d*d+f*f+e*e)?1/c:0;if(!b||a===b)return a[0]*=-c,a[1]*=-c,a[2]*=-c,a[3]*=c,a;b[0]=-a[0]*c;b[1]=-a[1]*c;b[2]=-a[2]*c;b[3]=a[3]*c;return b};t.conjugate=function(a,b){if(!b||a===b)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;b[0]=-a[0];
b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};t.length=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)};t.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],f=a[2];a=a[3];var e=Math.sqrt(c*c+d*d+f*f+a*a);if(0===e)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;e=1/e;b[0]=c*e;b[1]=d*e;b[2]=f*e;b[3]=a*e;return b};t.add=function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};t.multiply=function(a,
b,c){c||(c=a);var d=a[0],f=a[1],e=a[2];a=a[3];var k=b[0],h=b[1],l=b[2];b=b[3];c[0]=d*b+a*k+f*l-e*h;c[1]=f*b+a*h+e*k-d*l;c[2]=e*b+a*l+d*h-f*k;c[3]=a*b-d*k-f*h-e*l;return c};t.multiplyVec3=function(a,b,c){c||(c=b);var d=b[0],f=b[1],e=b[2];b=a[0];var k=a[1],h=a[2];a=a[3];var l=a*d+k*e-h*f,q=a*f+h*d-b*e,p=a*e+b*f-k*d,d=-b*d-k*f-h*e;c[0]=l*a+d*-b+q*-h-p*-k;c[1]=q*a+d*-k+p*-b-l*-h;c[2]=p*a+d*-h+l*-k-q*-b;return c};t.scale=function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b,a;c[0]=a[0]*b;
c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};t.toMat3=function(a,b){b||(b=v.create());var c=a[0],d=a[1],f=a[2],e=a[3],k=c+c,h=d+d,l=f+f;a=c*k;var q=c*h,c=c*l,p=d*h,d=d*l,f=f*l,k=e*k,h=e*h,e=e*l;b[0]=1-(p+f);b[1]=q+e;b[2]=c-h;b[3]=q-e;b[4]=1-(a+f);b[5]=d+k;b[6]=c+h;b[7]=d-k;b[8]=1-(a+p);return b};t.toMat4=function(a,b){b||(b=x.create());var c=a[0],d=a[1],f=a[2],e=a[3],k=c+c,h=d+d,l=f+f;a=c*k;var q=c*h,c=c*l,p=d*h,d=d*l,f=f*l,k=e*k,h=e*h,e=e*l;b[0]=1-(p+f);b[1]=q+e;b[2]=c-h;b[3]=0;b[4]=q-e;b[5]=1-
(a+f);b[6]=d+k;b[7]=0;b[8]=c+h;b[9]=d-k;b[10]=1-(a+p);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};t.slerp=function(a,b,c,d){d||(d=a);var f=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3],g,e;if(1<=Math.abs(f))return d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d;g=Math.acos(f);e=Math.sqrt(1-f*f);if(.001>Math.abs(e))return d[0]=.5*a[0]+.5*b[0],d[1]=.5*a[1]+.5*b[1],d[2]=.5*a[2]+.5*b[2],d[3]=.5*a[3]+.5*b[3],d;f=Math.sin((1-c)*g)/e;c=Math.sin(c*g)/e;d[0]=a[0]*f+b[0]*c;d[1]=a[1]*f+b[1]*c;d[2]=a[2]*f+
b[2]*c;d[3]=a[3]*f+b[3]*c;return d};t.fromRotationMatrix=function(a,b){b||(b=t.create());var c=a[0]+a[4]+a[8],d;if(0<c)d=Math.sqrt(c+1),b[3]=.5*d,d=.5/d,b[0]=(a[7]-a[5])*d,b[1]=(a[2]-a[6])*d,b[2]=(a[3]-a[1])*d;else{d=t.fromRotationMatrix.s_iNext=t.fromRotationMatrix.s_iNext||[1,2,0];c=0;a[4]>a[0]&&(c=1);a[8]>a[3*c+c]&&(c=2);var f=d[c],e=d[f];d=Math.sqrt(a[3*c+c]-a[3*f+f]-a[3*e+e]+1);b[c]=.5*d;d=.5/d;b[3]=(a[3*e+f]-a[3*f+e])*d;b[f]=(a[3*f+c]+a[3*c+f])*d;b[e]=(a[3*e+c]+a[3*c+e])*d}return b};v.toQuat4=
t.fromRotationMatrix;(function(){var a=v.create();t.fromAxes=function(b,c,d,f){a[0]=c[0];a[3]=c[1];a[6]=c[2];a[1]=d[0];a[4]=d[1];a[7]=d[2];a[2]=b[0];a[5]=b[1];a[8]=b[2];return t.fromRotationMatrix(a,f)}})();t.identity=function(a){a||(a=t.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};t.fromAngleAxis=function(a,b,c){c||(c=t.create());a*=.5;var d=Math.sin(a);c[3]=Math.cos(a);c[0]=d*b[0];c[1]=d*b[1];c[2]=d*b[2];return c};t.toAngleAxis=function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<c?(b[3]=
2*Math.acos(a[3]),c=h.invsqrt(c),b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};t.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var A={create:function(a){var b=new l(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,d){var f=new l(4);f[0]=a;f[1]=b;f[2]=c;f[3]=d;return f},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=A.create());a[0]=1;a[1]=0;a[2]=
0;a[3]=1;return a},transpose:function(a,b){if(!b||a===b)return b=a[1],a[1]=a[2],a[2]=b,a;b[0]=a[0];b[1]=a[2];b[2]=a[1];b[3]=a[3];return b},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,b){b||(b=a);var c=a[0],d=a[1],f=a[2];a=a[3];var e=c*a-f*d;if(!e)return null;e=1/e;b[0]=a*e;b[1]=-d*e;b[2]=-f*e;b[3]=c*e;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],f=a[1],e=a[2];a=a[3];c[0]=d*b[0]+f*b[2];c[1]=d*b[1]+f*b[3];c[2]=e*b[0]+a*b[2];c[3]=e*b[1]+a*b[3];return c},rotate:function(a,
b,c){c||(c=a);var d=a[0],f=a[1],e=a[2];a=a[3];var k=Math.sin(b);b=Math.cos(b);c[0]=d*b+f*k;c[1]=d*-k+f*b;c[2]=e*b+a*k;c[3]=e*-k+a*b;return c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];b=b[1];c[0]=d*a[0]+b*a[1];c[1]=d*a[2]+b*a[3];return c},scale:function(a,b,c){c||(c=a);var d=a[1],f=a[2],e=a[3],k=b[0];b=b[1];c[0]=a[0]*k;c[1]=d*b;c[2]=f*k;c[3]=e*b;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};m=m?"":"d";e["glMath"+m]=h;e["vec2"+m]={create:function(a){var b=new l(2);
a?(b[0]=a[0],b[1]=a[1]):(b[0]=0,b[1]=0);return b},createFrom:function(a,b){var c=new l(2);c[0]=a;c[1]=b;return c},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];return c},subtract:function(a,b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;return c},dist:function(a,b){var c=b[0]-a[0];
a=b[1]-a[1];return Math.sqrt(c*c+a*a)},dist2:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a},set:function(a,b){b[0]=a[0];b[1]=a[1];return b},set2:function(a,b,c){c[0]=a;c[1]=b;return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];return b},normalize:function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];0<c?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0;return b},cross:function(a,b,c){a=a[0]*b[1]-a[1]*b[0];if(!c)return a;c[0]=c[1]=0;c[2]=a;return c},length:function(a){var b=a[0];
a=a[1];return Math.sqrt(b*b+a*a)},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0];a=a[1]-b[1];b=d*d+a*a;if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/Math.sqrt(b);c[0]=d*b;c[1]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);return d},str:function(a){return"["+a[0]+", "+a[1]+"]"}};e["vec3"+m]=p;e["vec4"+m]={create:function(a){var b=new l(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):(b[0]=0,b[1]=0,b[2]=0,b[3]=
0);return b},createFrom:function(a,b,c,d){var f=new l(4);f[0]=a;f[1]=b;f[2]=c;f[3]=d;return f},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c},subtract:function(a,b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];c[3]=a[3]*b[3];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];c[3]=a[3]/b[3];return c},
scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},set4:function(a,b,c,d,f){f[0]=a;f[1]=b;f[2]=c;f[3]=d;return f},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);d[3]=a[3]+c*(b[3]-a[3]);return d},
str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};e["mat2"+m]=A;e["mat3"+m]=v;e["mat4"+m]=x;e["quat4"+m]=t});return y})},"esri/views/3d/support/buffer/typedArrayUtil":function(){define(["require","exports"],function(y,e){Object.defineProperty(e,"__esModule",{value:!0});e.forEach=function(e,h){if(e.forEach)e.forEach(h);else for(var l=0;l<e.length;l++)h(e[l],l,e)};e.slice=function(e,h,l){if(e.slice)return e.slice(h,l);void 0===h?h=0:(0>h&&(h+=e.length),h=Math.min(e.length,Math.max(0,
h)));void 0===l?l=e.length:(0>l&&(l+=e.length),l=Math.min(e.length,Math.max(0,l)));l=Math.max(0,l-h);for(var p=new e.constructor(l),m=0;m<l;m++)p[m]=e[h+m];return p}})},"esri/views/3d/support/buffer/workerHelper":function(){define(["require","exports","../../../../core/tsSupport/assignHelper","./BufferView","./InterleavedLayout"],function(y,e,m,h,l){function p(e){var h=[];e.fields.forEach(function(d,e){var f=d.constructor;d=m({},d,{constructor:f.ElementType+"_"+f.ElementCount});h.push([e,d])});return{stride:e.stride,
fields:h,fieldNames:e.fieldNames}}function u(e){var h=l.newLayout();h.stride=e.stride;h.fieldNames=e.fieldNames;e.fields.forEach(function(d){return h.fields.set(d[0],m({},d[1],{constructor:r.get(d[1].constructor)}))});return h}Object.defineProperty(e,"__esModule",{value:!0});e.packInterleavedBuffer=function(e,h){h.push(e.buffer);return{buffer:e.buffer,layout:p(e.layout)}};e.unpackInterleavedBuffer=function(e){return u(e.layout).createView(e.buffer)};e.packLayout=p;e.unpackLayout=u;y=[h.BufferViewFloat,
h.BufferViewVec2f,h.BufferViewVec3f,h.BufferViewVec4f,h.BufferViewMat4f,h.BufferViewFloat64,h.BufferViewVec2f64,h.BufferViewVec3f64,h.BufferViewVec4f64,h.BufferViewUint8,h.BufferViewVec2u8,h.BufferViewVec3u8,h.BufferViewVec4u8,h.BufferViewUint16,h.BufferViewVec2u16,h.BufferViewVec3u16,h.BufferViewVec4u16,h.BufferViewUint32,h.BufferViewVec2u32,h.BufferViewVec3u32,h.BufferViewVec4u32,h.BufferViewInt8,h.BufferViewVec2i8,h.BufferViewVec3i8,h.BufferViewVec4i8,h.BufferViewInt16,h.BufferViewVec2i16,h.BufferViewVec3i16,
h.BufferViewVec4i16,h.BufferViewInt32,h.BufferViewVec2i32,h.BufferViewVec3i32,h.BufferViewVec4i32];var r=new Map;y.forEach(function(e){return r.set(e.ElementType+"_"+e.ElementCount,e)})})},"esri/views/3d/support/buffer/BufferView":function(){define("require exports ../../../../core/tsSupport/extendsHelper ./internals/Mat3 ./internals/Mat4 ./internals/Single ./internals/Vec2 ./internals/Vec3 ./internals/Vec4".split(" "),function(y,e,m,h,l,p,u,r,z){Object.defineProperty(e,"__esModule",{value:!0});y=
function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Float32Array,d,f,h)||this}m(d,e);d.ElementType="f32";return d}(p.BufferViewSingle);e.BufferViewFloat=y;y=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Float32Array,d,f,h)||this}m(d,e);d.ElementType="f32";return d}(u.BufferViewVec2);e.BufferViewVec2f=y;y=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Float32Array,d,f,h)||this}m(d,e);d.ElementType="f32";return d}(r.BufferViewVec3);e.BufferViewVec3f=
y;y=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Float32Array,d,f,h)||this}m(d,e);d.ElementType="f32";return d}(z.BufferViewVec4);e.BufferViewVec4f=y;h=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Float32Array,d,f,h)||this}m(d,e);d.ElementType="f32";return d}(h.BufferViewMat3);e.BufferViewMat3f=h;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Float32Array,d,f,h)||this}m(d,e);d.ElementType="f32";return d}(l.BufferViewMat4);e.BufferViewMat4f=
l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Float64Array,d,f,h)||this}m(d,e);d.ElementType="f64";return d}(p.BufferViewSingle);e.BufferViewFloat64=l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Float64Array,d,f,h)||this}m(d,e);d.ElementType="f64";return d}(u.BufferViewVec2);e.BufferViewVec2f64=l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Float64Array,d,f,h)||this}m(d,e);d.ElementType="f64";return d}(r.BufferViewVec3);e.BufferViewVec3f64=
l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Float64Array,d,f,h)||this}m(d,e);d.ElementType="f64";return d}(z.BufferViewVec4);e.BufferViewVec4f64=l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Uint8Array,d,f,h)||this}m(d,e);d.ElementType="u8";return d}(p.BufferViewSingle);e.BufferViewUint8=l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Uint8Array,d,f,h)||this}m(d,e);d.ElementType="u8";return d}(u.BufferViewVec2);e.BufferViewVec2u8=
l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Uint8Array,d,f,h)||this}m(d,e);d.ElementType="u8";return d}(r.BufferViewVec3);e.BufferViewVec3u8=l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Uint8Array,d,f,h)||this}m(d,e);d.ElementType="u8";return d}(z.BufferViewVec4);e.BufferViewVec4u8=l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Uint16Array,d,f,h)||this}m(d,e);d.ElementType="u16";return d}(p.BufferViewSingle);e.BufferViewUint16=
l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Uint16Array,d,f,h)||this}m(d,e);d.ElementType="u16";return d}(u.BufferViewVec2);e.BufferViewVec2u16=l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Uint16Array,d,f,h)||this}m(d,e);d.ElementType="u16";return d}(r.BufferViewVec3);e.BufferViewVec3u16=l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Uint16Array,d,f,h)||this}m(d,e);d.ElementType="u16";return d}(z.BufferViewVec4);e.BufferViewVec4u16=
l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Uint32Array,d,f,h)||this}m(d,e);d.ElementType="u32";return d}(p.BufferViewSingle);e.BufferViewUint32=l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Uint32Array,d,f,h)||this}m(d,e);d.ElementType="u32";return d}(u.BufferViewVec2);e.BufferViewVec2u32=l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Uint32Array,d,f,h)||this}m(d,e);d.ElementType="u32";return d}(r.BufferViewVec3);e.BufferViewVec3u32=
l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Uint32Array,d,f,h)||this}m(d,e);d.ElementType="u32";return d}(z.BufferViewVec4);e.BufferViewVec4u32=l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Int8Array,d,f,h)||this}m(d,e);d.ElementType="i8";return d}(p.BufferViewSingle);e.BufferViewInt8=l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Int8Array,d,f,h)||this}m(d,e);d.ElementType="i8";return d}(u.BufferViewVec2);e.BufferViewVec2i8=
l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Int8Array,d,f,h)||this}m(d,e);d.ElementType="i8";return d}(r.BufferViewVec3);e.BufferViewVec3i8=l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Int8Array,d,f,h)||this}m(d,e);d.ElementType="i8";return d}(z.BufferViewVec4);e.BufferViewVec4i8=l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Int16Array,d,f,h)||this}m(d,e);d.ElementType="i16";return d}(p.BufferViewSingle);e.BufferViewInt16=
l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Int16Array,d,f,h)||this}m(d,e);d.ElementType="i16";return d}(u.BufferViewVec2);e.BufferViewVec2i16=l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Int16Array,d,f,h)||this}m(d,e);d.ElementType="i16";return d}(r.BufferViewVec3);e.BufferViewVec3i16=l;l=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Int16Array,d,f,h)||this}m(d,e);d.ElementType="i16";return d}(z.BufferViewVec4);e.BufferViewVec4i16=
l;p=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Int32Array,d,f,h)||this}m(d,e);d.ElementType="i32";return d}(p.BufferViewSingle);e.BufferViewInt32=p;u=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Int32Array,d,f,h)||this}m(d,e);d.ElementType="i32";return d}(u.BufferViewVec2);e.BufferViewVec2i32=u;r=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Int32Array,d,f,h)||this}m(d,e);d.ElementType="i32";return d}(r.BufferViewVec3);e.BufferViewVec3i32=
r;z=function(e){function d(d,f,h){void 0===f&&(f=0);return e.call(this,Int32Array,d,f,h)||this}m(d,e);d.ElementType="i32";return d}(z.BufferViewVec4);e.BufferViewVec4i32=z})},"esri/views/3d/support/buffer/internals/Mat3":function(){define(["require","exports"],function(y,e){Object.defineProperty(e,"__esModule",{value:!0});y=function(){function e(e,l,p,m){void 0===p&&(p=0);e=this.TypedArrayConstructor=e;void 0===m&&(m=9*e.BYTES_PER_ELEMENT);this.data=new e(l,0===l.byteLength?0:p);this.elementStride=
m/e.BYTES_PER_ELEMENT}e.prototype.getMat=function(e,l){e*=this.elementStride;for(var h=0;9>h;h++)l[h]=this.data[e+h];return l};e.prototype.setMat=function(e,l){e*=this.elementStride;for(var h=0;9>h;h++)this.data[e+h]=l[h]};e.prototype.get=function(e,l){return this.data[e*this.elementStride+l]};e.prototype.set=function(e,l,p){this.data[e*this.elementStride+l]=p};Object.defineProperty(e.prototype,"count",{get:function(){return Math.ceil(this.data.length/this.elementStride)},enumerable:!0,configurable:!0});
Object.defineProperty(e.prototype,"buffer",{get:function(){return this.data.buffer},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"typedBuffer",{get:function(){return this.data},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"stride",{get:function(){return this.elementStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT},enumerable:!0,configurable:!0});e.ElementCount=9;return e}();e.BufferViewMat3=y})},"esri/views/3d/support/buffer/internals/Mat4":function(){define(["require",
"exports"],function(y,e){Object.defineProperty(e,"__esModule",{value:!0});y=function(){function e(e,l,p,m){void 0===p&&(p=0);e=this.TypedArrayConstructor=e;void 0===m&&(m=16*e.BYTES_PER_ELEMENT);this.data=new e(l,0===l.byteLength?0:p);this.elementStride=m/e.BYTES_PER_ELEMENT}e.prototype.getMat=function(e,l){e*=this.elementStride;for(var h=0;16>h;h++)l[h]=this.data[e+h];return l};e.prototype.setMat=function(e,l){e*=this.elementStride;for(var h=0;16>h;h++)this.data[e+h]=l[h]};e.prototype.get=function(e,
l){return this.data[e*this.elementStride+l]};e.prototype.set=function(e,l,p){this.data[e*this.elementStride+l]=p};Object.defineProperty(e.prototype,"count",{get:function(){return Math.ceil(this.data.length/this.elementStride)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"buffer",{get:function(){return this.data.buffer},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"typedBuffer",{get:function(){return this.data},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,
"stride",{get:function(){return this.elementStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT},enumerable:!0,configurable:!0});e.ElementCount=16;return e}();e.BufferViewMat4=y})},"esri/views/3d/support/buffer/internals/Single":function(){define(["require","exports"],function(y,e){Object.defineProperty(e,"__esModule",{value:!0});y=function(){function e(e,l,p,m){void 0===p&&(p=0);e=this.TypedArrayConstructor=e;void 0===m&&(m=e.BYTES_PER_ELEMENT);this.data=new e(l,0===l.byteLength?0:p);this.elementStride=
m/e.BYTES_PER_ELEMENT}e.prototype.get=function(e){return this.data[e*this.elementStride]};e.prototype.set=function(e,l){this.data[e*this.elementStride]=l};Object.defineProperty(e.prototype,"count",{get:function(){return Math.ceil(this.data.length/this.elementStride)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"buffer",{get:function(){return this.data.buffer},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"typedBuffer",{get:function(){return this.data},enumerable:!0,
configurable:!0});Object.defineProperty(e.prototype,"stride",{get:function(){return this.elementStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT},enumerable:!0,configurable:!0});e.ElementCount=1;return e}();e.BufferViewSingle=y})},"esri/views/3d/support/buffer/internals/Vec2":function(){define(["require","exports","../../../lib/glMatrix"],function(y,e,m){Object.defineProperty(e,"__esModule",{value:!0});y=function(){function e(e,h,m,r){void 0===m&&(m=0);e=this.TypedArrayConstructor=e;void 0===r&&
(r=2*e.BYTES_PER_ELEMENT);this.data=new e(h,0===h.byteLength?0:m);this.elementStride=r/e.BYTES_PER_ELEMENT}e.prototype.getVec=function(e,h){return m.vec2d.set2(this.data[e*this.elementStride],this.data[e*this.elementStride+1],h)};e.prototype.setVec=function(e,h){this.data[e*this.elementStride]=h[0];this.data[e*this.elementStride+1]=h[1]};e.prototype.get=function(e,h){return this.data[e*this.elementStride+h]};e.prototype.set=function(e,h,m){this.data[e*this.elementStride+h]=m};Object.defineProperty(e.prototype,
"count",{get:function(){return Math.ceil(this.data.length/this.elementStride)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"buffer",{get:function(){return this.data.buffer},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"typedBuffer",{get:function(){return this.data},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"stride",{get:function(){return this.elementStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT},enumerable:!0,configurable:!0});
e.ElementCount=2;return e}();e.BufferViewVec2=y})},"esri/views/3d/support/buffer/internals/Vec3":function(){define(["require","exports","../../../lib/glMatrix"],function(y,e,m){Object.defineProperty(e,"__esModule",{value:!0});y=function(){function e(e,h,m,r){void 0===m&&(m=0);e=this.TypedArrayConstructor=e;void 0===r&&(r=3*e.BYTES_PER_ELEMENT);this.data=new e(h,0===h.byteLength?0:m);this.elementStride=r/e.BYTES_PER_ELEMENT}e.prototype.getVec=function(e,h){return m.vec3d.set3(this.data[e*this.elementStride],
this.data[e*this.elementStride+1],this.data[e*this.elementStride+2],h)};e.prototype.setVec=function(e,h){this.data[e*this.elementStride]=h[0];this.data[e*this.elementStride+1]=h[1];this.data[e*this.elementStride+2]=h[2]};e.prototype.get=function(e,h){return this.data[e*this.elementStride+h]};e.prototype.set=function(e,h,m){this.data[e*this.elementStride+h]=m};Object.defineProperty(e.prototype,"count",{get:function(){return Math.ceil(this.data.length/this.elementStride)},enumerable:!0,configurable:!0});
Object.defineProperty(e.prototype,"buffer",{get:function(){return this.data.buffer},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"typedBuffer",{get:function(){return this.data},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"stride",{get:function(){return this.elementStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT},enumerable:!0,configurable:!0});e.ElementCount=3;return e}();e.BufferViewVec3=y})},"esri/views/3d/support/buffer/internals/Vec4":function(){define(["require",
"exports","../../../lib/glMatrix"],function(y,e,m){Object.defineProperty(e,"__esModule",{value:!0});y=function(){function e(e,h,m,r){void 0===m&&(m=0);e=this.TypedArrayConstructor=e;void 0===r&&(r=4*e.BYTES_PER_ELEMENT);this.data=new e(h,0===h.byteLength?0:m);this.elementStride=r/e.BYTES_PER_ELEMENT}e.prototype.getVec=function(e,h){return m.vec4d.set4(this.data[e*this.elementStride],this.data[e*this.elementStride+1],this.data[e*this.elementStride+2],this.data[e*this.elementStride+3],h)};e.prototype.setVec=
function(e,h){this.data[e*this.elementStride]=h[0];this.data[e*this.elementStride+1]=h[1];this.data[e*this.elementStride+2]=h[2];this.data[e*this.elementStride+3]=h[3]};e.prototype.get=function(e,h){return this.data[e*this.elementStride+h]};e.prototype.set=function(e,h,m){this.data[e*this.elementStride+h]=m};Object.defineProperty(e.prototype,"count",{get:function(){return Math.ceil(this.data.length/this.elementStride)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"buffer",{get:function(){return this.data.buffer},
enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"typedBuffer",{get:function(){return this.data},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"stride",{get:function(){return this.elementStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT},enumerable:!0,configurable:!0});e.ElementCount=4;return e}();e.BufferViewVec4=y})},"esri/views/3d/support/buffer/InterleavedLayout":function(){define(["require","exports","./BufferView"],function(y,e,m){Object.defineProperty(e,
"__esModule",{value:!0});var h=function(){function e(e,h){this.layout=e;this.buffer="number"===typeof h?new ArrayBuffer(h*e.stride):h;h=0;for(var l=e.fieldNames;h<l.length;h++){var m=l[h],d=e.fields.get(m);this[m]=new d.constructor(this.buffer,d.offset,this.stride)}}Object.defineProperty(e.prototype,"stride",{get:function(){return this.layout.stride},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"count",{get:function(){return this.buffer.byteLength/this.stride},enumerable:!0,configurable:!0});
e.prototype.slice=function(h,l){return new e(this.layout,this.buffer.slice(h*this.stride,l*this.stride))};return e}(),l=function(){function e(){this.stride=0;this.fields=new Map;this.fieldNames=[]}e.prototype.vec2f=function(e,h){this.fields.set(e,{size:8,constructor:m.BufferViewVec2f,offset:this.stride,optional:h});this.stride+=8;this.fieldNames.push(e);return this};e.prototype.vec3f=function(e,h){this.fields.set(e,{size:12,constructor:m.BufferViewVec3f,offset:this.stride,optional:h});this.stride+=
12;this.fieldNames.push(e);return this};e.prototype.vec4f=function(e,h){this.fields.set(e,{size:16,constructor:m.BufferViewVec4f,offset:this.stride,optional:h});this.stride+=16;this.fieldNames.push(e);return this};e.prototype.mat3f=function(e,h){this.fields.set(e,{size:36,constructor:m.BufferViewMat3f,offset:this.stride,optional:h});this.stride+=36;this.fieldNames.push(e);return this};e.prototype.mat4f=function(e,h){this.fields.set(e,{size:64,constructor:m.BufferViewMat4f,offset:this.stride,optional:h});
this.stride+=64;this.fieldNames.push(e);return this};e.prototype.vec4u8=function(e,h){this.fields.set(e,{offset:this.stride,size:4,optional:h,constructor:m.BufferViewVec4u8});this.stride+=4;this.fieldNames.push(e);return this};e.prototype.u8=function(e,h){this.fields.set(e,{offset:this.stride,size:1,optional:h,constructor:m.BufferViewUint8});this.stride+=1;this.fieldNames.push(e);return this};e.prototype.u16=function(e,h){this.fields.set(e,{offset:this.stride,size:2,optional:h,constructor:m.BufferViewUint16});
this.stride+=2;this.fieldNames.push(e);return this};e.prototype.i8=function(e,h){this.fields.set(e,{offset:this.stride,size:1,optional:h,constructor:m.BufferViewInt8});this.stride+=1;this.fieldNames.push(e);return this};e.prototype.vec2i8=function(e,h){this.fields.set(e,{offset:this.stride,size:2,optional:h,constructor:m.BufferViewVec2i8});this.stride+=2;this.fieldNames.push(e);return this};e.prototype.vec2i16=function(e,h){this.fields.set(e,{offset:this.stride,size:4,optional:h,constructor:m.BufferViewVec2i16});
this.stride+=4;this.fieldNames.push(e);return this};e.prototype.vec2u8=function(e,h){this.fields.set(e,{offset:this.stride,size:2,optional:h,constructor:m.BufferViewVec2u8});this.stride+=2;this.fieldNames.push(e);return this};e.prototype.vec4u16=function(e,h){this.fields.set(e,{offset:this.stride,size:8,optional:h,constructor:m.BufferViewVec4u16});this.stride+=8;this.fieldNames.push(e);return this};e.prototype.u32=function(e,h){this.fields.set(e,{offset:this.stride,size:4,optional:h,constructor:m.BufferViewUint32});
this.stride+=4;this.fieldNames.push(e);return this};e.prototype.createBuffer=function(e){return new h(this,e)};e.prototype.createView=function(e){return new h(this,e)};e.prototype.clone=function(){var h=new e;h.stride=this.stride;h.fields=new Map;this.fields.forEach(function(e,l){return h.fields.set(l,e)});h.fieldNames=this.fieldNames.slice();h.BufferType=this.BufferType;return h};return e}();e.InterleavedLayout=l;e.newLayout=function(){return new l}})},"esri/views/3d/webgl-engine/lib/edgeRendering/bufferLayouts":function(){define(["require",
"exports","../../../support/buffer/glUtil","../../../support/buffer/InterleavedLayout"],function(y,e,m,h){Object.defineProperty(e,"__esModule",{value:!0});e.EdgeInputBufferLayout=h.newLayout().vec3f("position").u16("componentIndex").u16("_padding");e.VertexLayout=h.newLayout().vec2u8("sideness");e.glVertexLayout=m.glLayout(e.VertexLayout,{prefixA:!0});e.CommonInstancesLayout=h.newLayout().vec3f("position0").vec3f("position1").u16("componentIndex").vec2u8("packedAttributes").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",
{glNormalized:!0}).u8("_padding",{glPadding:!0});e.RegularEdgeInstancesLayout=e.CommonInstancesLayout.clone().vec3f("normal");e.SilhouetteEdgeInstancesLayout=e.CommonInstancesLayout.clone().vec3f("normalA").vec3f("normalB");e.EdgeShaderAttributeLocations={aPosition0:0,aPosition1:1,aComponentIndex:2,aPackedAttributes:3,aVariantOffset:4,aVariantStroke:5,aVariantExtension:6,aNormal:7,aNormalA:7,aNormalB:8,aSideness:9}})},"esri/views/3d/support/buffer/glUtil":function(){define(["require","exports","../../../../core/tsSupport/assignHelper"],
function(y,e,m){Object.defineProperty(e,"__esModule",{value:!0});var h={divisor:0,prefixA:!1};e.glLayout=function(e,u){void 0===u&&(u={});u=m({},h,u);var p=e.stride;return e.fieldNames.filter(function(h){h=e.fields.get(h).optional;return!(h&&h.glPadding)}).map(function(h){var m=e.fields.get(h),d=m.constructor.ElementCount,k;k=l[m.constructor.ElementType];if(!k)throw Error("BufferType not supported in WebGL");var f=m.offset,m=m.optional&&!!m.optional.glNormalized;return{name:u.prefixA?"a"+h[0].toUpperCase()+
h.substr(1):h,stride:p,count:d,type:k,offset:f,normalized:m,divisor:u.divisor}})};var l={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126}})},"esri/views/3d/webgl-engine/lib/edgeRendering/edgeBufferWriters":function(){define("require exports ../../../../../core/tsSupport/assignHelper ../../../../../core/tsSupport/extendsHelper ../../../lib/glMatrix ../../../support/buffer/glUtil ./bufferLayouts".split(" "),function(y,e,m,h,l,p,u){Object.defineProperty(e,"__esModule",{value:!0});var r=
function(){function e(){}e.prototype.updateSettings=function(d){this.settings=d};e.prototype.write=function(e,f,h){var l=z;l[0]=h.position0[0];l[1]=h.position0[1];l[2]=h.position0[2];l[3]=h.position1[0];l[4]=h.position1[1];l[5]=h.position1[2];d[0]=5381;for(l=0;l<q.length;l++)d[0]=31*d[0]+q[l];k.reseed(d[0]);var l=k.randomRangeInt(0,255),a=k.randomRangeInt(0,this.settings.variants-1),b=k.randomFloat(),b=-(1-Math.min(b/.7,1))+Math.max(0,b-.7)/(1-.7),b=255*(Math.pow(Math.abs(b),1.2)*(0>b?-1:1)*.5+.5);
e.position0.setVec(f,h.position0);e.position1.setVec(f,h.position1);e.componentIndex.set(f,h.componentIndex);e.variantOffset.set(f,l);e.variantStroke.set(f,a);e.variantExtension.set(f,b)};e.prototype.trim=function(d,e){return d.slice(0,e)};return e}();e.CommonBufferWriter=r;var z=new Float32Array(6),q=new Uint32Array(z.buffer),d=new Uint32Array(1),k=new (function(){function d(d){void 0===d&&(d=1);this.seed=d}d.prototype.randomFloat=function(){return this.step()/d.LARGE_PRIME};d.prototype.randomRangeInt=
function(d,e){e-=d;return Math.round(d+this.randomFloat()*e)};d.prototype.reseed=function(d){this.seed=d};d.prototype.step=function(){return this.seed=this.seed*d.SMALL_PRIME%d.LARGE_PRIME};d.LARGE_PRIME=2147483647;d.SMALL_PRIME=16807;return d}());y=function(){function d(){this.commonWriter=new r}d.prototype.updateSettings=function(d){this.commonWriter.updateSettings(d)};d.prototype.allocate=function(d){return u.RegularEdgeInstancesLayout.createBuffer(d)};d.prototype.write=function(d,e,h){this.commonWriter.write(d,
e,h);h=l.vec3d.normalize(l.vec3d.add(h.faceNormal0,h.faceNormal1,f));d.normal.setVec(e,h)};d.prototype.trim=function(d,e){return this.commonWriter.trim(d,e)};d.Layout=u.RegularEdgeInstancesLayout;d.glLayout=p.glLayout(u.RegularEdgeInstancesLayout,{prefixA:!0,divisor:1});return d}();e.RegularEdgeBufferWriter=y;y=function(){function d(){this.commonWriter=new r}d.prototype.updateSettings=function(d){this.commonWriter.updateSettings(d)};d.prototype.allocate=function(d){return u.SilhouetteEdgeInstancesLayout.createBuffer(d)};
d.prototype.write=function(d,e,f){this.commonWriter.write(d,e,f);d.normalA.setVec(e,f.faceNormal0);d.normalB.setVec(e,f.faceNormal1)};d.prototype.trim=function(d,e){return this.commonWriter.trim(d,e)};d.Layout=u.SilhouetteEdgeInstancesLayout;d.glLayout=p.glLayout(u.SilhouetteEdgeInstancesLayout,{prefixA:!0,divisor:1});return d}();e.SilhouetteEdgeBufferWriter=y;var f=l.vec3d.create()})},"esri/views/3d/webgl-engine/lib/edgeRendering/edgePreprocessing":function(){define("require exports ../../../../../core/arrayUtils ../../../lib/glMatrix ../../../support/mathUtils ../../../support/buffer/typedArrayUtil".split(" "),
function(y,e,m,h,l,p){function u(d,e){var f=Math.acos(d.cosAngle),k=q.fwd,l=q.ortho;h.vec3d.normalize(h.vec3d.direction(d.position0,d.position1,k));d=0<h.vec3d.dot(h.vec3d.cross(d.faceNormal0,d.faceNormal1,l),k)?-1:1;return f*d>e}function r(d){var e=d.faces.length/3,f=d.faces;d=d.neighbors;for(var h=0,k=0;k<e;k++)var l=d[3*k+0],a=d[3*k+1],b=d[3*k+2],c=f[3*k+0],g=f[3*k+1],n=f[3*k+2],h=h+(-1===l||c<g?1:0),h=h+(-1===a||g<n?1:0),h=h+(-1===b||n<c?1:0);for(var h=new Int32Array(4*h),m=0,k=0;k<e;k++){l=d[3*
k+0];a=d[3*k+1];b=d[3*k+2];c=f[3*k+0];g=f[3*k+1];n=f[3*k+2];if(-1===l||c<g)h[m++]=c,h[m++]=g,h[m++]=k,h[m++]=l;if(-1===a||g<n)h[m++]=g,h[m++]=n,h[m++]=k,h[m++]=a;if(-1===b||n<c)h[m++]=n,h[m++]=c,h[m++]=k,h[m++]=b}return h}function z(e){var f=e.faces.length/3,k=e.vertices.position;e=e.faces;for(var l=d.v0,m=d.v1,q=d.v2,a=new Float32Array(3*f),b=0;b<f;b++){var c=e[3*b+1],g=e[3*b+2];k.getVec(e[3*b+0],l);k.getVec(c,m);k.getVec(g,q);h.vec3d.subtract(m,l);h.vec3d.subtract(q,l);h.vec3d.normalize(h.vec3d.cross(m,
q,l));a[3*b+0]=l[0];a[3*b+1]=l[1];a[3*b+2]=l[2]}return a}Object.defineProperty(e,"__esModule",{value:!0});e.extractEdges=function(d,e,x,t){void 0===t&&(t=k);var f=d.vertices.position,v=d.vertices.componentIndex,a=l.deg2rad(t.anglePlanar);t=l.deg2rad(t.angleSignificantEdge);var b=Math.cos(t),c=Math.cos(a),g=q.edge,n=g.position0,w=g.position1,y=g.faceNormal0,Q=g.faceNormal1,M=z(d),P=r(d),O=P.length/4;d=e.allocate(O);t=0;var N=x.allocate(O),R=0,V=0,aa=0,X=m.range(0,O),W=new Float32Array(O);p.forEach(W,
function(a,b,c){f.getVec(P[4*b+0],n);f.getVec(P[4*b+1],w);c[b]=h.vec3d.dist(n,w)});X.sort(function(a,b){return W[b]-W[a]});for(var ba=[],Z=[],Y=0;Y<O;Y++){var L=X[Y],ca=W[L],K=P[4*L+0],F=P[4*L+1],D=P[4*L+2],L=P[4*L+3],E=-1===L;f.getVec(K,n);f.getVec(F,w);if(E)h.vec3d.set3(M[3*D+0],M[3*D+1],M[3*D+2],y),h.vec3d.set(y,Q),g.componentIndex=v.get(K),g.cosAngle=h.vec3d.dot(y,Q);else if(h.vec3d.set3(M[3*D+0],M[3*D+1],M[3*D+2],y),h.vec3d.set3(M[3*L+0],M[3*L+1],M[3*L+2],Q),g.componentIndex=v.get(K),g.cosAngle=
h.vec3d.dot(y,Q),g.cosAngle>c)continue;V+=ca;aa++;E||g.cosAngle<b?(e.write(d,t++,g),ba.push(ca)):u(g,a)&&(x.write(N,R++,g),Z.push(ca))}v=new Float32Array(ba.reverse());a=new Float32Array(Z.reverse());return{regular:{instancesData:e.trim(d,t),lodInfo:{lengths:v}},silhouette:{instancesData:x.trim(N,R),lodInfo:{lengths:a}},averageEdgeLength:V/aa}};var q={edge:{position0:h.vec3d.create(),position1:h.vec3d.create(),faceNormal0:h.vec3d.create(),faceNormal1:h.vec3d.create(),componentIndex:0,cosAngle:0},
ortho:h.vec3d.create(),fwd:h.vec3d.create()},d={v0:h.vec3d.create(),v1:h.vec3d.create(),v2:h.vec3d.create()},k={anglePlanar:4,angleSignificantEdge:35}})},"esri/core/arrayUtils":function(){define(["require","exports"],function(y,e){function m(e,h,l){for(var d=e.length,k=0;k<d;k++)if(h.call(l,e[k],k,e))return k;return-1}function h(e,h,l){void 0===l&&(l=e.length);for(var d=Math.max(0,u-5),k=-1,f=d;f<l;++f)if(e[f]===h){k=f;break}if(-1===k){for(f=0;f<d;++f)if(e[f]===h){k=f;break}if(-1===k)return}e[k]=
e[l-1];e.pop();u=k;return h}function l(e,h){return-1===e.indexOf(h)}function p(e,h,l){return!e.some(h.bind(null,l))}Object.defineProperty(e,"__esModule",{value:!0});e.findIndex=m;e.find=function(e,h,l){for(var d=e.length,k=0;k<d;k++){var f=e[k];if(h.call(l,f,k,e))return f}};e.equals=function(e,h,l){if(!e&&!h)return!0;if(!e||!h||e.length!==h.length)return!1;if(l)for(var d=0;d<e.length;d++){if(!l(e[d],h[d]))return!1}else for(d=0;d<e.length;d++)if(e[d]!==h[d])return!1;return!0};e.difference=function(e,
h,m){var d;m?(d=h.filter(p.bind(null,e,m)),e=e.filter(p.bind(null,h,m))):(d=h.filter(l.bind(null,e)),e=e.filter(l.bind(null,h)));return{added:d,removed:e}};e.intersect=function(e,h,l){return e&&h?l?e.filter(function(d){return-1<m(h,function(e){return l(d,e)})}):e.filter(function(d){return-1<h.indexOf(d)}):[]};e.constant=function(e,h){for(var l=Array(e),d=0;d<e;d++)l[d]=h;return l};e.range=function(e,h){void 0===h&&(h=e,e=0);for(var l=Array(h-e),d=e;d<h;d++)l[d-e]=d;return l};e.binaryIndexOf=function(e,
h,l){for(var d=e.length,k=0,f=d-1;k<f;){var m=k+Math.floor((f-k)/2);h>e[m]?k=m+1:f=m}f=e[k];return l?h>=e[d-1]?-1:f===h?k:k-1:f===h?k:-1};e.removeUnordered=h;e.removeUnorderedMany=function(e,l,m){void 0===m&&(m=e.length);var d=[];l.forEach(function(k){void 0!==h(e,k,m)&&(d.push(k),--m)});return d};var u=0;e.keysOfMap=function(e){var h=[];e.forEach(function(e,d){return h.push(d)});return h};e.keysOfSet=function(e){var h=[];e.forEach(function(e){return h.push(e)});return h}})},"*noref":1}});
define("require exports ../../../../../core/tsSupport/awaiterHelper ../../../../../core/tsSupport/generatorHelper ../../../support/meshProcessing ../../../support/buffer/typedArrayUtil ../../../support/buffer/workerHelper ./bufferLayouts ./edgeBufferWriters ./edgePreprocessing".split(" "),function(y,e,m,h,l,p,u,r,z,q){return function(){function d(){this.regularWriter=new z.RegularEdgeBufferWriter;this.silhouetteWriter=new z.SilhouetteEdgeBufferWriter}d.prototype.process=function(d,e){return m(this,
void 0,void 0,function(){var f,k,l;return h(this,function(h){switch(h.label){case 0:if(!e)return[3,2];f=[];k=this.packInput(d,f);this.wrappedWork;return[4,e.invoke("wrappedWork",k,f)];case 1:return l=h.sent(),[2,this.unpackOutput(l)];case 2:return[2,this.work(d)]}})})};d.prototype.wrappedWork=function(d){return m(this,void 0,void 0,function(){var e,k,l,m;return h(this,function(f){e=this.unpackInput(d);k=this.work(e);l=[];this.packInputTransferables(e,l);m=this.packOutput(k,l);return[2,{result:m,transferList:l}]})})};
d.prototype.work=function(d){var e=this.extractEdgeInformation(d.data,d.originalIndices);this.regularWriter.updateSettings(d.writerSettings);this.silhouetteWriter.updateSettings(d.writerSettings);return q.extractEdges(e,this.regularWriter,this.silhouetteWriter)};d.prototype.packInputTransferables=function(d,e){e.push(d.data.buffer);d.originalIndices&&e.push(d.originalIndices.buffer)};d.prototype.packInput=function(d,e){this.packInputTransferables(d,e);e={dataBuffer:d.data.buffer,writerSettings:d.writerSettings};
d.originalIndices&&(e.originalIndicesBuffer=d.originalIndices.buffer,e.originalIndicesType=d.originalIndices instanceof Uint32Array?"Uint32Array":"Uint16Array");return e};d.prototype.unpackInput=function(d){return{data:r.EdgeInputBufferLayout.createView(d.dataBuffer),originalIndices:"Uint32Array"===d.originalIndicesType?new Uint32Array(d.originalIndicesBuffer):"Uint16Array"===d.originalIndicesType?new Uint16Array(d.originalIndicesBuffer):void 0,writerSettings:d.writerSettings}};d.prototype.packOutput=
function(d,e){e.push(d.regular.lodInfo.lengths.buffer);e.push(d.silhouette.lodInfo.lengths.buffer);return{regular:{instancesData:u.packInterleavedBuffer(d.regular.instancesData,e),lodInfo:{lengths:d.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:u.packInterleavedBuffer(d.silhouette.instancesData,e),lodInfo:{lengths:d.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:d.averageEdgeLength}};d.prototype.unpackOutput=function(d){return{regular:{instancesData:u.unpackInterleavedBuffer(d.regular.instancesData),
lodInfo:{lengths:new Float32Array(d.regular.lodInfo.lengths)}},silhouette:{instancesData:u.unpackInterleavedBuffer(d.silhouette.instancesData),lodInfo:{lengths:new Float32Array(d.silhouette.lodInfo.lengths)}},averageEdgeLength:d.averageEdgeLength}};d.prototype.extractEdgeInformation=function(d,e){d=l.deduplicate(d.buffer,d.stride/4);e=this.selectIndexData(d.indices,e);var f=l.computeNeighbors(e,d.uniqueCount);return{faces:e,neighbors:f,vertices:r.EdgeInputBufferLayout.createView(d.buffer)}};d.prototype.selectIndexData=
function(d,e){if(e){e=p.slice(e);for(var f=0;f<e.length;f++)e[f]=d[e[f]];return e}return d};return d}()});