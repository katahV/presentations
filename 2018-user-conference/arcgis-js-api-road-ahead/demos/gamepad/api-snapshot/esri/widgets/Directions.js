// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper dojo/i18n!../nls/common dojo/i18n!./Directions/nls/Directions ../moment ../core/Collection ../core/Handles ../core/lang ../core/on ../core/watchUtils ../core/accessorSupport/decorators ./Search ./Widget ./Directions/DirectionsViewModel ./Directions/support/CostSummary ./Directions/support/DatePicker ./Directions/support/directionsUtils ./Directions/support/maneuverUtils ./Directions/support/RouteSections ./Directions/support/TimePicker ./support/widget".split(" "),
function(A,O,B,e,C,r,h,x,D,E,v,q,m,g,F,G,y,H,I,n,J,K,L,d){var M=[{},{}],N=A.toUrl("../themes/base/images/maneuvers/");return function(z){function b(a){a=z.call(this)||this;a._autoStopRemovalDelay=100;a._costSummary=new H;a._departureTime="now";a._datePicker=new I;a._handles=new E;a._newPlaceholderStop=null;a._routeSections=new K;a._stops=new D(M);a._stopsToSearches=new Map;a._timePicker=new L;a.goToOverride=null;a.iconClass="esri-icon-directions";a.label=h.widgetLabel;a.maxStops=null;a.routeServiceUrl=
null;a.routeSymbol=null;a.searchProperties=null;a.stopSymbols=null;a.view=null;a.viewModel=new y;return a}B(b,z);b.prototype.postInitialize=function(){var a=this;this.own([m.init(this,"viewModel.lastRoute",function(){a._routeSections.routePath=a.get("viewModel.directionLines");a._activeManeuver=null;a._focusedManeuver=null;a.scheduleRender()}),m.init(this,"viewModel.selectedTravelMode, viewModel.departureTime",function(){1<a.get("viewModel.stops.length")&&a.getDirections()}),m.when(this,"view",function(k,
c){c&&(a._viewClickHandle=null,a._handles.remove(c));k&&(c=a._prepViewClick(),a._handles.add([q.on(k.surface,"mousedown",function(){return a._autoStopRemovalDelay=500}),q.on(k.surface,"mouseup",function(){return a._autoStopRemovalDelay=100}),c],a.view.surface),a._viewClickHandle=c)}),m.whenOnce(this,"routeServiceUrl",function(){return a.viewModel.load()})])};b.prototype.destroy=function(){this._datePicker.destroy();this._timePicker.destroy();this._stopsToSearches.forEach(function(a){return a.destroy()})};
b.prototype.getDirections=function(){return null};b.prototype.zoomToRoute=function(){};b.prototype.render=function(){return d.tsx("div",{class:this.classes("esri-directions esri-widget esri-widget--panel","esri-directions__scroller")},this._renderPanelContent())};b.prototype._renderPanelContent=function(){var a=this.viewModel,k=a.state,c=a.loadStatus,a="initializing"===k,c="error"===k&&"failed"===c,k=(b={},b["esri-directions__panel-content--loading"]=a,b["esri-directions__panel-content--error"]=c,
b),b=a?"presentation":"group",a=c?this._renderMessage(h.serviceError):a?this._renderLoader():this._renderReadyContent();return d.tsx("div",{class:this.classes("esri-directions__panel-content",k),role:b},a);var b};b.prototype._renderReadyContent=function(){return[this._renderStopsContainer(),this._renderTravelModeOptions(),this._renderDepartureTimeControls(),this._renderSectionSplitter(),this._renderDirectionsContainer(),this._renderDisclaimer()]};b.prototype._renderTravelModeOptions=function(){var a=
this.viewModel,k=a.selectedTravelMode,a=a.travelModes,b=k.name||h.travelMode;return 0<a.length?d.tsx("select",{"aria-label":b,bind:this,class:this.classes("esri-directions__travel-modes-select","esri-select"),key:"esri-directions__travel-mode-options",onchange:this._handleTravelModeChange,title:b},a.map(function(a){return d.tsx("option",{key:a,"data-mode":a,selected:a.id===k.id,value:a.id},a.name)})):null};b.prototype._handleTravelModeChange=function(a){a=a.currentTarget;a=a.item(a.selectedIndex);
this.viewModel.selectedTravelMode=a["data-mode"]};b.prototype._renderStopsContainer=function(){return d.tsx("div",{class:"esri-directions__section",key:"esri-directions__stops-container",role:"group"},this._renderStops())};b.prototype._renderDepartureTimeControls=function(){var a="now"===this._departureTime,k=h.departureTime;return d.tsx("div",{class:"esri-directions__departure-time",key:"esri-directions__departure-time-controls",role:"group"},d.tsx("select",{"aria-label":k,bind:this,class:this.classes("esri-directions__departure-time-select",
"esri-select"),onchange:this._handleDepartureOptionChange,title:k},d.tsx("option",{value:"now",selected:a},h.leaveNow),d.tsx("option",{value:"depart-by",selected:!a},h.departBy)),a?null:this._renderTimeControls())};b.prototype._renderStops=function(){var a=this,k=this._stops,b=k.toArray().map(function(b,c){var l=k.length,f=1<c&&!b.result,w=(e={},e["esri-icon-radio-unchecked"]=0<=c&&c<l-1,e["esri-icon-radio-checked"]=c===l-1,e),e=(g={},g["esri-directions__stop-icon-container--last"]=c===l-1,g),g=(t=
{},t["esri-directions__stop-row--dragged"]=a._draggedStopIndex===c,t["esri-directions__stop-row--target"]=a._dropTargetStopIndex===c,t["esri-directions__stop-row--valid"]=!f,t),t=(p={},p["esri-directions__stop-underline--drag-in-process"]=!isNaN(a._draggedStopIndex),p),m=(p=k.getItemAt(l-1))&&p.result,p=(p=k.getItemAt(c+1))&&p.result,n=c===l-1,u=c===l-2,p=2===l&&0===c||2<l&&!n&&!u||2<l&&u&&p||2<l&&n&&!b.result,l=2===l||3===l&&!m||f,f=f?"false":"true",m=a._acquireSearch(b),n=h.removeStop,u=h.reverseStops,
q=h.unlocated,q=v.substitute({number:c+1,label:b.result?b.result.name:q},h.stopLabelTemplate),r=a.id+"__stop--"+c;b=!!m.searchTerm&&!!m.selectedResult&&!!b.result&&m.selectedResult===b.result;return d.tsx("li",{"aria-label":q,afterCreate:a._handleStopFieldCreation,bind:a,class:a.classes("esri-directions__stop-row",g),id:r,key:c,"data-stop-index":c,ondragend:a._handleStopFieldDragEnd,ondragover:a._handleStopFieldDragOver,ondragstart:a._handleStopFieldDragStart,ondrop:a._handleStopFieldDrop},d.tsx("div",
{class:"esri-directions__stop-handle",draggable:f},d.tsx("span",{"aria-hidden":"true",class:a.classes("esri-directions__stop-icon","esri-icon-handle-vertical","esri-directions__stop-handle-icon","esri-directions__stop-icon--interactive")}),d.tsx("div",{bind:a,"aria-labelledby":r,class:a.classes("esri-directions__stop-icon-container",e),"data-stop-index":c,onclick:a._handleStopIconClick,onkeydown:a._handleStopIconClick,role:"button"},d.tsx("span",{class:a.classes("esri-directions__stop-icon",w),tabindex:b?
"0":null}))),d.tsx("div",{class:"esri-directions__stop-input"},m.render(),d.tsx("div",{class:a.classes("esri-directions__stop-underline",t)})),d.tsx("div",{class:"esri-directions__stop-options",role:"group"},d.tsx("div",{"aria-label":n,class:"esri-directions__remove-stop",bind:a,"data-stop-index":c,hidden:l,onkeydown:a._handleRemoveStop,onclick:a._handleRemoveStop,role:"button",tabIndex:0,title:n},d.tsx("span",{"aria-hidden":"true",class:a.classes("esri-directions__stop-icon","esri-directions__remove-stop-icon",
"esri-icon-close","esri-directions__stop-icon--interactive")}),d.tsx("span",{class:"esri-icon-font-fallback-text"},"removeStopTitle")),d.tsx("div",{"aria-label":u,class:"esri-directions__reverse-stops",bind:a,hidden:p,onkeydown:a._handleReverseStops,onclick:a._handleReverseStops,role:"button",tabIndex:0,title:u},d.tsx("span",{"aria-hidden":"true",class:a.classes("esri-directions__stop-icon","esri-icon-up-down-arrows","esri-directions__stop-icon--interactive")}),d.tsx("span",{class:"esri-icon-font-fallback-text"},
"removeStopTitle"))));var e,g,t,p}),l=k.every(function(b){var c=a._stopsToSearches.get(b);return b.result&&c.selectedResult===b.result}),w=this._stops.length>=this.maxStops,f=h.addStop,l=2<=k.length&&l&&!w?d.tsx("div",{"aria-label":f,bind:this,class:"esri-directions__add-stop",key:"esri-directions__add-stop",onfocus:this._handleAddStopFocus,tabIndex:0},d.tsx("span",{"aria-hidden":"true",class:this.classes("esri-icon-plus","esri-directions__stop-icon","esri-directions__stop-icon--interactive")}),d.tsx("div",
{"aria-hidden":"true",class:"esri-directions__add-stop-text"},f)):null;return d.tsx("div",null,d.tsx("ol",{class:"esri-directions__stops",role:"group"},b),l)};b.prototype._handleStopIconClick=function(a){(a=this._stops.getItemAt(a.currentTarget["data-stop-index"]))&&a.result&&this._centerAtStop(a)};b.prototype._centerAtStop=function(a){this.viewModel.centerAt(a.result.feature)};b.prototype._handleStopFieldCreation=function(a){var b=this._newPlaceholderStop;b&&(a=this._stops.getItemAt(a["data-stop-index"]),
b===a&&this._acquireSearch(a).focus(),this._newPlaceholderStop=null)};b.prototype._handleStopInputBlur=function(a,b){var c=this;this._handles.remove("awaiting-view-click-stop");this.view.cursor=this._previousCursor;a.selectedResult&&b.result&&a.selectedResult===b.result||("none"!==a.activeMenu||!a.searchTerm||a.selectedResult===b.result&&(a.selectedResult||b.result)?a.searchTerm||(this._viewClickHandle.resume(),clearTimeout(this._autoStopRemovalTimeoutId),this._autoStopRemovalTimeoutId=setTimeout(function(){c.destroyed||
(c._pauseViewClickHandles(),"searching"!==a.state&&(c._removeStop(b),b.result&&(b.result=null,c._processStops()),c.scheduleRender()))},this._autoStopRemovalDelay)):a.search())};b.prototype._handleStopInputFocus=function(a,b){if(!this._handles.has("awaiting-view-click-stop")){var c=this.view,k=this.view.cursor;this._previousCursor=k;this._handles.add(m.init(a,"searchTerm",function(a){c.cursor=0===a.length?"copy":k}),"awaiting-view-click-stop");this._activeStop=b}};b.prototype._prepViewClick=function(){var a=
this,b=this.get("viewModel.view"),c=q.pausable(b,"click",this._handleViewClick.bind(this)),d=q.pausable(b.surface,"click",function(){clearTimeout(a._autoStopRemovalTimeoutId);d.pause()});return{remove:function(){d.remove();c.remove()},pause:function(){d.pause();c.pause()},resume:function(){d.resume();c.resume()}}};b.prototype._handleViewClick=function(a){var b=this,c=this._stopsToSearches.get(this._activeStop);c&&!c.searchTerm&&(c.search(a.mapPoint).then(function(a){a=a.results[0].results[0];var d=
b._activeStop;d.result=a;d.result.feature.attributes.Name=a.name;c.searchTerm=a.name;b._processStops();b.scheduleRender()}),this.scheduleRender());this._pauseViewClickHandles();clearTimeout(this._autoStopRemovalTimeoutId)};b.prototype._pauseViewClickHandles=function(){this._viewClickHandle.pause()};b.prototype._handleAddStopFocus=function(a){this._addNewPlaceholder()};b.prototype._addNewPlaceholder=function(){if(!this._newPlaceholderStop){var a={};this._stops.add(a);this._newPlaceholderStop=a}};b.prototype._handleReverseStops=
function(){this._reverseStops()};b.prototype._reverseStops=function(){this._stops.reverse();this._processStops()};b.prototype._handleRemoveStop=function(a){this._removeStop(this._stops.getItemAt(a.currentTarget["data-stop-index"]));this._processStops()};b.prototype._removeStop=function(a){2>=this._stops.length||(this._disposeSearch(a),this._stops.remove(a))};b.prototype._getStopFieldGhost=function(){var a=this._ghost;a||(a=document.createElement("div"),a.classList.add("esri-directions__stop-row-ghost",
"esri-offscreen"),this._ghost=a);return a};b.prototype._handleStopFieldDragStart=function(a){var b=a.dataTransfer;a=a.currentTarget;var c=Number(a["data-stop-index"]);this._draggedStopIndex=c;var d=this._getStopFieldGhost(),c=this._acquireSearch(this._stops.getItemAt(c));d.innerHTML=c.searchTerm||c.activeSource.placeholder;document.body.appendChild(d);c=d.getBoundingClientRect().height;b.effectAllowed="move";b.setDragImage(d,20,c/2);b.setData("text/plain",a["data-stop-index"])};b.prototype._handleStopFieldDragEnd=
function(){this._dropTargetStopIndex=this._draggedStopIndex=null;document.body.removeChild(this._getStopFieldGhost())};b.prototype._handleStopFieldDragOver=function(a){var b=Number(a.currentTarget["data-stop-index"]);a.preventDefault();this._dropTargetStopIndex=this._draggedStopIndex===b?null:b};b.prototype._handleStopFieldDrop=function(a){a.stopPropagation();a.preventDefault();var b=Number(a.currentTarget["data-stop-index"]);a=Number(a.dataTransfer.getData("text/plain"));if(a!==b){var c=this._stops;
c.reorder(c.getItemAt(a),b);this._processStops()}};b.prototype._handleDepartureOptionChange=function(){var a=this,b=event.currentTarget,b=b.item(b.selectedIndex);"now"===b.value?(this._departureTime="now",this.viewModel.departureTime="now",this._handles.remove("departure-time-controls")):"depart-by"===b.value&&(this._departureTime="depart-by",this._handles.add([m.init(this._datePicker,"value",function(){return a._updateDepartureTime()}),m.init(this._timePicker,"value",function(){return a._updateDepartureTime()})],
"departure-time-controls"))};b.prototype._updateDepartureTime=function(){var a=this._datePicker.value,b=this._timePicker.value,a=x({date:a.date(),month:a.month(),year:a.year(),hour:b.hour(),minute:b.minute()});this.viewModel.departureTime=a.toDate()};b.prototype._renderTimeControls=function(){return d.tsx("div",{class:"esri-directions__departure-time-controls",key:"esri-directions__time-controls",role:"group"},this._datePicker.render(),this._timePicker.render())};b.prototype._renderSectionSplitter=
function(){return d.tsx("div",{class:"esri-directions__section-splitter"})};b.prototype._renderDisclaimer=function(){var a=v.substitute({esriTerms:'\x3ca href\x3d"http://www.esri.com/legal/software-license" target\x3d"_blank"\x3e'+h.esriTerms+"\x3c/a\x3e"},h.disclaimer);return d.tsx("div",{class:"esri-directions__disclaimer",innerHTML:a,key:"esri-directions__disclaimer"})};b.prototype._renderDirectionsContainer=function(){return d.tsx("div",{class:this.classes("esri-directions__directions-section",
"esri-directions__section"),key:"esri-directions__container"},this._renderDirectionsContainerContent())};b.prototype._renderLoader=function(){return d.tsx("div",{class:"esri-directions__loader",key:"loader"})};b.prototype._renderDirectionsContainerContent=function(){var a=this.viewModel,b=a.lastRoute,a=a.state,c="routing"===a;return"error"===a?this._renderMessage(h.serviceError,"esri-directions__message"):c?this._renderLoader():b?d.tsx("div",{class:"esri-directions__summary",key:"esri-directions__summary",
role:"group"},this._renderCosts(),this._renderManeuverSections()):d.tsx("div",{key:"esri-directions__placeholder",class:"esri-widget__content--empty"},d.tsx("svg",{class:"esri-widget__content-illustration--empty",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256"},d.tsx("path",{fill:"currentcolor",d:"M192 36c-15.477 0-24 6.034-24 16.99v45.822l24 24 24-24v-45.82C216 42.033 207.477 36 192 36zm20 61.155l-20 20-20-20V52.99c0-8.62 6.73-12.99 20-12.99s20 4.37 20 12.99zM192 52a12 12 0 1 0 12 12 12.013 12.013 0 0 0-12-12zm0 20a8 8 0 1 1 8-8 8.008 8.008 0 0 1-8 8zM92 140.99C92 130.035 83.477 124 68 124s-24 6.034-24 16.99v45.822l24 24 24-24zm-4 44.165l-20 20-20-20V140.99c0-8.62 6.73-12.99 20-12.99s20 4.37 20 12.99zM68 140a12 12 0 1 0 12 12 12.013 12.013 0 0 0-12-12zm0 20a8 8 0 1 1 8-8 8.008 8.008 0 0 1-8 8zm84-44h16v4h-16zm-24 80h4v12h-12v-4h8zm0-28h4v16h-4zm0-52h12v4h-8v8h-4zm0 24h4v16h-4zm-36 64h16v4H92z"})),
d.tsx("h3",{class:"esri-directions__message"},h.directionsPlaceholder))};b.prototype._renderMessage=function(a,b){return d.tsx("h3",{class:"esri-directions__message",key:b},a)};b.prototype._renderManeuverSections=function(){var a=this,b=this._routeSections.sections;return d.tsx("div",{class:"esri-directions__maneuvers",role:"group"},b.map(function(c,k){var l=c.open,f;0<c.maneuvers.length&&l&&(f=d.tsx("ol",{class:"esri-directions__maneuver-list"},c.maneuvers.map(function(b){return a._renderManeuver(b)})));
var e=2<b.length,h=k===b.length-1;k=(g={},g["esri-directions__maneuver-section--collapsible"]=e,g);g=(m={},m["esri-icon-right-triangle-arrow"]=!l,m["esri-icon-down-arrow"]=l,m);e?h?c=d.tsx("header",{class:"esri-directions__maneuver-section-header",key:"esri-directions__maneuver-section-header"},d.tsx("span",{"aria-hidden":"true",class:"esri-icon-radio-checked"}),d.tsx("h2",{class:"esri-directions__maneuver-section-title"},c.name)):(e=l?r.open:r.close,c=d.tsx("header",{class:a.classes("esri-directions__maneuver-section-header",
"esri-directions__maneuver-section-toggle"),key:"esri-directions__maneuver-section-header"},d.tsx("div",{"aria-expanded":l,"aria-label":e,bind:a,class:"esri-directions__maneuver-section-header-toggle-button","data-maneuver-section":c,onkeydown:a._handleSectionToggle,onclick:a._handleSectionToggle,role:"button",tabIndex:0,title:e},d.tsx("span",{"aria-hidden":"true",class:a.classes(g)}),d.tsx("h2",{class:"esri-directions__maneuver-section-title"},c.name)))):c=null;return d.tsx("section",{class:a.classes("esri-directions__maneuver-section",
k)},c,f);var g,m}))};b.prototype._handleSectionToggle=function(a){a=a.currentTarget["data-maneuver-section"];a.open=!a.open};b.prototype._renderCosts=function(){var a=this.get("viewModel.directionLines"),a=x(a[a.length-1].attributes.arriveTimeUTC),b=a.format("LT"),c=a.format("[GMT]ZZ"),a=this._costSummary.set({directionsViewModel:this.viewModel}),l=h.zoomToRoute,b=v.substitute({time:"\x3cstrong\x3e"+b+"\x3c/strong\x3e",gmt:c},h.etaTemplate),c=h.primaryCosts,e=h.secondaryCosts,f=h.eta;return d.tsx("div",
{"aria-label":l,bind:this,class:"esri-directions__costs",onkeydown:this._handleSummaryInteraction,onclick:this._handleSummaryInteraction,role:"button",tabIndex:0,title:l},d.tsx("div",{class:"esri-directions__costs-details",role:"group"},d.tsx("div",{"aria-label":c,class:"esri-directions__costs-value",title:c},a.primary),d.tsx("div",{class:"esri-directions__vertical-splitter"}),d.tsx("div",{"aria-label":e,class:"esri-directions__other-costs-total",title:e},a.secondary)),d.tsx("div",{"aria-label":f,
innerHTML:b,title:f}))};b.prototype._handleSummaryInteraction=function(){this._focusedManeuver=this._activeManeuver=null;this.viewModel.clearHighlights();this.zoomToRoute()};b.prototype._acquireSearch=function(a){var b=this,c=this.get("viewModel.view"),d=c?h.searchFieldPlaceholder:h.viewlessSearchFieldPlaceholder;if(this._stopsToSearches.has(a)){var e=this._stopsToSearches.get(a);e.view=c;e.defaultSource.placeholder=d;return e}var f=new F(C({view:c,resultGraphicEnabled:!1,popupEnabled:!1},this.searchProperties));
f.defaultSource.placeholder=d;f.defaultSource.autoNavigate=!1;this._handles.add([f.on("select-result",function(){a.result=f.selectedResult;a.result.feature.attributes.Name=f.selectedResult.name;b._processStops();b.scheduleRender()}),f.on("search-focus",function(){return b._handleStopInputFocus(f,a)}),f.on("search-blur",function(){return b._handleStopInputBlur(f,a)})],f);this._stopsToSearches.set(a,f);return f};b.prototype._disposeSearch=function(a){this._stopsToSearches.get(a).destroy();this._stopsToSearches.delete(a)};
b.prototype._processStops=function(){var a=this.viewModel;a.stops.removeAll();a.stops.addMany(this._stops.filter(function(a){return!!a.result}).map(function(a){return a.result.feature}));1<a.stops.length&&a.getDirections()};b.prototype._renderManeuver=function(a){var b,c=a.attributes,e=this.get("viewModel.routeParameters.directionsLengthUnits"),e=n.formatDistance(c.length,{toUnits:e}),g=n.formatTime(c.time),f=n.getAssociatedStop(a);n.useSpatiallyLocalTime(a,this.get("viewModel.routeParameters.startTime"))?
b=n.toSpatiallyLocalTimeString(c.arriveTimeUTC,c.ETA,"now"===this._departureTime):e&&(b=g?e+"\x26nbsp;\x26middot;\x3cwbr\x3e\x26nbsp;"+g:e);e=this._getFormattedManeuverText(a);c=this._getIconPath(c.maneuverType);if(f)return d.tsx("li",{class:"esri-directions__maneuver",key:a},d.tsx("header",null,f.attributes.Name));var f="esri-directions__maneuver-"+a.uid,g="esri-directions__cumulative-costs-"+a.uid,m="esri-directions__intermediate-costs-"+a.uid,q=(r={},r["esri-directions__maneuver--active"]=this._activeManeuver===
a,r);return d.tsx("li",{"aria-labelledby":f+" "+g+" "+m,bind:this,class:this.classes("esri-directions__maneuver",q),"data-maneuver":a,key:a,onclick:this._handleManeuverClick,onkeydown:this._handleManeuverClick,onfocus:this._handleManeuverFocus,onmouseover:this._handleManeuverMouseOver,onmouseout:this._handleManeuverMouseOut,onblur:this._handleManeuverBlur,tabIndex:0},d.tsx("img",{alt:"",class:"esri-directions__maneuver-icon",src:c}),d.tsx("div",{class:"esri-directions__maneuver-costs-container"},
d.tsx("span",{id:f,innerHTML:e}),d.tsx("div",{class:"esri-directions__maneuver-costs"},d.tsx("div",{class:"esri-directions__horizontal-splitter"}),d.tsx("div",{id:g,"aria-label":h.cumulativeCosts,class:"esri-directions__cost--cumulative",innerHTML:"",title:h.cumulativeCosts}),d.tsx("div",{id:m,"aria-label":h.intermediateCosts,class:"esri-directions__cost--intermediate",innerHTML:b,title:h.intermediateCosts}))));var r};b.prototype._getIconPath=function(a){a=J.toIconName(a);return""+N+a+(2===window.devicePixelRatio?
"@2x":"")+".png"};b.prototype._handleManeuverClick=function(a){a=a.currentTarget["data-maneuver"];this._activeManeuver===a?(this._activeManeuver=null,this.zoomToRoute()):(this._activeManeuver=a,this.viewModel.centerAt(a),this.viewModel.highlightSegment(a))};b.prototype._handleManeuverMouseOver=function(a){this._activeManeuver||this._focusedManeuver||this.viewModel.highlightSegment(a.currentTarget["data-maneuver"])};b.prototype._handleManeuverMouseOut=function(){this._activeManeuver||this._focusedManeuver||
this.viewModel.clearHighlights()};b.prototype._handleManeuverBlur=function(){this._activeManeuver||(this._focusedManeuver=null,this.viewModel.clearHighlights())};b.prototype._handleManeuverFocus=function(a){this._activeManeuver||(this._focusedManeuver=a=a.currentTarget["data-maneuver"],this.viewModel.highlightSegment(a))};b.prototype._getFormattedManeuverText=function(a){var b=a.attributes.text;a=a.strings;if(!a)return b;var c=b;a.forEach(function(a){c=c.replace(a.string,"\x3cstrong\x3e"+a.string+
"\x3c/strong\x3e")});return c};e([g.aliasOf("viewModel.goToOverride")],b.prototype,"goToOverride",void 0);e([g.property()],b.prototype,"iconClass",void 0);e([g.property()],b.prototype,"label",void 0);e([g.aliasOf("viewModel.maxStops")],b.prototype,"maxStops",void 0);e([g.aliasOf("viewModel.routeServiceUrl")],b.prototype,"routeServiceUrl",void 0);e([g.aliasOf("viewModel.routeSymbol")],b.prototype,"routeSymbol",void 0);e([g.property()],b.prototype,"searchProperties",void 0);e([g.aliasOf("viewModel.stopSymbols")],
b.prototype,"stopSymbols",void 0);e([g.aliasOf("viewModel.view")],b.prototype,"view",void 0);e([d.renderable(["lastRoute","state","travelModes"]),g.property({type:y})],b.prototype,"viewModel",void 0);e([g.aliasOf("viewModel.getDirections")],b.prototype,"getDirections",null);e([g.aliasOf("viewModel.zoomToRoute")],b.prototype,"zoomToRoute",null);e([d.accessibleHandler()],b.prototype,"_handleStopIconClick",null);e([d.accessibleHandler()],b.prototype,"_handleReverseStops",null);e([d.accessibleHandler()],
b.prototype,"_handleRemoveStop",null);e([d.accessibleHandler()],b.prototype,"_handleSectionToggle",null);e([d.accessibleHandler()],b.prototype,"_handleSummaryInteraction",null);e([d.accessibleHandler()],b.prototype,"_handleManeuverClick",null);return b=e([g.subclass("esri.widgets.Directions")],b)}(g.declared(G))});