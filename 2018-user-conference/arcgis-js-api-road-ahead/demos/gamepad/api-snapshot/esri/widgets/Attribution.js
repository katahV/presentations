// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Attribution/nls/Attribution ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Attribution/AttributionViewModel ./support/widget".split(" "),function(p,q,k,c,l,m,d,n,f,e){return function(h){function a(b){b=h.call(this)||this;b._isOpen=!1;b._attributionTextOverflowed=!1;b._prevSourceNodeHeight=0;b.iconClass="esri-icon-description";b.itemDelimiter=" | ";b.label=l.widgetLabel;b.view=
null;b.viewModel=new f;return b}k(a,h);a.prototype.postInitialize=function(){var b=this;this.own(m.on(this,"viewModel.items","change",function(){return b.scheduleRender()}))};Object.defineProperty(a.prototype,"attributionText",{get:function(){return this.viewModel.items.reduce(function(b,a){-1===b.indexOf(a.text)&&b.push(a.text);return b},[]).join(this.itemDelimiter)},enumerable:!0,configurable:!0});a.prototype.render=function(){var b=(a={},a["esri-attribution--open"]=this._isOpen,a);return e.tsx("div",
{bind:this,class:this.classes("esri-attribution esri-widget",b),onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),e.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",e.tsx("a",{target:"_blank",href:"http://www.esri.com/",class:"esri-attribution__link"},"Esri")));var a};a.prototype._renderSourcesNode=function(){var b=this._isOpen,a=this._isInteractive(),c=a?0:-1,d=this.attributionText,f=a?"button":void 0,b=(g={},g["esri-attribution__sources--open"]=b,
g["esri-interactive"]=a,g);return e.tsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",b),innerHTML:d,role:f,tabIndex:c});var g};a.prototype._afterSourcesNodeCreate=function(b){this._prevSourceNodeHeight=b.clientWidth};a.prototype._afterSourcesNodeUpdate=function(b){var a=!1,c=b.clientHeight;b=b.scrollWidth>=b.clientWidth;var d=this._attributionTextOverflowed!==b;this._attributionTextOverflowed=b;d&&
(a=!0);this._isOpen&&(b=c<this._prevSourceNodeHeight,this._prevSourceNodeHeight=c,b&&(this._isOpen=!1,a=!0));a&&this.scheduleRender()};a.prototype._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)};a.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};c([d.property({dependsOn:["viewModel.items.length","itemDelimiter"],readOnly:!0}),e.renderable()],a.prototype,"attributionText",null);c([d.property()],a.prototype,"iconClass",void 0);c([d.property(),
e.renderable()],a.prototype,"itemDelimiter",void 0);c([d.property()],a.prototype,"label",void 0);c([d.aliasOf("viewModel.view")],a.prototype,"view",void 0);c([d.property({type:f}),e.renderable(["state","view.size"])],a.prototype,"viewModel",void 0);c([e.accessibleHandler()],a.prototype,"_toggleState",null);return a=c([d.subclass("esri.widgets.Attribution")],a)}(d.declared(n))});