// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
(function(b,f){var q,g=function(){return"undefined"!==typeof x&&"function"!==typeof x?x:"undefined"!==typeof window?window:"undefined"!==typeof self?self:this}(),n=function(){},l=function(e){for(var m in e)return 0;return 1},k={}.toString,d=function(e){return"[object Function]"==k.call(e)},h=function(e){return"[object String]"==k.call(e)},c=function(e){return"[object Array]"==k.call(e)},a=function(e,m){if(e)for(var a=0;a<e.length;)m(e[a++])},p=function(e,m){for(var a in m)e[a]=m[a];return e},u=function(e,
m){return p(Error(e),{src:"dojoLoader",info:m})},v=1,z=function(){return"_"+v++},t=function(e,m,a){return ma(e,m,a,0,t)},x=g,r=x.document,m=r&&r.createElement("DiV"),e=t.has=function(e){return d(w[e])?w[e]=w[e](x,r,m):w[e]},w=e.cache=f.hasCache;d(b)&&(b=b(g));e.add=function(m,a,c,d){(void 0===w[m]||d)&&(w[m]=a);return c&&e(m)};e.add("host-webworker","undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);e("host-webworker")&&(p(f.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,
"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0}),f.loaderPatch={injectUrl:function(e,m){try{importScripts(e),m()}catch(mb){console.info("failed to load resource ("+e+")"),console.error(mb)}}});for(var y in b.has)e.add(y,b.has[y],0,1);t.async=1;var A=e("csp-restrictions")?function(){}:new Function("return eval(arguments[0]);");t.eval=function(e,m){return A(e+"\r\n//# sourceURL\x3d"+m)};var D={},B=t.signal=function(e,m){e=D[e];a(e&&e.slice(0),function(e){e.apply(null,
c(m)?m:[m])})};y=t.on=function(e,m){var a=D[e]||(D[e]=[]);a.push(m);return{remove:function(){for(var e=0;e<a.length;e++)if(a[e]===m){a.splice(e,1);break}}}};var F=[],C={},G=[],W={},fa=t.map={},V=[],H={},ba="",J={},Z={},g={},O=0,N=function(e){var m,a,c,d;for(m in Z)a=Z[m],(c=m.match(/^url\:(.+)/))?J["url:"+Xa(c[1],e)]=a:"*now"==m?d=a:"*noref"!=m&&(c=Ua(m,e,!0),J[c.mid]=J["url:"+c.url]=a);d&&d(oa(e));Z={}},K=function(e){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(e){return"\\"+e})},M=function(e,
m){m.splice(0,m.length);for(var a in e)m.push([a,e[a],new RegExp("^"+K(a)+"(/|$)"),a.length]);m.sort(function(e,m){return m[3]-e[3]});return m},U=function(e,m){a(e,function(e){m.push([h(e[0])?new RegExp("^"+K(e[0])+"$"):e[0],e[1]])})},T=function(e){var m=e.name;m||(m=e,e={name:m});e=p({main:"main"},e);e.location=e.location?e.location:m;e.packageMap&&(fa[m]=e.packageMap);e.main.indexOf("./")||(e.main=e.main.substring(2));W[m]=e},da=[],Q=function(m,c,d){for(var r in m){"waitSeconds"==r&&(t.waitms=1E3*
(m[r]||0));"cacheBust"==r&&(ba=m[r]?h(m[r])?m[r]:(new Date).getTime()+"":"");if("baseUrl"==r||"combo"==r)t[r]=m[r];m[r]!==w&&(t.rawConfig[r]=m[r],"has"!=r&&e.add("config-"+r,m[r],0,c))}t.baseUrl||(t.baseUrl="./");/\/$/.test(t.baseUrl)||(t.baseUrl+="/");for(r in m.has)e.add(r,m.has[r],0,c);a(m.packages,T);for(var b in m.packagePaths)a(m.packagePaths[b],function(e){var m=b+"/"+e;h(e)&&(e={name:e});e.location=m;T(e)});M(p(fa,m.map),V);a(V,function(e){e[1]=M(e[1],[]);"*"==e[0]&&(V.star=e)});M(p(C,m.paths),
G);U(m.aliases,F);if(c)da.push({config:m.config});else for(r in m.config)c=Ha(r,d),c.config=p(c.config||{},m.config[r]);m.cache&&(N(),Z=m.cache,m.cache["*noref"]&&N());B("config",[m,t.rawConfig])};if(e("dojo-cdn")){var P=r.getElementsByTagName("script");q=0;for(var Y,aa,ga,ea;q<P.length;)if(Y=P[q++],(ga=Y.getAttribute("src"))&&(ea=ga.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))&&(aa=ea[3]||"",f.baseUrl=f.baseUrl||aa,O=Y),ga=Y.getAttribute("data-dojo-config")||Y.getAttribute("djConfig"))g=t.eval("({ "+ga+
" })","data-dojo-config"),O=Y}t.rawConfig={};Q(f,1);e("dojo-cdn")&&((W.dojo.location=aa)&&(aa+="/"),W.dijit.location=aa+"../dijit/",W.dojox.location=aa+"../dojox/");Q(b,1);Q(g,1);var la=function(e){E(function(){a(e.deps,L)})},ma=function(e,m,a,d,r){var w;if(h(e)){if((w=Ha(e,d,!0))&&w.executed)return w.result;throw u("undefinedModule",e);}c(e)||(Q(e,0,d),e=m,m=a);if(c(e))if(e.length){a="require*"+z();for(var b,g=[],v=0;v<e.length;)b=e[v++],g.push(Ha(b,d));w=p(Ia("",a,0,""),{injected:2,deps:g,def:m||
n,require:d?d.require:t,gc:1});H[w.mid]=w;la(w);var k=pa&&!0;E(function(){I(w,k)});w.executed||sa.push(w);ia()}else m&&m();return r},oa=function(e){if(!e)return t;var m=e.require;m||(m=function(a,c,d){return ma(a,c,d,e,m)},e.require=p(m,t),m.module=e,m.toUrl=function(m){return Xa(m,e)},m.toAbsMid=function(m){return Fa(m,e)});return m},sa=[],va=[],ha={},Da=function(e){e.injected=1;ha[e.mid]=1;e.url&&(ha[e.url]=e.pack||1);wb()},za=function(e){e.injected=2;delete ha[e.mid];e.url&&delete ha[e.url];l(ha)&&
Ya()},bb=t.idle=function(){return!va.length&&l(ha)&&!sa.length&&!pa},xa=function(e,m){if(m)for(var a=0;a<m.length;a++)if(m[a][2].test(e))return m[a];return 0},Aa=function(e){var m=[],a,c;for(e=e.replace(/\\/g,"/").split("/");e.length;)a=e.shift(),".."==a&&m.length&&".."!=c?(m.pop(),c=m[m.length-1]):"."!=a&&m.push(c=a);return m.join("/")},Ia=function(e,m,a,c){return{pid:e,mid:m,pack:a,url:c,executed:0,def:0}},hb=function(e,m,c,r,w,p,h,b,g){var v,k,t,l;l=/^\./.test(e);if(/(^\/)|(\:)|(\.js$)/.test(e)||
l&&!m)return Ia(0,e,0,e);e=Aa(l?m.mid+"/../"+e:e);if(/^\./.test(e))throw u("irrationalPath",e);m&&(t=xa(m.mid,p));(t=(t=t||p.star)&&xa(e,t[1]))&&(e=t[1]+e.substring(t[3]));m=(ea=e.match(/^([^\/]+)(\/(.+))?$/))?ea[1]:"";(v=c[m])?e=m+"/"+(k=ea[3]||v.main):m="";var z=0;a(b,function(m){var a=e.match(m[0]);a&&0<a.length&&(z=d(m[1])?e.replace(m[0],m[1]):m[1])});if(z)return hb(z,0,c,r,w,p,h,b,g);if(c=r[e])return g?Ia(c.pid,c.mid,c.pack,c.url):r[e];r=(t=xa(e,h))?t[1]+e.substring(t[3]):m?("/"===v.location.slice(-1)?
v.location.slice(0,-1):v.location)+"/"+k:e;/(^\/)|(\:)/.test(r)||(r=w+r);return Ia(m,e,v,Aa(r+".js"))},Ua=function(e,m,a){return hb(e,m,W,H,t.baseUrl,a?[]:V,a?[]:G,a?[]:F)},Ka=function(e,m,a){return e.normalize?e.normalize(m,function(e){return Fa(e,a)}):Fa(m,a)},La=0,Ha=function(e,m,a){var c,d;(c=e.match(/^(.+?)\!(.*)$/))?(d=Ha(c[1],m,a),5!==d.executed||d.load||Pa(d),d.load?(c=Ka(d,c[2],m),e=d.mid+"!"+(d.dynamic?++La+"!":"")+c):(c=c[2],e=d.mid+"!"+ ++La+"!waitingForPlugin"),e={plugin:d,mid:e,req:oa(m),
prid:c}):e=Ua(e,m);return H[e.mid]||!a&&(H[e.mid]=e)},Fa=t.toAbsMid=function(e,m){return Ua(e,m).mid},Xa=t.toUrl=function(e,m){m=Ua(e+"/x",m);var a=m.url;return ka(0===m.pid?e:a.substring(0,a.length-5))},Ja={injected:2,executed:5,def:3,result:3};aa=function(e){return H[e]=p({mid:e},Ja)};var Qa=aa("require"),R=aa("exports"),Ga=aa("module"),wa={},ja=0,Pa=function(e){var m=e.result;e.dynamic=m.dynamic;e.normalize=m.normalize;e.load=m.load;return e},Ma=function(e){var m={};a(e.loadQ,function(a){var c=
Ka(e,a.prid,a.req.module),d=e.dynamic?a.mid.replace(/waitingForPlugin$/,c):e.mid+"!"+c,c=p(p({},a),{mid:d,prid:c,injected:0});H[d]&&H[d].injected||qa(H[d]=c);m[a.mid]=H[d];za(a);delete H[a.mid]});e.loadQ=0;var c=function(e){for(var a=e.deps||[],c=0;c<a.length;c++)(e=m[a[c].mid])&&(a[c]=e)},d;for(d in H)c(H[d]);a(sa,c)},na=function(e){t.trace("loader-finish-exec",[e.mid]);e.executed=5;e.defOrder=ja++;e.loadQ&&(Pa(e),Ma(e));for(q=0;q<sa.length;)sa[q]===e?sa.splice(q,1):q++;/^require\*/.test(e.mid)&&
delete H[e.mid]},db=[],I=function(e,m){if(4===e.executed)return t.trace("loader-circular-dependency",[db.concat(e.mid).join("-\x3e")]),!e.def||m?wa:e.cjs&&e.cjs.exports;if(!e.executed){if(!e.def)return wa;var a=e.mid,c=e.deps||[],r,w=[],p=0;for(e.executed=4;r=c[p++];){r=r===Qa?oa(e):r===R?e.cjs.exports:r===Ga?e.cjs:I(r,m);if(r===wa)return e.executed=0,t.trace("loader-exec-module",["abort",a]),wa;w.push(r)}t.trace("loader-run-factory",[e.mid]);m=e.def;w=d(m)?m.apply(null,w):m;e.result=void 0===w&&
e.cjs?e.cjs.exports:w;na(e)}return e.result},pa=0,E=function(e){try{pa++,e()}catch(ub){throw ub;}finally{pa--}bb()&&B("idle",[])},ia=function(){pa||E(function(){for(var e,m,a=0;a<sa.length;)e=ja,m=sa[a],I(m),e!=ja?a=0:a++})},ka="function"==typeof b.fixupUrl?b.fixupUrl:function(e){e+="";return e+(ba?(/\?/.test(e)?"\x26":"?")+ba:"")};void 0===e("dojo-loader-eval-hint-url")&&e.add("dojo-loader-eval-hint-url",1);var qa=function(e){var m=e.plugin;5!==m.executed||m.load||Pa(m);var a=function(m){e.result=
m;za(e);na(e);ia()};m.load?m.load(e.prid,e.req,a):m.loadQ?m.loadQ.push(e):(m.loadQ=[e],sa.unshift(m),L(m))},X=0,ca=function(m,a){e("config-stripStrict")&&(m=m.replace(/(["'])use strict\1/g,""));m===X?X.call(null):t.eval(m,e("dojo-loader-eval-hint-url")?a.url:a.mid)},L=function(m){var a=m.mid,c=m.url;if(!(m.executed||m.injected||ha[a]||m.url&&(m.pack&&ha[m.url]===m.pack||1==ha[m.url])))if(Da(m),m.plugin)qa(m);else{var d=function(){Na(m);if(2!==m.injected){if(e("dojo-enforceDefine")){B("error",u("noDefine",
m));return}za(m);p(m,Ja);t.trace("loader-define-nonmodule",[m.url])}ia()};(X=J[a]||J["url:"+m.url])?(t.trace("loader-inject",["cache",m.mid,c]),ca(X,m),d()):(t.trace("loader-inject",["script",m.mid,c]),t.injectUrl(ka(c),d,m))}},nb=function(e,m,a){t.trace("loader-define-module",[e.mid,m]);if(2===e.injected)return B("error",u("multipleDefine",e)),e;p(e,{deps:m,def:a,cjs:{id:e.mid,uri:e.url,exports:e.result={},setExports:function(m){e.cjs.exports=m},config:function(){return e.config}}});for(var c=0;m[c];c++)m[c]=
Ha(m[c],e);za(e);d(a)||m.length||(e.result=a,na(e));return e},Na=function(e,m){for(var c=[],d,r;va.length;)r=va.shift(),m&&(r[0]=m.shift()),d=r[0]&&Ha(r[0])||e,c.push([d,r[1],r[2]]);N(e);a(c,function(e){la(nb.apply(null,e))})},Ya=n,wb=n;e("dom");if(e("dom")){var Ra=function(e,m,a,c){e.addEventListener(m,c,!1);return function(){e.removeEventListener(m,c,!1)}},xb=Ra(window,"load","onload",function(){t.pageLoaded=1;try{"complete"!=r.readyState&&(r.readyState="complete")}catch(tb){}xb()}),P=r.getElementsByTagName("script");
for(q=0;!O;)/^dojo/.test((Y=P[q++])&&Y.type)||(O=Y);t.injectUrl=function(e,m,a){a=a.node=r.createElement("script");var c=Ra(a,"load","onreadystatechange",function(e){e=e||window.event;var a=e.target||e.srcElement;if("load"===e.type||/complete|loaded/.test(a.readyState))c(),d(),m&&m()}),d=Ra(a,"error","onerror",function(m){c();d();B("error",u("scriptError",[e,m]))});a.type="text/javascript";a.charset="utf-8";a.src=e;O.parentNode.insertBefore(a,O);return a}}t.log=n;t.trace=n;Y=function(e,m,a){var c=
arguments.length,r=["require","exports","module"],w=[0,e,m];1==c?w=[0,d(e)?r:[],e]:2==c&&h(e)?w=[e,d(m)?r:[],m]:3==c&&(w=[e,m,a]);t.trace("loader-define",w.slice(0,2));(c=w[0]&&Ha(w[0]))&&!ha[c.mid]?la(nb(c,w[1],w[2])):va.push(w)};Y.amd={vendor:"dojotoolkit.org"};p(p(t,f.loaderPatch),b.loaderPatch);y("error",function(e){try{if(console.error(e),e instanceof Error){for(var m in e)console.log(m+":",e[m]);console.log(".")}}catch(mb){}});p(t,{uid:z,cache:J,packs:W});x.define||(x.define=Y,x.require=t,a(da,
function(e){Q(e)}),Y=g.deps||b.deps||f.deps,b=g.callback||b.callback||f.callback,t.boot=Y||b?[Y||[],b]:0)})(function(b){return b.dojoConfig||b.djConfig||b.require||{}},{aliases:[[/^webgl-engine/,function(){return"esri/views/3d/webgl-engine"}],[/^engine/,function(){return"esri/views/3d/webgl-engine"}],[/^esri-hydra/,function(){return"esri"}]],async:1,baseUrl:"https://ycabon.github.io/presentations/2018-user-conference/arcgis-js-api-road-ahead/demos/gamepad/api-snapshot/dojo",hasCache:{"config-deferredInstrumentation":0,"config-selectorEngine":"lite","config-tlmSiblingOfDojo":1,
"dojo-built":1,"dojo-has-api":1,"dojo-loader":1,"dojo-undef-api":0,dom:1,"esri-built":1,"esri-featurelayer-webgl":0,"esri-promise-compatibility":1,"esri-promise-compatibility-deprecation-warnings":1,"host-browser":1},map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}},packages:[{location:".",name:"dojo"},{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},
{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../dstore",main:"Store",name:"dstore"},{location:"../esri",name:"esri"},{location:"../moment",main:"moment",name:"moment"},{location:"../@dojo",name:"@dojo"},{location:"../cldrjs",main:"dist/cldr",name:"cldrjs"},{location:"../globalize",main:"dist/globalize",name:"globalize"},{location:"../maquette",main:"dist/maquette.umd",name:"maquette"},{location:"../maquette-css-transitions",main:"dist/maquette-css-transitions.umd",name:"maquette-css-transitions"},
{location:"../maquette-jsx",main:"dist/maquette-jsx.umd",name:"maquette-jsx"},{location:"../tslib",main:"tslib",name:"tslib"}]});
require({cache:{"dojo/domReady":function(){define(["./global","./has"],function(b,f){function q(a){h.push(a);d&&g()}function g(){if(!c){for(c=!0;h.length;)try{h.shift()(n)}catch(v){console.error(v,"in domReady callback",v.stack)}c=!1;q._onQEmpty()}}var n=document,l={loaded:1,complete:1},k="string"!=typeof n.readyState,d=!!l[n.readyState],h=[],c;q.load=function(a,c,d){q(d)};q._Q=h;q._onQEmpty=function(){};k&&(n.readyState="loading");if(!d){var a=[],p=function(a){a=a||b.event;d||"readystatechange"==
a.type&&!l[n.readyState]||(k&&(n.readyState="complete"),d=1,g())};f=function(a,c){a.addEventListener(c,p,!1);h.push(function(){a.removeEventListener(c,p,!1)})};f(n,"DOMContentLoaded");f(b,"load");"onreadystatechange"in n?f(n,"readystatechange"):k||a.push(function(){return l[n.readyState]});if(a.length){var u=function(){if(!d){for(var c=a.length;c--;)if(a[c]()){p("poller");return}setTimeout(u,30)}};u()}}return q})},"dojo/global":function(){define(function(){return"undefined"!==typeof global&&"function"!==
typeof global?global:"undefined"!==typeof window?window:"undefined"!==typeof self?self:this})},"dojo/has":function(){define(["./global","require","module"],function(b,f,q){var g=f.has||function(){};if(!g("dojo-has-api")){var n=(f="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location==location&&window.document==document)&&document,l=n&&n.createElement("DiV"),k=q.config&&q.config()||{},g=function(d){return"function"==typeof k[d]?k[d]=k[d](b,n,l):k[d]};
g.cache=k;g.add=function(d,h,c,a){("undefined"==typeof k[d]||a)&&(k[d]=h);return c&&g(d)};g.add("host-browser",f);g.add("dom",f)}g("host-browser")&&(g.add("touch","ontouchstart"in document||"onpointerdown"in document&&0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints),g.add("touch-events","ontouchstart"in document),g.add("pointer-events","pointerEnabled"in window.navigator?window.navigator.pointerEnabled:"PointerEvent"in window),g.add("device-width",screen.availWidth||innerWidth),q=document.createElement("form"),
g.add("dom-attributes-specified-flag",0<q.attributes.length&&40>q.attributes.length));g.clearElement=function(d){d.innerHTML="";return d};g.normalize=function(d,h){var c=d.match(/[\?:]|[^:\?]*/g),a=0,p=function(d){var h=c[a++];if(":"==h)return 0;if("?"==c[a++]){if(!d&&g(h))return p();p(!0);return p(d)}return h||0};return(d=p())&&h(d)};g.load=function(d,h,c){d?h([d],c):c()};return g})},"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("../ready ./kernel ./connect ./unload ./window ./event ./html ./NodeList ../query ./xhr ./fx".split(" "),
function(b){return b})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./has!host-browser?./domReady","./_base/lang"],function(b,f,q,g,n){var l=0,k=[],d=0;f=function(){l=1;b._postLoad=b.config.afterOnLoad=!0;h()};var h=function(){if(!d){for(d=1;l&&(!g||0==g._Q.length)&&(q.idle?q.idle():1)&&k.length;){var a=k.shift();try{a()}catch(u){if(u.info=u.message,q.signal)q.signal("error",u);else throw u;}}d=0}};q.on&&q.on("idle",h);g&&(g._onQEmpty=h);var c=b.ready=b.addOnLoad=function(a,
c,d){var p=n._toArray(arguments);"number"!=typeof a?(d=c,c=a,a=1E3):p.shift();d=d?n.hitch.apply(b,p):function(){c()};d.priority=a;for(p=0;p<k.length&&a>=k[p].priority;p++);k.splice(p,0,d);h()},a=b.config.addOnLoad;if(a)c[n.isArray(a)?"apply":"call"](b,a);g?g(f):f();return c})},"dojo/_base/kernel":function(){define(["../global","../has","./config","require","module"],function(b,f,q,g,n){var l,k={},d={},h={config:q,global:b,dijit:k,dojox:d},k={dojo:["dojo",h],dijit:["dijit",k],dojox:["dojox",d]};n=
g.map&&g.map[n.id.match(/[^\/]+/)[0]];for(l in n)k[l]?k[l][0]=n[l]:k[l]=[n[l],{}];for(l in k)n=k[l],n[1]._scopeName=n[0],q.noGlobals||(b[n[0]]=n[1]);h.scopeMap=k;h.baseUrl=h.config.baseUrl=g.baseUrl;h.isAsync=g.async;h.locale=q.locale;b="$Rev: aaa6750 $".match(/[0-9a-f]{7,}/);h.version={major:1,minor:13,patch:0,flag:"",revision:b?b[0]:NaN,toString:function(){var a=h.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};f("csp-restrictions")||Function("d","d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(h);
h.exit=function(){};f("host-webworker");"undefined"!=typeof console||(console={});b="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");var c;for(f=0;c=b[f++];)console[c]?console[c]=Function.prototype.bind.call(console[c],console):function(){var a=c+"";console[a]="log"in console?function(){var c=Array.prototype.slice.call(arguments);c.unshift(a+":");console.log(c.join(" "))}:function(){};console[a]._fake=!0}();h.deprecated=h.experimental=
function(){};h._hasResource={};return h})},"dojo/_base/config":function(){define(["../global","../has","require"],function(b,f,q){b={};q=q.rawConfig;for(var g in q)b[g]=q[g];!b.locale&&"undefined"!=typeof navigator&&(g=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage)&&(b.locale=g.toLowerCase());return b})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(b,f){var q=function(d,h,c){c||(c=d[0]&&b.scopeMap[d[0]]?
b.scopeMap[d.shift()][1]:b.global);try{for(var a=0;a<d.length;a++){var p=d[a];if(!(p in c))if(h)c[p]={};else return;c=c[p]}return c}catch(u){}},g=Object.prototype.toString,n=function(d,h,c){return(c||[]).concat(Array.prototype.slice.call(d,h||0))},l=/\{([^\}]+)\}/g,k={_extraNames:[],_mixin:function(d,h,c){var a,p,b={};for(a in h)p=h[a],a in d&&(d[a]===p||a in b&&b[a]===p)||(d[a]=c?c(p):p);return d},mixin:function(d,h){d||(d={});for(var c=1,a=arguments.length;c<a;c++)k._mixin(d,arguments[c]);return d},
setObject:function(d,h,c){var a=d.split(".");d=a.pop();return(c=q(a,!0,c))&&d?c[d]=h:void 0},getObject:function(d,h,c){return d?q(d.split("."),h,c):c},exists:function(d,h){return void 0!==k.getObject(d,!1,h)},isString:function(d){return"string"==typeof d||d instanceof String},isArray:Array.isArray||function(d){return"[object Array]"==g.call(d)},isFunction:function(d){return"[object Function]"===g.call(d)},isObject:function(d){return void 0!==d&&(null===d||"object"==typeof d||k.isArray(d)||k.isFunction(d))},
isArrayLike:function(d){return!!d&&!k.isString(d)&&!k.isFunction(d)&&!(d.tagName&&"form"==d.tagName.toLowerCase())&&(k.isArray(d)||isFinite(d.length))},isAlien:function(d){return d&&!k.isFunction(d)&&/\{\s*\[native code\]\s*\}/.test(String(d))},extend:function(d,h){for(var c=1,a=arguments.length;c<a;c++)k._mixin(d.prototype,arguments[c]);return d},_hitchArgs:function(d,h){var c=k._toArray(arguments,2),a=k.isString(h);return function(){var p=k._toArray(arguments),g=a?(d||b.global)[h]:h;return g&&g.apply(d||
this,c.concat(p))}},hitch:function(d,h){if(2<arguments.length)return k._hitchArgs.apply(b,arguments);h||(h=d,d=null);if(k.isString(h)){d=d||b.global;if(!d[h])throw['lang.hitch: scope["',h,'"] is null (scope\x3d"',d,'")'].join("");return function(){return d[h].apply(d,arguments||[])}}return d?function(){return h.apply(d,arguments||[])}:h},delegate:function(){function d(){}return function(h,c){d.prototype=h;h=new d;d.prototype=null;c&&k._mixin(h,c);return h}}(),_toArray:f("ie")?function(){function d(d,
c,a){a=a||[];for(c=c||0;c<d.length;c++)a.push(d[c]);return a}return function(h){return(h.item?d:n).apply(this,arguments)}}():n,partial:function(d){return k.hitch.apply(b,[null].concat(k._toArray(arguments)))},clone:function(d){if(!d||"object"!=typeof d||k.isFunction(d))return d;if(d.nodeType&&"cloneNode"in d)return d.cloneNode(!0);if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp)return new RegExp(d);var h,c,a;if(k.isArray(d))for(h=[],c=0,a=d.length;c<a;++c)c in d&&(h[c]=k.clone(d[c]));
else h=d.constructor?new d.constructor:{};return k._mixin(h,d,k.clone)},trim:String.prototype.trim?function(d){return d.trim()}:function(d){return d.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(d,h,c){return d.replace(c||l,k.isFunction(h)?h:function(a,c){return k.getObject(c,!1,h)})}};k.mixin(b,k);return k})},"dojo/sniff":function(){define(["./has"],function(b){if(b("host-browser")){var f=navigator,q=f.userAgent,f=f.appVersion,g=parseFloat(f);b.add("edge",parseFloat(q.split("Edge/")[1])||
void 0);b.add("webkit",!b("edge")&&parseFloat(q.split("WebKit/")[1])||void 0);b.add("chrome",!b("edge")&&!0&&parseFloat(q.split("Chrome/")[1])||void 0);b.add("safari",0<=f.indexOf("Safari")&&!b("chrome")&&!b("edge")?parseFloat(f.split("Version/")[1]):void 0);b.add("mac",0<=f.indexOf("Macintosh"));if(q.match(/(iPhone|iPod|iPad)/)){var n=RegExp.$1.replace(/P/,"p"),l=q.match(/OS ([\d_]+)/)?RegExp.$1:"1",l=parseFloat(l.replace(/_/,".").replace(/_/g,""));b.add(n,l);b.add("ios",l)}b.add("trident",parseFloat(f.split("Trident/")[1])||
void 0);b("webkit")||(0<=q.indexOf("Opera")&&b.add("opera",9.8<=g?parseFloat(q.split("Version/")[1])||g:g),0<=q.indexOf("Gecko")&&!b("trident")&&!b("edge")&&b.add("mozilla",g),b("mozilla")&&b.add("ff",parseFloat(q.split("Firefox/")[1]||q.split("Minefield/")[1])||void 0),document.all&&!b("opera")&&(q=parseFloat(f.split("MSIE ")[1])||void 0,(f=document.documentMode)&&5!=f&&Math.floor(q)!=f&&(q=f),b.add("ie",q)))}return b})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),
function(b,f,q,g,n,l,k,d){function h(a,c,r,m,e){m=d.hitch(r,m);if(!a||!a.addEventListener&&!a.attachEvent)return g.after(a||b.global,c,m,!0);"string"==typeof c&&"on"==c.substring(0,2)&&(c=c.substring(2));a||(a=b.global);if(!e)switch(c){case "keypress":c=v;break;case "mouseenter":c=l.enter;break;case "mouseleave":c=l.leave}return f(a,c,m,e)}function c(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=a.keyChar||a.keyCode}k.add("events-keypress-typed",function(){var a={charCode:0};
try{a=document.createEvent("KeyboardEvent"),(a.initKeyboardEvent||a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(x){}return 0==a.charCode&&!k("opera")});var a={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},p=k("mac")?"metaKey":"ctrlKey",u=function(a,p){p=d.mixin({},a,p);c(p);p.preventDefault=function(){a.preventDefault()};p.stopPropagation=function(){a.stopPropagation()};return p},v;v=k("events-keypress-typed")?function(c,
d){var r=f(c,"keydown",function(e){var m=e.keyCode,c=13!=m&&32!=m&&(27!=m||!k("ie"))&&(48>m||90<m)&&(96>m||111<m)&&(186>m||192<m)&&(219>m||222<m)&&229!=m;if(c||e.ctrlKey){c=c?0:m;if(e.ctrlKey){if(3==m||13==m)return d.call(e.currentTarget,e);c=95<c&&106>c?c-48:!e.shiftKey&&65<=c&&90>=c?c+32:a[c]||c}m=u(e,{type:"keypress",faux:!0,charCode:c});d.call(e.currentTarget,m);if(k("ie"))try{e.keyCode=m.keyCode}catch(A){}}}),m=f(c,"keypress",function(e){var m=e.charCode;e=u(e,{charCode:32<=m?m:0,faux:!0});return d.call(this,
e)});return{remove:function(){r.remove();m.remove()}}}:k("opera")?function(a,c){return f(a,"keypress",function(a){var m=a.which;3==m&&(m=99);m=32>m&&!a.shiftKey?0:m;a.ctrlKey&&!a.shiftKey&&65<=m&&90>=m&&(m+=32);return c.call(this,u(a,{charCode:m}))})}:function(a,d){return f(a,"keypress",function(a){c(a);return d.call(this,a)})};var z={_keypress:v,connect:function(a,c,d,m,e){var r=arguments,p=[],b=0;p.push("string"==typeof r[0]?null:r[b++],r[b++]);var g=r[b+1];p.push("string"==typeof g||"function"==
typeof g?r[b++]:null,r[b++]);for(g=r.length;b<g;b++)p.push(r[b]);return h.apply(this,p)},disconnect:function(a){a&&a.remove()},subscribe:function(a,c,r){return q.subscribe(a,d.hitch(c,r))},publish:function(a,c){return q.publish.apply(q,[a].concat(c))},connectPublisher:function(a,c,d){var m=function(){z.publish(a,arguments)};return d?z.connect(c,d,m):z.connect(c,m)},isCopyKey:function(a){return a[p]}};z.unsubscribe=z.disconnect;d.mixin(b,z);return z})},"dojo/on":function(){define(["require","./_base/kernel",
"./sniff"],function(b,f,q){function g(c,p,h,b,r){if(b=p.match(/(.*):(.*)/))return p=b[2],b=b[1],k.selector(b,p).call(r,c,h);q("touch")&&d.test(p)&&(h=u(h));if(c.addEventListener){var m=p in a,e=m?a[p]:p;c.addEventListener(e,h,m);return{remove:function(){c.removeEventListener(e,h,m)}}}throw Error("Target must be an event emitter");}function n(){this.cancelable=!1;this.defaultPrevented=!0}function l(){this.bubbles=!1}q("dom")&&q("touch");var k=function(a,c,d,p){return"function"!=typeof a.on||"function"==
typeof c||a.nodeType?k.parse(a,c,d,g,p,this):a.on(c,d)};k.pausable=function(a,c,d,p){var r;a=k(a,c,function(){if(!r)return d.apply(this,arguments)},p);a.pause=function(){r=!0};a.resume=function(){r=!1};return a};k.once=function(a,c,d,p){var r=k(a,c,function(){r.remove();return d.apply(this,arguments)});return r};k.parse=function(a,c,d,p,r,m){var e;if(c.call)return c.call(m,a,d);c instanceof Array?e=c:-1<c.indexOf(",")&&(e=c.split(/\s*,\s*/));if(e){var w=[];c=0;for(var h;h=e[c++];)w.push(k.parse(a,
h,d,p,r,m));w.remove=function(){for(var e=0;e<w.length;e++)w[e].remove()};return w}return p(a,c,d,r,m)};var d=/^touch/;k.matches=function(a,c,d,p,r){r=r&&"function"==typeof r.matches?r:f.query;p=!1!==p;1!=a.nodeType&&(a=a.parentNode);for(;!r.matches(a,c,d);)if(a==d||!1===p||!(a=a.parentNode)||1!=a.nodeType)return!1;return a};k.selector=function(a,c,d){return function(p,r){function m(m){return k.matches(m,a,p,d,e)}var e="function"==typeof a?{matches:a}:this,w=c.bubble;return w?k(p,w(m),r):k(p,c,function(e){var a=
m(e.target);if(a)return e.selectorTarget=a,r.call(a,e)})}};var h=[].slice,c=k.emit=function(a,c,d){var p=h.call(arguments,2),r="on"+c;if("parentNode"in a){var m=p[0]={},e;for(e in d)m[e]=d[e];m.preventDefault=n;m.stopPropagation=l;m.target=a;m.type=c;d=m}do a[r]&&a[r].apply(a,p);while(d&&d.bubbles&&(a=a.parentNode));return d&&d.cancelable&&d},a={};k.emit=function(a,d,p){if(a.dispatchEvent&&document.createEvent){var h=(a.ownerDocument||document).createEvent("HTMLEvents");h.initEvent(d,!!p.bubbles,
!!p.cancelable);for(var r in p)r in h||(h[r]=p[r]);return a.dispatchEvent(h)&&h}return c.apply(k,arguments)};if(q("touch"))var p=window.orientation,u=function(a){return function(c){var d=c.corrected;if(!d){var h=c.type;try{delete c.type}catch(e){}if(c.type){var d={},r;for(r in c)d[r]=c[r];d.preventDefault=function(){c.preventDefault()};d.stopPropagation=function(){c.stopPropagation()}}else d=c,d.type=h;c.corrected=d;if("resize"==h){if(p==window.orientation)return null;p=window.orientation;d.type=
"orientationchange";return a.call(this,d)}"rotation"in d||(d.rotation=0,d.scale=1);if(window.TouchEvent&&c instanceof TouchEvent){var h=d.changedTouches[0],m;for(m in h)delete d[m],d[m]=h[m]}}return a.call(this,d)}};return k})},"dojo/topic":function(){define(["./Evented"],function(b){var f=new b;return{publish:function(b,g){return f.emit.apply(f,arguments)},subscribe:function(b,g){return f.on.apply(f,arguments)}}})},"dojo/Evented":function(){define(["./aspect","./on"],function(b,f){function q(){}
var g=b.after;q.prototype={on:function(b,l){return f.parse(this,b,l,function(b,d){return g(b,"on"+d,l,!0)})},emit:function(b,g){var k=[this];k.push.apply(k,arguments);return f.emit.apply(f,k)}};return q})},"dojo/aspect":function(){define([],function(){function b(b,d,h,c){var a=b[d],p="around"==d,g;if(p){var k=h(function(){return a.advice(this,arguments)});g={remove:function(){k&&(k=b=h=null)},advice:function(c,d){return k?k.apply(c,d):a.advice(c,d)}}}else g={remove:function(){if(g.advice){var a=g.previous,
c=g.next;c||a?(a?a.next=c:b[d]=c,c&&(c.previous=a)):delete b[d];b=h=g.advice=null}},id:b.nextId++,advice:h,receiveArguments:c};if(a&&!p)if("after"==d){for(;a.next&&(a=a.next););a.next=g;g.previous=a}else"before"==d&&(b[d]=g,g.next=a,a.previous=g);else b[d]=g;return g}function f(g){return function(d,h,c,a){var p=d[h],u;p&&p.target==d||(d[h]=u=function(){for(var a=u.nextId,c=arguments,d=u.before;d;)d.advice&&(c=d.advice.apply(this,c)||c),d=d.next;if(u.around)var p=u.around.advice(this,c);for(d=u.after;d&&
d.id<a;){if(d.advice)if(d.receiveArguments)var r=d.advice.apply(this,c),p=r===q?p:r;else p=d.advice.call(this,p,c);d=d.next}return p},p&&(u.around={advice:function(a,c){return p.apply(a,c)}}),u.target=d,u.nextId=u.nextId||0);d=b(u||p,g,c,a);c=null;return d}}var q,g=f("after"),n=f("before"),l=f("around");return{before:n,around:l,after:g}})},"dojo/_base/event":function(){define(["./kernel","../on","../has","../dom-geometry"],function(b,f,q,g){if(f._fixEvent){var n=f._fixEvent;f._fixEvent=function(b,
k){(b=n(b,k))&&g.normalizeEvent(b);return b}}q={fix:function(b,g){return f._fixEvent?f._fixEvent(b,g):b},stop:function(b){b.preventDefault();b.stopPropagation()}};b.fixEvent=q.fix;b.stopEvent=q.stop;return q})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(b,f,q,g){function n(c,a,d,h,b,g){g=g||"px";c=c.style;isNaN(a)||(c.left=a+g);isNaN(d)||(c.top=d+g);0<=h&&(c.width=h+g);0<=b&&(c.height=b+g)}function l(c){return"button"==c.tagName.toLowerCase()||
"input"==c.tagName.toLowerCase()&&"button"==(c.getAttribute("type")||"").toLowerCase()}function k(c){return"border-box"==d.boxModel||"table"==c.tagName.toLowerCase()||l(c)}var d={boxModel:"content-box"};b("ie")&&(d.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");d.getPadExtents=function(c,a){c=q.byId(c);var d=a||g.getComputedStyle(c),h=g.toPixelValue;a=h(c,d.paddingLeft);var b=h(c,d.paddingTop),k=h(c,d.paddingRight);c=h(c,d.paddingBottom);return{l:a,t:b,r:k,b:c,w:a+k,h:b+c}};
d.getBorderExtents=function(c,a){c=q.byId(c);var d=g.toPixelValue,h=a||g.getComputedStyle(c);a="none"!=h.borderLeftStyle?d(c,h.borderLeftWidth):0;var b="none"!=h.borderTopStyle?d(c,h.borderTopWidth):0,k="none"!=h.borderRightStyle?d(c,h.borderRightWidth):0;c="none"!=h.borderBottomStyle?d(c,h.borderBottomWidth):0;return{l:a,t:b,r:k,b:c,w:a+k,h:b+c}};d.getPadBorderExtents=function(c,a){c=q.byId(c);var p=a||g.getComputedStyle(c);a=d.getPadExtents(c,p);c=d.getBorderExtents(c,p);return{l:a.l+c.l,t:a.t+
c.t,r:a.r+c.r,b:a.b+c.b,w:a.w+c.w,h:a.h+c.h}};d.getMarginExtents=function(c,a){c=q.byId(c);var d=a||g.getComputedStyle(c),h=g.toPixelValue;a=h(c,d.marginLeft);var b=h(c,d.marginTop),k=h(c,d.marginRight);c=h(c,d.marginBottom);return{l:a,t:b,r:k,b:c,w:a+k,h:b+c}};d.getMarginBox=function(c,a){c=q.byId(c);a=a||g.getComputedStyle(c);a=d.getMarginExtents(c,a);var p=c.offsetLeft-a.l,h=c.offsetTop-a.t,k=c.parentNode,l=g.toPixelValue;8==b("ie")&&k&&(k=g.getComputedStyle(k),p-="none"!=k.borderLeftStyle?l(c,
k.borderLeftWidth):0,h-="none"!=k.borderTopStyle?l(c,k.borderTopWidth):0);return{l:p,t:h,w:c.offsetWidth+a.w,h:c.offsetHeight+a.h}};d.getContentBox=function(c,a){c=q.byId(c);var p=a||g.getComputedStyle(c);a=c.clientWidth;var h,k=d.getPadExtents(c,p);h=d.getBorderExtents(c,p);var p=c.offsetLeft+k.l+h.l,l=c.offsetTop+k.t+h.t;a?h=c.clientHeight:(a=c.offsetWidth-h.w,h=c.offsetHeight-h.h);if(8==b("ie")){var t=c.parentNode,n=g.toPixelValue;t&&(t=g.getComputedStyle(t),p-="none"!=t.borderLeftStyle?n(c,t.borderLeftWidth):
0,l-="none"!=t.borderTopStyle?n(c,t.borderTopWidth):0)}return{l:p,t:l,w:a-k.w,h:h-k.h}};d.setContentSize=function(c,a,p){c=q.byId(c);var h=a.w;a=a.h;k(c)&&(p=d.getPadBorderExtents(c,p),0<=h&&(h+=p.w),0<=a&&(a+=p.h));n(c,NaN,NaN,h,a)};var h={l:0,t:0,w:0,h:0};d.setMarginBox=function(c,a,p){c=q.byId(c);var u=p||g.getComputedStyle(c);p=a.w;var v=a.h,f=k(c)?h:d.getPadBorderExtents(c,u),u=d.getMarginExtents(c,u);if(b("webkit")&&l(c)){var t=c.style;0<=p&&!t.width&&(t.width="4px");0<=v&&!t.height&&(t.height=
"4px")}0<=p&&(p=Math.max(p-f.w-u.w,0));0<=v&&(v=Math.max(v-f.h-u.h,0));n(c,a.l,a.t,p,v)};d.isBodyLtr=function(c){c=c||f.doc;return"ltr"==(f.body(c).dir||c.documentElement.dir||"ltr").toLowerCase()};d.docScroll=function(c){c=c||f.doc;var a=f.doc.parentWindow||f.doc.defaultView;return"pageXOffset"in a?{x:a.pageXOffset,y:a.pageYOffset}:(a=c.documentElement)&&{x:d.fixIeBiDiScrollLeft(a.scrollLeft||0,c),y:a.scrollTop||0}};d.getIeDocumentElementOffset=function(c){return{x:0,y:0}};d.fixIeBiDiScrollLeft=
function(c,a){a=a||f.doc;var p=b("ie");if(p&&!d.isBodyLtr(a)){a=a.documentElement;var h=f.global;6==p&&h.frameElement&&a.scrollHeight>a.clientHeight&&(c+=a.clientLeft);return 8>p?c+a.clientWidth-a.scrollWidth:-c}return c};d.position=function(c,a){c=q.byId(c);f.body(c.ownerDocument);var p=c.getBoundingClientRect(),p={x:p.left,y:p.top,w:p.right-p.left,h:p.bottom-p.top};9>b("ie")&&(p.x-=0,p.y-=0);a&&(c=d.docScroll(c.ownerDocument),p.x+=c.x,p.y+=c.y);return p};d.getMarginSize=function(c,a){c=q.byId(c);
a=d.getMarginExtents(c,a||g.getComputedStyle(c));c=c.getBoundingClientRect();return{w:c.right-c.left+a.w,h:c.bottom-c.top+a.h}};d.normalizeEvent=function(c){"layerX"in c||(c.layerX=c.offsetX,c.layerY=c.offsetY);if(!("pageX"in c)){var a=c.target,a=a&&a.ownerDocument||document,p=a.documentElement;c.pageX=c.clientX+d.fixIeBiDiScrollLeft(p.scrollLeft||0,a);c.pageY=c.clientY+(p.scrollTop||0)}};return d})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(b,f,q){var g={global:b.global,
doc:b.global.document||null,body:function(g){g=g||b.doc;return g.body||g.getElementsByTagName("body")[0]},setContext:function(f,l){b.global=g.global=f;b.doc=g.doc=l},withGlobal:function(f,l,k,d){var h=b.global;try{return b.global=g.global=f,g.withDoc.call(null,f.document,l,k,d)}finally{b.global=g.global=h}},withDoc:function(f,l,k,d){var h=g.doc,c=q("ie"),a,p,u;try{return b.doc=g.doc=f,b.isQuirks=0,q("ie")&&(u=f.parentWindow)&&u.navigator&&(a=parseFloat(u.navigator.appVersion.split("MSIE ")[1])||void 0,
(p=f.documentMode)&&5!=p&&Math.floor(a)!=p&&(a=p),b.isIE=q.add("ie",a,!0,!0)),k&&"string"==typeof l&&(l=k[l]),l.apply(k,d||[])}finally{b.doc=g.doc=h,b.isQuirks=0,b.isIE=q.add("ie",c,!0,!0)}}};f.mixin(b,g);return g})},"dojo/dom":function(){define(["./sniff","./_base/window","./_base/kernel"],function(b,f,q){if(7>=b("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(l){}var g={};b("ie")?g.byId=function(b,g){if("string"!=typeof b)return b;var d=g||f.doc;g=b&&d.getElementById(b);if(!g||
g.attributes.id.value!=b&&g.id!=b){d=d.all[b];if(!d||d.nodeName)d=[d];for(var h=0;g=d[h++];)if(g.attributes&&g.attributes.id&&g.attributes.id.value==b||g.id==b)return g}else return g}:g.byId=function(b,g){return("string"==typeof b?(g||f.doc).getElementById(b):b)||null};q=q.global.document||null;b.add("dom-contains",!(!q||!q.contains));g.isDescendant=b("dom-contains")?function(b,k){return!(!(k=g.byId(k))||!k.contains(g.byId(b)))}:function(b,k){try{for(b=g.byId(b),k=g.byId(k);b;){if(b==k)return!0;b=
b.parentNode}}catch(d){}return!1};b.add("css-user-select",function(b,g,d){if(!d)return!1;b=d.style;g=["Khtml","O","Moz","Webkit"];d=g.length;var h="userSelect";do if("undefined"!==typeof b[h])return h;while(d--&&(h=g[d]+"UserSelect"));return!1});var n=b("css-user-select");g.setSelectable=n?function(b,k){g.byId(b).style[n]=k?"":"none"}:function(b,k){b=g.byId(b);var d=b.getElementsByTagName("*"),h=d.length;if(k)for(b.removeAttribute("unselectable");h--;)d[h].removeAttribute("unselectable");else for(b.setAttribute("unselectable",
"on");h--;)d[h].setAttribute("unselectable","on")};return g})},"dojo/dom-style":function(){define(["./sniff","./dom","./_base/window"],function(b,f,q){function g(c,d,h){d=d.toLowerCase();if("auto"==h){if("height"==d)return c.offsetHeight;if("width"==d)return c.offsetWidth}if("fontweight"==d)switch(h){case 700:return"bold";default:return"normal"}d in a||(a[d]=p.test(d));return a[d]?k(c,h):h}var n,l={};n=b("webkit")?function(a){var c;if(1==a.nodeType){var d=a.ownerDocument.defaultView;c=d.getComputedStyle(a,
null);!c&&a.style&&(a.style.display="",c=d.getComputedStyle(a,null))}return c||{}}:b("ie")&&9>b("ie")?function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){if(1===a.nodeType){var c=a.ownerDocument.defaultView;return(c.opener?c:q.global.window).getComputedStyle(a,null)}return{}};l.getComputedStyle=n;var k;k=b("ie")?function(a,c){if(!c)return 0;if("medium"==c)return 4;if(c.slice&&"px"==c.slice(-2))return parseFloat(c);var d=a.style,p=a.runtimeStyle,r=d.left,m=p.left;p.left=
a.currentStyle.left;try{d.left=c,c=d.pixelLeft}catch(e){c=0}d.left=r;p.left=m;return c}:function(a,c){return parseFloat(c)||0};l.toPixelValue=k;var d=function(a,c){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(t){return c?{}:null}},h=9>b("ie")||(b("ie"),0)?function(a){try{return d(a).Opacity/100}catch(z){return 1}}:function(a){return n(a).opacity},c=9>b("ie")||(b("ie"),0)?function(a,p){""===p&&(p=1);var h=100*p;1===p?(a.style.zoom="",d(a)&&(a.style.filter=a.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,
""))):(a.style.zoom=1,d(a)?d(a,1).Opacity=h:a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d"+h+")",d(a,1).Enabled=!0);if("tr"==a.tagName.toLowerCase())for(a=a.firstChild;a;a=a.nextSibling)"td"==a.tagName.toLowerCase()&&c(a,p);return p}:function(a,c){return a.style.opacity=c},a={left:!0,top:!0},p=/margin|padding|width|height|max|min|offset/,u={cssFloat:1,styleFloat:1,"float":1};l.get=function(a,c){var d=f.byId(a),p=arguments.length;if(2==p&&"opacity"==c)return h(d);c=u[c]?"cssFloat"in
d.style?"cssFloat":"styleFloat":c;var r=l.getComputedStyle(d);return 1==p?r:g(d,c,r[c]||d.style[c])};l.set=function(a,d,p){var h=f.byId(a),r=arguments.length,m="opacity"==d;d=u[d]?"cssFloat"in h.style?"cssFloat":"styleFloat":d;if(3==r)return m?c(h,p):h.style[d]=p;for(var e in d)l.set(a,e,d[e]);return l.getComputedStyle(h)};return l})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(b,f,q,g,n){function l(b,d){var h=function(c,a){return f(c,b,function(p){if(d)return d(p,
a);if(!g.isDescendant(p.relatedTarget,c))return a.call(this,p)})};h.bubble=function(c){return l(b,function(a,d){var p=c(a.target),h=a.relatedTarget;if(p&&p!=(h&&1==h.nodeType&&c(h)))return d.call(p,a)})};return h}q={LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(b,d){return b.button==d},isLeft:function(b){return 0==b.button},isMiddle:function(b){return 1==b.button},isRight:function(b){return 2==b.button}};b.mouseButtons=q;return{_eventHandler:l,enter:l("mouseover"),leave:l("mouseout"),wheel:"mousewheel",
isLeft:q.isLeft,isMiddle:q.isMiddle,isRight:q.isRight}})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(b,f,q){if(!q("host-browser"))return q;b._name="browser";f.mixin(b,{isBrowser:!0,isFF:q("ff"),isIE:q("ie"),isKhtml:0,isWebKit:q("webkit"),isMozilla:q("mozilla"),isMoz:q("mozilla"),isOpera:q("opera"),isSafari:q("safari"),isChrome:q("chrome"),isMac:q("mac"),isIos:q("ios"),isAndroid:0,isWii:0,isQuirks:0,isAir:0});return q})},"dojo/keys":function(){define(["./_base/kernel",
"./sniff"],function(b,f){return b.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:f("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,
NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:f("mac")?f("safari")?91:224:17}})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(b,f,q){var g=window,n={addOnWindowUnload:function(l,k){b.windowUnloaded||q(g,"unload",b.windowUnloaded=function(){});q(g,"unload",f.hitch(l,
k))},addOnUnload:function(b,k){q(g,"beforeunload",f.hitch(b,k))}};b.addOnWindowUnload=n.addOnWindowUnload;b.addOnUnload=n.addOnUnload;return n})},"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),function(b,f,q,g,n,l,k,d){b.byId=f.byId;b.isDescendant=f.isDescendant;b.setSelectable=f.setSelectable;b.getAttr=g.get;b.setAttr=g.set;b.hasAttr=g.has;b.removeAttr=g.remove;b.getNodeProp=g.getNodeProp;b.attr=
function(d,c,a){return 2==arguments.length?g["string"==typeof c?"get":"set"](d,c):g.set(d,c,a)};b.hasClass=l.contains;b.addClass=l.add;b.removeClass=l.remove;b.toggleClass=l.toggle;b.replaceClass=l.replace;b._toDom=b.toDom=k.toDom;b.place=k.place;b.create=k.create;b.empty=function(d){k.empty(d)};b._destroyElement=b.destroy=function(d){k.destroy(d)};b._getPadExtents=b.getPadExtents=d.getPadExtents;b._getBorderExtents=b.getBorderExtents=d.getBorderExtents;b._getPadBorderExtents=b.getPadBorderExtents=
d.getPadBorderExtents;b._getMarginExtents=b.getMarginExtents=d.getMarginExtents;b._getMarginSize=b.getMarginSize=d.getMarginSize;b._getMarginBox=b.getMarginBox=d.getMarginBox;b.setMarginBox=d.setMarginBox;b._getContentBox=b.getContentBox=d.getContentBox;b.setContentSize=d.setContentSize;b._isBodyLtr=b.isBodyLtr=d.isBodyLtr;b._docScroll=b.docScroll=d.docScroll;b._getIeDocumentElementOffset=b.getIeDocumentElementOffset=d.getIeDocumentElementOffset;b._fixIeBiDiScrollLeft=b.fixIeBiDiScrollLeft=d.fixIeBiDiScrollLeft;
b.position=d.position;b.marginBox=function(h,c){return c?d.setMarginBox(h,c):d.getMarginBox(h)};b.contentBox=function(h,c){return c?d.setContentSize(h,c):d.getContentBox(h)};b.coords=function(h,c){b.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");h=f.byId(h);var a=q.getComputedStyle(h),a=d.getMarginBox(h,a);h=d.position(h,c);a.x=h.x;a.y=h.y;return a};b.getProp=n.get;b.setProp=n.set;b.prop=function(d,c,a){return 2==arguments.length?n["string"==typeof c?"get":"set"](d,c):n.set(d,
c,a)};b.getStyle=q.get;b.setStyle=q.set;b.getComputedStyle=q.getComputedStyle;b.__toPixelValue=b.toPixelValue=q.toPixelValue;b.style=function(d,c,a){switch(arguments.length){case 1:return q.get(d);case 2:return q["string"==typeof c?"get":"set"](d,c)}return q.set(d,c,a)};return b})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),function(b,f,q,g,n,l){function k(c,a){c=c.getAttributeNode&&c.getAttributeNode(a);return!!c&&c.specified}var d={innerHTML:1,
textContent:1,className:1,htmlFor:f("ie"),value:1},h={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};b.has=function(c,a){var p=a.toLowerCase();return d[l.names[p]||a]||k(g.byId(c),h[p]||a)};b.get=function(c,a){c=g.byId(c);var p=a.toLowerCase(),b=l.names[p]||a,v=c[b];if(d[b]&&"undefined"!=typeof v)return v;if("textContent"==b)return l.get(c,b);if("href"!=b&&("boolean"==typeof v||q.isFunction(v)))return v;a=h[p]||a;return k(c,a)?c.getAttribute(a):null};b.set=function(c,a,p){c=
g.byId(c);if(2==arguments.length){for(var u in a)b.set(c,u,a[u]);return c}u=a.toLowerCase();var k=l.names[u]||a,f=d[k];if("style"==k&&"string"!=typeof p)return n.set(c,p),c;if(f||"boolean"==typeof p||q.isFunction(p))return l.set(c,a,p);c.setAttribute(h[u]||a,p);return c};b.remove=function(c,a){g.byId(c).removeAttribute(h[a.toLowerCase()]||a)};b.getNodeProp=function(c,a){c=g.byId(c);var d=a.toLowerCase(),b=l.names[d]||a;if(b in c&&"href"!=b)return c[b];a=h[d]||a;return k(c,a)?c.getAttribute(a):null}})},
"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),function(b,f,q,g,n,l,k,d){var h={},c=1,a=f._scopeName+"attrid";b.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"};b.get=function(a,c){a=n.byId(a);var d=c.toLowerCase();return a[b.names[d]||c]};b.set=function(p,u,v){p=
n.byId(p);if(2==arguments.length&&"string"!=typeof u){for(var f in u)b.set(p,f,u[f]);return p}f=u.toLowerCase();f=b.names[f]||u;if("style"==f&&"string"!=typeof v)return l.set(p,v),p;if("innerHTML"==f)return q("ie")&&p.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(k.empty(p),p.appendChild(k.toDom(v,p.ownerDocument))):p[f]=v,p;if(g.isFunction(v)){var t=p[a];t||(t=c++,p[a]=t);h[t]||(h[t]={});var x=h[t][f];if(x)d.disconnect(x);else try{delete p[f]}catch(r){}v?
h[t][f]=d.connect(p,f,v):p[f]=null;return p}p[f]=v;return p}})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(b,f,q,g,n,l){function k(a,m){var e=m.parentNode;e&&e.insertBefore(a,m)}function d(a){if("innerHTML"in a)try{a.innerHTML="";return}catch(e){}for(var m;m=a.lastChild;)a.removeChild(m)}var h={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table",
"thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},c=/<\s*([\w\:]+)/,a={},p=0,u="__"+f._scopeName+"ToDomId",v;for(v in h)h.hasOwnProperty(v)&&(f=h[v],f.pre="option"==v?'\x3cselect multiple\x3d"multiple"\x3e':"\x3c"+f.join("\x3e\x3c")+"\x3e",f.post="\x3c/"+f.reverse().join("\x3e\x3c/")+"\x3e");var z;8>=q("ie")&&(z=function(a){a.__dojo_html5_tested="yes";var m=t("div",{innerHTML:"\x3cnav\x3ea\x3c/nav\x3e",style:{visibility:"hidden"}},a.body);1!==
m.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(e){a.createElement(e)});x(m)});b.toDom=function(d,m){m=m||g.doc;var e=m[u];e||(m[u]=e=++p+"",a[e]=m.createElement("div"));8>=q("ie")&&!m.__dojo_html5_tested&&m.body&&z(m);d+="";var r=d.match(c),b=r?r[1].toLowerCase():"",e=a[e];if(r&&h[b])for(r=h[b],e.innerHTML=r.pre+d+r.post,d=r.length;d;--d)e=e.firstChild;else e.innerHTML=
d;if(1==e.childNodes.length)return e.removeChild(e.firstChild);for(d=m.createDocumentFragment();m=e.firstChild;)d.appendChild(m);return d};b.place=function(a,m,e){m=n.byId(m);"string"==typeof a&&(a=/^\s*</.test(a)?b.toDom(a,m.ownerDocument):n.byId(a));if("number"==typeof e){var c=m.childNodes;!c.length||c.length<=e?m.appendChild(a):k(a,c[0>e?0:e])}else switch(e){case "before":k(a,m);break;case "after":e=a;(c=m.parentNode)&&(c.lastChild==m?c.appendChild(e):c.insertBefore(e,m.nextSibling));break;case "replace":m.parentNode.replaceChild(a,
m);break;case "only":b.empty(m);m.appendChild(a);break;case "first":if(m.firstChild){k(a,m.firstChild);break}default:m.appendChild(a)}return a};var t=b.create=function(a,m,e,c){var d=g.doc;e&&(e=n.byId(e),d=e.ownerDocument);"string"==typeof a&&(a=d.createElement(a));m&&l.set(a,m);e&&b.place(a,e,c);return a};b.empty=function(a){d(n.byId(a))};var x=b.destroy=function(a){if(a=n.byId(a)){var m=a;a=a.parentNode;m.firstChild&&d(m);a&&(q("ie")&&a.canHaveChildren&&"removeNode"in m?m.removeNode(!1):a.removeChild(m))}}})},
"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(b,f,q){function g(d){if("string"==typeof d||d instanceof String){if(d&&!l.test(d))return k[0]=d,k;d=d.split(l);d.length&&!d[0]&&d.shift();d.length&&!d[d.length-1]&&d.pop();return d}return d?f.filter(d,function(c){return c}):[]}var n,l=/\s+/,k=[""],d={};return n={contains:function(d,c){return 0<=(" "+q.byId(d).className+" ").indexOf(" "+c+" ")},add:function(d,c){d=q.byId(d);c=g(c);var a=d.className,p,a=a?" "+a+" ":
" ";p=a.length;for(var b=0,h=c.length,k;b<h;++b)(k=c[b])&&0>a.indexOf(" "+k+" ")&&(a+=k+" ");p<a.length&&(d.className=a.substr(1,a.length-2))},remove:function(d,c){d=q.byId(d);var a;if(void 0!==c){c=g(c);a=" "+d.className+" ";for(var p=0,h=c.length;p<h;++p)a=a.replace(" "+c[p]+" "," ");a=b.trim(a)}else a="";d.className!=a&&(d.className=a)},replace:function(b,c,a){b=q.byId(b);d.className=b.className;n.remove(d,a);n.add(d,c);b.className!==d.className&&(b.className=d.className)},toggle:function(d,c,
a){d=q.byId(d);if(void 0===a){c=g(c);for(var b=0,h=c.length,k;b<h;++b)k=c[b],n[n.contains(d,k)?"remove":"add"](d,k)}else n[a?"add":"remove"](d,c);return a}}})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(b,f,q){function g(c){return k[c]=new Function("item","index","array",c)}function n(c){var a=!c;return function(d,b,h){var p=0,u=d&&d.length||0,l;u&&"string"==typeof d&&(d=d.split(""));"string"==typeof b&&(b=k[b]||g(b));if(h)for(;p<u;++p){if(l=!b.call(h,d[p],p,d),c^
l)return!l}else for(;p<u;++p)if(l=!b(d[p],p,d),c^l)return!l;return a}}function l(c){var a=1,b=0,g=0;c||(a=b=g=-1);return function(p,k,u,l){if(l&&0<a)return h.lastIndexOf(p,k,u);l=p&&p.length||0;var r=c?l+g:b;u===d?u=c?b:l+g:0>u?(u=l+u,0>u&&(u=b)):u=u>=l?l+g:u;for(l&&"string"==typeof p&&(p=p.split(""));u!=r;u+=a)if(p[u]==k)return u;return-1}}var k={},d,h={every:n(!1),some:n(!0),indexOf:l(!0),lastIndexOf:l(!1),forEach:function(c,a,d){var b=0,p=c&&c.length||0;p&&"string"==typeof c&&(c=c.split(""));"string"==
typeof a&&(a=k[a]||g(a));if(d)for(;b<p;++b)a.call(d,c[b],b,c);else for(;b<p;++b)a(c[b],b,c)},map:function(c,a,d,b){var p=0,h=c&&c.length||0;b=new (b||Array)(h);h&&"string"==typeof c&&(c=c.split(""));"string"==typeof a&&(a=k[a]||g(a));if(d)for(;p<h;++p)b[p]=a.call(d,c[p],p,c);else for(;p<h;++p)b[p]=a(c[p],p,c);return b},filter:function(c,a,d){var b=0,p=c&&c.length||0,h=[],l;p&&"string"==typeof c&&(c=c.split(""));"string"==typeof a&&(a=k[a]||g(a));if(d)for(;b<p;++b)l=c[b],a.call(d,l,b,c)&&h.push(l);
else for(;b<p;++b)l=c[b],a(l,b,c)&&h.push(l);return h},clearCache:function(){k={}}};q.mixin(b,h);return h})},"dojo/_base/NodeList":function(){define(["./kernel","../query","./array","./html","../NodeList-dom"],function(b,f,q){f=f.NodeList;var g=f.prototype;g.connect=f._adaptAsForEach(function(){return b.connect.apply(this,arguments)});g.coords=f._adaptAsMap(b.coords);f.events="blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" ");
q.forEach(f.events,function(b){var l="on"+b;g[l]=function(b,d){return this.connect(l,b,d)}});return b.NodeList=f})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(b,f,q,g,n,l,k,d){function h(m,e){var a=function(a,c){if("string"==typeof c&&(c=q.byId(c),!c))return new e([]);a="string"==typeof a?m(a,c):a?a.end&&a.on?a:[a]:[];return a.end&&a.on?a:new e(a)};a.matches=m.match||function(e,m,c){return 0<
a.filter([e],m,c).length};a.filter=m.filter||function(e,m,c){return a(m,c).filter(function(m){return-1<n.indexOf(e,m)})};if("function"!=typeof m){var c=m.search;m=function(e,m){return c(m||document,e)}}return a}var c=Array.prototype,a=c.slice,p=c.concat,u=n.forEach,v=function(m,e,c){e=[0].concat(a.call(e,0));c=c||b.global;return function(a){e[0]=a;return m.apply(c,e)}},z=function(m){var e=this instanceof t&&1;"number"==typeof m&&(m=Array(m));var a=m&&"length"in m?m:arguments;if(e||!a.sort){for(var c=
e?this:[],d=c.length=a.length,r=0;r<d;r++)c[r]=a[r];if(e)return c;a=c}l._mixin(a,x);a._NodeListCtor=function(e){return t(e)};return a},t=z,x=t.prototype=[];t._wrap=x._wrap=function(m,e,a){m=new (a||this._NodeListCtor||t)(m);return e?m._stash(e):m};t._adaptAsMap=function(m,e){return function(){return this.map(v(m,arguments,e))}};t._adaptAsForEach=function(m,e){return function(){this.forEach(v(m,arguments,e));return this}};t._adaptAsFilter=function(m,e){return function(){return this.filter(v(m,arguments,
e))}};t._adaptWithCondition=function(m,e,a){return function(){var c=arguments,d=v(m,c,a);if(e.call(a||b.global,c))return this.map(d);this.forEach(d);return this}};u(["slice","splice"],function(m){var e=c[m];x[m]=function(){return this._wrap(e.apply(this,arguments),"slice"==m?this:null)}});u(["indexOf","lastIndexOf","every","some"],function(m){var e=n[m];x[m]=function(){return e.apply(b,[this].concat(a.call(arguments,0)))}});l.extend(z,{constructor:t,_NodeListCtor:t,toString:function(){return this.join(",")},
_stash:function(m){this._parent=m;return this},on:function(m,e){var a=this.map(function(a){return g(a,m,e)});a.remove=function(){for(var e=0;e<a.length;e++)a[e].remove()};return a},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(m){var e=a.call(this,0),c=n.map(arguments,function(e){return a.call(e,0)});return this._wrap(p.apply(e,c),this)},map:function(m,e){return this._wrap(n.map(this,m,e),this)},forEach:function(m,e){u(this,m,e);return this},filter:function(m){var e=
arguments,a=this,c=0;if("string"==typeof m){a=r._filterResult(this,e[0]);if(1==e.length)return a._stash(this);c=1}return this._wrap(n.filter(a,e[c],e[c+1]),this)},instantiate:function(m,e){var a=l.isFunction(m)?m:l.getObject(m);e=e||{};return this.forEach(function(m){new a(e,m)})},at:function(){var m=new this._NodeListCtor(0);u(arguments,function(e){0>e&&(e=this.length+e);this[e]&&m.push(this[e])},this);return m._stash(this)}});var r=h(d,z);b.query=h(d,function(m){return z(m)});r.load=function(m,
e,a){k.load(m,e,function(e){a(h(e,z))})};b._filterQueryResult=r._filterResult=function(m,e,a){return new z(r.filter(m,e,a))};b.NodeList=r.NodeList=z;return r})},"dojo/selector/_loader":function(){define(["../has","require"],function(b,f){"undefined"!==typeof document&&document.createElement("div");var q;return{load:function(g,n,l,k){if(k&&k.isBuild)l();else{k=f;g="default"==g?b("config-selectorEngine")||"css3":g;g="css2"==g||"lite"==g?"./lite":"css2.1"==g?"./lite":"css3"==g?"./lite":"acme"==g?"./acme":
(k=n)&&g;if("?"==g.charAt(g.length-1)){g=g.substring(0,g.length-1);var d=!0}if(d&&(b("dom-compliant-qsa")||q))return l(q);k([g],function(d){"./lite"!=g&&(q=d);l(d)})}}}})},"dojo/selector/lite":function(){define(["../has","../_base/kernel"],function(b,f){var q=document.createElement("div"),g=q.matches||q.webkitMatchesSelector||q.mozMatchesSelector||q.msMatchesSelector||q.oMatchesSelector,n=q.querySelectorAll,l=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g,k=function(h,c){var a=c?c.ownerDocument||
c:f.doc||document,p=(n?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(h);c=c||a;if(p){var g=(b("ie"),null!==c.parentNode&&9!==c.nodeType&&c.parentNode===a);if(p[2]&&g){var l=f.byId?f.byId(p[2],a):a.getElementById(p[2]);if(!l||p[1]&&p[1]!=l.tagName.toLowerCase())return[];if(c!=a)for(h=l;h!=c;)if(h=h.parentNode,!h)return[];return p[3]?k(p[3],l):[l]}if(p[3]&&c.getElementsByClassName)return c.getElementsByClassName(p[4]);if(p[5])if(l=
c.getElementsByTagName(p[5]),p[4]||p[6])h=(p[4]||"")+p[6];else return l}if(n)return 1===c.nodeType&&"object"!==c.nodeName.toLowerCase()?d(c,h,c.querySelectorAll):c.querySelectorAll(h);l||(l=c.getElementsByTagName("*"));p=[];a=0;for(g=l.length;a<g;a++){var z=l[a];1==z.nodeType&&(void 0)(z,h,c)&&p.push(z)}return p},d=function(d,c,a){var b=d,h=d.getAttribute("id"),g=h||"__dojo__",k=d.parentNode,f=/^\s*[+~]/.test(c);if(f&&!k)return[];h?g=g.replace(/'/g,"\\$\x26"):d.setAttribute("id",g);f&&k&&(d=d.parentNode);
c=c.match(l);for(k=0;k<c.length;k++)c[k]="[id\x3d'"+g+"'] "+c[k];c=c.join(",");try{return a.call(d,c)}finally{h||b.removeAttribute("id")}};k.match=g?function(b,c,a){return a&&9!=a.nodeType?d(a,c,function(a){return g.call(b,a)}):g.call(b,c)}:void 0;return k})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(b,f,q,g,n,l,k,d,h){function c(a){return function(c,m,e){return 2==
arguments.length?a["string"==typeof m?"get":"set"](c,m):a.set(c,m,e)}}var a=function(a){return 1==a.length&&"string"==typeof a[0]},p=function(a){var c=a.parentNode;c&&c.removeChild(a)},u=f.NodeList,v=u._adaptWithCondition,z=u._adaptAsForEach,t=u._adaptAsMap;g.extend(u,{_normalize:function(a,c){var m=!0===a.parse;if("string"==typeof a.template){var e=a.templateFunc||b.string&&b.string.substitute;a=e?e(a.template,a):a}e=typeof a;"string"==e||"number"==e?(a=l.toDom(a,c&&c.ownerDocument),a=11==a.nodeType?
g._toArray(a.childNodes):[a]):g.isArrayLike(a)?g.isArray(a)||(a=g._toArray(a)):a=[a];m&&(a._runParse=!0);return a},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(a,c,m,e){if(1==c.nodeType||"only"!=m)for(var d,r=a.length,p=r-1;0<=p;p--){var h=e?this._cloneNode(a[p]):a[p];if(a._runParse&&b.parser&&b.parser.parse)for(d||(d=c.ownerDocument.createElement("div")),d.appendChild(h),b.parser.parse(d),h=d.firstChild;d.firstChild;)d.removeChild(d.firstChild);p==r-1?l.place(h,c,m):c.parentNode.insertBefore(h,
c);c=h}},position:t(k.position),attr:v(c(d),a),style:v(c(h),a),addClass:z(n.add),removeClass:z(n.remove),toggleClass:z(n.toggle),replaceClass:z(n.replace),empty:z(l.empty),removeAttr:z(d.remove),marginBox:t(k.getMarginBox),place:function(a,c){var m=f(a)[0];return this.forEach(function(e){l.place(e,m,c)})},orphan:function(a){return(a?f._filterResult(this,a):this).forEach(p)},adopt:function(a,c){return f(a).place(this[0],c)._stash(this)},query:function(a){if(!a)return this;var c=new u;this.map(function(m){f(a,
m).forEach(function(e){void 0!==e&&c.push(e)})});return c._stash(this)},filter:function(a){var c=arguments,m=this,e=0;if("string"==typeof a){m=f._filterResult(this,c[0]);if(1==c.length)return m._stash(this);e=1}return this._wrap(q.filter(m,c[e],c[e+1]),this)},addContent:function(a,c){a=this._normalize(a,this[0]);for(var m=0,e;e=this[m];m++)a.length?this._place(a,e,c,0<m):l.empty(e);return this}});return u})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z,t){b._xhrObj=z._create;var x=b.config;b.objectToQuery=g.objectToQuery;b.queryToObject=g.queryToObject;b.fieldToObject=l.fieldToObject;b.formToObject=l.toObject;b.formToQuery=l.toQuery;b.formToJson=l.toJson;b._blockAsync=!1;var r=b._contentHandlers=b.contentHandlers={text:function(e){return e.responseText},json:function(e){return h.fromJson(e.responseText||null)},"json-comment-filtered":function(e){d.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}\x26\x26\nUse djConfig.useCommentedJson\x3dtrue to turn off this message.");
e=e.responseText;var a=e.indexOf("/*"),m=e.lastIndexOf("*/");if(-1==a||-1==m)throw Error("JSON was not comment filtered");return h.fromJson(e.substring(a+2,m))},javascript:function(e){return b.eval(e.responseText)},xml:function(e){var m=e.responseXML;m&&!m.querySelectorAll&&(m=(new DOMParser).parseFromString(e.responseText,"application/xml"));if(f("ie")&&(!m||!m.documentElement)){var c=function(e){return"MSXML"+e+".DOMDocument"},c=["Microsoft.XMLDOM",c(6),c(4),c(3),c(2)];a.some(c,function(a){try{var c=
new ActiveXObject(a);c.async=!1;c.loadXML(e.responseText);m=c}catch(G){return!1}return!0})}return m},"json-comment-optional":function(e){return e.responseText&&/^[^{\[]*\/\*/.test(e.responseText)?r["json-comment-filtered"](e):r.json(e)}};r.arraybuffer=r.blob=r.document=function(e,a){return e.response};b._ioSetArgs=function(e,a,m,d){var r={args:e,url:e.url},p=null;if(e.form){var p=n.byId(e.form),w=p.getAttributeNode("action");r.url=r.url||(w?w.value:b.doc?b.doc.URL:null);p=l.toObject(p)}w={};p&&c.mixin(w,
p);e.content&&c.mixin(w,e.content);e.preventCache&&(w["dojo.preventCache"]=(new Date).valueOf());r.query=g.objectToQuery(w);r.handleAs=e.handleAs||"text";var h=new k(function(e){e.canceled=!0;a&&a(e);var m=e.ioArgs.error;m||(m=Error("request cancelled"),m.dojoType="cancel",e.ioArgs.error=m);return m});h.addCallback(m);var u=e.load;u&&c.isFunction(u)&&h.addCallback(function(m){return u.call(e,m,r)});var f=e.error;f&&c.isFunction(f)&&h.addErrback(function(m){return f.call(e,m,r)});var v=e.handle;v&&
c.isFunction(v)&&h.addBoth(function(m){return v.call(e,m,r)});h.addErrback(function(e){return d(e,h)});x.ioPublish&&b.publish&&!1!==r.args.ioPublish&&(h.addCallbacks(function(e){b.publish("/dojo/io/load",[h,e]);return e},function(e){b.publish("/dojo/io/error",[h,e]);return e}),h.addBoth(function(e){b.publish("/dojo/io/done",[h,e]);return e}));h.ioArgs=r;return h};var m=function(e){e=r[e.ioArgs.handleAs](e.ioArgs.xhr,e.ioArgs);return void 0===e?null:e},e=function(e,m){m.ioArgs.args.failOk||console.error(e);
return e},w=function(e){0>=y&&(y=0,x.ioPublish&&b.publish&&(!e||e&&!1!==e.ioArgs.args.ioPublish)&&b.publish("/dojo/io/stop"))},y=0;u.after(v,"_onAction",function(){--y});u.after(v,"_onInFlight",w);b._ioCancelAll=v.cancelAll;b._ioNotifyStart=function(e){x.ioPublish&&b.publish&&!1!==e.ioArgs.args.ioPublish&&(y||b.publish("/dojo/io/start"),y+=1,b.publish("/dojo/io/send",[e]))};b._ioWatch=function(e,m,a,d){e.ioArgs.options=e.ioArgs.args;c.mixin(e,{response:e.ioArgs,isValid:function(a){return m(e)},isReady:function(m){return a(e)},
handleResponse:function(m){return d(e)}});v(e);w(e)};b._ioAddQueryToUrl=function(e){e.query.length&&(e.url+=(-1==e.url.indexOf("?")?"?":"\x26")+e.query,e.query=null)};b.xhr=function(a,c,d){var r,p=b._ioSetArgs(c,function(e){r&&r.cancel()},m,e),h=p.ioArgs;"postData"in c?h.query=c.postData:"putData"in c?h.query=c.putData:"rawBody"in c?h.query=c.rawBody:(2<arguments.length&&!d||-1==="POST|PUT".indexOf(a.toUpperCase()))&&b._ioAddQueryToUrl(h);var w={method:a,handleAs:{arraybuffer:1,blob:1,document:1}[c.handleAs]?
c.handleAs:"text",responseType:c.responseType,timeout:c.timeout,withCredentials:c.withCredentials,ioArgs:h};"undefined"!==typeof c.headers&&(w.headers=c.headers);"undefined"!==typeof c.contentType&&(w.headers||(w.headers={}),w.headers["Content-Type"]=c.contentType);"undefined"!==typeof h.query&&(w.data=h.query);"undefined"!==typeof c.sync&&(w.sync=c.sync);b._ioNotifyStart(p);try{r=z(h.url,w,!0)}catch(fa){return p.cancel(),p}p.ioArgs.xhr=r.response.xhr;r.then(function(){p.resolve(p)}).otherwise(function(e){h.error=
e;e.response&&(e.status=e.response.status,e.responseText=e.response.text,e.xhr=e.response.xhr);p.reject(e)});return p};b.xhrGet=function(e){return b.xhr("GET",e)};b.rawXhrPost=b.xhrPost=function(e){return b.xhr("POST",e,!0)};b.rawXhrPut=b.xhrPut=function(e){return b.xhr("PUT",e,!0)};b.xhrDelete=function(e){return b.xhr("DELETE",e)};b._isDocumentOk=function(e){return t.checkStatus(e.status)};b._getText=function(e){var m;b.xhrGet({url:e,sync:!0,load:function(e){m=e}});return m};c.mixin(b.xhr,{_xhrObj:b._xhrObj,
fieldToObject:l.fieldToObject,formToObject:l.toObject,objectToQuery:g.objectToQuery,formToQuery:l.toQuery,formToJson:l.toJson,queryToObject:g.queryToObject,contentHandlers:r,_ioSetArgs:b._ioSetArgs,_ioCancelAll:b._ioCancelAll,_ioNotifyStart:b._ioNotifyStart,_ioWatch:b._ioWatch,_ioAddQueryToUrl:b._ioAddQueryToUrl,_isDocumentOk:b._isDocumentOk,_getText:b._getText,get:b.xhrGet,post:b.xhrPost,put:b.xhrPut,del:b.xhrDelete});return b.xhr})},"dojo/io-query":function(){define(["./_base/lang"],function(b){var f=
{};return{objectToQuery:function(q){var g=encodeURIComponent,n=[],l;for(l in q){var k=q[l];if(k!=f[l]){var d=g(l)+"\x3d";if(b.isArray(k))for(var h=0,c=k.length;h<c;++h)n.push(d+g(k[h]));else n.push(d+g(k))}}return n.join("\x26")},queryToObject:function(f){var g=decodeURIComponent;f=f.split("\x26");for(var n={},l,k,d=0,h=f.length;d<h;++d)if(k=f[d],k.length){var c=k.indexOf("\x3d");0>c?(l=g(k),k=""):(l=g(k.slice(0,c)),k=g(k.slice(c+1)));"string"==typeof n[l]&&(n[l]=[n[l]]);b.isArray(n[l])?n[l].push(k):
n[l]=k}return n}}})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(b,f,q,g){var n={fieldToObject:function(b){var g=null;if(b=f.byId(b)){var d=b.name,h=(b.type||"").toLowerCase();if(d&&h&&!b.disabled)if("radio"==h||"checkbox"==h)b.checked&&(g=b.value);else if(b.multiple)for(g=[],b=[b.firstChild];b.length;)for(d=b.pop();d;d=d.nextSibling)if(1==d.nodeType&&"option"==d.tagName.toLowerCase())d.selected&&g.push(d.value);else{d.nextSibling&&b.push(d.nextSibling);
d.firstChild&&b.push(d.firstChild);break}else g=b.value}return g},toObject:function(g){var k={};g=f.byId(g).elements;for(var d=0,h=g.length;d<h;++d){var c=g[d],a=c.name,p=(c.type||"").toLowerCase();if(a&&p&&0>"file|submit|image|reset|button".indexOf(p)&&!c.disabled){var u=k,l=a,c=n.fieldToObject(c);if(null!==c){var z=u[l];"string"==typeof z?u[l]=[z,c]:b.isArray(z)?z.push(c):u[l]=c}"image"==p&&(k[a+".x"]=k[a+".y"]=k[a].x=k[a].y=0)}}return k},toQuery:function(b){return q.objectToQuery(n.toObject(b))},
toJson:function(b,k){return g.stringify(n.toObject(b),null,k?4:0)}};return n})},"dojo/json":function(){define(["./has"],function(b){return JSON})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),function(b,f,q,g,n,l,k){var d=function(){},h=Object.freeze||function(){},c=b.Deferred=function(a){function b(e){if(z)throw Error("This deferred has already been resolved");v=e;z=!0;k()}function k(){for(var m;!m&&e;){var a=
e;e=e.next;if(m=a.progress==d)z=!1;var c=r?a.error:a.resolved;n("config-useDeferredInstrumentation")&&r&&f.instrumentRejected&&f.instrumentRejected(v,!!c);if(c)try{var b=c(v);b&&"function"===typeof b.then?b.then(l.hitch(a.deferred,"resolve"),l.hitch(a.deferred,"reject"),l.hitch(a.deferred,"progress")):(c=m&&void 0===b,m&&!c&&(r=b instanceof Error),a.deferred[c&&r?"reject":"resolve"](c?v:b))}catch(C){a.deferred.reject(C)}else r?a.deferred.reject(v):a.deferred.resolve(v)}}var v,z,t,x,r,m,e,w=this.promise=
new q;this.isResolved=w.isResolved=function(){return 0==x};this.isRejected=w.isRejected=function(){return 1==x};this.isFulfilled=w.isFulfilled=function(){return 0<=x};this.isCanceled=w.isCanceled=function(){return t};this.resolve=this.callback=function(e){this.fired=x=0;this.results=[e,null];b(e)};this.reject=this.errback=function(m){r=!0;this.fired=x=1;n("config-useDeferredInstrumentation")&&f.instrumentRejected&&f.instrumentRejected(m,!!e);b(m);this.results=[null,m]};this.progress=function(m){for(var a=
e;a;){var c=a.progress;c&&c(m);a=a.next}};this.addCallbacks=function(e,m){this.then(e,m,d);return this};w.then=this.then=function(a,r,b){var p=b==d?this:new c(w.cancel);a={resolved:a,error:r,progress:b,deferred:p};e?m=m.next=a:e=m=a;z&&k();return p.promise};var y=this;w.cancel=this.cancel=function(){if(!z){var e=a&&a(y);z||(e instanceof Error||(e=new g(e)),e.log=!1,y.reject(e))}t=!0};h(w)};l.extend(c,{addCallback:function(a){return this.addCallbacks(l.hitch.apply(b,arguments))},addErrback:function(a){return this.addCallbacks(null,
l.hitch.apply(b,arguments))},addBoth:function(a){var c=l.hitch.apply(b,arguments);return this.addCallbacks(c,c)},fired:-1});c.when=b.when=k;return c})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./has!config-deferredInstrumentation?./promise/instrumentation"],function(b,f,q,g,n){var l=Object.freeze||function(){},k=function(c,h,g,k,l){b("config-deferredInstrumentation")&&2===h&&a.instrumentRejected&&0===c.length&&a.instrumentRejected(g,!1,
k,l);for(l=0;l<c.length;l++)d(c[l],h,g,k)},d=function(d,g,k,l){var p=d[g],u=d.deferred;if(p)try{var r=p(k);if(0===g)"undefined"!==typeof r&&c(u,g,r);else{if(r&&"function"===typeof r.then){d.cancel=r.cancel;r.then(h(u,1),h(u,2),h(u,0));return}c(u,1,r)}}catch(m){c(u,2,m)}else c(u,g,k);b("config-deferredInstrumentation")&&2===g&&a.instrumentRejected&&a.instrumentRejected(k,!!p,l,u.promise)},h=function(a,d){return function(b){c(a,d,b)}},c=function(a,c,d){if(!a.isCanceled())switch(c){case 0:a.progress(d);
break;case 1:a.resolve(d);break;case 2:a.reject(d)}},a=function(c){var p=this.promise=new g,h=this,f,n,x,r=!1,m=[];b("config-deferredInstrumentation")&&Error.captureStackTrace&&(Error.captureStackTrace(h,a),Error.captureStackTrace(p,a));this.isResolved=p.isResolved=function(){return 1===f};this.isRejected=p.isRejected=function(){return 2===f};this.isFulfilled=p.isFulfilled=function(){return!!f};this.isCanceled=p.isCanceled=function(){return r};this.progress=function(e,a){if(f){if(!0===a)throw Error("This deferred has already been fulfilled.");
return p}k(m,0,e,null,h);return p};this.resolve=function(e,a){if(f){if(!0===a)throw Error("This deferred has already been fulfilled.");return p}k(m,f=1,n=e,null,h);m=null;return p};var e=this.reject=function(a,c){if(f){if(!0===c)throw Error("This deferred has already been fulfilled.");return p}b("config-deferredInstrumentation")&&Error.captureStackTrace&&Error.captureStackTrace(x={},e);k(m,f=2,n=a,x,h);m=null;return p};this.then=p.then=function(e,c,r){var b=[r,e,c];b.cancel=p.cancel;b.deferred=new a(function(e){return b.cancel&&
b.cancel(e)});f&&!m?d(b,f,n,x):m.push(b);return b.deferred.promise};this.cancel=p.cancel=function(a,m){if(!f){c&&(m=c(a),a="undefined"===typeof m?a:m);r=!0;if(!f)return"undefined"===typeof a&&(a=new q),e(a),a;if(2===f&&n===a)return a}else if(!0===m)throw Error("This deferred has already been fulfilled.");};l(p)};a.prototype.toString=function(){return"[object Deferred]"};n&&n(a);return a})},"dojo/errors/CancelError":function(){define(["./create"],function(b){return b("CancelError",null,null,{dojoType:"cancel",
log:!1})})},"dojo/errors/create":function(){define(["../_base/lang"],function(b){return function(f,q,g,n){g=g||Error;var l=function(b){if(g===Error){Error.captureStackTrace&&Error.captureStackTrace(this,l);var d=Error.call(this,b),h;for(h in d)d.hasOwnProperty(h)&&(this[h]=d[h]);this.message=b;this.stack=d.stack}else g.apply(this,arguments);q&&q.apply(this,arguments)};l.prototype=b.delegate(g.prototype,n);l.prototype.name=f;return l.prototype.constructor=l}})},"dojo/promise/Promise":function(){define(["../_base/lang"],
function(b){function f(){throw new TypeError("abstract");}return b.extend(function(){},{then:function(b,g,n){f()},cancel:function(b,g){f()},isResolved:function(){f()},isRejected:function(){f()},isFulfilled:function(){f()},isCanceled:function(){f()},always:function(b){return this.then(b,b)},"catch":function(b){return this.then(null,b)},otherwise:function(b){return this.then(null,b)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},
"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(b,f){return function(q,g,n,l){var k=q&&"function"===typeof q.then,d=k&&q instanceof f;if(!k)return 1<arguments.length?g?g(q):q:(new b).resolve(q);d||(k=new b(q.cancel),q.then(k.resolve,k.reject,k.progress),q=k.promise);return g||n||l?q.then(g,n,l):q}})},"dojo/_base/json":function(){define(["./kernel","../json"],function(b,f){b.fromJson=function(b){return eval("("+b+")")};b._escapeString=f.stringify;b.toJsonIndentStr="\t";b.toJson=
function(q,g){return f.stringify(q,function(b,g){return g&&(b=g.__json__||g.json,"function"==typeof b)?b.call(g):g},g&&b.toJsonIndentStr)};return b})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../has!host-browser?../_base/window: ../has!host-browser?dom-addeventlistener?:../on:".split(" "),function(b,f,q,g,n,l){function k(){for(var a=+new Date,b=0,g;b<c.length&&(g=c[b]);b++){var k=g.response,l=k.options;g.isCanceled&&g.isCanceled()||
g.isValid&&!g.isValid(k)?(c.splice(b--,1),d._onAction&&d._onAction()):g.isReady&&g.isReady(k)?(c.splice(b--,1),g.handleResponse(k),d._onAction&&d._onAction()):g.startTime&&g.startTime+(l.timeout||0)<a&&(c.splice(b--,1),g.cancel(new f("Timeout exceeded",k)),d._onAction&&d._onAction())}d._onInFlight&&d._onInFlight(g);c.length||(clearInterval(h),h=null)}function d(a){a.response.options.timeout&&(a.startTime=+new Date);a.isFulfilled()||(c.push(a),h||(h=setInterval(k,50)),a.response.options.sync&&k())}
var h=null,c=[];d.cancelAll=function(){try{g.forEach(c,function(a){try{a.cancel(new q("All requests canceled."))}catch(p){}})}catch(a){}};n&&l&&n.doc.attachEvent&&l(n.global,"unload",function(){d.cancelAll()});return d})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise ../has".split(" "),function(b,f,q,g,n,l,k,d,h){function c(a){return p(a)}function a(a){return void 0!==a.data?a.data:
a.text}b.deepCopy=function(a,c){for(var d in c){var p=a[d],h=c[d];p!==h&&(p&&"object"===typeof p&&h&&"object"===typeof h?h instanceof Date?a[d]=new Date(h):b.deepCopy(p,h):a[d]=h)}return a};b.deepCreate=function(a,c){c=c||{};var d=k.delegate(a),p,h;for(p in a)(h=a[p])&&"object"===typeof h&&(d[p]=b.deepCreate(h,c[p]));return b.deepCopy(d,c)};var p=Object.freeze||function(a){return a};b.deferred=function(h,l,n,t,x,r){var m=new g(function(e){l&&l(m,h);return e&&(e instanceof f||e instanceof q)?e:new q("Request canceled",
h)});m.response=h;m.isValid=n;m.isReady=t;m.handleResponse=x;n=m.then(c).otherwise(function(e){e.response=h;throw e;});b.notify&&n.then(k.hitch(b.notify,"emit","load"),k.hitch(b.notify,"emit","error"));t=n.then(a);x=new d;for(var e in t)t.hasOwnProperty(e)&&(x[e]=t[e]);x.response=n;p(x);r&&m.then(function(e){r.call(m,e)},function(e){r.call(m,h,e)});m.promise=x;m.then=x.then;return m};b.addCommonMethods=function(a,c){l.forEach(c||["GET","POST","PUT","DELETE"],function(c){a[("DELETE"===c?"DEL":c).toLowerCase()]=
function(d,b){b=k.delegate(b||{});b.method=c;return a(d,b)}})};b.parseArgs=function(a,c,d){var b=c.data,p=c.query;!b||d||"object"!==typeof b||b instanceof ArrayBuffer||b instanceof Blob||(c.data=n.objectToQuery(b));p?("object"===typeof p&&(p=n.objectToQuery(p)),c.preventCache&&(p+=(p?"\x26":"")+"request.preventCache\x3d"+ +new Date)):c.preventCache&&(p="request.preventCache\x3d"+ +new Date);a&&p&&(a+=(~a.indexOf("?")?"\x26":"?")+p);return{url:a,options:c,getHeader:function(a){return null}}};b.checkStatus=
function(a){a=a||0;return 200<=a&&300>a||304===a||1223===a||!a}})},"dojo/errors/RequestError":function(){define(["./create"],function(b){return b("RequestError",function(b,q){this.response=q})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(b,f){return b("RequestTimeoutError",null,f,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(b,f,q,g,n){function l(a,c){var d=
a.xhr;a.status=a.xhr.status;try{a.text=d.responseText}catch(e){}"xml"===a.options.handleAs&&(a.data=d.responseXML);var m;if(c)this.reject(c);else{try{q(a)}catch(e){m=e}g.checkStatus(d.status)?m?this.reject(m):this.resolve(a):(c=m?new b("Unable to load "+a.url+" status: "+d.status+" and an error in handleAs: transformation of response",a):new b("Unable to load "+a.url+" status: "+d.status,a),this.reject(c))}}function k(a){return this.xhr.getResponseHeader(a)}function d(t,x,r){var m=x&&x.data&&x.data instanceof
FormData,e=g.parseArgs(t,g.deepCreate(z,x),m);t=e.url;x=e.options;var w=!x.data&&"POST"!==x.method&&"PUT"!==x.method;10>=n("ie")&&(t=t.split("#")[0]);var y,A=g.deferred(e,u,c,a,l,function(){y&&y()}),q=e.xhr=d._create();if(!q)return A.cancel(new b("XHR was not created")),r?A:A.promise;e.getHeader=k;p&&(y=p(q,A,e));var B="undefined"===typeof x.data?null:x.data,F=!x.sync,C=x.method;try{q.open(C,t,F,x.user||v,x.password||v);x.withCredentials&&(q.withCredentials=x.withCredentials);x.handleAs in h&&(q.responseType=
h[x.handleAs]);var G=x.headers;t=m||w?!1:"application/x-www-form-urlencoded";if(G)for(var W in G)"content-type"===W.toLowerCase()?t=G[W]:G[W]&&q.setRequestHeader(W,G[W]);t&&!1!==t&&q.setRequestHeader("Content-Type",t);G&&"X-Requested-With"in G||q.setRequestHeader("X-Requested-With","XMLHttpRequest");g.notify&&g.notify.emit("send",e,A.promise.cancel);q.send(B)}catch(fa){A.reject(fa)}f(A);q=null;return r?A:A.promise}n.add("dojo-force-activex-xhr",function(){return 0});var h={blob:"blob",document:"document",
arraybuffer:"arraybuffer"},c,a,p,u;c=function(a){return!this.isFulfilled()};u=function(a,c){c.xhr.abort()};p=function(a,c,d){function m(e){c.handleResponse(d)}function e(e){e=new b("Unable to load "+d.url+" status: "+e.target.status,d);c.handleResponse(d,e)}function r(e){e.lengthComputable?(d.loaded=e.loaded,d.total=e.total,c.progress(d)):3===d.xhr.readyState&&(d.loaded="loaded"in e?e.loaded:e.position,c.progress(d))}a.addEventListener("load",m,!1);a.addEventListener("error",e,!1);a.addEventListener("progress",
r,!1);return function(){a.removeEventListener("load",m,!1);a.removeEventListener("error",e,!1);a.removeEventListener("progress",r,!1);a=null}};var v,z={data:null,query:null,sync:!1,method:"GET"};d._create=function(){throw Error("XMLHTTP not available");};n("dojo-force-activex-xhr")||(d._create=function(){return new XMLHttpRequest});g.addCommonMethods(d);return d})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../has!dom?../selector/_loader"],function(b,
f,q,g){function n(b){var d=l[b.options.handleAs];b.data=d?d(b):b.data||b.text;return b}q=function(b){return b.xhr.response};var l={javascript:function(b){return f.eval(b.text||"")},json:function(g){return b.parse(g.text||null)},xml:void 0,blob:q,arraybuffer:q,document:q};n.register=function(b,d){l[b]=d};return n})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(b,f,q,g,n,l,k,d,h){var c=q.mixin,a={},p=a._Line=
function(a,e){this.start=a;this.end=e};p.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};var u=a.Animation=function(a){c(this,a);q.isArray(this.curve)&&(this.curve=new p(this.curve[0],this.curve[1]))};u.prototype=new g;q.extend(u,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var a=this._percent,e=this.easing;return e?e(a):a},_fire:function(a,e){e=e||[];if(this[a])if(f.debugAtAllCosts)this[a].apply(this,e);else try{this[a].apply(this,e)}catch(w){console.error("exception in animation handler for:",
a),console.error(w)}return this},play:function(a,e){this._delayTimer&&this._clearTimer();if(e)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);a=a||this.delay;e=q.hitch(this,"_play",e);if(0<a)return this._delayTimer=setTimeout(e,a),this;e();return this},_play:function(a){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);
this._active=!0;this._paused=!1;a=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[a]));this._fire("onPlay",[a]);this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(a,e){this._stopTimer();this._active=this._paused=!0;this._percent=
a;e&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();a&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},destroy:function(){this.stop()},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=(new Date).valueOf(),a=0===this.duration?1:(a-this._startTime)/this.duration;1<=a&&(a=1);this._percent=
a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var v=0,z=null,t={run:function(){}};
q.extend(u,{_startTimer:function(){this._timer||(this._timer=l.after(t,"run",q.hitch(this,"_cycle"),!0),v++);z||(z=setInterval(q.hitch(t,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,v--);0>=v&&(clearInterval(z),z=null,v=0)}});var x=k("ie")?function(a){var e=a.style;e.width.length||"auto"!=h.get(a,"width")||(e.width="auto")}:function(){};a._fade=function(m){m.node=d.byId(m.node);var e=c({properties:{}},m);m=e.properties.opacity={};m.start="start"in e?
e.start:function(){return+h.get(e.node,"opacity")||0};m.end=e.end;m=a.animateProperty(e);l.after(m,"beforeBegin",q.partial(x,e.node),!0);return m};a.fadeIn=function(m){return a._fade(c({end:1},m))};a.fadeOut=function(m){return a._fade(c({end:0},m))};a._defaultEasing=function(a){return.5+Math.sin((a+1.5)*Math.PI)/2};var r=function(a){this._properties=a;for(var e in a){var m=a[e];m.start instanceof n&&(m.tempColor=new n)}};r.prototype.getValue=function(a){var e={},m;for(m in this._properties){var c=
this._properties[m],d=c.start;d instanceof n?e[m]=n.blendColors(d,c.end,a,c.tempColor).toCss():q.isArray(d)||(e[m]=(c.end-d)*a+d+("opacity"!=m?c.units||"px":0))}return e};a.animateProperty=function(a){var e=a.node=d.byId(a.node);a.easing||(a.easing=b._defaultEasing);a=new u(a);l.after(a,"beforeBegin",q.hitch(a,function(){var a={},m;for(m in this.properties){var d=function(e,a){var m={height:e.offsetHeight,width:e.offsetWidth}[a];if(void 0!==m)return m;m=h.get(e,a);return"opacity"==a?+m:p?m:parseFloat(m)};
if("width"==m||"height"==m)this.node.display="block";var b=this.properties[m];q.isFunction(b)&&(b=b(e));b=a[m]=c({},q.isObject(b)?b:{end:b});q.isFunction(b.start)&&(b.start=b.start(e));q.isFunction(b.end)&&(b.end=b.end(e));var p=0<=m.toLowerCase().indexOf("color");"end"in b?"start"in b||(b.start=d(e,m)):b.end=d(e,m);p?(b.start=new n(b.start),b.end=new n(b.end)):b.start="opacity"==m?+b.start:parseFloat(b.start)}this.curve=new r(a)}),!0);l.after(a,"onAnimate",q.hitch(h,"set",a.node),!0);return a};a.anim=
function(m,e,c,d,r,b){return a.animateProperty({node:m,duration:c||u.prototype.duration,properties:e,easing:d,onEnd:r}).play(b||0)};c(b,a);b._Animation=u;return a})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(b,f,q,g){var n=b.Color=function(b){b&&this.setColor(b)};n.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,
128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:g.transparentColor||[0,0,0,0]};f.extend(n,{r:255,g:255,b:255,a:1,_set:function(b,g,d,h){this.r=b;this.g=g;this.b=d;this.a=h},setColor:function(b){f.isString(b)?n.fromString(b,this):f.isArray(b)?n.fromArray(b,this):(this._set(b.r,b.g,b.b,b.a),b instanceof n||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,
this.g,this.b,this.a]},toHex:function(){return"#"+q.map(["r","g","b"],function(b){b=this[b].toString(16);return 2>b.length?"0"+b:b},this).join("")},toCss:function(b){var g=this.r+", "+this.g+", "+this.b;return(b?"rgba("+g+", "+this.a:"rgb("+g)+")"},toString:function(){return this.toCss(!0)}});n.blendColors=b.blendColors=function(b,g,d,h){var c=h||new n;q.forEach(["r","g","b","a"],function(a){c[a]=b[a]+(g[a]-b[a])*d;"a"!=a&&(c[a]=Math.round(c[a]))});return c.sanitize()};n.fromRgb=b.colorFromRgb=function(b,
g){return(b=b.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/))&&n.fromArray(b[1].split(/\s*,\s*/),g)};n.fromHex=b.colorFromHex=function(b,g){var d=g||new n,h=4==b.length?4:8,c=(1<<h)-1;b=Number("0x"+b.substr(1));if(isNaN(b))return null;q.forEach(["b","g","r"],function(a){var p=b&c;b>>=h;d[a]=4==h?17*p:p});d.a=1;return d};n.fromArray=b.colorFromArray=function(b,g){g=g||new n;g._set(Number(b[0]),Number(b[1]),Number(b[2]),Number(b[3]));isNaN(g.a)&&(g.a=1);return g.sanitize()};n.fromString=b.colorFromString=
function(b,g){var d=n.named[b];return d&&n.fromArray(d,g)||n.fromRgb(b,g)||n.fromHex(b,g)};return n})},"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/text!./iframe.html dojo/request/script ../sniff".split(" "),function(b,f,q,g,n,l){function k(){var a=document.createElement("iframe");a.name="esri_core_jsonp_iframe";a.style.display="none";a.setAttribute("sandbox","allow-scripts");if(!l("ff")&&"srcdoc"in a){var c=l("esri-built")?"dojo/dojo-lite.js":"dojo/dojo.js",m=
b.toUrl(c),c=g.replace("../../../dojo/dojo.js",m),m=m.slice(0,m.lastIndexOf("/")),c=c.replace("../../../dojo/",m);a.srcdoc=c}else c=b.toUrl("./iframe.html"),"http:"===window.location.protocol&&0===c.indexOf("https:")&&(c=c.replace("https:","http:")),a.src=c;document.body.appendChild(a);return a}function d(){var a=new MessageChannel;a.port1.addEventListener("message",h);a.port1.start();return a}function h(c){var d=c.data;if("ready"===d){for(var d=0,m=z;d<m.length;d++)c=m[d],a(c,u);z=null}else if(c=
t[d.id])delete t[d.id],d.isError?c.dfd.reject(Error(d.message)):c.dfd.resolve(d.response)}function c(a,c){a.addEventListener("load",function(){a.contentWindow.postMessage("init","*",[c.port2])})}function a(a,c){t[a.message.id]=a;c.port1.postMessage(a.message)}Object.defineProperty(f,"__esModule",{value:!0});var p,u,v=0,z=[],t={};f.get=function(b,r){if(!l("esri-script-sandbox"))return n.get(b,r);var m=null;r&&(m={jsonp:r.jsonp,preventCache:r.preventCache,query:r.query,timeout:r.timeout});r=new q(function(){if(z){var a=
z.indexOf(e);-1<a&&z.splice(a,1)}else e.message.id in t&&delete t[e.message.id]});var e={dfd:r,message:{id:"id"+(++v+Math.random()),url:b,options:m}};p||(p=k(),u=d(),c(p,u));z?z.push(e):a(e,u);return r.promise}})},"dojo/text":function(){define(["./_base/kernel","require","./has","./has!host-browser?./request"],function(b,f,q,g){var n;q("host-browser")?n=function(c,a,d){g(c,{sync:!!a,headers:{"X-Requested-With":null}}).then(d)}:f.getText?n=f.getText:console.error("dojo/text plugin failed to load because loader does not support getText");
var l={},k=function(c){if(c){c=c.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var a=c.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);a&&(c=a[1])}else c="";return c},d={},h={};b.cache=function(c,a,d){var b;"string"==typeof c?/\//.test(c)?(b=c,d=a):b=f.toUrl(c.replace(/\./g,"/")+(a?"/"+a:"")):(b=c+"",d=a);c=void 0!=d&&"string"!=typeof d?d.value:d;d=d&&d.sanitize;if("string"==typeof c)return l[b]=c,d?k(c):c;if(null===c)return delete l[b],null;b in l||n(b,!0,function(a){l[b]=
a});return d?k(l[b]):l[b]};return{dynamic:!0,normalize:function(c,a){c=c.split("!");var d=c[0];return(/^\./.test(d)?a(d):d)+(c[1]?"!"+c[1]:"")},load:function(c,a,b){c=c.split("!");var p=1<c.length,g=c[0],f=a.toUrl(c[0]);c="url:"+f;var t=d,x=function(a){b(p?k(a):a)};g in l?t=l[g]:a.cache&&c in a.cache?t=a.cache[c]:f in l&&(t=l[f]);if(t===d)if(h[f])h[f].push(x);else{var r=h[f]=[x];n(f,!a.async,function(a){l[g]=l[f]=a;for(var e=0;e<r.length;)r[e++](a);delete h[f]})}else x(t)}}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a){function p(e,a){e.canDelete&&x._remove(e.id,a.options.frameDoc,!0)}function u(e){y&&y.length&&(n.forEach(y,function(e){x._remove(e.id,e.frameDoc);e.frameDoc=null}),y=[]);return e.options.jsonp?!e.data:!0}function v(e){return!!this.scriptLoaded}function z(e){return(e=e.options.checkString)&&eval("typeof("+e+') !\x3d\x3d "undefined"')}function t(e,a){if(this.canDelete){var m=this.response.options;y.push({id:this.id,frameDoc:m.ioArgs?m.ioArgs.frameDoc:m.frameDoc});m.ioArgs&&
(m.ioArgs.frameDoc=null);m.frameDoc=null}a?this.reject(a):this.resolve(e)}function x(a,c,d){var b=q.parseArgs(a,q.deepCopy({},c));a=b.url;c=b.options;var h=q.deferred(b,p,u,c.jsonp?null:c.checkString?z:v,t);l.mixin(h,{id:r+m++,canDelete:!1});c.jsonp&&((new RegExp("[?\x26]"+c.jsonp+"\x3d")).test(a)||(a+=(~a.indexOf("?")?"\x26":"?")+c.jsonp+"\x3d"+(c.frameDoc?"parent.":"")+r+"_callbacks."+h.id),h.canDelete=!0,w[h.id]=function(e){b.data=e;h.handleResponse(b)});q.notify&&q.notify.emit("send",b,h.promise.cancel);
if(!c.canAttach||c.canAttach(h)){var g=x._attach(h.id,a,c.frameDoc,function(e){if(!(e instanceof Error)){var a=Error("Error loading "+(e.target?e.target.src:"script"));a.source=e;e=a}h.reject(e);x._remove(h.id,c.frameDoc,!0)});if(!c.jsonp&&!c.checkString)var n=k(g,"readystatechange",function(a){if("load"===a.type||e.test(g.readyState))n.remove(),h.scriptLoaded=a})}f(h);return d?h:h.promise}var r=b.id.replace(/[\/\.\-]/g,"_"),m=0,e=/complete|loaded/,w=g.global[r+"_callbacks"]={},y=[];x.get=x;x._attach=
function(e,m,c,d){c=c||a.doc;var b=c.createElement("script");if(d)k.once(b,"error",d);b.type="text/javascript";try{b.src=m}catch(G){d&&d(b)}b.id=e;b.async=!0;b.charset="utf-8";return c.getElementsByTagName("head")[0].appendChild(b)};x._remove=function(e,a,m){h.destroy(d.byId(e,a));w[e]&&(m?w[e]=function(){delete w[e]}:delete w[e])};x._callbacksProperty=r+"_callbacks";return x})},"esri/core/sniff":function(){define(["require","exports","dojo/sniff","./global","../views/webgl/context-util"],function(b,
f,q,g,n){function l(){var c={available:!1,version:0,majorPerformanceCaveat:!1,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1},a=document.createElement("canvas");if(!a)return c;var d=n.createContext(a,{failIfMajorPerformanceCaveat:!0},"webgl");!d&&(d=n.createContext(a,{},"webgl"))&&(c.majorPerformanceCaveat=!0);if(!d)return c;a=d.getParameter(d.VERSION);if(!a)return c;if(a=a.match(/^WebGL\s+([\d.]*)/))c.version=parseFloat(a[1]),c.available=.94<=c.version,
a=d.getShaderPrecisionFormat(d.FRAGMENT_SHADER,d.HIGH_FLOAT),c.supportsHighPrecisionFragment=a&&0<a.precision,c.supportsVertexShaderSamplers=0<d.getParameter(d.MAX_VERTEX_TEXTURE_IMAGE_UNITS),c.supportsElementIndexUint=null!==d.getExtension("OES_element_index_uint");return c}function k(){var c={available:!1,version:0},a=document.createElement("canvas");if(!a)return c;a=n.createContext(a,{},"webgl2");if(!a)return c;c.available=!0;a=a.getParameter(a.VERSION);if(!a)return c;if(a=a.match(/^WebGL\s+([\d.]*)/))c.version=
parseFloat(a[1]);return c}(function(){var c=navigator.userAgent,a=c.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i),c=c.match(/iPhone/i);a&&q.add("esri-mobile",a);c&&q.add("esri-iPhone",c);q.add("esri-phonegap",!!g.cordova);q.add("esri-cors",q("esri-phonegap")||"XMLHttpRequest"in g&&"withCredentials"in new XMLHttpRequest);q.add("esri-canvas-svg-support",function(){return!(q("trident")||q("ie"))});q.add("esri-wasm","WebAssembly"in g);q("host-webworker")||(q.add("esri-workers",
"Worker"in g),q.add("esri-script-sandbox",function(){return"MessageChannel"in g&&"HTMLIFrameElement"in g&&"sandbox"in HTMLIFrameElement.prototype}),q.add("esri-url-encodes-apostrophe",function(){var a=g.document.createElement("a");a.href="?'";return-1<a.href.indexOf("?%27")}),d||(d=l()),q.add("esri-webgl",d.available),q.add("esri-webgl-high-precision-fragment",d.supportsHighPrecisionFragment),q.add("esri-webgl-vertex-shader-samplers",d.supportsVertexShaderSamplers),q.add("esri-webgl-element-index-uint",
d.supportsElementIndexUint),q.add("esri-webgl-major-performance-caveat",d.majorPerformanceCaveat),h||(h=k()),q.add("esri-webgl2",h.available))})();var d=null,h=null;return q})},"esri/core/global":function(){define(["require","exports"],function(b,f){return function(){if("undefined"!==typeof global)return global;if("undefined"!==typeof window)return window;if("undefined"!==typeof self)return self}()})},"esri/views/webgl/context-util":function(){define(["require","exports"],function(b,f){function q(b,
d,h){void 0===d&&(d={});var c;switch(h){case "webgl":c=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case "webgl2":c=["webgl2"];break;default:c=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}h=null;for(var a=0;a<c.length;a++){var p=c[a];try{h=b.getContext(p,d)}catch(u){}if(h)break}return h}function g(b,d){(b=b.parentNode)&&(b.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
d+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}Object.defineProperty(f,"__esModule",{value:!0});f.createContextOrErrorHTML=function(b,d,h){void 0===d&&(d={});if(!window.WebGLRenderingContext)return g(b,n),null;d=q(b,d,h);return d?d:(g(b,l),null)};f.createContext=q;var n='This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e',l='It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'})},
"esri/Map":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./Basemap ./Ground ./core/Accessor ./core/CollectionFlattener ./core/Evented ./core/Logger ./core/accessorSupport/decorators ./support/basemapUtils ./support/groundUtils ./support/LayersMixin".split(" "),function(b,f,q,g,n,l,k,d,h,c,a,p,u,v){var z=c.getLogger("esri.Map");return function(c){function b(a){a=c.call(this)||this;a.basemap=null;a.ground=new l;a._basemapCache=p.createCache();
return a}q(b,c);Object.defineProperty(b.prototype,"allLayers",{get:function(){return new d({root:this,rootCollectionNames:["basemap.baseLayers","ground.layers","layers","basemap.referenceLayers"],getChildrenFunction:function(a){return a.layers}})},enumerable:!0,configurable:!0});b.prototype.castBasemap=function(a){return p.ensureType(a,this._basemapCache)};b.prototype.castGround=function(a){a=u.ensureType(a);return a?a:(z.error("Map.ground may not be set to null or undefined"),this._get("ground"))};
g([a.property({readOnly:!0})],b.prototype,"allLayers",null);g([a.property({type:n})],b.prototype,"basemap",void 0);g([a.cast("basemap")],b.prototype,"castBasemap",null);g([a.property({type:l})],b.prototype,"ground",void 0);g([a.cast("ground")],b.prototype,"castGround",null);return b=g([a.subclass("esri.Map")],b)}(a.declared(k,h,v))})},"esri/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(b,f){return function(b,g){b.__bases__=g.__bases__}})},"esri/core/tsSupport/decorateHelper":function(){define([],
function(){return function(b,f,q,g){var n=arguments.length,l=3>n?f:null===g?g=Object.getOwnPropertyDescriptor(f,q):g,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(b,f,q,g);else for(var d=b.length-1;0<=d;d--)if(k=b[d])l=(3>n?k(l):3<n?k(f,q,l):k(f,q))||l;return 3<n&&l&&Object.defineProperty(f,q,l),l}})},"esri/Basemap":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/Collection ./core/collectionUtils ./core/Evented ./core/JSONSupport ./core/lang ./core/Loadable ./core/Logger ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators ./layers/Layer ./portal/Portal ./portal/PortalItem ./support/basemapDefinitions".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z,t,x,r,m){var e=0,w=l.ofType(t),y=p.getLogger("esri.Basemap");return function(a){function d(m){var c=a.call(this)||this;c.id=null;c.portalItem=null;c.thumbnailUrl=null;c.title="Basemap";c.id=Date.now().toString(16)+"-basemap-"+e++;c.baseLayers=new w;c.referenceLayers=new w;var d=function(e){e.parent&&e.parent!==c&&"remove"in e.parent&&e.parent.remove(e);e.parent=c;"elevation"===e.type&&y.error("Layer '"+e.title+", id:"+e.id+"' of type '"+e.type+"' is not supported as a basemap layer and will therefore be ignored.")};
c.baseLayers.on("after-add",function(e){return d(e.item)});c.referenceLayers.on("after-add",function(e){return d(e.item)});c.baseLayers.on("after-remove",function(e){e.item.parent=null});c.referenceLayers.on("after-remove",function(e){e.item.parent=null});return c}g(d,a);h=d;d.prototype.initialize=function(){var e=this;this.when().catch(function(a){y.error("#load()","Failed to load basemap (title: '"+e.title+"', id: '"+e.id+"')",a)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)};
d.prototype.normalizeCtorArgs=function(e){e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),e=q({},e),delete e.resourceInfo);return e};Object.defineProperty(d.prototype,"baseLayers",{set:function(e){this._set("baseLayers",k.referenceSetter(e,this._get("baseLayers"),w))},enumerable:!0,configurable:!0});d.prototype.writeBaseLayers=function(e,a,m,c){var d=[];e&&(c=q({},c,{layerContainerType:"basemap"}),this.baseLayers.forEach(function(e){if(e.write){var a={};e.write(a,c)&&d.push(a)}}),
this.referenceLayers.forEach(function(e){if(e.write){var a={isReference:!0};e.write(a,c)&&d.push(a)}}));a[m]=d};Object.defineProperty(d.prototype,"referenceLayers",{set:function(e){this._set("referenceLayers",k.referenceSetter(e,this._get("referenceLayers"),w))},enumerable:!0,configurable:!0});d.prototype.writeTitle=function(e,a){a.title=e||"Basemap"};d.prototype.load=function(){this.addResolvingPromise(this._loadFromSource());return this.when()};d.prototype.clone=function(){var e={id:this.id,title:this.title,
portalItem:this.portalItem,resourceInfo:this.resourceInfo,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};this.loaded&&(e.loadStatus="loaded");return new h(e)};d.prototype.read=function(e,a){this.resourceInfo||this._set("resourceInfo",{data:e,context:a});return this.inherited(arguments)};d.prototype.write=function(e,a){e=e||{};a&&a.origin||(a=q({origin:"web-map"},a));this.inherited(arguments,[e,a]);!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&
(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(function(e){e=c.clone(e);e.url&&v.isProtocolRelative(e.url)&&(e.url="https:"+e.url);e.templateUrl&&v.isProtocolRelative(e.templateUrl)&&(e.templateUrl="https:"+e.templateUrl);return e}));return e};d.prototype._loadFromSource=function(){var e=this.resourceInfo,a=this.portalItem;return e?this._loadLayersFromJSON(e.data,e.context?e.context.url:null):a?this._loadFromItem(a):u.resolve(null)};d.prototype._loadLayersFromJSON=function(e,a){var m=this,
c=this.resourceInfo&&this.resourceInfo.context,d=this.portalItem&&this.portalItem.portal||c&&c.portal||null,r=c&&"web-scene"===c.origin?"web-scene":"web-map";return u.create(function(e){return b(["./portal/support/layersCreator"],e)}).then(function(c){var b=[];if(e.baseMapLayers&&Array.isArray(e.baseMapLayers)){var h={context:{origin:r,url:a,portal:d,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},p=c.populateOperationalLayers(m.baseLayers,e.baseMapLayers.filter(function(e){return!e.isReference}),
h);b.push.apply(b,p);c=c.populateOperationalLayers(m.referenceLayers,e.baseMapLayers.filter(function(e){return e.isReference}),h);b.push.apply(b,c)}return u.eachAlways(b)}).then(function(){})};d.prototype._loadFromItem=function(e){var a=this;return e.load().then(function(e){return e.fetchData()}).then(function(m){var c=v.urlToObject(e.itemUrl);a._set("resourceInfo",{data:m.baseMap,context:{origin:"web-map",portal:e.portal||x.getDefault(),url:c}});a.read(a.resourceInfo.data,a.resourceInfo.context);
a.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||x.getDefault(),url:c});return a._loadLayersFromJSON(a.resourceInfo.data,c)})};d.fromId=function(e){return(e=m[e])?h.fromJSON(e):null};n([z.property({type:w,json:{write:{ignoreOrigin:!0,target:"baseMapLayers"}}}),z.cast(k.castForReferenceSetter)],d.prototype,"baseLayers",null);n([z.writer("baseLayers")],d.prototype,"writeBaseLayers",null);n([z.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],d.prototype,
"id",void 0);n([z.property({type:r})],d.prototype,"portalItem",void 0);n([z.property({type:w}),z.cast(k.castForReferenceSetter)],d.prototype,"referenceLayers",null);n([z.property({readOnly:!0})],d.prototype,"resourceInfo",void 0);n([z.property()],d.prototype,"thumbnailUrl",void 0);n([z.property({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],d.prototype,"title",void 0);n([z.writer("title")],d.prototype,"writeTitle",null);return d=h=n([z.subclass("esri.Basemap")],d);var h}(z.declared(h,
d,a))})},"esri/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(b){for(var f,q=1,g=arguments.length;q<g;q++){f=arguments[q];for(var n in f)Object.prototype.hasOwnProperty.call(f,n)&&(b[n]=f[n])}return b}})},"esri/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./Accessor ./ArrayPool ./Evented ./lang ./ObjectPool ./scheduling ./accessorSupport/decorators ./accessorSupport/ensureType".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u){function v(e){return e?e.isInstanceOf&&e.isInstanceOf(B):!1}function z(e){return e?v(e)?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function t(e){if(e&&e.length)return e[0]}function x(e,a,m,c){a&&a.forEach(function(a,d,b){e.push(a);x(e,m.call(c,a,d,b),m,c)})}b=function(){function e(){this.target=null;this.defaultPrevented=this.cancellable=!1}e.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};e.prototype.reset=function(e){this.defaultPrevented=
!1;this.item=e};return e}();var r=function(){},m=new c(b,!0,function(e){e.item=null;e.target=null}),e=new Set,w=new Set,y=new Set,A=new Map,D=0,B=function(c){function d(e){e=c.call(this,e)||this;e._boundDispatch=e._dispatchColChange.bind(e);e._chgListeners=[];e._notifications=null;e._timer=null;e.length=0;e._items=[];Object.defineProperty(e,"uid",{value:D++});return e}q(d,c);b=d;d.ofType=function(e){if(!e)return b;if(A.has(e))return A.get(e);var a;if("function"===typeof e)a=e.prototype.declaredClass;
else if(e.base)a=e.base.prototype.declaredClass;else for(var m in e.typeMap){var c=e.typeMap[m].prototype.declaredClass;a=a?a+(" | "+c):c}a=b.createSubclass({declaredClass:"esri.core.Collection\x3c"+a+"\x3e"});m={Type:e,ensureType:"function"===typeof e?u.ensureType(e):u.ensureOneOfType(e)};Object.defineProperty(a.prototype,"itemType",{value:m});A.set(e,a);return a};d.prototype.normalizeCtorArgs=function(e){return e?Array.isArray(e)||v(e)?{items:e}:e:{}};Object.defineProperty(d.prototype,"items",{get:function(){return this._items},
set:function(e){this._emitBeforeChanges()||(this._splice.apply(this,[0,this.length].concat(z(e))),this._emitAfterChanges())},enumerable:!0,configurable:!0});d.prototype.on=function(e,a){var m;Array.isArray(e)?m=e:-1<e.indexOf(",")&&(m=e.split(/\s*,\s*/));if(m){var c=[];for(e=0;e<m.length;e++)c.push(this.on(m[e],a));c.remove=function(){for(var e=0;e<c.length;e++)c[e].remove()};return c}if("change"===e){var d=this._chgListeners,b={removed:!1,callback:a};d.push(b);this._notifications&&this._notifications.push({listeners:d.slice(),
items:this._items.slice(),changes:[]});return{remove:function(){this.remove=r;b.removed=!0;d.splice(d.indexOf(b),1)}}}return n.after(this,"on"+e,a,!0)};d.prototype.hasEventListener=function(e){return"change"===e?0<this._chgListeners.length:this.inherited(arguments)};d.prototype.add=function(e,a){if(this._emitBeforeChanges())return this;a=this.getNextIndex(a);this._splice(a,0,e);this._emitAfterChanges();return this};d.prototype.addMany=function(e,a){void 0===a&&(a=this._items.length);if(!e||!e.length||
this._emitBeforeChanges())return this;a=this.getNextIndex(a);this._splice.apply(this,[a,0].concat(z(e)));this._emitAfterChanges();return this};d.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges())return[];var e=this._splice(0,this.length)||[];this._emitAfterChanges();return e};d.prototype.clone=function(){return this._createNewInstance({items:this._items.map(h.clone)})};d.prototype.concat=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];e=e.map(z);return this._createNewInstance({items:(m=
this._items).concat.apply(m,e)});var m};d.prototype.drain=function(e,a){if(this.length&&!this._emitBeforeChanges()){for(var m=this._splice(0,this.length),c=m.length,d=0;d<c;d++)e.call(a,m[d],d,m);this._emitAfterChanges()}};d.prototype.every=function(e,a){return this._items.every(e,a)};d.prototype.filter=function(e,a){var m;m=2===arguments.length?this._items.filter(e,a):this._items.filter(e);return this._createNewInstance({items:m})};d.prototype.find=function(e,a){if("function"!==typeof e)throw new TypeError(e+
" is not a function");for(var m=this._items,c=m.length,d=0;d<c;d++){var b=m[d];if(e.call(a,b,d,m))return b}};d.prototype.findIndex=function(e,a){if("function"!==typeof e)throw new TypeError(e+" is not a function");for(var m=this._items,c=m.length,d=0;d<c;d++)if(e.call(a,m[d],d,m))return d;return-1};d.prototype.flatten=function(e,a){var m=[];x(m,this,e,a);return new b(m)};d.prototype.forEach=function(e,a){for(var m=this._items,c=m.length,d=0;d<c;d++)e.call(a,m[d],d,m)};d.prototype.getItemAt=function(e){return this._items[e]};
d.prototype.getNextIndex=function(e){var a=this.length;e=null==e?a:e;0>e?e=0:e>a&&(e=a);return e};d.prototype.includes=function(e,a){void 0===a&&(a=0);return arguments.length?-1!==this._items.indexOf(e,a):!1};d.prototype.indexOf=function(e,a){void 0===a&&(a=0);return this._items.indexOf(e,a)};d.prototype.join=function(e){void 0===e&&(e=",");return this._items.join(e)};d.prototype.lastIndexOf=function(e,a){void 0===a&&(a=this.length-1);return this._items.lastIndexOf(e,a)};d.prototype.map=function(e,
a){e=this._items.map(e,a);return new b({items:e})};d.prototype.reorder=function(e,a){void 0===a&&(a=this.length-1);var m=this.indexOf(e);if(-1!==m){0>a?a=0:a>=this.length&&(a=this.length-1);if(m!==a){if(this._emitBeforeChanges())return e;this._splice(m,1);this._splice(a,0,e);this._emitAfterChanges()}return e}};d.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges()){var e=t(this._splice(this.length-1,1));this._emitAfterChanges();return e}};d.prototype.push=function(){for(var e=[],a=
0;a<arguments.length;a++)e[a]=arguments[a];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[this.length,0].concat(e));this._emitAfterChanges();return this.length};d.prototype.reduce=function(e,a){var m=this._items;return 2===arguments.length?m.reduce(e,a):m.reduce(e)};d.prototype.reduceRight=function(e,a){var m=this._items;return 2===arguments.length?m.reduceRight(e,a):m.reduceRight(e)};d.prototype.remove=function(e){return this.removeAt(this.indexOf(e))};d.prototype.removeAt=
function(e){if(!(0>e||e>=this.length||this._emitBeforeChanges()))return e=t(this._splice(e,1)),this._emitAfterChanges(),e};d.prototype.removeMany=function(e){if(!e||!e.length||this._emitBeforeChanges())return[];e=v(e)?e.toArray():e;for(var a=this._items,m=[],c=e.length,d=0;d<c;d++){var b=a.indexOf(e[d]);if(-1<b){for(var r=d+1,h=b+1,p=Math.min(e.length-r,a.length-h),g=0;g<p&&e[r+g]===a[h+g];)g++;r=1+g;(b=this._splice(b,r))&&0<b.length&&m.push.apply(m,b);d+=r-1}}this._emitAfterChanges();return m};d.prototype.reverse=
function(){if(this._emitBeforeChanges())return this;var e=this._splice(0,this.length);e&&(e.reverse(),this._splice.apply(this,[0,0].concat(e)));this._emitAfterChanges();return this};d.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var e=t(this._splice(0,1));this._emitAfterChanges();return e}};d.prototype.slice=function(e,a){void 0===e&&(e=0);void 0===a&&(a=this.length);return this._createNewInstance({items:this._items.slice(e,a)})};d.prototype.some=function(e,a){return this._items.some(e,
a)};d.prototype.sort=function(e){if(!this.length||this._emitBeforeChanges())return this;var a=this._splice(0,this.length);arguments.length?a.sort(e):a.sort();this._splice.apply(this,[0,0].concat(a));return this};d.prototype.splice=function(e,a){for(var m=[],c=2;c<arguments.length;c++)m[c-2]=arguments[c];if(this._emitBeforeChanges())return[];m=this._splice.apply(this,[e,a].concat(m))||[];this._emitAfterChanges();return m};d.prototype.toArray=function(){return this._items.slice()};d.prototype.toJSON=
function(){return this.toArray()};d.prototype.toLocaleString=function(){return this._items.toLocaleString()};d.prototype.toString=function(){return this._items.toString()};d.prototype.unshift=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[0,0].concat(e));this._emitAfterChanges();return this.length};d.prototype._createNewInstance=function(e){return new this.constructor(e)};d.prototype._splice=function(e,
c){for(var d=[],b=2;b<arguments.length;b++)d[b-2]=arguments[b];var b=this._items,r=this.constructor.prototype.itemType,h,p;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=a.schedule(this._boundDispatch));if(c){p=b.splice(e,c);if(this.hasEventListener("before-remove")){var g=m.acquire();g.target=this;g.cancellable=!0;for(var w=0,k=p.length;w<k;w++)h=
p[w],g.reset(h),this.emit("before-remove",g),g.defaultPrevented&&(p.splice(w,1),b.splice(e,0,h),e+=1,--w,--k);m.release(g)}this.length=this._items.length;if(this.hasEventListener("after-remove")){h=m.acquire();h.target=this;h.cancellable=!1;k=p.length;for(w=0;w<k;w++)h.reset(p[w]),this.emit("after-remove",h);m.release(h)}}if(d&&d.length){if(r){w=[];for(k=0;k<d.length;k++)h=d[k],g=r.ensureType(h),null==g&&null!=h||w.push(g);d=w}r=this.hasEventListener("before-add");w=this.hasEventListener("after-add");
k=e===this.length;if(r||w){h=m.acquire();h.target=this;h.cancellable=!0;g=m.acquire();g.target=this;g.cancellable=!1;for(var u=0,f=d;u<f.length;u++){var l=f[u];r?(h.reset(l),this.emit("before-add",h),h.defaultPrevented||(k?b.push(l):b.splice(e++,0,l),this._set("length",b.length),w&&(g.reset(l),this.emit("after-add",g)))):(k?b.push(l):b.splice(e++,0,l),this._set("length",b.length),g.reset(l),this.emit("after-add",g))}m.release(h)}else k?b.push.apply(b,d):b.splice.apply(b,[e,0].concat(d)),this._set("length",
b.length)}(d&&d.length||p&&p.length)&&this._notifyChangeEvent(d,p);return p};d.prototype._emitBeforeChanges=function(){var e=!1;if(this.hasEventListener("before-changes")){var a=m.acquire();a.target=this;a.cancellable=!0;this.emit("before-changes",a);e=a.defaultPrevented;m.release(a)}return e};d.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var e=m.acquire();e.target=this;e.cancellable=!1;this.emit("after-changes",e);m.release(e)}};d.prototype._notifyChangeEvent=
function(e,a){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:a})};d.prototype._dispatchColChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var a=this._notifications;this._notifications=null;for(var m=function(a){var m=a.changes;e.clear();w.clear();y.clear();for(var d=0;d<m.length;d++){var b=m[d],r=b.added,b=b.removed;if(r)if(0===y.size&&0===w.size)for(var h=0,p=r;h<p.length;h++)r=p[h],e.add(r);
else for(h=0,p=r;h<p.length;h++)r=p[h],w.has(r)?(y.add(r),w.delete(r)):y.has(r)||e.add(r);if(b)if(0===y.size&&0===e.size)for(h=0;h<b.length;h++)r=b[h],w.add(r);else for(h=0;h<b.length;h++)r=b[h],e.has(r)?e.delete(r):(y.delete(r),w.add(r))}var g=k.acquire();e.forEach(function(e){g.push(e)});var u=k.acquire();w.forEach(function(e){u.push(e)});var l=c._items,f=a.items,n=k.acquire();y.forEach(function(e){f.indexOf(e)!==l.indexOf(e)&&n.push(e)});if(a.listeners&&(g.length||u.length||n.length))for(m={target:c,
added:g,removed:u,moved:n},d=a.listeners.length,r=0;r<d;r++)b=a.listeners[r],b.removed||b.callback.call(c,m);k.release(g);k.release(u);k.release(n)},c=this,d=0;d<a.length;d++)m(a[d]);e.clear();w.clear();y.clear()}};d.isCollection=v;g([p.property()],d.prototype,"length",void 0);g([p.property()],d.prototype,"items",null);return d=b=g([p.subclass("esri.core.Collection")],d);var b}(p.declared(l,d));return B})},"esri/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),
function(b,f,q,g,n,l){f=f.default;b.before(function(d,h){b.hasMixin(d,k)&&g.processPrototype(h)});b.after(function(d){b.hasMixin(d,k)&&(g.processClass(d),Object.defineProperties(d.prototype,{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},constructed:{get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var k=b(null,{declaredClass:"esri.core.Accessor",
"-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===k)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{value:new f(this)});if(0<arguments.length&&this.normalizeCtorArgs){for(var d=[],b=0;b<arguments.length;b++)d.push(arguments[b]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,d)}},__accessor__:null,postscript:function(d){var b=this.__accessor__;
d=b.ctorArgs||d;var c;null!=this.getDefaults&&(c=this.getDefaults(d||{}),this.set(c));b.initialize();d&&(this.set(d),b.ctorArgs=null);b.constructed();this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");}catch(d){console.warn(d.stack)}else l.removeTarget(this),this.__accessor__.destroy()},get:function(d){return q.get(this,d)},hasOwnProperty:function(d){return this.__accessor__?this.__accessor__.has(d):Object.prototype.hasOwnProperty.call(this,
d)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(d,b){n.set(this,d,b);return this},watch:function(d,b,c){return l.watch(this,d,b,c)},_clearOverride:function(d){return this.__accessor__.clearOverride(d)},_override:function(d,b){return this.__accessor__.override(d,b)},_isOverridden:function(d){return this.__accessor__.isOverridden(d)},notifyChange:function(d){this.__accessor__.propertyInvalidated(d)},_get:function(d){return this.__accessor__.internalGet(d)},_set:function(d,
b){return this.__accessor__.internalSet(d,b)}});return k})},"esri/core/declare":function(){define(["require","exports","dojo/_base/declare"],function(b,f,q){function g(d,b){d&&!Array.isArray(d)&&"function"!==typeof d&&(b=d,d=null);d=d||[];b=b||{};return n([this].concat(d),b)}function n(d,b){d&&!Array.isArray(d)&&"function"!==typeof d&&(b=d,d=null);"function"===typeof d?d=[d]:d||(d=[]);b=b||{};var c,a;c=0;for(a=l.length;c<a;c++)l[c](d,b);d=q(d,b);d.createSubclass=g;c=0;for(a=k.length;c<a;c++)k[c](d);
return d}var l=[],k=[];(function(d){d.hasMixin=function(d,c){d=Array.isArray(d)?d.reduce(function(a,c){return c._meta?a.concat(c._meta.bases):a},[]):d._meta?d._meta.bases:d;if(!d)return!1;if("string"===typeof c)for(var a=d.length-1;0<=a;a--)if(d[a].prototype.declaredClass===c)return!0;return-1!==d.indexOf(c)};d.safeMixin=function(d,c){return q.safeMixin(d,c)};d.before=function(d){l.push(d)};d.after=function(d){k.push(d)}})(n||(n={}));return n})},"dojo/_base/declare":function(){define(["./kernel",
"../has","./lang"],function(b,f,q){function g(e,a){throw Error("declare"+(a?" "+a:"")+": "+e);}function n(e,a){for(var m=[],c=[{cls:0,refs:[]}],d={},b=1,r=e.length,p=0,h,w,k,u,l;p<r;++p){(h=e[p])?"[object Function]"!=y.call(h)&&g("mixin #"+p+" is not a callable constructor.",a):g("mixin #"+p+" is unknown. Did you use dojo.require to pull it in?",a);w=h._meta?h._meta.bases:[h];k=0;for(h=w.length-1;0<=h;--h)u=w[h].prototype,u.hasOwnProperty("declaredClass")||(u.declaredClass="uniqName_"+D++),u=u.declaredClass,
d.hasOwnProperty(u)||(d[u]={count:0,refs:[],cls:w[h]},++b),u=d[u],k&&k!==u&&(u.refs.push(k),++k.count),k=u;++k.count;c[0].refs.push(k)}for(;c.length;){k=c.pop();m.push(k.cls);for(--b;l=k.refs,1==l.length;){k=l[0];if(!k||--k.count){k=0;break}m.push(k.cls);--b}if(k)for(p=0,r=l.length;p<r;++p)k=l[p],--k.count||c.push(k)}b&&g("can't build consistent linearization",a);h=e[0];m[0]=h?h._meta&&h===m[m.length-h._meta.bases.length]?h._meta.bases.length:1:0;return m}function l(e,a,m,c){var d,b,r,h,p,k,u=this._inherited=
this._inherited||{};"string"===typeof e&&(d=e,e=a,a=m,m=c);if("function"===typeof e)r=e,e=a,a=m;else try{r=e.callee}catch(N){if(N instanceof TypeError)g("strict mode inherited() requires the caller function to be passed before arguments",this.declaredClass);else throw N;}(d=d||r.nom)||g("can't deduce a name to call inherited()",this.declaredClass);m=c=0;h=this.constructor._meta;c=h.bases;k=u.p;if("constructor"!=d){if(u.c!==r&&(k=0,p=c[0],h=p._meta,h.hidden[d]!==r)){(b=h.chains)&&"string"==typeof b[d]&&
g("calling chained method with inherited: "+d,this.declaredClass);do if(h=p._meta,b=p.prototype,h&&(b[d]===r&&b.hasOwnProperty(d)||h.hidden[d]===r))break;while(p=c[++k]);k=p?k:-1}if(p=c[++k])if(b=p.prototype,p._meta&&b.hasOwnProperty(d))m=b[d];else{r=w[d];do if(b=p.prototype,(m=b[d])&&(p._meta?b.hasOwnProperty(d):m!==r))break;while(p=c[++k])}m=p&&m||w[d]}else{if(u.c!==r&&(k=0,(h=c[0]._meta)&&h.ctor!==r)){for((b=h.chains)&&"manual"===b.constructor||g("calling chained constructor with inherited",this.declaredClass);(p=
c[++k])&&(!(h=p._meta)||h.ctor!==r););k=p?k:-1}for(;(p=c[++k])&&!(m=(h=p._meta)?h.ctor:p););m=p&&m}u.c=m;u.p=k;if(m)return!0===a?m:m.apply(this,a||e)}function k(e,a,m){return"string"===typeof e?"function"===typeof a?this.__inherited(e,a,m,!0):this.__inherited(e,a,!0):"function"===typeof e?this.__inherited(e,a,!0):this.__inherited(e,!0)}function d(e,a,m,c){var d=this.getInherited(e,a,m);if(d)return d.apply(this,c||m||a||e)}function h(e){for(var a=this.constructor._meta.bases,m=0,c=a.length;m<c;++m)if(a[m]===
e)return!0;return this instanceof e}function c(e,a){for(var m in a)"constructor"!=m&&a.hasOwnProperty(m)&&(e[m]=a[m])}function a(e){m.safeMixin(this.prototype,e);return this}function p(e,a){e instanceof Array||"function"===typeof e||(a=e,e=void 0);a=a||{};e=e||[];return m([this].concat(e),a)}function u(e,a){return function(){var m=arguments,c=m,d=m[0],b,p;p=e.length;var h;if(!(this instanceof m.callee))return r(m);if(a&&(d&&d.preamble||this.preamble))for(h=Array(e.length),h[0]=m,b=0;;){(d=m[0])&&
(d=d.preamble)&&(m=d.apply(this,m)||m);d=e[b].prototype;(d=d.hasOwnProperty("preamble")&&d.preamble)&&(m=d.apply(this,m)||m);if(++b==p)break;h[b]=m}for(b=p-1;0<=b;--b)d=e[b],(d=(p=d._meta)?p.ctor:d)&&d.apply(this,h?h[b]:m);(d=this.postscript)&&d.apply(this,c)}}function v(e,a){return function(){var m=arguments,c=m,d=m[0];if(!(this instanceof m.callee))return r(m);a&&(d&&(d=d.preamble)&&(c=d.apply(this,c)||c),(d=this.preamble)&&d.apply(this,c));e&&e.apply(this,m);(d=this.postscript)&&d.apply(this,m)}}
function z(e){return function(){var a=arguments,m=0,c,d;if(!(this instanceof a.callee))return r(a);for(;c=e[m];++m)if(c=(d=c._meta)?d.ctor:c){c.apply(this,a);break}(c=this.postscript)&&c.apply(this,a)}}function t(e,a,m){return function(){var c,d,b=0,r=1;m&&(b=a.length-1,r=-1);for(;c=a[b];b+=r)d=c._meta,(c=(d?d.hidden:c.prototype)[e])&&c.apply(this,arguments)}}function x(e){A.prototype=e.prototype;e=new A;A.prototype=null;return e}function r(e){var a=e.callee,m=x(a);a.apply(m,e);return m}function m(d,
b,r){"string"!=typeof d&&(r=b,b=d,d="");r=r||{};var A,D,F,G,C,J,Z,O=1,N=b;"[object Array]"==y.call(b)?(J=n(b,d),F=J[0],O=J.length-F,b=J[O]):(J=[0],b?"[object Function]"==y.call(b)?(F=b._meta,J=J.concat(F?F.bases:b)):g("base class is not a callable constructor.",d):null!==b&&g("unknown base class. Did you use dojo.require to pull it in?",d));if(b)for(D=O-1;;--D){A=x(b);if(!D)break;F=J[D];(F._meta?c:e)(A,F.prototype);G=f("csp-restrictions")?function(){}:new Function;G.superclass=b;G.prototype=A;b=A.constructor=
G}else A={};m.safeMixin(A,r);F=r.constructor;F!==w.constructor&&(F.nom="constructor",A.constructor=F);for(D=O-1;D;--D)(F=J[D]._meta)&&F.chains&&(Z=e(Z||{},F.chains));A["-chains-"]&&(Z=e(Z||{},A["-chains-"]));b&&b.prototype&&b.prototype["-chains-"]&&(Z=e(Z||{},b.prototype["-chains-"]));F=!Z||!Z.hasOwnProperty("constructor");J[0]=G=Z&&"manual"===Z.constructor?z(J):1==J.length?v(r.constructor,F):u(J,F);G._meta={bases:J,hidden:r,chains:Z,parents:N,ctor:r.constructor};G.superclass=b&&b.prototype;G.extend=
a;G.createSubclass=p;G.prototype=A;A.constructor=G;A.getInherited=k;A.isInstanceOf=h;A.inherited=B;A.__inherited=l;d&&(A.declaredClass=d,q.setObject(d,G));if(Z)for(C in Z)A[C]&&"string"==typeof Z[C]&&"constructor"!=C&&(F=A[C]=t(C,J,"after"===Z[C]),F.nom=C);return G}var e=q.mixin,w=Object.prototype,y=w.toString,A,D=0;A=f("csp-restrictions")?function(){}:new Function;var B=b.config.isDebug?d:l;b.safeMixin=m.safeMixin=function(e,a){var m,c;for(m in a)c=a[m],c===w[m]&&m in w||"constructor"==m||("[object Function]"==
y.call(c)&&(c.nom=m),e[m]=c);return e};return b.declare=m})},"esri/core/accessorSupport/Properties":function(){define("require exports dojo/has ../Logger ./extensions ./PropertyOrigin ./Store".split(" "),function(b,f,q,g,n,l,k){Object.defineProperty(f,"__esModule",{value:!0});g.getLogger("esri.core.accessorSupport.Properties");b=function(){function d(d){this.host=d;this._origin=l.OriginId.USER;this.ctorArgs=this.cursors=null;this.destroyed=!1;this.dirties={};this.lifecycle=0;this.overridden=null;
this.store=new k.default;d=this.host.constructor.__accessorMetadata__;this.metadatas=d.properties;this.autoDestroy=d.autoDestroy}d.prototype.initialize=function(){this.lifecycle=1;n.instanceCreated(this.host,this.metadatas)};d.prototype.constructed=function(){this.lifecycle=2};d.prototype.destroy=function(){this.destroyed=!0;var d=this.cursors;if(this.cursors)for(var c=0,a=Object.getOwnPropertyNames(d);c<a.length;c++){var b=a[c],g=d[b];if(g){for(;0<g.length;)g.pop().propertyDestroyed(this,b);d[b]=
null}}if(this.autoDestroy)for(b in this.metadatas)(d=this.internalGet(b))&&d&&"function"===typeof d.destroy&&(d.destroy(),this.metadatas[b].nonNullable||this.internalSet(b,null))};Object.defineProperty(d.prototype,"initialized",{get:function(){return 0!==this.lifecycle},enumerable:!0,configurable:!0});d.prototype.clearOverride=function(d){this.isOverridden(d)&&(this.overridden[d]=!1,this.propertyInvalidated(d))};d.prototype.get=function(d){var c=this.metadatas[d];if(this.store.has(d)&&!this.dirties[d])return this.store.get(d);
var a=c.get;return a?(c=a.call(this.host),this.store.set(d,c,l.OriginId.COMPUTED),this.propertyCommitted(d),c):c.value};d.prototype.originOf=function(d){var c=this.store.originOf(d);return void 0===c&&(d=this.metadatas[d])&&d.hasOwnProperty("value")?"defaults":l.idToName(c)};d.prototype.has=function(d){return this.metadatas[d]?this.store.has(d):!1};d.prototype.internalGet=function(d){if(this.metadatas[d]){var c=this.store;return c.has(d)?c.get(d):this.metadatas[d].value}};d.prototype.internalSet=
function(d,c){this.metadatas[d]&&(this.propertyInvalidated(d),this.initialized?this.store.set(d,c,this._origin):this.store.set(d,c,l.OriginId.DEFAULTS),this.propertyCommitted(d))};d.prototype.isOverridden=function(d){return null!=this.overridden&&!0===this.overridden[d]};d.prototype.keys=function(){return this.store.keys()};d.prototype.override=function(d,c){if(this.metadatas[d]){this.overridden||(this.overridden={});var a=this.metadatas[d];a.nonNullable&&null==c||((a=a.cast)&&(c=a.call(this.host,
c)),this.overridden[d]=!0,this.internalSet(d,c))}};d.prototype.set=function(d,c){if(this.metadatas[d]){var a=this.metadatas[d];if(!a.nonNullable||null!=c){var b=a.set;(a=a.cast)&&(c=a.call(this.host,c));b?b.call(this.host,c):this.internalSet(d,c)}}};d.prototype.setDefaultOrigin=function(d){this._origin=l.nameToId(d)};d.prototype.propertyInvalidated=function(d){var c=this.dirties,a=this.isOverridden(d),b=this.cursors&&this.cursors[d],h=this.metadatas[d].computes;if(b)for(var g=0;g<b.length;g++)b[g].propertyInvalidated(this,
d);a||(c[d]=!0);if(h)for(d=0;d<h.length;d++)this.propertyInvalidated(h[d])};d.prototype.propertyCommitted=function(d){var c=this.cursors&&this.cursors[d];this.dirties[d]=!1;if(c)for(var a=0;a<c.length;a++)c[a].propertyCommitted(this,d)};d.prototype.addCursor=function(d,c){this.cursors||(this.cursors={});var a=this.cursors[d];a||(this.cursors[d]=a=[]);a.push(c)};d.prototype.removeCursor=function(d,c){var a=this.cursors[d];this.cursors[d]&&(a.splice(a.indexOf(c),1),0===a.length&&(this.cursors[d]=null))};
return d}();f.default=b})},"esri/core/Logger":function(){define(["require","exports","dojo/has"],function(b,f,q){var g={info:0,warn:1,error:2};b=function(){function b(g){void 0===g&&(g={});this.module=g.module||"";this.writer=g.writer||null;this.level=g.level||null;null!=g.enabled&&(this.enabled=!!g.enabled);b._loggers[this.module]=this;g=this.module.lastIndexOf(".");-1!==g&&(this.parent=b.getLogger(this.module.slice(0,g)))}b.prototype.log=function(b){for(var g=[],d=1;d<arguments.length;d++)g[d-1]=
arguments[d];this._isEnabled()&&this._matchLevel(b)&&(d=this._inheritedWriter())&&d.apply(void 0,[b,this.module].concat(g))};b.prototype.error=function(){for(var b=[],g=0;g<arguments.length;g++)b[g]=arguments[g];this.log.apply(this,["error"].concat(b))};b.prototype.warn=function(){for(var b=[],g=0;g<arguments.length;g++)b[g]=arguments[g];this.log.apply(this,["warn"].concat(b))};b.prototype.info=function(){for(var b=[],g=0;g<arguments.length;g++)b[g]=arguments[g];this.log.apply(this,["info"].concat(b))};
b.prototype.getLogger=function(g){return b.getLogger(this.module+"."+g)};b.getLogger=function(g){var k=b._loggers[g];k||(k=new b({module:g}));return k};b.prototype._parentWithMember=function(b,g){for(var d=this;d&&null==d[b];)d=d.parent;return d?d[b]:g};b.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};b.prototype._consoleWriter=function(b,g){for(var d=[],h=2;h<arguments.length;h++)d[h-2]=arguments[h];console[b].apply(console,["["+g+"]"].concat(d))};
b.prototype._matchLevel=function(b){return g[this._parentWithMember("level","error")]<=g[b]};b.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)};b._loggers={};return b}();b.getLogger("esri").level="warn";return b})},"esri/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty","./extensions/serializableProperty"],function(b,f,q,g,n){Object.defineProperty(f,"__esModule",{value:!0});var l=[q.default,
g.default,n.default];f.processPrototypeMetadatas=function(b,d){for(var g=Object.getOwnPropertyNames(b),c=0;c<l.length;c++){var a=l[c];if(a.processPrototypePropertyMetadata)for(var p=0,k=g;p<k.length;p++){var f=k[p];a.processPrototypePropertyMetadata(f,b[f],b,d)}}};f.processClassMetadatas=function(b,d){for(var g=Object.getOwnPropertyNames(b),c=0;c<l.length;c++){var a=l[c];if(a.processClassPropertyMetadata)for(var p=0,k=g;p<k.length;p++){var f=k[p];a.processClassPropertyMetadata(f,b[f],b,d)}}};f.instanceCreated=
function(b,d){for(var g=Object.getOwnPropertyNames(d),c=0;c<l.length;c++){var a=l[c];a.instanceCreated&&a.instanceCreated(b,d,g)}}})},"esri/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports dojo/has ../get ../set ../utils ../wire".split(" "),function(b,f,q,g,n,l,k){function d(d,c,a){var b=l.getProperties(d);return k.wire(d,a.aliasOf,function(){b.propertyInvalidated(c)})}Object.defineProperty(f,"__esModule",{value:!0});f.AliasedPropertyExtension={processClassPropertyMetadata:function(d,
c,a,b){var p=c.aliasOf;if(p&&(d=p.split(".")[0],null!=a[d]&&!c.set&&!c.get)){var h;c.get=function(){var a=g.default(this,p);if("function"===typeof a){h||(h=p.split(".").slice(0,-1).join("."));var c=g.default(this,h);c&&(a=a.bind(c))}return a};c.readOnly||(c.set=function(a){return n.default(this,p,a)})}},instanceCreated:function(b,c,a){for(var p=0;p<a.length;p++){var g=a[p],h=c[g];h.aliasOf&&d(b,g,h)}}};f.default=f.AliasedPropertyExtension})},"esri/core/accessorSupport/get":function(){define(["require",
"exports","./utils"],function(b,f,q){function g(d,b,c){if(null!=c.getItemAt||Array.isArray(c)){var a=parseInt(d,10);if(!isNaN(a))return Array.isArray(c)?c[a]:c.getItemAt(a)}a=q.getProperties(c);return b?q.isPropertyDeclared(a,d)?a.get(d):c[d]:q.isPropertyDeclared(a,d)?a.internalGet(d):c[d]}function n(d,b,c,a){if(null==d)return d;if((d=g(b[a],c,d))||!(a<b.length-1))return a===b.length-1?d:n(d,b,c,a+1)}function l(d,b,c,a){void 0===c&&(c=!1);void 0===a&&(a=0);return"string"===typeof b&&-1===b.indexOf(".")?
g(b,c,d):n(d,q.pathToArray(b),c,a)}function k(d,b){return l(d,b,!0)}Object.defineProperty(f,"__esModule",{value:!0});f.valueOf=l;f.get=k;f.exists=function(d,b){return void 0!==l(b,d,!0)};f.default=k})},"esri/core/accessorSupport/utils":function(){define(["require","exports","../lang"],function(b,f,q){function g(d,b){return b?Object.keys(b).reduce(function(c,a){if("value"===a)return c[a]=b[a],c;if(void 0===c[a])return c[a]=q.clone(b[a]),c;var d=c[a],h=b[a];if(d===h)return c;if(Array.isArray(h)||Array.isArray(c))d=
d?Array.isArray(d)?c[a]=d.concat():c[a]=[d]:c[a]=[],h&&(Array.isArray(h)||(h=[h]),h.forEach(function(a){-1===d.indexOf(a)&&d.push(a)}));else if(h&&"object"===typeof h)c[a]=g(d,h);else if(!c.hasOwnProperty(a)||b.hasOwnProperty(a))c[a]=h;return c},d||{}):d}function n(d){return Array.isArray(d)?d:d.split(".")}function l(d){if(Array.isArray(d)||-1<d.indexOf(",")){d=Array.isArray(d)?d:d.split(",");for(var b=0;b<d.length;b++)d[b]=d[b].trim();return 1===d.length?d[0]:d}return d.trim()}function k(d){var b=
!1;return function(){b||(b=!0,d())}}Object.defineProperty(f,"__esModule",{value:!0});f.getProperties=function(d){return d?d.__accessor__?d.__accessor__:d.propertyInvalidated?d:null:null};f.isPropertyDeclared=function(d,b){return d&&d.metadatas&&null!=d.metadatas[b]};f.merge=g;f.pathToStringOrArray=function(d){return d?"string"===typeof d&&-1===d.indexOf(".")?d:n(d):d};f.pathToArray=n;f.splitPath=l;f.parse=function(d,b,c,a){b=l(b);if(Array.isArray(b)){var p=b.map(function(b){return a(d,b.trim(),c)});
return{remove:k(function(){return p.forEach(function(a){return a.remove()})})}}return a(d,b.trim(),c)};f.once=k})},"esri/core/lang":function(){define("dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),function(b,f,q,g,n,l){function k(a){return void 0!==a&&null!==a}function d(a){return k(a)?a:""}function h(a,c,b){var h=b.match(/([^\(]+)(\([^\)]+\))?/i),r=f.trim(h[1]);b=c[a];var h=JSON.parse((h[2]?f.trim(h[2]):"{}").replace(/^\(/,"{").replace(/\)$/,
"}").replace(/([{,])\s*([0-9a-zA-Z\_]+)\s*:/gi,'$1"$2":').replace(/\"\s*:\s*\'/gi,'":"').replace(/\'\s*(,|\})/gi,'"$1')),m=h.utcOffset;if(-1===p.indexOf(r))r=f.getObject(r),f.isFunction(r)&&(b=r(b,a,c,h));else if("number"===typeof b||"string"===typeof b&&b&&!isNaN(Number(b)))switch(b=Number(b),r){case "NumberFormat":a=f.mixin({},h);c=parseFloat(a.places);if(isNaN(c)||0>c)a.places=Infinity;return g.format(b,a);case "DateString":b=new Date(b);if(h.local||h.systemLocale)return h.systemLocale?b.toLocaleDateString()+
(h.hideTime?"":" "+b.toLocaleTimeString()):b.toDateString()+(h.hideTime?"":" "+b.toTimeString());b=b.toUTCString();h.hideTime&&(b=b.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,""));return b;case "DateFormat":return b=new Date(b),k(m)&&(b=q.add(b,"minute",b.getTimezoneOffset()-m)),n.format(b,h)}return d(b)}function c(a,d){var b;if(d)for(b in a)a.hasOwnProperty(b)&&(void 0===a[b]?delete a[b]:a[b]instanceof Object&&c(a[b],!0));else for(b in a)a.hasOwnProperty(b)&&void 0===a[b]&&delete a[b];return a}function a(c){if(!c||
"object"!=typeof c||f.isFunction(c))return c;if(c instanceof Int8Array||c instanceof Uint8Array||c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Int32Array||c instanceof Uint16Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array||c instanceof Date)return new c.constructor(c);if("function"===typeof c.clone)c=c.clone();else if("function"===typeof c.map&&"function"===typeof c.forEach)c=c.map(a);else{var d={},b,p,r={};for(b in c){p=c[b];var m=!(b in
r)||r[b]!==p;if(!(b in d)||d[b]!==p&&m)d[b]=a?a(p):p}c=d}return c}var p=["NumberFormat","DateString","DateFormat"],u=/<\/?[^>]+>/g;return{equals:function(a,c){return a===c||"number"===typeof a&&isNaN(a)&&"number"===typeof c&&isNaN(c)||f.isFunction((a||{}).getTime)&&f.isFunction((c||{}).getTime)&&a.getTime()==c.getTime()||f.isFunction((a||{}).equals)&&a.equals(c)||f.isFunction((c||{}).equals)&&c.equals(a)||!1},mixin:function(a,c){return f.mixin(a,c)},valueOf:function(a,c){for(var d in a)if(a[d]==c)return d;
return null},stripTags:function(a){if(a){var c=typeof a;if("string"===c)a=a.replace(u,"");else if("object"===c)for(var d in a)(c=a[d])&&"string"===typeof c&&(c=c.replace(u,"")),a[d]=c}return a},substitute:function(a,c,b){var p,r,m;k(b)&&(f.isObject(b)?(p=b.first,r=b.dateFormat,m=b.numberFormat):p=b);if(c&&"{*}"!==c)return f.replace(c,f.hitch({obj:a},function(e,a){e=a.split(":");return 1<e.length?(a=e[0],e.shift(),h(a,this.obj,e.join(":"))):r&&-1!==(r.properties||[]).indexOf(a)?h(a,this.obj,r.formatter||
"DateString"):m&&-1!==(m.properties||[]).indexOf(a)?h(a,this.obj,m.formatter||"NumberFormat"):d(this.obj[a])}));c=[];var e;c.push('\x3ctable class\x3d"esri-table" summary\x3d"'+l.fieldsSummary+'"\x3e\x3ctbody\x3e');for(e in a)if(b=a[e],r&&-1!==(r.properties||[]).indexOf(e)?b=h(e,a,r.formatter||"DateString"):m&&-1!==(m.properties||[]).indexOf(e)&&(b=h(e,a,m.formatter||"NumberFormat")),c.push("\x3ctr\x3e\x3cth\x3e"+e+"\x3c/th\x3e\x3ctd\x3e"+d(b)+"\x3c/td\x3e\x3c/tr\x3e"),p)break;c.push("\x3c/tbody\x3e\x3c/table\x3e");
return c.join("")},filter:function(a,c,d){c=[f.isString(a)?a.split(""):a,d||b.global,f.isString(c)?new Function("item","index","array",c):c];d={};var p;a=c[0];for(p in a)c[2].call(c[p],a[p],p,a)&&(d[p]=a[p]);return d},startsWith:function(a,c,d){d=d||0;return a.indexOf(c,d)===d},endsWith:function(a,c,d){if("number"!==typeof d||!isFinite(d)||Math.floor(d)!==d||d>a.length)d=a.length;d-=c.length;a=a.indexOf(c,d);return-1!==a&&a===d},isDefined:k,fixJson:c,clone:a}})},"dojo/date":function(){define(["./has",
"./_base/lang"],function(b,f){var q={getDaysInMonth:function(b){var g=b.getMonth();return 1==g&&q.isLeapYear(b)?29:[31,28,31,30,31,30,31,31,30,31,30,31][g]},isLeapYear:function(b){b=b.getFullYear();return!(b%400)||!(b%4)&&!!(b%100)},getTimezoneName:function(b){var g=b.toString(),f="",k=g.indexOf("(");if(-1<k)f=g.substring(++k,g.indexOf(")"));else if(k=/([A-Z\/]+) \d{4}$/,g=g.match(k))f=g[1];else if(g=b.toLocaleString(),k=/ ([A-Z\/]+)$/,g=g.match(k))f=g[1];return"AM"==f||"PM"==f?"":f},compare:function(b,
f,l){b=new Date(+b);f=new Date(+(f||new Date));"date"==l?(b.setHours(0,0,0,0),f.setHours(0,0,0,0)):"time"==l&&(b.setFullYear(0,0,0),f.setFullYear(0,0,0));return b>f?1:b<f?-1:0},add:function(b,f,l){var g=new Date(+b),d=!1,h="Date";switch(f){case "day":break;case "weekday":var c;(f=l%5)?c=parseInt(l/5):(f=0<l?5:-5,c=0<l?(l-5)/5:(l+5)/5);var a=b.getDay(),p=0;6==a&&0<l?p=1:0==a&&0>l&&(p=-1);a+=f;if(0==a||6==a)p=0<l?2:-2;l=7*c+f+p;break;case "year":h="FullYear";d=!0;break;case "week":l*=7;break;case "quarter":l*=
3;case "month":d=!0;h="Month";break;default:h="UTC"+f.charAt(0).toUpperCase()+f.substring(1)+"s"}if(h)g["set"+h](g["get"+h]()+l);d&&g.getDate()<b.getDate()&&g.setDate(0);return g},difference:function(b,f,l){f=f||new Date;l=l||"day";var g=f.getFullYear()-b.getFullYear(),d=1;switch(l){case "quarter":b=b.getMonth();f=f.getMonth();d=Math.floor(f/3)+1+4*g-(Math.floor(b/3)+1);break;case "weekday":g=Math.round(q.difference(b,f,"day"));l=parseInt(q.difference(b,f,"week"));if(0==g%7)g=5*l;else{var d=0,h=b.getDay(),
c=f.getDay();l=parseInt(g/7);f=g%7;b=new Date(b);b.setDate(b.getDate()+7*l);b=b.getDay();if(0<g)switch(!0){case 6==h:d=-1;break;case 0==h:d=0;break;case 6==c:d=-1;break;case 0==c:d=-2;break;case 5<b+f:d=-2}else if(0>g)switch(!0){case 6==h:d=0;break;case 0==h:d=1;break;case 6==c:d=2;break;case 0==c:d=1;break;case 0>b+f:d=2}g=g+d-2*l}d=g;break;case "year":d=g;break;case "month":d=f.getMonth()-b.getMonth()+12*g;break;case "week":d=parseInt(q.difference(b,f,"day")/7);break;case "day":d/=24;case "hour":d/=
60;case "minute":d/=60;case "second":d/=1E3;case "millisecond":d*=f.getTime()-b.getTime()}return Math.round(d)}};f.mixin(f.getObject("dojo.date",!0),q);return q})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(b,f,q,g,n){var l={};b.setObject("dojo.number",l);l.format=function(d,g){g=b.mixin({},g||{});var c=f.normalizeLocale(g.locale),c=f.getLocalization("dojo.cldr","number",c);g.customs=c;c=g.pattern||c[(g.type||"decimal")+"Format"];
return isNaN(d)||Infinity==Math.abs(d)?null:l._applyPattern(d,c,g)};l._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;l._applyPattern=function(d,b,c){c=c||{};var a=c.customs.group,p=c.customs.decimal;b=b.split(";");var g=b[0];b=b[0>d?1:0]||"-"+g;if(-1!=b.indexOf("%"))d*=100;else if(-1!=b.indexOf("\u2030"))d*=1E3;else if(-1!=b.indexOf("\u00a4"))a=c.customs.currencyGroup||a,p=c.customs.currencyDecimal||p,b=b.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(a,d,b,r){return(a=c[["symbol","currency","displayName"][b.length-
1]]||c.currency||"")?d+a+r:""});else if(-1!=b.indexOf("E"))throw Error("exponential notation not supported");var h=l._numberPatternRE,g=g.match(h);if(!g)throw Error("unable to find a number expression in pattern: "+b);!1===c.fractional&&(c.places=0);return b.replace(h,l._formatAbsolute(d,g[0],{decimal:p,group:a,places:c.places,round:c.round}))};l.round=function(d,b,c){c=10/(c||10);return(c*+d).toFixed(b)/c};if(0==(.9).toFixed()){var k=l.round;l.round=function(d,b,c){var a=Math.pow(10,-b||0),p=Math.abs(d);
if(!d||p>=a)a=0;else if(p/=a,.5>p||.95<=p)a=0;return k(d,b,c)+(0<d?a:-a)}}l._formatAbsolute=function(d,b,c){c=c||{};!0===c.places&&(c.places=0);Infinity===c.places&&(c.places=6);b=b.split(".");var a="string"==typeof c.places&&c.places.indexOf(","),p=c.places;a?p=c.places.substring(a+1):0<=p||(p=(b[1]||[]).length);0>c.round||(d=l.round(d,p,c.round));d=String(Math.abs(d)).split(".");var h=d[1]||"";b[1]||c.places?(a&&(c.places=c.places.substring(0,a)),a=void 0!==c.places?c.places:b[1]&&b[1].lastIndexOf("0")+
1,a>h.length&&(d[1]=g.pad(h,a,"0",!0)),p<h.length&&(d[1]=h.substr(0,p))):d[1]&&d.pop();p=b[0].replace(",","");a=p.indexOf("0");-1!=a&&(a=p.length-a,a>d[0].length&&(d[0]=g.pad(d[0],a)),-1==p.indexOf("#")&&(d[0]=d[0].substr(d[0].length-a)));var p=b[0].lastIndexOf(","),k,f;-1!=p&&(k=b[0].length-p-1,b=b[0].substr(0,p),p=b.lastIndexOf(","),-1!=p&&(f=b.length-p-1));b=[];for(p=d[0];p;)a=p.length-k,b.push(0<a?p.substr(a):p),p=0<a?p.slice(0,a):"",f&&(k=f,f=void 0);d[0]=b.reverse().join(c.group||",");return d.join(c.decimal||
".")};l.regexp=function(d){return l._parseInfo(d).regexp};l._parseInfo=function(d){d=d||{};var b=f.normalizeLocale(d.locale),b=f.getLocalization("dojo.cldr","number",b),c=d.pattern||b[(d.type||"decimal")+"Format"],a=b.group,p=b.decimal,g=1;if(-1!=c.indexOf("%"))g/=100;else if(-1!=c.indexOf("\u2030"))g/=1E3;else{var k=-1!=c.indexOf("\u00a4");k&&(a=b.currencyGroup||a,p=b.currencyDecimal||p)}b=c.split(";");1==b.length&&b.push("-"+b[0]);b=n.buildGroupRE(b,function(c){c="(?:"+n.escapeString(c,".")+")";
return c.replace(l._numberPatternRE,function(c){var b={signed:!1,separator:d.strict?a:[a,""],fractional:d.fractional,decimal:p,exponent:!1};c=c.split(".");var r=d.places;1==c.length&&1!=g&&(c[1]="###");1==c.length||0===r?b.fractional=!1:(void 0===r&&(r=d.pattern?c[1].lastIndexOf("0")+1:Infinity),r&&void 0==d.fractional&&(b.fractional=!0),!d.places&&r<c[1].length&&(r+=","+c[1].length),b.places=r);c=c[0].split(",");1<c.length&&(b.groupSize=c.pop().length,1<c.length&&(b.groupSize2=c.pop().length));return"("+
l._realNumberRegexp(b)+")"})},!0);k&&(b=b.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(a,c,b,r){a=n.escapeString(d[["symbol","currency","displayName"][b.length-1]]||d.currency||"");if(!a)return"";c=c?"[\\s\\xa0]":"";r=r?"[\\s\\xa0]":"";return d.strict?c+a+r:(c&&(c+="*"),r&&(r+="*"),"(?:"+c+a+r+")?")}));return{regexp:b.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:a,decimal:p,factor:g}};l.parse=function(d,b){b=l._parseInfo(b);d=(new RegExp("^"+b.regexp+"$")).exec(d);if(!d)return NaN;var c=d[1];
if(!d[1]){if(!d[2])return NaN;c=d[2];b.factor*=-1}c=c.replace(new RegExp("["+b.group+"\\s\\xa0]","g"),"").replace(b.decimal,".");return c*b.factor};l._realNumberRegexp=function(d){d=d||{};"places"in d||(d.places=Infinity);"string"!=typeof d.decimal&&(d.decimal=".");"fractional"in d&&!/^0/.test(d.places)||(d.fractional=[!0,!1]);"exponent"in d||(d.exponent=[!0,!1]);"eSigned"in d||(d.eSigned=[!0,!1]);var b=l._integerRegexp(d),c=n.buildGroupRE(d.fractional,function(a){var c="";a&&0!==d.places&&(c="\\"+
d.decimal,c=Infinity==d.places?"(?:"+c+"\\d+)?":c+("\\d{"+d.places+"}"));return c},!0),a=n.buildGroupRE(d.exponent,function(a){return a?"([eE]"+l._integerRegexp({signed:d.eSigned})+")":""}),b=b+c;c&&(b="(?:(?:"+b+")|(?:"+c+"))");return b+a};l._integerRegexp=function(d){d=d||{};"signed"in d||(d.signed=[!0,!1]);"separator"in d?"groupSize"in d||(d.groupSize=3):d.separator="";var b=n.buildGroupRE(d.signed,function(a){return a?"[-+]":""},!0),c=n.buildGroupRE(d.separator,function(a){if(!a)return"(?:\\d+)";
a=n.escapeString(a);" "==a?a="\\s":"\u00a0"==a&&(a="\\s\\xa0");var c=d.groupSize,b=d.groupSize2;return b?(a="(?:0|[1-9]\\d{0,"+(b-1)+"}(?:["+a+"]\\d{"+b+"})*["+a+"]\\d{"+c+"})",0<c-b?"(?:"+a+"|(?:0|[1-9]\\d{0,"+(c-1)+"}))":a):"(?:0|[1-9]\\d{0,"+(c-1)+"}(?:["+a+"]\\d{"+c+"})*)"},!0);return b+c};return l})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./has!host-browser?./_base/xhr ./json module".split(" "),function(b,f,q,g,n,l,k,d,h){q.add("dojo-preload-i18n-Api",
1);k=b.i18n={};var c=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,a=function(e,a,c,m){var d=[c+m];a=a.split("-");for(var b="",r=0;r<a.length;r++)if(b+=(b?"-":"")+a[r],!e||e[b])d.push(c+b+"/"+m),d.specificity=b;return d},p={},u=function(e,a,c){c=c?c.toLowerCase():b.locale;e=e.replace(/\./g,"/");a=a.replace(/\./g,"/");return/root/i.test(c)?e+"/nls/"+a:e+"/nls/"+c+"/"+a},v=b.getL10nName=function(e,a,c){return e=h.id+"!"+u(e,a,c)},z=function(e,c,m,d,b,r){e([c],function(g){var w=l.clone(g.root||g.ROOT),h=
a(!g._v1x&&g,b,m,d);e(h,function(){for(var e=1;e<h.length;e++)w=l.mixin(l.clone(w),arguments[e]);p[c+"/"+b]=w;w.$locale=h.specificity;r()})})},t=function(e){var a=n.extraLocale||[],a=l.isArray(a)?a:[a];a.push(e);return a},x=function(a,r,h){var k=c.exec(a),f=k[1]+"/",u=k[5]||k[4],n=f+u,v=(k=k[5]&&k[4])||b.locale||"",A=n+"/"+v,k=k?[v]:t(v),B=k.length,x=function(){--B||h(l.delegate(p[A]))},v=a.split("*"),D="preload"==v[1];if(q("dojo-preload-i18n-Api")){if(D&&(p[a]||(p[a]=1,w(v[2],d.parse(v[3]),1,r)),
h(1)),(v=D)||(m&&e.push([a,r,h]),v=m&&!p[A]),v)return}else if(D){h(1);return}g.forEach(k,function(e){var a=n+"/"+e;q("dojo-preload-i18n-Api")&&y(a);p[a]?x():z(r,n,f,u,e,x)})};q("dojo-preload-i18n-Api");var r=k.normalizeLocale=function(e){e=e?e.toLowerCase():b.locale;return"root"==e?"ROOT":e},m=0,e=[],w=k._preloadLocalizations=function(a,c,d,w){function h(e,a){w([e],a)}function k(e,a){for(e=e.split("-");e.length;){if(a(e.join("-")))return;e.pop()}a("ROOT")}function u(){for(--m;!m&&e.length;)x.apply(null,
e.shift())}function n(e){e=r(e);k(e,function(d){if(0<=g.indexOf(c,d)){var b=a.replace(/\./g,"/")+"_"+d;m++;h(b,function(a){for(var c in a){var b=a[c],r=c.match(/(.+)\/([^\/]+)$/),g;if(r&&(g=r[2],r=r[1]+"/",b._localized)){var h;if("ROOT"===d){var n=h=b._localized;delete b._localized;n.root=b;p[f.toAbsMid(c)]=n}else h=b._localized,p[f.toAbsMid(r+g+"/"+d)]=b;d!==e&&function(a,c,d,b){var r=[],g=[];k(e,function(e){b[e]&&(r.push(f.toAbsMid(a+e+"/"+c)),g.push(f.toAbsMid(a+c+"/"+e)))});r.length?(m++,w(r,
function(){for(var m=r.length-1;0<=m;m--)d=l.mixin(l.clone(d),arguments[m]),p[g[m]]=d;p[f.toAbsMid(a+c+"/"+e)]=l.clone(d);u()})):p[f.toAbsMid(a+c+"/"+e)]=d}(r,g,b,h)}}u()});return!0}return!1})}w=w||f;n();g.forEach(b.config.extraLocale,n)},y=function(){},y=function(e){for(var a,c=e.split("/"),m=b.global[c[0]],d=1;m&&d<c.length-1;m=m[c[d++]]);m&&((a=m[c[d]])||(a=m[c[d].replace(/-/g,"_")]),a&&(p[e]=a));return a};k.getLocalization=function(e,a,c){var m;e=u(e,a,c);x(e,f,function(e){m=e});return m};return l.mixin(k,
{dynamic:!0,normalize:function(e,a){return/^\./.test(e)?a(e):e},load:x,cache:p,getL10nName:v})})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(b,f){var q=/[&<>'"\/]/g,g={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},n={};f.setObject("dojo.string",n);n.escape=function(b){return b?b.replace(q,function(b){return g[b]}):""};n.rep=function(b,g){if(0>=g||!b)return"";for(var d=[];;){g&1&&d.push(b);if(!(g>>=1))break;b+=b}return d.join("")};
n.pad=function(b,g,d,h){d||(d="0");b=String(b);g=n.rep(d,Math.ceil((g-b.length)/d.length));return h?b+g:g+b};n.substitute=function(g,k,d,h){h=h||b.global;d=d?f.hitch(h,d):function(c){return c};return g.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(c,a,b){if(""==a)return"$";c=f.getObject(a,!1,k);b&&(c=f.getObject(b,!1,h).call(h,c,a));b=d(c,a);if("undefined"===typeof b)throw Error('string.substitute could not find key "'+a+'" in template');return b.toString()})};n.trim=String.prototype.trim?
f.trim:function(b){b=b.replace(/^\s+/,"");for(var g=b.length-1;0<=g;g--)if(/\S/.test(b.charAt(g))){b=b.substring(0,g+1);break}return b};return n})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(b,f){var q={};f.setObject("dojo.regexp",q);q.escapeString=function(b,f){return b.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(b){return f&&-1!=f.indexOf(b)?b:"\\"+b})};q.buildGroupRE=function(b,f,l){if(!(b instanceof Array))return f(b);for(var g=[],d=0;d<b.length;d++)g.push(f(b[d]));
return q.group(g.join("|"),l)};q.group=function(b,f){return"("+(f?"?:":"")+b+")"};return q})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(b,f,q,g,n,l,k,d,h){function c(a,c,m,e){return e.replace(/([a-z])\1*/ig,function(d){var b,r,p=d.charAt(0);d=d.length;var w=["abbr","wide","narrow"];switch(p){case "G":b=c[4>d?"eraAbbr":"eraNames"][0>a.getFullYear()?0:1];break;
case "y":b=a.getFullYear();switch(d){case 1:break;case 2:if(!m.fullYear){b=String(b);b=b.substr(b.length-2);break}default:r=!0}break;case "Q":case "q":b=Math.ceil((a.getMonth()+1)/3);r=!0;break;case "M":case "L":b=a.getMonth();3>d?(b+=1,r=!0):(p=["months","L"==p?"standAlone":"format",w[d-3]].join("-"),b=c[p][b]);break;case "w":b=u._getWeekOfYear(a,0);r=!0;break;case "d":b=a.getDate();r=!0;break;case "D":b=u._getDayOfYear(a);r=!0;break;case "e":case "c":if(b=a.getDay(),2>d){b=(b-g.getFirstDayOfWeek(m.locale)+
8)%7;break}case "E":b=a.getDay();3>d?(b+=1,r=!0):(p=["days","c"==p?"standAlone":"format",w[d-3]].join("-"),b=c[p][b]);break;case "a":p=12>a.getHours()?"am":"pm";b=m[p]||c["dayPeriods-format-wide-"+p];break;case "h":case "H":case "K":case "k":r=a.getHours();switch(p){case "h":b=r%12||12;break;case "H":b=r;break;case "K":b=r%12;break;case "k":b=r||24}r=!0;break;case "m":b=a.getMinutes();r=!0;break;case "s":b=a.getSeconds();r=!0;break;case "S":b=Math.round(a.getMilliseconds()*Math.pow(10,d-3));r=!0;
break;case "v":case "z":if(b=u._getZone(a,!0,m))break;d=4;case "Z":p=u._getZone(a,!1,m);p=[0>=p?"+":"-",k.pad(Math.floor(Math.abs(p)/60),2),k.pad(Math.abs(p)%60,2)];4==d&&(p.splice(0,0,"GMT"),p.splice(3,0,":"));b=p.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+e);}r&&(b=k.pad(b,d));return b})}function a(a,c,m,e){var d=function(e){return e};c=c||d;m=m||d;e=e||d;var b=a.match(/(''|[^'])+/g),r="'"==a.charAt(0);f.forEach(b,function(e,a){e?(b[a]=(r?m:c)(e.replace(/''/g,
"'")),r=!r):b[a]=""});return e(b.join(""))}function p(a,c,m,e){e=l.escapeString(e);m.strict||(e=e.replace(" a"," ?a"));return e.replace(/([a-z])\1*/ig,function(e){var d;d=e.charAt(0);var b=e.length,r="",g="";m.strict?(1<b&&(r="0{"+(b-1)+"}"),2<b&&(g="0{"+(b-2)+"}")):(r="0?",g="0{0,2}");switch(d){case "y":d="\\d{2,4}";break;case "M":case "L":2<b?(d=c["months-"+("L"==d?"standAlone":"format")+"-"+v[b-3]].slice(0).join("|"),m.strict||(d=d.replace(/\./g,""),d="(?:"+d+")\\.?")):d="1[0-2]|"+r+"[1-9]";break;
case "D":d="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+r+"[1-9][0-9]|"+g+"[1-9]";break;case "d":d="3[01]|[12]\\d|"+r+"[1-9]";break;case "w":d="[1-4][0-9]|5[0-3]|"+r+"[1-9]";break;case "E":case "e":case "c":d=".+?";break;case "h":d="1[0-2]|"+r+"[1-9]";break;case "k":d="1[01]|"+r+"\\d";break;case "H":d="1\\d|2[0-3]|"+r+"\\d";break;case "K":d="1\\d|2[0-4]|"+r+"[1-9]";break;case "m":case "s":d="[0-5]\\d";break;case "S":d="\\d{"+b+"}";break;case "a":b=m.am||c["dayPeriods-format-wide-am"];r=m.pm||c["dayPeriods-format-wide-pm"];
d=b+"|"+r;m.strict||(b!=b.toLowerCase()&&(d+="|"+b.toLowerCase()),r!=r.toLowerCase()&&(d+="|"+r.toLowerCase()),-1!=d.indexOf(".")&&(d+="|"+d.replace(/\./g,"")));d=d.replace(/\./g,"\\.");break;default:d=".*"}a&&a.push(e);return"("+d+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var u={};b.setObject(h.id.replace(/\//g,"."),u);u._getZone=function(a,c,m){return c?q.getTimezoneName(a):a.getTimezoneOffset()};u.format=function(d,r){r=r||{};var m=n.normalizeLocale(r.locale),e=r.formatLength||"short",m=u._getGregorianBundle(m),
g=[];d=b.hitch(this,c,d,m,r);if("year"==r.selector)return a(m["dateFormatItem-yyyy"]||"yyyy",d);var p;"date"!=r.selector&&(p=r.timePattern||m["timeFormat-"+e])&&g.push(a(p,d));"time"!=r.selector&&(p=r.datePattern||m["dateFormat-"+e])&&g.push(a(p,d));return 1==g.length?g[0]:m["dateTimeFormat-"+e].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(e,a){return g[a]})};u.regexp=function(a){return u._parseInfo(a).regexp};u._parseInfo=function(c){c=c||{};var d=n.normalizeLocale(c.locale),d=u._getGregorianBundle(d),
m=c.formatLength||"short",e=c.datePattern||d["dateFormat-"+m],g=c.timePattern||d["timeFormat-"+m],m="date"==c.selector?e:"time"==c.selector?g:d["dateTimeFormat-"+m].replace(/\{(\d+)\}/g,function(a,c){return[g,e][c]}),h=[];return{regexp:a(m,b.hitch(this,p,h,d,c)),tokens:h,bundle:d}};u.parse=function(a,c){var m=/[\u200E\u200F\u202A\u202E]/g,e=u._parseInfo(c),d=e.tokens,b=e.bundle;a=(new RegExp("^"+e.regexp.replace(m,"")+"$",e.strict?"":"i")).exec(a&&a.replace(m,""));if(!a)return null;var r=["abbr",
"wide","narrow"],g=[1970,0,1,0,0,0,0],p="";a=f.every(a,function(e,a){if(!a)return!0;var m=d[a-1];a=m.length;m=m.charAt(0);switch(m){case "y":if(2!=a&&c.strict)g[0]=e;else if(100>e)e=Number(e),m=""+(new Date).getFullYear(),a=100*m.substring(0,2),m=Math.min(Number(m.substring(2,4))+20,99),g[0]=e<m?a+e:a-100+e;else{if(c.strict)return!1;g[0]=e}break;case "M":case "L":if(2<a){if(a=b["months-"+("L"==m?"standAlone":"format")+"-"+r[a-3]].concat(),c.strict||(e=e.replace(".","").toLowerCase(),a=f.map(a,function(e){return e.replace(".",
"").toLowerCase()})),e=f.indexOf(a,e),-1==e)return!1}else e--;g[1]=e;break;case "E":case "e":case "c":a=b["days-"+("c"==m?"standAlone":"format")+"-"+r[a-3]].concat();c.strict||(e=e.toLowerCase(),a=f.map(a,function(e){return e.toLowerCase()}));e=f.indexOf(a,e);if(-1==e)return!1;break;case "D":g[1]=0;case "d":g[2]=e;break;case "a":a=c.am||b["dayPeriods-format-wide-am"];m=c.pm||b["dayPeriods-format-wide-pm"];if(!c.strict){var h=/\./g;e=e.replace(h,"").toLowerCase();a=a.replace(h,"").toLowerCase();m=
m.replace(h,"").toLowerCase()}if(c.strict&&e!=a&&e!=m)return!1;p=e==m?"p":e==a?"a":"";break;case "K":24==e&&(e=0);case "h":case "H":case "k":if(23<e)return!1;g[3]=e;break;case "m":g[4]=e;break;case "s":g[5]=e;break;case "S":g[6]=e}return!0});m=+g[3];"p"===p&&12>m?g[3]=m+12:"a"===p&&12==m&&(g[3]=0);m=new Date(g[0],g[1],g[2],g[3],g[4],g[5],g[6]);c.strict&&m.setFullYear(g[0]);var h=d.join(""),e=-1!=h.indexOf("d"),h=-1!=h.indexOf("M");if(!a||h&&m.getMonth()>g[1]||e&&m.getDate()>g[2])return null;if(h&&
m.getMonth()<g[1]||e&&m.getDate()<g[2])m=q.add(m,"hour",1);return m};var v=["abbr","wide","narrow"],z=[],t={};u.addCustomFormats=function(a,c){z.push({pkg:a,name:c});t={}};u._getGregorianBundle=function(a){if(t[a])return t[a];var c={};f.forEach(z,function(m){m=n.getLocalization(m.pkg,m.name,a);c=b.mixin(c,m)},this);return t[a]=c};u.addCustomFormats(h.id.replace(/\/date\/locale$/,".cldr"),"gregorian");u.getNames=function(a,c,m,e){var d;e=u._getGregorianBundle(e);a=[a,m,c];"standAlone"==m&&(m=a.join("-"),
d=e[m],1==d[0]&&(d=void 0));a[1]="format";return(d||e[a.join("-")]).concat()};u.isWeekend=function(a,c){c=g.getWeekend(c);a=(a||new Date).getDay();c.end<c.start&&(c.end+=7,a<c.start&&(a+=7));return a>=c.start&&a<=c.end};u._getDayOfYear=function(a){return q.difference(new Date(a.getFullYear(),0,1,a.getHours()),a)+1};u._getWeekOfYear=function(a,c){1==arguments.length&&(c=0);var m=(new Date(a.getFullYear(),0,1)).getDay(),e=(m-c+7)%7,e=Math.floor((u._getDayOfYear(a)+e-1)/7);m==c&&e++;return e};return u})},
"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(b,f){var q={};b.setObject("dojo.cldr.supplemental",q);q.getFirstDayOfWeek=function(b){b={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,
sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[q._region(b)];return void 0===b?1:b};q._region=function(b){b=f.normalizeLocale(b);b=b.split("-");var g=b[1];g?4==g.length&&(g=b[2]):g={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",
fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",
mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",
ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",
dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",
kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",
niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",
tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[b[0]];return g};q.getWeekend=function(b){var g=q._region(b);b={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[g];g={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,
ma:6,qa:6,sd:6,sy:6,tn:6}[g];void 0===b&&(b=6);void 0===g&&(g=0);return{start:b,end:g}};return q})},"esri/core/accessorSupport/set":function(){define(["require","exports","dojo/has","../Logger","./get"],function(b,f,q,g,n){function l(b,d,g){if(b&&d)if("object"===typeof d){g=0;for(var c=Object.getOwnPropertyNames(d);g<c.length;g++){var a=c[g];l(b,a,d[a])}}else"_"!==d[0]&&(-1!==d.indexOf(".")?(d=d.split("."),a=d.splice(d.length-1,1)[0],l(n.default(b,d),a,g)):b[d]=g)}Object.defineProperty(f,"__esModule",
{value:!0});g.getLogger("esri.core.accessorSupport.set");f.set=l;f.default=l})},"esri/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(b,f,q){function g(c,a,b){a=q.splitPath(a);if(Array.isArray(a)){for(var g=[],p=0;p<a.length;p++)g.push((new n(a[p],b)).install(c));return new d(g)}c=(new n(a,b)).install(c);return new h(c)}Object.defineProperty(f,"__esModule",{value:!0});var n=function(){function c(a,c){this.path=a;this.callback=c;this.chain=null;this.path=a;-1<
a.indexOf(".")&&(this.chain=q.pathToArray(a));this.callback=c;return this}c.prototype.install=function(a){a=this.chain?new k(this,a):new l(this,a);return a};c.prototype.notify=function(a){this.callback(a,this.path)};return c}(),l=function(){function c(a,c){this.binding=a;this.target=c;q.getProperties(c).addCursor(this.binding.path,this)}c.prototype.destroy=function(){this.target&&(q.getProperties(this.target).removeCursor(this.binding.path,this),this.target=this.binding=null)};c.prototype.propertyDestroyed=
function(a,c){q.getProperties(this.target).removeCursor(c,this)};c.prototype.propertyInvalidated=function(a,c){this.binding&&this.binding.notify(this.target)};c.prototype.propertyCommitted=function(a,c){this.binding&&this.binding.notify(this.target)};return c}(),k=function(){function c(a,c){this.binding=a;this.target=c;this.stack=[];this.properties=q.getProperties(c);this.stack.push({properties:this.properties,propertyName:a.chain[0]});this.properties.addCursor(a.chain[0],this);this.moveForward();
return this}c.prototype.destroy=function(){for(;;){var a=this.stack.pop();if(null==a)break;a.properties.removeCursor(a.propertyName,this)}this.target=this.binding=null};c.prototype.propertyDestroyed=function(a,c){this.moveBackward(a,c)};c.prototype.propertyInvalidated=function(a,c){this.binding&&this.binding.notify(this.target)};c.prototype.propertyCommitted=function(a,c){this.binding&&(this.moveBackward(a,c),this.moveForward(),this.binding.notify(this.target))};c.prototype.moveBackward=function(a,
c){for(var d=this.stack,b=d[d.length-1];b.properties!==a&&b.propertyName!==c;)b.properties.removeCursor(b.propertyName,this),d.pop(),b=d[d.length-1]};c.prototype.moveForward=function(){var a=this.stack,c=a[a.length-1],c=c.properties.internalGet(c.propertyName);(c=q.getProperties(c))&&a.length<this.binding.chain.length&&(a=this.binding.chain[a.length],this.stack.push({properties:c,propertyName:a}),c.addCursor(a,this),this.moveForward())};return c}(),d=function(){function c(a){this.cursors=a}c.prototype.remove=
function(){for(var a=this.cursors;0<a.length;)a.pop().destroy();this.cursors=null};return c}(),h=function(){function c(a){this.cursor=a}c.prototype.remove=function(){this.cursor.destroy();this.cursor=null};return c}();f.create=function(c,a){c=q.splitPath(c);if(Array.isArray(c)){for(var b=[],g=0;g<c.length;g++)b.push(new n(c[g],a));return function(a){for(var c=[],g=0;g<b.length;g++)c[g]=b[g].install(a);return new d(c)}}var k=new n(c,a);return function(a){return new h(k.install(a))}};f.wire=g;f.default=
g})},"esri/core/accessorSupport/extensions/computedProperty":function(){define("require exports dojo/has ../../Logger ../utils ../wire".split(" "),function(b,f,q,g,n,l){Object.defineProperty(f,"__esModule",{value:!0});g.getLogger("esri.core.accessorSupport.extensions.computedProperty");f.ComputedPropertyExtension={processClassPropertyMetadata:function(b,d,g,c){d.dependsOn&&(g=void 0,g=d.dependsOn.slice())&&(d.wire=l.create(g,function(a){return n.getProperties(a).propertyInvalidated(b)}))},instanceCreated:function(b,
d,g){for(var c=0;c<g.length;c++){var a=d[g[c]];a.wire&&a.wire(b)}}};f.default=f.ComputedPropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),function(b,f,q,g,n,l){function k(d,b,c){var a=d&&d.json;d&&d.json&&d.json.origins&&c&&(d=d.json.origins[c.origin])&&b in d&&(a=d);return a}Object.defineProperty(f,
"__esModule",{value:!0});f.originSpecificReadPropertyDefinition=function(d,b){return k(d,"read",b)};f.originSpecificWritePropertyDefinition=function(d,b){return k(d,"write",b)};f.SerializablePropertyExtension={processPrototypePropertyMetadata:function(d,b,c,a){if(n.process(b)){q.process(b);c=b.type;for(a=0;Array.isArray(c);)c=c[0],a++;if(b.json.origins)for(var p in b.json.origins){var h=b.json.origins[p];g.create(c,a,d,h);l.create(c,a,d,h)}g.create(c,a,d,b.json);l.create(c,a,d,b.json)}}};f.default=
f.SerializablePropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(b,f){Object.defineProperty(f,"__esModule",{value:!0});f.process=function(b){if(b.json&&b.json.origins){var g=b.json.origins,f={"web-document":["web-scene","web-map"]};b=function(b){if(g[b]){var d=g[b];f[b].forEach(function(b){g[b]=d});delete g[b]}};for(var l in f)b(l)}}})},"esri/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require",
"exports","../../../object","./type"],function(b,f,q,g){function n(a,b,g,k){if(1<b)return d(a,b);if(1===b)return h(a);if(c(a)){var p=h(a.prototype.itemType.Type);return function(c,d,m){return(c=p(c,d,m))?new a(c):c}}return l(a)}function l(a){return a.prototype.read?function(c,d,b){return null==c?c:(new a).read(c,b)}:a.fromJSON}function k(a,c,d,b){return 0!==b&&Array.isArray(c)?c.map(function(c){return k(a,c,d,b-1)}):a(c,null,d)}function d(a,c){a=l(a);var d=k.bind(null,a);return function(a,b,g){if(null==
a)return a;a=d(a,g,c);b=c;for(g=a;0<b&&Array.isArray(g);)b--,g=g[0];if(void 0!==g)for(g=0;g<b;g++)a=[a];return a}}function h(a){var c=l(a);return function(a,d,b){return null==a?a:Array.isArray(a)?a.map(function(a){return c(a,null,b)}):[c(a,null,b)]}}function c(c){return g.isCollection(c)?(c=c.prototype.itemType)&&c.Type&&"function"===typeof c.Type?a(c.Type):!1:!1}function a(a){return!!a&&(!!a.prototype.read||!!a.fromJSON||c(a))}Object.defineProperty(f,"__esModule",{value:!0});f.create=function(c,
d,b,g){(!g.read||!g.read.reader&&!1!==g.read.enabled)&&a(c)&&q.setDeepValue("read.reader",n(c,d,b,g),g)}})},"esri/core/object":function(){define(["require","exports"],function(b,f){function q(b,f,l){for(var g=0;g<b.length;g++){var d=b[g];if(!(d in l))if(f)l[d]={};else return;l=l[d]}return l}Object.defineProperty(f,"__esModule",{value:!0});f.getDeepValue=function(b,f){return q(b.split("."),!1,f)};f.setDeepValue=function(b,f,l){var g=b.split(".");b=g.pop();(l=q(g,!0,l))&&b&&(l[b]=f)}})},"esri/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require",
"exports"],function(b,f){Object.defineProperty(f,"__esModule",{value:!0});f.isCollection=function(b){return!!b&&!!b.prototype.declaredClass&&0===b.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require","exports"],function(b,f){function q(b){"boolean"===typeof b.read?b.read={enabled:b.read}:"function"===typeof b.read?b.read={enabled:!0,reader:b.read}:b.read&&"object"===typeof b.read&&void 0===b.read.enabled&&
(b.read.enabled=!0)}function g(b){"boolean"===typeof b.write?b.write={enabled:b.write}:"function"===typeof b.write?b.write={enabled:!0,writer:b.write}:b.write&&"object"===typeof b.write&&void 0===b.write.enabled&&(b.write.enabled=!0)}Object.defineProperty(f,"__esModule",{value:!0});f.process=function(b){b.json||(b.json={});q(b.json);g(b.json);if(b.json.origins)for(var f in b.json.origins)q(b.json.origins[f]),g(b.json.origins[f]);return!0}})},"esri/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require",
"exports","../../../object","./type"],function(b,f,q,g){function n(c,a,d,b){q.setDeepValue(d,l(c,b),a)}function l(c,a){return c&&"function"===typeof c.write?c.write({},a):c&&"function"===typeof c.toJSON?c.toJSON():"number"===typeof c?-Infinity===c?-Number.MAX_VALUE:Infinity===c?Number.MAX_VALUE:isNaN(c)?null:c:c}function k(c,a,d,b){null===c?c=null:c&&"function"===typeof c.map?(c=c.map(function(a){return l(a,b)}),"function"===typeof c.toArray&&(c=c.toArray())):c=[l(c,b)];q.setDeepValue(d,c,a)}function d(c,
a,b){return 0!==b&&Array.isArray(c)?c.map(function(c){return d(c,a,b-1)}):l(c,a)}function h(c){return function(a,b,g,h){if(null===a)a=null;else{a=d(a,h,c);h=c;for(var p=a;0<h&&Array.isArray(p);)h--,p=p[0];if(void 0!==p)for(p=0;p<h;p++)a=[a]}q.setDeepValue(g,a,b)}}Object.defineProperty(f,"__esModule",{value:!0});f.create=function(c,a,d,b){b.write&&!b.write.writer&&!1!==b.write.enabled&&(1===a||g.isCollection(c)?b.write.writer=k:b.write.writer=1<a?h(a):n)}})},"esri/core/accessorSupport/PropertyOrigin":function(){define(["require",
"exports"],function(b,f){function q(b){switch(b){case "defaults":return n.DEFAULTS;case "service":return n.SERVICE;case "portal-item":return n.PORTAL_ITEM;case "web-scene":return n.WEB_SCENE;case "web-map":return n.WEB_MAP;case "user":return n.USER}}function g(b){switch(b){case n.DEFAULTS:return"defaults";case n.SERVICE:return"service";case n.PORTAL_ITEM:return"portal-item";case n.WEB_SCENE:return"web-scene";case n.WEB_MAP:return"web-map";case n.USER:return"user"}}Object.defineProperty(f,"__esModule",
{value:!0});var n;(function(b){b[b.DEFAULTS=0]="DEFAULTS";b[b.COMPUTED=1]="COMPUTED";b[b.SERVICE=2]="SERVICE";b[b.PORTAL_ITEM=3]="PORTAL_ITEM";b[b.WEB_SCENE=4]="WEB_SCENE";b[b.WEB_MAP=5]="WEB_MAP";b[b.USER=6]="USER";b[b.NUM=7]="NUM"})(n=f.OriginId||(f.OriginId={}));f.nameToId=q;f.idToName=g;f.readableNameToId=function(b){return q(b)};f.idToReadableName=function(b){return g(b)};f.writableNameToId=function(b){return q(b)};f.idToWritableName=function(b){return g(b)}})},"esri/core/accessorSupport/Store":function(){define(["require",
"exports","./PropertyOrigin"],function(b,f,q){Object.defineProperty(f,"__esModule",{value:!0});b=function(){function b(){this._values={}}b.prototype.get=function(b){return this._values[b]};b.prototype.originOf=function(b){return q.OriginId.USER};b.prototype.keys=function(){return Object.keys(this._values)};b.prototype.set=function(b,g){this._values[b]=g};b.prototype.clear=function(b){delete this._values[b]};b.prototype.has=function(b){return b in this._values};return b}();f.default=b})},"esri/core/accessorSupport/introspection":function(){define("require exports ../object ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),
function(b,f,q,g,n,l,k,d){Object.defineProperty(f,"__esModule",{value:!0});var h=Object.prototype.hasOwnProperty,c=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,a={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},p=/^_(set|get)([a-zA-Z0-9]+)Attr$/;f.processPrototype=function(d){for(var b=d.declaredClass,f=d.properties||{},u=0,x=Object.getOwnPropertyNames(f);u<x.length;u++){var r=x[u],m=f[r],e=typeof m;null==m?l.setPropertyMetadata(d,r,{value:m}):
Array.isArray(m)?l.setPropertyMetadata(d,r,{type:[m[0]],value:null}):"object"===e?k.getProperties(m)||m instanceof Date?l.setPropertyMetadata(d,r,{type:m.constructor,value:m}):l.setPropertyMetadata(d,r,m):"boolean"===e?l.setPropertyMetadata(d,r,{type:Boolean,value:m}):"string"===e?l.setPropertyMetadata(d,r,{type:String,value:m}):"number"===e?l.setPropertyMetadata(d,r,{type:Number,value:m}):"function"===e&&l.setPropertyMetadata(d,r,{type:m,value:null})}u=0;for(x=Object.getOwnPropertyNames(d);u<x.length;u++){var e=
x[u],m=d[e],f=r=void 0,w=c.exec(e);if(w)r=w[1],f=a[w[2]];else if(w=p.exec(e))r=w[2][0].toLowerCase()+w[2].substr(1),f=w[1].toLowerCase();r&&f&&(r=l.getPropertyMetadata(d,r),q.setDeepValue(f,m,r))}u=0;for(x=Object.getOwnPropertyNames(l.getPropertiesMetadata(d));u<x.length;u++)if(r=x[u],m=l.getPropertyMetadata(d,r),f=m.type,e=m.types,void 0===m.value&&h.call(d,r)&&(m.value=d[r]),!m.cast&&f){r=m;m=0;for(e=f;Array.isArray(e);)e=e[0],m++;f=1===m?g.ensureArray(e):1<m?g.ensureNArray(e,m):g.ensureType(f);
r.cast=f}else!m.cast&&e&&(Array.isArray(e)?m.cast=g.ensureArrayTyped(g.ensureOneOfType(e[0])):m.cast=g.ensureOneOfType(e));n.processPrototypeMetadatas(l.getPropertiesMetadata(d),b);return l.getPropertiesMetadata(d)};f.processClass=function(a){for(var c=a.prototype,b=c.declaredClass,g=a._meta.bases,p={},r=g.length-1;0<=r;r--)k.merge(p,l.getMetadata(g[r].prototype));var m=p.properties;n.processClassMetadatas(m,b);Object.defineProperty(a,"__accessorMetadata__",{value:{properties:m,autoDestroy:!!p.autoDestroy}});
for(var e={},b=function(a){var c=m[a];e[a]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(a):c.value},set:function(e){var d=this.__accessor__;if(!d)Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:e});else if(!Object.isFrozen(this)){if(d.initialized&&c.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+a+"' of "+this.declaredClass);if(2===d.lifecycle&&c.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+
a+"' of "+this.declaredClass);d.set(a,e)}}}},g=0,r=Object.getOwnPropertyNames(m);g<r.length;g++)b(r[g]);Object.defineProperties(a.prototype,e);if(p.parameters)for(a=0,b=Object.getOwnPropertyNames(p.parameters);a<b.length;a++)g=b[a],r=Object.getOwnPropertyDescriptor(c,g)||{value:c[g]},(r=d.autocastMethod(c,g,r))&&Object.defineProperty(c,g,r);return p}})},"esri/core/accessorSupport/ensureType":function(){define(["require","exports","../Logger"],function(b,f,q){function g(e,a){return a.isInstanceOf?
a.isInstanceOf(e):a instanceof e}function n(e){return null==e?e:new Date(e)}function l(e){return null==e?e:!!e}function k(e){return null==e?e:e.toString()}function d(e){return null==e?e:parseFloat(e)}function h(e){return null==e?e:Math.round(parseFloat(e))}function c(e){return e&&e.constructor&&void 0!==e.constructor._meta}function a(e,a){return null!=a&&e&&!g(e,a)}function p(e,d){a(e,d)&&(c(d)?m.error("Accessor#set","Assigning an instance of '"+(d.declaredClass||"unknown")+"' which is not a subclass of '"+
(e&&e.prototype&&e.prototype.declaredClass||"unknown")+"'"):d=new e(d));return d}function u(a){switch(a){case Number:return d;case e:return h;case Boolean:return l;case String:return k;case Date:return n;default:return p.bind(null,a)}}function v(e,a){var c=u(e);return 1===arguments.length?c:c(a)}function z(e,a){return 1===arguments.length?z.bind(null,e):a?Array.isArray(a)?a.map(e):[e(a)]:a}function t(e,a,c){return 0!==a&&Array.isArray(c)?c.map(function(c){return t(e,a-1,c)}):e(c)}function x(e,a,c){if(2===
arguments.length)return x.bind(null,e,a);if(!c)return c;c=t(e,a,c);for(var d=a,m=c;0<d&&Array.isArray(m);)d--,m=m[0];if(void 0!==m)for(m=0;m<d;m++)c=[c];return c}function r(e,d){if(2===arguments.length)return r(e).call(null,d);var b={},g=[],p=[],h;for(h in e.typeMap){var w=e.typeMap[h];b[h]=v(w);g.push(w&&w.prototype&&w.prototype.declaredClass||"unknown");p.push(h)}var f="string"===typeof e.key?function(a){return a[e.key]}:e.key;return function(d){if(e.base&&!a(e.base,d))return d;var r=f(d)||e.defaultKeyValue,
h=b[r];if(!h)return m.error("Accessor#set","Invalid property value, value needs to be one of "+("'"+g.join("', '")+"'")+", or a plain object that can auto-cast (having .type \x3d "+("'"+p.join("', '")+"'")+")"),null;if(!a(e.typeMap[r],d))return d;if("string"!==typeof e.key||c(d))return h(d);var r={},w;for(w in d)w!==e.key&&(r[w]=d[w]);return h(r)}}Object.defineProperty(f,"__esModule",{value:!0});var m=q.getLogger("esri.core.Accessor");f.isInstanceOf=g;f.ensureDate=n;f.ensureBoolean=l;f.ensureString=
k;f.ensureNumber=d;f.ensureInteger=h;f.isClassedType=c;f.requiresType=a;f.ensureClass=p;f.ensureType=v;f.ensureArrayTyped=z;f.ensureArray=function(e,a){return 1===arguments.length?z(v.bind(null,e)):z(v.bind(null,e),a)};f.ensureNArrayTyped=x;f.ensureNArray=function(e,a,c){return 2===arguments.length?x(v.bind(null,e),a):x(v.bind(null,e),a,c)};f.ensureOneOfType=r;var e=function(){return function(){}}();f.Integer=e;f.default=v})},"esri/core/accessorSupport/metadata":function(){define(["require","exports"],
function(b,f){function q(d){return null!=d.__accessorMetadata__}function g(d){return q(d)&&null!=n(d).properties}function n(d){d.__accessorMetadata__||Object.defineProperty(d,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return d.__accessorMetadata__}function l(d){d=n(d);var b=d.properties;b||(b=d.properties={});return b}function k(d,b){var c=n(d);d=c.parameters;d||(d=c.parameters={});c=d[b];c||(c=[],d[b]=c);return c}Object.defineProperty(f,"__esModule",{value:!0});
f.hasMetadata=q;f.hasPropertiesMetadata=g;f.hasPropertyMetadata=function(d,b){return g(d)&&null!=l(d)[b]};f.hasParametersMetadata=function(d,b){return q(d)&&null!=n(d).parameters&&null!=n(d).parameters[b]};f.getMetadata=n;f.getPropertiesMetadata=l;f.getPropertyMetadata=function(d,b){d=l(d);var c=d[b];c||(c=d[b]={});return c};f.setPropertyMetadata=function(d,b,c){l(d)[b]=c};f.getParametersMetadata=k;f.getParameterMetadata=function(d,b,c){var a=k(d,b)[c];a||(k(d,b)[c]=a={index:c});return a}})},"esri/core/accessorSupport/decorators/cast":function(){define(["require",
"exports","../ensureType","../metadata"],function(b,f,q,g){function n(c){var a="_meta"in c?q.ensureType(c):c;return function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];c.push(a);return"number"===typeof c[2]?k.apply(this,c):l.apply(this,c)}}function l(c,a,d,b){g.getPropertyMetadata(c,a).cast=b}function k(c,a,d,b){g.getParameterMetadata(c,a,d).cast=b}function d(c){return function(a,d,b){g.getPropertyMetadata(a,c).cast=a[d]}}Object.defineProperty(f,"__esModule",{value:!0});var h=Object.prototype.toString;
f.autocastMethod=function(c,a,d){if(g.hasParametersMetadata(c,a)){var b=g.getParametersMetadata(c,a).filter(function(a){return null!=a.cast});if(b.length){var p=d.value;d.value=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];for(c=0;c<b.length;c++){var d=b[c];a[d.index]=d.cast(a[d.index])}return p.apply(this,a)};return d}console.warn("Method "+c.declaredClass+"::"+a+" is decorated with @cast but no parameters are decorated")}};f.cast=function(){for(var c=[],a=0;a<arguments.length;a++)c[a]=
arguments[a];if(3!==c.length||"string"!==typeof c[1]){if(1===c.length&&"[object Function]"===h.call(c[0]))return n(c[0]);if(1===c.length&&"string"===typeof c[0])return d(c[0])}}})},"esri/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ObjectPool ../scheduling ./get ./utils ./wire".split(" "),function(b,f,q,g,n,l,k,d,h){function c(a){r.has(a)?m.splice(m.indexOf(a),1):r.add(a);m.push(a);e||(e=l.schedule(p))}function a(e){if(!e.removed){var a=e.callback,c=e.path,
d=e.oldValue,m=e.target,b=k.valueOf(m,e.propertyPath,!0);g.equals(d,b)||(e.oldValue=b,a.call(m,b,d,c,m))}}function p(){if(e){e=null;var c=m;m=x.acquire();r.clear();for(var d=x.acquire(),b=0;b<c.length;b++){var g=c[b];a(g);g.removed&&d.push(g)}for(b=0;b<m.length;b++)g=m[b],g.removed&&(d.push(g),r.delete(g),m.splice(b,1),--b);for(b=0;b<d.length;b++)t.pool.release(d[b]);x.release(c);x.release(d);w.forEach(function(e){return e()})}}function u(e,a,m){var b=d.parse(e,a,m,function(e,a,m){var r=k.valueOf(e,
a,!0),g,p=h.wire(e,a,function(e,a){e.__accessor__.destroyed?b.remove():(g||(g=t.pool.acquire(e,a,r,m),r=null),c(g))});return{remove:d.once(function(){p.remove();g&&(g.removed=!0,c(g),g=null);b=p=r=null})}});return b}function v(e,a,c){var m=d.parse(e,a,c,function(e,a,c){var d=k.valueOf(e,a,!0),b=!1;return h.wire(e,a,function(e,a){if(e.__accessor__.destroyed)m.remove();else if(!b){b=!0;var r=k.valueOf(e,a,!0);g.equals(d,r)||c.call(e,r,d,a,e);d=k.valueOf(e,a,!0);b=!1}})});return m}function z(e,a,c,d){void 0===
d&&(d=!1);return!e.__accessor__||e.__accessor__.destroyed?{remove:function(){}}:d?v(e,a,c):u(e,a,c)}Object.defineProperty(f,"__esModule",{value:!0});var t=function(){function e(e,a,c,m){this.target=e;this.path=a;this.oldValue=c;this.callback=m;this.removed=!1;this.propertyPath=d.pathToStringOrArray(a)}e.prototype.release=function(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null;this.removed=!0};e.pool=new n(e,!0);return e}(),x=new q,r=new Set,m=x.acquire(),e;f.dispatchTarget=
function(e){for(var c=x.copy(m),d=0;d<c.length;d++){var b=c[d];b.target===e&&(a(b),r.delete(b),m.splice(m.indexOf(b),1))}};f.removeTarget=function(e){for(var a=0;a<m.length;a++){var c=m[a];c.target===e&&(c.removed=!0)}};f.dispatch=p;var w=new Set;f.afterDispatch=function(e){w.add(e);return{remove:function(){w.delete(e)}}};f.watch=z;f.isValueInUse=function(e){return m.some(function(a){return a.oldValue===e})};f.default=z})},"esri/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],
function(b,f,q){function g(b){b.length=0}var n=Array.prototype.splice;b=function(){function b(d,b){void 0===d&&(d=50);void 0===b&&(b=50);this._pool=new q(Array,!1,g,b,d)}b.prototype.acquire=function(){return this._pool.acquire()};b.prototype.copy=function(d){var b=this.acquire();d.unshift(0,0);n.apply(b,d);d.splice(0,2);return b};b.prototype.release=function(d){this._pool.release(d)};b.acquire=function(){return l.acquire()};b.copy=function(d){return l.copy(d)};b.release=function(d){return l.release(d)};
return b}();var l=new b(100);return b})},"esri/core/ObjectPool":function(){define(["require","exports"],function(b,f){var q=function(){return function(){}}();return function(){function b(b,g,f,d,h){void 0===d&&(d=1);void 0===h&&(h=0);this.classConstructor=b;this.acquireFunctionOrWithConstructor=g;this.releaseFunction=f;this.growthSize=d;!0===g?this.acquireFunction=this._constructorAcquireFunction:"function"===typeof g&&(this.acquireFunction=g);this._pool=Array(h);this._set=new Set;this._initialSize=
h;for(b=0;b<h;b++)this._pool[b]=new this.classConstructor;this.growthSize=Math.max(d,1)}b.prototype.acquire=function(){for(var b=[],g=0;g<arguments.length;g++)b[g]=arguments[g];g=this.classConstructor||q;if(0===this._pool.length)for(var f=this.growthSize,d=0;d<f;d++)this._pool[d]=new g;g=this._pool.shift();this.acquireFunction?this.acquireFunction.apply(this,[g].concat(b)):g&&g.acquire&&"function"===typeof g.acquire&&g.acquire.apply(g,b);this._set.delete(g);return g};b.prototype.release=function(b){b&&
!this._set.has(b)&&(this.releaseFunction?this.releaseFunction(b):b&&b.release&&"function"===typeof b.release&&b.release(),this._pool.push(b),this._set.add(b))};b.prototype.prune=function(){if(!(this._pool.length<=this._initialSize))for(var b;this._initialSize>this._pool.length;)b=this._pool.shift(),this._set.delete(b),b.dispose&&"function"===typeof b.dispose&&b.dispose()};b.prototype._constructorAcquireFunction=function(b){for(var g=[],f=1;f<arguments.length;f++)g[f-1]=arguments[f];(d=this.classConstructor).call.apply(d,
[b].concat(g));var d};return b}()})},"esri/core/scheduling":function(){define(["require","exports","./nextTick","./now","./requestAnimationFrame"],function(b,f,q,g,n){function l(a){void 0===a&&(a=f.now());f.debug.rafId=null;0<e.length&&(f.debug.rafId=k());if(0<u){var c=a-u;t=Math.min(c,t);if(c<v)return}f.debug.executeFrameTasks(a)}function k(){return f.debug.requestNextFrame?f.debug.requestNextFrame(c):c()}function d(){for(var a=0;a<e.length;){var c=e[a];a++;if(c.removed){e.splice(a-1,1);for(var d=
0;d<r.length;d++){var m=r[d];if(c.phases[m]){var m=w[m],b=m.indexOf(c);-1!==b&&m.splice(b,1)}}}}}function h(){for(;m.length;){var e=m.shift();e.isActive&&(e.isActive=!1,e.callback())}f.debug.willDispatch=!1}function c(){return n(l)}Object.defineProperty(f,"__esModule",{value:!0});f.now=g;var a=function(){return function(e){this.phases=e;this.paused=!1;this.pausedAt=0;this.epoch=-1;this.dt=0;this.ticks=-1;this.removed=!1}}(),p=function(){function e(e){this.callback=e;this.isActive=!0}e.prototype.remove=
function(){this.isActive=!1};return e}(),u=-1,v=0,z=0,t=Number.POSITIVE_INFINITY,x={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0,spendInTask:0},r=["prepare","preRender","render","postRender","update"],m=[],e=[],w={prepare:[],preRender:[],render:[],postRender:[],update:[]},y=function(){function e(e){this._task=e}e.prototype.remove=function(){this._task.removed=!0};e.prototype.pause=function(){this._task.paused||(this._task.paused=!0,this._task.pausedAt=f.now())};e.prototype.resume=function(){this._task.paused&&
(this._task.paused=!1,-1!==this._task.epoch&&(this._task.epoch+=f.now()-this._task.pausedAt))};return e}();f.FrameTaskHandle=y;f.debug={frameTasks:e,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(a){void 0===a&&(a=!1);for(var c=0;c<e.length;c++)e[c].removed=!0;a&&d()},dispatch:h,executeFrameTasks:function(a){void 0===a&&(a=f.now());0>u&&(u=a);var c=a-u;u=a;for(var m=0;m<e.length;m++){var b=e[m];-1!==b.epoch&&(b.dt=c)}for(m=0;m<r.length;m++)for(var c=r[m],g=w[c],p=0;p<g.length;p++)b=
g[p],b.paused||b.removed||(0===m&&b.ticks++,-1===b.epoch&&(b.epoch=a),x.time=a,x.deltaTime=b.dt,x.elapsedFrameTime=f.now()-a,x.frameDuration=0<z?z:t,x.spendInTask=a-b.epoch,b.phases[c].call(b,x));d()}};f.schedule=function(e){e=new p(e);m.push(e);f.debug.willDispatch||(f.debug.willDispatch=!0,q(h));return e};f.addFrameTask=function(c){var d=new a(c);e.push(d);for(var m=0,b=r;m<b.length;m++){var g=b[m];c[g]&&w[g].push(d)}f.debug.rafId||(u=-1,f.debug.rafId=k());return new y(d)};f.setFrameRate=function(e){if(0>=
e)v=0,z=t;else{var a=1.05*t;e=Math.ceil(1E3/e/a);v=(e-1)*a;z=e*t}};f.requestNextFrame=k})},"esri/core/nextTick":function(){define(["require","exports","./global"],function(b,f,q){function g(){if(q.postMessage&&!q.importScripts){var b=q.onmessage,g=!0;q.onmessage=function(){g=!1};q.postMessage("","*");q.onmessage=b;return g}return!1}var n=q.MutationObserver||q.WebKitMutationObserver;return function(){var b;if(q.process&&q.process.nextTick)b=function(c){q.process.nextTick(c)};else if(q.Promise)b=function(c){q.Promise.resolve().then(c)};
else if(n){var f=[],d=document.createElement("div");(new n(function(){for(;0<f.length;)f.shift()()})).observe(d,{attributes:!0});b=function(c){f.push(c);d.setAttribute("queueStatus","1")}}else if(g()){var h=[];q.addEventListener("message",function(c){if(c.source===q&&"esri-nexttick-message"===c.data)for(c.stopPropagation();h.length;)h.shift()()},!0);b=function(c){h.push(c);q.postMessage("esri-nexttick-message","*")}}else b=q.setImmediate?function(c){return q.setImmediate(c)}:function(c){return q.setTimeout(c,
0)};return b}()})},"esri/core/now":function(){define(["require","exports","./global"],function(b,f,q){return function(){var b=q.performance||{};if(b.now)return function(){return b.now()};if(b.webkitNow)return function(){return b.webkitNow()};if(b.mozNow)return function(){return b.mozNow()};if(b.msNow)return function(){return b.msNow()};if(b.oNow)return function(){return b.oNow()};var f;f=b.timing&&b.timing.navigationStart?b.timing.navigationStart:Date.now();return function(){return Date.now()-f}}()})},
"esri/core/requestAnimationFrame":function(){define(["require","exports","./global","./now"],function(b,f,q,g){var n=g();b=q.requestAnimationFrame;if(!b){f=["ms","moz","webkit","o"];for(var l=0;l<f.length&&!b;++l)b=q[f[l]+"RequestAnimationFrame"];b||(b=function(b){var d=g(),h=Math.max(0,16-(d-n)),c=q.setTimeout(function(){b(g())},h);n=d+h;return c})}return b})},"esri/core/Evented":function(){define(["require","exports","dojo/aspect","dojo/on"],function(b,f,q,g){function n(b,g,d,h){var c;Array.isArray(g)?
c=g:-1<g.indexOf(",")&&(c=g.split(/\s*,\s*/));if(c){var a=[];for(g=0;g<c.length;g++)a.push(n(b,c[g],d,h));a.remove=function(){for(var c=0;c<a.length;c++)a[c].remove()};return a}return h(b,g)}return function(){function b(){}b.prototype.emit=function(b,d){if(this.hasEventListener(b))return d=d||{},d.target||(d.target=this),g.emit(this,b,d)};b.prototype.on=function(b,d){return n(this,b,d,function(b,c){return q.after(b,"on"+c,d,!0)})};b.prototype.hasEventListener=function(b){b="on"+b;return!(!this[b]||
!this[b].after)};return b}()})},"esri/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),function(b,f,q,g,n,l,k,d,h,c,a){function p(a){for(var c in a)f.hasOwnProperty(c)||(f[c]=a[c])}Object.defineProperty(f,"__esModule",{value:!0});p(q);p(g);p(n);p(l);p(k);p(d);p(h);p(c);p(a)})},"esri/core/accessorSupport/decorators/aliasOf":function(){define(["require",
"exports","../metadata"],function(b,f,q){Object.defineProperty(f,"__esModule",{value:!0});f.aliasOf=function(b){return function(g,f){q.getPropertyMetadata(g,f).aliasOf=b}}})},"esri/core/accessorSupport/decorators/autoDestroy":function(){define(["require","exports","../metadata"],function(b,f,q){Object.defineProperty(f,"__esModule",{value:!0});f.autoDestroy=function(){return function(b,f,l){q.getMetadata(b).autoDestroy=!0;return b[f]}}})},"esri/core/accessorSupport/decorators/declared":function(){define(["require",
"exports"],function(b,f){Object.defineProperty(f,"__esModule",{value:!0});f.declared=function(b){for(var g=[],f=1;f<arguments.length;f++)g[f-1]=arguments[f];f=function(){return this||{}};f.__bases__=[b].concat(g);return f}})},"esri/core/accessorSupport/decorators/property":function(){define("require exports dojo/has ../../lang ../../Logger ../metadata".split(" "),function(b,f,q,g,n,l){Object.defineProperty(f,"__esModule",{value:!0});n.getLogger("esri.core.accessorSupport.decorators.property");f.property=
function(b){void 0===b&&(b={});return function(d,h){var c=d.constructor.prototype;if(c!==Function.prototype){(d=Object.getOwnPropertyDescriptor(d,h))&&(d.get||d.set)?(b=g.clone(b),d.set&&(b.set=d.set),d.get&&(b.get=d.get)):d&&d.hasOwnProperty("value")&&(b=g.clone(b),b.value=d.value);h=l.getPropertyMetadata(c,h);for(var a in b)c=b[a],Array.isArray(c)?h[a]=(h[a]||[]).concat(c):h[a]=c}}};f.propertyJSONMeta=function(b,d,g){b=l.getPropertyMetadata(b.constructor.prototype,g);b.json||(b.json={});b=b.json;
void 0!==d&&(b.origins||(b.origins={}),b.origins[d]||(b.origins[d]={}),b=b.origins[d]);return b}})},"esri/core/accessorSupport/decorators/reader":function(){define(["require","exports","../../object","./property"],function(b,f,q,g){Object.defineProperty(f,"__esModule",{value:!0});f.reader=function(b,f,k){var d,h;void 0===f||Array.isArray(f)?(h=b,k=f,d=[void 0]):(h=f,d=Array.isArray(b)?b:[b]);return function(c,a,b){var p=c.constructor.prototype;d.forEach(function(d){d=g.propertyJSONMeta(c,d,h);d.read&&
"object"!==typeof d.read&&(d.read={});q.setDeepValue("read.reader",p[a],d);k&&(d.read.source=(d.read.source||[]).concat(k))})}}})},"esri/core/accessorSupport/decorators/shared":function(){define(["require","exports"],function(b,f){Object.defineProperty(f,"__esModule",{value:!0});f.shared=function(b){return function(g,f){g[f]=b}}})},"esri/core/accessorSupport/decorators/subclass":function(){define(["require","exports","../../declare","../metadata"],function(b,f,q,g){function n(a,c){a.read&&("function"===
typeof a.read?c.push(a.read):"object"===typeof a.read&&a.read.reader&&c.push(a.read.reader))}function l(a,c){a.write&&("function"===typeof a.write?c.push(a.write):"object"===typeof a.write&&a.write.writer&&c.push(a.write.writer))}function k(a){var c=[];a=g.getPropertiesMetadata(a.prototype);if(!a)return c;for(var d in a){var b=a[d];b.cast&&c.push(b.cast);b.copy&&c.push(b.copy);if(b=b.json)if(n(b,c),l(b,c),b=b.origins)for(var h in b){var f=b[h];n(f,c);l(f,c)}}return c}function d(a){var d={values:{},
descriptors:{}},b=["__bases__"],h=g.getPropertiesMetadata(a.prototype),f=k(a);Object.getOwnPropertyNames(a.prototype).filter(function(d){return-1!==b.indexOf(d)||h&&h.hasOwnProperty(d)||!c(Object.getOwnPropertyDescriptor(a.prototype,d))&&-1!==f.indexOf(a.prototype[d])?!1:!0}).forEach(function(b){var g=Object.getOwnPropertyDescriptor(a.prototype,b);c(g)?d.descriptors[b]=g:d.values[b]=a.prototype[b]});return d}function h(a){var d=Object.getOwnPropertyNames(a),b=Object.getPrototypeOf(a.prototype).constructor,
g=Object.getOwnPropertyNames(Function);g.push("__bases__");var h=Object.getOwnPropertyNames(b),f={values:{},descriptors:{}};d.filter(function(c){return-1!==g.indexOf(c)?!1:-1===h.indexOf(c)||b[c]!==a[c]?!0:!1}).forEach(function(d){var b=Object.getOwnPropertyDescriptor(a,d);c(b)?f.descriptors[d]=b:f.values[d]=a[d]});return f}function c(a){return a&&!(!a.get&&!a.set)}Object.defineProperty(f,"__esModule",{value:!0});f.subclass=function(a){return function(c){var b=d(c),g=h(c);null!=a&&(b.values.declaredClass=
a);c=q(c.__bases__,b.values);Object.defineProperties(c.prototype,b.descriptors);for(var p in g.values)c[p]=g.values[p];Object.defineProperties(c,g.descriptors);return c}}})},"esri/core/accessorSupport/decorators/writer":function(){define(["require","exports","../../object","./property"],function(b,f,q,g){Object.defineProperty(f,"__esModule",{value:!0});f.writer=function(b,f,k){var d,h;void 0===f?(h=b,d=[void 0]):"string"!==typeof f?(h=b,d=[void 0],k=f):(h=f,d=Array.isArray(b)?b:[b]);return function(c,
a,b){var p=c.constructor.prototype;d.forEach(function(d){d=g.propertyJSONMeta(c,d,h);d.write&&"object"!==typeof d.write&&(d.write={});k&&q.setDeepValue("write.target",k,d);q.setDeepValue("write.writer",p[a],d)})}}})},"esri/core/collectionUtils":function(){define(["require","exports","./Collection"],function(b,f,q){Object.defineProperty(f,"__esModule",{value:!0});f.referenceSetter=function(b,f,l){void 0===l&&(l=q);f||(f=new l);f.removeAll();b&&(Array.isArray(b)||b.isInstanceOf&&b.isInstanceOf(q))?
f.addMany(b):f.add(b);return f};f.castForReferenceSetter=function(b){return b}})},"esri/core/JSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./declare ./accessorSupport/decorators ./accessorSupport/read ./accessorSupport/write".split(" "),function(b,f,q,g,n,l,k,d,h){function c(a,c){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");var d=new this;d.read(a,c);return d}var a=function(a){function b(){return null!==
a&&a.apply(this,arguments)||this}q(b,a);b.prototype.read=function(a,c){d.default(this,a,c);return this};b.prototype.write=function(a,c){return h.default(this,a||{},c)};b.prototype.toJSON=function(a){return this.write(null,a)};b.fromJSON=function(a,d){return c.call(this,a,d)};return b=g([k.subclass("esri.core.JSONSupport")],b)}(k.declared(n));a.prototype.toJSON.isDefaultToJSON=!0;l.after(function(d){l.hasMixin(d,a)&&(d.fromJSON=c.bind(d))});return a})},"esri/core/accessorSupport/read":function(){define("require exports ../tsSupport/assignHelper ./get ./utils ./extensions/serializableProperty".split(" "),
function(b,f,q,g,n,l){function k(b,c,a){void 0===a&&(a=d);for(var p=n.getProperties(b),h=p.metadatas,f={},k=0,t=Object.getOwnPropertyNames(c);k<t.length;k++){var q=f,r=h,m=t[k],e=c,w=a,y=l.originSpecificReadPropertyDefinition(r[m],w);y&&(!y.read||!1!==y.read.enabled&&!y.read.source)&&(q[m]=!0);for(var A=0,D=Object.getOwnPropertyNames(r);A<D.length;A++){var B=D[A],y=l.originSpecificReadPropertyDefinition(r[B],w),F;a:{F=m;var C=e;if(y&&y.read&&!1!==y.read.enabled&&y.read.source)if(y=y.read.source,"string"===
typeof y){if(y===F||-1<y.indexOf(".")&&0===y.indexOf(F)&&g.exists(y,C)){F=!0;break a}}else for(var G=0;G<y.length;G++){var W=y[G];if(W===F||-1<W.indexOf(".")&&0===W.indexOf(F)&&g.exists(W,C)){F=!0;break a}}F=!1}F&&(q[B]=!0)}}p.setDefaultOrigin(a.origin);t=0;for(q=Object.getOwnPropertyNames(f);t<q.length;t++)k=q[t],m=(r=l.originSpecificReadPropertyDefinition(h[k],a).read)&&r.source,e=void 0,e=m&&"string"===typeof m?g.valueOf(c,m):c[k],r&&r.reader&&(e=r.reader.call(b,e,c,a)),void 0!==e&&p.set(k,e);
c=0;for(h=Object.getOwnPropertyNames(h);c<h.length;c++)k=h[c],f[k]||(t=b,q=p,r=a,m=(m=l.originSpecificReadPropertyDefinition(q.metadatas[k],r))&&m.read&&m.read.default,void 0!==m&&(t="function"===typeof m?m.call(t,k,r):m,void 0!==t&&q.set(k,t)));p.setDefaultOrigin("user")}Object.defineProperty(f,"__esModule",{value:!0});var d={origin:"service"};f.read=k;f.readLoadable=function(b,c,a,g){void 0===g&&(g=d);c=q({},g,{messages:[]});a(c);c.messages.forEach(function(a){"warning"!==a.type||b.loaded?g&&g.messages.push(a):
b.loadWarnings.push(a)})};f.default=k})},"esri/core/accessorSupport/write":function(){define("require exports ../Error ../Logger ./PropertyOrigin ./utils ./extensions/serializableProperty".split(" "),function(b,f,q,g,n,l,k){function d(a,d,b,g,h,f){if(!g||!g.write)return!1;var p=a.get(b);if(void 0===p)return!1;if(!h&&g.write.overridePolicy){var r=g.write.overridePolicy.call(a,p,b,f);void 0!==r&&(h=r)}h||(h=g.write);if(!h||!1===h.enabled)return!1;if(null===p){if(h.allowNull)return!0;h.isRequired&&((a=
new q("web-document-write:property-required","Missing value for required property '"+b+"' on '"+a.declaredClass+"'",{propertyName:b,target:a}),f)&&f.messages?f.messages.push(a):a&&!f&&c.error(a.name,a.message));return!1}return!h.ignoreOrigin&&f&&f.origin&&d.store.originOf(b)<n.nameToId(f.origin)?!1:!0}function h(a,c,b){if(a&&"function"===typeof a.toJSON&&(!a.toJSON.isDefaultToJSON||!a.write))return l.merge(c,a.toJSON());var g=l.getProperties(a),p=g.metadatas,h;for(h in p){var f=k.originSpecificWritePropertyDefinition(p[h],
b);if(d(a,g,h,f,null,b)){var r=a.get(h),m={};f.write.writer.call(a,r,m,"string"===typeof f.write.target?f.write.target:h,b);f=m;0<Object.keys(f).length&&(c=l.merge(c,f),b&&b.writtenProperties&&b.writtenProperties.push({target:a,propName:h,oldOrigin:n.idToReadableName(g.store.originOf(h)),newOrigin:b.origin}))}}return c}Object.defineProperty(f,"__esModule",{value:!0});var c=g.getLogger("esri.core.accessorSupport.write");f.willPropertyWrite=function(a,c,b,g){var p=l.getProperties(a),h=k.originSpecificWritePropertyDefinition(p.metadatas[c],
g);return h?d(a,p,c,h,b,g):!1};f.write=h;f.default=h})},"esri/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./lang","./Message"],function(b,f,q,g,n){b=function(b){function f(d,g,c){var a=b.call(this,d,g,c)||this;return a instanceof f?a:new f(d,g,c)}q(f,b);f.prototype.toJSON=function(){return{name:this.name,message:this.message,details:g.clone(this.details),dojoType:this.dojoType}};f.fromJSON=function(d){var b=new f(d.name,d.message,d.details);null!=d.dojoType&&(b.dojoType=
d.dojoType);return b};return f}(n);b.prototype.type="error";return b})},"esri/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,q){b.__proto__=q}||function(b,q){for(var g in q)q.hasOwnProperty(g)&&(b[g]=q[g])};return function(f,q){function g(){this.constructor=f}b(f,q);f.prototype=null===q?Object.create(q):(g.prototype=q.prototype,new g)}}()})},"esri/core/Message":function(){define(["require","exports",
"dojo/string"],function(b,f,q){return function(){function b(g,f,k){this instanceof b&&(this.name=g,this.message=f&&q.substitute(f,k,function(d){return null==d?"":d})||"",this.details=k)}b.prototype.toString=function(){return"["+this.name+"]: "+this.message};return b}()})},"esri/core/Loadable":function(){define("./Promise ./Accessor ./Error ./Warning ./lang dojo/aspect dojo/Deferred".split(" "),function(b,f,q,g,n,l,k){return b.createSubclass([f],{declaredClass:"esri.core.Loadable","-chains-":n.mixin(f._meta.chains,
{load:"after"}),constructor:function(){this._set("loadWarnings",[]);var d=new k;this.addResolvingPromise(d.promise);l.around(this,"load",function(b){return function(){"not-loaded"===this.loadStatus&&(this.loadStatus="loading",b.apply(this));d&&(d.resolve(),d=null);return this.when()}});this.when(function(d){this.loadStatus="loaded"}.bind(this),function(d){this.loadStatus="failed";this.loadError=d}.bind(this))},properties:{loaded:{readOnly:!0,dependsOn:["loadStatus"],get:function(){return"loaded"===
this.loadStatus}},loadError:null,loadStatus:"not-loaded",loadWarnings:{type:[g],readOnly:!0}},load:function(){},cancelLoad:function(){if(this.isFulfilled())return this;this.loadError=new q("load:cancelled","Cancelled");this._promiseProps.cancel(this.loadError);return this}})})},"esri/core/Promise":function(){define("dojo/promise/all dojo/Deferred dojo/aspect dojo/has dojo/errors/create ./scheduling ./Logger ./declare ./lang".split(" "),function(b,f,q,g,n,l,k,d,h){function c(c,d){a.warn("DEPRECATED: "+
c+"()"+(d?" -- use "+d+" instead":""))}g.add("esri-promise-compatibility",!0);g.add("esri-promise-compatibility-deprecation-warnings",!0);var a=k.getLogger("esri.core.Promise"),p=function(a){var c=a._promiseProps;if(!c.resolver.isFulfilled()){var d=c.resolvingPromises,m,e;c.allPromise&&c.allPromise.cancel();var g=new f;for(m=d.length-1;0<=m;m--)e=d[m],e.isCanceled&&e.isCanceled()?d.splice(m,1):e.then(null,null,c.resolver.progress);e=null;(c.allPromise=b(d.concat([g.promise]))).then(function(){c.resolver.resolve(a);
a=c=g=c.allPromise=c.resolvingPromises=null},function(e){c.allPromise=null;if(!e||"cancel"!==e.dojoType){var d=Array.prototype.slice.call(arguments,0);c.resolver.reject(d[0]);a=c=g=c.allPromise=c.resolvingPromises=null}});g&&l.schedule(function(){g&&g.resolve()})}},u=n("CancelError",null,function(a){this.target=a}),v=function(a){return a||new u(this.instance)},z=function(a){this.instance=a;this.canceler=v.bind(this);this.resolver=new f;this.initialized=!1;this.resolvingPromises=[]};z.prototype={canceler:null,
cancel:function(a){if(!this.resolver.isFulfilled()){this.allPromise.cancel();for(var c=this.resolvingPromises.concat(),d=c.length-1;0<=d;d--)c[d].cancel(a);this.resolver.cancel(a)}}};n={declaredClass:"esri.core.Promise",constructor:function(){Object.defineProperty(this,"_promiseProps",{value:new z(this),enumerable:!1,configurable:!1,writable:!0});var a=q.after(this,"postscript",function(c,d){a.remove();a=null;p(this)},!0)},_promiseProps:null,always:function(a){g("esri-promise-compatibility-deprecation-warnings")&&
c("always",".when(callbackOrErrback, callbackOrErrback)");return this.when(a,a)},isResolved:function(){return this._promiseProps.resolver.isResolved()},isRejected:function(){return this._promiseProps.resolver.isRejected()},isFulfilled:function(){return this._promiseProps.resolver.isFulfilled()},otherwise:function(a){g("esri-promise-compatibility-deprecation-warnings")&&c("otherwise",".when().catch(errback)");return this.when(null,a)},catch:function(a){return this.when(null,a)},when:function(a,c,d){var b=
new f(this._promiseProps.canceler);a=b.then(a,c,d);this._promiseProps.resolver.then(b.resolve,b.reject,b.progress);return a},addResolvingPromise:function(a){a&&!this._promiseProps.resolver.isFulfilled()&&(a._promiseProps&&(a=a.when()),this._promiseProps.resolvingPromises.push(a),p(this))}};g("esri-promise-compatibility")||(n=h.mixin(n,{then:function(a,d,b){g("esri-promise-compatibility-deprecation-warnings")&&c("then",".when(callback, errback)");return this.when(a,d,b)},cancel:function(){g("esri-promise-compatibility-deprecation-warnings")&&
c("cancel")},isCanceled:function(){g("esri-promise-compatibility-deprecation-warnings")&&c("isCanceled");return!1},trace:function(){g("esri-promise-compatibility-deprecation-warnings")&&c("trace");return this},traceRejected:function(){g("esri-promise-compatibility-deprecation-warnings")&&c("traceRejected");return this}}));return d(null,n)})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(b,f,q){var g=b.some;return function(b){var l,k;b instanceof Array?k=
b:b&&"object"===typeof b&&(l=b);var d,h=[];if(l){k=[];for(var c in l)Object.hasOwnProperty.call(l,c)&&(h.push(c),k.push(l[c]));d={}}else k&&(d=[]);if(!k||!k.length)return(new f).resolve(d);var a=new f;a.promise.always(function(){d=h=null});var p=k.length;g(k,function(c,b){l||h.push(b);q(c,function(c){a.isFulfilled()||(d[h[b]]=c,0===--p&&a.resolve(d))},a.reject);return a.isFulfilled()});return a.promise}})},"esri/core/Warning":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper",
"./Message"],function(b,f,q,g,n){b=function(b){function g(d,h,c){var a=b.call(this,d,h,c)||this;return a instanceof g?a:new g(d,h,c)}q(g,b);return g}(n);b.prototype.type="warning";return b})},"esri/core/promiseUtils":function(){define("require exports dojo/Deferred dojo/when dojo/promise/all ./Error".split(" "),function(b,f,q,g,n,l){function k(d){if(d){if("function"!==typeof d.forEach){var b=Object.keys(d),c=b.map(function(a){return d[a]});return k(c).then(function(a){var c={};b.forEach(function(d,
b){return c[d]=a[b]});return c})}var a=new q,g=[],f=d.length;0===f&&a.resolve(g);d.forEach(function(c){var d={promise:c};g.push(d);c.then(function(a){d.value=a}).catch(function(a){d.error=a}).then(function(){--f;0===f&&a.resolve(g)})});return a.promise}}Object.defineProperty(f,"__esModule",{value:!0});f.all=function(d){return n(d)};f.filter=function(d,b){var c=d.slice();return n(d.map(function(a,c){return b(a,c)})).then(function(a){return c.filter(function(c,d){return a[d]})})};f.eachAlways=k;f.create=
function(d,b){var c=new q(b);d(function(a){void 0===a&&(a=null);return g(a).then(c.resolve)},c.reject);return c.promise};f.reject=function(d){var b=new q;b.reject(d);return b.promise};f.resolve=function(d){void 0===d&&(d=null);var b=new q;b.resolve(d);return b.promise};f.after=function(d,b){void 0===b&&(b=null);var c=0,a=new q(function(){c&&(clearTimeout(c),c=0)}),c=setTimeout(function(){a.resolve(b)},d);return a.promise};f.timeout=function(b,g,c){var a=0,d=new q(b.cancel);b.then(function(c){d.isFulfilled()||
(d.resolve(c),a&&(clearTimeout(a),a=0))});b.catch(function(c){d.isFulfilled()||(d.reject(c),a&&(clearTimeout(a),a=0))});a=setTimeout(function(){var a=c||new l("promiseUtils:timeout","The wrapped promise did not resolve within "+g+" ms");d.reject(a)},g);return d.promise};f.wrapCallback=function(b){var d=!1,c=new q(function(){return d=!0});b(function(a){d||c.resolve(a)});return c.promise};f.isThenable=function(b){return b&&"function"===typeof b.then};f.when=function(b){return g(b)}})},"esri/core/urlUtils":function(){define("require exports ./tsSupport/assignHelper dojo/io-query dojo/_base/url ../config ./Error ./global ./lang ./Logger ./sniff".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a){function p(e){var a={path:null,query:null},c=new n(e),b=e.indexOf("?");null===c.query?a.path=e:(a.path=e.substring(0,b),a.query=g.queryToObject(c.query));c.fragment&&(a.hash=c.fragment,null===c.query&&(a.path=a.path.substring(0,a.path.length-(c.fragment.length+1))));return a}function u(e,a){void 0===e&&(e=!1);void 0===a&&(a=!0);var c,b=U.proxyUrl;if("string"===typeof e){if(c=H(e),e=t(e))b=e.proxyUrl}else c=!!e;if(!b)throw M.warn("esri/config: esriConfig.request.proxyUrl is not set. If making a request to a CORS-enabled\n server, please push the domain into esriConfig.request.corsEnabledServers."),
new k("urlutils:proxy-not-set","esri/config: esriConfig.request.proxyUrl is not set. If making a request to a CORS-enabled\n server, please push the domain into esriConfig.request.corsEnabledServers.");var d;c&&a&&"https"===f.appUrl.scheme&&(a=J(b),m(a)&&(b=a,d=1));b=p(b);b._xo=d;return b}function v(e){var a=e.indexOf("?");-1!==a?(aa.path=e.slice(0,a),aa.query=e.slice(a+1)):(aa.path=e,aa.query=null);return aa}function z(e){e=v(e).path;e&&"/"===e[e.length-1]||(e+="/");e=Z(e,!0);return e=e.toLowerCase()}
function t(e){var a=U.proxyRules;e=z(e);for(var c=0;c<a.length;c++)if(0===e.indexOf(a[c].urlPrefix))return a[c]}function x(e){e=D(e);var a=e.indexOf("/sharing");return 0<a?e.substring(0,a):e.replace(/\/+$/,"")}function r(e,a,c){void 0===c&&(c=!1);e=K(e);a=K(a);return c||e.scheme===a.scheme?e.host.toLowerCase()===a.host.toLowerCase()&&e.port===a.port:!1}function m(c){return a("esri-phonegap")?!0:a("esri-cors")?null!=e(c):!1}function e(e,a){void 0===a&&(a=!1);"string"===typeof e&&(e=C(e)?K(e):f.appUrl);
for(var c=U.corsEnabledServers||[],b=0;b<c.length;b++){var d=c[b],m=void 0,g=void 0;d instanceof RegExp?g=d:"string"===typeof d?m=w(d):d.host?d.host instanceof RegExp?g=d.host:m=w(d.host):m=[];if(g){if(g.test(e.uri))return a?b:d}else for(g=0;g<m.length;g++)if(r(e,m[g]))return a?b:d}return a?-1:null}function w(e){f.corsServersUrlCache[e]||(V(e)||fa(e)?f.corsServersUrlCache[e]=[new n(y(e))]:f.corsServersUrlCache[e]=[new n("http://"+e),new n("https://"+e)]);return f.corsServersUrlCache[e]}function y(e,
a,c){void 0===a&&(a=f.appBaseUrl);if(fa(e))return c&&c.preserveProtocolRelative?e:"http"===f.appUrl.scheme&&f.appUrl.authority===F(e).slice(2)?"http:"+e:"https:"+e;if(V(e))return e;c=B;if("/"===e[0]){var b=a.indexOf("//"),b=a.indexOf("/",b+2);a=-1===b?a:a.slice(0,b)}return c(a,e)}function A(e,a,c){void 0===a&&(a=f.appBaseUrl);if(!C(e))return e;var b=D(e),d=b.toLowerCase();a=D(a).toLowerCase().replace(/\/+$/,"");if((c=c?D(c).toLowerCase().replace(/\/+$/,""):null)&&0!==a.indexOf(c))return e;for(var m=
function(e,a,c){c=e.indexOf(a,c);return-1===c?e.length:c},g=m(d,"/",d.indexOf("//")+2),r=-1;d.slice(0,g+1)===a.slice(0,g)+"/";){r=g+1;if(g===d.length)break;g=m(d,"/",g+1)}if(-1===r||c&&r<c.length)return e;e=b.slice(r);b=a.slice(r-1).replace(/[^/]+/g,"").length;if(0<b)for(d=0;d<b;d++)e="../"+e;else e="./"+e;return e}function D(e){e=e.trim();e=y(e);if(/^https?:\/\//i.test(e)){var a=v(e);e=a.path.replace(/\/{2,}/g,"/");e=e.replace("/","//");a.query&&(e+="?"+a.query)}e="http"===f.appUrl.scheme&&H(e)&&
r(f.appBaseUrl,e,!0)&&!m(e)?fa(e)?"http:"+e:e.replace(Q,"http:"):e;e=O(e);return e=e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function B(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];if(e&&e.length){a=[];if(C(e[0])){var c=e[0],b=c.indexOf("//");a.push(c.slice(0,b+1));P.test(e[0])&&(a[0]+="/");e[0]=c.slice(b+2)}else"/"===e[0][0]&&a.push("");e=e.reduce(function(e,a){return a?e.concat(a.split("/")):e},[]);for(c=0;c<e.length;c++)b=e[c],".."===b&&0<a.length?a.pop():!b||"."===b&&
0!==a.length||a.push(b);return a.join("/")}}function F(e){if(G(e)||W(e))return null;var a=e.indexOf("://");if(-1===a&&fa(e))a=2;else if(-1!==a)a+=3;else return null;a=e.indexOf("/",a);return-1===a?e:e.slice(0,a)}function C(e){return fa(e)||V(e)}function G(e){return"blob:"===e.slice(0,5)}function W(e){return"data:"===e.slice(0,5)}function fa(e){return e&&"/"===e[0]&&"/"===e[1]}function V(e){return T.test(e)}function H(e){return Q.test(e)||"https"===f.appUrl.scheme&&fa(e)}function ba(e){return da.test(e)||
"http"===f.appUrl.scheme&&fa(e)}function J(e){return fa(e)?"https:"+e:e.replace(da,"https:")}function Z(e,a){void 0===a&&(a=!1);if(fa(e))return e.slice(2);e=e.replace(T,"");a&&1<e.length&&"/"===e[0]&&"/"===e[1]&&(e=e.slice(2));return e}function O(e){var a=l.request.httpsDomains;if(!ba(e))return e;var c=e.indexOf("/",7),b;b=-1===c?e:e.slice(0,c);b=b.toLowerCase().slice(7);if(!("http"!==f.appUrl.scheme||b!==f.appUrl.authority||Y.test(e)&&m(e)))return e;if("https"===f.appUrl.scheme&&b===f.appUrl.authority||
a&&a.some(function(e){return b===e||h.endsWith(b,"."+e)}))e=J(e);return e}function N(e,a,c){if(!(a&&c&&e&&C(e)))return e;var b=e.indexOf("//"),d=e.indexOf("/",b+2),m=e.indexOf(":",b+2),d=Math.min(0>d?e.length:d,0>m?e.length:m);if(e.slice(b+2,d).toLowerCase()!==a.toLowerCase())return e;a=e.slice(0,b+2);e=e.slice(d);return""+a+c+e}function K(e){if("string"===typeof e)return new n(y(e));e.scheme||(e.scheme=f.appUrl.scheme);return e}Object.defineProperty(f,"__esModule",{value:!0});var M=c.getLogger("esri.core.urlUtils"),
U=l.request,T=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,da=/^\s*http:/i,Q=/^\s*https:/i,P=/^\s*file:/i,Y=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;f.appUrl=new n(d.location);f.corsServersUrlCache={};f.appBaseUrl=function(){var e=f.appUrl.path,e=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return""+(f.appUrl.scheme+"://"+f.appUrl.host+(null!=f.appUrl.port?":"+f.appUrl.port:""))+e}();f.urlToObject=p;f.getProxyUrl=u;f.addProxy=function(e){var a=t(e),c,b;a?(b=v(a.proxyUrl),c=b.path,
b=b.query?g.queryToObject(b.query):null):U.forceProxy&&(b=u(),c=b.path,b=b.query);c&&(a=p(e),e=c+"?"+a.path,(c=g.objectToQuery(q({},b,a.query)))&&(e=e+"?"+c));return e};var aa={path:"",query:""};f.addProxyRule=function(e){e={proxyUrl:e.proxyUrl,urlPrefix:z(e.urlPrefix)};for(var a=U.proxyRules,c=e.urlPrefix,b=a.length,d=0;d<a.length;d++){var m=a[d].urlPrefix;if(0===c.indexOf(m)){if(c.length===m.length)return-1;b=d;break}0===m.indexOf(c)&&(b=d+1)}a.splice(b,0,e);return b};f.getProxyRule=t;f.hasSamePortal=
function(e,a){e=x(e);a=x(a);return Z(e)===Z(a)};f.hasSameOrigin=r;f.canUseXhr=m;f.getCorsConfig=e;f.makeAbsolute=y;f.makeRelative=A;f.normalize=D;f.join=B;f.getOrigin=F;f.isAbsolute=C;f.isBlobProtocol=G;f.isDataProtocol=W;var ga=/^data:(.*?)(;base64)?,(.*)$/;f.dataComponents=function(e){return(e=e.match(ga))?{mediaType:e[1],isBase64:!!e[2],data:e[3]}:null};f.makeData=function(e){return e.isBase64?"data:"+e.mediaType+";base64,"+e.data:"data:"+e.mediaType+","+e.data};f.isProtocolRelative=fa;f.hasProtocol=
V;f.toHTTPS=J;f.removeFile=function(e){var a=0;if(C(e)){var c=e.indexOf("//");-1!==c&&(a=c+2)}c=e.lastIndexOf("/");return c<a?e:e.slice(0,c+1)};f.removeTrailingSlash=function(e){return e.replace(/\/+$/,"")};f.changeDomain=N;f.read=function(e,a){var c=a&&a.url&&a.url.path;e&&c&&(e=y(e,c,{preserveProtocolRelative:!0}));(a=a&&a.portal)&&!a.isPortal&&a.urlKey&&a.customBaseUrl?(c=a.urlKey+"."+a.customBaseUrl,a=r(f.appUrl,f.appUrl.scheme+"://"+c)?N(e,a.portalHostname,c):N(e,c,a.portalHostname)):a=e;return a};
f.write=function(e,a){if(!e)return e;!C(e)&&a&&a.blockedRelativeUrls&&a.blockedRelativeUrls.push(e);var c=y(e);if(a){var b=a.verifyItemRelativeUrls&&a.verifyItemRelativeUrls.rootPath||a.url&&a.url.path;b&&(c=A(c,b,b),c!==e&&a.verifyItemRelativeUrls&&a.verifyItemRelativeUrls.writtenUrls.push(c))}e=c;c=(a=a&&a.portal)&&!a.isPortal&&a.urlKey&&a.customBaseUrl?N(e,a.urlKey+"."+a.customBaseUrl,a.portalHostname):e;return c};f.writeOperationalLayerUrl=function(e,a){e&&fa(e)&&(e="https:"+e);a.url=e?D(e):e};
f.isSVG=function(e){return ea.test(e)};f.removeQueryParameters=function(e,a){e=p(e);var c=Object.keys(e.query||{});0<c.length&&a&&a.warn("removeQueryParameters()","Url query parameters are not supported, the following parameters have been removed: "+c.join(", ")+".");return e.path};var ea=/(^data:image\/svg|\.svg$)/i})},"dojo/_base/url":function(){define(["./kernel"],function(b){var f=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,q=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,
g=function(){for(var b=arguments,l=[b[0]],k=1;k<b.length;k++)if(b[k]){var d=new g(b[k]+""),l=new g(l[0]+"");if(""==d.path&&!d.scheme&&!d.authority&&!d.query)null!=d.fragment&&(l.fragment=d.fragment),d=l;else if(!d.scheme&&(d.scheme=l.scheme,!d.authority&&(d.authority=l.authority,"/"!=d.path.charAt(0)))){for(var l=(l.path.substring(0,l.path.lastIndexOf("/")+1)+d.path).split("/"),h=0;h<l.length;h++)"."==l[h]?h==l.length-1?l[h]="":(l.splice(h,1),h--):0<h&&(1!=h||""!=l[0])&&".."==l[h]&&".."!=l[h-1]&&
(h==l.length-1?(l.splice(h,1),l[h-1]=""):(l.splice(h-1,2),h-=2));d.path=l.join("/")}l=[];d.scheme&&l.push(d.scheme,":");d.authority&&l.push("//",d.authority);l.push(d.path);d.query&&l.push("?",d.query);d.fragment&&l.push("#",d.fragment)}this.uri=l.join("");b=this.uri.match(f);this.scheme=b[2]||(b[1]?"":null);this.authority=b[4]||(b[3]?"":null);this.path=b[5];this.query=b[7]||(b[6]?"":null);this.fragment=b[9]||(b[8]?"":null);null!=this.authority&&(b=this.authority.match(q),this.user=b[3]||null,this.password=
b[4]||null,this.host=b[6]||b[7],this.port=b[9]||null)};g.prototype.toString=function(){return this.uri};return b._Url=g})},"esri/config":function(){define(["require","exports","./core/global"],function(b,f,q){return{screenDPI:96,geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},
paths:{},map:{},packages:[]}},request:{corsDetection:!(q&&q.cordova),corsDetectionTimeout:15,corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"basemaps.arcgis.com","basemapsbeta.arcgis.com","basemapsbetadev.arcgis.com","basemapsdev.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com","cdn-b.arcgis.com","demographics1.arcgis.com","demographics2.arcgis.com","demographics3.arcgis.com","demographics4.arcgis.com","demographics5.arcgis.com","demographics6.arcgis.com","dev.arcgis.com","devext.arcgis.com",
"elevation3d.arcgis.com","elevation3ddev.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","geocode.arcgis.com","geocodedev.arcgis.com","geocodeqa.arcgis.com","geoenrich.arcgis.com","geoenrichdev.arcgis.com","geoenrichqa.arcgis.com","localvtiles.arcgis.com","qaext.arcgis.com","server.arcgisonline.com","services.arcgis.com","services.arcgisonline.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com",
"services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","static.arcgis.com","staticqa.arcgis.com","staticdev.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com","tiles4.arcgis.com","tilesdevext.arcgis.com","tilesqa.arcgis.com","utility.arcgis.com",
"utility.arcgisonline.com","www.arcgis.com"],corsStatus:{},forceProxy:!1,maxUrlLength:2E3,maxWorkers:5,proxyRules:[],proxyUrl:null,timeout:6E4,useIdentity:!0,useCors:"with-credentials",httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},useSpatialIndex:!1}})},"esri/layers/Layer":function(){define("require dojo/Deferred ../core/Accessor ../core/Error ../core/Evented ../core/Identifiable ../core/Loadable ../core/urlUtils ../core/promiseUtils ../core/Logger ../config ../kernel ../request ../geometry/SpatialReference ../geometry/Extent".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z){var t=0,x=c.getLogger("esri.layers.Layer");q=q.createSubclass([n,l,k],{declaredClass:"esri.layers.Layer",properties:{attributionDataUrl:null,credential:{value:null,readOnly:!0,dependsOn:["loaded","parsedUrl"],get:function(){var a=this.loaded&&this.parsedUrl&&p.id&&p.id.findCredential(this.parsedUrl.path)||null;a&&a.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));return a}},fullExtent:new z(-180,-90,180,90,v.WGS84),hasAttributionData:{readOnly:!0,dependsOn:["attributionDataUrl"],
get:function(){return null!=this.attributionDataUrl}},id:{get:function(){return Date.now().toString(16)+"-layer-"+t++}},legendEnabled:!0,listMode:"show",opacity:{value:1,type:Number,cast:function(a){return 0>a?0:1<a?1:a}},parent:null,parsedUrl:{readOnly:!0,dependsOn:["url"],get:function(){var a=this._get("url");return a?d.urlToObject(a):null}},popupEnabled:!0,attributionVisible:!0,spatialReference:v.WGS84,title:null,token:{dependsOn:["credential.token"],get:function(){var a=this.get("parsedUrl.query.token"),
c=this.get("credential.token");return a||c||null},set:function(a){a?this._override("token",a):this._clearOverride("token")}},type:{type:String,readOnly:!0,value:null,json:{read:!1}},url:{value:null},visible:!0},initialize:function(){this.when().catch(function(a){c.getLogger(this.declaredClass).error("#load()","Failed to load layer (title: '"+this.title+"', id: '"+this.id+"')",a)}.bind(this))},createLayerView:function(a){return a?this.importLayerViewModule(a).then(function(c){c.default&&(c=c.default);
return new c({layer:this,view:a})}.bind(this)):h.reject(new g("layerview:module-unavailable","No LayerView module available for layer '${layer.declaredClass}' and view type: '${view.type}'",{view:a,layer:this}))},destroyLayerView:function(a){a.destroy()},fetchAttributionData:function(){var a=this.attributionDataUrl;this.hasAttributionData&&a?a=u(a,{query:{f:"json"},responseType:"json"}).then(function(a){return a.data}):(a=new f,a.reject(new g("layer:no-attribution-data","Layer does not have attribution data")),
a=a.promise);return a},refresh:function(){this.emit("refresh")},importLayerViewModule:function(a){return h.reject(new g("layerview:override-method","Must provide implementation in '${layer.declaredClass}'",{view:a,layer:this}))}});q.fromArcGISServerUrl=function(a){"string"===typeof a&&(a={url:a});var c=h.create(function(e){b(["./support/arcgisLayers"],e)}).then(function(e){return e.fromUrl(a)});c.catch(function(e){x.error("#fromArcGISServerUrl({ url: '"+a.url+"'})","Failed to create layer from arcgis server url",
e)});return c};q.fromPortalItem=function(c){!c||c.portalItem||"object"!==typeof c||c.declaredClass&&"esri.portal.PortalItem"!==c.declaredClass||(c={portalItem:c});var d=h.create(function(e){b(["../portal/support/portalLayers"],e)}).then(function(e){return e.fromItem(c)});d.catch(function(e){var b=c&&c.portalItem;x.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+(b&&b.portal&&b.portal.url||a.portalUrl)+"', id: '"+(b&&b.id||"unset")+"')",e)});return d};return q})},"esri/core/Identifiable":function(){define(["./declare"],
function(b){var f=0;return b(null,{constructor:function(){Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+f++})}})})},"esri/kernel":function(){define(["require","./core/promiseUtils","dojo/main","dojo/has"],function(b,f,q,g){(function(){var b=q.config,f=b.has&&void 0!==b.has["config-deferredInstrumentation"],k=b.has&&void 0!==b.has["config-useDeferredInstrumentation"];void 0!==b.useDeferredInstrumentation||f||k||(g.add("config-deferredInstrumentation",
!1,!0,!0),g.add("config-useDeferredInstrumentation",!1,!0,!0))})();return{version:"4.8",workerMessages:{request:function(g){return f.create(function(g){b(["./request"],g)}).then(function(b){var f=g.options||{};f.responseType="array-buffer";return b(g.url,f)}).then(function(b){return{result:{data:b.data,ssl:b.ssl},transferList:[b.data]}})}}}})},"dojo/main":function(){define("./_base/kernel ./has require ./sniff ./_base/lang ./_base/array ./_base/config ./ready ./_base/declare ./_base/connect ./_base/Deferred ./_base/json ./_base/Color require ./has!host-browser?./_base/browser require".split(" "),
function(b,f,q,g,n,l,k,d){k.isDebug&&q(["./_firebug/firebug"]);return b})},"esri/request":function(){define("require exports dojo/Deferred dojo/has!host-browser?./core/request/script dojo/has!host-webworker?./core/workers/request dojo/io-query dojo/_base/lang dojo/_base/url dojo/request/xhr ./config ./core/deferredUtils ./core/Error ./core/global ./core/lang ./core/promiseUtils ./core/sniff ./core/urlUtils".split(" "),function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z,t,x){function r(e){var a=l.objectToQuery(e.content);
a&&(e.url+=(-1===e.url.indexOf("?")?"?":"\x26")+a);if(!x.isDataProtocol(e.url)&&2E3<e.url.length)return z.reject(k.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."}));var c=new Image;e.allowImageDataAccess&&(c.crossOrigin=e.withCredentials?"use-credentials":"anonymous");var b=!1,d=new q(function(){b=!0;c.onload=c.onerror=c.onabort=null;c.src=""}),a=function(){c.onload=c.onerror=c.onabort=null;b||d.reject(Error("Unable to load the resource"))};c.onload=
function(){c.onload=c.onerror=c.onabort=null;b||d.resolve(this)};c.onerror=a;c.onabort=a;c.alt="";c.src=e.url;return d.promise}function m(e){e=new d(e);return(e.host+(e.port?":"+e.port:"")).toLowerCase()}function e(){return J?J:J=z.create(function(e){b(["./identity/IdentityManager"],e)}).then(function(e){ba=e})}function w(e,a){var c=!!e.useProxy,b=e.method||"auto",d=v.isDefined(e.crossOrigin)?e.crossOrigin:G.useCors;e=k.mixin({},e);e._ssl&&(e.url=e.url.replace(/^http:/i,"https:"));var m=e.content,
p=e.url;e._token&&(e.content=e.content||{},e.content.token=e._token);var w=0,f;p&&(f=l.objectToQuery(m),w=f.length+p.length+1,t("esri-url-encodes-apostrophe")&&(w=f.replace(/'/g,"%27").length+p.length+1));e.timeout=v.isDefined(e.timeout)?e.timeout:G.timeout;e.handleAs=e.handleAs||"json";try{var u=f=void 0,n=d&&x.canUseXhr(e.urlObj)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(e.url),y=x.hasSameOrigin(e.urlObj,x.appUrl)||n,z="post"===b||!!e.body||w>G.maxUrlLength,B=!y&&-1!==e.handleAs.indexOf("json")&&
e.callbackParamName&&!e.body,A=!!x.getProxyRule(e.url)||G.forceProxy||c||("image"!==e.handleAs||e.allowImageDataAccess)&&(!B||z)&&!y;A&&(x.isBlobProtocol(e.url)||x.isDataProtocol(e.url))&&(A=!1);if((t("host-browser")||t("host-webworker"))&&A)if(f=x.getProxyUrl(p,d),u=f.path,f._xo&&(n=!0),!z&&u.length+1+w>G.maxUrlLength&&(z=!0),e.url=u+"?"+p,z)e.content=k.mixin(f.query||{},m);else{var D=l.objectToQuery(k.mixin(f.query||{},m));D&&(e.url+=(-1===p.indexOf("?")?"?":"\x26")+D);e.content=null}if(B&&!z&&
!A&&t("host-browser"))return e=C?C(e):e,e.jsonp=e.callbackParamName,e.query=e.content,g.get(e.url,e);var F=e.headers;!t("host-browser")&&!t("host-webworker")||F&&F.hasOwnProperty("X-Requested-With")||(F=e.headers=F||{},F["X-Requested-With"]=null);if(t("host-browser")&&a){var H=e.content&&e.content.token;H&&(a.set?a.set("token",H):a.append("token",H));e.contentType=!1}if(n&&!e.hasOwnProperty("withCredentials")&&"with-credentials"===G.useCors){var c=A?u:p,W=x.getCorsConfig(c);if(W&&W.hasOwnProperty("withCredentials"))W.withCredentials&&
(e.withCredentials=!0);else if(ba){var J=ba.findServerInfo(c);J&&J.webTierAuth&&(e.withCredentials=!0)}}e=C?C(e):e;if("image"===e.handleAs)return r(e);if(z)return e.body?(e.data=a||e.body,e.query=e.content):e.data=e.content,delete e.body,delete e.content,!A&&t("safari")&&(e.url+=(-1===e.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+fa++),h.post(e.url,e);e.query=e.content;delete e.content;return h.get(e.url,e)}catch(Da){return e=new q,e.reject(Da),e.promise}}function y(e){var a=G.corsStatus;
try{var c=m(e.url);if(G.corsDetection&&G.useCors&&t("esri-cors")&&e.url&&-1!==e.url.toLowerCase().indexOf("/rest/services")&&!x.hasSameOrigin(e.urlObj,x.appUrl)&&!x.canUseXhr(e.urlObj)){if(a[c])return a[c];var b=new q;a[c]=b.promise;var d=e.url.substring(0,e.url.toLowerCase().indexOf("/rest/")+6)+"info";h.get(d,{query:{f:"json"},handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*G.corsDetectionTimeout}).then(function(a){a?(x.canUseXhr(e.url)||G.corsEnabledServers.push(c),b.resolve()):b.reject()},
function(e){b.reject()});return b.promise}}catch(U){console.log("esri._detectCors: an unknown error occurred while detecting CORS support")}return H}function A(e,a,c,b){function d(e){e._pendingDfd=w(c,f);var a=!!e._pendingDfd.response;(e._pendingDfd.response||e._pendingDfd).then(function(e){if(!a||!e.data)return e;var c=e.getHeader("Content-Type");if(c&&(c=c.toLowerCase(),-1===c.indexOf("text/plain")&&-1===c.indexOf("application/json")))return e;c=e.data;if(c instanceof ArrayBuffer&&750>=c.byteLength)c=
new Blob([c]);else if(!(c instanceof Blob&&750>=c.size))return e;var b=new q,d=new FileReader;d.readAsText(c);d.onloadend=function(){if(!d.error)try{var a=JSON.parse(d.result);a.error&&(Object.isExtensible(e)||(e=k.mixin({},e)),e._jsonData=a)}catch(va){}b.resolve(e)};return b.promise}).then(function(c){var d=a?c.data:c,m=a?c.getHeader.bind(c):V;if(d&&(c=a&&c._jsonData||d,c.error||"error"===c.status))throw d=k.mixin(Error(),c.error||c),d.getHeader=m,d;e.resolve({data:d,url:b.url,requestOptions:b.requestOptions,
getHeader:m});e._pendingDfd=null}).catch(function(a){var d,g,h;a&&(d=Number(a.code),g=a.hasOwnProperty("subcode")?Number(a.subcode):null,h=(h=a.messageCode)&&h.toUpperCase());if(a&&403===d&&(4===g||a.message&&-1<a.message.toLowerCase().indexOf("ssl")&&-1===a.message.toLowerCase().indexOf("permission"))){if(!c._ssl){c._ssl=c._sslFromServer=!0;A(e,!0,c,b);return}}else if(a&&415===a.status){if(d=c.url,g=G.corsStatus,h=x.getCorsConfig(d,!0),-1<h&&G.corsEnabledServers.splice(h,1),h=new q,h.reject(new p("disabled")),
g[m(d)]=h.promise,!c._err415){c._err415=1;A(e,!0,c,b);return}}else if(r&&"no-prompt"!==c.authMode&&ba._errorCodes&&-1!==ba._errorCodes.indexOf(d)&&!ba._isPublic(c.url)&&(403!==d||W&&-1===W.indexOf(h)&&(!v.isDefined(g)||2===g&&c._token))){D(e,c,b,B("request:server",a,b));return}e.reject(B("request:server",a,b));e._pendingDfd=null})}var g=c.body,r=c.useIdentity,h,f=null,l=g instanceof FormData;if(l||g&&g.elements)f=l?g:new FormData(g);var u=!!(-1!==c.url.toLowerCase().indexOf("token\x3d")||c.content&&
c.content.token||f&&f.get&&f.get("token")||g&&g.elements&&g.elements.token);a||(!r||u||c._token||ba._isPublic(c.url)||(a=function(e){e&&(c._token=e.token,c._ssl=e.ssl)},"immediate"===c.authMode?h=ba.getCredential(c.url).then(a):"no-prompt"===c.authMode?h=ba.checkSignInStatus(c.url).then(a).catch(function(){}):a(ba.findCredential(c.url))),e.then(function(e){if((/\/sharing\/rest\/accounts\/self/i.test(c.url)||/\/sharing\/rest\/portals\/self/i.test(c.url))&&!u&&!c._token&&e.user&&e.user.username){var a=
G.corsEnabledServers,b=x.getCorsConfig(c.url,!0),d={host:m(c.url),withCredentials:!0};if(-1===b)a.push(d);else{var g=a[b];g instanceof RegExp?(d.host=g,a.splice(b,1,d)):"object"===typeof g?g.withCredentials=!0:a.splice(b,1,d)}}if(a=c._credential)b=(b=ba.findServerInfo(a.server))&&b.owningSystemUrl,d=void 0,b&&(b=b.replace(/\/?$/,"/sharing"),(d=ba.findCredential(b,a.userId))&&-1===ba._getIdenticalSvcIdx(b,d)&&d.resources.splice(0,0,b));return e}).always(function(e){delete c._credential;if(e){var a=
!!c._ssl;e instanceof p?e.details.ssl=a:e.ssl=a}}));h?h.then(function(){d(e)}).catch(function(a){e.reject(a)}):d(e);return e.promise}function D(e,a,c,b){e._pendingDfd=ba.getCredential(a.url,{error:b,token:a._token});e._pendingDfd.then(function(b){a._token=b.token;a._credential=b;a._ssl=a._sslFromServer||b.ssl;A(e,!0,a,c)}).catch(function(a){e.reject(a);e._pendingDfd=null})}function B(e,a,c){var b="Error",d={url:c.url,requestOptions:c.requestOptions,getHeader:V};if(a instanceof p)return a.details?
(a.details=v.clone(a.details),a.details.url=c.url,a.details.requestOptions=c.requestOptions):a.details=d,a;if(a){var m=a.response;c=m&&m.getHeader;var m=m&&m.status,g=a.message;c=a.getHeader||c;g&&(b=g);c&&(d.getHeader=c);d.httpStatus=(v.isDefined(a.httpCode)?a.httpCode:a.code)||m;d.subCode=a.subcode;d.messageCode=a.messageCode;d.messages="string"===typeof a.details?[a.details]:a.details}e=new p(e,b,d);a&&"cancel"===a.dojoType&&(e.dojoType="cancel");return e}function F(c,b){if(n&&u.invokeStaticMessage)return n.execute(c,
b);var m=k.mixin({},b),g={url:c,requestOptions:k.mixin({},b)};m.content=m.query;delete m.query;m.preventCache=!!m.cacheBust;delete m.cacheBust;m.handleAs=m.responseType;delete m.responseType;"array-buffer"===m.handleAs&&(m.handleAs="arraybuffer");if("image"===m.handleAs){if(t("host-webworker"))return z.reject(B("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),g));m.preventCache&&(m.content=m.content||{},m.content["request.preventCache"]=
Date.now());m.method="auto"}else if(x.isDataProtocol(c))return z.reject(B("request:invalid-parameters",Error("Data URLs are not supported for responseType \x3d "+m.handleAs),g));var r=G.useIdentity;"anonymous"===m.authMode&&(r=!1);m.useIdentity=r;m.url=x.normalize(c);m.urlObj=new d(m.url);var p=a.makeDeferredCancellingPending();y(m).always(function(){if(r&&!ba)return e()}).always(function(){A(p,!1,m,g)});return p.promise}var C,G=c.request,W=["COM_0056","COM_0057"],fa=0,V=function(){return null},H=
(new q).resolve(),ba,J;(function(e){e.setRequestPreCallback=function(e){C=e}})(F||(F={}));return F})},"esri/core/deferredUtils":function(){define(["dojo/Deferred"],function(b){var f={makeDeferredCancellingPending:function(){var q={},g=f._dfdCanceller.bind(null,q),g=new b(g);return q.deferred=g},_dfdCanceller:function(b){b=b.deferred?b.deferred:b;b.canceled=!0;var g=b._pendingDfd;b.isResolved()||!g||g.isResolved()||g.cancel();b._pendingDfd=null},_fixDfd:function(b){var g=b.then;b.then=function(b,f,
k){if(b){var d=b;b=function(b){return b&&b._argsArray?d.apply(null,b):d(b)}}return g.call(this,b,f,k)};return b},_resDfd:function(b,g,f){var l=g.length;1===l?f?b.reject(g[0]):b.resolve(g[0]):1<l?(g._argsArray=!0,b.resolve(g)):b.resolve()}};return f})},"esri/geometry/SpatialReference":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/spatialReferenceUtils".split(" "),
function(b,f,q,g,n,l,k,d){b=function(b){function c(a){a=b.call(this)||this;a.latestWkid=null;a.wkid=null;a.wkt=null;return a}q(c,b);a=c;c.fromJSON=function(c){if(!c)return null;if(c.wkid){if(102100===c.wkid)return a.WebMercator;if(4326===c.wkid)return a.WGS84}var b=new a;b.read(c);return b};c.prototype.normalizeCtorArgs=function(a){return a&&"object"===typeof a?a:(c={},c["string"===typeof a?"wkt":"wkid"]=a,c);var c};Object.defineProperty(c.prototype,"isWGS84",{get:function(){return d.isWGS84(this)},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isWebMercator",{get:function(){return d.isWebMercator(this)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isGeographic",{get:function(){return d.isGeographic(this)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isWrappable",{get:function(){return d.isWrappable(this)},enumerable:!0,configurable:!0});c.prototype.writeWkt=function(a,c){this.wkid||(c.wkt=a)};c.prototype.clone=function(){if(this===
a.WGS84)return a.WGS84;if(this===a.WebMercator)return a.WebMercator;var c=new a;null!=this.wkid?(c.wkid=this.wkid,null!=this.latestWkid&&(c.latestWkid=this.latestWkid),null!=this.vcsWkid&&(c.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(c.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(c.wkt=this.wkt);return c};c.prototype.equals=function(a){return d.equals(this,a)};c.prototype.toJSON=function(a){return this.write(null,a)};c.GCS_NAD_1927=null;c.WGS84=null;c.WebMercator=null;g([k.property({dependsOn:["wkid"],
readOnly:!0})],c.prototype,"isWGS84",null);g([k.property({dependsOn:["wkid"],readOnly:!0})],c.prototype,"isWebMercator",null);g([k.property({dependsOn:["wkid","wkt"],readOnly:!0})],c.prototype,"isGeographic",null);g([k.property({dependsOn:["wkid"],readOnly:!0})],c.prototype,"isWrappable",null);g([k.property({type:Number,json:{write:!0}})],c.prototype,"latestWkid",void 0);g([k.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkt?
!0:!1}}}}}}})],c.prototype,"wkid",void 0);g([k.property({type:String,json:{origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkid?!0:!1}}}}}}})],c.prototype,"wkt",void 0);g([k.writer("wkt"),k.writer("web-scene","wkt")],c.prototype,"writeWkt",null);g([k.property({type:Number,json:{write:!0}})],c.prototype,"vcsWkid",void 0);g([k.property({type:Number,json:{write:!0}})],c.prototype,"latestVcsWkid",void 0);return c=a=g([k.subclass("esri.geometry.SpatialReference")],
c);var a}(k.declared(n));b.prototype.toJSON.isDefaultToJSON=!0;b.GCS_NAD_1927=new b({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'});b.WGS84=new b(4326);b.WGS84.wkt=l.substitute({Central_Meridian:"0.0"},d.getInfo(b.WGS84).wkTemplate);b.WebMercator=new b({wkid:102100,latestWkid:3857});Object.freeze&&(Object.freeze(b.GCS_NAD_1927),Object.freeze(b.WGS84),Object.freeze(b.WebMercator));
return b})},"esri/geometry/support/spatialReferenceUtils":function(){define(["require","exports","./WKIDUnitConversion"],function(b,f,q){function g(b){return b.wkid&&!0===n[b.wkid]}Object.defineProperty(f,"__esModule",{value:!0});var n={102113:!0,102100:!0,3857:!0,3785:!0},l={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};b=[-2.0037508342788905E7,2.0037508342788905E7];var k=[-2.0037508342787E7,2.0037508342787E7],d={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:b,origin:k,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:b,origin:k,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:b,origin:k,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:b,origin:k,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}};f.equals=function(b,c){if(c){if(b===c)return!0;if(null!=b.wkid||null!=c.wkid)return b.wkid===c.wkid||g(b)&&g(c)||null!=c.latestWkid&&b.wkid===c.latestWkid||null!=b.latestWkid&&c.wkid===b.latestWkid;if(b.wkt&&c.wkt)return b.wkt.toUpperCase()===c.wkt.toUpperCase()}return!1};f.getInfo=function(b){return b.wkid?d[b.wkid]:null};f.isGeographic=function(b){return b.wkid?null==q[b.wkid]:b.wkt?!!/^\s*GEOGCS/i.test(b.wkt):!1};f.isWGS84=function(b){return 4326===
b.wkid};f.isWebMercator=g;f.isWrappable=function(b){return b.wkid&&!0===l[b.wkid]}})},"esri/geometry/support/WKIDUnitConversion":function(){define([],function(){var b,f={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8058:0,8059:0,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,
8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,
26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53034:0,53048:0,53049:0,
54034:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,
103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,
103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,
103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,
103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103695:2};for(b=2E3;2045>=b;b++)f[b]=0;for(b=2056;2065>=b;b++)f[b]=0;for(b=2067;2135>=b;b++)f[b]=0;for(b=2137;2154>=b;b++)f[b]=0;for(b=2161;2170>=b;b++)f[b]=0;for(b=2172;2193>=b;b++)f[b]=0;for(b=2195;2198>=b;b++)f[b]=0;for(b=2200;2203>=b;b++)f[b]=0;for(b=2205;2217>=b;b++)f[b]=0;for(b=2222;2224>=b;b++)f[b]=1;for(b=2225;2250>=b;b++)f[b]=2;
for(b=2251;2253>=b;b++)f[b]=1;for(b=2257;2264>=b;b++)f[b]=2;for(b=2274;2279>=b;b++)f[b]=2;for(b=2280;2282>=b;b++)f[b]=1;for(b=2283;2289>=b;b++)f[b]=2;for(b=2290;2292>=b;b++)f[b]=0;for(b=2308;2313>=b;b++)f[b]=0;for(b=2315;2491>=b;b++)f[b]=0;for(b=2494;2866>=b;b++)f[b]=0;for(b=2867;2869>=b;b++)f[b]=1;for(b=2870;2888>=b;b++)f[b]=2;for(b=2891;2895>=b;b++)f[b]=2;for(b=2896;2898>=b;b++)f[b]=1;for(b=2902;2908>=b;b++)f[b]=2;for(b=2915;2920>=b;b++)f[b]=2;for(b=2921;2923>=b;b++)f[b]=1;for(b=2924;2930>=b;b++)f[b]=
2;for(b=2931;2962>=b;b++)f[b]=0;for(b=2964;2968>=b;b++)f[b]=2;for(b=2969;2973>=b;b++)f[b]=0;for(b=2975;2991>=b;b++)f[b]=0;for(b=2995;3051>=b;b++)f[b]=0;for(b=3054;3079>=b;b++)f[b]=0;for(b=3081;3088>=b;b++)f[b]=0;for(b=3092;3101>=b;b++)f[b]=0;for(b=3106;3138>=b;b++)f[b]=0;for(b=3146;3151>=b;b++)f[b]=0;for(b=3153;3166>=b;b++)f[b]=0;for(b=3168;3172>=b;b++)f[b]=0;for(b=3174;3203>=b;b++)f[b]=0;for(b=3294;3358>=b;b++)f[b]=0;for(b=3367;3403>=b;b++)f[b]=0;for(b=3408;3416>=b;b++)f[b]=0;for(b=3417;3438>=b;b++)f[b]=
2;for(b=3441;3446>=b;b++)f[b]=2;for(b=3447;3450>=b;b++)f[b]=0;for(b=3451;3459>=b;b++)f[b]=2;for(b=3460;3478>=b;b++)f[b]=0;for(b=3554;3559>=b;b++)f[b]=0;for(b=3560;3570>=b;b++)f[b]=2;for(b=3571;3581>=b;b++)f[b]=0;for(b=3594;3597>=b;b++)f[b]=0;for(b=3601;3604>=b;b++)f[b]=0;for(b=3637;3639>=b;b++)f[b]=0;for(b=3665;3667>=b;b++)f[b]=0;for(b=3693;3695>=b;b++)f[b]=0;for(b=3701;3727>=b;b++)f[b]=0;for(b=3728;3739>=b;b++)f[b]=2;for(b=3740;3751>=b;b++)f[b]=0;for(b=3753;3760>=b;b++)f[b]=2;for(b=3761;3773>=b;b++)f[b]=
0;for(b=3775;3777>=b;b++)f[b]=0;for(b=3779;3781>=b;b++)f[b]=0;for(b=3783;3785>=b;b++)f[b]=0;for(b=3788;3791>=b;b++)f[b]=0;for(b=3797;3802>=b;b++)f[b]=0;for(b=3814;3816>=b;b++)f[b]=0;for(b=3825;3829>=b;b++)f[b]=0;for(b=3832;3841>=b;b++)f[b]=0;for(b=3844;3852>=b;b++)f[b]=0;for(b=3873;3885>=b;b++)f[b]=0;for(b=3890;3893>=b;b++)f[b]=0;for(b=3907;3912>=b;b++)f[b]=0;for(b=3942;3950>=b;b++)f[b]=0;for(b=3968;3970>=b;b++)f[b]=0;for(b=3973;3976>=b;b++)f[b]=0;for(b=3986;3989>=b;b++)f[b]=0;for(b=3994;3997>=b;b++)f[b]=
0;for(b=4048;4051>=b;b++)f[b]=0;for(b=4056;4063>=b;b++)f[b]=0;for(b=4093;4096>=b;b++)f[b]=0;for(b=4390;4398>=b;b++)f[b]=0;for(b=4399;4413>=b;b++)f[b]=2;for(b=4418;4433>=b;b++)f[b]=2;for(b=4455;4457>=b;b++)f[b]=2;for(b=4484;4489>=b;b++)f[b]=0;for(b=4491;4554>=b;b++)f[b]=0;for(b=4568;4589>=b;b++)f[b]=0;for(b=4652;4656>=b;b++)f[b]=0;for(b=4766;4800>=b;b++)f[b]=0;for(b=5014;5016>=b;b++)f[b]=0;for(b=5069;5072>=b;b++)f[b]=0;for(b=5105;5130>=b;b++)f[b]=0;for(b=5173;5188>=b;b++)f[b]=0;for(b=5253;5259>=b;b++)f[b]=
0;for(b=5269;5275>=b;b++)f[b]=0;for(b=5292;5311>=b;b++)f[b]=0;for(b=5329;5331>=b;b++)f[b]=0;for(b=5343;5349>=b;b++)f[b]=0;for(b=5355;5357>=b;b++)f[b]=0;for(b=5387;5389>=b;b++)f[b]=0;for(b=5459;5463>=b;b++)f[b]=0;for(b=5479;5482>=b;b++)f[b]=0;for(b=5518;5520>=b;b++)f[b]=0;for(b=5530;5539>=b;b++)f[b]=0;for(b=5550;5552>=b;b++)f[b]=0;for(b=5562;5583>=b;b++)f[b]=0;for(b=5623;5625>=b;b++)f[b]=2;for(b=5631;5639>=b;b++)f[b]=0;for(b=5649;5653>=b;b++)f[b]=0;for(b=5663;5680>=b;b++)f[b]=0;for(b=5682;5685>=b;b++)f[b]=
0;for(b=5875;5877>=b;b++)f[b]=0;for(b=5921;5940>=b;b++)f[b]=0;for(b=6050;6125>=b;b++)f[b]=0;for(b=6244;6275>=b;b++)f[b]=0;for(b=6328;6348>=b;b++)f[b]=0;for(b=6350;6356>=b;b++)f[b]=0;for(b=6366;6372>=b;b++)f[b]=0;for(b=6381;6387>=b;b++)f[b]=0;for(b=6393;6404>=b;b++)f[b]=0;for(b=6480;6483>=b;b++)f[b]=0;for(b=6511;6514>=b;b++)f[b]=0;for(b=6579;6581>=b;b++)f[b]=0;for(b=6619;6624>=b;b++)f[b]=0;for(b=6625;6627>=b;b++)f[b]=2;for(b=6628;6632>=b;b++)f[b]=0;for(b=6634;6637>=b;b++)f[b]=0;for(b=6669;6692>=b;b++)f[b]=
0;for(b=6707;6709>=b;b++)f[b]=0;for(b=6720;6723>=b;b++)f[b]=0;for(b=6732;6738>=b;b++)f[b]=0;for(b=6931;6933>=b;b++)f[b]=0;for(b=6956;6959>=b;b++)f[b]=0;for(b=7005;7007>=b;b++)f[b]=0;for(b=7057;7070>=b;b++)f[b]=2;for(b=7074;7082>=b;b++)f[b]=0;for(b=7109;7118>=b;b++)f[b]=0;for(b=7119;7127>=b;b++)f[b]=1;for(b=7374;7376>=b;b++)f[b]=0;for(b=7528;7586>=b;b++)f[b]=0;for(b=7587;7645>=b;b++)f[b]=2;for(b=7755;7787>=b;b++)f[b]=0;for(b=7791;7795>=b;b++)f[b]=0;for(b=7799;7801>=b;b++)f[b]=0;for(b=7803;7805>=b;b++)f[b]=
0;for(b=7825;7831>=b;b++)f[b]=0;for(b=7845;7859>=b;b++)f[b]=0;for(b=8013;8032>=b;b++)f[b]=0;for(b=20002;20032>=b;b++)f[b]=0;for(b=20062;20092>=b;b++)f[b]=0;for(b=20135;20138>=b;b++)f[b]=0;for(b=20248;20258>=b;b++)f[b]=0;for(b=20348;20358>=b;b++)f[b]=0;for(b=20436;20440>=b;b++)f[b]=0;for(b=20822;20824>=b;b++)f[b]=0;for(b=20934;20936>=b;b++)f[b]=0;for(b=21035;21037>=b;b++)f[b]=0;for(b=21095;21097>=b;b++)f[b]=0;for(b=21148;21150>=b;b++)f[b]=0;for(b=21413;21423>=b;b++)f[b]=0;for(b=21473;21483>=b;b++)f[b]=
0;for(b=21780;21782>=b;b++)f[b]=0;for(b=21891;21894>=b;b++)f[b]=0;for(b=21896;21899>=b;b++)f[b]=0;for(b=22171;22177>=b;b++)f[b]=0;for(b=22181;22187>=b;b++)f[b]=0;for(b=22191;22197>=b;b++)f[b]=0;for(b=22234;22236>=b;b++)f[b]=0;for(b=22521;22525>=b;b++)f[b]=0;for(b=22991;22994>=b;b++)f[b]=0;for(b=23028;23038>=b;b++)f[b]=0;for(b=23830;23853>=b;b++)f[b]=0;for(b=23866;23872>=b;b++)f[b]=0;for(b=23877;23884>=b;b++)f[b]=0;for(b=23886;23894>=b;b++)f[b]=0;for(b=23946;23948>=b;b++)f[b]=0;for(b=24311;24313>=
b;b++)f[b]=0;for(b=24342;24347>=b;b++)f[b]=0;for(b=24370;24374>=b;b++)f[b]=10;for(b=24375;24381>=b;b++)f[b]=0;for(b=24718;24721>=b;b++)f[b]=0;for(b=24817;24821>=b;b++)f[b]=0;for(b=24877;24882>=b;b++)f[b]=0;for(b=24891;24893>=b;b++)f[b]=0;for(b=25391;25395>=b;b++)f[b]=0;for(b=25828;25838>=b;b++)f[b]=0;for(b=26191;26195>=b;b++)f[b]=0;for(b=26391;26393>=b;b++)f[b]=0;for(b=26701;26722>=b;b++)f[b]=0;for(b=26729;26799>=b;b++)f[b]=2;for(b=26801;26803>=b;b++)f[b]=2;for(b=26811;26813>=b;b++)f[b]=2;for(b=26847;26870>=
b;b++)f[b]=2;for(b=26891;26899>=b;b++)f[b]=0;for(b=26901;26923>=b;b++)f[b]=0;for(b=26929;26946>=b;b++)f[b]=0;for(b=26948;26998>=b;b++)f[b]=0;for(b=27037;27040>=b;b++)f[b]=0;for(b=27205;27232>=b;b++)f[b]=0;for(b=27258;27260>=b;b++)f[b]=0;for(b=27391;27398>=b;b++)f[b]=0;for(b=27561;27564>=b;b++)f[b]=0;for(b=27571;27574>=b;b++)f[b]=0;for(b=27581;27584>=b;b++)f[b]=0;for(b=27591;27594>=b;b++)f[b]=0;for(b=28191;28193>=b;b++)f[b]=0;for(b=28348;28358>=b;b++)f[b]=0;for(b=28402;28432>=b;b++)f[b]=0;for(b=28462;28492>=
b;b++)f[b]=0;for(b=29118;29122>=b;b++)f[b]=0;for(b=29168;29172>=b;b++)f[b]=0;for(b=29177;29185>=b;b++)f[b]=0;for(b=29187;29195>=b;b++)f[b]=0;for(b=29900;29903>=b;b++)f[b]=0;for(b=30161;30179>=b;b++)f[b]=0;for(b=30491;30494>=b;b++)f[b]=0;for(b=30729;30732>=b;b++)f[b]=0;for(b=31251;31259>=b;b++)f[b]=0;for(b=31265;31268>=b;b++)f[b]=0;for(b=31275;31279>=b;b++)f[b]=0;for(b=31281;31297>=b;b++)f[b]=0;for(b=31461;31469>=b;b++)f[b]=0;for(b=31491;31495>=b;b++)f[b]=0;for(b=31917;31922>=b;b++)f[b]=0;for(b=31965;32E3>=
b;b++)f[b]=0;for(b=32001;32003>=b;b++)f[b]=2;for(b=32005;32031>=b;b++)f[b]=2;for(b=32033;32060>=b;b++)f[b]=2;for(b=32064;32067>=b;b++)f[b]=2;for(b=32074;32077>=b;b++)f[b]=2;for(b=32081;32086>=b;b++)f[b]=0;for(b=32107;32130>=b;b++)f[b]=0;for(b=32133;32158>=b;b++)f[b]=0;for(b=32164;32167>=b;b++)f[b]=2;for(b=32180;32199>=b;b++)f[b]=0;for(b=32201;32260>=b;b++)f[b]=0;for(b=32301;32360>=b;b++)f[b]=0;for(b=32601;32662>=b;b++)f[b]=0;for(b=32664;32667>=b;b++)f[b]=2;for(b=32701;32761>=b;b++)f[b]=0;for(b=53001;53004>=
b;b++)f[b]=0;for(b=53008;53019>=b;b++)f[b]=0;for(b=53021;53032>=b;b++)f[b]=0;for(b=53042;53046>=b;b++)f[b]=0;for(b=53074;53080>=b;b++)f[b]=0;for(b=54001;54004>=b;b++)f[b]=0;for(b=54008;54019>=b;b++)f[b]=0;for(b=54021;54032>=b;b++)f[b]=0;for(b=54042;54046>=b;b++)f[b]=0;for(b=54048;54053>=b;b++)f[b]=0;for(b=54074;54080>=b;b++)f[b]=0;for(b=102001;102040>=b;b++)f[b]=0;for(b=102042;102063>=b;b++)f[b]=0;for(b=102065;102067>=b;b++)f[b]=0;for(b=102070;102117>=b;b++)f[b]=0;for(b=102122;102216>=b;b++)f[b]=
0;for(b=102221;102377>=b;b++)f[b]=0;for(b=102382;102388>=b;b++)f[b]=0;for(b=102389;102398>=b;b++)f[b]=2;for(b=102399;102444>=b;b++)f[b]=0;for(b=102445;102447>=b;b++)f[b]=2;for(b=102448;102458>=b;b++)f[b]=0;for(b=102459;102468>=b;b++)f[b]=2;for(b=102469;102496>=b;b++)f[b]=0;for(b=102500;102519>=b;b++)f[b]=1;for(b=102520;102524>=b;b++)f[b]=0;for(b=102525;102529>=b;b++)f[b]=2;for(b=102530;102568>=b;b++)f[b]=0;for(b=102570;102588>=b;b++)f[b]=0;for(b=102590;102598>=b;b++)f[b]=0;for(b=102601;102603>=b;b++)f[b]=
0;for(b=102605;102628>=b;b++)f[b]=0;for(b=102629;102646>=b;b++)f[b]=2;for(b=102648;102700>=b;b++)f[b]=2;for(b=102701;102703>=b;b++)f[b]=0;for(b=102707;102730>=b;b++)f[b]=2;for(b=102733;102758>=b;b++)f[b]=2;for(b=102767;102900>=b;b++)f[b]=0;for(b=102965;102969>=b;b++)f[b]=0;for(b=102971;102973>=b;b++)f[b]=0;for(b=102975;102989>=b;b++)f[b]=0;for(b=102990;102992>=b;b++)f[b]=1;for(b=102997;103002>=b;b++)f[b]=0;for(b=103003;103008>=b;b++)f[b]=2;for(b=103009;103011>=b;b++)f[b]=0;for(b=103012;103014>=b;b++)f[b]=
2;for(b=103019;103021>=b;b++)f[b]=0;for(b=103022;103024>=b;b++)f[b]=2;for(b=103029;103031>=b;b++)f[b]=0;for(b=103032;103034>=b;b++)f[b]=2;for(b=103065;103068>=b;b++)f[b]=0;for(b=103074;103076>=b;b++)f[b]=0;for(b=103077;103079>=b;b++)f[b]=1;for(b=103080;103082>=b;b++)f[b]=0;for(b=103083;103085>=b;b++)f[b]=2;for(b=103090;103093>=b;b++)f[b]=0;for(b=103097;103099>=b;b++)f[b]=0;for(b=103100;103102>=b;b++)f[b]=2;for(b=103107;103109>=b;b++)f[b]=0;for(b=103110;103112>=b;b++)f[b]=2;for(b=103113;103116>=b;b++)f[b]=
0;for(b=103117;103120>=b;b++)f[b]=2;for(b=103153;103157>=b;b++)f[b]=0;for(b=103158;103162>=b;b++)f[b]=2;for(b=103163;103165>=b;b++)f[b]=0;for(b=103166;103168>=b;b++)f[b]=1;for(b=103169;103171>=b;b++)f[b]=2;for(b=103186;103188>=b;b++)f[b]=0;for(b=103189;103191>=b;b++)f[b]=2;for(b=103192;103195>=b;b++)f[b]=0;for(b=103196;103199>=b;b++)f[b]=2;for(b=103200;103224>=b;b++)f[b]=0;for(b=103225;103227>=b;b++)f[b]=1;for(b=103232;103237>=b;b++)f[b]=0;for(b=103238;103243>=b;b++)f[b]=2;for(b=103244;103246>=b;b++)f[b]=
0;for(b=103247;103249>=b;b++)f[b]=2;for(b=103254;103256>=b;b++)f[b]=0;for(b=103257;103259>=b;b++)f[b]=2;for(b=103264;103266>=b;b++)f[b]=0;for(b=103267;103269>=b;b++)f[b]=2;for(b=103300;103375>=b;b++)f[b]=0;for(b=103381;103383>=b;b++)f[b]=0;for(b=103384;103386>=b;b++)f[b]=1;for(b=103387;103389>=b;b++)f[b]=0;for(b=103390;103392>=b;b++)f[b]=2;for(b=103397;103399>=b;b++)f[b]=0;for(b=103400;103471>=b;b++)f[b]=2;for(b=103476;103478>=b;b++)f[b]=0;for(b=103479;103481>=b;b++)f[b]=2;for(b=103486;103488>=b;b++)f[b]=
0;for(b=103489;103491>=b;b++)f[b]=2;for(b=103492;103495>=b;b++)f[b]=0;for(b=103496;103499>=b;b++)f[b]=2;for(b=103528;103543>=b;b++)f[b]=0;for(b=103544;103548>=b;b++)f[b]=2;for(b=103549;103551>=b;b++)f[b]=0;for(b=103552;103554>=b;b++)f[b]=1;for(b=103555;103557>=b;b++)f[b]=2;for(b=103558;103560>=b;b++)f[b]=0;for(b=103571;103573>=b;b++)f[b]=0;for(b=103574;103576>=b;b++)f[b]=2;for(b=103577;103580>=b;b++)f[b]=0;for(b=103581;103583>=b;b++)f[b]=2;for(b=103600;103694>=b;b++)f[b]=0;for(b=103700;103793>=b;b++)f[b]=
2;for(b=103794;103871>=b;b++)f[b]=0;for(b=103900;103971>=b;b++)f[b]=2;return f})},"esri/geometry/Extent":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Geometry ./Point ./SpatialReference ./support/contains ./support/intersects ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),function(b,f,q,g,n,l,k,d,h,c,a,p,u){function v(a,c,b){return null==c?b:null==b?c:a(c,b)}b=function(b){function f(){for(var a=
0;a<arguments.length;a++);a=b.call(this)||this;a.type="extent";a.xmin=0;a.ymin=0;a.mmin=void 0;a.zmin=void 0;a.xmax=0;a.ymax=0;a.mmax=void 0;a.zmax=void 0;return a}q(f,b);k=f;f.prototype.normalizeCtorArgs=function(a,c,e,b,d){return!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?"object"===typeof a?(a.spatialReference=null!=a.spatialReference?a.spatialReference:h.WGS84,a):{xmin:a,ymin:c,xmax:e,ymax:b,spatialReference:null!=d?d:h.WGS84}:{spatialReference:a,xmin:0,ymin:0,xmax:0,
ymax:0}};Object.defineProperty(f.prototype,"center",{get:function(){var a=new d({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});this.hasZ&&(a.z=.5*(this.zmin+this.zmax));this.hasM&&(a.m=.5*(this.mmin+this.mmax));return a},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"extent",{get:function(){return this.clone()},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"hasM",{get:function(){return null!=this.mmin&&null!=
this.mmax},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"hasZ",{get:function(){return null!=this.zmin&&null!=this.zmax},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"height",{get:function(){return Math.abs(this.ymax-this.ymin)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"width",{get:function(){return Math.abs(this.xmax-this.xmin)},enumerable:!0,configurable:!0});f.prototype.centerAt=function(a){var c=this.center;return null!=a.z&&this.hasZ?
this.offset(a.x-c.x,a.y-c.y,a.z-c.z):this.offset(a.x-c.x,a.y-c.y)};f.prototype.clone=function(){var a=new k;a.xmin=this.xmin;a.ymin=this.ymin;a.xmax=this.xmax;a.ymax=this.ymax;a.spatialReference=this.spatialReference;null!=this.zmin&&(a.zmin=this.zmin,a.zmax=this.zmax);null!=this.mmin&&(a.mmin=this.mmin,a.mmax=this.mmax);return a};f.prototype.contains=function(a){if(!a)return!1;var b=this.spatialReference,e=a.spatialReference;b&&e&&!b.equals(e)&&u.canProject(b,e)&&(a=b.isWebMercator?u.geographicToWebMercator(a):
u.webMercatorToGeographic(a,!0));return"point"===a.type?c.extentContainsPoint(this,a):"extent"===a.type?c.extentContainsExtent(this,a):!1};f.prototype.equals=function(a){if(!a)return!1;var c=this.spatialReference,e=a.spatialReference;c&&e&&!c.equals(e)&&u.canProject(c,e)&&(a=c.isWebMercator?u.geographicToWebMercator(a):u.webMercatorToGeographic(a,!0));return this.xmin===a.xmin&&this.ymin===a.ymin&&this.zmin===a.zmin&&this.mmin===a.mmin&&this.xmax===a.xmax&&this.ymax===a.ymax&&this.zmax===a.zmax&&
this.mmax===a.mmax};f.prototype.expand=function(a){a=.5*(1-a);var c=this.width*a,e=this.height*a;this.xmin+=c;this.ymin+=e;this.xmax-=c;this.ymax-=e;this.hasZ&&(c=(this.zmax-this.zmin)*a,this.zmin+=c,this.zmax-=c);this.hasM&&(a*=this.mmax-this.mmin,this.mmin+=a,this.mmax-=a);return this};f.prototype.intersects=function(c){if(!c)return!1;var b=this.spatialReference,e=c.spatialReference;b&&e&&!b.equals(e)&&u.canProject(b,e)&&(c=b.isWebMercator?u.geographicToWebMercator(c):u.webMercatorToGeographic(c,
!0));b=a.getExtentIntersector(c.type);return"mesh"!==c.type?b(this,c):b(this,c.extent)};f.prototype.normalize=function(){var a=this._normalize(!1,!0);return Array.isArray(a)?a:[a]};f.prototype.offset=function(a,c,e){this.xmin+=a;this.ymin+=c;this.xmax+=a;this.ymax+=c;null!=e&&(this.zmin+=e,this.zmax+=e);return this};f.prototype.shiftCentralMeridian=function(){return this._normalize(!0)};f.prototype.union=function(a){this.xmin=Math.min(this.xmin,a.xmin);this.ymin=Math.min(this.ymin,a.ymin);this.xmax=
Math.max(this.xmax,a.xmax);this.ymax=Math.max(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=v(Math.min,this.zmin,a.zmin),this.zmax=v(Math.max,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=v(Math.min,this.mmin,a.mmin),this.mmax=v(Math.max,this.mmax,a.mmax);return this};f.prototype.intersection=function(a){if(!this.intersects(a))return null;this.xmin=Math.max(this.xmin,a.xmin);this.ymin=Math.max(this.ymin,a.ymin);this.xmax=Math.min(this.xmax,a.xmax);this.ymax=Math.min(this.ymax,a.ymax);if(this.hasZ||
a.hasZ)this.zmin=v(Math.max,this.zmin,a.zmin),this.zmax=v(Math.min,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=v(Math.max,this.mmin,a.mmin),this.mmax=v(Math.min,this.mmax,a.mmax);return this};f.prototype.toJSON=function(a){return this.write(null,a)};f.prototype._shiftCM=function(a){void 0===a&&(a=p.getInfo(this.spatialReference));if(!a||!this.spatialReference)return this;var c=this.spatialReference,e=this._getCM(a);if(e){var b=c.isWebMercator?u.webMercatorToGeographic(e):e;this.xmin-=e.x;this.xmax-=
e.x;c.isWebMercator||(b.x=this._normalizeX(b.x,a).x);this.spatialReference=new h(n.substitute({Central_Meridian:b.x},c.isWGS84?a.altTemplate:a.wkTemplate))}return this};f.prototype._getCM=function(a){var c=null,e=a.valid;a=e[0];var e=e[1],b=this.xmin,d=this.xmax;b>=a&&b<=e&&d>=a&&d<=e||(c=this.center);return c};f.prototype._normalize=function(a,c,e){var b=this.spatialReference;if(!b)return this;e=e||p.getInfo(b);if(!e)return this;var d=this._getParts(e).map(function(e){return e.extent});if(2>d.length)return d[0]||
this;if(2<d.length)return a?this._shiftCM(e):this.set({xmin:e.valid[0],xmax:e.valid[1]});if(a)return this._shiftCM(e);if(c)return d;var m=!0,g=!0;d.forEach(function(e){e.hasZ||(m=!1);e.hasM||(g=!1)});return{rings:d.map(function(e){var a=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(m)for(var c=(e.zmax-e.zmin)/2,b=0;b<a.length;b++)a[b].push(c);if(g)for(e=(e.mmax-e.mmin)/2,b=0;b<a.length;b++)a[b].push(e);return a}),hasZ:m,hasM:g,spatialReference:b}};f.prototype._getParts=
function(a){var c=this.cache._parts;if(!c){var c=[],e=this.ymin,b=this.ymax,d=this.spatialReference,g=this.width,r=this.xmin,h=this.xmax,f=void 0;a=a||p.getInfo(d);var l=a.valid,u=l[0],n=l[1],f=this._normalizeX(this.xmin,a),v=f.x,l=f.frameId,f=this._normalizeX(this.xmax,a),t=f.x;a=f.frameId;f=v===t&&0<g;if(g>2*n){g=new k(r<h?v:t,e,n,b,d);r=new k(u,e,r<h?t:v,b,d);h=new k(0,e,n,b,d);e=new k(u,e,0,b,d);b=[];d=[];g.contains(h)&&b.push(l);g.contains(e)&&d.push(l);r.contains(h)&&b.push(a);r.contains(e)&&
d.push(a);for(u=l+1;u<a;u++)b.push(u),d.push(u);c.push({extent:g,frameIds:[l]},{extent:r,frameIds:[a]},{extent:h,frameIds:b},{extent:e,frameIds:d})}else v>t||f?c.push({extent:new k(v,e,n,b,d),frameIds:[l]},{extent:new k(u,e,t,b,d),frameIds:[a]}):c.push({extent:new k(v,e,t,b,d),frameIds:[l]});this.cache._parts=c}a=this.hasZ;e=this.hasM;if(a||e)for(l={},a&&(l.zmin=this.zmin,l.zmax=this.zmax),e&&(l.mmin=this.mmin,l.mmax=this.mmax),a=0;a<c.length;a++)c[a].extent.set(l);return c};f.prototype._normalizeX=
function(a,c){var e=c.valid;c=e[0];var b=e[1],e=2*b,d=0;a>b?(c=Math.ceil(Math.abs(a-b)/e),a-=c*e,d=c):a<c&&(c=Math.ceil(Math.abs(a-c)/e),a+=c*e,d=-c);return{x:a,frameId:d}};g([l.property({dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax spatialReference".split(" ")})],f.prototype,"cache",void 0);g([l.property({readOnly:!0,dependsOn:["cache"]})],f.prototype,"center",null);g([l.property({readOnly:!0,dependsOn:["cache"]})],f.prototype,"extent",null);g([l.property({readOnly:!0,dependsOn:["mmin","mmax"],
json:{write:{enabled:!1,overridePolicy:null}}})],f.prototype,"hasM",null);g([l.property({readOnly:!0,dependsOn:["zmin","zmax"],json:{write:{enabled:!1,overridePolicy:null}}})],f.prototype,"hasZ",null);g([l.property({readOnly:!0,dependsOn:["ymin","ymax"]})],f.prototype,"height",null);g([l.property({readOnly:!0,dependsOn:["xmin","xmax"]})],f.prototype,"width",null);g([l.property({type:Number,json:{write:!0}})],f.prototype,"xmin",void 0);g([l.property({type:Number,json:{write:!0}})],f.prototype,"ymin",
void 0);g([l.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],f.prototype,"mmin",void 0);g([l.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],f.prototype,"zmin",void 0);g([l.property({type:Number,json:{write:!0}})],f.prototype,"xmax",void 0);g([l.property({type:Number,json:{write:!0}})],f.prototype,"ymax",void 0);g([l.property({type:Number,json:{origins:{"web-scene":{write:!1}},
write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],f.prototype,"mmax",void 0);g([l.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],f.prototype,"zmax",void 0);return f=k=g([l.subclass("esri.geometry.Extent")],f);var k}(l.declared(k));b.prototype.toJSON.isDefaultToJSON=!0;return b})},"esri/geometry/Geometry":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./SpatialReference".split(" "),
function(b,f,q,g,n,l,k){return function(b){function d(){var c=b.call(this)||this;c.type=null;c.extent=null;c.hasM=!1;c.hasZ=!1;c.spatialReference=k.WGS84;return c}q(d,b);Object.defineProperty(d.prototype,"cache",{get:function(){return{}},enumerable:!0,configurable:!0});d.prototype.clone=function(){console.warn(".clone() is not implemented for "+this.declaredClass);return null};d.prototype.clearCache=function(){this.notifyChange("cache")};d.prototype.getCacheValue=function(c){return this.cache[c]};
d.prototype.setCacheValue=function(c,a){this.cache[c]=a};g([l.property()],d.prototype,"type",void 0);g([l.property({readOnly:!0,dependsOn:["spatialReference"]})],d.prototype,"cache",null);g([l.property({readOnly:!0,dependsOn:["spatialReference"]})],d.prototype,"extent",void 0);g([l.property({type:Boolean,json:{write:{overridePolicy:function(c){return{enabled:c}}}}})],d.prototype,"hasM",void 0);g([l.property({type:Boolean,json:{write:{overridePolicy:function(c){return{enabled:c}}}}})],d.prototype,
"hasZ",void 0);g([l.property({type:k,json:{write:!0}})],d.prototype,"spatialReference",void 0);return d=g([l.subclass("esri.geometry.Geometry")],d)}(l.declared(n))})},"esri/geometry/Point":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Logger ../core/accessorSupport/decorators ./Geometry ./SpatialReference ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),function(b,f,q,g,n,l,k,d,h,c){function a(a){return a&&
("esri.geometry.SpatialReference"===a.declaredClass||null!=a.wkid)}var p=[0,0],u=n.getLogger("esri.geometry.Point");b=function(b){function f(a,c,d,e,g){a=b.call(this)||this;a.x=0;a.y=0;a.z=void 0;a.m=void 0;a.type="point";return a}q(f,b);k=f;f.copy=function(a,c){c.x=a.x;c.y=a.y;c.z=a.z;c.m=a.m;c.spatialReference=Object.isFrozen(a.spatialReference)?a.spatialReference:a.spatialReference.clone()};f.distance=function(a,c){var b=a.x-c.x,e=a.y-c.y;a=a.hasZ&&c.hasZ?a.z-c.z:0;return Math.sqrt(b*b+e*e+a*a)};
f.prototype.normalizeCtorArgs=function(b,g,m,e,h){var r;if(Array.isArray(b))r=b,h=g,b=r[0],g=r[1],m=r[2],e=r[3];else if(b&&"object"===typeof b){if(r=b,b=null!=r.x?r.x:r.longitude,g=null!=r.y?r.y:r.latitude,m=null!=r.z?r.z:r.altitude,e=r.m,(h=r.spatialReference)&&"esri.geometry.SpatialReference"!==h.declaredClass&&(h=new d(h)),null!=r.longitude||null!=r.latitude)null==r.longitude?u.warn(".longitude\x3d","Latitude was defined without longitude"):null==r.latitude?u.warn(".latitude\x3d","Longitude was defined without latitude"):
!r.declaredClass&&h&&h.isWebMercator&&(g=c.lngLatToXY(r.longitude,r.latitude,p),b=g[0],g=g[1])}else a(m)?(h=m,m=null):a(e)&&(h=e,e=null);b={x:b,y:g};null!=h&&(b.spatialReference=h);null!=m&&(b.z=m);null!=e&&(b.m=e);return b};Object.defineProperty(f.prototype,"hasM",{get:function(){return void 0!==this.m},set:function(a){var c=this._get("hasM");a!==c&&(this._set("m",a?0:void 0),this._set("hasM",a))},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"hasZ",{get:function(){return void 0!==
this.z},set:function(a){var c=this._get("hasZ");a!==c&&(this._set("z",a?0:void 0),this._set("hasZ",a))},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"latitude",{get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return c.xyToLngLat(this.x,this.y,p)[1];if(a.isWGS84)return this._get("y")}return null},set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("y",c.lngLatToXY(this.x,a,p)[1]):b.isWGS84&&this._set("y",a),this._set("latitude",
a))},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"longitude",{get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return c.xyToLngLat(this._get("x"),this._get("y"),p)[0];if(a.isWGS84)return this._get("x")}return null},set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("x",c.lngLatToXY(a,this._get("y"),p)[0]):b.isWGS84&&this._set("x",a),this._set("longitude",a))},enumerable:!0,configurable:!0});f.prototype.clone=function(){var a=
new k;a.x=this.x;a.y=this.y;a.z=this.z;a.m=this.m;a.spatialReference=this.spatialReference;return a};f.prototype.copy=function(a){k.copy(a,this);return this};f.prototype.equals=function(a){if(!a)return!1;var b=this.x,d=this.y,e=this.z,g=this.m,p=this.spatialReference,h=a.z,f=a.m,k=a.x,l=a.y;a=a.spatialReference;if(!p.equals(a))if(p.isWebMercator&&a.isWGS84)l=c.lngLatToXY(k,l),k=l[0],l=l[1],a=p;else if(p.isWGS84&&a.isWebMercator)l=c.xyToLngLat(k,l),k=l[0],l=l[1],a=p;else return!1;return b===k&&d===
l&&e===h&&g===f&&p.wkid===a.wkid};f.prototype.offset=function(a,c,b){this.x+=a;this.y+=c;null!=b&&this.hasZ&&(this.z+=b);return this};f.prototype.normalize=function(){if(!this.spatialReference)return this;var a=h.getInfo(this.spatialReference);if(!a)return this;var c=this.x,b=a.valid,a=b[0],e=b[1],b=2*e;c>e?(a=Math.ceil(Math.abs(c-e)/b),c-=a*b):c<a&&(a=Math.ceil(Math.abs(c-a)/b),c+=a*b);this._set("x",c);return this};f.prototype.distance=function(a){return k.distance(this,a)};f.prototype.toArray=function(){var a=
this.hasZ,c=this.hasM;return a&&c?[this.x,this.y,this.z,this.m]:a?[this.x,this.y,this.z]:c?[this.x,this.y,this.m]:[this.x,this.y]};f.prototype.toJSON=function(a){return this.write(null,a)};g([l.property({dependsOn:["x","y","z","m","spatialReference"]})],f.prototype,"cache",void 0);g([l.property({type:Boolean,dependsOn:["m"],json:{write:{enabled:!1,overridePolicy:null}}})],f.prototype,"hasM",null);g([l.property({type:Boolean,dependsOn:["z"],json:{write:{enabled:!1,overridePolicy:null}}})],f.prototype,
"hasZ",null);g([l.property({type:Number,dependsOn:["y"]})],f.prototype,"latitude",null);g([l.property({type:Number,dependsOn:["x"]})],f.prototype,"longitude",null);g([l.property({type:Number,json:{write:{isRequired:!0}}})],f.prototype,"x",void 0);g([l.property({type:Number,json:{write:!0}})],f.prototype,"y",void 0);g([l.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],f.prototype,"z",void 0);g([l.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],
f.prototype,"m",void 0);return f=k=g([l.subclass("esri.geometry.Point")],f);var k}(l.declared(k));b.prototype.toJSON.isDefaultToJSON=!0;return b})},"esri/geometry/support/webMercatorUtils":function(){define(["require","exports","../SpatialReference","./spatialReferenceUtils"],function(b,f,q,g){function n(c,a,b,d,g){if("point"===c.type&&"point"===g.type)a=a(c.x,c.y,h,0,d),g.x=a[0],g.y=a[1];else if("extent"===c.type&&"extent"===g.type)p=a(c.xmin,c.ymin,h,0,d),g.xmin=p[0],g.ymin=p[1],a=a(c.xmax,c.ymax,
h,0,d),g.xmax=a[0],g.ymax=a[1];else if("polyline"===c.type&&"polyline"===g.type||"polygon"===c.type&&"polygon"===g.type){var p="polyline"===c.type?c.paths:c.rings,f=[],k=void 0;for(c=0;c<p.length;c++){var r=p[c],k=[];f.push(k);for(var m=0;m<r.length;m++)k.push(a(r[m][0],r[m][1],[0,0],0,d)),2<r[m].length&&k[m].push(r[m][2]),3<r[m].length&&k[m].push(r[m][3])}"polyline"===g.type?g.paths=f:g.rings=f}else if("multipoint"===c.type&&"multipoint"===g.type){p=c.points;f=[];for(c=0;c<p.length;c++)f[c]=a(p[c][0],
p[c][1],[0,0],0,d),2<p[c].length&&f[c].push(p[c][2]),3<p[c].length&&f[c].push(p[c][3]);g.points=f}else if("mesh"===c.type&&"mesh"===g.type&&(p=c.vertexAttributes&&c.vertexAttributes.position,f=g.vertexAttributes&&g.vertexAttributes.position,p))for(k=[0,0],c=0;c<p.length;c+=3)a(p[c],p[c+1],k,0,d),f[c]=k[0],f[c+1]=k[1];g.spatialReference=b;return g;var p}function l(c,a){c=c&&(null!=c.wkid||null!=c.wkt?c:c.spatialReference);a=a&&(null!=a.wkid||null!=a.wkt?a:a.spatialReference);return c&&a?g.equals(a,
c)?!0:g.isWebMercator(a)&&g.isWGS84(c)||g.isWebMercator(c)&&g.isWGS84(a):!1}function k(c,a,b,d){void 0===b&&(b=[0,0]);void 0===d&&(d=0);89.99999<a?a=89.99999:-89.99999>a&&(a=-89.99999);a*=.017453292519943;b[d]=111319.49079327169*c;b[d+1]=3189068.5*Math.log((1+Math.sin(a))/(1-Math.sin(a)));return b}function d(c,a,b,d,g){void 0===b&&(b=[0,0]);void 0===d&&(d=0);void 0===g&&(g=!1);c=c/6378137*57.29577951308232;b[d]=g?c:c-360*Math.floor((c+180)/360);b[d+1]=57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*
a/6378137)));return b}Object.defineProperty(f,"__esModule",{value:!0});var h=[0,0];f.canProject=l;f.project=function(c,a){var b=c&&c.spatialReference;a=a&&(null!=a.wkid||null!=a.wkt?a:a.spatialReference);return l(b,a)?g.equals(b,a)?c.clone():g.isWebMercator(a)?n(c,k,q.WebMercator,!1,c.clone()):g.isWGS84(a)?n(c,d,q.WGS84,!1,c.clone()):null:null};f.lngLatToXY=k;f.xyToLngLat=d;f.geographicToWebMercator=function(c,a,b){void 0===a&&(a=!1);void 0===b&&(b=c.clone());return n(c,k,q.WebMercator,a,b)};f.webMercatorToGeographic=
function(c,a,b){void 0===a&&(a=!1);void 0===b&&(b=c.clone());return n(c,d,q.WGS84,a,b)}})},"esri/geometry/support/contains":function(){define(["require","exports"],function(b,f){function q(b,g,d,h){return g>=b.xmin&&g<=b.xmax&&d>=b.ymin&&d<=b.ymax?null!=h&&b.hasZ?h>=b.zmin&&h<=b.zmax:!0:!1}function g(b,g){if(b=b.rings)if(Array.isArray(b[0][0])){for(var d=!1,h=0,c=b.length;h<c;h++)d=n(d,b[h],g);g=d}else g=n(!1,b,g);else g=!1;return g}function n(b,g,d){var h=d[0];d=d[1];for(var c=0,a=0,p=g.length;a<
p;a++){c++;c===p&&(c=0);var f=g[a],k=f[0],f=f[1],l=g[c],n=l[0],l=l[1];(f<d&&l>=d||l<d&&f>=d)&&k+(d-f)/(l-f)*(n-k)<h&&(b=!b)}return b}Object.defineProperty(f,"__esModule",{value:!0});f.extentContainsPoint=function(b,g){return q(b,g.x,g.y,g.z)};f.extentContainsExtent=function(b,g){var d=g.xmin,h=g.ymin,c=g.zmin,a=g.xmax,p=g.ymax,f=g.zmax;return b.hasZ&&g.hasZ?q(b,d,h,c)&&q(b,d,p,c)&&q(b,a,p,c)&&q(b,a,h,c)&&q(b,d,h,f)&&q(b,d,p,f)&&q(b,a,p,f)&&q(b,a,h,f):q(b,d,h)&&q(b,d,p)&&q(b,a,p)&&q(b,a,h)};f.extentContainsCoords2D=
function(b,g){return q(b,g[0],g[1])};f.extentContainsCoords3D=function(b,g){return q(b,g[0],g[1],g[2])};f.polygonContainsPoint=function(b,f){return g(b,[f.x,f.y])};f.polygonContainsCoords=g})},"esri/geometry/support/intersects":function(){define(["require","exports","./contains"],function(b,f,q){function g(a,c){return q.extentContainsPoint(a,c)}function n(a,c){var e=a.hasZ&&c.hasZ,b;if(a.xmin<=c.xmin){if(b=c.xmin,a.xmax<b)return!1}else if(b=a.xmin,c.xmax<b)return!1;if(a.ymin<=c.ymin){if(b=c.ymin,
a.ymax<b)return!1}else if(b=a.ymin,c.ymax<b)return!1;if(e&&c.hasZ)if(a.zmin<=c.zmin){if(e=c.zmin,a.zmax<e)return!1}else if(e=a.zmin,c.zmax<e)return!1;return!0}function l(a,c){var e=c.hasZ?q.extentContainsCoords3D:q.extentContainsCoords2D,b=0;for(c=c.points;b<c.length;b++)if(e(a,c[b]))return!0;return!1}function k(c,b){a[0]=c.xmin;a[1]=c.ymax;p[0]=c.xmax;p[1]=c.ymax;u[0]=c.xmin;u[1]=c.ymin;v[0]=c.xmax;v[1]=c.ymin;for(var e=0,d=z;e<d.length;e++)if(q.polygonContainsCoords(b,d[e]))return!0;e=0;for(b=b.rings;e<
b.length;e++)if(d=b[e],d.length){var m=d[0];if(q.extentContainsCoords2D(c,m))return!0;for(var g=1;g<d.length;g++){var r=d[g];if(q.extentContainsCoords2D(c,r)||h(m,r,t))return!0;m=r}}return!1}function d(c,b){a[0]=c.xmin;a[1]=c.ymax;p[0]=c.xmax;p[1]=c.ymax;u[0]=c.xmin;u[1]=c.ymin;v[0]=c.xmax;v[1]=c.ymin;b=b.paths;for(var e=0;e<b.length;e++){var d=b[e];if(b.length){var m=d[0];if(q.extentContainsCoords2D(c,m))return!0;for(var g=1;g<d.length;g++){var r=d[g];if(q.extentContainsCoords2D(c,r)||h(m,r,t))return!0;
m=r}}}return!1}function h(a,b,e){for(var d=0;d<e.length;d++)if(c(a,b,e[d][0],e[d][1]))return!0;return!1}function c(a,c,e,b,d){var m=a[0];a=a[1];var g=c[0];c=c[1];var r=e[0],p=e[1];e=b[0]-r;var r=m-r,h=g-m;b=b[1]-p;var p=a-p,f=c-a,w=b*h-e*f;if(0===w)return!1;e=(e*p-b*r)/w;r=(h*p-f*r)/w;return 0<=e&&1>=e&&0<=r&&1>=r?(d&&(d[0]=m+e*(g-m),d[1]=a+e*(c-a)),!0):!1}Object.defineProperty(f,"__esModule",{value:!0});f.extentIntersectsPoint=g;f.extentIntersectsExtent=n;f.extentIntersectsMultipoint=l;var a=[0,
0],p=[0,0],u=[0,0],v=[0,0],z=[a,p,u,v],t=[[u,a],[a,p],[p,v],[v,u]];f.extentIntersectsPolygon=k;f.extentIntersectsPolyline=d;var x=[0,0];f.isSelfIntersecting=function(a){for(var b=0;b<a.length;b++){for(var e=a[b],d=0;d<e.length-1;d++)for(var g=e[d],r=e[d+1],p=b+1;p<a.length;p++)for(var h=0;h<a[p].length-1;h++){var f=a[p][h],k=a[p][h+1],l=c(g,r,f,k,x);if(l&&!(x[0]===g[0]&&x[1]===g[1]||x[0]===f[0]&&x[1]===f[1]||x[0]===r[0]&&x[1]===r[1]||x[0]===k[0]&&x[1]===k[1]))return!0}h=e.length;if(!(4>=h))for(d=
0;d<h-3;d++){var u=h-1;0===d&&(u=h-2);g=e[d];r=e[d+1];for(p=d+2;p<u;p++)if(f=e[p],k=e[p+1],(l=c(g,r,f,k,x))&&!(x[0]===g[0]&&x[1]===g[1]||x[0]===f[0]&&x[1]===f[1]||x[0]===r[0]&&x[1]===r[1]||x[0]===k[0]&&x[1]===k[1]))return!0}}return!1};f.segmentIntersects=c;f.getExtentIntersector=function(a){switch(a){case "esriGeometryEnvelope":case "extent":return n;case "esriGeometryMultipoint":case "multipoint":return l;case "esriGeometryPoint":case "point":return g;case "esriGeometryPolygon":case "polygon":return k;
case "esriGeometryPolyline":case "polyline":return d;case "mesh":return n}}})},"esri/portal/Portal":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper dojo/_base/kernel dojo/_base/lang dojo/_base/url dojo/promise/all ../config ../kernel ../request ../core/Error ../core/global ../core/JSONSupport ../core/Loadable ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/Extent ./PortalQueryParams ./PortalQueryResult ./PortalUser".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z,t,x,r,m,e,w,y,A,D){var B,F={Bookmark:function(){return r.create(function(a){return b(["./Bookmark"],a)})},Portal:function(){return r.create(function(a){return b(["./Portal"],a)})},PortalFolder:function(){return r.create(function(a){return b(["./PortalFolder"],a)})},PortalGroup:function(){return r.create(function(a){return b(["./PortalGroup"],a)})},PortalItem:function(){return r.create(function(a){return b(["./PortalItem"],a)})},PortalQueryParams:function(){return r.create(function(a){return b(["./PortalQueryParams"],
a)})},PortalQueryResult:function(){return r.create(function(a){return b(["./PortalQueryResult"],a)})},PortalRating:function(){return r.create(function(a){return b(["./PortalRating"],a)})},PortalUser:function(){return r.create(function(a){return b(["./PortalUser"],a)})}};return function(f){function t(e){e=f.call(this)||this;e.access=null;e.allSSL=!1;e.authMode="auto";e.authorizedCrossOriginDomains=null;e.basemapGalleryGroupQuery=null;e.bingKey=null;e.canListApps=!1;e.canListData=!1;e.canListPreProvisionedItems=
!1;e.canProvisionDirectPurchase=!1;e.canSearchPublic=!1;e.canShareBingPublic=!1;e.canSharePublic=!1;e.canSignInArcGIS=!1;e.canSignInIDP=!1;e.colorSetsGroupQuery=null;e.commentsEnabled=!1;e.created=null;e.culture=null;e.customBaseUrl=null;e.defaultBasemap=null;e.defaultExtent=null;e.defaultVectorBasemap=null;e.description=null;e.eueiEnabled=!1;e.featuredGroups=null;e.featuredItemsGroupQuery=null;e.galleryTemplatesGroupQuery=null;e.livingAtlasGroupQuery=null;e.hasCategorySchema=!1;e.helperServices=
null;e.homePageFeaturedContent=null;e.homePageFeaturedContentCount=null;e.httpPort=null;e.httpsPort=null;e.id=null;e.ipCntryCode=null;e.isPortal=!1;e.layerTemplatesGroupQuery=null;e.maxTokenExpirationMinutes=null;e.modified=null;e.name=null;e.portalHostname=null;e.portalMode=null;e.portalProperties=null;e.region=null;e.rotatorPanels=null;e.showHomePageDescription=!1;e.supportsHostedServices=!1;e.symbolSetsGroupQuery=null;e.templatesGroupQuery=null;e.units=null;e.url=a.portalUrl;e.urlKey=null;e.user=
null;e.useStandardizedQuery=!1;e.useVectorBasemaps=!1;e.vectorBasemapGalleryGroupQuery=null;return e}g(t,f);x=t;t.prototype.normalizeCtorArgs=function(a){return"string"===typeof a?{url:a}:a};t.prototype.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)};t.prototype.readAuthorizedCrossOriginDomains=function(e){if(e)for(var c=0;c<e.length;c++){var b=e[c],d=b;m.hasProtocol(d)||(d=m.appUrl.scheme+"://"+d);m.canUseXhr(d)||
a.request.corsEnabledServers.push({host:b,withCredentials:!0})}return e};t.prototype.readDefaultBasemap=function(a){return a?(a=B.fromJSON(a),a.portalItem={portal:this},a):null};t.prototype.readDefaultVectorBasemap=function(a){return a?(a=B.fromJSON(a),a.portalItem={portal:this},a):null};Object.defineProperty(t.prototype,"extraQuery",{get:function(){var a=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!a?" AND orgid:"+this.id:null},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,
"isOrganization",{get:function(){return!!this.access},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"restUrl",{get:function(){var a=this.url;if(a)var e=a.indexOf("/sharing"),a=0<e?a.substring(0,e):this.url.replace(/\/+$/,""),a=a+"/sharing/rest";return a},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"thumbnailUrl",{get:function(){var a=this.restUrl,e=this.thumbnail;return a&&e?this._normalizeSSL(a+"/portals/self/resources/"+e):null},enumerable:!0,configurable:!0});
t.prototype.readUrlKey=function(a){return a?a.toLowerCase():a};t.prototype.readUser=function(a){var e=null;a&&(e=D.fromJSON(a),e.portal=this);return e};t.prototype.load=function(){var a=this,e=r.create(function(a){return b(["../Basemap"],a)}).then(function(a){B=a}).then(function(){return a._fetchSelf()}).then(function(e){if(p.id){var c=p.id;a.credential=c.findCredential(a.restUrl);a.credential||a.authMode!==x.AUTH_MODE_AUTO||(a._esriId_credentialCreateHandle=c.on("credential-create",function(){c.findCredential(a.restUrl)&&
a._signIn()}))}a.read(e)});this.addResolvingPromise(e);return this.when()};t.prototype.fetchBasemaps=function(a){var e=new y;e.query=a||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);e.disableExtraQuery=!0;return this.queryGroups(e).then(function(a){e.num=100;e.query='type:"Web Map" -type:"Web Application"';return a.total?(a=a.results[0],e.sortField=a.sortField||"name",e.sortOrder=a.sortOrder||"desc",a.queryItems(e)):null}).then(function(a){return a&&a.total?
a.results.filter(function(a){return"Web Map"===a.type}).map(function(a){return new B({portalItem:a})}):[]})};t.prototype.fetchCategorySchema=function(){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema").then(function(a){return a.categorySchema}):r.resolve([])};t.prototype.fetchFeaturedGroups=function(){var a=this.featuredGroups,e=new y;e.num=100;e.sortField="title";if(a&&a.length){for(var c=[],b=0;b<a.length;b++){var d=a[b];c.push('(title:"'+d.title+'" AND owner:'+
d.owner+")")}e.query=c.join(" OR ");return this.queryGroups(e).then(function(a){return a.results})}return r.resolve([])};t.getDefault=function(){x._default||(x._default=new x);return x._default};t.prototype.queryGroups=function(a){return this._queryPortal("/community/groups",a,"PortalGroup")};t.prototype.queryItems=function(a){return this._queryPortal("/search",a,"PortalItem")};t.prototype.queryUsers=function(a){a.sortField||(a.sortField="username");return this._queryPortal("/community/users",a,"PortalUser")};
t.prototype.toJSON=function(){throw new v("internal:not-yet-implemented","Portal.toJSON is not yet implemented");};t.prototype._fetchSelf=function(a,e){void 0===a&&(a=this.authMode);void 0===e&&(e=!1);var c=this.restUrl+"/portals/self";a={authMode:a,query:{culture:k.locale}};"auto"===a.authMode&&(a.authMode="no-prompt");e&&(a.query.default=!0);return this._request(c,a)};t.prototype._queryPortal=function(a,e,b){var d=this,m=function(b){return d._request(d.restUrl+a,e.toRequestOptions(d)).then(function(a){var c=
e.clone();c.start=a.nextStart;return new A({nextQueryParams:c,queryParams:e,total:a.total,results:x._resultsToTypedArray(b,{portal:d},a)})}).then(function(a){return c(a.results.map(function(e){return"function"===typeof e.when?e.when():a})).always(function(){return a})})};return b&&F[b]?F[b]().then(function(a){return m(a)}):m()};t.prototype._signIn=function(){var a=this;if(this.authMode===x.AUTH_MODE_ANONYMOUS)return r.reject(new v("portal:invalid-auth-mode",'Current "authMode"\' is "'+this.authMode+
'"'));if("failed"===this.loadStatus)return r.reject(this.loadError);var e=function(e){return r.resolve().then(function(){if("not-loaded"===a.loadStatus)return e||(a.authMode="immediate"),a.load().then(function(){return null});if("loading"===a.loadStatus)return a.load().then(function(){if(a.credential)return null;a.credential=e;return a._fetchSelf("immediate")});if(a.user&&a.credential===e)return null;a.credential=e;return a._fetchSelf("immediate")}).then(function(e){e&&a.read(e)})};return p.id?p.id.getCredential(this.restUrl).then(function(a){return e(a)}):
e(this.credential)};t.prototype._normalizeSSL=function(a){var e=this.allSSL;e||("isSecureContext"in z?e=z.isSecureContext:z.location&&z.location.origin&&(e=0===z.location.origin.indexOf("https:")));if(this.isPortal){var c=new h(a);return-1<this.portalHostname.toLowerCase().indexOf(c.host.toLowerCase())&&c.port&&"80"!==c.port&&"443"!==c.port?e?"https://"+c.host+(this.httpsPort&&443!==this.httpsPort?":"+this.httpsPort:"")+c.path+"?"+c.query:"http://"+c.host+(this.httpPort&&80!==this.httpPort?":"+this.httpPort:
"")+c.path+"?"+c.query:e?a.replace("http:","https:"):a}return e?a.replace("http:","https:"):a};t.prototype._normalizeUrl=function(a){var e=this.credential&&this.credential.token;return this._normalizeSSL(e?a+(-1<a.indexOf("?")?"\x26":"?")+"token\x3d"+e:a)};t.prototype._requestToTypedArray=function(a,e,d){var m=this,g=function(b){return m._request(a,e).then(function(a){var e=x._resultsToTypedArray(b,{portal:m},a);return c(e.map(function(e){return"function"===typeof e.when?e.when():a})).always(function(){return e})})};
return d?r.create(function(a){return b(["./"+d],a)}).then(function(a){return g(a)}):g()};t.prototype._request=function(a,e){var c=this.authMode===x.AUTH_MODE_ANONYMOUS?"anonymous":"auto",b=null,d="auto",m={f:"json"},g="json";e&&(e.authMode&&(c=e.authMode),e.body&&(b=e.body),e.method&&(d=e.method),e.query&&(m=q({},m,e.query)),e.responseType&&(g=e.responseType));e={authMode:c,body:b,callbackParamName:"callback",method:d,query:m,responseType:g,timeout:0};return u(this._normalizeSSL(a),e).then(function(a){return a.data})};
t._resultsToTypedArray=function(a,e,c){if(c){if(c=c.listings||c.notifications||c.userInvitations||c.tags||c.items||c.groups||c.comments||c.provisions||c.results||c.relatedItems||c,a||e)c=c.map(function(c){c=d.mixin(a?a.fromJSON(c):c,e);"function"===typeof c.load&&c.load();return c})}else c=[];return c};t.AUTH_MODE_ANONYMOUS="anonymous";t.AUTH_MODE_AUTO="auto";t.AUTH_MODE_IMMEDIATE="immediate";n([e.property()],t.prototype,"access",void 0);n([e.property()],t.prototype,"allSSL",void 0);n([e.property()],
t.prototype,"authMode",void 0);n([e.property()],t.prototype,"authorizedCrossOriginDomains",void 0);n([e.reader("authorizedCrossOriginDomains")],t.prototype,"readAuthorizedCrossOriginDomains",null);n([e.property()],t.prototype,"basemapGalleryGroupQuery",void 0);n([e.property()],t.prototype,"bingKey",void 0);n([e.property()],t.prototype,"canListApps",void 0);n([e.property()],t.prototype,"canListData",void 0);n([e.property()],t.prototype,"canListPreProvisionedItems",void 0);n([e.property()],t.prototype,
"canProvisionDirectPurchase",void 0);n([e.property()],t.prototype,"canSearchPublic",void 0);n([e.property()],t.prototype,"canShareBingPublic",void 0);n([e.property()],t.prototype,"canSharePublic",void 0);n([e.property()],t.prototype,"canSignInArcGIS",void 0);n([e.property()],t.prototype,"canSignInIDP",void 0);n([e.property()],t.prototype,"colorSetsGroupQuery",void 0);n([e.property()],t.prototype,"commentsEnabled",void 0);n([e.property({type:Date})],t.prototype,"created",void 0);n([e.property()],t.prototype,
"credential",void 0);n([e.property()],t.prototype,"culture",void 0);n([e.property()],t.prototype,"currentVersion",void 0);n([e.property()],t.prototype,"customBaseUrl",void 0);n([e.property()],t.prototype,"defaultBasemap",void 0);n([e.reader("defaultBasemap")],t.prototype,"readDefaultBasemap",null);n([e.property({type:w})],t.prototype,"defaultExtent",void 0);n([e.property()],t.prototype,"defaultVectorBasemap",void 0);n([e.reader("defaultVectorBasemap")],t.prototype,"readDefaultVectorBasemap",null);
n([e.property()],t.prototype,"description",void 0);n([e.property()],t.prototype,"eueiEnabled",void 0);n([e.property({dependsOn:["user","id","canSearchPublic"],readOnly:!0})],t.prototype,"extraQuery",null);n([e.property()],t.prototype,"featuredGroups",void 0);n([e.property()],t.prototype,"featuredItemsGroupQuery",void 0);n([e.property()],t.prototype,"galleryTemplatesGroupQuery",void 0);n([e.property()],t.prototype,"livingAtlasGroupQuery",void 0);n([e.property()],t.prototype,"hasCategorySchema",void 0);
n([e.property()],t.prototype,"helpBase",void 0);n([e.property()],t.prototype,"helperServices",void 0);n([e.property()],t.prototype,"helpMap",void 0);n([e.property()],t.prototype,"homePageFeaturedContent",void 0);n([e.property()],t.prototype,"homePageFeaturedContentCount",void 0);n([e.property()],t.prototype,"httpPort",void 0);n([e.property()],t.prototype,"httpsPort",void 0);n([e.property()],t.prototype,"id",void 0);n([e.property()],t.prototype,"ipCntryCode",void 0);n([e.property({dependsOn:["access"],
readOnly:!0})],t.prototype,"isOrganization",null);n([e.property()],t.prototype,"isPortal",void 0);n([e.property()],t.prototype,"layerTemplatesGroupQuery",void 0);n([e.property()],t.prototype,"maxTokenExpirationMinutes",void 0);n([e.property({type:Date})],t.prototype,"modified",void 0);n([e.property()],t.prototype,"name",void 0);n([e.property()],t.prototype,"portalHostname",void 0);n([e.property()],t.prototype,"portalMode",void 0);n([e.property()],t.prototype,"portalProperties",void 0);n([e.property()],
t.prototype,"region",void 0);n([e.property({dependsOn:["url"],readOnly:!0})],t.prototype,"restUrl",null);n([e.property()],t.prototype,"rotatorPanels",void 0);n([e.property()],t.prototype,"showHomePageDescription",void 0);n([e.property()],t.prototype,"staticImagesUrl",void 0);n([e.property()],t.prototype,"stylesGroupQuery",void 0);n([e.property()],t.prototype,"supportsHostedServices",void 0);n([e.property()],t.prototype,"symbolSetsGroupQuery",void 0);n([e.property()],t.prototype,"templatesGroupQuery",
void 0);n([e.property()],t.prototype,"thumbnail",void 0);n([e.property({dependsOn:["restUrl","thumbnail"],readOnly:!0})],t.prototype,"thumbnailUrl",null);n([e.property()],t.prototype,"units",void 0);n([e.property()],t.prototype,"url",void 0);n([e.property()],t.prototype,"urlKey",void 0);n([e.reader("urlKey")],t.prototype,"readUrlKey",null);n([e.property()],t.prototype,"user",void 0);n([e.reader("user")],t.prototype,"readUser",null);n([e.property()],t.prototype,"useStandardizedQuery",void 0);n([e.property()],
t.prototype,"useVectorBasemaps",void 0);n([e.property()],t.prototype,"vectorBasemapGalleryGroupQuery",void 0);n([l(1,e.cast(y))],t.prototype,"_queryPortal",null);return t=x=n([e.subclass("esri.portal.Portal")],t);var x}(e.declared(t,x))})},"esri/core/tsSupport/paramHelper":function(){define([],function(){return function(b,f){return function(q,g){f(q,g,b)}}})},"esri/portal/PortalQueryParams":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/_base/lang ../core/Accessor ../core/kebabDictionary ../core/lang ../core/accessorSupport/decorators ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p){var u=k({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});return function(b){function f(a){a=b.call(this)||this;a.categories=null;a.disableExtraQuery=!1;a.extent=null;a.num=10;a.query=null;a.sortField=null;a.start=1;return a}q(f,b);k=f;Object.defineProperty(f.prototype,"sortOrder",{get:function(){return this._get("sortOrder")||"asc"},set:function(a){"asc"!==a&&"desc"!==a||this._set("sortOrder",a)},enumerable:!0,configurable:!0});
f.prototype.clone=function(){return new k({categories:this.categories?d.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})};f.prototype.toRequestOptions=function(c,b){var d;this.categories&&(d=this.categories.map(function(a){return Array.isArray(a)?JSON.stringify(a):a}));var e;if(this.extent){var g=p.project(this.extent,a.WGS84);g&&(e=g.xmin+
","+g.ymin+","+g.xmax+","+g.ymax)}g=this.query;!this.disableExtraQuery&&c.extraQuery&&(g="("+g+")"+c.extraQuery);c={categories:d,bbox:e,q:g,num:this.num,sortField:null,sortOrder:null,start:this.start};this.sortField&&(c.sortField=u.toJSON(this.sortField),c.sortOrder=this.sortOrder);return{query:n.mixin(b,c)}};g([h.property()],f.prototype,"categories",void 0);g([h.property()],f.prototype,"disableExtraQuery",void 0);g([h.property({type:c})],f.prototype,"extent",void 0);g([h.property()],f.prototype,
"num",void 0);g([h.property()],f.prototype,"query",void 0);g([h.property()],f.prototype,"sortField",void 0);g([h.property()],f.prototype,"sortOrder",null);g([h.property()],f.prototype,"start",void 0);return f=k=g([h.subclass("esri.portal.PortalQueryParams")],f);var k}(h.declared(l))})},"esri/core/kebabDictionary":function(){define(["require","exports"],function(b,f){return function(b,g){void 0===g&&(g={});var f=g.ignoreUnknown||!1,l={},k;for(k in b)l[b[k]]=k;var d=function(c){return l.hasOwnProperty(c)?
l[c]:f?void 0:c},h=function(c){return b.hasOwnProperty(c)?b[c]:f?void 0:c};return{toJSON:d,fromJSON:h,read:function(c){return h(c)},write:function(c,a,b){c=d(c);void 0!==c&&(a[b]=c)}}}})},"esri/portal/PortalQueryResult":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(b,f,q,g,n,l){return function(b){function d(d){d=b.call(this)||this;d.nextQueryParams=null;d.queryParams=
null;d.results=null;d.total=null;return d}q(d,b);g([l.property()],d.prototype,"nextQueryParams",void 0);g([l.property()],d.prototype,"queryParams",void 0);g([l.property()],d.prototype,"results",void 0);g([l.property()],d.prototype,"total",void 0);return d=g([l.subclass("esri.portal.PortalQueryResult")],d)}(l.declared(n))})},"esri/portal/PortalUser":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/promise/all ../core/Error ../core/JSONSupport ../core/promiseUtils ../core/accessorSupport/decorators ./PortalFolder ./PortalGroup".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a){return function(p){function f(){var a=p.call(this)||this;a.access=null;a.created=null;a.culture=null;a.description=null;a.email=null;a.fullName=null;a.modified=null;a.orgId=null;a.portal=null;a.preferredView=null;a.privileges=null;a.region=null;a.role=null;a.roleId=null;a.units=null;a.username=null;a.userType=null;return a}q(f,p);Object.defineProperty(f.prototype,"thumbnailUrl",{get:function(){var a=this.url,c=this.thumbnail;return a&&c?this.portal._normalizeUrl(a+
"/info/"+c+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"userContentUrl",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username:null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/users/"+this.username:null},enumerable:!0,configurable:!0});f.prototype.addItem=function(a){var c=this,b=a&&a.item,d=a&&a.data;a=a&&a.folder;var g=
{method:"post"};b&&(g.query=b._getPostQuery(),null!=d&&("string"===typeof d?g.query.text=d:"object"===typeof d&&(g.query.text=JSON.stringify(d))));d=this.userContentUrl;a&&(d+="/"+a.id);return this.portal._request(d+"/addItem",g).then(function(a){b.id=a.id;b.portal=c.portal;return b.loaded?b._reload():b.load()})};f.prototype.deleteItem=function(a){var c=this.userContentUrl;a.ownerFolder&&(c+="/"+a.ownerFolder);return this.portal._request(c+("/items/"+a.id+"/delete"),{method:"post"}).then(function(){a.id=
null;a.portal=null})};f.prototype.deleteItems=function(a){var c=this.userContentUrl+"/deleteItems",b=a.map(function(a){return a.id});return b.length?(b={method:"post",query:{items:b.join(",")}},this.portal._request(c,b).then(function(){a.forEach(function(a){a.id=null;a.portal=null})})):d.resolve(void 0)};f.prototype.fetchFolders=function(){var a=this;return this.portal._request(this.userContentUrl,{query:{num:1}}).then(function(b){return b&&b.folders?b.folders.map(function(b){b=c.fromJSON(b);b.portal=
a.portal;return b}):[]})};f.prototype.fetchGroups=function(){var c=this;return this.portal._request(this.url).then(function(b){return b&&b.groups?b.groups.map(function(b){b=a.fromJSON(b);b.portal=c.portal;return b}):[]})};f.prototype.fetchItems=function(a){var c=this;a||(a={});var g=this.userContentUrl;a.folder&&(g+="/"+a.folder.id);var p;return d.create(function(a){return b(["./PortalItem"],a)}).then(function(b){p=b;return c.portal._request(g,{query:{folders:!1,num:a.num||10,start:a.start||1}})}).then(function(a){var b;
return a&&a.items?(b=a.items.map(function(a){a=p.fromJSON(a);a.portal=c.portal;return a}),n(b.map(function(a){return a.load()})).always(function(){return{items:b,nextStart:a.nextStart,total:a.total}})):{items:[],nextStart:-1,total:0}})};f.prototype.getThumbnailUrl=function(a){var c=this.thumbnailUrl;c&&a&&(c+="\x26w\x3d"+a);return c};f.prototype.queryFavorites=function(c){return this.favGroupId?(this._favGroup||(this._favGroup=new a({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(c)):
d.reject(new l("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))};f.prototype.toJSON=function(){throw new l("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};g([h.property()],f.prototype,"access",void 0);g([h.property({type:Date})],f.prototype,"created",void 0);g([h.property()],f.prototype,"culture",void 0);g([h.property()],f.prototype,"description",void 0);g([h.property()],f.prototype,"email",void 0);g([h.property()],f.prototype,"favGroupId",
void 0);g([h.property()],f.prototype,"fullName",void 0);g([h.property({type:Date})],f.prototype,"modified",void 0);g([h.property()],f.prototype,"orgId",void 0);g([h.property()],f.prototype,"portal",void 0);g([h.property()],f.prototype,"preferredView",void 0);g([h.property()],f.prototype,"privileges",void 0);g([h.property()],f.prototype,"region",void 0);g([h.property()],f.prototype,"role",void 0);g([h.property()],f.prototype,"roleId",void 0);g([h.property()],f.prototype,"thumbnail",void 0);g([h.property({dependsOn:["url",
"thumbnail","portal.credential.token"],readOnly:!0})],f.prototype,"thumbnailUrl",null);g([h.property()],f.prototype,"units",void 0);g([h.property({dependsOn:["portal.restUrl"],readOnly:!0})],f.prototype,"userContentUrl",null);g([h.property({dependsOn:["portal.restUrl"],readOnly:!0})],f.prototype,"url",null);g([h.property()],f.prototype,"username",void 0);g([h.property()],f.prototype,"userType",void 0);return f=g([h.subclass("esri.portal.PortalUser")],f)}(h.declared(k))})},"esri/portal/PortalFolder":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),
function(b,f,q,g,n,l,k){return function(b){function d(c){c=b.call(this)||this;c.created=null;c.id=null;c.portal=null;c.title=null;c.username=null;return c}q(d,b);Object.defineProperty(d.prototype,"url",{get:function(){var c=this.get("portal.restUrl");return c?c+"/content/users/"+this.username+"/"+this.id:null},enumerable:!0,configurable:!0});d.prototype.toJSON=function(){throw new n("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");};g([k.property({type:Date})],d.prototype,
"created",void 0);g([k.property()],d.prototype,"id",void 0);g([k.property()],d.prototype,"portal",void 0);g([k.property()],d.prototype,"title",void 0);g([k.property({dependsOn:["portal.restUrl"],readOnly:!0})],d.prototype,"url",null);g([k.property()],d.prototype,"username",void 0);return d=g([k.subclass("esri.portal.PortalFolder")],d)}(k.declared(l))})},"esri/portal/PortalGroup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators ./PortalQueryParams".split(" "),
function(b,f,q,g,n,l,k,d,h){return function(c){function a(a){a=c.call(this)||this;a.access=null;a.created=null;a.description=null;a.id=null;a.isInvitationOnly=!1;a.modified=null;a.owner=null;a.portal=null;a.snippet=null;a.sortField=null;a.sortOrder=null;a.tags=null;a.title=null;return a}q(a,c);Object.defineProperty(a.prototype,"thumbnailUrl",{get:function(){var a=this.url,c=this.thumbnail;return a&&c?this.portal._normalizeUrl(a+"/info/"+c+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/groups/"+this.id:null},enumerable:!0,configurable:!0});a.prototype.fetchCategorySchema=function(){var a=this;return this.portal._request(this.url+"/categorySchema").then(function(c){c=c.categorySchema||[];return c.some(function(a){return"contentCategorySetsGroupQuery.LivingAtlas"===a.source})?a._fetchCategorySchemaSet("LivingAtlas"):c})};a.prototype.fetchMembers=function(){return this.portal._request(this.url+"/users")};
a.prototype.getThumbnailUrl=function(a){var c=this.thumbnailUrl;c&&a&&(c+="\x26w\x3d"+a);return c};a.prototype.toJSON=function(){throw new l("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};a.prototype.queryItems=function(a){if(5<parseFloat(this.portal.currentVersion))return a=a||new h,this.portal._queryPortal("/content/groups/"+this.id+"/search",a,"PortalItem");a=a?a.clone():new h;a.query="group:"+this.id+(a.query?" "+a.query:"");return this.portal.queryItems(a)};a.prototype._fetchCategorySchemaSet=
function(a){var c=this;return this.portal._fetchSelf(this.portal.authMode,!0).then(function(a){if(a=a.contentCategorySetsGroupQuery){var b=new h;b.disableExtraQuery=!0;b.num=1;b.query=a;return c.portal.queryGroups(b)}throw new l("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(function(c){if(c.total){c=c.results[0];var b=new h;b.num=1;b.query='typekeywords:"'+a+'"';return c.queryItems(b)}throw new l("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");
}).then(function(a){return a.total?a.results[0].fetchData().then(function(a){return(a=a&&a.categorySchema)&&a.length?a:[]}):[]})};g([d.property()],a.prototype,"access",void 0);g([d.property({type:Date})],a.prototype,"created",void 0);g([d.property()],a.prototype,"description",void 0);g([d.property()],a.prototype,"id",void 0);g([d.property()],a.prototype,"isInvitationOnly",void 0);g([d.property({type:Date})],a.prototype,"modified",void 0);g([d.property()],a.prototype,"owner",void 0);g([d.property()],
a.prototype,"portal",void 0);g([d.property()],a.prototype,"snippet",void 0);g([d.property()],a.prototype,"sortField",void 0);g([d.property()],a.prototype,"sortOrder",void 0);g([d.property()],a.prototype,"tags",void 0);g([d.property()],a.prototype,"thumbnail",void 0);g([d.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],a.prototype,"thumbnailUrl",null);g([d.property()],a.prototype,"title",void 0);g([d.property({dependsOn:["portal.restUrl"],readOnly:!0})],a.prototype,
"url",null);g([n(0,d.cast(h))],a.prototype,"queryItems",null);return a=g([d.subclass("esri.portal.PortalGroup")],a)}(d.declared(k))})},"esri/portal/PortalItem":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/Extent ./Portal ./PortalRating".split(" "),function(b,f,q,g,n,l,k,d,h,c,a,p,u,v){return function(d){function f(a){a=
d.call(this)||this;a.access=null;a.accessInformation=null;a.applicationProxies=null;a.avgRating=null;a.categories=null;a.created=null;a.culture=null;a.description=null;a.extent=null;a.groupCategories=null;a.id=null;a.itemControl=null;a.licenseInfo=null;a.modified=null;a.name=null;a.numComments=null;a.numRatings=null;a.numViews=null;a.owner=null;a.portal=null;a.size=null;a.snippet=null;a.tags=null;a.title=null;a.type=null;a.typeKeywords=null;a.url=null;return a}q(f,d);l=f;Object.defineProperty(f.prototype,
"displayName",{get:function(){var a=this.type,c=this.typeKeywords||[],e=a;"Feature Service"===a||"Feature Collection"===a?e=-1<c.indexOf("Table")?"Table":-1<c.indexOf("Route Layer")?"Route Layer":-1<c.indexOf("Markup")?"Markup":"Feature Layer":"Image Service"===a?e=-1<c.indexOf("Elevation 3D Layer")?"Elevation Layer":"Imagery Layer":"Scene Service"===a?e="Scene Layer":"Scene Package"===a?e="Scene Layer Package":"Stream Service"===a?e="Feature Layer":"Geoprocessing Service"===a&&this.portal&&this.portal.isPortal?
e=-1<c.indexOf("Web Tool")?"Tool":"Geoprocessing Service":"Geocoding Service"===a?e="Locator":"Microsoft Powerpoint"===a?e="Microsoft PowerPoint":"GeoJson"===a?e="GeoJSON":"Globe Service"===a?e="Globe Layer":"Vector Tile Service"===a?e="Tile Layer":"netCDF"===a?e="NetCDF":"Map Service"===a?e=-1===c.indexOf("Spatiotemporal")&&(-1<c.indexOf("Hosted Service")||-1<c.indexOf("Tiled"))?"Tile Layer":"Map Image Layer":a&&-1<a.toLowerCase().indexOf("add in")?e=a.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===
a&&(e="Big Data File Share");return e},enumerable:!0,configurable:!0});f.prototype.readExtent=function(a){return a&&a.length?new p(a[0][0],a[0][1],a[1][0],a[1][1]):null};Object.defineProperty(f.prototype,"iconUrl",{get:function(){var a=this.type&&this.type.toLowerCase()||"",c=this.typeKeywords||[],e=!1,d=!1,g=!1,f=!1,p=!1;0<a.indexOf("service")||"feature collection"===a||"kml"===a||"wms"===a||"wmts"===a||"wfs"===a?(e=-1<c.indexOf("Hosted Service"),"feature service"===a||"feature collection"===a||
"kml"===a||"wfs"===a?(d=-1<c.indexOf("Table"),g=-1<c.indexOf("Route Layer"),f=-1<c.indexOf("Markup"),a=(p=-1!==c.indexOf("Spatiotemporal"))&&d?"spatiotemporaltable":d?"table":g?"routelayer":f?"markup":p?"spatiotemporal":e?"featureshosted":"features"):a="map service"===a||"wms"===a||"wmts"===a?e||-1<c.indexOf("Tiled")||"wmts"===a?"maptiles":"mapimages":"scene service"===a?-1<c.indexOf("Line")?"sceneweblayerline":-1<c.indexOf("3DObject")?"sceneweblayermultipatch":-1<c.indexOf("Point")?"sceneweblayerpoint":
-1<c.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<c.indexOf("PointCloud")?"sceneweblayerpointcloud":-1<c.indexOf("Polygon")?"sceneweblayerpolygon":"sceneweblayer":"image service"===a?-1<c.indexOf("Elevation 3D Layer")?"elevationlayer":"imagery":"stream service"===a?"streamlayer":"vector tile service"===a?"vectortile":"datastore catalog service"===a?"datastorecollection":"geocoding service"===a?"geocodeservice":"geoprocessing service"===a?-1<c.indexOf("Web Tool")&&this.portal&&this.portal.isPortal?
"tool":"layers":"layers"):a="web map"===a||"cityengine web scene"===a?"maps":"web scene"===a?-1<c.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===a||"mobile application"===a||"application"===a||"operation view"===a||"desktop application"===a?"apps":"map document"===a||"map package"===a||"published map"===a||"scene document"===a||"globe document"===a||"basemap package"===a||"mobile basemap package"===a||"mobile map package"===a||"project package"===a||"project template"===
a||"pro map"===a||"layout"===a||"layer"===a&&-1<c.indexOf("ArcGIS Pro")||"explorer map"===a&&c.indexOf("Explorer Document")?"mapsgray":"service definition"===a||"csv"===a||"shapefile"===a||"cad drawing"===a||"geojson"===a||"360 vr experience"===a||"netCDF"===a?"datafiles":"explorer add in"===a||"desktop add in"===a||"windows viewer add in"===a||"windows viewer configuration"===a?"appsgray":"arcgis pro add in"===a||"arcgis pro configuration"===a?"addindesktop":"rule package"===a||"file geodatabase"===
a||"sqlite geodatabase"===a||"csv collection"===a||"kml collection"===a||"windows mobile package"===a||"map template"===a||"desktop application template"===a||"arcpad package"===a||"code sample"===a||"form"===a||"document link"===a||"operations dashboard add in"===a||"rules package"===a||"image"===a||"workflow manager package"===a||"explorer map"===a&&-1<c.indexOf("Explorer Mapping Application")||-1<c.indexOf("Document")?"datafilesgray":"network analysis service"===a||"geoprocessing service"===a||
"geodata service"===a||"geometry service"===a||"geoprocessing package"===a||"locator package"===a||"geoprocessing sample"===a||"workflow manager service"===a?"toolsgray":"layer"===a||"layer package"===a||"explorer layer"===a?"layersgray":"scene package"===a?"scenepackage":"tile package"===a?"tilepackage":"task file"===a?"taskfile":"report template"===a?"report-template":"statistical data collection"===a?"statisticaldatacollection":"insights workbook"===a?"workbook":"insights model"===a?"insightsmodel":
"insights page"===a?"insightspage":"hub initiative"===a?"hubinitiative":"hubpage"===a?"hubpage":"hub site application"===a?"hubsite":"relational database connection"===a?"relationaldatabaseconnection":"big data file share"===a?"datastorecollection":"image collection"===a?"imagecollection":"style"===a?"style":"desktop style"===a?"desktopstyle":"dashboard"===a?"dashboard":"raster function template"===a?"rasterprocessingtemplate":"vector tile package"===a?"vectortilepackage":"ortho mapping project"===
a?"orthomappingproject":"ortho mapping template"===a?"orthomappingtemplate":"maps";return a?b.toUrl("../images/portal/"+a+"16.png"):null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"isLayer",{get:function(){return-1<"Map Service;Feature Service;Feature Collection;Scene Service;Image Service;Stream Service;Vector Tile Service;WMTS;WMS".split(";").indexOf(this.type)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"itemUrl",{get:function(){var a=this.get("portal.restUrl");
return a?a+"/content/items/"+this.id:null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"thumbnailUrl",{get:function(){var a=this.itemUrl,c=this.thumbnail;return a&&c?this.portal._normalizeUrl(a+"/info/"+c+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"userItemUrl",{get:function(){var a=this.get("portal.restUrl");if(!a)return null;var c=this.owner||this.get("portal.user.username");return c?a+"/content/users/"+(this.ownerFolder?c+"/"+this.ownerFolder:
c)+"/items/"+this.id:null},enumerable:!0,configurable:!0});f.prototype.load=function(){var a=this;this.portal||(this.portal=u.getDefault());var c=this.portal.load().then(function(){return a.resourceInfo?a.resourceInfo:a.id&&a.itemUrl?a.portal._request(a.itemUrl):{}}).then(function(e){a.resourceInfo=e;a.read(e)});this.addResolvingPromise(c);return this.when()};f.prototype.addRating=function(a){var c={method:"post",query:{}};a instanceof v&&(a=a.rating);isNaN(a)||"number"!==typeof a||(c.query.rating=
a);return this.portal._request(this.itemUrl+"/addRating",c).then(function(){return new v({rating:a,created:new Date})})};f.prototype.deleteRating=function(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(function(){})};f.prototype.fetchData=function(a){void 0===a&&(a="json");return this.portal._request(this.itemUrl+"/data",{responseType:a})};f.prototype.fetchRating=function(){return this.portal._request(this.itemUrl+"/rating").then(function(a){return null!=a.rating?
(a.created=new Date(a.created),new v(a)):null})};f.prototype.fetchRelatedItems=function(a){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:a},"PortalItem")};f.prototype.getThumbnailUrl=function(a){var c=this.thumbnailUrl;c&&a&&(c+="\x26w\x3d"+a);return c};f.prototype.update=function(a){var c=this;return this.id?this.load().then(function(){return c.portal._signIn()}).then(function(){var e=a&&a.data,b={method:"post"};b.query=c._getPostQuery();for(var d in b.query)null===
b.query[d]&&(b.query[d]="");b.query.clearEmptyFields=!0;null!=e&&("string"===typeof e?b.query.text=e:"object"===typeof e&&(b.query.text=JSON.stringify(e)));return c.portal._request(c.userItemUrl+"/update",b).then(function(){return c._reload()})}):h.reject(new n("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))};f.prototype.updateThumbnail=function(a){var b=this;return this.id?this.load().then(function(){return b.portal._signIn()}).then(function(){var e=a.thumbnail,
d={method:"post"};if("string"===typeof e)c.isDataProtocol(e)?d.query={data:e}:d.query={url:c.makeAbsolute(e)};else{var m=new FormData;m.append("file",e);d.body=m}return b.portal._request(b.userItemUrl+"/updateThumbnail",d).then(function(){return b._reload()})}):h.reject(new n("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))};f.prototype.toJSON=function(){var a=this.extent,a={created:this.created&&this.created.getTime(),description:this.description,extent:a&&[[a.xmin,
a.ymin],[a.xmax,a.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return k.fixJson(a)};f.fromJSON=function(a){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");return new l({resourceInfo:a})};f.prototype._reload=function(){var a=this;return this.portal._request(this.itemUrl,
{query:{_ts:(new Date).getTime()}}).then(function(c){a.resourceInfo=c;a.read(c);return a})};f.prototype._getPostQuery=function(){var a=this.toJSON(),c;for(c in a)"tags"===c&&null!==a[c]&&(a[c]=a[c].join(", ")),"typeKeywords"===c&&null!==a[c]&&(a[c]=a[c].join(", "));return a};g([a.property()],f.prototype,"access",void 0);g([a.property()],f.prototype,"accessInformation",void 0);g([a.property({json:{read:{source:"appProxies"}}})],f.prototype,"applicationProxies",void 0);g([a.property()],f.prototype,
"avgRating",void 0);g([a.property()],f.prototype,"categories",void 0);g([a.property({type:Date})],f.prototype,"created",void 0);g([a.property()],f.prototype,"culture",void 0);g([a.property()],f.prototype,"description",void 0);g([a.property({dependsOn:["type","typeKeywords"],readOnly:!0})],f.prototype,"displayName",null);g([a.property({type:p})],f.prototype,"extent",void 0);g([a.reader("extent")],f.prototype,"readExtent",null);g([a.property()],f.prototype,"groupCategories",void 0);g([a.property({dependsOn:["type",
"typeKeywords"],readOnly:!0})],f.prototype,"iconUrl",null);g([a.property()],f.prototype,"id",void 0);g([a.property({dependsOn:["type"],readOnly:!0})],f.prototype,"isLayer",null);g([a.property()],f.prototype,"itemControl",void 0);g([a.property({dependsOn:["portal.restUrl","id"],readOnly:!0})],f.prototype,"itemUrl",null);g([a.property()],f.prototype,"licenseInfo",void 0);g([a.property({type:Date})],f.prototype,"modified",void 0);g([a.property()],f.prototype,"name",void 0);g([a.property()],f.prototype,
"numComments",void 0);g([a.property()],f.prototype,"numRatings",void 0);g([a.property()],f.prototype,"numViews",void 0);g([a.property()],f.prototype,"owner",void 0);g([a.property()],f.prototype,"ownerFolder",void 0);g([a.property({type:u})],f.prototype,"portal",void 0);g([a.property()],f.prototype,"resourceInfo",void 0);g([a.property()],f.prototype,"size",void 0);g([a.property()],f.prototype,"snippet",void 0);g([a.property()],f.prototype,"tags",void 0);g([a.property()],f.prototype,"thumbnail",void 0);
g([a.property({dependsOn:["itemUrl","thumbnail","portal.credential.token"],readOnly:!0})],f.prototype,"thumbnailUrl",null);g([a.property()],f.prototype,"title",void 0);g([a.property()],f.prototype,"type",void 0);g([a.property()],f.prototype,"typeKeywords",void 0);g([a.property()],f.prototype,"url",void 0);g([a.property({dependsOn:["portal.restUrl","portal.user.username","owner","ownerFolder","id"],readOnly:!0})],f.prototype,"userItemUrl",null);return f=l=g([a.subclass("esri.portal.PortalItem")],f);
var l}(a.declared(l,d))})},"esri/portal/PortalRating":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(b,f,q,g,n,l){return function(b){function d(d){d=b.call(this)||this;d.created=null;d.rating=null;return d}q(d,b);g([l.property()],d.prototype,"created",void 0);g([l.property()],d.prototype,"rating",void 0);return d=g([l.subclass("esri.portal.PortalRating")],d)}(l.declared(n))})},
"esri/support/basemapDefinitions":function(){define(["require","exports","dojo/i18n!../nls/basemaps"],function(b,f,q){return{streets:{id:"streets",title:q.streets,thumbnailUrl:b.toUrl("../images/basemap/streets.jpg"),baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",title:q.satellite,thumbnailUrl:b.toUrl("../images/basemap/satellite.jpg"),
baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",title:q.hybrid,thumbnailUrl:b.toUrl("../images/basemap/hybrid.jpg"),baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,
visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",title:q.terrain,thumbnailUrl:b.toUrl("../images/basemap/terrain.jpg"),baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",title:q.topo,thumbnailUrl:b.toUrl("../images/basemap/topo.jpg"),baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",title:q.gray,thumbnailUrl:b.toUrl("../images/basemap/gray.jpg"),baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",title:q["dark-gray"],thumbnailUrl:b.toUrl("../images/basemap/dark-gray.jpg"),baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",title:q.oceans,thumbnailUrl:b.toUrl("../images/basemap/oceans.jpg"),baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",
showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",title:q["national-geographic"],thumbnailUrl:b.toUrl("../images/basemap/national-geographic.jpg"),baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",
title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",title:q.osm,thumbnailUrl:b.toUrl("../images/basemap/osm.jpg"),baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",title:q["dark-gray"],thumbnailUrl:b.toUrl("../images/basemap/dark-gray.jpg"),baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/c11ce4f7801740b2905eb03ddc963ac8/resources/styles/root.json",
layerType:"VectorTileLayer",title:"World Dark Gray",visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",title:q.gray,thumbnailUrl:b.toUrl("../images/basemap/gray.jpg"),baseMapLayers:[{id:"gray-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/8a2cba3b0ebf4140b7c0dc5ee149549a/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Light Gray",visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",title:q.streets,thumbnailUrl:b.toUrl("../images/basemap/streets.jpg"),
baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",title:q.topo,thumbnailUrl:b.toUrl("../images/basemap/topo.jpg"),baseMapLayers:[{id:"topo-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",
title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",title:q["streets-night-vector"],thumbnailUrl:b.toUrl("../images/basemap/streets-night.jpg"),baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",title:q["streets-relief-vector"],
thumbnailUrl:b.toUrl("../images/basemap/streets-relief.jpg"),baseMapLayers:[{id:"streets-relief-vector-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Streets Relief Base",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-reference-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief Reference",
layerType:"VectorTileLayer",showLegend:!1,visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",title:q["streets-navigation-vector"],thumbnailUrl:b.toUrl("../images/basemap/streets-navigation.jpg"),baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]}}})},"esri/Ground":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./Color ./core/Collection ./core/collectionUtils ./core/Error ./core/JSONSupport ./core/Loadable ./core/Logger ./core/promiseUtils ./core/accessorSupport/decorators ./layers/Layer ./layers/support/types ./webdoc/support/opacityUtils".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z,t,x){var r=k.ofType(z),m=p.getLogger("esri.Ground");return function(a){function e(e){var c=a.call(this)||this;c.opacity=1;c.surfaceDefaultColor=null;c.layers=new r;c.layers.on("after-add",function(a){a=a.item;a.parent&&a.parent!==c&&"remove"in a.parent&&a.parent.remove(a);a.parent=c;t.isOfType(a,["elevation","base-elevation"])||m.error("Layer '"+a.title+", id:"+a.id+"' of type '"+a.type+"' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.")});
c.layers.on("after-remove",function(a){a.item.parent=null});return c}g(e,a);c=e;e.prototype.initialize=function(){this.when().catch(function(a){m.error("#load()","Failed to load ground",a)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)};e.prototype.normalizeCtorArgs=function(a){a&&"resourceInfo"in a&&(this._set("resourceInfo",a.resourceInfo),a=q({},a),delete a.resourceInfo);return a};Object.defineProperty(e.prototype,"layers",{set:function(a){this._set("layers",d.referenceSetter(a,
this._get("layers"),r))},enumerable:!0,configurable:!0});e.prototype.writeLayers=function(a,e,c,b){var d=[];a&&(b=q({},b,{layerContainerType:"ground"}),a.forEach(function(a){if(a.write){var e={};a.write(e,b)&&d.push(e)}else b&&b.messages&&b.messages.push(new h("layer:unsupported","Layers ("+a.title+", "+a.id+") of type '"+a.declaredClass+"' cannot be persisted in the ground",{layer:a}))}));e.layers=d};e.prototype.load=function(){this.addResolvingPromise(this._loadFromSource());return this.when()};
e.prototype.queryElevation=function(a,e){var c=this;return u.create(function(a){return b(["./layers/support/ElevationQuery"],a)}).then(function(b){b=new b.ElevationQuery;var d=c.layers.filter(function(a){return"elevation"===a.type}).toArray();return b.queryAll(d,a,e)})};e.prototype.createElevationSampler=function(a,e){var c=this;return u.create(function(a){return b(["./layers/support/ElevationQuery"],a)}).then(function(b){b=new b.ElevationQuery;var d=c.layers.filter(function(a){return"elevation"===
a.type}).toArray();return b.createSamplerAll(d,a,e)})};e.prototype.clone=function(){var a={resourceInfo:this.resourceInfo,opacity:this.opacity,layers:this.layers.slice()};this.loaded&&(a.loadStatus="loaded");return new c(a)};e.prototype.read=function(a,e){this.resourceInfo||this._set("resourceInfo",{data:a,context:e});return this.inherited(arguments)};e.prototype._loadFromSource=function(){var a=this.resourceInfo;return a?this._loadLayersFromJSON(a.data,a.context):u.resolve(null)};e.prototype._loadLayersFromJSON=
function(a,e){var c=this,d=e&&e.origin||"web-scene",m=e&&e.portal||null,g=e&&e.url||null;return u.create(function(a){return b(["./portal/support/layersCreator"],a)}).then(function(e){var b=[];a.layers&&Array.isArray(a.layers)&&b.push.apply(b,e.populateOperationalLayers(c.layers,a.layers,{context:{origin:d,url:g,portal:m,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));return u.eachAlways(b)}).then(function(){})};n([v.property({type:r,json:{read:!1}}),v.cast(d.castForReferenceSetter)],
e.prototype,"layers",null);n([v.writer("layers")],e.prototype,"writeLayers",null);n([v.property({readOnly:!0})],e.prototype,"resourceInfo",void 0);n([v.property({type:Number,json:{read:{reader:x.transparencyToOpacity,source:"transparency"},write:{enabled:!1,writer:function(a,e){e.transparency=x.opacityToTransparency(a)},target:"transparency"}}})],e.prototype,"opacity",void 0);n([v.property({type:l,json:{write:!1}})],e.prototype,"surfaceDefaultColor",void 0);return e=c=n([v.subclass("esri.Ground")],
e);var c}(v.declared(c,a))})},"esri/Color":function(){define(["./core/declare","./core/accessorSupport/ensureType","dojo/colors"],function(b,f,q){function g(b){return Math.max(0,Math.min(f.ensureInteger(b),255))}var n=b([q],{declaredClass:"esri.Color",toJSON:function(){return[g(this.r),g(this.g),g(this.b),1<this.a?this.a:g(255*this.a)]},clone:function(){return new n(this.toRgba())}});n.toJSON=function(b){return b&&[g(b.r),g(b.g),g(b.b),1<b.a?b.a:g(255*b.a)]};n.fromJSON=function(b){return b&&new n([b[0],
b[1],b[2],b[3]/255])};n.toUnitRGB=function(b){return[b.r/255,b.g/255,b.b/255]};n.toUnitRGBA=function(b){return[b.r/255,b.g/255,b.b/255,null!=b.a?b.a:1]};var l="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(b=0;b<l.length;b++)n[l[b]]=q[l[b]];n.named.rebeccapurple=[102,51,153];return n})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(b,f,q,g){var n={};f.setObject("dojo.colors",n);var l=function(b,g,c){0>c&&++c;1<c&&
--c;var a=6*c;return 1>a?b+(g-b)*a:1>2*c?g:2>3*c?b+(g-b)*(2/3-c)*6:b};b.colorFromRgb=q.fromRgb=function(b,f){var c=b.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(c){b=c[2].split(/\s*,\s*/);var a=b.length,c=c[1];if("rgb"==c&&3==a||"rgba"==c&&4==a)return c=b[0],"%"==c.charAt(c.length-1)?(c=g.map(b,function(a){return 2.56*parseFloat(a)}),4==a&&(c[3]=b[3]),q.fromArray(c,f)):q.fromArray(b,f);if("hsl"==c&&3==a||"hsla"==c&&4==a){var c=(parseFloat(b[0])%360+360)%360/360,d=parseFloat(b[1])/
100,h=parseFloat(b[2])/100,d=.5>=h?h*(d+1):h+d-h*d,h=2*h-d,c=[256*l(h,d,c+1/3),256*l(h,d,c),256*l(h,d,c-1/3),1];4==a&&(c[3]=b[3]);return q.fromArray(c,f)}}return null};var k=function(b,g,c){b=Number(b);return isNaN(b)?c:b<g?g:b>c?c:b};q.prototype.sanitize=function(){this.r=Math.round(k(this.r,0,255));this.g=Math.round(k(this.g,0,255));this.b=Math.round(k(this.b,0,255));this.a=k(this.a,0,1);return this};n.makeGrey=q.makeGrey=function(b,g){return q.fromArray([b,b,b,g])};f.mixin(q.named,{aliceblue:[240,
248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,
0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],
forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,
211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,
250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,
221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,
245,245],yellowgreen:[154,205,50]});return q})},"esri/layers/support/types":function(){define(["require","exports"],function(b,f){Object.defineProperty(f,"__esModule",{value:!0});f.isOfType=function(b,g){b=b.constructor._meta;if(!b||!b.bases)return!1;b=b.bases;var f=Array.isArray(g);return b.some(function(b){b=b.__accessorMetadata__;if(!b)return!1;b=b.properties;if(!b||!b.type||!b.type.value)return!1;b=b.type.value;return f?-1!==g.indexOf(b):b===g})}})},"esri/webdoc/support/opacityUtils":function(){define(["require",
"exports","../../core/accessorSupport/ensureType"],function(b,f,q){Object.defineProperty(f,"__esModule",{value:!0});f.opacityToTransparency=function(b){b=q.ensureInteger(100*(1-b));return Math.max(0,Math.min(b,100))};f.transparencyToOpacity=function(b){return Math.max(0,Math.min(1-b/100,1))}})},"esri/core/CollectionFlattener":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Collection ./Handles ./accessorSupport/decorators".split(" "),function(b,f,q,
g,n,l,k){return function(b){function d(c){c=b.call(this)||this;c._handles=new l;c.root=null;c.refresh=c.refresh.bind(c);c.updateCollections=c.updateCollections.bind(c);return c}q(d,b);d.prototype.initialize=function(){var c=this;this._handles.add(this.rootCollectionNames.map(function(a){return c.watch("root."+a,c.updateCollections,!0)}));this.updateCollections()};d.prototype.destroy=function(){this.root=null;this.refresh();this._handles.destroy();this._handles=null};d.prototype.updateCollections=
function(){var c=this;this._collections=this.rootCollectionNames.map(function(a){return c.get("root."+a)}).filter(function(a){return null!=a});this.refresh()};d.prototype.refresh=function(){var c=this._handles;c.remove("collections");this.removeAll();for(var a=this._collections.slice(),b=0,d=this._collections;b<d.length;b++)this._processCollection(a,this,d[b]);for(b=0;b<a.length;b++)c.add(a[b].on("after-changes",this.refresh),"collections")};d.prototype._createNewInstance=function(c){return new n(c)};
d.prototype._processCollection=function(c,a,b){var d=this;b&&(c.push(b),b.forEach(function(b){b&&(a.push(b),d._processCollection(c,a,d.getChildrenFunction(b)))}))};g([k.property()],d.prototype,"rootCollectionNames",void 0);g([k.property()],d.prototype,"root",void 0);g([k.property()],d.prototype,"getChildrenFunction",void 0);return d=g([k.subclass("esri.core.CollectionFlattener")],d)}(k.declared(n))})},"esri/core/Handles":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Collection ./accessorSupport/decorators".split(" "),
function(b,f,q,g,n,l,k){return function(b){function d(c){c=b.call(this)||this;c._groups=new Map;return c}q(d,b);d.prototype.destroy=function(){this.removeAll()};Object.defineProperty(d.prototype,"size",{get:function(){var c=0;this._groups.forEach(function(a){c+=a.length});return c},enumerable:!0,configurable:!0});d.prototype.add=function(c,a){if(!this._isHandle(c)&&!Array.isArray(c)&&!l.isCollection(c))return this;var b=this._getOrCreateGroup(a);Array.isArray(c)||l.isCollection(c)?c.forEach(function(a){return b.push(a)}):
b.push(c);this.notifyChange("size");return this};d.prototype.has=function(c){return this._groups.has(this._ensureGroupKey(c))};d.prototype.remove=function(c){if(Array.isArray(c)||l.isCollection(c))return c.forEach(this.remove,this),this;if(!this.has(c))return this;for(var a=this._getGroup(c),b=0;b<a.length;b++)a[b].remove();this._deleteGroup(c);this.notifyChange("size");return this};d.prototype.removeAll=function(){this._groups.forEach(function(c){for(var a=0;a<c.length;a++)c[a].remove()});this._groups.clear();
this.notifyChange("size");return this};d.prototype._isHandle=function(c){return c&&!!c.remove};d.prototype._getOrCreateGroup=function(c){if(this.has(c))return this._getGroup(c);var a=[];this._groups.set(this._ensureGroupKey(c),a);return a};d.prototype._getGroup=function(c){return this._groups.get(this._ensureGroupKey(c))};d.prototype._deleteGroup=function(c){return this._groups.delete(this._ensureGroupKey(c))};d.prototype._ensureGroupKey=function(c){return c||"_default_"};g([k.property({readOnly:!0})],
d.prototype,"size",null);return d=g([k.subclass("esri.core.Handles")],d)}(k.declared(n))})},"esri/support/basemapUtils":function(){define("require exports ../Basemap ../core/Collection ../core/Logger ../core/urlUtils ../core/accessorSupport/ensureType ./basemapDefinitions".split(" "),function(b,f,q,g,n,l,k,d){function h(a,c){var e;if("string"===typeof a){if(!(a in d))return c=Object.keys(d).map(function(a){return'"'+a+'"'}).join(", "),m.warn("Unable to find basemap definition for: "+a+". Try one of these: "+
c),null;c&&(e=c[a]);e||(e=q.fromId(a),c&&(c[a]=e))}else e=k.default(q,a);return e}function c(a,c){return a.map(function(a){return c.find(function(e){var c=u(a);e=u(e);return c.type===e.type&&c.url===e.url})||a})}function a(a){return a?!a.loaded&&a.resourceInfo?v(a.resourceInfo.data):{baseLayers:p(a.baseLayers),referenceLayers:p(a.referenceLayers)}:null}function p(a){return(g.isCollection(a)?a.toArray():a).map(u)}function u(a){return{type:a.type,url:r(a.urlTemplate||a.url||a.styleUrl)}}function v(a){return a?
{baseLayers:z(a.baseMapLayers.filter(function(a){return!a.isReference})),referenceLayers:z(a.baseMapLayers.filter(function(a){return a.isReference}))}:null}function z(a){return a.map(function(a){var e;switch(a.layerType){case "VectorTileLayer":e="vector-tile";break;case "ArcGISTiledMapServiceLayer":e="tile";break;default:e="unknown"}return{type:e,url:r(a.templateUrl||a.urlTemplate||a.styleUrl||a.url)}})}function t(a,c,b){return null!=a!==(null!=c)?"not-equal":a?x(a.baseLayers,c.baseLayers)?x(a.referenceLayers,
c.referenceLayers)?"equal":b.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function x(a,c){return a.length!==c.length?!1:!a.some(function(a){return!c.some(function(e){return a.type===e.type&&a.url===e.url})})}function r(a){return a?l.normalize(a).replace(/^\s*https?:/i,"").toLowerCase():""}Object.defineProperty(f,"__esModule",{value:!0});var m=n.getLogger("esri.support.basemapUtils");f.createCache=function(){return{}};f.ensureType=h;f.clonePreservingTiledLayers=function(a,
b){void 0===b&&(b=null);a=h(a);if(!a)return null;var e=new q({id:a.id,title:a.title,baseLayers:a.baseLayers.slice(),referenceLayers:a.referenceLayers.slice()});b&&(e.baseLayers=c(e.baseLayers,b.baseLayers),e.referenceLayers=c(e.referenceLayers,b.referenceLayers));e.load();e.portalItem=a.portalItem;return e};f.getWellKnownBasemapId=function(e){var c=null;e=a(e);for(var b in d){var m=v(d[b]),m=t(e,m,{mustMatchReferences:!1});if("equal"===m){c=b;break}else"base-layers-equal"===m&&(c=b)}return c};f.contentEquals=
function(e,c){if(e===c)return!0;e=a(e);c=a(c);return"equal"===t(e,c,{mustMatchReferences:!0})}})},"esri/support/groundUtils":function(){define("require exports ../Ground ../core/Logger ../core/accessorSupport/ensureType ../layers/ElevationLayer".split(" "),function(b,f,q,g,n,l){Object.defineProperty(f,"__esModule",{value:!0});var k=g.getLogger("esri.support.groundUtils");f.groundElevationLayers={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"}};
f.ensureType=function(b){var d;"string"===typeof b?b in f.groundElevationLayers?(b=f.groundElevationLayers[b],b=new l({id:b.id,url:b.url}),d=new q({layers:[b]})):k.warn("Unable to find ground definition for: "+b+'. Try "world-elevation"'):d=n.default(q,b);return d}})},"esri/layers/ElevationLayer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/_base/kernel ../request ../core/Error ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/HeightModelInfo ./TiledLayer ./mixins/ArcGISCachedService ./mixins/ArcGISMapService ./mixins/OperationalLayer ./mixins/PortalLayer ./support/rasterFormats/LercCodec".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z,t,x,r){return function(m){function e(a){a=m.call(this)||this;a.heightModelInfo=null;a.type="elevation";a.url=null;a.opacity=1;a.operationalLayerType="ArcGISTiledElevationServiceLayer";return a}g(e,m);e.prototype.normalizeCtorArgs=function(a,e){return"string"===typeof a?q({url:a},e):a};Object.defineProperty(e.prototype,"minScale",{get:function(){},set:function(a){l.deprecated(this.declaredClass+".minScale support has been removed.","","4.5")},enumerable:!0,configurable:!0});
Object.defineProperty(e.prototype,"maxScale",{get:function(){},set:function(a){l.deprecated(this.declaredClass+".maxScale support has been removed.","","4.5")},enumerable:!0,configurable:!0});e.prototype.load=function(){var a=this;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:function(a){for(var e=0;e<a.typeKeywords.length;e++)if("elevation 3d layer"===a.typeKeywords[e].toLowerCase())return!0;throw new d("portal:invalid-layer-item-type",
"Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"});}}).always(function(){return a._fetchImageService()}));return this.when()};e.prototype.fetchTile=function(a,e,c,b){var d=this;void 0===b&&(b=0);return this.load().then(function(){return d._fetchTileAvailability(a,e,c)}).then(function(){var b=d.getTileUrl(a,e,c);return k(b,{responseType:"array-buffer",failOk:!0})}).then(function(a){a=r.decode(a.data,{noDataValue:b,
returnFileInfo:!0});return{values:a.pixelData,width:a.width,height:a.height,maxZError:a.fileInfo.maxZError,noDataValue:a.noDataValue}})};e.prototype.queryElevation=function(a,e){var c=this;return h.create(function(a){return b(["./support/ElevationQuery"],a)}).then(function(b){return(new b.ElevationQuery).query(c,a,e)})};e.prototype.createElevationSampler=function(a,e){var c=this;return h.create(function(a){return b(["./support/ElevationQuery"],a)}).then(function(b){return(new b.ElevationQuery).createSampler(c,
a,e)})};e.prototype.importLayerViewModule=function(a){switch(a.type){case "2d":return h.reject(new d("elevation-layer:view-not-supported","ElevationLayer is only supported in 3D"));case "3d":return h.create(function(a){return b(["../views/3d/layers/ElevationLayerView3D"],a)})}};e.prototype._fetchTileAvailability=function(a,e,c){return this.tilemapCache?this.tilemapCache.fetchAvailability(a,e,c):h.resolve("unknown")};e.prototype._fetchImageService=function(){var a=this;return h.resolve().then(function(){if(a.resourceInfo)return a.resourceInfo;
var e={query:q({f:"json"},a.parsedUrl.query),responseType:"json",callbackParamName:"callback"};return k(a.parsedUrl.path,e)}).then(function(e){e.ssl&&(a.url=a.url.replace(/^http:/i,"https:"));a.read(e.data,{origin:"service",url:a.parsedUrl})})};n([a.property({readOnly:!0,type:p})],e.prototype,"heightModelInfo",void 0);n([a.property({json:{read:!1,write:!1}})],e.prototype,"minScale",null);n([a.property({json:{read:!1,write:!1}})],e.prototype,"maxScale",null);n([a.property()],e.prototype,"resourceInfo",
void 0);n([a.property({json:{read:!1},value:"elevation",readOnly:!0})],e.prototype,"type",void 0);n([a.property({json:{origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writer:c.writeOperationalLayerUrl}}}}})],e.prototype,"url",void 0);n([a.property({json:{read:!1,write:!1}})],e.prototype,"opacity",void 0);n([a.property()],e.prototype,"operationalLayerType",void 0);return e=n([a.subclass("esri.layers.ElevationLayer")],e)}(a.declared(u,z,v,t,x))})},"esri/geometry/HeightModelInfo":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/kebabDictionary ../core/Warning ../core/accessorSupport/decorators ./support/scaleUtils".split(" "),
function(b,f,q,g,n,l,k,d,h,c){function a(a,c){return new d("height-unit:unsupported","Height unit of value '"+a+"' is not supported",c)}function p(a,c){return new d("height-model:unsupported","Height model of value '"+a+"' is not supported",c)}var u=k({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"},{ignoreUnknown:!0}),v=k({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links",
"sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"},{ignoreUnknown:!0});return function(b){function d(a){a=b.call(this)||this;a.heightModel="gravity-related-height";a.heightUnit="meters";a.vertCRS=
null;return a}g(d,b);f=d;d.prototype.writeHeightModel=function(a,c,e){return u.write(a,c,e)};d.prototype.readHeightModel=function(a,c,e){if(c=u.read(a))return c;e&&e.messages&&e.messages.push(p(a,{context:e}));return null};d.prototype.readHeightUnit=function(c,b,e){if(b=v.read(c))return b;e&&e.messages&&e.messages.push(a(c,{context:e}));return null};d.prototype.readHeightUnitService=function(b,d,e){if(d=c.unitFromRESTJSON(b)||v.read(b))return d;e&&e.messages&&e.messages.push(a(b,{context:e}));return null};
d.prototype.readVertCRS=function(a,c){return c.vertCRS||c.ellipsoid||c.geoid};d.prototype.clone=function(){return new f({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})};d.prototype.equals=function(a){return a?this===a?!0:this.heightModel===a.heightModel&&this.heightUnit===a.heightUnit&&this.vertCRS===a.vertCRS:!1};d.deriveUnitFromSR=function(a,b){b=c.getVerticalUnitStringForSR(b);return new f({heightModel:a.heightModel,heightUnit:b,vertCRS:a.vertCRS})};d.prototype.write=
function(a,c){c=q({origin:"web-scene"},c);return this.inherited(arguments,[a,c])};d.fromJSON=function(a){if(!a)return null;var c=new f;c.read(a,{origin:"web-scene"});return c};n([h.property({type:String,constructOnly:!0})],d.prototype,"heightModel",void 0);n([h.writer("web-scene","heightModel")],d.prototype,"writeHeightModel",null);n([h.reader(["web-scene","service"],"heightModel")],d.prototype,"readHeightModel",null);n([h.property({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:v.write}}}})],
d.prototype,"heightUnit",void 0);n([h.reader("web-scene","heightUnit")],d.prototype,"readHeightUnit",null);n([h.reader("service","heightUnit")],d.prototype,"readHeightUnitService",null);n([h.property({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],d.prototype,"vertCRS",void 0);n([h.reader("service","vertCRS",["vertCRS","ellipsoid","geoid"])],d.prototype,"readVertCRS",null);return d=f=n([h.subclass("esri.geometry.HeightModelInfo")],d);var f}(h.declared(l))})},"esri/geometry/support/scaleUtils":function(){define(["require",
"exports","../../config","../../core/kebabDictionary","./WKIDUnitConversion"],function(b,f,q,g,n){function l(a){return u.fromJSON(a.toLowerCase())||null}function k(a){return d(a)||f.decDegToMeters}function d(c){var b,d,g;c&&("object"===typeof c?(b=c.wkid,d=c.wkt):"number"===typeof c?b=c:"string"===typeof c&&(d=c));b?g=p.values[p[b]]:d&&-1!==d.search(/^PROJCS/i)&&(c=a.exec(d))&&c[1]&&(g=parseFloat(c[1].split(",")[1]));return g}function h(c){var b,d,g;c&&("object"===typeof c?(b=c.wkid,d=c.wkt):"number"===
typeof c?b=c:"string"===typeof c&&(d=c));b?g=p.units[p[b]]:d&&-1!==d.search(/^PROJCS/i)&&(c=a.exec(d))&&c[1]&&(g=(c=/[\\"\\']{1}([^\\"\\']+)/.exec(c[1]))&&c[1]);return g?l(g):null}function c(a,c){c=k(c);return a/(c*f.inchesPerMeter*q.screenDPI)}Object.defineProperty(f,"__esModule",{value:!0});f.inchesPerMeter=39.37;f.decDegToMeters=20015077/180;var a=/UNIT\[([^\]]+)\]\]$/i,p=n,u=g({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",
yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"},{ignoreUnknown:!0});f.unitFromRESTJSON=l;f.unitToRESTJSON=function(a){return u.toJSON(a)||null};f.getMetersPerVerticalUnitForSR=function(a){a=k(a);return 1E5<a?
1:a};f.getVerticalUnitStringForSR=function(a){return 1E5<k(a)?"meters":h(a)};f.getMetersPerUnitForSR=k;f.getMetersPerUnit=d;f.getUnitString=h;f.getScale=function(a,c){c=c||a.extent;a=a.width;var b=d(c&&c.spatialReference);return c&&a?c.width/a*(b||f.decDegToMeters)*f.inchesPerMeter*q.screenDPI:0};f.getResolutionForScale=c;f.getExtentForScale=function(a,b){var d=a.extent;a=a.width;b=c(b,d.spatialReference);return d.clone().expand(b*a/d.width)}})},"esri/layers/TiledLayer":function(){define(["require",
"../request","../core/promiseUtils","./Layer","./support/TileInfo"],function(b,f,q,g,n){return g.createSubclass({properties:{attributionDataUrl:null,tileInfo:n},getTileUrl:function(b,g,d){},fetchTile:function(b,g,d,h){b=this.getTileUrl(b,g,d);g={responseType:"image",allowImageDataAccess:h&&h.allowImageDataAccess||!1};h&&h.timestamp&&(g.query={_ts:h.timestamp});return"string"===typeof b?f(b,g).then(function(c){return c.data}):b.then(function(c){return f(c,{responseType:"image"})}).then(function(c){return c.data})},
importLayerViewModule:function(g){switch(g.type){case "2d":return q.create(function(g){b(["../views/2d/layers/TiledLayerView2D"],g)});case "3d":return q.create(function(g){b(["../views/3d/layers/TileLayerView3D"],g)})}}})})},"esri/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/_base/lang ../../geometry ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z){var t=d({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc"});return function(b){function d(a){a=b.call(this)||this;a.dpi=96;a.format=null;a.origin=null;a.minScale=0;a.maxScale=0;a.size=null;a.spatialReference=null;return a}q(d,b);m=d;d.create=function(a){void 0===a&&(a={size:256,spatialReference:l.SpatialReference.WebMercator});
var e=a.resolutionFactor||1,c=a.scales,b=a.size||256;a=a.spatialReference||l.SpatialReference.WebMercator;var d=u.getInfo(a),d=d?new l.Point(d.origin[0],d.origin[1],a):new l.Point(0,0,a),g=1/(39.37*p.getMetersPerUnitForSR(a)*96),f=[];if(c)for(var h=0;h<c.length;h++){var r=c[h],k=r*g;f.push({level:h,scale:r,resolution:k})}else for(r=u.isGeographic(a)?512/b*1.47748799285417E8:256/b*5.91657527591555E8,c=Math.ceil(24/e),f.push({level:0,scale:r,resolution:r*g}),h=1;h<c;h++)r/=Math.pow(2,e),k=r*g,f.push({level:h,
scale:r,resolution:k});return new m({dpi:96,lods:f,origin:d,size:b,spatialReference:a})};Object.defineProperty(d.prototype,"isWrappable",{get:function(){var a=this.spatialReference,c=this.origin;if(a&&c){var b=u.getInfo(a);return a.isWrappable&&Math.abs(b.origin[0]-c.x)<=b.dx}return!1},enumerable:!0,configurable:!0});d.prototype.readOrigin=function(a,c){return l.Point.fromJSON(n.mixin({spatialReference:c.spatialReference},a))};Object.defineProperty(d.prototype,"lods",{set:function(a){var e=this,c=
0,b=0,d=[];this._levelToLOD={};a&&(c=-Infinity,b=Infinity,a.forEach(function(a){d.push(a.scale);c=a.scale>c?a.scale:c;b=a.scale<b?a.scale:b;e._levelToLOD[a.level]=a}));this._set("scales",d);this._set("minScale",c);this._set("maxScale",b);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});d.prototype.readSize=function(a,c){return[c.cols,c.rows]};d.prototype.writeSize=function(a,c){c.cols=a[0];c.rows=a[0]};d.prototype.zoomToScale=function(a){var e=this.scales;if(0>=
a)return e[0];if(a>=e.length)return e[e.length-1];var c=Math.round(a);return e[c]+(c-a)*(e[Math.round(a-.5)]-e[c])};d.prototype.scaleToZoom=function(a){for(var e=this.scales,c=e.length-1,b=0;b<c;b++){var d=e[b],m=e[b+1];if(d<=a)break;if(m===a)return b+1;if(d>a&&m<a)return b+1-(a-m)/(d-m)}return b};d.prototype.snapScale=function(a,c){void 0===c&&(c=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=c?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};d.prototype.tileAt=function(e,c,b,
d){var m=this.lodAt(e);if(!m)return null;var g;if("number"===typeof c)g=c,c=b;else{if(c.spatialReference.equals(this.spatialReference))g=c.x,c=c.y;else{d=v.project(c,this.spatialReference);if(!d)return null;g=d.x;c=d.y}d=b}b=m.resolution*this.size[0];m=m.resolution*this.size[1];d||(d={id:null,level:0,row:0,col:0,extent:a.create()});d.level=e;d.row=Math.floor((this.origin.y-c)/m+.001);d.col=Math.floor((g-this.origin.x)/b+.001);this.updateTileInfo(d);return d};d.prototype.updateTileInfo=function(e){var c=
this.lodAt(e.level),b=c.resolution*this.size[0],c=c.resolution*this.size[1];e.id=e.level+"/"+e.row+"/"+e.col;e.extent||(e.extent=a.create());e.extent[0]=this.origin.x+e.col*b;e.extent[1]=this.origin.y-(e.row+1)*c;e.extent[2]=e.extent[0]+b;e.extent[3]=e.extent[1]+c};d.prototype.upsampleTile=function(a){var e=this._upsampleLevels[a.level];if(!e||-1===e.parentLevel)return!1;a.level=e.parentLevel;a.row=Math.floor(a.row/e.factor+.001);a.col=Math.floor(a.col/e.factor+.001);this.updateTileInfo(a);return!0};
d.prototype.getTileBounds=function(a,c){var e=this.lodAt(c.level).resolution,b=e*this.size[0],e=e*this.size[1];a[0]=this.origin.x+c.col*b;a[1]=this.origin.y-(c.row+1)*e;a[2]=a[0]+b;a[3]=a[1]+e;return a};d.prototype.lodAt=function(a){return this._levelToLOD&&this._levelToLOD[a]||null};d.prototype.clone=function(){return m.fromJSON(this.write({}))};d.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var c=null,b=0;b<a.length;b++){var d=a[b];this._upsampleLevels[d.level]=
{parentLevel:c?c.level:-1,factor:c?c.resolution/d.resolution:0};c=d}};g([h.property({type:Number,json:{write:!0}})],d.prototype,"compressionQuality",void 0);g([h.property({type:Number,json:{write:!0}})],d.prototype,"dpi",void 0);g([h.property({type:String,json:{read:t.read,write:t.write}})],d.prototype,"format",void 0);g([h.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],d.prototype,"isWrappable",null);g([h.property({type:l.Point,json:{write:!0}})],d.prototype,"origin",void 0);g([h.reader("origin")],
d.prototype,"readOrigin",null);g([h.property({type:[z],value:null,json:{write:!0}})],d.prototype,"lods",null);g([h.property({readOnly:!0})],d.prototype,"minScale",void 0);g([h.property({readOnly:!0})],d.prototype,"maxScale",void 0);g([h.property({readOnly:!0})],d.prototype,"scales",void 0);g([h.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?[a,a]:[256,256]}})],d.prototype,"size",void 0);g([h.reader("size",["rows","cols"])],d.prototype,"readSize",null);g([h.writer("size",
{cols:{type:c.Integer},rows:{type:c.Integer}})],d.prototype,"writeSize",null);g([h.property({type:l.SpatialReference,json:{write:!0}})],d.prototype,"spatialReference",void 0);return d=m=g([h.subclass("esri.layers.support.TileInfo")],d);var m}(h.declared(k))})},"esri/geometry":function(){define("require exports ./geometry/Extent ./geometry/Geometry ./geometry/Mesh ./geometry/Multipoint ./geometry/Point ./geometry/Polygon ./geometry/Polyline ./geometry/ScreenPoint ./geometry/SpatialReference ./geometry/support/jsonUtils".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p){Object.defineProperty(f,"__esModule",{value:!0});f.Extent=q;f.BaseGeometry=g;f.Mesh=n;f.Multipoint=l;f.Point=k;f.Polygon=d;f.Polyline=h;f.ScreenPoint=c;f.SpatialReference=a;f.isGeometry=function(a){return a instanceof f.BaseGeometry};f.fromJSON=p.fromJSON})},"esri/geometry/Mesh":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/lang ../core/Logger ../core/accessorSupport/decorators ./Extent ./Geometry ./support/MeshComponent ./support/MeshVertexAttributes ./support/triangulationUtils ./support/meshUtils/centerAt ./support/meshUtils/offset ./support/meshUtils/primitives ./support/meshUtils/rotate".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z,t,x){var r=k.getLogger("esri.geometry.Mesh"),m=[1,0,0],e=[0,1,0],w=[0,0,1],y=[0,0,0],A=[0,0,0,0],D=[0,0,0,0],B=[0,0,0,0];return function(c){function b(a){a=c.call(this)||this;a.components=null;a.hasZ=!0;a.hasM=!1;a.vertexAttributes=null;a.type="mesh";return a}q(b,c);f=b;Object.defineProperty(b.prototype,"extent",{get:function(){var a=this.spatialReference,e=this.vertexAttributes&&this.vertexAttributes.position;if(!e||0===e.length||this.components&&0===this.components.length)return new h({xmin:0,
ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:a});a={xmin:Infinity,xmax:-Infinity,ymin:Infinity,ymax:-Infinity,zmin:Infinity,zmax:-Infinity,spatialReference:a};if(!this.components)return new h(this.extendExtent(a,e,null));for(var c=0,b=this.components;c<b.length;c++){var d=b[c];if(d.faces)this.extendExtent(a,e,d.faces);else{this.extendExtent(a,e,null);break}}return new h(a)},enumerable:!0,configurable:!0});b.prototype.addComponent=function(a){this.components||(this.components=[]);this.components.push(a);
this.clearCache()};b.prototype.removeComponent=function(a){if(this.components&&(a=this.components.indexOf(a),-1!==a)){this.components=this.components.splice(a,1);return}r.error("removeComponent()","Provided component is not part of the list of components")};b.prototype.rotate=function(a,c,b,d){x.axisAngleFrom(m,a/180*Math.PI,A);x.axisAngleFrom(e,c/180*Math.PI,D);x.axisAngleFrom(w,b/180*Math.PI,B);x.axisAngleMultiply(A,D,A);x.axisAngleMultiply(A,B,A);x.rotate(this,A,d);return this};b.prototype.offset=
function(a,e,c,b){y[0]=a;y[1]=e;y[2]=c;z.offset(this,y,b);return this};b.prototype.centerAt=function(a,e){v.centerAt(this,a,e);return this};b.prototype.clone=function(){return new f({components:l.clone(this.components),spatialReference:this.spatialReference,vertexAttributes:l.clone(this.vertexAttributes)})};b.prototype.vertexAttributesChanged=function(){this.clearCache()};b.prototype.toJSON=function(a){return this.write({},a)};b.prototype.forEachVertex=function(a,e,c){if(e)for(d=0;d<e.length;d++){var b=
3*e[d];c(a[b+0],a[b+1],a[b+2])}else for(var d=0;d<a.length;d+=3)c(a[d+0],a[d+1],a[d+2])};b.prototype.extendExtent=function(a,e,c){this.forEachVertex(e,c,function(e,c,b){a.xmin=Math.min(a.xmin,e);a.xmax=Math.max(a.xmax,e);a.ymin=Math.min(a.ymin,c);a.ymax=Math.max(a.ymax,c);a.zmin=Math.min(a.zmin,b);a.zmax=Math.max(a.zmax,b)});return a};b.createBox=function(e,c){e=t.convertUnitGeometry(t.createUnitSizeBox(),e,c);if(c&&c.imageFace&&"all"!==c.imageFace){var b=e.components[0],d=b.faces,m=t.boxFaceOrder[c.imageFace],
g=6*m;c=new Uint32Array(6);for(var f=new Uint32Array(d.length-6),p=0,h=0,r=0;r<d.length;r++)r>=g&&r<g+6?c[p++]=d[r]:f[h++]=d[r];d=new Float32Array(e.vertexAttributes.uv);m*=8;g=[0,1,1,1,1,0,0,0];for(r=0;r<g.length;r++)d[m+r]=g[r];e.vertexAttributes.uv=d;e.components=[new a({faces:c,material:b.material}),new a({faces:f})]}return e};b.createSphere=function(a,e){return t.convertUnitGeometry(t.createUnitSizeSphere(e&&e.densificationFactor||0),a,e)};b.createCylinder=function(a,e){return t.convertUnitGeometry(t.createUnitSizeCylinder(e&&
e.densificationFactor||0),a,e)};b.createPlane=function(a,e){return t.convertUnitGeometry(t.createUnitSizePlane(e&&e.facing||"up"),a,e)};b.createFromPolygon=function(a,e){var c=u.triangulate(a);return new f({vertexAttributes:{position:c.position},components:[{faces:c.faces,shading:"flat",material:e&&e.material||null}],spatialReference:a.spatialReference})};g([d.property({dependsOn:["vertexAttributes","vertexAttributes.position","components"],json:{read:!1}})],b.prototype,"cache",void 0);g([d.property({type:[a]})],
b.prototype,"components",void 0);g([d.property({dependsOn:["cache"],readOnly:!0,json:{read:!1}})],b.prototype,"extent",null);g([d.property({readOnly:!0,json:{read:!1,write:!1}})],b.prototype,"hasZ",void 0);g([d.property({readOnly:!0,json:{read:!1,write:!1}})],b.prototype,"hasM",void 0);g([d.property({type:p.MeshVertexAttributes,json:{write:!0}})],b.prototype,"vertexAttributes",void 0);g([n(0,d.cast(a))],b.prototype,"addComponent",null);return b=f=g([d.subclass("esri.geometry.Mesh")],b);var f}(d.declared(c))})},
"esri/geometry/support/MeshComponent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators ./MeshMaterial ./MeshVertexAttributes".split(" "),function(b,f,q,g,n,l,k,d,h,c){var a=k.getLogger("esri.geometry.support.MeshComponent");return function(b){function f(a){a=b.call(this)||this;a.faces=null;a.material=null;a.shading="source";return a}q(f,b);p=f;
f.prototype.castFaces=function(b){return c.castArray(b,Uint32Array,[Uint16Array],{loggerTag:".faces\x3d",stride:3},a)};f.prototype.clone=function(){return new p({faces:l.clone(this.faces),shading:this.shading,material:l.clone(this.material)})};g([d.property({json:{write:!0}})],f.prototype,"faces",void 0);g([d.cast("faces")],f.prototype,"castFaces",null);g([d.property({type:h.MeshMaterial,json:{write:!0}})],f.prototype,"material",void 0);g([d.property({type:String,json:{write:!0}})],f.prototype,"shading",
void 0);return f=p=g([d.subclass("esri.geometry.support.MeshComponent")],f);var p}(d.declared(n))})},"esri/geometry/support/MeshMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./ImageMeshColor ./MeshColor ./ValueMeshColor".split(" "),function(b,f,q,g,n,l,k,d,h,c,a,p){Object.defineProperty(f,"__esModule",
{value:!0});var u={base:a.default,key:"type",defaultKeyValue:"value",typeMap:{value:p,image:c}};b=function(a){function b(c){c=a.call(this)||this;c.color=null;return c}q(b,a);f=b;b.prototype.castColor=function(a){return a?"string"===typeof a?v.test(a)||n.named[a]?new p({value:a}):new c({url:a}):Array.isArray(a)?new p({value:a}):a instanceof HTMLImageElement?new c({url:a.src}):a instanceof HTMLCanvasElement?new c({url:a.toDataURL()}):h.ensureOneOfType(u,a):a};b.prototype.readColor=function(a,b,e){if(a)switch(a.type){case "image":return new c(a);
case "value":return new p(a)}};b.prototype.clone=function(){return new f({color:k.clone(this.color)})};g([d.property({types:u,json:{write:!0}})],b.prototype,"color",void 0);g([d.cast("color")],b.prototype,"castColor",null);g([d.reader("color")],b.prototype,"readColor",null);return b=f=g([d.subclass("esri.geometry.support.MeshResources")],b);var f}(d.declared(l));f.MeshMaterial=b;var v=/^\s*(#|rgba?\()/;f.default=b})},"esri/geometry/support/ImageMeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Identifiable ../../core/accessorSupport/decorators ./MeshColor".split(" "),
function(b,f,q,g,n,l,k){return function(b){function d(a){a=b.call(this)||this;a.type="image";a.url=null;return a}q(d,b);c=d;d.prototype.clone=function(){return new c({url:this.url})};g([l.property()],d.prototype,"type",void 0);g([l.property({type:String,json:{write:{enabled:!0,isRequired:!0}}})],d.prototype,"url",void 0);return d=c=g([l.subclass("esri.geometry.support.ImageMeshColor")],d);var c}(l.declared(k.default,n))})},"esri/geometry/support/MeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),
function(b,f,q,g,n,l){Object.defineProperty(f,"__esModule",{value:!0});b=function(b){function d(d){return b.call(this)||this}q(d,b);d.prototype.clone=function(){throw Error("not implemented");};g([l.property({readOnly:!0,json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0,enabled:!0}}})],d.prototype,"type",void 0);return d=g([l.subclass("esri.geometry.support.MeshColor")],d)}(l.declared(n));f.MeshColor=b;f.default=b})},"esri/geometry/support/ValueMeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/lang ../../core/accessorSupport/decorators ./MeshColor".split(" "),
function(b,f,q,g,n,l,k,d){return function(b){function c(a){a=b.call(this)||this;a.type="value";a.value=null;return a}q(c,b);a=c;c.prototype.clone=function(){return new a({value:l.clone(this.value)})};g([k.property()],c.prototype,"type",void 0);g([k.property({type:n})],c.prototype,"value",void 0);return c=a=g([k.subclass("esri.geometry.support.ValueMeshColor")],c);var a}(k.declared(d.default))})},"esri/geometry/support/MeshVertexAttributes":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators".split(" "),
function(b,f,q,g,n,l,k,d){function h(a,c,b,d){var g=c.loggerTag;c=c.stride;return 0!==a.length%c?(d.error(g,"Invalid array length, expected a multiple of "+c),new b([])):a}function c(a,c,b,d,g){if(!a)return a;if(a instanceof c)return h(a,d,c,g);for(var f=0;f<b.length;f++)if(a instanceof b[f])return h(new c(a),d,c,g);if(Array.isArray(a))return h(new c(a),d,c,g);b=b.map(function(a){return"'"+a.name+"'"});g.error("Failed to set property, expected one of "+b+", but got "+a.constructor.name);return new c([])}
Object.defineProperty(f,"__esModule",{value:!0});var a=k.getLogger("esri.geometry.support.MeshVertexAttributes");b=function(b){function f(a){a=b.call(this)||this;a.position=null;a.uv=null;a.normal=null;return a}q(f,b);p=f;f.prototype.castPosition=function(b){b&&b instanceof Float32Array&&a.warn(".position\x3d","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array");return c(b,Float64Array,[Float32Array],{loggerTag:".position\x3d",
stride:3},a)};f.prototype.castUv=function(b){return c(b,Float32Array,[Float64Array],{loggerTag:".uv\x3d",stride:2},a)};f.prototype.castNormal=function(b){return c(b,Float32Array,[Float64Array],{loggerTag:".normal\x3d",stride:3},a)};f.prototype.clone=function(){return new p({position:l.clone(this.position),uv:l.clone(this.uv),normal:l.clone(this.normal)})};g([d.property({json:{write:!0}})],f.prototype,"position",void 0);g([d.cast("position")],f.prototype,"castPosition",null);g([d.property({json:{write:!0}})],
f.prototype,"uv",void 0);g([d.cast("uv")],f.prototype,"castUv",null);g([d.property({json:{write:!0}})],f.prototype,"normal",void 0);g([d.cast("normal")],f.prototype,"castNormal",null);return f=p=g([d.subclass("esri.geometry.support.MeshVertexAttributes")],f);var p}(d.declared(n));f.MeshVertexAttributes=b;f.castArray=c;f.default=b})},"esri/geometry/support/triangulationUtils":function(){define(["require","exports","../../core/libs/earcut/earcut","./coordsUtils"],function(b,f,q,g){function n(b,g,c){if(1===
b.length)return b[0];g=new Float64Array(g);c=new Uint32Array(c);for(var a=0,d=0,f=0;f<b.length;f++){for(var h=b[f],k=0;k<h.position.length;k++)g[a++]=h.position[k];for(k=0;k<h.faces.length;k++)c[d++]=h.faces[k]}return{position:g,faces:c}}function l(b,f){for(var c=b.length,a=Array(c),d=Array(c),h=Array(c),l=0,n=0,t=0,q=0,r=0;r<c;++r)q+=b[r].length;for(var q=new Float64Array(3*q),m=0,e=c-1;0<=e;e--){var w=b[e];if(g.isClockwise(w,!1,!1)||1===c){for(var y=w.length,r=0;r<l;++r)y+=a[r].length;r={index:m,
pathLengths:Array(l+1),count:y,holeIndices:Array(l)};r.pathLengths[0]=w.length;0<w.length&&(h[t++]={index:m,count:w.length});m=k(w,0,q,m,w.length,f);for(w=0;w<l;++w)y=a[w],r.holeIndices[w]=m,r.pathLengths[w+1]=y.length,0<y.length&&(h[t++]={index:m,count:y.length}),m=k(y,0,q,m,y.length,f);l=0;0<r.count&&(d[n++]=r)}else a[l++]=w}for(w=0;w<l;++w)y=a[w],0<y.length&&(h[t++]={index:m,count:y.length}),m=k(y,0,q,m,y.length,f);n<c&&(d.length=n);t<c&&(h.length=t);return{position:q,polygons:d,outlines:h}}function k(b,
g,c,a,f,k){a*=3;for(var d=0;d<f;++d){var p=b[g++];c[a++]=p[0];c[a++]=p[1];c[a++]=k?p[2]:0}return a/3}Object.defineProperty(f,"__esModule",{value:!0});f.triangulate=function(b){var d=l(b.rings,b.hasZ),c=[],a=0,g=0;b=function(b){var f=b.index,p=new Float64Array(d.position.buffer,3*f*d.position.BYTES_PER_ELEMENT,3*b.count);b=b.holeIndices.map(function(a){return a-f});b=new Uint32Array(q(p,b,3));c.push({position:p,faces:b});a+=p.length;g+=b.length};for(var f=0,k=d.polygons;f<k.length;f++)b(k[f]);return n(c,
a,g)};f.pathsToTriangulationInfo=l})},"esri/core/libs/earcut/earcut":function(){define([],function(){function b(a,c,b){b=b||2;e=a.length/b+(c?2*c.length:0);w=!1;var d=c&&c.length,m=d?c[0]*b:a.length,p=f(a,0,m,b,!0),r=[];if(!p)return r;var n,u,t,v;if(d)a:{var y=b,d=[],A,x,D;v=0;for(A=c.length;v<A;v++)x=c[v]*y,D=v<A-1?c[v+1]*y:a.length,x=f(a,x,D,y,!1),x===x.next&&(x.steiner=!0),d.push(h(x));d.sort(l);for(v=0;v<d.length;v++){if(!p){p=null;break a}c=d[v];y=p;if(y=k(c,y))c=z(y,c),q(c,c.next);p=q(p,p.next)}}if(w)return r;
if(a.length>80*b){n=t=a[0];u=d=a[1];for(y=b;y<m;y+=b)v=a[y],c=a[y+1],v<n&&(n=v),c<u&&(u=c),v>t&&(t=v),c>d&&(d=c);t=Math.max(t-n,d-u)}g(p,r,b,n,u,t);return r}function f(a,e,c,b,d){var g;if(d===0<m(a,e,c,b))for(d=e;d<c;d+=b)g=t(d,a[d],a[d+1],g);else for(d=c-b;d>=e;d-=b)g=t(d,a[d],a[d+1],g);g&&p(g,g.next)&&(x(g),g=g.next);return g}function q(c,b){if(!c)return c;b||(b=c);var d,m=0,g=e*e/2;do{d=!1;if(c.steiner||!p(c,c.next)&&0!==a(c.prev,c,c.next))c=c.next;else{x(c);c=b=c.prev;if(c===c.next)return null;
d=!0}if(m++>g)return w=!0,null}while(d||c!==b);return b}function g(e,b,m,f,h,r,k){if(e){if(!k&&r){var l=e,t=l;do null===t.z&&(t.z=d(t.x,t.y,f,h,r)),t.prevZ=t.prev,t=t.nextZ=t.next;while(t!==l);t.prevZ.nextZ=null;t.prevZ=null;var l=t,y,B,A,D,F,C,G=1;do{t=l;A=l=null;for(D=0;t;){D++;B=t;for(y=F=0;y<G&&(F++,B=B.nextZ,B);y++);for(C=G;0<F||0<C&&B;)0===F?(y=B,B=B.nextZ,C--):0!==C&&B?t.z<=B.z?(y=t,t=t.nextZ,F--):(y=B,B=B.nextZ,C--):(y=t,t=t.nextZ,F--),A?A.nextZ=y:l=y,y.prevZ=A,A=y;t=B}A.nextZ=null;G*=2}while(1<
D)}for(l=e;e.prev!==e.next;){t=e.prev;B=e.next;if(r)a:{A=e;C=f;var K=h,M=r;D=A.prev;F=A;G=A.next;if(0<=a(D,F,G))A=!1;else{var U=D.x>F.x?D.x>G.x?D.x:G.x:F.x>G.x?F.x:G.x,T=D.y>F.y?D.y>G.y?D.y:G.y:F.y>G.y?F.y:G.y;y=d(D.x<F.x?D.x<G.x?D.x:G.x:F.x<G.x?F.x:G.x,D.y<F.y?D.y<G.y?D.y:G.y:F.y<G.y?F.y:G.y,C,K,M);C=d(U,T,C,K,M);for(K=A.nextZ;K&&K.z<=C;){if(K!==A.prev&&K!==A.next&&c(D.x,D.y,F.x,F.y,G.x,G.y,K.x,K.y)&&0<=a(K.prev,K,K.next)){A=!1;break a}K=K.nextZ}for(K=A.prevZ;K&&K.z>=y;){if(K!==A.prev&&K!==A.next&&
c(D.x,D.y,F.x,F.y,G.x,G.y,K.x,K.y)&&0<=a(K.prev,K,K.next)){A=!1;break a}K=K.prevZ}A=!0}}else A=n(e);if(A)b.push(t.i/m),b.push(e.i/m),b.push(B.i/m),x(e),l=e=B.next;else{if(w)break;e=B;if(e===l){if(!k)g(q(e),b,m,f,h,r,1);else if(1===k){k=b;l=m;t=e;do B=t.prev,A=t.next.next,!p(B,A)&&u(B,t,t.next,A)&&v(B,A)&&v(A,B)&&(k.push(B.i/l),k.push(t.i/l),k.push(A.i/l),x(t),x(t.next),t=e=A),t=t.next;while(t!==e);e=t;g(e,b,m,f,h,r,2)}else if(2===k)a:{k=e;do{for(l=k.next.next;l!==k.prev;){if(t=k.i!==l.i){t=k;B=l;
A=void 0;if(A=t.next.i!==B.i&&t.prev.i!==B.i){A=void 0;b:{A=t;do{if(A.i!==t.i&&A.next.i!==t.i&&A.i!==B.i&&A.next.i!==B.i&&u(A,A.next,t,B)){A=!0;break b}A=A.next}while(A!==t);A=!1}A=!A}D=void 0;if(D=A&&v(t,B)&&v(B,t)){A=t;D=!1;F=(t.x+B.x)/2;B=(t.y+B.y)/2;do A.y>B!==A.next.y>B&&F<(A.next.x-A.x)*(B-A.y)/(A.next.y-A.y)+A.x&&(D=!D),A=A.next;while(A!==t)}t=D}if(t){e=z(k,l);k=q(k,k.next);e=q(e,e.next);g(k,b,m,f,h,r);g(e,b,m,f,h,r);break a}l=l.next}k=k.next}while(k!==e)}break}}}}}function n(b){var d=b.prev,
m=b.next;if(0<=a(d,b,m))return!1;for(var g=b.next.next,f=0;g!==b.prev;){if(c(d.x,d.y,b.x,b.y,m.x,m.y,g.x,g.y)&&0<=a(g.prev,g,g.next))return!1;g=g.next;if(f++>e)return w=!0,!1}return!0}function l(a,e){return a.x-e.x}function k(a,e){var b=e,d=a.x,m=a.y,g=-Infinity,f;do{if(!b)return null;if(m<=b.y&&m>=b.next.y){var p=b.x+(m-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(p<=d&&p>g){g=p;if(p===d){if(m===b.y)return b;if(m===b.next.y)return b.next}f=b.x<b.next.x?b:b.next}}b=b.next}while(b!==e);if(!f)return null;
if(d===g)return f.prev;e=f;for(var p=f.x,h=f.y,r=Infinity,w,b=f.next;b!==e;)d>=b.x&&b.x>=p&&c(m<h?d:g,m,p,h,m<h?g:d,m,b.x,b.y)&&(w=Math.abs(m-b.y)/(d-b.x),(w<r||w===r&&b.x>f.x)&&v(b,a)&&(f=b,r=w)),b=b.next;return f}function d(a,e,b,c,d){a=32767*(a-b)/d;e=32767*(e-c)/d;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;return(a|a<<1)&1431655765|((e|e<<1)&1431655765)<<1}function h(a){var e=a,b=a;do e.x<b.x&&(b=e),e=e.next;while(e!==
a);return b}function c(a,e,b,c,d,m,g,f){return 0<=(d-g)*(e-f)-(a-g)*(m-f)&&0<=(a-g)*(c-f)-(b-g)*(e-f)&&0<=(b-g)*(m-f)-(d-g)*(c-f)}function a(a,e,b){return(e.y-a.y)*(b.x-e.x)-(e.x-a.x)*(b.y-e.y)}function p(a,e){return a.x===e.x&&a.y===e.y}function u(e,b,c,d){return p(e,b)&&p(c,d)||p(e,d)&&p(c,b)?!0:0<a(e,b,c)!==0<a(e,b,d)&&0<a(c,d,e)!==0<a(c,d,b)}function v(e,b){return 0>a(e.prev,e,e.next)?0<=a(e,b,e.next)&&0<=a(e,e.prev,b):0>a(e,b,e.prev)||0>a(e,e.next,b)}function z(a,e){var b=new r(a.i,a.x,a.y),
c=new r(e.i,e.x,e.y),d=a.next,m=e.prev;a.next=e;e.prev=a;b.next=d;d.prev=b;c.next=b;b.prev=c;m.next=c;c.prev=m;return c}function t(a,e,b,c){a=new r(a,e,b);c?(a.next=c.next,a.prev=c,c.next.prev=a,c.next=a):(a.prev=a,a.next=a);return a}function x(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function r(a,e,b){this.i=a;this.x=e;this.y=b;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function m(a,e,b,c){for(var d=0,m=
b-c;e<b;e+=c)d+=(a[m]-a[e])*(a[e+1]+a[m+1]),m=e;return d}var e,w;b.deviation=function(a,e,b,c){var d=e&&e.length,g=Math.abs(m(a,0,d?e[0]*b:a.length,b));if(d)for(var d=0,f=e.length;d<f;d++)g-=Math.abs(m(a,e[d]*b,d<f-1?e[d+1]*b:a.length,b));for(d=e=0;d<c.length;d+=3){var f=c[d]*b,p=c[d+1]*b,h=c[d+2]*b;e+=Math.abs((a[f]-a[h])*(a[p+1]-a[f+1])-(a[f]-a[p])*(a[h+1]-a[f+1]))}return 0===g&&0===e?0:Math.abs((e-g)/g)};b.flatten=function(a){for(var e=a[0][0].length,b={vertices:[],holes:[],dimensions:e},c=0,d=
0;d<a.length;d++){for(var m=0;m<a[d].length;m++)for(var g=0;g<e;g++)b.vertices.push(a[d][m][g]);0<d&&(c+=a[d-1].length,b.holes.push(c))}return b};return b})},"esri/geometry/support/coordsUtils":function(){define(["require","exports"],function(b,f){function q(b,g){var f=g[0]-b[0],d=g[1]-b[1];return 2<b.length&&2<g.length?(b=b[2]-g[2],Math.sqrt(f*f+d*d+b*b)):Math.sqrt(f*f+d*d)}function g(b,g,f){var d=b[0]+f*(g[0]-b[0]),h=b[1]+f*(g[1]-b[1]);return 2<b.length&&2<g.length?[d,h,b[2]+f*(g[2]-b[2])]:[d,h]}
Object.defineProperty(f,"__esModule",{value:!0});f.geometryToCoordinates=function(b){if(!b)return null;if(Array.isArray(b))return b;var g=b.hasZ,f=b.hasM;if("point"===b.type)return f&&g?[b.x,b.y,b.z,b.m]:g?[b.x,b.y,b.z]:f?[b.x,b.y,b.m]:[b.x,b.y];if("polygon"===b.type)return b.rings.slice(0);if("polyline"===b.type)return b.paths.slice(0);if("multipoint"===b.type)return b.points.slice(0);if("extent"===b.type){b=b.clone().normalize();if(!b)return null;var d=!1,h=!1;b.forEach(function(b){b.hasZ&&(d=!0);
b.hasM&&(h=!0)});return b.map(function(b){var a=[[b.xmin,b.ymin],[b.xmin,b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]];if(d&&b.hasZ)for(var c=.5*(b.zmax-b.zmin),g=0;g<a.length;g++)a[g].push(c);if(h&&b.hasM)for(b=.5*(b.mmax-b.mmin),g=0;g<a.length;g++)a[g].push(b);return a})}return null};f.getLength=q;f.getMidpoint=function(b,f){return g(b,f,.5)};f.getPathLength=function(b){for(var g=b.length,f=0,d=0;d<g-1;++d)f+=q(b[d],b[d+1]);return f};f.getPointOnPath=function(b,f){if(0>=f)return b[0];
for(var k=b.length,d=0,h=0;h<k-1;++h){var c=q(b[h],b[h+1]);if(f-d<c)return g(b[h],b[h+1],(f-d)/c);d+=c}return b[k-1]};f.isClockwise=function(b,g,f){for(var d=b.length,h=0,c=0,a=0,p=0;p<d;p++){var k=b[p],l=b[(p+1)%d],n=2,h=h+(k[0]*l[1]-l[0]*k[1]);2<k.length&&2<l.length&&f&&(c+=k[0]*l[2]-l[0]*k[2],n=3);k.length>n&&l.length>n&&g&&(a+=k[0]*l[n]-l[0]*k[n])}return 0>=h&&0>=c&&0>=a}})},"esri/geometry/support/meshUtils/centerAt":function(){define("require exports ../../../core/Logger ./projection ../../../views/3d/lib/glMatrix ../../../views/3d/support/projectionUtils".split(" "),
function(b,f,q,g,n,l){Object.defineProperty(f,"__esModule",{value:!0});var k=q.getLogger("esri.geometry.support.meshUtils.centerAt");f.centerAt=function(b,f,v){if(b.vertexAttributes&&b.vertexAttributes.position){var p=b.spatialReference,u=v&&v.origin||b.extent.center;if(p.isWGS84||p.isWebMercator&&(!v||!1!==v.geographic)){v=b.spatialReference;var p=h,q=d;if(l.pointToVector(f,q,l.SphericalECEFSpatialReference)){l.pointToVector(u,p,l.SphericalECEFSpatialReference)||l.pointToVector(b.extent.center,p,
l.SphericalECEFSpatialReference);u=b.vertexAttributes.position;f=b.vertexAttributes.normal;var r=new Float64Array(u.length),m=new Float32Array(f?f.length:0);g.projectToECEF(u,v,r);f&&g.projectNormalToECEF(f,u,r,v,m);l.computeLinearTransformation(l.SphericalECEFSpatialReference,p,c,l.SphericalECEFSpatialReference);l.computeLinearTransformation(l.SphericalECEFSpatialReference,q,a,l.SphericalECEFSpatialReference);n.mat4d.inverse(c);n.mat4d.multiply(a,c,a);g.transformBufferInPlace(r,a);n.mat4d.inverse(a);
n.mat4d.transpose(a);f&&g.transformBufferInPlace(m,a,!0);g.projectFromECEF(r,u,v);f&&g.projectNormalFromECEF(m,u,r,v,f);b.clearCache()}else k.error("Failed to project centerAt location (wkid:"+f.spatialReference.wkid+") to ECEF")}else if(v=h,p=d,l.pointToVector(f,p,b.spatialReference)){l.pointToVector(u,v,b.spatialReference)||(f=b.extent.center,v[0]=f.x,v[1]=f.y,v[2]=f.z,k.error("Failed to project specified origin (wkid:"+u.spatialReference.wkid+") to mesh spatial reference (wkid:"+b.spatialReference.wkid+
"). Using mesh extent.center instead"));if(u=b.vertexAttributes.position)for(f=0;f<u.length;f+=3)for(q=0;3>q;q++)u[f+q]+=p[q]-v[q];b.clearCache()}else k.error("Failed to project centerAt location (wkid:"+f.spatialReference.wkid+") to mesh spatial reference (wkid:"+b.spatialReference.wkid+")")}};var d=n.vec3d.create(),h=n.vec3d.create(),c=n.mat4d.create(),a=n.mat4d.create()})},"esri/geometry/support/meshUtils/projection":function(){define(["require","exports","../../../core/Logger","../../../views/3d/lib/glMatrix",
"../../../views/3d/support/projectionUtils"],function(b,f,q,g,n){function l(b,f,k,l,t,q){if(f){t=t.isWGS84;for(var p=0;p<f.length;p+=3){for(var m=0;3>m;m++)d[m]=l[p+m],h[m]=f[p+m];n.computeLinearTransformation(n.SphericalECEFSpatialReference,d,c,n.SphericalECEFSpatialReference);g.mat4d.toMat3(c,a);t?g.mat3d.multiplyVec3(a,h):(m=n.webMercator.y2lat(k[p+1]),m=Math.cos(m),0===b&&(m=1/m),a[0]*=m,a[1]*=m,a[2]*=m,a[3]*=m,a[4]*=m,a[5]*=m,1===b&&g.mat3d.transpose(a),g.mat3d.multiplyVec3(a,h),g.vec3d.normalize(h));
for(m=0;3>m;m++)q[p+m]=h[m]}return q}}Object.defineProperty(f,"__esModule",{value:!0});var k=q.getLogger("esri.geometry.support.meshUtils.normalProjection");f.projectNormalToECEF=function(a,b,c,d,g){return d.isWebMercator||d.isWGS84?l(0,a,b,c,d,g):(k.error("Cannot convert PCS spatial reference buffer to ECEF"),g)};f.projectNormalFromECEF=function(a,b,c,d,g){return d.isWebMercator||d.isWGS84?l(1,a,b,c,d,g):(k.error("Cannot convert to PCS spatial reference buffer from ECEF"),g)};f.projectToECEF=function(a,
b,c){n.bufferToBuffer(a,b,0,c,n.SphericalECEFSpatialReference,0,a.length/3);return c};f.projectFromECEF=function(a,b,c){n.bufferToBuffer(a,n.SphericalECEFSpatialReference,0,b,c,0,a.length/3);return b};f.transformBufferInPlace=function(a,b,c){void 0===c&&(c=!1);if(a)for(var f=0;f<a.length;f+=3){for(var p=0;3>p;p++)d[p]=a[f+p];g.mat4d.multiplyVec3(b,d);c&&g.vec3d.normalize(d);for(p=0;3>p;p++)a[f+p]=d[p]}};var d=g.vec3d.create(),h=g.vec3d.create(),c=g.mat4d.create(),a=g.mat3d.create()})},"esri/views/3d/lib/glMatrix":function(){define([],
function(){var b={};(function(b,q){q(b,!0);q(b,!1)})(b,function(b,q){var g={};(function(){if("undefined"!=typeof Float32Array){var a=new Float32Array(1),e=new Int32Array(a.buffer);g.invsqrt=function(b){a[0]=b;e[0]=1597463007-(e[0]>>1);var c=a[0];return c*(1.5-.5*b*c*c)}}else g.invsqrt=function(a){return 1/Math.sqrt(a)}})();var f=Array;"undefined"!=typeof Float32Array&&(f=q?Float32Array:Array);var l={create:function(a){var e=new f(3);a?(e[0]=a[0],e[1]=a[1],e[2]=a[2]):e[0]=e[1]=e[2]=0;return e},createFrom:function(a,
e,b){var c=new f(3);c[0]=a;c[1]=e;c[2]=b;return c},set:function(a,e){e[0]=a[0];e[1]=a[1];e[2]=a[2];return e},set3:function(a,e,b,c){c[0]=a;c[1]=e;c[2]=b;return c},add:function(a,e,b){if(!b||a===b)return a[0]+=e[0],a[1]+=e[1],a[2]+=e[2],a;b[0]=a[0]+e[0];b[1]=a[1]+e[1];b[2]=a[2]+e[2];return b},subtract:function(a,e,b){if(!b||a===b)return a[0]-=e[0],a[1]-=e[1],a[2]-=e[2],a;b[0]=a[0]-e[0];b[1]=a[1]-e[1];b[2]=a[2]-e[2];return b},multiply:function(a,e,b){if(!b||a===b)return a[0]*=e[0],a[1]*=e[1],a[2]*=
e[2],a;b[0]=a[0]*e[0];b[1]=a[1]*e[1];b[2]=a[2]*e[2];return b},max:function(a,e,b){b[0]=Math.max(a[0],e[0]);b[1]=Math.max(a[1],e[1]);b[2]=Math.max(a[2],e[2]);return b},min:function(a,e,b){b[0]=Math.min(a[0],e[0]);b[1]=Math.min(a[1],e[1]);b[2]=Math.min(a[2],e[2]);return b},negate:function(a,e){e||(e=a);e[0]=-a[0];e[1]=-a[1];e[2]=-a[2];return e},scale:function(a,e,b){if(!b||a===b)return a[0]*=e,a[1]*=e,a[2]*=e,a;b[0]=a[0]*e;b[1]=a[1]*e;b[2]=a[2]*e;return b},normalize:function(a,e){e||(e=a);var b=a[0],
c=a[1];a=a[2];var d=Math.sqrt(b*b+c*c+a*a);if(!d)return e[0]=0,e[1]=0,e[2]=0,e;if(1===d)return e[0]=b,e[1]=c,e[2]=a,e;d=1/d;e[0]=b*d;e[1]=c*d;e[2]=a*d;return e},cross:function(a,e,b){b||(b=a);var c=a[0],d=a[1];a=a[2];var m=e[0],g=e[1];e=e[2];b[0]=d*e-a*g;b[1]=a*m-c*e;b[2]=c*g-d*m;return b},length:function(a){var e=a[0],b=a[1];a=a[2];return Math.sqrt(e*e+b*b+a*a)},length2:function(a){var e=a[0],b=a[1];a=a[2];return e*e+b*b+a*a},dot:function(a,e){return a[0]*e[0]+a[1]*e[1]+a[2]*e[2]},direction:function(a,
e,b){b||(b=a);var c=a[0]-e[0],d=a[1]-e[1];a=a[2]-e[2];e=Math.sqrt(c*c+d*d+a*a);if(!e)return b[0]=0,b[1]=0,b[2]=0,b;e=1/e;b[0]=c*e;b[1]=d*e;b[2]=a*e;return b},lerp:function(a,e,b,c){c||(c=a);c[0]=a[0]+b*(e[0]-a[0]);c[1]=a[1]+b*(e[1]-a[1]);c[2]=a[2]+b*(e[2]-a[2]);return c},dist:function(a,e){var b=e[0]-a[0],c=e[1]-a[1];a=e[2]-a[2];return Math.sqrt(b*b+c*c+a*a)},dist2:function(a,e){var b=e[0]-a[0],c=e[1]-a[1];a=e[2]-a[2];return b*b+c*c+a*a}},k=null,d=new f(4);l.unproject=function(a,e,b,c,g){g||(g=a);
k||(k=z.create());var m=k;d[0]=2*(a[0]-c[0])/c[2]-1;d[1]=2*(a[1]-c[1])/c[3]-1;d[2]=2*a[2]-1;d[3]=1;z.multiply(b,e,m);if(!z.inverse(m))return null;z.multiplyVec4(m,d);if(0===d[3])return null;g[0]=d[0]/d[3];g[1]=d[1]/d[3];g[2]=d[2]/d[3];return g};var h=l.createFrom(1,0,0),c=l.createFrom(0,1,0),a=l.createFrom(0,0,1);l.rotationTo=function(b,e,d){d||(d=t.create());var m=l.dot(b,e),g=l.create();if(1<=m)t.set(x,d);else if(-.999999>m)l.cross(h,b,g),1E-6>g.length&&l.cross(c,b,g),1E-6>g.length&&l.cross(a,b,
g),l.normalize(g),t.fromAxisAngle(g,Math.PI,d);else{var m=Math.sqrt(2*(1+m)),f=1/m;l.cross(b,e,g);d[0]=g[0]*f;d[1]=g[1]*f;d[2]=g[2]*f;d[3]=.5*m;t.normalize(d)}1<d[3]?d[3]=1:-1>d[3]&&(d[3]=-1);return d};var p=l.create(),u=l.create();l.project=function(a,e,b,c){c||(c=a);l.direction(e,b,p);l.subtract(a,e,u);a=l.dot(p,u);l.scale(p,a,c);l.add(c,e,c)};l.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var v={create:function(a){var e=new f(9);a?(e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e[4]=a[4],e[5]=
a[5],e[6]=a[6],e[7]=a[7],e[8]=a[8]):e[0]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=0;return e},createFrom:function(a,e,b,c,d,g,p,h,r){var m=new f(9);m[0]=a;m[1]=e;m[2]=b;m[3]=c;m[4]=d;m[5]=g;m[6]=p;m[7]=h;m[8]=r;return m},determinant:function(a){var e=a[3],b=a[4],c=a[5],d=a[6],m=a[7],g=a[8];return a[0]*(g*b-c*m)+a[1]*(-g*e+c*d)+a[2]*(m*e-b*d)},inverse:function(a,e){var b=a[0],c=a[1],d=a[2],m=a[3],g=a[4],f=a[5],p=a[6],h=a[7];a=a[8];var r=a*g-f*h,k=-a*m+f*p,l=h*m-g*p,n=b*r+c*k+d*l;if(!n)return null;n=
1/n;e||(e=v.create());e[0]=r*n;e[1]=(-a*c+d*h)*n;e[2]=(f*c-d*g)*n;e[3]=k*n;e[4]=(a*b-d*p)*n;e[5]=(-f*b+d*m)*n;e[6]=l*n;e[7]=(-h*b+c*p)*n;e[8]=(g*b-c*m)*n;return e},multiply:function(a,e,b){b||(b=a);var c=a[0],d=a[1],m=a[2],g=a[3],f=a[4],p=a[5],h=a[6],r=a[7];a=a[8];var k=e[0],w=e[1],l=e[2],n=e[3],u=e[4],t=e[5],v=e[6],q=e[7];e=e[8];b[0]=k*c+w*g+l*h;b[1]=k*d+w*f+l*r;b[2]=k*m+w*p+l*a;b[3]=n*c+u*g+t*h;b[4]=n*d+u*f+t*r;b[5]=n*m+u*p+t*a;b[6]=v*c+q*g+e*h;b[7]=v*d+q*f+e*r;b[8]=v*m+q*p+e*a;return b},add:function(a,
e,b){b||(b=a);b[0]=a[0]+e[0];b[1]=a[1]+e[1];b[2]=a[2]+e[2];b[3]=a[3]+e[3];b[4]=a[4]+e[4];b[5]=a[5]+e[5];b[6]=a[6]+e[6];b[7]=a[7]+e[7];b[8]=a[8]+e[8];return b},subtract:function(a,e,b){b||(b=a);b[0]=a[0]-e[0];b[1]=a[1]-e[1];b[2]=a[2]-e[2];b[3]=a[3]-e[3];b[4]=a[4]-e[4];b[5]=a[5]-e[5];b[6]=a[6]-e[6];b[7]=a[7]-e[7];b[8]=a[8]-e[8];return b},multiplyVec2:function(a,e,b){b||(b=e);var c=e[0];e=e[1];b[0]=c*a[0]+e*a[3]+a[6];b[1]=c*a[1]+e*a[4]+a[7];return b},multiplyVec3:function(a,e,b){b||(b=e);var c=e[0],
d=e[1];e=e[2];b[0]=c*a[0]+d*a[3]+e*a[6];b[1]=c*a[1]+d*a[4]+e*a[7];b[2]=c*a[2]+d*a[5]+e*a[8];return b},set:function(a,e){e[0]=a[0];e[1]=a[1];e[2]=a[2];e[3]=a[3];e[4]=a[4];e[5]=a[5];e[6]=a[6];e[7]=a[7];e[8]=a[8];return e},identity:function(a){a||(a=v.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,e){if(!e||a===e){e=a[1];var b=a[2],c=a[5];a[1]=a[3];a[2]=a[6];a[3]=e;a[5]=a[7];a[6]=b;a[7]=c;return a}e[0]=a[0];e[1]=a[3];e[2]=a[6];e[3]=a[1];e[4]=a[4];
e[5]=a[7];e[6]=a[2];e[7]=a[5];e[8]=a[8];return e},toMat4:function(a,e){e||(e=z.create());e[15]=1;e[14]=0;e[13]=0;e[12]=0;e[11]=0;e[10]=a[8];e[9]=a[7];e[8]=a[6];e[7]=0;e[6]=a[5];e[5]=a[4];e[4]=a[3];e[3]=0;e[2]=a[2];e[1]=a[1];e[0]=a[0];return e},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},z={create:function(a){var e=new f(16);4===arguments.length?(e[0]=arguments[0],e[1]=arguments[1],e[2]=arguments[2],e[3]=arguments[3],e[4]=arguments[4],
e[5]=arguments[5],e[6]=arguments[6],e[7]=arguments[7],e[8]=arguments[8],e[9]=arguments[9],e[10]=arguments[10],e[11]=arguments[11],e[12]=arguments[12],e[13]=arguments[13],e[14]=arguments[14],e[15]=arguments[15]):a&&(e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e[4]=a[4],e[5]=a[5],e[6]=a[6],e[7]=a[7],e[8]=a[8],e[9]=a[9],e[10]=a[10],e[11]=a[11],e[12]=a[12],e[13]=a[13],e[14]=a[14],e[15]=a[15]);return e},createFrom:function(a,e,b,c,d,g,p,h,r,k,l,n,u,t,v,q){var m=new f(16);m[0]=a;m[1]=e;m[2]=b;m[3]=c;m[4]=d;
m[5]=g;m[6]=p;m[7]=h;m[8]=r;m[9]=k;m[10]=l;m[11]=n;m[12]=u;m[13]=t;m[14]=v;m[15]=q;return m},createFromMatrixRowMajor:function(a){var e=new f(16);e[0]=a[0];e[4]=a[1];e[8]=a[2];e[12]=a[3];e[1]=a[4];e[5]=a[5];e[9]=a[6];e[13]=a[7];e[2]=a[8];e[6]=a[9];e[10]=a[10];e[14]=a[11];e[3]=a[12];e[7]=a[13];e[11]=a[14];e[15]=a[15];return e},createFromMatrix:function(a){var e=new f(16);e[0]=a[0];e[1]=a[1];e[2]=a[2];e[3]=a[3];e[4]=a[4];e[5]=a[5];e[6]=a[6];e[7]=a[7];e[8]=a[8];e[9]=a[9];e[10]=a[10];e[11]=a[11];e[12]=
a[12];e[13]=a[13];e[14]=a[14];e[15]=a[15];return e},set:function(a,e){e[0]=a[0];e[1]=a[1];e[2]=a[2];e[3]=a[3];e[4]=a[4];e[5]=a[5];e[6]=a[6];e[7]=a[7];e[8]=a[8];e[9]=a[9];e[10]=a[10];e[11]=a[11];e[12]=a[12];e[13]=a[13];e[14]=a[14];e[15]=a[15];return e},setRowMajor:function(a,e){e[0]=a[0];e[4]=a[1];e[8]=a[2];e[12]=a[3];e[1]=a[4];e[5]=a[5];e[9]=a[6];e[13]=a[7];e[2]=a[8];e[6]=a[9];e[10]=a[10];e[14]=a[11];e[3]=a[12];e[7]=a[13];e[11]=a[14];e[15]=a[15];return e},identity:function(a){a||(a=z.create());a[0]=
1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,e){if(!e||a===e){e=a[1];var b=a[2],c=a[3],d=a[6],m=a[7],g=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=e;a[6]=a[9];a[7]=a[13];a[8]=b;a[9]=d;a[11]=a[14];a[12]=c;a[13]=m;a[14]=g;return a}e[0]=a[0];e[1]=a[4];e[2]=a[8];e[3]=a[12];e[4]=a[1];e[5]=a[5];e[6]=a[9];e[7]=a[13];e[8]=a[2];e[9]=a[6];e[10]=a[10];e[11]=a[14];e[12]=a[3];e[13]=a[7];e[14]=a[11];e[15]=a[15];return e},
determinant:function(a){var e=a[0],b=a[1],c=a[2],d=a[3],m=a[4],g=a[5],f=a[6],p=a[7],h=a[8],r=a[9],k=a[10],l=a[11],n=a[12],u=a[13],t=a[14];a=a[15];return n*r*f*d-h*u*f*d-n*g*k*d+m*u*k*d+h*g*t*d-m*r*t*d-n*r*c*p+h*u*c*p+n*b*k*p-e*u*k*p-h*b*t*p+e*r*t*p+n*g*c*l-m*u*c*l-n*b*f*l+e*u*f*l+m*b*t*l-e*g*t*l-h*g*c*a+m*r*c*a+h*b*f*a-e*r*f*a-m*b*k*a+e*g*k*a},inverse:function(a,e){e||(e=a);var b=a[0],c=a[1],d=a[2],m=a[3],g=a[4],f=a[5],p=a[6],h=a[7],r=a[8],k=a[9],l=a[10],n=a[11],u=a[12],t=a[13],v=a[14];a=a[15];var q=
b*f-c*g,z=b*p-d*g,x=b*h-m*g,M=c*p-d*f,U=c*h-m*f,T=d*h-m*p,da=r*t-k*u,Q=r*v-l*u,P=r*a-n*u,Y=k*v-l*t,aa=k*a-n*t,ga=l*a-n*v,ea=q*ga-z*aa+x*Y+M*P-U*Q+T*da;if(!ea)return null;ea=1/ea;e[0]=(f*ga-p*aa+h*Y)*ea;e[1]=(-c*ga+d*aa-m*Y)*ea;e[2]=(t*T-v*U+a*M)*ea;e[3]=(-k*T+l*U-n*M)*ea;e[4]=(-g*ga+p*P-h*Q)*ea;e[5]=(b*ga-d*P+m*Q)*ea;e[6]=(-u*T+v*x-a*z)*ea;e[7]=(r*T-l*x+n*z)*ea;e[8]=(g*aa-f*P+h*da)*ea;e[9]=(-b*aa+c*P-m*da)*ea;e[10]=(u*U-t*x+a*q)*ea;e[11]=(-r*U+k*x-n*q)*ea;e[12]=(-g*Y+f*Q-p*da)*ea;e[13]=(b*Y-c*Q+d*
da)*ea;e[14]=(-u*M+t*z-v*q)*ea;e[15]=(r*M-k*z+l*q)*ea;return e},toRotationMat:function(a,e){e||(e=z.create());e[0]=a[0];e[1]=a[1];e[2]=a[2];e[3]=a[3];e[4]=a[4];e[5]=a[5];e[6]=a[6];e[7]=a[7];e[8]=a[8];e[9]=a[9];e[10]=a[10];e[11]=a[11];e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e},toMat3:function(a,e){e||(e=v.create());e[0]=a[0];e[1]=a[1];e[2]=a[2];e[3]=a[4];e[4]=a[5];e[5]=a[6];e[6]=a[8];e[7]=a[9];e[8]=a[10];return e},toInverseMat3:function(a,e){var b=a[0],c=a[1],d=a[2],m=a[4],g=a[5],f=a[6],p=a[8],h=a[9];
a=a[10];var r=a*g-f*h,k=-a*m+f*p,l=h*m-g*p,n=b*r+c*k+d*l;if(!n)return null;n=1/n;e||(e=v.create());e[0]=r*n;e[1]=(-a*c+d*h)*n;e[2]=(f*c-d*g)*n;e[3]=k*n;e[4]=(a*b-d*p)*n;e[5]=(-f*b+d*m)*n;e[6]=l*n;e[7]=(-h*b+c*p)*n;e[8]=(g*b-c*m)*n;return e},multiply:function(a,e,b){b||(b=a);var c=a[0],d=a[1],m=a[2],g=a[3],f=a[4],p=a[5],h=a[6],r=a[7],k=a[8],l=a[9],w=a[10],n=a[11],u=a[12],t=a[13],v=a[14];a=a[15];var q=e[0],z=e[1],x=e[2],U=e[3],T=e[4],da=e[5],Q=e[6],P=e[7],Y=e[8],aa=e[9],ga=e[10],ea=e[11],la=e[12],ma=
e[13],oa=e[14];e=e[15];b[0]=q*c+z*f+x*k+U*u;b[1]=q*d+z*p+x*l+U*t;b[2]=q*m+z*h+x*w+U*v;b[3]=q*g+z*r+x*n+U*a;b[4]=T*c+da*f+Q*k+P*u;b[5]=T*d+da*p+Q*l+P*t;b[6]=T*m+da*h+Q*w+P*v;b[7]=T*g+da*r+Q*n+P*a;b[8]=Y*c+aa*f+ga*k+ea*u;b[9]=Y*d+aa*p+ga*l+ea*t;b[10]=Y*m+aa*h+ga*w+ea*v;b[11]=Y*g+aa*r+ga*n+ea*a;b[12]=la*c+ma*f+oa*k+e*u;b[13]=la*d+ma*p+oa*l+e*t;b[14]=la*m+ma*h+oa*w+e*v;b[15]=la*g+ma*r+oa*n+e*a;return b},multiplyVec3:function(a,e,b){b||(b=e);var c=e[0],d=e[1];e=e[2];b[0]=a[0]*c+a[4]*d+a[8]*e+a[12];b[1]=
a[1]*c+a[5]*d+a[9]*e+a[13];b[2]=a[2]*c+a[6]*d+a[10]*e+a[14];return b},multiplyVec4:function(a,e,b){b||(b=e);var c=e[0],d=e[1],m=e[2];e=e[3];b[0]=a[0]*c+a[4]*d+a[8]*m+a[12]*e;b[1]=a[1]*c+a[5]*d+a[9]*m+a[13]*e;b[2]=a[2]*c+a[6]*d+a[10]*m+a[14]*e;b[3]=a[3]*c+a[7]*d+a[11]*m+a[15]*e;return b},translate:function(a,e,b){var c=e[0],d=e[1];e=e[2];var g,m,f,p,h,r,k,l,w,n,u,t;if(!b||a===b)return a[12]=a[0]*c+a[4]*d+a[8]*e+a[12],a[13]=a[1]*c+a[5]*d+a[9]*e+a[13],a[14]=a[2]*c+a[6]*d+a[10]*e+a[14],a[15]=a[3]*c+a[7]*
d+a[11]*e+a[15],a;g=a[0];m=a[1];f=a[2];p=a[3];h=a[4];r=a[5];k=a[6];l=a[7];w=a[8];n=a[9];u=a[10];t=a[11];b[0]=g;b[1]=m;b[2]=f;b[3]=p;b[4]=h;b[5]=r;b[6]=k;b[7]=l;b[8]=w;b[9]=n;b[10]=u;b[11]=t;b[12]=g*c+h*d+w*e+a[12];b[13]=m*c+r*d+n*e+a[13];b[14]=f*c+k*d+u*e+a[14];b[15]=p*c+l*d+t*e+a[15];return b},scale:function(a,b,c){var e=b[0],d=b[1];b=b[2];if(!c||a===c)return a[0]*=e,a[1]*=e,a[2]*=e,a[3]*=e,a[4]*=d,a[5]*=d,a[6]*=d,a[7]*=d,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;c[0]=a[0]*e;c[1]=a[1]*e;c[2]=a[2]*e;c[3]=
a[3]*e;c[4]=a[4]*d;c[5]=a[5]*d;c[6]=a[6]*d;c[7]=a[7]*d;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},maxScale:function(a){return Math.max(Math.max(Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))},rotate:function(a,b,c,d){var e=c[0],g=c[1];c=c[2];var m=Math.sqrt(e*e+g*g+c*c),f,p,h,r,k,l,w,n,u,t,v,q,z,y,x,T,da,Q,P,Y;if(!m)return null;1!==m&&(m=1/m,e*=m,g*=m,
c*=m);f=Math.sin(b);p=Math.cos(b);h=1-p;b=a[0];m=a[1];r=a[2];k=a[3];l=a[4];w=a[5];n=a[6];u=a[7];t=a[8];v=a[9];q=a[10];z=a[11];y=e*e*h+p;x=g*e*h+c*f;T=c*e*h-g*f;da=e*g*h-c*f;Q=g*g*h+p;P=c*g*h+e*f;Y=e*c*h+g*f;e=g*c*h-e*f;g=c*c*h+p;d?a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=b*y+l*x+t*T;d[1]=m*y+w*x+v*T;d[2]=r*y+n*x+q*T;d[3]=k*y+u*x+z*T;d[4]=b*da+l*Q+t*P;d[5]=m*da+w*Q+v*P;d[6]=r*da+n*Q+q*P;d[7]=k*da+u*Q+z*P;d[8]=b*Y+l*e+t*g;d[9]=m*Y+w*e+v*g;d[10]=r*Y+n*e+q*g;d[11]=k*Y+u*e+z*g;
return d},rotateX:function(a,b,c){var e=Math.sin(b);b=Math.cos(b);var d=a[4],g=a[5],m=a[6],f=a[7],p=a[8],h=a[9],r=a[10],k=a[11];c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[4]=d*b+p*e;c[5]=g*b+h*e;c[6]=m*b+r*e;c[7]=f*b+k*e;c[8]=d*-e+p*b;c[9]=g*-e+h*b;c[10]=m*-e+r*b;c[11]=f*-e+k*b;return c},rotateY:function(a,b,c){var e=Math.sin(b);b=Math.cos(b);var d=a[0],g=a[1],m=a[2],f=a[3],p=a[8],h=a[9],r=a[10],k=a[11];c?a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=
a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=d*b+p*-e;c[1]=g*b+h*-e;c[2]=m*b+r*-e;c[3]=f*b+k*-e;c[8]=d*e+p*b;c[9]=g*e+h*b;c[10]=m*e+r*b;c[11]=f*e+k*b;return c},rotateZ:function(a,b,c){var e=Math.sin(b);b=Math.cos(b);var d=a[0],g=a[1],m=a[2],f=a[3],p=a[4],h=a[5],r=a[6],k=a[7];c?a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=d*b+p*e;c[1]=g*b+h*e;c[2]=m*b+r*e;c[3]=f*b+k*e;c[4]=d*-e+p*b;c[5]=g*-e+h*b;c[6]=m*-e+
r*b;c[7]=f*-e+k*b;return c},frustum:function(a,b,c,d,g,f,p){p||(p=z.create());var e=b-a,m=d-c,h=f-g;p[0]=2*g/e;p[1]=0;p[2]=0;p[3]=0;p[4]=0;p[5]=2*g/m;p[6]=0;p[7]=0;p[8]=(b+a)/e;p[9]=(d+c)/m;p[10]=-(f+g)/h;p[11]=-1;p[12]=0;p[13]=0;p[14]=-(f*g*2)/h;p[15]=0;return p},perspective:function(a,b,c,d,g){a=c*Math.tan(a*Math.PI/360);b*=a;return z.frustum(-b,b,-a,a,c,d,g)},ortho:function(a,b,c,d,g,f,p){p||(p=z.create());var e=b-a,m=d-c,h=f-g;p[0]=2/e;p[1]=0;p[2]=0;p[3]=0;p[4]=0;p[5]=2/m;p[6]=0;p[7]=0;p[8]=0;
p[9]=0;p[10]=-2/h;p[11]=0;p[12]=-(a+b)/e;p[13]=-(d+c)/m;p[14]=-(f+g)/h;p[15]=1;return p},lookAt:function(a,b,c,d){d||(d=z.create());var e,g,m,f,p,h,r,k,l=a[0],n=a[1];a=a[2];m=c[0];f=c[1];g=c[2];r=b[0];c=b[1];e=b[2];if(l===r&&n===c&&a===e)return z.identity(d);b=l-r;c=n-c;r=a-e;k=1/Math.sqrt(b*b+c*c+r*r);b*=k;c*=k;r*=k;e=f*r-g*c;g=g*b-m*r;m=m*c-f*b;(k=Math.sqrt(e*e+g*g+m*m))?(k=1/k,e*=k,g*=k,m*=k):m=g=e=0;f=c*m-r*g;p=r*e-b*m;h=b*g-c*e;(k=Math.sqrt(f*f+p*p+h*h))?(k=1/k,f*=k,p*=k,h*=k):h=p=f=0;d[0]=e;
d[1]=f;d[2]=b;d[3]=0;d[4]=g;d[5]=p;d[6]=c;d[7]=0;d[8]=m;d[9]=h;d[10]=r;d[11]=0;d[12]=-(e*l+g*n+m*a);d[13]=-(f*l+p*n+h*a);d[14]=-(b*l+c*n+r*a);d[15]=1;return d},fromRotationTranslation:function(a,b,c){c||(c=z.create());var e=a[0],d=a[1],g=a[2],m=a[3],f=e+e,p=d+d,h=g+g;a=e*f;var r=e*p,e=e*h,k=d*p,d=d*h,g=g*h,f=m*f,p=m*p,m=m*h;c[0]=1-(k+g);c[1]=r+m;c[2]=e-p;c[3]=0;c[4]=r-m;c[5]=1-(a+g);c[6]=d+f;c[7]=0;c[8]=e+p;c[9]=d-f;c[10]=1-(a+k);c[11]=0;c[12]=b[0];c[13]=b[1];c[14]=b[2];c[15]=1;return c},str:function(a){return"["+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},t={create:function(a){var b=new f(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,d){var e=new f(4);e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=t.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}},
x=t.identity();t.calculateW=function(a,b){var e=a[0],c=a[1],d=a[2];if(!b||a===b)return a[3]=-Math.sqrt(Math.abs(1-e*e-c*c-d*d)),a;b[0]=e;b[1]=c;b[2]=d;b[3]=-Math.sqrt(Math.abs(1-e*e-c*c-d*d));return b};t.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};t.inverse=function(a,b){var e=a[0],c=a[1],d=a[2],g=a[3],e=(e=e*e+c*c+d*d+g*g)?1/e:0;if(!b||a===b)return a[0]*=-e,a[1]*=-e,a[2]*=-e,a[3]*=e,a;b[0]=-a[0]*e;b[1]=-a[1]*e;b[2]=-a[2]*e;b[3]=a[3]*e;return b};t.conjugate=function(a,b){if(!b||
a===b)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};t.length=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)};t.normalize=function(a,b){b||(b=a);var e=a[0],c=a[1],d=a[2];a=a[3];var g=Math.sqrt(e*e+c*c+d*d+a*a);if(0===g)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;g=1/g;b[0]=e*g;b[1]=c*g;b[2]=d*g;b[3]=a*g;return b};t.add=function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=
a[2]+b[2];c[3]=a[3]+b[3];return c};t.multiply=function(a,b,c){c||(c=a);var e=a[0],d=a[1],g=a[2];a=a[3];var m=b[0],f=b[1],p=b[2];b=b[3];c[0]=e*b+a*m+d*p-g*f;c[1]=d*b+a*f+g*m-e*p;c[2]=g*b+a*p+e*f-d*m;c[3]=a*b-e*m-d*f-g*p;return c};t.multiplyVec3=function(a,b,c){c||(c=b);var e=b[0],d=b[1],g=b[2];b=a[0];var m=a[1],f=a[2];a=a[3];var p=a*e+m*g-f*d,h=a*d+f*e-b*g,r=a*g+b*d-m*e,e=-b*e-m*d-f*g;c[0]=p*a+e*-b+h*-f-r*-m;c[1]=h*a+e*-m+r*-b-p*-f;c[2]=r*a+e*-f+p*-m-h*-b;return c};t.scale=function(a,b,c){if(!c||a===
c)return a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};t.toMat3=function(a,b){b||(b=v.create());var c=a[0],e=a[1],d=a[2],g=a[3],m=c+c,f=e+e,p=d+d;a=c*m;var h=c*f,c=c*p,r=e*f,e=e*p,d=d*p,m=g*m,f=g*f,g=g*p;b[0]=1-(r+d);b[1]=h+g;b[2]=c-f;b[3]=h-g;b[4]=1-(a+d);b[5]=e+m;b[6]=c+f;b[7]=e-m;b[8]=1-(a+r);return b};t.toMat4=function(a,b){b||(b=z.create());var c=a[0],e=a[1],d=a[2],g=a[3],m=c+c,f=e+e,p=d+d;a=c*m;var h=c*f,c=c*p,r=e*f,e=e*p,d=d*p,m=g*m,f=g*f,g=g*p;
b[0]=1-(r+d);b[1]=h+g;b[2]=c-f;b[3]=0;b[4]=h-g;b[5]=1-(a+d);b[6]=e+m;b[7]=0;b[8]=c+f;b[9]=e-m;b[10]=1-(a+r);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};t.slerp=function(a,b,c,d){d||(d=a);var e=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3],g,m;if(1<=Math.abs(e))return d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d;g=Math.acos(e);m=Math.sqrt(1-e*e);if(.001>Math.abs(m))return d[0]=.5*a[0]+.5*b[0],d[1]=.5*a[1]+.5*b[1],d[2]=.5*a[2]+.5*b[2],d[3]=.5*a[3]+.5*b[3],d;e=Math.sin((1-c)*g)/m;c=Math.sin(c*
g)/m;d[0]=a[0]*e+b[0]*c;d[1]=a[1]*e+b[1]*c;d[2]=a[2]*e+b[2]*c;d[3]=a[3]*e+b[3]*c;return d};t.fromRotationMatrix=function(a,b){b||(b=t.create());var c=a[0]+a[4]+a[8],e;if(0<c)e=Math.sqrt(c+1),b[3]=.5*e,e=.5/e,b[0]=(a[7]-a[5])*e,b[1]=(a[2]-a[6])*e,b[2]=(a[3]-a[1])*e;else{e=t.fromRotationMatrix.s_iNext=t.fromRotationMatrix.s_iNext||[1,2,0];c=0;a[4]>a[0]&&(c=1);a[8]>a[3*c+c]&&(c=2);var d=e[c],g=e[d];e=Math.sqrt(a[3*c+c]-a[3*d+d]-a[3*g+g]+1);b[c]=.5*e;e=.5/e;b[3]=(a[3*g+d]-a[3*d+g])*e;b[d]=(a[3*d+c]+a[3*
c+d])*e;b[g]=(a[3*g+c]+a[3*c+g])*e}return b};v.toQuat4=t.fromRotationMatrix;(function(){var a=v.create();t.fromAxes=function(b,c,d,g){a[0]=c[0];a[3]=c[1];a[6]=c[2];a[1]=d[0];a[4]=d[1];a[7]=d[2];a[2]=b[0];a[5]=b[1];a[8]=b[2];return t.fromRotationMatrix(a,g)}})();t.identity=function(a){a||(a=t.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};t.fromAngleAxis=function(a,b,c){c||(c=t.create());a*=.5;var e=Math.sin(a);c[3]=Math.cos(a);c[0]=e*b[0];c[1]=e*b[1];c[2]=e*b[2];return c};t.toAngleAxis=function(a,
b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<c?(b[3]=2*Math.acos(a[3]),c=g.invsqrt(c),b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};t.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var r={create:function(a){var b=new f(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,d){var e=new f(4);e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},
identity:function(a){a||(a=r.create());a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,b){if(!b||a===b)return b=a[1],a[1]=a[2],a[2]=b,a;b[0]=a[0];b[1]=a[2];b[2]=a[1];b[3]=a[3];return b},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,b){b||(b=a);var c=a[0],e=a[1],d=a[2];a=a[3];var g=c*a-d*e;if(!g)return null;g=1/g;b[0]=a*g;b[1]=-e*g;b[2]=-d*g;b[3]=c*g;return b},multiply:function(a,b,c){c||(c=a);var e=a[0],d=a[1],g=a[2];a=a[3];c[0]=e*b[0]+d*b[2];c[1]=e*b[1]+d*b[3];
c[2]=g*b[0]+a*b[2];c[3]=g*b[1]+a*b[3];return c},rotate:function(a,b,c){c||(c=a);var e=a[0],d=a[1],g=a[2];a=a[3];var f=Math.sin(b);b=Math.cos(b);c[0]=e*b+d*f;c[1]=e*-f+d*b;c[2]=g*b+a*f;c[3]=g*-f+a*b;return c},multiplyVec2:function(a,b,c){c||(c=b);var e=b[0];b=b[1];c[0]=e*a[0]+b*a[1];c[1]=e*a[2]+b*a[3];return c},scale:function(a,b,c){c||(c=a);var e=a[1],d=a[2],g=a[3],f=b[0];b=b[1];c[0]=a[0]*f;c[1]=e*b;c[2]=d*f;c[3]=g*b;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};q=q?
"":"d";b["glMath"+q]=g;b["vec2"+q]={create:function(a){var b=new f(2);a?(b[0]=a[0],b[1]=a[1]):(b[0]=0,b[1]=0);return b},createFrom:function(a,b){var c=new f(2);c[0]=a;c[1]=b;return c},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];return c},subtract:function(a,b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];return c},scale:function(a,b,c){c||(c=
a);c[0]=a[0]*b;c[1]=a[1]*b;return c},dist:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)},dist2:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a},set:function(a,b){b[0]=a[0];b[1]=a[1];return b},set2:function(a,b,c){c[0]=a;c[1]=b;return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];return b},normalize:function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];0<c?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0;return b},cross:function(a,b,c){a=a[0]*b[1]-a[1]*b[0];if(!c)return a;
c[0]=c[1]=0;c[2]=a;return c},length:function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},direction:function(a,b,c){c||(c=a);var e=a[0]-b[0];a=a[1]-b[1];b=e*e+a*a;if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/Math.sqrt(b);c[0]=e*b;c[1]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);return d},str:function(a){return"["+a[0]+", "+a[1]+"]"}};b["vec3"+q]=l;b["vec4"+q]={create:function(a){var b=new f(4);a?(b[0]=a[0],
b[1]=a[1],b[2]=a[2],b[3]=a[3]):(b[0]=0,b[1]=0,b[2]=0,b[3]=0);return b},createFrom:function(a,b,c,d){var e=new f(4);e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c},subtract:function(a,b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];c[3]=a[3]*b[3];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/
b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];c[3]=a[3]/b[3];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},set4:function(a,b,c,d,g){g[0]=a;g[1]=b;g[2]=c;g[3]=d;return g},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-
a[1]);d[2]=a[2]+c*(b[2]-a[2]);d[3]=a[3]+c*(b[3]-a[3]);return d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};b["mat2"+q]=r;b["mat3"+q]=v;b["mat4"+q]=z;b["quat4"+q]=t});return b})},"esri/views/3d/support/projectionUtils":function(){define("require exports ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/support/aaBoundingRect ../lib/glMatrix ./earthUtils ./mathUtils ../webgl-engine/lib/BufferVectorMath".split(" "),function(b,f,q,g,n,l,k,d,h){function c(b,
c,e,d){2===b.length?(C[0]=b[0],C[1]=b[1],C[2]=0,b=C):b===e&&(l.vec3d.set(b,C),b=C);return a(b,c,0,e,d,0,1)}function a(a,b,c,d,g,f,h){void 0===h&&(h=1);x!==b&&(r=p(b),x=b);m!==g&&(e=p(g),m=g);h=c+3*h;if(r!==e||r===t.UNKNOWN&&!b.equals(g))if(r>t.UNKNOWN&&e>t.UNKNOWN)if(e!==t.WGS84)if(b=w[e],r!==t.WGS84)for(g=y[r];c<h;c+=3,f+=3)g(a,c,G,0),b(G,0,d,f);else for(;c<h;c+=3,f+=3)b(a,c,d,f);else for(g=y[r];c<h;c+=3,f+=3)g(a,c,d,f);else return!1;else if(d!==a||c!==f)for(;c<h;c++,f++)d[f]=a[c];return!0}function p(a){return a.wkt===
f.SphericalECEFSpatialReference.wkt?t.SPHERICAL_ECEF:a.isWGS84?t.WGS84:a.isWebMercator?t.WEBMERC:a.wkt===f.WGS84ECEFSpatialReference.wkt?t.WGS84_ECEF:t.UNKNOWN}function u(a,b,c,e){c[e++]=a[b++];c[e++]=a[b++];c[e]=a[b]}function v(a,b,c,e){var g=.4999999*Math.PI,g=d.clamp(A*a[b+1],-g,g),g=Math.sin(g);c[e++]=A*a[b]*B;c[e++]=B/2*Math.log((1+g)/(1-g));c[e]=a[b+2]}function z(a,b,c,e){var d=B+a[b+2],g=A*a[b+1];a=A*a[b];b=Math.cos(g);c[e++]=Math.cos(a)*b*d;c[e++]=Math.sin(a)*b*d;c[e]=Math.sin(g)*d}Object.defineProperty(f,
"__esModule",{value:!0});f.SphericalECEFSpatialReference=new g({wkt:'GEOCCS["Spherical geocentric",\n  DATUM["Not specified",\n    SPHEROID["Sphere",\' + earthUtils.earthRadius + \',0]],\n  PRIMEM["Greenwich",0.0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",EAST],\n  AXIS["Geocentric Z",NORTH]\n]'});f.WGS84ECEFSpatialReference=new g({wkt:'GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",6378137,298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]'});
var t;(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";a[a.WGS84=2]="WGS84";a[a.WEBMERC=3]="WEBMERC";a[a.WGS84_ECEF=4]="WGS84_ECEF"})(t||(t={}));var x,r,m,e;f.vectorToVector=c;f.pointToVector=function(b,c,e){C[0]=b.x;C[1]=b.y;var d=b.z;C[2]=void 0!==d?d:0;return a(C,b.spatialReference,0,c,e,0,1)};f.vectorToPoint=function(b,c,e,d){"esri.geometry.SpatialReference"===e.declaredClass?(d=e,e=new q({spatialReference:d})):d=d||e.spatialReference;return a(b,c,0,C,d,0,1)?(e.x=C[0],
e.y=C[1],e.z=C[2],e.spatialReference=d,e):null};f.xyzToVector=function(b,c,e,d,g,f){C[0]=b;C[1]=c;C[2]=e;return a(C,d,0,g,f,0,1)};f.bufferToBuffer=a;f.computeLinearTransformation=function(a,b,c,e){var d=p(a),g=p(e);if(d===g&&g!==t.SPHERICAL_ECEF&&(d!==t.UNKNOWN||a.equals(e)))return l.mat4d.identity(c),l.mat4d.translate(c,b),!0;if(g===t.SPHERICAL_ECEF){if(a=y[d])return a(b,0,G,0),z(G,0,W,0),e=A*G[0],a=A*G[1],b=Math.sin(e),e=Math.cos(e),d=Math.sin(a),a=Math.cos(a),c[0]=-b,c[4]=-d*e,c[8]=a*e,c[12]=W[0],
c[1]=e,c[5]=-d*b,c[9]=a*b,c[13]=W[1],c[2]=0,c[6]=a,c[10]=d,c[14]=W[2],c[3]=0,c[7]=0,c[11]=0,c[15]=1,!0}else if(g===t.WEBMERC&&(d===t.WGS84||d===t.SPHERICAL_ECEF))return y[d](b,0,G,0),b=A*G[1],v(G,0,W,0),l.mat4d.identity(c),l.mat4d.translate(c,W),b=1/Math.cos(b),l.mat4d.scale(c,[b,b,1]),!0;return!1};f.transformDirection=function(a,b,e,d,g){l.vec3d.set(a,fa);l.vec3d.add(a,b,V);c(fa,e,fa,g);c(V,e,V,g);l.vec3d.subtract(V,fa,d);l.vec3d.normalize(d)};f.mbsToMbs=function(a,b,c,e){var d=p(b),g=p(e);if(d===
g&&(d!==t.UNKNOWN||b.equals(e)))return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],!0;if(g===t.SPHERICAL_ECEF){if(b=y[d])return b(a,0,G,0),z(G,0,c,0),c[3]=a[3],!0}else if(g===t.WEBMERC&&(d===t.WGS84||d===t.SPHERICAL_ECEF))return y[d](a,0,G,0),b=Math.abs(A*G[1])+Math.asin(a[3]/(B+a[2])),v(G,0,c,0),c[3]=b>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(b)*a[3],!0;return!1};f.extentToBoundingBox=function(b,c,e){if(null==b)return!1;var d;C[0]=null!=b.xmin?b.xmin:0;C[1]=null!=b.ymin?b.ymin:0;C[2]=null!=b.zmin?b.zmin:
0;d=a(C,b.spatialReference,0,c,e,0,1);C[0]=null!=b.xmax?b.xmax:0;C[1]=null!=b.ymax?b.ymax:0;C[2]=null!=b.zmax?b.zmax:0;d=d&&a(C,b.spatialReference,0,c,e,3,1);null==b.xmin&&(c[0]=-Infinity);null==b.ymin&&(c[1]=-Infinity);null==b.zmin&&(c[2]=-Infinity);null==b.xmax&&(c[3]=Infinity);null==b.ymax&&(c[4]=Infinity);null==b.zmax&&(c[5]=Infinity);return d};f.extentToBoundingRect=function(b,c,e){if(null==b)return!1;var d;C[0]=null!=b.xmin?b.xmin:0;C[1]=null!=b.ymin?b.ymin:0;C[2]=null!=b.zmin?b.zmin:0;d=a(C,
b.spatialReference,0,C,e,0,1);c[0]=C[0];c[1]=C[1];C[0]=null!=b.xmax?b.xmax:0;C[1]=null!=b.ymax?b.ymax:0;C[2]=null!=b.zmax?b.zmax:0;d=d&&a(C,b.spatialReference,0,C,e,0,1);c[2]=C[0];c[3]=C[1];null==b.xmin&&(c[0]=-Infinity);null==b.ymin&&(c[1]=-Infinity);null==b.xmax&&(c[2]=Infinity);null==b.ymax&&(c[3]=Infinity);return d};f.boundingRectToBoundingRect=function(b,c,e,d){if(null==b)return!1;if(c.equals(d))return n.set(e,b),!0;var g;C[0]=b[0];C[1]=b[1];C[2]=0;g=a(C,c,0,C,d,0,1);e[0]=C[0];e[1]=C[1];C[0]=
b[2];C[1]=b[3];C[2]=0;g=g&&a(C,c,0,C,d,0,1);e[2]=C[0];e[3]=C[1];return g};(function(a){a.x2lon=function(a){return a/B};a.y2lat=function(a){return Math.PI/2-2*Math.atan(Math.exp(-1*a/B))};a.lon2x=function(a){return a*B};a.lat2y=function(a){a=Math.sin(a);return B/2*Math.log((1+a)/(1-a))}})(f.webMercator||(f.webMercator={}));var w=[void 0,z,u,v,function(a,b,c,e){var d=F,g=A*a[b],f=A*a[b+1];a=a[b+2];b=Math.sin(f);var f=Math.cos(f),m=d.a/Math.sqrt(1-d.e2*b*b);c[e++]=(m+a)*f*Math.cos(g);c[e++]=(m+a)*f*
Math.sin(g);c[e++]=(m*(1-d.e2)+a)*b}],y=[void 0,function(a,b,c,e){var g=h.Vec3Compact.length(a,b),f=d.asin(a[b+2]/g);a=(0<a[b+1]?1:-1)*d.acos(a[b]/(Math.cos(f)*g));c[e++]=D*a;c[e++]=D*f;c[e]=g-B},u,function(a,b,c,e){c[e++]=D*(a[b++]/B);c[e++]=D*(Math.PI/2-2*Math.atan(Math.exp(-1*a[b++]/B)));c[e]=a[b]},function(a,b,c,e){var d=F,g=a[b],f=a[b+1];a=a[b+2];var m,p,h,r,k,l;b=Math.abs(a);m=g*g+f*f;p=Math.sqrt(m);h=m+a*a;r=Math.sqrt(h);g=Math.atan2(f,g);k=a*a/h;h=m/h;f=d.a2/r;m=d.a3-d.a4/r;.3<h?(k=b/r*(1+
h*(d.a1+f+k*m)/r),r=Math.asin(k),f=k*k,h=Math.sqrt(1-f)):(h=p/r*(1-k*(d.a5-f-h*m)/r),r=Math.acos(h),f=1-h*h,k=Math.sqrt(f));l=1-d.e2*f;f=d.a/Math.sqrt(l);d=d.a6*f;f=p-f*h;m=b-d*k;b=h*f+k*m;p=h*m-k*f;d=p/(d/l+b);r+=d;0>a&&(r=-r);c[e++]=D*g;c[e++]=D*r;c[e]=b+p*d/2}],A=d.deg2rad(1),D=d.rad2deg(1),B=k.earthRadius,F={a:6378137,e2:.006694379990137799,a1:42697.67270715754,a2:1.8230912546075456E9,a3:142.91722289812412,a4:4.557728136518864E9,a5:42840.589930055656,a6:.9933056200098622},C=l.vec3d.create(),G=
l.vec3d.create(),W=l.vec3d.create(),fa=l.vec3d.create(),V=l.vec3d.create()})},"esri/geometry/support/aaBoundingRect":function(){define(["require","exports","../../geometry"],function(b,f,q){function g(b){void 0===b&&(b=f.ZERO);return[b[0],b[1],b[2],b[3]]}function n(b){return b[0]>=b[2]?0:b[2]-b[0]}function l(b){return b[1]>=b[3]?0:b[3]-b[1]}function k(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b}function d(b){return 4===b.length}function h(b,a,d){return b<a?a:b>d?d:b}Object.defineProperty(f,
"__esModule",{value:!0});f.create=g;f.fromValues=function(b,a,d,f,h){void 0===h&&(h=g());h[0]=b;h[1]=a;h[2]=d;h[3]=f;return h};f.fromExtent=function(b,a){void 0===a&&(a=g());a[0]=b.xmin;a[1]=b.ymin;a[2]=b.xmax;a[3]=b.ymax;return a};f.toExtent=function(b,a){return new q.Extent({xmin:b[0],ymin:b[1],xmax:b[2],ymax:b[3],spatialReference:a})};f.expandPointInPlace=function(b,a){a[0]<b[0]&&(b[0]=a[0]);a[0]>b[2]&&(b[2]=a[0]);a[1]<b[1]&&(b[1]=a[1]);a[1]>b[3]&&(b[3]=a[1])};f.expand=function(b,a,g){void 0===
g&&(g=b);if("length"in a)if(d(a))g[0]=Math.min(b[0],a[0]),g[1]=Math.min(b[1],a[1]),g[2]=Math.max(b[2],a[2]),g[3]=Math.max(b[3],a[3]);else{if(2===a.length||3===a.length)g[0]=Math.min(b[0],a[0]),g[1]=Math.min(b[1],a[1]),g[2]=Math.max(b[2],a[0]),g[3]=Math.max(b[3],a[1])}else switch(a.type){case "extent":g[0]=Math.min(b[0],a.xmin);g[1]=Math.min(b[1],a.ymin);g[2]=Math.max(b[2],a.xmax);g[3]=Math.max(b[3],a.ymax);break;case "point":g[0]=Math.min(b[0],a.x),g[1]=Math.min(b[1],a.y),g[2]=Math.max(b[2],a.x),
g[3]=Math.max(b[3],a.y)}return g};f.expandWithNestedArray=function(b,a,d){void 0===d&&(d=b);var c=a.length,g=b[0],f=b[1],p=b[2];b=b[3];for(var h=0;h<c;h++){var r=a[h],g=Math.min(g,r[0]),f=Math.min(f,r[1]),p=Math.max(p,r[0]);b=Math.max(b,r[1])}d[0]=g;d[1]=f;d[2]=p;d[3]=b;return d};f.allFinite=function(b){for(var a=0;4>a;a++)if(!isFinite(b[a]))return!1;return!0};f.width=n;f.height=l;f.area=function(b){return n(b)*l(b)};f.center=function(b,a){void 0===a&&(a=[0,0]);a[0]=b[0]+n(b)/2;a[1]=b[1]+l(b)/2;return a};
f.containsPoint=function(b,a){return a[0]>=b[0]&&a[1]>=b[1]&&a[0]<=b[2]&&a[1]<=b[3]};f.containsPointWithMargin=function(b,a,d){return a[0]>=b[0]-d&&a[1]>=b[1]-d&&a[0]<=b[2]+d&&a[1]<=b[3]+d};f.intersects=function(b,a){return Math.max(a[0],b[0])<=Math.min(a[2],b[2])&&Math.max(a[1],b[1])<=Math.min(a[3],b[3])};f.contains=function(b,a){return a[0]>=b[0]&&a[2]<=b[2]&&a[1]>=b[1]&&a[3]<=b[3]};f.intersection=function(b,a,d){void 0===d&&(d=b);var c=a[0],g=a[1],f=a[2];a=a[3];d[0]=h(b[0],c,f);d[1]=h(b[1],g,a);
d[2]=h(b[2],c,f);d[3]=h(b[3],g,a);return d};f.offset=function(b,a,d,g){void 0===g&&(g=b);g[0]=b[0]+a;g[1]=b[1]+d;g[2]=b[2]+a;g[3]=b[3]+d;return g};f.setMin=function(b,a,d){void 0===d&&(d=b);d[0]=a[0];d[1]=a[1];d!==b&&(d[2]=b[2],d[3]=b[3]);return d};f.setMax=function(b,a,d){void 0===d&&(d=b);d[2]=a[0];d[3]=a[1];d!==b&&(d[0]=b[0],d[1]=b[1]);return b};f.set=k;f.empty=function(b){return b?k(b,f.NEGATIVE_INFINITY):g(f.NEGATIVE_INFINITY)};f.is=d;f.isPoint=function(b){return(0===n(b)||!isFinite(b[0]))&&
(0===l(b)||!isFinite(b[1]))};f.equals=function(b,a,g){if(null==b||null==a)return b===a;if(!d(b)||!d(a))return!1;if(g)for(var c=0;c<b.length;c++){if(!g(b[c],a[c]))return!1}else for(c=0;c<b.length;c++)if(b[c]!==a[c])return!1;return!0};f.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];f.NEGATIVE_INFINITY=[Infinity,Infinity,-Infinity,-Infinity];f.ZERO=[0,0,0,0]})},"esri/views/3d/support/earthUtils":function(){define("require exports ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/support/webMercatorUtils ../lib/glMatrix ./mathUtils".split(" "),
function(b,f,q,g,n,l,k){function d(a,b,c,d){var g,h;a instanceof q&&b instanceof q&&(c=b.longitude,d=b.latitude,h=a.latitude,g=a.longitude);a=k.deg2rad(h);d=k.deg2rad(d);g=k.deg2rad(g);b=k.deg2rad(c);c=Math.sin((a-d)/2);g=Math.sin((g-b)/2);c=2*k.asin(Math.sqrt(c*c+Math.cos(a)*Math.cos(d)*g*g))*f.earthRadius;return Math.round(1E4*c)/1E4}function h(a,b,c){a=c/f.earthRadius;b=k.deg2rad(b);a=Math.sin(a/2);b=Math.cos(b);b=2*k.asin(Math.sqrt(a*a/(b*b)));return k.rad2deg(b)}function c(a,b,c){return k.rad2deg(c/
f.earthRadius)}function a(a,b){a/=15;b||(a=Math.round(a));return a}Object.defineProperty(f,"__esModule",{value:!0});f.wgs84Radius=6378137;f.wgs84InverseFlattening=298.257223563;f.wgs84Flattening=1/f.wgs84InverseFlattening;f.wgs84PolarRadius=f.wgs84Radius*(1-f.wgs84Flattening);f.wgs84Eccentricity=.0818191908426215;f.earthRadius=f.wgs84Radius;f.halfEarthCircumference=Math.PI*f.earthRadius;f.earthCircumference=2*f.halfEarthCircumference;f.metersPerDegree=f.halfEarthCircumference/180;var p=new q(0,0,
g.WGS84);f.getGreatCircleDistance=d;f.getGreatCircleSpanAt=function(a,b,c){var g=b.spatialReference,f=new q(b.x,a.y,g),h=new q(c.x,a.y,g);b=new q(a.x,b.y,g);a=new q(a.x,c.y,g);return{lon:d(f,h),lat:d(b,a)}};f.getLonDeltaForDistance=h;f.getLatDeltaForDistance=c;f.getLatLonDeltaForDistance=function(a,b,d){return{lat:c(a,b,d),lon:h(a,b,d)}};f.getMaxCameraAltitude=function(a){a=k.deg2rad(a/2);return(1-Math.sin(a))*f.earthRadius/Math.sin(a)};f.getViewExtentDistance=function(a,b){b=k.deg2rad(b/2);return 2*
k.acos((Math.pow(a+f.earthRadius,2)+Math.pow(f.earthRadius,2)-Math.pow((a+f.earthRadius)*Math.cos(b)-Math.sqrt(Math.pow(Math.cos(b)*(a+f.earthRadius),2)-a*a-2*a*f.earthRadius),2))/(2*(a+f.earthRadius)*f.earthRadius))*f.earthRadius};f.computeCarthesianDistance=function(a,b){function c(a){var b=k.deg2rad(a.latitude),c=k.deg2rad(a.longitude),d=Math.cos(b);a=f.earthRadius+(a.z||0);return[Math.cos(c)*d*a,Math.sin(b)*a,-Math.sin(c)*d*a]}a=c(a);b=c(b);b=[b[0]-a[0],b[1]-a[1],b[2]-a[2]];return Math.sqrt(b[0]*
b[0]+b[1]*b[1]+b[2]*b[2])};f.longitudeToTimezone=a;f.positionToTimezone=function(b,c){b.spatialReference.wkid!==g.WGS84.wkid?n.webMercatorToGeographic(b,!1,p):(p.x=b.x,p.y=b.y);p.z=b.z;c||(c={hours:0,minutes:0,seconds:0});c.hours=a(p.x,!0);b=c.hours%1;c.hours-=b;c.minutes=60*b;b=c.minutes%1;c.minutes-=b;c.seconds=Math.round(60*b);return c};f.distanceToIdealHorizon=function(a,b){b=b||f.earthRadius;a=l.vec3d.dot(a,a);return Math.sqrt(Math.abs(a-b*b))}})},"esri/views/3d/support/mathUtils":function(){define(["require",
"exports","../lib/glMatrix"],function(b,f,q){function g(a){return Math.asin(1<a?1:-1>a?-1:a)}function n(a){return Math.acos(1<a?1:-1>a?-1:a)}function l(a,b,c){return a<b?b:a>c?c:a}function k(a){for(var b in a){var c=a[b];c instanceof Function&&(a[b]=c.bind(a))}return a}Object.defineProperty(f,"__esModule",{value:!0});f.deg2rad=function(a){return a*Math.PI/180};f.rad2deg=function(a){return 180*a/Math.PI};f.asin=g;f.acos=n;f.sign=Math.sign||function(a){return+(0<a)-+(0>a)||+a};f.log2=Math.log2||function(a){return Math.log(a)/
Math.LN2};f.fovx2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/b)};f.fovy2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/c)};f.makeOrthonormal=function(a,b,c){c=c||a;var d=q.vec3d.dot(a,b);q.vec3d.set3(a[0]-d*b[0],a[1]-d*b[1],a[2]-d*b[2],c);q.vec3d.normalize(c)};f.tangentFrame=function(a,b,c){Math.abs(a[0])>Math.abs(a[1])?q.vec3d.set3(0,1,0,b):q.vec3d.set3(1,0,0,b);q.vec3d.cross(a,b,c);q.vec3d.normalize(b);q.vec3d.cross(c,a,b);q.vec3d.normalize(c)};f.cartesianToSpherical=function(a,
b){var c=q.vec3d.length(a),d=g(a[2]/c);q.vec3d.set3(c,d,Math.atan2(a[1]/c,a[0]/c),b)};f.sphericalToCartesian=function(a,b){var c=a[0],d=a[1];a=a[2];var g=Math.cos(d);q.vec3d.set3(c*g*Math.cos(a),c*g*Math.sin(a),c*Math.sin(d),b)};f.lerp=function(a,b,c){return a+(b-a)*c};f.bilerp=function(a,b,c,d,g,f){a+=(b-a)*g;return a+(c+(d-c)*g-a)*f};f.slerp=function(a,b,d,g){void 0===g&&(g=a);var f=q.vec3d.length(a),p=q.vec3d.length(b),k=q.vec3d.dot(a,b)/(f*p);if(.9999999999999999>k){var k=Math.acos(k),r=((1-d)*
f+d*p)/Math.sin(k),p=r/p*Math.sin(d*k);q.vec3d.scale(a,r/f*Math.sin((1-d)*k),h);q.vec3d.scale(b,p,c);return q.vec3d.add(h,c,g)}return q.vec3d.lerp(a,b,d,g)};f.angle=function(a,b,g){a=q.vec3d.normalize(a,h);b=q.vec3d.normalize(b,c);var f=n(q.vec3d.dot(a,b));return g&&(a=q.vec3d.cross(a,b,d),0>q.vec3d.dot(a,g))?-f:f};f.clamp=l;f.isFinite=Number.isFinite||function(a){return"number"===typeof a&&window.isFinite(a)};f.isNaN=Number.isNaN||function(a){return a!==a};f.makePiecewiseLinearFunction=function(a){var b=
a.length;return function(c){var d=0;if(c<=a[0][0])return a[0][1];if(c>=a[b-1][0])return a[b-1][1];for(;c>a[d][0];)d++;var g=a[d][0];c=(g-c)/(g-a[d-1][0]);return c*a[d-1][1]+(1-c)*a[d][1]}};f.vectorEquals=function(a,b){if(null==a||null==b)return a!==b;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0};f.floatEqualRelative=function(a,b,c){void 0===c&&(c=1E-6);if(f.isNaN(a)||f.isNaN(b))return!1;if(a===b)return!0;var d=Math.abs(a-b),g=Math.abs(a),h=Math.abs(b);
if(0===a||0===b||1E-12>g&&1E-12>h){if(d>.01*c)return!1}else if(d/(g+h)>c)return!1;return!0};f.floatEqualAbsolute=function(a,b,c){void 0===c&&(c=1E-6);return f.isNaN(a)||f.isNaN(b)?!1:(a>b?a-b:b-a)<=c};b=function(){function a(a,b){this.min=a;this.max=b;this.range=b-a}a.prototype.ndiff=function(a,b){void 0===b&&(b=0);return Math.ceil((a-b)/this.range)*this.range+b};a.prototype._normalize=function(a,b,c,d){void 0===d&&(d=0);c-=d;c<a?c+=this.ndiff(a-c):c>b&&(c-=this.ndiff(c-b));return c+d};a.prototype.normalize=
function(a,b){return this._normalize(this.min,this.max,a,b)};a.prototype.clamp=function(a,b){void 0===b&&(b=0);return l(a-b,this.min,this.max)+b};a.prototype.monotonic=function(a,b,c){return a<b?b:b+this.ndiff(a-b,c)};a.prototype.minimalMonotonic=function(a,b,c){return this._normalize(a,a+this.range,b,c)};a.prototype.center=function(a,b,c){b=this.monotonic(a,b,c);return this.normalize((a+b)/2,c)};a.prototype.diff=function(a,b,c){return this.monotonic(a,b,c)-a};a.prototype.contains=function(a,b,c){b=
this.minimalMonotonic(a,b);c=this.minimalMonotonic(a,c);return c>a&&c<b};return a}();f.Cyclical=b;f.cyclical2PI=k(new b(0,2*Math.PI));f.cyclicalPI=k(new b(-Math.PI,Math.PI));f.cyclicalDeg=k(new b(0,360));var d=q.vec3d.create(),h=q.vec3d.create(),c=q.vec3d.create()})},"esri/views/3d/webgl-engine/lib/BufferVectorMath":function(){define(["require","exports"],function(b,f){Object.defineProperty(f,"__esModule",{value:!0});(function(b){b.length=function(b,f){var g=b[f],k=b[f+1];b=b[f+2];return Math.sqrt(g*
g+k*k+b*b)};b.normalize=function(b,f){var g=b[f],k=b[f+1],d=b[f+2],g=1/Math.sqrt(g*g+k*k+d*d);b[f]*=g;b[f+1]*=g;b[f+2]*=g};b.scale=function(b,f,l){b[f]*=l;b[f+1]*=l;b[f+2]*=l};b.add=function(b,f,l,k,d,h){void 0===h&&(h=f);d=d||b;d[h]=b[f]+l[k];d[h+1]=b[f+1]+l[k+1];d[h+2]=b[f+2]+l[k+2]};b.subtract=function(b,f,l,k,d,h){void 0===h&&(h=f);d=d||b;d[h]=b[f]-l[k];d[h+1]=b[f+1]-l[k+1];d[h+2]=b[f+2]-l[k+2]}})(f.Vec3Compact||(f.Vec3Compact={}))})},"esri/geometry/support/meshUtils/offset":function(){define(["require",
"exports","./projection","../../../views/3d/lib/glMatrix","../../../views/3d/support/projectionUtils"],function(b,f,q,g,n){function l(b,a){if(b)for(var c=0;c<b.length;c+=3)for(var d=0;3>d;d++)b[c+d]+=a[d]}Object.defineProperty(f,"__esModule",{value:!0});f.offset=function(b,a,f){if(b.vertexAttributes&&b.vertexAttributes.position){var c=b.spatialReference;if(c.isWGS84||c.isWebMercator&&(!f||!1!==f.geographic)){f=b.spatialReference;var c=b.vertexAttributes.position,p=b.vertexAttributes.normal,z=new Float64Array(c.length),
t=new Float32Array(p?p.length:0),x=b.extent.center,r=k;n.computeLinearTransformation(f,[x.x,x.y,x.z],d,n.SphericalECEFSpatialReference);g.mat4d.toMat3(d,h);g.mat3d.multiplyVec3(h,a,r);q.projectToECEF(c,f,z);p&&q.projectNormalToECEF(p,c,z,f,t);l(z,r);q.projectFromECEF(z,c,f);p&&q.projectNormalFromECEF(t,c,z,f,p)}else l(b.vertexAttributes.position,a);b.clearCache()}};var k=g.vec3d.create(),d=g.mat4d.create(),h=g.mat3d.create()})},"esri/geometry/support/meshUtils/primitives":function(){define(["require",
"exports","../../../geometry","./georeference","../../../views/3d/lib/glMatrix"],function(b,f,q,g,n){Object.defineProperty(f,"__esModule",{value:!0});f.createUnitSizeBox=function(){for(var b=k.faceDescriptions,a=k.faceVertexOffsets,d=k.uvScales,g=4*b.length,f=new Float64Array(3*g),h=new Float32Array(3*g),g=new Float32Array(2*g),l=new Uint32Array(6*b.length),n=0,r=0,m=0,e=0,w=0;w<b.length;w++){for(var q=b[w],A=n/3,D=0,B=a;D<B.length;D++){var F=B[D];l[e++]=A+F}A=q.corners;for(D=0;4>D;D++){B=A[D];F=
0;g[m++]=.25*d[D][0]+q.uvOrigin[0];g[m++]=q.uvOrigin[1]-.25*d[D][1];for(var C=0;3>C;C++)0!==q.axis[C]?(f[n++]=.5*q.axis[C],h[r++]=q.axis[C]):(f[n++]=.5*B[F++],h[r++]=0)}}return{position:f,normal:h,uv:g,faces:l}};f.createUnitSizeSphere=function(b){void 0===b&&(b=0);b=Math.round(8*Math.pow(2,b));for(var a=2*b,c=(b-1)*(a+1)+2*a,g=new Float64Array(3*c),f=new Float32Array(3*c),c=new Float32Array(2*c),h=new Uint32Array((b-1)*a*6),k=0,l=0,r=0,m=0,e=0,n=0;n<=b;n++){var q=n/b*Math.PI+.5*Math.PI,A=Math.cos(q);
d[2]=Math.sin(q);for(var D=(q=0===n||n===b)?a-1:a,B=0;B<=D;B++){var F=B/D*2*Math.PI;d[0]=-Math.sin(F)*A;d[1]=Math.cos(F)*A;for(F=0;3>F;F++)g[k++]=.5*d[F],f[l++]=d[F];c[r++]=(B+(q?.5:0))/a;c[r++]=n/b;0!==n&&B!==a&&(n!==b&&(h[m++]=e,h[m++]=e+1,h[m++]=e-a),1!==n&&(h[m++]=e,h[m++]=e-a,h[m++]=e-a-1));e++}}return{position:g,normal:f,uv:c,faces:h}};f.createUnitSizeCylinder=function(b){void 0===b&&(b=0);b=Math.round(16*Math.pow(2,b));for(var a=4*(b+1)+2*b,c=new Float64Array(3*a),g=new Float32Array(3*a),a=
new Float32Array(2*a),f=new Uint32Array(12*b),h=0,k=0,l=0,r=0,m=0,e=0;5>=e;e++)for(var n=0===e||5===e,q=1>=e||4<=e,A=2===e||4===e,D=n?b-1:b,B=0;B<=D;B++){var F=B/D*2*Math.PI,C=n?0:.5;d[0]=C*Math.sin(F);d[1]=C*-Math.cos(F);d[2]=2>=e?.5:-.5;for(F=0;3>F;F++)c[h++]=d[F],q?g[k++]=2===F?1>=e?1:-1:0:g[k++]=2===F?0:d[F]/C;a[l++]=(B+(n?.5:0))/b;1>=e?a[l++]=1*e/3:3>=e?a[l++]=1*(e-2)/3+1/3:a[l++]=1*(e-4)/3+2/3;A||0===e||B===b||(5!==e&&(f[r++]=m,f[r++]=m+1,f[r++]=m-b),1!==e&&(f[r++]=m,f[r++]=m-b,f[r++]=m-b-1));
m++}return{position:c,normal:g,uv:a,faces:f}};f.createUnitSizePlane=function(b){b=l.facingAxisOrderSwap[b];for(var a=l.position,c=l.normal,d=new Float64Array(a.length),g=new Float32Array(c.length),f=0,h=0;4>h;h++)for(var k=f,r=0;3>r;r++){var m=b[r],e=Math.abs(m)-1,m=0<=m?1:-1;d[f]=a[k+e]*m;g[f]=c[k+e]*m;f++}return{position:d,normal:g,uv:new Float32Array(l.uv),faces:new Uint32Array(l.faces)}};var l={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],
faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};f.convertUnitGeometry=function(b,a,f){for(var c=0;c<b.position.length;c+=3)b.position[c+2]+=.5;c=f&&f.size;if(null!=c){c="number"===typeof c?[c,c,c]:[null!=c.width?c.width:1,null!=c.depth?c.depth:1,null!=c.height?c.height:1];h[0]=c[0];h[4]=c[1];h[8]=c[2];for(var p=0;p<b.position.length;p+=3){for(var k=0;3>k;k++)d[k]=b.position[p+k];n.mat3d.multiplyVec3(h,d);for(k=0;3>k;k++)b.position[p+
k]=d[k]}if(c[0]!==c[1]||c[1]!==c[2])for(h[0]=1/c[0],h[4]=1/c[1],h[8]=1/c[2],p=0;p<b.normal.length;p+=3){for(k=0;3>k;k++)d[k]=b.normal[p+k];n.mat3d.multiplyVec3(h,d);n.vec3d.normalize(d);for(k=0;3>k;k++)b.normal[p+k]=d[k]}}c=g.georeference(b,a,f);return new q.Mesh({vertexAttributes:{position:c.position,normal:c.normal,uv:b.uv},components:[{faces:b.faces,material:f&&f.material||null}],spatialReference:a.spatialReference})};var k={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,
-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]};f.boxFaceOrder={south:0,east:1,north:2,west:3,up:4,
down:5};var d=n.vec3d.create(),h=n.mat3d.identity()})},"esri/geometry/support/meshUtils/georeference":function(){define(["require","exports","../../../views/3d/lib/glMatrix","../../../views/3d/support/projectionUtils"],function(b,f,q,g){Object.defineProperty(f,"__esModule",{value:!0});f.georeference=function(b,d,f){var c=d.spatialReference;if(c.isWGS84||c.isWebMercator&&(!f||!1!==f.geographic)){f=d.spatialReference;g.computeLinearTransformation(d.spatialReference,[d.x,d.y,d.z||0],n,g.SphericalECEFSpatialReference);
var c=b.position,a=n,h=d.spatialReference,k=new Float64Array(c.length);for(d=0;d<c.length;d+=3){for(var v=0;3>v;v++)l[v]=c[d+v];q.mat4d.multiplyVec3(a,l);for(v=0;3>v;v++)k[d+v]=l[v]}d=new Float64Array(c.length);g.bufferToBuffer(k,g.SphericalECEFSpatialReference,0,d,h,0,k.length/3);b=b.normal;if(f.isWebMercator&&b){f=new Float32Array(b.length);for(c=0;c<b.length;c+=3)for(a=g.webMercator.y2lat(d[c+1]),a=Math.cos(a),l[0]=b[c+0]*a,l[1]=b[c+1]*a,l[2]=b[c+2],q.vec3d.normalize(l),a=0;3>a;a++)f[c+a]=l[a];
b=f}b={position:d,normal:b}}else{f=new Float64Array(b.position.length);c=b.position;for(a=0;a<c.length;a+=3)f[a+0]=c[a+0]+d.x,f[a+1]=c[a+1]+d.y,f[a+2]=c[a+2]+(d.z||0);b={position:f,normal:b.normal}}return b};var n=q.mat4d.create(),l=q.vec3d.create()})},"esri/geometry/support/meshUtils/rotate":function(){define("require exports ../../../core/Logger ./projection ../../../views/3d/lib/glMatrix ../../../views/3d/support/projectionUtils".split(" "),function(b,f,q,g,n,l){function k(a,b,c){void 0===c&&(c=
z);if(a)for(n.mat4d.identity(u),n.mat4d.rotate(u,b[3],b),b=0;b<a.length;b+=3){for(var e=0;3>e;e++)h[e]=a[b+e]-c[e];n.mat4d.multiplyVec3(u,h);for(e=0;3>e;e++)a[b+e]=h[e]+c[e]}}Object.defineProperty(f,"__esModule",{value:!0});var d=q.getLogger("esri.geometry.support.meshUtils.rotate");f.rotate=function(a,b,f){if(a.vertexAttributes&&a.vertexAttributes.position&&0!==b[3]){var e=a.spatialReference,m=f&&f.origin||a.extent.center;if(e.isWGS84||e.isWebMercator&&(!f||!1!==f.geographic)){f=a.spatialReference;
e=t;l.pointToVector(m,e,l.SphericalECEFSpatialReference)||l.pointToVector(a.extent.center,e,l.SphericalECEFSpatialReference);var m=a.vertexAttributes.position,h=a.vertexAttributes.normal,p=new Float64Array(m.length),r=new Float32Array(h?h.length:0);l.computeLinearTransformation(l.SphericalECEFSpatialReference,e,u,l.SphericalECEFSpatialReference);n.mat4d.toMat3(u,v);var q=n.mat3d.multiplyVec3(v,b,c);q[3]=b[3];g.projectToECEF(m,f,p);h&&g.projectNormalToECEF(h,m,p,f,r);k(p,q,e);g.projectFromECEF(p,m,
f);h&&(k(r,q),g.projectNormalFromECEF(r,m,p,f,h))}else f=t,l.pointToVector(m,f,a.spatialReference)||(e=a.extent.center,f[0]=e.x,f[1]=e.y,f[2]=e.z,d.error("Failed to project specified origin (wkid:"+m.spatialReference.wkid+") to mesh spatial reference (wkid:"+a.spatialReference.wkid+"). Using mesh extent.center instead")),k(a.vertexAttributes.position,b,f),k(a.vertexAttributes.normal,b);a.clearCache()}};f.axisAngleFrom=function(a,b,c){n.vec3d.set(a,c);c[3]=b;return c};f.axisAngleMultiply=function(b,
c,d){n.quat4d.fromAngleAxis(b[3],b,a);n.quat4d.fromAngleAxis(c[3],c,p);n.quat4d.multiply(p,a,a);n.quat4d.toAngleAxis(a,d);return d};var h=n.vec3d.create(),c=n.vec4d.create(),a=n.quat4d.create(),p=n.quat4d.create(),u=n.mat4d.create(),v=n.mat3d.create(),z=[0,0,0],t=[0,0,0]})},"esri/geometry/Multipoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./support/zmUtils".split(" "),
function(b,f,q,g,n,l,k,d,h,c){function a(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}b=function(b){function d(){for(var a=0;a<arguments.length;a++);a=b.call(this)||this;a.points=[];a.type="multipoint";return a}q(d,b);f=d;d.prototype.normalizeCtorArgs=function(a,b){if(!a&&!b)return null;var c={};Array.isArray(a)?(c.points=a,c.spatialReference=b):!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?(a.points&&(c.points=a.points),a.spatialReference&&(c.spatialReference=
a.spatialReference),a.hasZ&&(c.hasZ=a.hasZ),a.hasM&&(c.hasM=a.hasM)):c.spatialReference=a;if(a=c.points&&c.points[0])void 0===c.hasZ&&void 0===c.hasM?(c.hasZ=2<a.length,c.hasM=!1):void 0===c.hasZ?c.hasZ=3<a.length:void 0===c.hasM&&(c.hasM=3<a.length);return c};Object.defineProperty(d.prototype,"extent",{get:function(){var b=this.points;if(!b.length)return null;for(var c=new k,d=this.hasZ,g=this.hasM,f=d?3:2,e=b[0],h=a(Math.min),p=a(Math.max),l=e[0],n=e[1],u=e[0],e=e[1],q,v,G,W,fa=0,V=b.length;fa<
V;fa++){var H=b[fa],ba=H[0],J=H[1],l=h(l,ba),n=h(n,J),u=p(u,ba),e=p(e,J);d&&2<H.length&&(ba=H[2],q=h(q,ba),G=p(G,ba));g&&H.length>f&&(H=H[f],v=h(v,H),W=p(W,H))}c.xmin=l;c.ymin=n;c.xmax=u;c.ymax=e;c.spatialReference=this.spatialReference;d?(c.zmin=q,c.zmax=G):(c.zmin=null,c.zmax=null);g?(c.mmin=v,c.mmax=W):(c.mmin=null,c.mmax=null);return c},enumerable:!0,configurable:!0});d.prototype.writePoints=function(a,b,c,d){b.points=n.clone(this.points)};d.prototype.addPoint=function(a){this.clearCache();c.updateSupportFromPoint(this,
a);Array.isArray(a)?this.points.push(a):this.points.push(a.toArray());return this};d.prototype.clone=function(){var a={points:n.clone(this.points),spatialReference:this.spatialReference};this.hasZ&&(a.hasZ=!0);this.hasM&&(a.hasM=!0);return new f(a)};d.prototype.getPoint=function(a){if(!this._validateInputs(a))return null;a=this.points[a];var b={x:a[0],y:a[1],spatialReference:this.spatialReference},c=2;this.hasZ&&(b.z=a[2],c=3);this.hasM&&(b.m=a[c]);return new h(b)};d.prototype.removePoint=function(a){if(!this._validateInputs(a))return null;
this.clearCache();return new h(this.points.splice(a,1)[0],this.spatialReference)};d.prototype.setPoint=function(a,b){if(!this._validateInputs(a))return this;this.clearCache();c.updateSupportFromPoint(b);this.points[a]=b.toArray();return this};d.prototype.toJSON=function(a){return this.write(null,a)};d.prototype._validateInputs=function(a){return null!=a&&0<=a&&a<this.points.length};g([l.property({dependsOn:["points","hasZ","hasM","spatialReference"]})],d.prototype,"cache",void 0);g([l.property({dependsOn:["cache"]})],
d.prototype,"extent",null);g([l.property({type:[[Number]],json:{write:{isRequired:!0}}})],d.prototype,"points",void 0);g([l.writer("points")],d.prototype,"writePoints",null);return d=f=g([l.subclass("esri.geometry.Multipoint")],d);var f}(l.declared(d));b.prototype.toJSON.isDefaultToJSON=!0;return b})},"esri/geometry/support/zmUtils":function(){define(["require","exports"],function(b,f){Object.defineProperty(f,"__esModule",{value:!0});f.updateSupportFromPoint=function(b,g,f){void 0===f&&(f=!1);var l=
b.hasM,k=b.hasZ;Array.isArray(g)?4!==g.length||l||k?3===g.length&&f&&!l?(k=!0,l=!1):3===g.length&&l&&k&&(k=l=!1):k=l=!0:(k=!k&&g.hasZ&&(!l||g.hasM),l=!l&&g.hasM&&(!k||g.hasZ));b.hasZ=k;b.hasM=l}})},"esri/geometry/Polygon":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/centroid ./support/contains ./support/coordsUtils ./support/intersects ./support/webMercatorUtils ./support/zmUtils".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z,t){function x(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}var r=x(Math.min),m=x(Math.max);b=function(b){function e(){for(var a=0;a<arguments.length;a++);a=b.call(this)||this;a.rings=[];a.type="polygon";return a}q(e,b);d=e;e.createEllipse=function(a){var b=a.center.x,c=a.center.y,e=a.center.z,g=a.center.m,f=a.center.hasZ,m=a.center.hasM,h=a.longAxis,p=a.shortAxis,r=a.numberOfPoints;a=a.view;for(var k=[],l=2*Math.PI/r,n=f?3:2,t=0;t<r;t++){var u=
a.toMap(h*Math.cos(t*l)+b,p*Math.sin(t*l)+c),u=[u.x,u.y];f&&(u[2]=e);m&&(u[n]=g);k.push(u)}k.push(k[0]);return new d({rings:[k],spatialReference:a.spatialReference})};e.createCircle=function(a){return d.createEllipse({center:a.center,longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,view:a.view})};e.fromExtent=function(a){var b=a.clone().normalize();a=a.spatialReference;var c=!1,e=!1;b.map(function(a){a.hasZ&&(c=!0);a.hasM&&(e=!0)});b={rings:b.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,
a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(c&&a.hasZ)for(var d=a.zmin+.5*(a.zmax-a.zmin),g=0;g<b.length;g++)b[g].push(d);if(e&&a.hasM)for(a=a.mmin+.5*(a.mmax-a.mmin),g=0;g<b.length;g++)b[g].push(a);return b}),spatialReference:a};c&&(b.hasZ=!0);e&&(b.hasM=!0);return new d(b)};e.prototype.normalizeCtorArgs=function(a,b){var e=null,d,g,f=null;a&&!Array.isArray(a)?(e=a.rings?a.rings:null,b||(a.spatialReference?b=a.spatialReference:a.rings||(b=a)),d=a.hasZ,g=a.hasM):e=a;e=e||[];b=b||c.WGS84;
e.length&&e[0]&&null!=e[0][0]&&"number"===typeof e[0][0]&&(e=[e]);if(f=e[0]&&e[0][0])void 0===d&&void 0===g?(d=2<f.length,g=!1):void 0===d?d=!g&&3<f.length:void 0===g&&(g=!d&&3<f.length);return{rings:e,spatialReference:b,hasZ:d,hasM:g}};Object.defineProperty(e.prototype,"centroid",{get:function(){var b=a.polygonCentroid(this);if(!b||isNaN(b[0])||isNaN(b[1])||this.hasZ&&isNaN(b[2]))return null;var c=new h;c.x=b[0];c.y=b[1];c.spatialReference=this.spatialReference;this.hasZ&&(c.z=b[2]);return c},enumerable:!0,
configurable:!0});Object.defineProperty(e.prototype,"extent",{get:function(){var a=this.hasZ,b=this.hasM,c=this.spatialReference,e=this.rings,d=a?3:2;if(!e.length||!e[0].length)return null;for(var g=e[0][0],f=g[0],g=g[1],h=e[0][0],p=h[0],h=h[1],l=void 0,n=void 0,t=void 0,u=void 0,q=[],w=0;w<e.length;w++){for(var v=e[w],z=v[0],x=z[0],z=z[1],y=v[0],da=y[0],y=y[1],Q=void 0,P=void 0,Y=void 0,aa=void 0,ga=0;ga<v.length;ga++){var ea=v[ga],la=ea[0],ma=ea[1],f=r(f,la),g=r(g,ma),p=m(p,la),h=m(h,ma),x=r(x,
la),z=r(z,ma),da=m(da,la),y=m(y,ma);a&&2<ea.length&&(la=ea[2],l=r(l,la),n=m(n,la),Q=r(Q,la),P=m(P,la));b&&ea.length>d&&(aa=ea[d],t=r(l,aa),u=m(n,aa),Y=r(Q,aa),aa=m(P,aa))}q.push(new k({xmin:x,ymin:z,zmin:Q,mmin:Y,xmax:da,ymax:y,zmax:P,mmax:aa,spatialReference:c}))}e=new k;e.xmin=f;e.ymin=g;e.xmax=p;e.ymax=h;e.spatialReference=c;a&&(e.zmin=l,e.zmax=n);b&&(e.mmin=t,e.mmax=u);e.cache._partwise=1<q.length?q:null;return e},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"isSelfIntersecting",
{get:function(){return v.isSelfIntersecting(this.rings)},enumerable:!0,configurable:!0});e.prototype.writePaths=function(a,b,c,e){b.rings=n.clone(this.rings)};e.prototype.addRing=function(a){if(a){this.clearCache();var b=this.rings,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{for(var e=[],d=0,g=a.length;d<g;d++)e[d]=a[d].toArray();b[c]=e}return this}};e.prototype.clone=function(){var a=new d;a.spatialReference=this.spatialReference;a.rings=n.clone(this.rings);a.hasZ=this.hasZ;a.hasM=this.hasM;
return a};e.prototype.contains=function(a){if(!a)return!1;z.canProject(a,this.spatialReference)&&(a=z.project(a,this.spatialReference));return p.polygonContainsPoint(this,a)};e.prototype.isClockwise=function(a){var b=this;a=Array.isArray(a[0])?a:a.map(function(a){return b.hasZ?b.hasM?[a.x,a.y,a.z,a.m]:[a.x,a.y,a.z]:[a.x,a.y]});return u.isClockwise(a,this.hasM,this.hasZ)};e.prototype.getPoint=function(a,b){if(!this._validateInputs(a,b))return null;a=this.rings[a][b];b=this.hasZ;var c=this.hasM;return b&&
!c?new h(a[0],a[1],a[2],void 0,this.spatialReference):c&&!b?new h(a[0],a[1],void 0,a[2],this.spatialReference):b&&c?new h(a[0],a[1],a[2],a[3],this.spatialReference):new h(a[0],a[1],this.spatialReference)};e.prototype.insertPoint=function(a,b,c){if(!this._validateInputs(a,b,!0))return this;this.clearCache();t.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.rings[a].splice(b,0,c);return this};e.prototype.removePoint=function(a,b){if(!this._validateInputs(a,b))return null;this.clearCache();
return new h(this.rings[a].splice(b,1)[0],this.spatialReference)};e.prototype.removeRing=function(a){if(!this._validateInputs(a,null))return null;this.clearCache();a=this.rings.splice(a,1)[0];var b=this.spatialReference;return a.map(function(a){return new h(a,b)})};e.prototype.setPoint=function(a,b,c){if(!this._validateInputs(a,b))return this;this.clearCache();t.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.rings[a][b]=c;return this};e.prototype._validateInputs=function(a,
b,c){void 0===c&&(c=!1);return null==a||0>a||a>=this.rings.length||null!=b&&(a=this.rings[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=a.length))?!1:!0};e.prototype.toJSON=function(a){return this.write(null,a)};g([l.property({dependsOn:["hasM","hasZ","rings"]})],e.prototype,"cache",void 0);g([l.property({readOnly:!0,dependsOn:["cache"]})],e.prototype,"centroid",null);g([l.property({dependsOn:["cache"],readOnly:!0})],e.prototype,"extent",null);g([l.property({dependsOn:["cache"],readOnly:!0})],e.prototype,
"isSelfIntersecting",null);g([l.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],e.prototype,"rings",void 0);g([l.writer("rings")],e.prototype,"writePaths",null);return e=d=g([l.subclass("esri.geometry.Polygon")],e);var d}(l.declared(d));b.prototype.toJSON.isDefaultToJSON=!0;return b})},"esri/geometry/support/centroid":function(){define(["require","exports","../support/coordsUtils"],function(b,f,q){function g(b,d){if(!b||!b.length)return null;for(var g=[],c=[],a=d?[Infinity,-Infinity,Infinity,
-Infinity,Infinity,-Infinity]:[Infinity,-Infinity,Infinity,-Infinity],f=0,k=b.length;f<k;f++){var q=n(b[f],d,a);q&&c.push(q)}c.sort(function(a,b){var c=a[2]-b[2];0===c&&d&&(c=a[4]-b[4]);return c});c.length&&(f=6*c[0][2],g[0]=c[0][0]/f,g[1]=c[0][1]/f,d&&(f=6*c[0][4],g[2]=0!==f?c[0][3]/f:0),g[0]<a[0]||g[0]>a[1]||g[1]<a[2]||g[1]>a[3]||d&&(g[2]<a[4]||g[2]>a[5]))&&(g.length=0);if(!g.length)if(b=b[0]&&b[0].length?l(b[0],d):null)g[0]=b[0],g[1]=b[1],d&&2<b.length&&(g[2]=b[2]);else return null;return g}function n(b,
d,g){for(var c=0,a=0,f=0,h=0,k=0,l=0,n=b.length-1;l<n;l++){var q=b[l],r=q[0],m=q[1],e=q[2],w=b[l+1],y=w[0],A=w[1],D=w[2],B=r*A-y*m,h=h+B,c=c+(r+y)*B,a=a+(m+A)*B;d&&2<q.length&&2<w.length&&(B=r*D-y*e,f+=(e+D)*B,k+=B);r<g[0]&&(g[0]=r);r>g[1]&&(g[1]=r);m<g[2]&&(g[2]=m);m>g[3]&&(g[3]=m);d&&(e<g[4]&&(g[4]=e),e>g[5]&&(g[5]=e))}0<h&&(h*=-1);0<k&&(k*=-1);if(!h)return null;b=[c,a,.5*h];d&&(b[3]=f,b[4]=.5*k);return b}function l(b,d){for(var g=d?[0,0,0]:[0,0],c=d?[0,0,0]:[0,0],a=0,f=0,k=0,l=0,n=0,t=b.length;n<
t-1;n++){var x=b[n],r=b[n+1];x&&r&&(g[0]=x[0],g[1]=x[1],c[0]=r[0],c[1]=r[1],d&&2<x.length&&2<r.length&&(g[2]=x[2],c[2]=r[2]),length=q.getLength(g,c))&&(a+=length,x=q.getMidpoint(x,r),f+=length*x[0],k+=length*x[1],d&&2<x.length&&(l+=length*x[2]))}return 0<a?d?[f/a,k/a,l/a]:[f/a,k/a]:b.length?b[0]:null}Object.defineProperty(f,"__esModule",{value:!0});f.extentCentroid=function(b){return b?b.hasZ?[b.xmax-b.xmin/2,b.ymax-b.ymin/2,b.zmax-b.zmin/2]:[b.xmax-b.xmin/2,b.ymax-b.ymin/2]:null};f.polygonCentroid=
function(b){return b?g(b.rings,b.hasZ):null};f.ringsCentroid=g;f.lineCentroid=l})},"esri/geometry/Polyline":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/zmUtils".split(" "),function(b,f,q,g,n,l,k,d,h,c,a){function p(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}var u=p(Math.min),v=p(Math.max);b=function(b){function d(){for(var a=
0;a<arguments.length;a++);a=b.call(this)||this;a.paths=[];a.type="polyline";return a}q(d,b);f=d;d.prototype.normalizeCtorArgs=function(a,b){var e=null,d,g,f=null;a&&!Array.isArray(a)?(e=a.paths?a.paths:null,b||(a.spatialReference?b=a.spatialReference:a.paths||(b=a)),d=a.hasZ,g=a.hasM):e=a;e=e||[];b=b||c.WGS84;e.length&&e[0]&&null!=e[0][0]&&"number"===typeof e[0][0]&&(e=[e]);if(f=e[0]&&e[0][0])void 0===d&&void 0===g?(d=2<f.length,g=!1):void 0===d?d=!g&&3<f.length:void 0===g&&(g=!d&&3<f.length);return{paths:e,
spatialReference:b,hasZ:d,hasM:g}};Object.defineProperty(d.prototype,"extent",{get:function(){var a=this.hasZ,b=this.hasM,c=this.spatialReference,d=this.paths,g=a?3:2;if(!d.length||!d[0].length)return null;for(var f=d[0][0],h=f[0],f=f[1],p=d[0][0],l=p[0],p=p[1],n=void 0,t=void 0,q=void 0,z=void 0,x=[],H=0;H<d.length;H++){for(var ba=d[H],J=ba[0],Z=J[0],J=J[1],O=ba[0],N=O[0],O=O[1],K=void 0,M=void 0,U=void 0,T=void 0,da=0;da<ba.length;da++){var Q=ba[da],P=Q[0],Y=Q[1],h=u(h,P),f=u(f,Y),l=v(l,P),p=v(p,
Y),Z=u(Z,P),J=u(J,Y),N=v(N,P),O=v(O,Y);a&&2<Q.length&&(P=Q[2],n=u(n,P),t=v(t,P),K=u(K,P),M=v(M,P));b&&Q.length>g&&(T=Q[g],q=u(n,T),z=v(t,T),U=u(K,T),T=v(M,T))}x.push(new k({xmin:Z,ymin:J,zmin:K,mmin:U,xmax:N,ymax:O,zmax:M,mmax:T,spatialReference:c}))}d=new k;d.xmin=h;d.ymin=f;d.xmax=l;d.ymax=p;d.spatialReference=c;a&&(d.zmin=n,d.zmax=t);b&&(d.mmin=q,d.mmax=z);d.cache._partwise=1<x.length?x:null;return d},enumerable:!0,configurable:!0});d.prototype.writePaths=function(a,b,c,d){b.paths=n.clone(this.paths)};
d.prototype.addPath=function(a){if(a){this.clearCache();var b=this.paths,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{for(var d=[],g=0,f=a.length;g<f;g++)d[g]=a[g].toArray();b[c]=d}return this}};d.prototype.clone=function(){var a=new f;a.spatialReference=this.spatialReference;a.paths=n.clone(this.paths);a.hasZ=this.hasZ;a.hasM=this.hasM;return a};d.prototype.getPoint=function(a,b){if(!this._validateInputs(a,b))return null;a=this.paths[a][b];b=this.hasZ;var c=this.hasM;return b&&!c?new h(a[0],
a[1],a[2],void 0,this.spatialReference):c&&!b?new h(a[0],a[1],void 0,a[2],this.spatialReference):b&&c?new h(a[0],a[1],a[2],a[3],this.spatialReference):new h(a[0],a[1],this.spatialReference)};d.prototype.insertPoint=function(b,c,e){if(!this._validateInputs(b,c,!0))return this;this.clearCache();a.updateSupportFromPoint(this,e);Array.isArray(e)||(e=e.toArray());this.paths[b].splice(c,0,e);return this};d.prototype.removePath=function(a){if(!this._validateInputs(a,null))return null;this.clearCache();a=
this.paths.splice(a,1)[0];var b=this.spatialReference;return a.map(function(a){return new h(a,b)})};d.prototype.removePoint=function(a,b){if(!this._validateInputs(a,b))return null;this.clearCache();return new h(this.paths[a].splice(b,1)[0],this.spatialReference)};d.prototype.setPoint=function(b,c,e){if(!this._validateInputs(b,c))return this;this.clearCache();a.updateSupportFromPoint(this,e);Array.isArray(e)||(e=e.toArray());this.paths[b][c]=e;return this};d.prototype._validateInputs=function(a,b,
c){void 0===c&&(c=!1);return null==a||0>a||a>=this.paths.length||null!=b&&(a=this.paths[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=a.length))?!1:!0};d.prototype.toJSON=function(a){return this.write(null,a)};g([l.property({dependsOn:["hasM","hasZ","paths"]})],d.prototype,"cache",void 0);g([l.property({dependsOn:["cache"],readOnly:!0})],d.prototype,"extent",null);g([l.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],d.prototype,"paths",void 0);g([l.writer("paths")],d.prototype,"writePaths",null);
return d=f=g([l.subclass("esri.geometry.Polyline")],d);var f}(l.declared(d));b.prototype.toJSON.isDefaultToJSON=!0;return b})},"esri/geometry/ScreenPoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(b,f,q,g,n,l){return function(b){function d(){for(var c=[],a=0;a<arguments.length;a++)c[a]=arguments[a];c=b.apply(this,c)||this;c.x=0;c.y=0;c.z=void 0;return c}q(d,b);
f=d;d.prototype.normalizeCtorArgs=function(b,a){return"number"===typeof b?{x:b,y:a}:Array.isArray(b)?{x:b[0],y:b[1]}:b};d.prototype.clone=function(){return new f({x:this.x,y:this.y,z:this.z})};d.prototype.toArray=function(){return null==this.z?[this.x,this.y]:[this.x,this.y,this.z]};g([l.property({type:Number})],d.prototype,"x",void 0);g([l.property({type:Number})],d.prototype,"y",void 0);g([l.property({type:Number})],d.prototype,"z",void 0);return d=f=g([l.subclass("esri.geometry.ScreenPoint")],
d);var f}(l.declared(n))})},"esri/geometry/support/jsonUtils":function(){define("require exports ../Extent ../Multipoint ../Point ../Polygon ../Polyline".split(" "),function(b,f,q,g,n,l,k){function d(b){if(b){if(void 0!==b.x&&void 0!==b.y)return n.fromJSON(b);if(void 0!==b.paths)return k.fromJSON(b);if(void 0!==b.rings)return l.fromJSON(b);if(void 0!==b.points)return g.fromJSON(b);if(void 0!==b.xmin&&void 0!==b.ymin&&void 0!==b.xmax&&void 0!==b.ymax)return q.fromJSON(b)}return null}Object.defineProperty(f,
"__esModule",{value:!0});f.fromJson=function(b){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(a){console.warn(a.stack)}return d(b)};f.fromJSON=d;f.getJsonType=function(b){return b instanceof n?"esriGeometryPoint":b instanceof k?"esriGeometryPolyline":b instanceof l?"esriGeometryPolygon":b instanceof q?"esriGeometryEnvelope":b instanceof g?"esriGeometryMultipoint":null};var h={esriGeometryPoint:n,esriGeometryPolyline:k,esriGeometryPolygon:l,esriGeometryEnvelope:q,esriGeometryMultipoint:g};
f.getGeometryType=function(b){return b&&h[b]||null}})},"esri/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(b,f,q,g,n,l,k){return function(b){function d(a){a=b.call(this,a)||this;a.level=0;a.levelValue=null;a.resolution=0;a.scale=0;return a}q(d,b);c=d;d.prototype.clone=function(){return new c({level:this.level,
levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};g([l.property({type:k.Integer,json:{write:!0}})],d.prototype,"level",void 0);g([l.property({type:String,json:{write:!0}})],d.prototype,"levelValue",void 0);g([l.property({type:Number,json:{write:!0}})],d.prototype,"resolution",void 0);g([l.property({type:Number,json:{write:!0}})],d.prototype,"scale",void 0);return d=c=g([l.subclass("esri.layers.support.LOD")],d);var c}(l.declared(n))})},"esri/layers/mixins/ArcGISCachedService":function(){define(["dojo/_base/lang",
"dojo/io-query","./ArcGISService","../support/TileInfo","../support/TilemapCache"],function(b,f,q,g,n){return q.createSubclass([],{declaredClass:"esri.layers.mixins.ArcGISCachedService",properties:{minScale:{json:{origins:{service:{read:!1}}}},maxScale:{json:{origins:{service:{read:!1}}}},resampling:!0,supportsBlankTile:{value:!1,readOnly:!0,dependsOn:["version"],get:function(){return 10.2<=this.version}},tileInfo:{value:null,type:g,json:{read:function(b,f){var d=f.minScale?f.minScale:Infinity,h=
f.maxScale?f.maxScale:-Infinity;return b?(b.lods=b.lods.filter(function(b){return b.scale<=d&&b.scale>=h}),g.fromJSON(b)):null}}},tilemapCache:{value:null,json:{read:{source:["capabilities"],reader:function(b,g){return g.capabilities&&-1<g.capabilities.indexOf("Tilemap")?new n({layer:this}):null}}}},version:{}},getTileUrl:function(g,k,d){var h=b.mixin({},this.parsedUrl.query,{token:this.token,blankTile:!this.tilemapCache&&this.resampling&&this.supportsBlankTile?!1:null});g=this.parsedUrl.path+"/tile/"+
g+"/"+k+"/"+d;h=f.objectToQuery(h);return g+(h?"?"+h:"")}})})},"esri/layers/mixins/ArcGISService":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Logger ../../core/MultiOriginJSONSupport ../../core/accessorSupport/decorators ../support/arcgisLayerUrl".split(" "),function(b,f,q,g,n,l,k,d){var h=n.getLogger("esri.layers.mixins.ArcGISService");return function(b){function a(){return null!==b&&b.apply(this,arguments)||this}q(a,
b);Object.defineProperty(a.prototype,"title",{get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var a=d.parse(this.url);if(a&&a.title)return a.title}return this._get("title")||""},set:function(a){this._set("title",a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"url",{set:function(a){this._set("url",d.sanitizeUrl(a,h))},enumerable:!0,configurable:!0});g([k.property({dependsOn:["url"]})],a.prototype,"title",null);
g([k.property({type:String})],a.prototype,"url",null);return a=g([k.subclass("esri.layers.mixins.ArcGISService")],a)}(k.declared(l))})},"esri/core/MultiOriginJSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./accessorSupport/decorators ./accessorSupport/MultiOriginStore ./accessorSupport/PropertyOrigin ./accessorSupport/read ./accessorSupport/utils ./accessorSupport/write".split(" "),function(b,f,q,g,n,l,k,d,h,c,a){function p(a){return c.getProperties(a).store}
return function(b){function f(){var a=b.call(this)||this,g=c.getProperties(a),f=g.metadatas,h=g.store,m=new k.default;g.store=m;h.keys().forEach(function(a){m.set(a,h.get(a),d.OriginId.DEFAULTS)});Object.keys(f).forEach(function(a){g.internalGet(a)&&m.set(a,g.internalGet(a),d.OriginId.DEFAULTS)});return a}q(f,b);f.prototype.clear=function(a,b){void 0===b&&(b="user");return p(this).clear(a,d.nameToId(b))};f.prototype.read=function(a,b){h.default(this,a,b);return this};f.prototype.write=function(b,
c){b=b||{};a.default(this,b,c);return b};f.prototype.getAtOrigin=function(a,b){var c=p(this),g=d.nameToId(b);if("string"===typeof a)return c.get(a,g);var f={};a.forEach(function(a){f[a]=c.get(a,g)});return f};f.prototype.originOf=function(a){var b=p(this);if("string"===typeof a)return d.idToName(b.originOf(a));a.forEach(function(a){d.idToName(b.originOf(a))})};f.prototype.revert=function(a,b){var g=p(this),f=d.nameToId(b),m=c.getProperties(this);("string"===typeof a?"*"===a?Object.keys(g.getAll(f)):
[a]:a).forEach(function(a){m.propertyInvalidated(a);g.revert(a,f);m.propertyCommitted(a)})};f.prototype.removeOrigin=function(a){var b=p(this);a=d.nameToId(a);var c=b.getAll(a),g;for(g in c)b.originOf(g)===a&&b.set(g,c[g],d.OriginId.USER)};f.prototype.updateOrigin=function(a,b){var c=p(this);b=d.nameToId(b);var g=this.get(a);c.clear(a);c.set(a,g,b)};return f=g([l.subclass("esri.core.MultiOriginJSONSupport")],f)}(l.declared(n))})},"esri/core/accessorSupport/MultiOriginStore":function(){define(["require",
"exports","./PropertyOrigin"],function(b,f,q){Object.defineProperty(f,"__esModule",{value:!0});b=function(){function b(){this._propertyOriginMap={};this._originStores=Array(q.OriginId.NUM);this._values={}}b.prototype.get=function(b,g){return(g=void 0===g?this._values:this._originStores[g])?g[b]:void 0};b.prototype.keys=function(){return Object.keys(this._values)};b.prototype.set=function(b,g,f){void 0===f&&(f=q.OriginId.USER);var d=this._originStores[f];d||(d={},this._originStores[f]=d);d[b]=g;return!(b in
this._values)||this._propertyOriginMap[b]<=f?(d=this._values[b],this._values[b]=g,this._propertyOriginMap[b]=f,d!==g):!1};b.prototype.clear=function(b,g){void 0===g&&(g=q.OriginId.USER);var f=this._originStores[g];if(f){var d=f[b];delete f[b];if(b in this._values&&this._propertyOriginMap[b]===g)for(delete this._values[b],--g;0<=g;g--)if((f=this._originStores[g])&&b in f){this._values[b]=f[b];this._propertyOriginMap[b]=g;break}return d}};b.prototype.has=function(b,g){return(g=void 0===g?this._values:
this._originStores[g])?b in g:!1};b.prototype.revert=function(b,g){for(;0<g&&!this.has(b,g);)--g;var f=this._originStores[g],f=f&&f[b],d=this._values[b];this._values[b]=f;this._propertyOriginMap[b]=g;return d!==f};b.prototype.originOf=function(b,g){return this._propertyOriginMap[b]||q.OriginId.DEFAULTS};b.prototype.getAll=function(b){return this._originStores[b]};return b}();f.default=b})},"esri/layers/support/arcgisLayerUrl":function(){define(["require","exports","../../core/urlUtils"],function(b,
f,q){function g(b){var g=q.urlToObject(b).path.match(f.match);if(!g)return null;b=g[1];var d=g[2],h=g[3],g=g[4],c=d.indexOf("/");return{title:n(-1!==c?d.slice(c+1):d),serverType:h,sublayer:null!=g&&""!==g?parseInt(g,10):null,url:{path:b}}}function n(b){b=b.replace(/\s*[/_]+\s*/g," ");return b[0].toUpperCase()+b.slice(1)}Object.defineProperty(f,"__esModule",{value:!0});f.serverTypes="MapServer ImageServer FeatureServer SceneServer StreamServer VectorTileServer".split(" ");f.match=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/("+
f.serverTypes.join("|")+"))(?:\\/(?:layers\\/)?(\\d+))?","i");f.test=function(b){return!!f.match.test(b)};f.parse=g;f.cleanTitle=n;f.titleFromUrlAndName=function(b,f){var d=[];b&&(b=g(b))&&b.title&&d.push(b.title);f&&(f=n(f),d.push(f));if(2===d.length){if(-1!==d[0].toLowerCase().indexOf(d[1].toLowerCase()))return d[0];if(-1!==d[1].toLowerCase().indexOf(d[0].toLowerCase()))return d[1]}return d.join(" - ")};f.isHostedAgolService=function(b){if(!b)return!1;b=b.toLowerCase();var g=-1!==b.indexOf(".arcgis.com/");
b=-1!==b.indexOf("//services")||-1!==b.indexOf("//tiles")||-1!==b.indexOf("//features");return g&&b};f.isHostedSecuredProxyService=function(b,g){return g&&b&&-1!==b.toLowerCase().indexOf(g.toLowerCase())};f.sanitizeUrl=function(b,g){return b?q.removeTrailingSlash(q.removeQueryParameters(b,g)):b};f.sanitizeUrlWithLayerId=function(b,f,d){if(!f)return{url:f};f=q.removeQueryParameters(f,d);d=q.urlToObject(f);d=g(d.path);var h;d&&null!=d.sublayer&&(null==b.layerId&&(h=d.sublayer),f=d.url.path);return{url:q.removeTrailingSlash(f),
layerId:h}};f.writeUrlWithLayerId=function(b,g,d,f){var c=null;f?c=d:f=d;q.writeOperationalLayerUrl(g,f);f.url&&null!=b.layerId&&(f.url=q.join(f.url,c,b.layerId.toString()))}})},"esri/layers/support/TilemapCache":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/io-query dojo/_base/lang ../../request ../../core/Accessor ../../core/Error ../../core/Handles ../../core/Logger ../../core/LRUMap ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ./Tilemap".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z,t){var x=a.getLogger("esri.layers.support.TilemapCache");return function(a){function b(b){b=a.call(this)||this;b._handles=new c;b._pendingTilemapRequests={};b._availableLevels={};b.levels=5;b.cacheByteSize=2097152;b.request=k;return b}q(b,a);b.prototype.initialize=function(){var a=this;this._tilemapCache=new p(this.cacheByteSize,{sizeOfFunction:function(a){return a.byteSize}});this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers"],function(){return a._initializeTilemapDefinition()}),
v.init(this,"layer.tileInfo.lods",function(b){return a._initializeAvailableLevels(b)},!0)]);this._initializeTilemapDefinition()};b.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)};b.prototype.castLevels=function(a){return 2>=a?(x.error("Minimum levels for Tilemap is 3, but got ",a),3):a};Object.defineProperty(b.prototype,"size",{get:function(){return 1<<this.levels},enumerable:!0,configurable:!0});b.prototype.getTilemap=function(a,b,c){return this._tilemapFromCache(a,
b,c,this._tmpTilemapDefinition)};b.prototype.fetchTilemap=function(a,b,c,d){var e=this;if(!this._availableLevels[a])return u.reject(new h("tilemap-cache:level-unavailable","Level "+a+" is unavailable in the service"));var g=this._tmpTilemapDefinition;if(a=this._tilemapFromCache(a,b,c,g))return u.resolve(a);var f=t.tilemapDefinitionId(g),m=this._pendingTilemapRequests[f];m||(m=t.Tilemap.fromDefinition(g,d).then(function(a){e._tilemapCache.set(f,a);delete e._pendingTilemapRequests[f];return a}).catch(function(a){delete e._pendingTilemapRequests[f];
return u.reject(a)}),this._pendingTilemapRequests[f]=m);return u.create(function(a,b){m.then(a,b)})};b.prototype.getAvailability=function(a,b,c){return this._availableLevels[a]?(a=this.getTilemap(a,b,c))?a.getAvailability(b,c):"unknown":"unavailable"};b.prototype.getAvailabilityUpsample=function(a,b,c,d){d.level=a;d.row=b;d.col=c;a=this.layer.tileInfo;for(a.updateTileInfo(d);;)if(b=this.getAvailability(d.level,d.row,d.col),"unavailable"===b){if(!a.upsampleTile(d))return"unavailable"}else return b};
b.prototype.fetchAvailability=function(a,b,c,d){return this._availableLevels[a]?this.fetchTilemap(a,b,c,d).always(function(e){return e instanceof t.Tilemap?(e=e.getAvailability(b,c),"unavailable"===e?u.reject(new h("tile-map:tile-unavailable","Tile is not available",{level:a,row:b,col:c})):e):e&&"cancel"===e.dojoType?u.reject(e):"unknown"}):u.reject(new h("tilemap-cache:level-unavailable","Level "+a+" is unavailable in the service"))};b.prototype.fetchAvailabilityUpsample=function(a,b,c,d,g){var e=
this;d.level=a;d.row=b;d.col=c;var f=this.layer.tileInfo;f.updateTileInfo(d);return this.fetchAvailability(a,b,c,g).catch(function(a){return a&&"cancel"===a.dojoType?u.reject(a):f.upsampleTile(d)?e.fetchAvailabilityUpsample(d.level,d.row,d.col,d):u.reject(a)})};b.prototype._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var a=this.layer.parsedUrl,b=a.query;b&&b.token||!this.layer.token||(b=l.mixin(b,{token:this.layer.token}));this._tilemapCache.clear();this._tmpTilemapDefinition=
{service:{url:a.path,query:b?n.objectToQuery(b):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}};b.prototype._tilemapFromCache=function(a,b,c,d){a=this._getTilemapDefinition(a,b,c,d);a=t.tilemapDefinitionId(a);return this._tilemapCache.get(a)};b.prototype._getTilemapDefinition=function(a,b,c,d){d.level=a;d.row=b-b%this.size;d.col=c-c%this.size;return d};b.prototype._initializeAvailableLevels=function(a){var b=
this;this._availableLevels={};a&&a.forEach(function(a){return b._availableLevels[a.level]=!0})};g([z.property({constructOnly:!0,type:Number})],b.prototype,"levels",void 0);g([z.cast("levels")],b.prototype,"castLevels",null);g([z.property({readOnly:!0,dependsOn:["levels"],type:Number})],b.prototype,"size",null);g([z.property({constructOnly:!0,type:Number})],b.prototype,"cacheByteSize",void 0);g([z.property({constructOnly:!0})],b.prototype,"layer",void 0);g([z.property({constructOnly:!0})],b.prototype,
"request",void 0);return b=g([z.subclass("esri.layers.support.TilemapCache")],b)}(z.declared(d))})},"esri/core/LRUMap":function(){define(["require","exports"],function(b,f){return function(){function b(b,f){void 0===b&&(b=0);this.sizeOfFunction=function(){return 1};this._sizeOf=0;this._cache=new Map;this._queue=[];if(0>=b)throw Error("LRU cache size must be bigger than zero!");this._maxSize=b;f&&(f.disposeFunction&&(this.disposeFunction=f.disposeFunction),f.sizeOfFunction&&(this.sizeOfFunction=f.sizeOfFunction))}
Object.defineProperty(b.prototype,"length",{get:function(){return this._cache.size},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"size",{get:function(){return this._sizeOf},enumerable:!0,configurable:!0});b.prototype.clear=function(){var b=this;this._queue.length=0;this.disposeFunction&&this._cache.forEach(function(g,f){b.disposeFunction(f,g)});this._cache.clear();this._sizeOf=0};b.prototype.delete=function(b){var g=this._cache.get(b);return this._cache.delete(b)?(this._sizeOf-=
this.sizeOfFunction(g),this._queue.splice(this._queue.indexOf(b),1),this.disposeFunction&&this.disposeFunction(b,g),!0):!1};b.prototype.forEach=function(b,f){this._cache.forEach(b,f)};b.prototype.get=function(b){var g=this._cache.get(b);if(void 0!==g)return this._queue.splice(this._queue.indexOf(b),1),this._queue.unshift(b),g};b.prototype.has=function(b){return this._cache.has(b)};b.prototype.set=function(b,f){var g=this.get(b);void 0!==g?this._sizeOf-=this.sizeOfFunction(g):this._queue.unshift(b);
this._sizeOf+=this.sizeOfFunction(f);this._cache.set(b,f);this._collect();return this};b.prototype._collect=function(){for(;this._queue.length&&this._sizeOf>this._maxSize;){var b=this._queue.pop(),f=this._cache.get(b);this._cache.delete(b)&&(this._sizeOf-=this.sizeOfFunction(f),this.disposeFunction&&this.disposeFunction(b,f))}};return b}()})},"esri/core/watchUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/Promise"],function(b,f,q,g){function n(a,b){Array.isArray(a)?a.forEach(b):
b(a)}function l(a,b,c,d,g){g=a.watch(b,function(b,g,f,h){d&&!d(b)||c.call(a,b,g,f,h)},g);n(b,function(b){var e=a.get(b);d&&d(e)&&c.call(a,e,e,b,a)});return g}function k(a,b,c,d,f){function e(){m&&(m.remove(),m=null)}var h=!1,m,p=new q(e),r=new g;r.cancel=p.cancel;r.isCanceled=p.isCanceled;r.isFulfilled=p.isFulfilled;r.isRejected=p.isRejected;r.isResolved=p.isResolved;r.then=p.then;r.remove=e;Object.freeze(r);m=l(a,b,function(b,d,g,f){h=!0;e();c&&c.call(a,b,d,g,f);p.resolve({value:b,oldValue:d,propertyName:g,
target:f})},d,f);h&&m.remove();return r}function d(a){return!!a}function h(a){return!a}function c(a){return!0===a}function a(a){return!1===a}function p(a){return void 0!==a}function u(a){return void 0===a}function v(a,b,c,d){var g=Array.isArray(b)?b:-1<b.indexOf(",")?b.split(","):[b];b=a.watch(b,c,d);g.forEach(function(b){b=b.trim();var e=a.get(b);c.call(a,e,e,b,a)});return b}Object.defineProperty(f,"__esModule",{value:!0});f.init=v;f.watch=function(a,b,c,d){return a.watch(b,c,d)};f.once=function(a,
b,c,d){return k(a,b,c,null,d)};f.when=function(a,b,c,g){return l(a,b,c,d,g)};f.whenOnce=function(a,b,c,g){return k(a,b,c,d,g)};f.whenNot=function(a,b,c,d){return l(a,b,c,h,d)};f.whenNotOnce=function(a,b,c,d){return k(a,b,c,h,d)};f.whenTrue=function(a,b,d,g){return l(a,b,d,c,g)};f.whenTrueOnce=function(a,b,d,g){return k(a,b,d,c,g)};f.whenFalse=function(b,c,d,g){return l(b,c,d,a,g)};f.whenFalseOnce=function(b,c,d,g){return k(b,c,d,a,g)};f.whenDefined=function(a,b,c,d){return l(a,b,c,p,d)};f.whenDefinedOnce=
function(a,b,c,d){return k(a,b,c,p,d)};f.whenUndefined=function(a,b,c,d){return l(a,b,c,u,d)};f.whenUndefinedOnce=function(a,b,c,d){return k(a,b,c,u,d)};f.pausable=function(a,b,c,d){var g=!1,e=a.watch(b,function(b,e,d,f){g||c.call(a,b,e,d,f)},d);return{remove:function(){e.remove()},pause:function(){g=!0},resume:function(){g=!1}}};f.on=function(a,b,c,d,g,e,f){function h(b){var d=m[b];d&&(e&&e(d.target,b,a,c),d.handle.remove(),delete m[b])}var m={},p=v(a,b,function(b,e,f){h(f);b&&"function"===typeof b.on&&
(m[f]={handle:b.on(c,d),target:b},g&&g(b,f,a,c))},f);return{remove:function(){p.remove();for(var a in m)h(a)}}}})},"esri/layers/support/Tilemap":function(){define("require exports dojo/_base/lang ../../request ../../core/Error ../../core/lang ../../core/promiseUtils".split(" "),function(b,f,q,g,n,l,k){function d(b){var c;"vector-tile"===b.service.type?c=b.service.url+"/tilemap/"+b.level+"/"+b.row+"/"+b.col+"/"+b.width+"/"+b.height:(c=b.service.tileServers,c=(c&&c.length?c[b.row%c.length]:b.service.url)+
"/tilemap/"+b.level+"/"+b.row+"/"+b.col+"/"+b.width+"/"+b.height);(b=b.service.query)&&(c=c+"?"+b);return c}Object.defineProperty(f,"__esModule",{value:!0});b=function(){function b(){this.location={left:0,top:0,width:0,height:0};this.byteSize=40}b.prototype.getAvailability=function(b,a){if(this._isAllAvailable)return"available";if(this._isAllUnvailable)return"unavailable";b=(b-this.location.top)*this.location.width+(a-this.location.left);a=b>>3;var c=this._tileAvailabilityBitSet;return 0>a||a>c.length?
"unknown":c[a]&1<<b%8?"available":"unavailable"};b.prototype._updateFromData=function(b){for(var a=!0,c=!0,d=new Uint8Array(Math.ceil(this.location.width*this.location.height/8)),g=0,f=0;f<b.length;f++){var h=f%8;b[f]?(c=!1,d[g]|=1<<h):a=!1;7===h&&++g}this._isAllUnvailable=c;this._isAllAvailable=a;this._isAllAvailable||this._isAllUnvailable||(this._tileAvailabilityBitSet=d,this.byteSize+=d.length)};b.fromDefinition=function(c,a){var f=c.service.request||g,h=c.row,l=c.col,z=c.width,t=c.height,x={callbackParamName:"callback"};
a=a?q.mixin(x,a):x;return f(d(c),a).then(function(a){return a.data}).catch(function(a){if(a&&a.details&&422===a.details.httpStatus){a=[];for(var b=0,c=z*t;b<c;b++)a[b]=0;return{location:{top:h,left:l,width:z,height:t},valid:!0,data:a}}return k.reject(a)}).then(function(a){if(a.location&&(a.location.top!==h||a.location.left!==l||a.location.width!==z||a.location.height!==t))throw new n("tilemap:location-mismatch","Tilemap response for different location than requested",{response:a,definition:{top:h,
left:l,width:z,height:t}});return b.fromJSON(a)})};b.fromJSON=function(c){b.validateJSON(c);var a=new b;a.location=Object.freeze(l.clone(c.location));a._updateFromData(c.data);return Object.freeze(a)};b.validateJSON=function(b){if(!b||!b.location)throw new n("tilemap:missing-location","Location missing from tilemap response");if(!1===b.valid)throw new n("tilemap:invalid","Tilemap response was marked as invalid");if(!b.data)throw new n("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(b.data))throw new n("tilemap:data-mismatch",
"Data must be an array of numbers");if(b.data.length!==b.location.width*b.location.height)throw new n("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");};return b}();f.Tilemap=b;f.tilemapDefinitionId=function(b){return b.level+"/"+b.row+"/"+b.col+"/"+b.width+"/"+b.height};f.tilemapDefinitionUrl=d;f.default=b})},"esri/layers/mixins/ArcGISMapService":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../geometry/Extent ../../geometry/SpatialReference ./ArcGISService ../support/commonProperties".split(" "),
function(b,f,q,g,n,l,k,d,h){return function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.copyright=null;a.fullExtent=null;a.legendEnabled=!0;a.spatialReference=null;a.version=null;return a}q(a,b);a.prototype.readCapabilities=function(a,b){return a&&a.split(",").map(function(a){return a.trim()})};a.prototype.readCopyright=function(a,b){return b.copyrightText};a.prototype.readVersion=function(a,b){(a=b.currentVersion)||(a=b.hasOwnProperty("capabilities")||b.hasOwnProperty("tables")?
10:b.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3);return a};g([n.property()],a.prototype,"capabilities",void 0);g([n.reader("service","capabilities")],a.prototype,"readCapabilities",null);g([n.property()],a.prototype,"copyright",void 0);g([n.reader("copyright",["copyrightText"])],a.prototype,"readCopyright",null);g([n.property({type:l})],a.prototype,"fullExtent",void 0);g([n.property({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],a.prototype,"id",void 0);g([n.property({type:Boolean,
json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],a.prototype,"legendEnabled",void 0);g([n.property(h.popupEnabled)],a.prototype,"popupEnabled",void 0);g([n.property({type:k})],a.prototype,"spatialReference",void 0);g([n.property()],a.prototype,"version",void 0);g([n.reader("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],a.prototype,"readVersion",null);return a=g([n.subclass("esri.layers.mixins.ArcGISMapService")],
a)}(n.declared(d))})},"esri/layers/support/commonProperties":function(){define(["require","exports","../../core/accessorSupport/PropertyOrigin","../../core/accessorSupport/utils","../../core/accessorSupport/write"],function(b,f,q,g,n){Object.defineProperty(f,"__esModule",{value:!0});f.screenSizePerspectiveEnabled={type:Boolean,value:!0,json:{origins:{"web-scene":{read:{source:["id","url","layerType"],reader:function(b,f){if(null==f.screenSizePerspective&&"defaults"===this.originOf("screenSizePerspectiveEnabled"))g.getProperties(this).store.set("screenSizePerspectiveEnabled",
!1,q.OriginId.DEFAULTS);else return f.screenSizePerspective}},write:{ignoreOrigin:!0,target:"screenSizePerspective",writer:function(b,g,d,f){"defaults"===this.originOf("screenSizePerspectiveEnabled")&&b?g[d]=b:n.willPropertyWrite(this,"screenSizePerspectiveEnabled",{},f)&&(g[d]=b)}}}}}};f.popupEnabled={type:Boolean,json:{read:{source:"disablePopup",reader:function(b,g){return!g.disablePopup}},write:{target:"disablePopup",writer:function(b,g,d){g[d]=!b}}}};f.labelsVisible={type:Boolean,json:{read:{source:"showLabels"},
write:{target:"showLabels"}}}})},"esri/layers/mixins/OperationalLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Error ../../core/MultiOriginJSONSupport ../../core/promiseUtils ../../core/urlUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/read ../../core/accessorSupport/write ../../webdoc/support/opacityUtils".split(" "),function(b,f,q,g,n,l,k,d,h,c,a,p,u){f=function(b){function d(){var a=
null!==b&&b.apply(this,arguments)||this;a.title="Layer";return a}q(d,b);f=d;d.prototype.writeListMode=function(a,b,c,d){d&&"ground"===d.layerContainerType?b[c]=a:a&&p.willPropertyWrite(this,c,{},d)&&(b[c]=a)};d.prototype.writeTitle=function(a,b){b.title=a||"Layer"};d.prototype.writeOperationalLayerType=function(a,b){a&&(b.layerType=a)};d.prototype.readOpacity=function(a,b,c){if(void 0!==b.opacity&&(!c||"web-map"===c.origin||"web-scene"===c.origin))return b.opacity;if((!c||"service"===c.origin)&&b.drawingInfo&&
void 0!==b.drawingInfo.transparency)return u.transparencyToOpacity(b.drawingInfo.transparency);if(b.layerDefinition&&b.layerDefinition.drawingInfo&&void 0!==b.layerDefinition.drawingInfo.transparency)return u.transparencyToOpacity(b.layerDefinition.drawingInfo.transparency)};d.prototype.readVisible=function(a,b){return!!b.visibility};d.prototype.read=function(b,c){var d=this,g=arguments;c&&(c.layer=this);a.readLoadable(this,b,function(a){return d.inherited(g,[b,a])},c);return this};d.prototype.write=
function(a,b){if(b&&b.origin){var c=b.origin+"/"+(b.layerContainerType||"operational-layers"),d=f.supportedTypes[c],d=d&&d[this.operationalLayerType];if("write"!==d&&"readwrite"!==d)return b.messages&&b.messages.push(new l("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' are not supported in the context of '"+c+"'",{layer:this})),null;if(!this.url&&!v[this.operationalLayerType])return b.messages&&b.messages.push(new l("layer:unsupported","Layers ("+this.title+
", "+this.id+") of type '"+this.declaredClass+"' require a url to a service to be written to a '"+b.origin+"'",{layer:this})),null}return this.inherited(arguments,[a,b])};g([c.property({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}}}}})],d.prototype,"id",void 0);g([c.property({type:String,json:{write:{ignoreOrigin:!0}}})],d.prototype,"listMode",void 0);g([c.writer("listMode")],d.prototype,"writeListMode",null);g([c.property({type:String,json:{write:{ignoreOrigin:!0,
allowNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}}}}})],d.prototype,"title",void 0);g([c.writer("title")],d.prototype,"writeTitle",null);g([c.property({type:String,json:{write:{ignoreOrigin:!0,writer:h.writeOperationalLayerUrl}}})],d.prototype,"url",void 0);g([c.property({type:String,json:{write:{target:"layerType",ignoreOrigin:!0}}})],d.prototype,"operationalLayerType",void 0);g([c.writer("operationalLayerType")],d.prototype,"writeOperationalLayerType",null);g([c.property({type:Number,
json:{write:{ignoreOrigin:!0}}})],d.prototype,"opacity",void 0);g([c.reader("opacity",["opacity","layerDefinition.drawingInfo.transparency","drawingInfo.transparency"])],d.prototype,"readOpacity",null);g([c.property({type:Boolean,json:{write:{target:"visibility",ignoreOrigin:!0}}})],d.prototype,"visible",void 0);g([c.reader("visible",["visibility"])],d.prototype,"readVisible",null);return d=f=g([c.subclass("esri.layers.mixins.OperationalLayer")],d);var f}(c.declared(n,k));var v={GroupLayer:!0,WebTiledLayer:!0,
OpenStreetMap:!0,ArcGISFeatureLayer:!0,CSV:!0,VectorTileLayer:!0,KML:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0};(function(a){a.typeModuleMap={ArcGISFeatureLayer:function(){return d.create(function(a){return b(["../FeatureLayer"],a)})},ArcGISImageServiceLayer:function(){return d.create(function(a){return b(["../ImageryLayer"],a)})},ArcGISImageServiceVectorLayer:function(){return d.resolve(null)},ArcGISMapServiceLayer:function(){return d.create(function(a){return b(["../MapImageLayer"],
a)})},ArcGISSceneServiceLayer:function(){return d.create(function(a){return b(["../SceneLayer"],a)})},ArcGISStreamLayer:function(){return d.create(function(a){return b(["../StreamLayer"],a)})},ArcGISTiledElevationServiceLayer:function(){return d.create(function(a){return b(["../ElevationLayer"],a)})},ArcGISTiledImageServiceLayer:function(){return d.create(function(a){return b(["../TileLayer"],a)})},ArcGISTiledMapServiceLayer:function(){return d.create(function(a){return b(["../TileLayer"],a)})},BingMapsAerial:function(){return d.create(function(a){return b(["../BingMapsLayer"],
a)})},BingMapsRoad:function(){return d.create(function(a){return b(["../BingMapsLayer"],a)})},BingMapsHybrid:function(){return d.create(function(a){return b(["../BingMapsLayer"],a)})},CSV:function(){return d.create(function(a){return b(["../CSVLayer"],a)})},GeoRSS:function(){return d.create(function(a){return b(["../GeoRSSLayer"],a)})},GroupLayer:function(){return d.create(function(a){return b(["../GroupLayer"],a)})},IntegratedMeshLayer:function(){return d.create(function(a){return b(["../IntegratedMeshLayer"],
a)})},KML:function(){return d.create(function(a){return b(["../KMLLayer"],a)})},OpenStreetMap:function(){return d.create(function(a){return b(["../OpenStreetMapLayer"],a)})},PointCloudLayer:function(){return d.create(function(a){return b(["../PointCloudLayer"],a)})},VectorTileLayer:function(){return d.create(function(a){return b(["../VectorTileLayer"],a)})},WebTiledLayer:function(){return d.create(function(a){return b(["../WebTileLayer"],a)})},WMS:function(){return d.create(function(a){return b(["../WMSLayer"],
a)})}};a.supportedTypes={"web-scene/operational-layers":{ArcGISFeatureLayer:"readwrite",ArcGISImageServiceLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISSceneServiceLayer:"readwrite",ArcGISTiledElevationServiceLayer:"read",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",GroupLayer:"readwrite",IntegratedMeshLayer:"readwrite",PointCloudLayer:"readwrite",WebTiledLayer:"readwrite",CSV:"readwrite",VectorTileLayer:"readwrite",WMS:"readwrite"},"web-scene/basemap":{ArcGISTiledImageServiceLayer:"readwrite",
ArcGISTiledMapServiceLayer:"readwrite",WebTiledLayer:"readwrite",OpenStreetMap:"readwrite",VectorTileLayer:"readwrite",ArcGISImageServiceLayer:"readwrite",WMS:"readwrite",ArcGISMapServiceLayer:"readwrite"},"web-scene/ground":{ArcGISTiledElevationServiceLayer:"readwrite"},"web-map/operational-layers":{ArcGISImageServiceLayer:"readwrite",ArcGISImageServiceVectorLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISStreamLayer:"readwrite",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",
ArcGISFeatureLayer:"readwrite",BingMapsAerial:"readwrite",BingMapsRoad:"readwrite",BingMapsHybrid:"readwrite",CSV:"readwrite",GeoRSS:"readwrite",KML:"readwrite",VectorTileLayer:"readwrite",WMS:"readwrite",WebTiledLayer:"readwrite"},"web-map/basemap":{ArcGISImageServiceLayer:"readwrite",ArcGISImageServiceVectorLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",OpenStreetMap:"readwrite",VectorTileLayer:"readwrite",WMS:"readwrite",
WebTiledLayer:"readwrite",BingMapsAerial:"readwrite",BingMapsRoad:"readwrite",BingMapsHybrid:"readwrite"}}})(f||(f={}));return f})},"esri/layers/mixins/PortalLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Error ../../core/Logger ../../core/promiseUtils ../../core/urlUtils ../../core/accessorSupport/decorators ../../portal/Portal ../../portal/PortalItem".split(" "),function(b,f,q,g,n,l,k,d,h,c,a,
p){var u=k.getLogger("esri.layers.mixins.PortalLayer");return function(f){function k(){return null!==f&&f.apply(this,arguments)||this}q(k,f);Object.defineProperty(k.prototype,"portalItem",{set:function(a){a!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",a))},enumerable:!0,configurable:!0});k.prototype.writePortalItem=function(a,b,c){a&&a.id&&(b.itemId=a.id)};k.prototype.loadFromPortal=function(a){var c=this;return this.portalItem&&this.portalItem.id?d.create(function(a){return b(["../../portal/support/layersLoader"],
a)}).then(function(b){return b.load({instance:c,supportedTypes:a.supportedTypes,validateItem:a.validateItem,supportsData:a.supportsData}).catch(function(a){u.warn("Failed to load layer ("+c.title+", "+c.id+") portal item ("+c.portalItem.id+")\n  "+a);throw a;})}):d.resolve()};k.prototype.read=function(a,b){b&&(b.layer=this);return this.inherited(arguments)};k.prototype.write=function(b,c){var d=c&&c.portal,g=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||a.getDefault());return d&&g&&
!h.hasSamePortal(g.restUrl,d.restUrl)?(c.messages&&c.messages.push(new l("layer:cross-portal","The layer '"+this.title+" ("+this.id+")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer",{layer:this})),null):this.inherited(arguments)};g([c.property({type:p})],k.prototype,"portalItem",null);g([c.writer("portalItem",{itemId:{type:String}})],
k.prototype,"writePortalItem",null);return k=g([c.subclass("esri.layers.mixins.PortalLayer")],k)}(c.declared(n))})},"esri/layers/support/rasterFormats/LercCodec":function(){define([],function(){var b={defaultNoDataValue:-3.4027999387901484E38,decode:function(q,g){var n;g=g||{};var l=g.inputOffset||0,k=g.encodedMaskData||null===g.encodedMaskData,d={},h=new Uint8Array(q,l,10);d.fileIdentifierString=String.fromCharCode.apply(null,h);if("CntZImage"!=d.fileIdentifierString.trim())throw"Unexpected file identifier string: "+
d.fileIdentifierString;l+=10;h=new DataView(q,l,24);d.fileVersion=h.getInt32(0,!0);d.imageType=h.getInt32(4,!0);d.height=h.getUint32(8,!0);d.width=h.getUint32(12,!0);d.maxZError=h.getFloat64(16,!0);l+=24;if(!k)if(h=new DataView(q,l,16),d.mask={},d.mask.numBlocksY=h.getUint32(0,!0),d.mask.numBlocksX=h.getUint32(4,!0),d.mask.numBytes=h.getUint32(8,!0),d.mask.maxValue=h.getFloat32(12,!0),l+=16,0<d.mask.numBytes){var k=new Uint8Array(Math.ceil(d.width*d.height/8)),h=new DataView(q,l,d.mask.numBytes),
c=h.getInt16(0,!0),a=2,p=0;do{if(0<c)for(;c--;)k[p++]=h.getUint8(a++);else for(var u=h.getUint8(a++),c=-c;c--;)k[p++]=u;c=h.getInt16(a,!0);a+=2}while(a<d.mask.numBytes);if(-32768!==c||p<k.length)throw"Unexpected end of mask RLE encoding";d.mask.bitset=k;l+=d.mask.numBytes}else 0===(d.mask.numBytes|d.mask.numBlocksY|d.mask.maxValue)&&(k=new Uint8Array(Math.ceil(d.width*d.height/8)),d.mask.bitset=k);h=new DataView(q,l,16);d.pixels={};d.pixels.numBlocksY=h.getUint32(0,!0);d.pixels.numBlocksX=h.getUint32(4,
!0);d.pixels.numBytes=h.getUint32(8,!0);d.pixels.maxValue=h.getFloat32(12,!0);l+=16;k=d.pixels.numBlocksX;h=d.pixels.numBlocksY;k+=0<d.width%k?1:0;c=h+(0<d.height%h?1:0);d.pixels.blocks=Array(k*c);a=1E9;for(u=p=0;u<c;u++)for(var v=0;v<k;v++){var z=0,h=new DataView(q,l,Math.min(10,q.byteLength-l)),t={};d.pixels.blocks[p++]=t;var x=h.getUint8(0);z++;t.encoding=x&63;if(3<t.encoding)throw"Invalid block encoding ("+t.encoding+")";if(2===t.encoding)l++,a=Math.min(a,0);else{if(0!==x&&2!==x){x>>=6;t.offsetType=
x;if(2===x)t.offset=h.getInt8(1),z++;else if(1===x)t.offset=h.getInt16(1,!0),z+=2;else if(0===x)t.offset=h.getFloat32(1,!0),z+=4;else throw"Invalid block offset type";a=Math.min(t.offset,a);if(1===t.encoding)if(x=h.getUint8(z),z++,t.bitsPerPixel=x&63,x>>=6,t.numValidPixelsType=x,2===x)t.numValidPixels=h.getUint8(z),z++;else if(1===x)t.numValidPixels=h.getUint16(z,!0),z+=2;else if(0===x)t.numValidPixels=h.getUint32(z,!0),z+=4;else throw"Invalid valid pixel count type";}l+=z;if(3!=t.encoding)if(0===
t.encoding){h=(d.pixels.numBytes-1)/4;if(h!==Math.floor(h))throw"uncompressed block has invalid length";z=new ArrayBuffer(4*h);x=new Uint8Array(z);x.set(new Uint8Array(q,l,4*h));z=new Float32Array(z);for(x=0;x<z.length;x++)a=Math.min(a,z[x]);t.rawData=z;l+=4*h}else 1===t.encoding&&(h=Math.ceil(t.numValidPixels*t.bitsPerPixel/8),z=new ArrayBuffer(4*Math.ceil(h/4)),x=new Uint8Array(z),x.set(new Uint8Array(q,l,h)),t.stuffedData=new Uint32Array(z),l+=h)}}d.pixels.minValue=a;d.eofOffset=l;q=null!=g.noDataValue?
g.noDataValue:b.defaultNoDataValue;var k=g.encodedMaskData,t=g.returnMask,h=0,c=d.pixels.numBlocksX,a=d.pixels.numBlocksY,p=Math.floor(d.width/c),u=Math.floor(d.height/a),v=2*d.maxZError,k=k||(d.mask?d.mask.bitset:null),r,l=new (g.pixelType||Float32Array)(d.width*d.height);t&&k&&(r=new Uint8Array(d.width*d.height));for(var t=new Float32Array(p*u),m,e,z=0;z<=a;z++)if(x=z!==a?u:d.height%a,0!==x)for(var w=0;w<=c;w++){var y=w!==c?p:d.width%c;if(0!==y){var A=z*d.width*u+w*p,D=d.width-y,B=d.pixels.blocks[h],
F,C;if(2>B.encoding){if(0===B.encoding)F=B.rawData;else{F=B.stuffedData;C=B.bitsPerPixel;m=B.numValidPixels;e=B.offset;var G=v,W=t,fa=d.pixels.maxValue,V=(1<<C)-1,H=0,ba=void 0,J=0,Z=void 0,O=void 0,N=Math.ceil((fa-e)/G);F[F.length-1]<<=8*(4*F.length-Math.ceil(C*m/8));for(ba=0;ba<m;ba++)0===J&&(O=F[H++],J=32),J>=C?(Z=O>>>J-C&V,J-=C):(J=C-J,Z=(O&V)<<J&V,O=F[H++],J=32-J,Z+=O>>>J),W[ba]=Z<N?e+Z*G:fa;F=t}C=0}else n=2===B.encoding?0:B.offset;var K;if(k)for(e=0;e<x;e++){A&7&&(K=k[A>>3],K<<=A&7);for(m=0;m<
y;m++)A&7||(K=k[A>>3]),K&128?(r&&(r[A]=1),l[A++]=2>B.encoding?F[C++]:n):(r&&(r[A]=0),l[A++]=q),K<<=1;A+=D}else if(2>B.encoding)for(e=0;e<x;e++){for(m=0;m<y;m++)l[A++]=F[C++];A+=D}else for(e=0;e<x;e++){for(m=0;m<y;m++)l[A++]=n;A+=D}if(1===B.encoding&&C!==B.numValidPixels)throw"Block and Mask do not match";h++}}n=r;r={width:d.width,height:d.height,pixelData:l,minValue:d.pixels.minValue,maxValue:d.pixels.maxValue,noDataValue:q};n&&(r.maskData=n);g.returnEncodedMask&&d.mask&&(r.encodedMaskData=d.mask.bitset?
d.mask.bitset:null);if(g.returnFileInfo&&(r.fileInfo=f(d),g.computeUsedBitDepths)){g=r.fileInfo;n=d.pixels.numBlocksX*d.pixels.numBlocksY;K={};for(F=0;F<n;F++)C=d.pixels.blocks[F],0===C.encoding?K.float32=!0:1===C.encoding?K[C.bitsPerPixel]=!0:K[0]=!0;d=Object.keys(K);g.bitDepths=d}return r}},f=function(b){return{fileIdentifierString:b.fileIdentifierString,fileVersion:b.fileVersion,imageType:b.imageType,height:b.height,width:b.width,maxZError:b.maxZError,eofOffset:b.eofOffset,mask:b.mask?{numBlocksX:b.mask.numBlocksX,
numBlocksY:b.mask.numBlocksY,numBytes:b.mask.numBytes,maxValue:b.mask.maxValue}:null,pixels:{numBlocksX:b.pixels.numBlocksX,numBlocksY:b.pixels.numBlocksY,numBytes:b.pixels.numBytes,maxValue:b.pixels.maxValue,minValue:b.pixels.minValue,noDataValue:this.noDataValue}}};return b})},"esri/support/LayersMixin":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Collection ../core/collectionUtils ../core/Logger ../core/promiseUtils ../core/accessorSupport/decorators ../layers/Layer".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a){function p(a,b,c){for(var d,g=0,e=a.length;g<e;g++)if(d=a.getItemAt(g),d[b]===c||d&&null!=d.layers&&(d=p(d.layers,b,c)))return d}var u=l.ofType(a),v=d.getLogger("esri.support.LayersMixin");return function(b){function d(a){var c=b.call(this,a)||this;c.layers=new u;c.layers.on("after-add",function(a){a=a.item;a.parent&&a.parent!==c&&"remove"in a.parent&&a.parent.remove(a);a.parent=c;c.layerAdded(a);"elevation"===a.type&&v.error("Layer '"+a.title+", id:"+a.id+"' of type '"+
a.type+"' is not supported as an operational layer and will therefore be ignored.")});c.layers.on("after-remove",function(a){a=a.item;a.parent=null;c.layerRemoved(a)});return c}q(d,b);d.prototype.destroy=function(){this.layers.drain(this.layerRemoved,this)};Object.defineProperty(d.prototype,"layers",{set:function(a){this._set("layers",k.referenceSetter(a,this._get("layers"),u))},enumerable:!0,configurable:!0});d.prototype.findLayerById=function(a){return p(this.layers,"id",a)};d.prototype.add=function(b,
c){var d=this,e=this.layers;c=e.getNextIndex(c);h.isThenable(b)?b.then(function(b){d.destroyed||(b instanceof a?e.add(b,c):v.error("#add()","Promise did not resolve with a valid layer."))}):b.parent===this?this.reorder(b,c):e.add(b,c)};d.prototype.addMany=function(a,b){var c=this,d=this.layers;b=d.getNextIndex(b);a.slice().forEach(function(a){a.parent===c?c.reorder(a,b):(d.add(a,b),b+=1)})};d.prototype.findLayerByUid=function(a){return p(this.layers,"uid",a)};d.prototype.remove=function(a){return this.layers.remove(a)};
d.prototype.removeMany=function(a){return this.layers.removeMany(a)};d.prototype.removeAll=function(){return this.layers.removeAll()};d.prototype.reorder=function(a,b){return this.layers.reorder(a,b)};d.prototype.layerAdded=function(a){};d.prototype.layerRemoved=function(a){};g([c.property({type:u,cast:k.castForReferenceSetter})],d.prototype,"layers",null);return d=g([c.subclass("esri.support.LayersMixin")],d)}(c.declared(n))})},"esri/Viewpoint":function(){define(["./core/JSONSupport","./Camera",
"./geometry/support/typeUtils","./geometry/support/jsonUtils"],function(b,f,q,g){var n=b.createSubclass({declaredClass:"esri.Viewpoint",properties:{rotation:{type:Number,value:0,cast:function(b){b%=360;0>b&&(b+=360);return b},json:{write:!0}},scale:{type:Number,value:0,json:{write:!0}},targetGeometry:{value:null,types:q.types,json:{read:function(b){return g.fromJSON(b)},write:!0}},camera:{value:null,type:f,json:{write:!0}}},clone:function(){return new n({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry?
this.targetGeometry.clone():null,camera:this.camera?this.camera.clone():null})}});return n})},"esri/Camera":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/accessorSupport/decorators ./geometry/Point ./views/3d/support/mathUtils".split(" "),function(b,f,q,g,n,l,k,d){return function(b){function c(a,c,d,g){a=b.call(this)||this;a.position=null;a.heading=0;a.tilt=0;a.fov=55;return a}q(c,b);a=c;c.prototype.getDefaults=function(a){if(!a.position)return{position:new k([0,
0,0])}};c.prototype.normalizeCtorArgs=function(a,b,c,d){a&&"object"===typeof a&&("x"in a||Array.isArray(a))&&(a={position:a},null!=b&&(a.heading=b),null!=c&&(a.tilt=c),null!=d&&(a.fov=d));return a};c.prototype.equals=function(a){return a?this.tilt===a.tilt&&this.heading===a.heading&&this.fov===a.fov&&this.position.equals(a.position):!1};c.prototype.clone=function(){return new a({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})};g([l.property({type:k,json:{write:{isRequired:!0}}})],
c.prototype,"position",void 0);g([l.property({type:Number,json:{write:{isRequired:!0}}}),l.cast(d.cyclicalDeg.normalize)],c.prototype,"heading",void 0);g([l.property({type:Number,json:{write:{isRequired:!0}}}),l.cast(function(a){return d.clamp(a,-180,180)})],c.prototype,"tilt",void 0);g([l.property({json:{read:!1,write:!1}})],c.prototype,"fov",void 0);return c=a=g([l.subclass("esri.Camera")],c);var a}(l.declared(n))})},"esri/geometry/support/typeUtils":function(){define("require exports ../../core/accessorSupport/ensureType ../Extent ../Geometry ../Mesh ../Multipoint ../Point ../Polygon ../Polyline".split(" "),
function(b,f,q,g,n,l,k,d,h,c){Object.defineProperty(f,"__esModule",{value:!0});f.types={base:n,key:"type",typeMap:{extent:g,multipoint:k,point:d,polyline:c,polygon:h,mesh:l}};f.ensureType=q.ensureOneOfType(f.types)})},"esri/layers/graphics/controllers/AutoController2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Graphic ../../../core/Accessor ../../../core/Collection ../../../core/Error ../../../core/Promise ../../../core/promiseUtils ../../../core/accessorSupport/decorators ../../../tasks/QueryTask ../../../tasks/support/StatisticDefinition".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u){var v;(function(a){a[a.Snapshot=0]="Snapshot";a[a.OnDemand=1]="OnDemand"})(v||(v={}));return function(f){function h(){var a=null!==f&&f.apply(this,arguments)||this;a.maxPointCountForAuto=4E3;a.maxRecordCountForAuto=2E3;a.maxVertexCountForAuto=25E4;return a}q(h,f);h.prototype.initialize=function(){var a=this,b=this.layer.when(function(){a._verifyCapabilities()}).then(function(){return a._figureOutMode().then(function(b){return a._createController(b)})}).then(function(b){return a._set("activeController",
b)});this.addResolvingPromise(b)};h.prototype.destroy=function(){this.activeController&&(this.activeController.destroy(),this._set("activeController",null))};Object.defineProperty(h.prototype,"countThresholdForAuto",{get:function(){var a=this.layer.geometryType,b;"polyline"===a||"polygon"===a||"multipoint"===a?b=this.maxRecordCountForAuto:"point"===a&&(b=this.maxPointCountForAuto);return b},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"updating",{get:function(){return!1===this.isFulfilled()||
!0===this.get("activeController.updating")},enumerable:!0,configurable:!0});h.prototype._figureOutMode=function(){return this._isStatisticsSupported()?this._checkByStatistics():this._checkByCount()};h.prototype._isStatisticsSupported=function(){return this.layer.source.parsedUrl?/(https?:)?\/\/services.*\.arcgis\.com/i.test(this.layer.source.parsedUrl.path):!1};h.prototype._checkByStatistics=function(){var a=this,b=this.layer,c=b.source.parsedUrl.path,b=b.createQuery();b.outStatistics=[new u({statisticType:"exceedslimit",
maxPointCount:this.maxPointCountForAuto,maxRecordCount:this.maxRecordCountForAuto,maxVertexCount:this.maxVertexCountForAuto,outStatisticFieldName:"exceedslimit"})];return(new p({url:c+"/query"})).execute(b).then(function(b){b=b&&b.features&&b.features[0];if(0===(b&&b.attributes&&b.attributes.exceedslimit)){b=a.layer;var c=b.maxRecordCount;if(b.get("capabilities.query.supportsPagination")||c>=a.countThresholdForAuto)return v.Snapshot}return v.OnDemand})};h.prototype._checkByCount=function(){var a=
this,b=this.layer;return b.queryFeatureCount().then(function(c){return c<=a.countThresholdForAuto&&c<=b.maxRecordCount?v.Snapshot:v.OnDemand})};h.prototype._createController=function(a){var d=this;return(a===v.OnDemand?c.create(function(a){return b(["./OnDemandController2D"],a)}):c.create(function(a){return b(["./SnapshotController"],a)})).then(function(a){return new a({layer:d.layer,layerView:d.layerView,graphics:d.graphics})}).catch(function(b){throw Error("Module path not found for controller type: "+
(a===v.Snapshot?"snapshot":"on demand"));})};h.prototype._verifyCapabilities=function(){if(!this.layer.get("capabilities.operations.supportsQuery"))throw new d("graphicscontroller:query-capability-required","Service requires query capabilities to be used as a feature layer",{layer:this.layer});};g([a.property()],h.prototype,"activeController",void 0);g([a.property({dependsOn:["layer.geometryType"]})],h.prototype,"countThresholdForAuto",null);g([a.property({type:k.ofType(n)})],h.prototype,"graphics",
void 0);g([a.property()],h.prototype,"layer",void 0);g([a.property()],h.prototype,"layerView",void 0);g([a.property({dependsOn:["activeController.updating"]})],h.prototype,"updating",null);g([a.aliasOf("activeController.update")],h.prototype,"update",void 0);return h=g([a.subclass("esri.layers.graphics.controllers.AutoController2D")],h)}(a.declared(l,h))})},"esri/Graphic":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./geometry ./PopupTemplate ./core/JSONSupport ./core/lang ./core/accessorSupport/decorators ./geometry/support/typeUtils ./symbols/support/jsonUtils ./symbols/support/typeUtils".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u){b=function(b){function d(a,c,d,g){a=b.call(this,a,c,d,g)||this;a.layer=null;a.sourceLayer=null;Object.defineProperty(a,"uid",{value:f.generateUID()});return a}g(d,b);f=d;d.prototype.normalizeCtorArgs=function(a,b,c,d){return a&&!a.declaredClass?a:{geometry:a,symbol:b,attributes:c,popupTemplate:d}};Object.defineProperty(d.prototype,"attributes",{set:function(a){var b=this._get("attributes");b!==a&&(this._set("attributes",a),this._notifyLayer("attributes",b,a))},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"geometry",{set:function(a){var b=this._get("geometry");b!==a&&(this._set("geometry",a),this._notifyLayer("geometry",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"popupTemplate",{get:function(){return this.get("sourceLayer.popupTemplate")||null},set:function(a){void 0===a?this._clearOverride("popupTemplate"):this._override("popupTemplate",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"symbol",{set:function(a){var b=this._get("symbol");b!==a&&(this._set("symbol",a),this._notifyLayer("symbol",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"visible",{set:function(a){var b=this._get("visible");b!==a&&(this._set("visible",a),this._notifyLayer("visible",b,a))},enumerable:!0,configurable:!0});d.prototype.getAttribute=function(a){return this.attributes&&this.attributes[a]};d.prototype.setAttribute=function(a,b){if(this.attributes){var c=this.getAttribute(a);
this.attributes[a]=b;this._notifyLayer("attributes",c,b,a)}else this.attributes=(c={},c[a]=b,c),this._notifyLayer("attributes",void 0,b,a)};d.prototype.toJSON=function(){return{geometry:this.geometry&&this.geometry.toJSON(),symbol:this.symbol&&this.symbol.toJSON(),attributes:q({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}};d.prototype.clone=function(){return new f({attributes:h.clone(this.attributes),geometry:this.geometry&&this.geometry.clone()||null,layer:this.layer,
popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:this.symbol&&this.symbol.clone()||null,visible:this.visible})};d.prototype._notifyLayer=function(a,b,c,d){this.layer&&(a={graphic:this,property:a,oldValue:b,newValue:c},d&&(a.attributeName=d),this.layer.graphicChanged(a))};n([c.property({value:null})],d.prototype,"attributes",null);n([c.property({value:null,types:a.types,json:{read:l.fromJSON}})],d.prototype,"geometry",null);n([c.property()],d.prototype,
"layer",void 0);n([c.property({dependsOn:["sourceLayer.popupTemplate"],type:k})],d.prototype,"popupTemplate",null);n([c.property()],d.prototype,"sourceLayer",void 0);n([c.property({value:null,types:u.types,json:{read:p.read}})],d.prototype,"symbol",null);n([c.property({type:Boolean,value:!0,set:function(a){}})],d.prototype,"visible",null);return d=f=n([c.subclass("esri.Graphic")],d);var f}(c.declared(d));var v=0;(function(a){a.generateUID=function(){return v++}})(b||(b={}));return b})},"esri/PopupTemplate":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/Collection ./core/date ./core/JSONSupport ./core/kebabDictionary ./core/lang ./core/accessorSupport/decorators ./layers/support/fieldUtils ./support/Action ./support/arcadeUtils".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v){var z=h({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),t=h({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});return function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;a.actions=null;a.content="";a.expressionInfos=null;a.fieldInfos=null;a.layerOptions=null;a.overwriteActions=!1;a.title="";a.relatedRecordsInfo=null;return a}g(d,b);f=d;d.prototype.readContent=function(a,b){var c=this,
d=b.description,e=b.mediaInfos;a=b.showAttachments;if((b=b.popupElements)&&b.length)return b.map(function(a){"text"!==a.type||a.text?"media"===a.type&&(a.mediaInfos||e)&&(a.mediaInfos||(a.mediaInfos=e),a.mediaInfos=c._readMediaInfos(a.mediaInfos)):a.text=d;return a});b=[];d?b.push({type:"text",text:d}):b.push({type:"fields"});e&&e.length&&b.push({type:"media",mediaInfos:this._readMediaInfos(e)});a&&b.push({type:"attachments",displayType:"list"});return b.length?b:d};d.prototype.writeContent=function(a,
b){var d=this;b.showAttachments=!1;"string"===typeof a?b.description=a:Array.isArray(a)&&(b.popupElements=c.clone(a),b.popupElements.forEach(function(a){"attachments"!==a.type||b.showAttachments?"media"!==a.type||b.mediaInfos?"text"!==a.type||b.description?"fields"!==a.type||b.fieldInfos||(a.fieldInfos&&(b.fieldInfos=d._writeFieldInfos(c.clone(a.fieldInfos))),delete a.fieldInfos):(a.text&&(b.description=a.text),delete a.text):(a.mediaInfos&&(b.mediaInfos=c.clone(a.mediaInfos),b.mediaInfos.forEach(function(a){a.type=
t.toJSON(a.type)})),delete a.mediaInfos):b.showAttachments=!0;return a}))};d.prototype.writeExpressionInfos=function(a,b){b.expressionInfos=a||null};d.prototype.readFieldInfos=function(a){if(a)return a.forEach(function(a){var b=a.format&&a.format.dateFormat,c=a.stringFieldOption;b&&(a.format.dateFormat=k.fromJSON(b));c&&(a.stringFieldOption=z.fromJSON(c))}),a};d.prototype.writeFieldInfos=function(a,b){b.fieldInfos=a?this._writeFieldInfos(c.clone(a)):a};d.prototype.writeLayerOptions=function(a,b){b.layerOptions=
a||null};d.prototype.writeTitle=function(a,b){b.title=a||""};d.prototype.writeRelatedRecordsInfo=function(a,b){b.relatedRecordsInfo=a||null};Object.defineProperty(d.prototype,"requiredFields",{get:function(){return this.collectRequiredFields()},enumerable:!0,configurable:!0});d.prototype.clone=function(){var a=this.actions,a=a?c.clone(a.toArray()):[];return new f({actions:a,content:Array.isArray(this.content)?c.clone(this.content):this.content,fieldInfos:this.fieldInfos?c.clone(this.fieldInfos):null,
layerOptions:this.layerOptions?c.clone(this.layerOptions):null,overwriteActions:this.overwriteActions,relatedRecordsInfo:this.relatedRecordsInfo?c.clone(this.relatedRecordsInfo):null,title:this.title})};d.prototype.collectRequiredFields=function(){return this._getActionsFields(this.actions).concat(this._getTitleFields(this.title),this._getContentFields(this.content),this._getExpressionInfoFields(this.expressionInfos)).filter(function(a,b,c){return b===c.indexOf(a)})};d.prototype._getContentElementFields=
function(a){var b=this;if(!a||"attachments"===a.type)return[];if("fields"===a.type)return this._getFieldInfoFields(a.fieldInfos||this.fieldInfos);if("media"===a.type)return(a.mediaInfos||[]).reduce(function(a,c){return a.concat(b._getMediaInfoFields(c))},[]);if("text"===a.type)return p.extractFieldNames(a.text)};d.prototype._getMediaInfoFields=function(a){var b=a.caption,c=a.value||{},d=c.fields,e=void 0===d?[]:d,d=c.normalizeField,g=c.tooltipField,f=c.sourceURL,c=c.linkURL;a=p.extractFieldNames(a.title).concat(p.extractFieldNames(b),
p.extractFieldNames(f),p.extractFieldNames(c),e);d&&a.push(d);g&&a.push(g);return a};d.prototype._getContentFields=function(a){var b=this;return"string"===typeof a?p.extractFieldNames(a):Array.isArray(a)?a.reduce(function(a,c){return a.concat(b._getContentElementFields(c))},[]):[]};d.prototype._getExpressionInfoFields=function(a){return a?a.reduce(function(a,b){return a.concat(v.extractFieldNames(b.expression))},[]):[]};d.prototype._getFieldInfoFields=function(a){return a?a.filter(function(a){return"undefined"===
typeof a.visible?!0:!!a.visible}).map(function(a){return a.fieldName}).filter(function(a){return-1===a.indexOf("relationships/")&&-1===a.indexOf("expression/")}):[]};d.prototype._getActionsFields=function(a){var b=this;return a?a.toArray().reduce(function(a,c){return a.concat(b._getActionFields(c))},[]):[]};d.prototype._getActionFields=function(a){return p.extractFieldNames(a.title).concat(p.extractFieldNames(a.className),p.extractFieldNames(a.image))};d.prototype._getTitleFields=function(a){return"string"===
typeof a?p.extractFieldNames(a):[]};d.prototype._readMediaInfos=function(a){a.forEach(function(a){a.type=t.fromJSON(a.type)});return a};d.prototype._writeFieldInfos=function(a){a.forEach(function(a){var b=a.format&&a.format.dateFormat,c=a.stringFieldOption;b&&(a.format.dateFormat=k.toJSON(b));c&&(a.stringFieldOption=z.toJSON(c));a.format||delete a.format});return a};n([a.property({type:l.ofType(u)})],d.prototype,"actions",void 0);n([a.property()],d.prototype,"content",void 0);n([a.reader("content",
["description","popupElements","mediaInfos","showAttachments"])],d.prototype,"readContent",null);n([a.writer("content")],d.prototype,"writeContent",null);n([a.property()],d.prototype,"expressionInfos",void 0);n([a.writer("expressionInfos")],d.prototype,"writeExpressionInfos",null);n([a.property()],d.prototype,"fieldInfos",void 0);n([a.reader("fieldInfos")],d.prototype,"readFieldInfos",null);n([a.writer("fieldInfos")],d.prototype,"writeFieldInfos",null);n([a.property()],d.prototype,"layerOptions",
void 0);n([a.writer("layerOptions")],d.prototype,"writeLayerOptions",null);n([a.property()],d.prototype,"overwriteActions",void 0);n([a.property()],d.prototype,"title",void 0);n([a.writer("title")],d.prototype,"writeTitle",null);n([a.property()],d.prototype,"relatedRecordsInfo",void 0);n([a.writer("relatedRecordsInfo")],d.prototype,"writeRelatedRecordsInfo",null);n([a.property({dependsOn:["actions","title","content","fieldInfos","expressionInfos"],readOnly:!0})],d.prototype,"requiredFields",null);
return d=f=n([a.subclass("esri.PopupTemplate")],d);var f}(a.declared(d))})},"esri/core/date":function(){define(["require","exports","./kebabDictionary"],function(b,f,q){Object.defineProperty(f,"__esModule",{value:!0});var g={"short-date":"(datePattern: 'M/d/y', selector: 'date')","short-date-le":"(datePattern: 'd/M/y', selector: 'date')","long-month-day-year":"(datePattern: 'MMMM d, y', selector: 'date')","day-short-month-year":"(datePattern: 'd MMM y', selector: 'date')","long-date":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",
"short-date-short-time":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-le-short-time":"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-short-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","short-date-le-short-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')","short-date-long-time":"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",
"short-date-le-long-time":"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-long-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')","short-date-le-long-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-year":"(datePattern: 'MMMM y', selector: 'date')","short-month-year":"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"};b=q({shortDate:"short-date",
shortDateLE:"short-date-le",longDate:"long-date",dayShortMonthYear:"day-short-month-year",longMonthDayYear:"long-month-day-year",shortDateLongTime:"short-date-long-time",shortDateLELongTime:"short-date-le-long-time",shortDateShortTime:"short-date-short-time",shortDateLEShortTime:"short-date-le-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLongTime24:"short-date-long-time-24",shortDateLELongTime24:"short-date-le-long-time-24",
longMonthYear:"long-month-year",shortMonthYear:"short-month-year"});f.toJSON=b.toJSON;f.fromJSON=b.fromJSON;f.getFormat=function(b){return g[b]}})},"esri/layers/support/fieldUtils":function(){define(["require","exports","dojo/_base/lang"],function(b,f,q){function g(b,g,d){if(b)for(var f=0;f<b.length;f++){var c=b[f],a=q.getObject(c,!1,g);(a=a&&"function"!==typeof a&&n(a,d))&&q.setObject(c,a.name,g)}}function n(b,g){if("string"!==typeof b)return null;if(null!=g){b=b.toLowerCase();for(var d=0;d<g.length;d++){var f=
g[d];if(f&&f.name.toLowerCase()===b)return f}}return null}Object.defineProperty(f,"__esModule",{value:!0});f.extractFieldNames=function(b){if(!b||"string"!==typeof b)return[];b=b.match(/{[^}]*}/g);if(!b)return[];var g=/\{(\w+):.+\}/;return(b=b.filter(function(b){return!(0===b.indexOf("{relationships/")||0===b.indexOf("{expression/"))}).map(function(b){return b.replace(g,"{$1}")}))?b.map(function(b){return b.slice(1,-1)}):[]};f.fixRendererFields=function(b,k){if(null!=b&&null!=k){var d=0;for(b=Array.isArray(b)?
b:[b];d<b.length;d++){var h=b[d];g(f.rendererFields,h,k);if(h.visualVariables)for(var c=0,h=h.visualVariables;c<h.length;c++)g(f.visualVariableFields,h[c],k)}}};f.getField=n;f.rendererFields="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" ");f.visualVariableFields=["field","normalizationField"];f.numericTypes=["integer","small-integer","single","double"];f.isNumericField=
function(b,g){return b?-1<f.numericTypes.indexOf(b.type)&&b.name!==g.objectIdField:!1};f.isStringField=function(b,g){return b?"string"===b.type&&b.name!==g.objectIdField:!1};f.isDateField=function(b){return b?"date"===b.type:!1}})},"esri/support/Action":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Identifiable ../core/accessorSupport/decorators".split(" "),function(b,f,q,g,n,l,k){return function(b){function d(a){a=
b.call(this)||this;a.className=null;a.temporary=!1;a.image=null;a.id=null;a.title=null;a.visible=!0;return a}q(d,b);c=d;d.prototype.clone=function(){return new c({className:this.className,image:this.image,id:this.id,title:this.title,visible:this.visible})};g([k.property()],d.prototype,"className",void 0);g([k.property()],d.prototype,"temporary",void 0);g([k.property()],d.prototype,"image",void 0);g([k.property()],d.prototype,"id",void 0);g([k.property()],d.prototype,"title",void 0);g([k.property()],
d.prototype,"visible",void 0);return d=c=g([k.subclass("esri.support.Action")],d);var c}(k.declared(n,l))})},"esri/support/arcadeUtils":function(){define("require exports dojo/_base/lang ../arcade/arcade ../arcade/Dictionary ../arcade/Feature".split(" "),function(b,f,q,g,n,l){function k(b){var a;try{a=b?g.parseScript(b):null}catch(p){a=null}return a}Object.defineProperty(f,"__esModule",{value:!0});var d=/^\$feature\./i,h={vars:{$feature:"any",$view:"any"},spatialReference:null};f.createSyntaxTree=
k;f.createFunction=function(b,a){a=a||q.clone(h);b="string"===typeof b?k(b):b;var c;try{c=b?g.compileScript(b,a):null}catch(u){c=null}return c};f.createExecContext=function(b,a){return{vars:{$feature:null==b?new l:l.createFromGraphic(b),$view:a&&a.view},spatialReference:a&&a.sr}};f.createFeature=function(b,a,d){return l.createFromGraphicLikeObject(a,b,d)};f.updateExecContext=function(b,a){b.vars.$feature=a};f.evalSyntaxTree=function(b,a){var c;try{c=g.executeScript(b,a,a.spatialReference)}catch(u){c=
null}return c};f.executeFunction=function(b,a){var c;try{c=b?b(a,a.spatialReference):null}catch(u){c=null}return c};f.extractFieldNames=function(b){if(!b)return[];b="string"===typeof b?k(b):b;var a=[];g.extractFieldLiterals(b).forEach(function(b){d.test(b)&&(b=b.replace(d,""),a.push(b))});a.sort();return a.filter(function(b,c){return 0===c||a[c-1]!==b})};f.dependsOnView=function(b){return g.referencesMember(b,"$view")};f.getViewInfo=function(b){if(b&&b.viewingMode&&null!=b.scale&&b.spatialReference)return{view:new n({viewingMode:b.viewingMode,
scale:b.scale}),sr:b.spatialReference}};f.hasGeometryOperations=function(b){return(b="string"===typeof b?k(b):b)&&g.scriptUsesGeometryEngine(b)};f.enableGeometryOperations=function(){return g.enableGeometrySupport()}})},"esri/arcade/arcade":function(){define("require exports dojo/Deferred dojo/has ./arcadeCompiler ./arcadeRuntime ./parser".split(" "),function(b,f,q,g,n,l,k){Object.defineProperty(f,"__esModule",{value:!0});var d="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");
f.compileScript=function(b,c){return g("csp-restrictions")?function(a,c){return l.executeScript(b,a,c)}:n.compileScript(b,c)};f.extend=function(b){l.extend(b);n.extend(b)};f.parseScript=function(b){return k.parseScript(b)};f.validateScript=function(b,c){return k.validateScript(b,c,"simple")};f.scriptCheck=function(b,c,a){return k.scriptCheck(b,c,a,"full")};f.parseAndExecuteScript=function(b,c,a){return l.executeScript(k.parseScript(b),c,a)};f.executeScript=function(b,c,a){return l.executeScript(b,
c,a)};f.referencesMember=function(b,c){return l.referencesMember(b,c)};f.referencesFunction=function(b,c){return l.referencesFunction(b,c)};f.extractFieldLiterals=function(b,c){void 0===c&&(c=!1);return k.extractFieldLiterals(b,c)};f.scriptUsesGeometryEngine=function(b){b=l.findFunctionCalls(b);for(var c=0;c<b.length;c++)if(-1<d.indexOf(b[c]))return!0;return!1};f.enableGeometrySupport=function(){var d=new q;b(["esri/geometry/geometryEngine","./functions/geomsync"],function(b,a){a.setGeometryEngine(b);
d.resolve(!0)},function(b){d.reject(b)});return d.promise}})},"esri/arcade/arcadeCompiler":function(){define("require exports ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),function(b,
f,q,g,n,l,k,d,h,c,a,p,u,v,z,t,x,r,m,e,w){function y(a,b,c){try{return c(a,null,b)}catch(ga){throw ga;}}function A(a,b){try{switch(b.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return G(a,b);case "VariableDeclaration":for(var c=[],e=0;e<b.declarations.length;e++)c.push(A(a,b.declarations[e]));return c.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return C(a,b);case "FunctionDeclaration":var e=b.id.name.toLowerCase(),g={applicationCache:void 0===
a.applicationCache?null:a.applicationCache,spatialReference:a.spatialReference,console:a.console,symbols:a.symbols,localScope:{_SymbolsMap:{}},depthCounter:a.depthCounter+1,globalScope:a.globalScope};if(64<g.depthCounter)throw Error("Exceeded maximum function depth");for(var f="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; var lscope \x3d [];\n ",h=0;h<b.params.length;h++){var m=b.params[h].name.toLowerCase(),p=Z(m,a);g.localScope._SymbolsMap[m]=
p;f+="lscope['"+p+"']\x3darguments["+h.toString()+"];\n"}f+=C(g,b.body)+"\n return lastStatement; }, runtimeCtx))";f+="\n lastStatement \x3d lc.voidOperation; \n";void 0!==a.globalScope[e]?c="gscope['"+e+"']\x3d"+f:void 0!==a.globalScope._SymbolsMap[e]?c="gscope['"+a.globalScope._SymbolsMap[e]+"']\x3d"+f:(p=Z(e,a),a.globalScope._SymbolsMap[e]=p,c="gscope['"+p+"']\x3d"+f);return c;case "ReturnStatement":var k;k=null===b.argument?"return lc.voidOperation;":"return "+A(a,b.argument)+";";return k;case "IfStatement":if("AssignmentExpression"===
b.test.type||"UpdateExpression"===b.test.type)throw Error(d.nodeErrorMessage(b.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var r=A(a,b.test),l=O(a),n="var "+l+" \x3d "+r+";\n if ("+l+" \x3d\x3d\x3d true) {\n"+F(a,b.consequent)+"\n }\n",n=null!==b.alternate?n+("else if ("+l+"\x3d\x3d\x3dfalse)   { \n"+F(a,b.alternate)+"}\n"):n+("else if ("+l+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return n+="else { lang.error({type: '"+b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";
case "ExpressionStatement":var u;u="AssignmentExpression"===b.expression.type?"lastStatement \x3d lc.voidOperation; "+A(a,b.expression)+" \n ":"lastStatement \x3d "+A(a,b.expression)+";";return u;case "AssignmentExpression":return B(a,b);case "UpdateExpression":return D(a,b);case "BreakStatement":return"break;";case "ContinueStatement":return"continue;";case "ForStatement":c="lastStatement \x3d lc.voidOperation; \n";null!==b.init&&(c+=A(a,b.init));var q=O(a),t=O(a),c=c+("var "+q+" \x3d true;")+"\n do { ";
null!==b.update&&(c+=" if ("+q+"\x3d\x3d\x3dfalse) {\n "+A(a,b.update)+"  \n}\n "+q+"\x3dfalse; \n");null!==b.test&&(c+="var "+t+" \x3d "+A(a,b.test)+";",c+="if ("+t+"\x3d\x3d\x3dfalse) { break; } else if ("+t+"!\x3d\x3dtrue) { lang.error({type: '"+b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");c+=A(a,b.body);null!==b.update&&(c+="\n "+A(a,b.update));return c+("\n"+q+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation;");case "ForInStatement":var v=O(a),w=O(a),
z=O(a),y="var "+v+" \x3d "+A(a,b.right)+";\n";"VariableDeclaration"===b.left.type&&(y+=A(a,b.left));var x="VariableDeclaration"===b.left.type?b.left.declarations[0].id.name:b.left.name,x=x.toLowerCase(),c="";null!==a.localScope&&(void 0!==a.localScope[x]?c="lscope['"+x+"']":void 0!==a.localScope._SymbolsMap[x]&&(c="lscope['"+a.localScope._SymbolsMap[x]+"']"));""===c&&(void 0!==a.globalScope[x]?c="gscope['"+x+"']":void 0!==a.globalScope._SymbolsMap[x]&&(c="gscope['"+a.globalScope._SymbolsMap[x]+"']"));
y=y+("if ("+v+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n ")+("else if (lc.isArray("+v+") || lc.isString("+v+")) {")+("var "+w+"\x3d"+v+".length; \n")+("for(var "+z+"\x3d0; "+z+"\x3c"+w+"; "+z+"++) {\n");y+=c+"\x3d"+z+";\n";y+=A(a,b.body);y+="\n}\n";y+=" lastStatement \x3d lc.voidOperation; \n";y+=" \n}\n";y+="else if (lc.isImmutableArray("+v+")) {";y=y+("var "+w+"\x3d"+v+".length(); \n")+("for(var "+z+"\x3d0; "+z+"\x3c"+w+"; "+z+"++) {\n");y+=c+"\x3d"+z+";\n";y+=A(a,b.body);y+=
"\n}\n";y+=" lastStatement \x3d lc.voidOperation; \n";y+=" \n}\n";y+="else if (( "+v+" instanceof lang.Dictionary) || ( "+v+" instanceof lang.Feature)) {";y=y+("var "+w+"\x3d"+v+".keys(); \n")+("for(var "+z+"\x3d0; "+z+"\x3c"+w+".length; "+z+"++) {\n");y+=c+"\x3d"+w+"["+z+"];\n";y+=A(a,b.body);y+="\n}\n";y+=" lastStatement \x3d lc.voidOperation; \n";y+=" \n}\n";return y+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return fa(a,b);case "MemberExpression":var N;try{c=void 0,c=
!0===b.computed?A(a,b.property):"'"+b.property.name+"'",N="lang.member("+A(a,b.object)+","+c+")"}catch(wa){throw wa;}return N;case "Literal":return null===b.value||void 0===b.value?"null":JSON.stringify(b.value);case "ThisExpression":throw Error(d.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==b.callee.type)throw Error(d.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));var P=b.callee.name.toLowerCase(),c="";null!==a.localScope&&(void 0!==a.localScope[P]?
c="lscope['"+P+"']":void 0!==a.localScope._SymbolsMap[P]&&(c="lscope['"+a.localScope._SymbolsMap[P]+"']"));""===c&&(void 0!==a.globalScope[P]?c="gscope['"+P+"']":void 0!==a.globalScope._SymbolsMap[P]&&(c="gscope['"+a.globalScope._SymbolsMap[P]+"']"));if(""!==c)for(e="[",g=0;g<b.arguments.length;g++)0<g&&(e+=", "),e+=A(a,b.arguments[g]);else throw Error(d.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));}catch(wa){throw wa;}return"lang.callfunc("+c+","+(e+"]")+",runtimeCtx)";case "UnaryExpression":var K;
try{K="lang.unary("+A(a,b.argument)+",'"+b.operator+"')"}catch(wa){throw wa;}return K;case "BinaryExpression":var Y;try{Y="lang.binary("+A(a,b.left)+","+A(a,b.right)+",'"+b.operator+"')"}catch(wa){throw wa;}return Y;case "LogicalExpression":var W;try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(d.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)throw Error(d.nodeErrorMessage(b.right,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===b.operator||"||"===b.operator)W="(lang.logicalCheck("+A(a,b.left)+") "+b.operator+" lang.logicalCheck("+A(a,b.right)+"))";else throw Error(d.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));}catch(wa){throw wa;}return W;case "ConditionalExpression":throw Error(d.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{c=[];for(e=0;e<b.elements.length;e++)"Literal"===b.elements[e].type?c.push(A(a,b.elements[e])):
c.push("lang.aCheck("+A(a,b.elements[e])+",'ArrayExpression')");f="["+c.join(",")+"]"}catch(wa){throw wa;}return f;case "ObjectExpression":c="lang.dictionary([";for(e=0;e<b.properties.length;e++){var h=b.properties[e],H="Identifier"===h.key.type?"'"+h.key.name+"'":A(a,h.key),J=A(a,h.value);0<e&&(c+=",");c+="lang.strCheck("+H+",'ObjectExpression'),lang.aCheck("+J+", 'ObjectExpression')"}return c+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(d.nodeErrorMessage(b,"RUNTIME",
"NOTSUPPORTED"));default:throw Error(d.nodeErrorMessage(b,"RUNTIME","UNREOGNISED"));}}catch(wa){throw wa;}}function D(a,b){var c=null,d="";if("MemberExpression"===b.argument.type)return c=A(a,b.argument.object),d=!0===b.argument.computed?A(a,b.argument.property):"'"+b.argument.property.name+"'","lang.memberupdate("+c+","+d+",'"+b.operator+"',"+b.prefix+")";c=b.argument.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lang.update(lscope, '"+c+"','"+b.operator+"',"+b.prefix+
")";if(void 0!==a.localScope._SymbolsMap[c])return"lang.update(lscope, '"+a.localScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")"}if(void 0!==a.globalScope[c])return"lang.update(gscope, '"+c+"','"+b.operator+"',"+b.prefix+")";if(void 0!==a.globalScope._SymbolsMap[c])return"lang.update(gscope, '"+a.globalScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")";throw Error("Variable not recognised");}function B(a,b){var c=A(a,b.right),d=null,e="";if("MemberExpression"===b.left.type)return d=A(a,
b.left.object),e=!0===b.left.computed?A(a,b.left.property):"'"+b.left.property.name+"'","lang.assignmember("+d+","+e+",'"+b.operator+"',"+c+");";d=b.left.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[d])return"lscope['"+d+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+d+"']); ";if(void 0!==a.localScope._SymbolsMap[d])return"lscope['"+a.localScope._SymbolsMap[d]+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+a.localScope._SymbolsMap[d]+"']); "}if(void 0!==a.globalScope[d])return"gscope['"+
d+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+d+"']); ";if(void 0!==a.globalScope._SymbolsMap[d])return"gscope['"+a.globalScope._SymbolsMap[d]+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+a.globalScope._SymbolsMap[d]+"']); ";throw Error("Variable not recognised");}function F(a,b){return"BlockStatement"===b.type?A(a,b):"ReturnStatement"===b.type?A(a,b):"BreakStatement"===b.type?A(a,b):"ContinueStatement"===b.type?A(a,b):"UpdateExpression"===b.type?"lastStatement \x3d "+A(a,b)+";":
"ExpressionStatement"===b.type?A(a,b):"ObjectExpression"===b.type?"lastStatement \x3d "+A(a,b)+";":A(a,b)}function C(a,b){for(var c="",d=0;d<b.body.length;d++)c="ReturnStatement"===b.body[d].type?c+(A(a,b.body[d])+" \n"):"BreakStatement"===b.body[d].type?c+(A(a,b.body[d])+" \n"):"ContinueStatement"===b.body[d].type?c+(A(a,b.body[d])+" \n"):"UpdateExpression"===b.body[d].type?c+("lastStatement \x3d "+A(a,b.body[d])+"; \n"):"ObjectExpression"===b.body[d].type?c+("lastStatement \x3d "+A(a,b.body[d])+
"; \n"):c+(A(a,b.body[d])+" \n");return c}function G(a,b){var c=null===b.init?null:A(a,b.init);c===k.voidOperation&&(c=null);b=b.id.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[b])return"lscope['"+b+"']\x3d"+c+";";if(void 0!==a.localScope._SymbolsMap[b])return"lscope['"+a.localScope._SymbolsMap[b]+"']\x3d"+c+";";var d=Z(b,a);a.localScope._SymbolsMap[b]=d;return"lscope['"+d+"']\x3d"+c+";"}if(void 0!==a.globalScope[b])return"gscope['"+b+"']\x3d"+c+";";if(void 0!==a.globalScope._SymbolsMap[b])return"gscope['"+
a.globalScope._SymbolsMap[b]+"']\x3d"+c+";";d=Z(b,a);a.globalScope._SymbolsMap[b]=d;return"gscope['"+d+"']\x3d"+c+";"}function W(a,b,c){b=b.toLowerCase();switch(b){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return b=a.spatialReference._arcadeCacheId,void 0===b&&(c=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(c=!1),c&&(M++,b=a.spatialReference._arcadeCacheId=M)),a=new q({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),
void 0!==b&&(a._arcadeCacheId="SPREF"+b.toString()),a}switch(a.type){case "extent":switch(b){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[b],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(b){case "rings":return b=k.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===b&&(M++,b=M,k.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",b)),a=new n(a.rings,a.spatialReference,
!0===a.hasZ,!0===a.hasM,b);case "type":return"Polygon"}break;case "point":switch(b){case "x":case "y":case "z":case "m":return void 0!==a[b]?a[b]:null;case "type":return"Point"}break;case "polyline":switch(b){case "paths":return b=k.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===b&&(M++,b=M,k.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",b)),a=new n(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polyline"}break;case "multipoint":switch(b){case "points":return b=
k.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===b&&(M++,b=M,k.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",b)),a=new l(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,b,1);case "type":return"Multipoint"}}throw Error(d.nodeErrorMessage(c,"RUNTIME","PROPERTYNOTFOUND"));}function fa(a,b){try{var c=b.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lscope['"+c+"']";if(void 0!==a.localScope._SymbolsMap[c])return"lscope['"+
a.localScope._SymbolsMap[c]+"']"}if(void 0!==a.globalScope[c])return"gscope['"+c+"']";if(void 0!==a.globalScope._SymbolsMap[c])return"gscope['"+a.globalScope._SymbolsMap[c]+"']";throw Error(d.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(ga){throw ga;}}function V(a){return null===a?"":k.isArray(a)||k.isImmutableArray(a)?"Array":k.isDate(a)?"Date":k.isString(a)?"String":k.isBoolean(a)?"Boolean":k.isNumber(a)?"Number":a instanceof q?"Dictionary":a instanceof g?"Feature":a instanceof r?"Point":
a instanceof m?"Polygon":a instanceof e?"Polyline":a instanceof x?"Multipoint":a instanceof z?"Extent":k.isFunctionParameter(a)?"Function":a===k.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function H(a,b,c,d){try{if(k.equalityTest(b[c],d))return b[c+1];var e=b.length-c;return 1===e?b[c]:2===e?null:3===e?b[c+2]:H(a,b,c+2,d)}catch(la){throw la;}}function ba(a,b,c,d){try{if(!0===d)return b[c+1];if(3===b.length-c)return b[c+2];var e=b[c+2];if(!1===k.isBoolean(e))throw Error("WHEN needs boolean test conditions");
return ba(a,b,c+2,e)}catch(la){throw la;}}function J(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var e=J(a.slice(0,d),b);a=J(a.slice(d,c),b);for(c=[];0<e.length||0<a.length;)0<e.length&&0<a.length?(d=b(e[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(e[0]),e=e.slice(1)):(c.push(a[0]),a=a.slice(1))):0<e.length?(c.push(e[0]),e=e.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function Z(a,b){b.symbols.symbolCounter++;return"_T"+b.symbols.symbolCounter.toString()}
function O(a){a.symbols.symbolCounter++;return"_Tvar"+a.symbols.symbolCounter.toString()}function N(a,b,c){var d={};a||(a={});c||(c={});d._SymbolsMap={};d.textformatting=1;d.infinity=1;d.pi=1;for(var e in b)d[e]=1;for(e in c)d[e]=1;for(e in a)d[e]=1;return d}function K(a){console.log(a)}Object.defineProperty(f,"__esModule",{value:!0});var M=0,U={};h.registerFunctions(U,y);v.registerFunctions(U,y);p.registerFunctions(U,y);c.registerFunctions(U,y);u.registerFunctions(U,y);a.registerFunctions(U,y);U["typeof"]=
function(a,b){return y(a,b,function(a,b,c){k.pcCheck(c,1,1);a=V(c[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};U.iif=function(a,b){try{return y(a,b,function(a,b,c){k.pcCheck(c,3,3);if(!1===k.isBoolean(c[0]))throw Error("IF Function must have a boolean test condition");return c[0]?c[1]:c[2]})}catch(aa){throw aa;}};U.decode=function(a,b){try{return y(a,b,function(b,c,d){if(2>d.length)throw Error("Missing Parameters");if(2===d.length)return d[1];if(0===(d.length-1)%2)throw Error("Must have a default value result.");
return H(a,d,1,d[0])})}catch(aa){throw aa;}};U.when=function(a,b){try{return y(a,b,function(b,c,d){if(3>d.length)throw Error("Missing Parameters");if(0===d.length%2)throw Error("Must have a default value result.");b=d[0];if(!1===k.isBoolean(b))throw Error("WHEN needs boolean test conditions");return ba(a,d,0,b)})}catch(aa){throw aa;}};U.top=function(a,b){return y(a,b,function(a,b,c){k.pcCheck(c,2,2);if(k.isArray(c[0]))return k.toNumber(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,k.toNumber(c[1]));
if(k.isImmutableArray(c[0]))return k.toNumber(c[1])>=c[0].length()?c[0].slice(0):c[0].slice(0,k.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};U.first=function(a,b){return y(a,b,function(a,b,c){k.pcCheck(c,1,1);return k.isArray(c[0])?0===c[0].length?null:c[0][0]:k.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):null})};U.sort=function(a,b){return y(a,b,function(a,b,c){k.pcCheck(c,1,2);b=c[0];k.isImmutableArray(b)&&(b=b.toArray());if(!1===k.isArray(b))throw Error("Illegal Argument");
if(1<c.length){if(!1===k.isFunctionParameter(c[1]))throw Error("Illegal Argument");b=J(b,function(b,d){return Q.callfunc(c[1],[b,d],a)})}else{if(0===b.length)return[];for(var d={},e=0;e<b.length;e++){var g=V(b[e]);""!==g&&(d[g]=!0)}if(!0===d.Array||!0===d.Dictionary||!0===d.Feature||!0===d.Point||!0===d.Polygon||!0===d.Polyline||!0===d.Multipoint||!0===d.Extent||!0===d.Function)return b.slice(0);var e=0,g="",f;for(f in d)e++,g=f;b=1<e||"String"===g?J(b,function(a,b){if(null===a||void 0===a||a===k.voidOperation)return null===
b||void 0===b||b===k.voidOperation?0:1;if(null===b||void 0===b||b===k.voidOperation)return-1;a=k.toString(a);b=k.toString(b);return a<b?-1:a===b?0:1}):"Number"===g?J(b,function(a,b){return a-b}):"Boolean"===g?J(b,function(a,b){return a===b?0:b?-1:1}):"Date"===g?J(b,function(a,b){return b-a}):b.slice(0)}return b})};for(var T in U)U[T]=new k.NativeFunction(U[T]);var da=function(){};da.prototype=U;f.functionHelper={fixSpatialReference:k.fixSpatialReference,parseArguments:function(a,b){for(var c=[],d=
0;d<b.arguments.length;d++)c.push(A(a,b.arguments[d]));return c},standardFunction:y};f.extend=function(a){for(var b={mode:"sync",compiled:!0,functions:{},signatures:[],standardFunction:y},c=0;c<a.length;c++)a[c].registerFunctions(b);for(var e in b.functions)U[e]=new k.NativeFunction(b.functions[e]),da.prototype[e]=U[e];for(c=0;c<b.signatures.length;c++)d.addFunctionDeclaration(b.signatures[c],"f")};f.executeScript=function(a,b,c){return a(b,c)};f.extractFieldLiterals=function(a,b){void 0===b&&(b=
!1);return d.findFieldLiterals(a,b)};f.validateScript=function(a,b){return d.validateScript(a,b,"simple")};f.referencesMember=function(a,b){return d.referencesMember(a,b)};f.referencesFunction=function(a,b){return d.referencesFunction(a,b)};var Q={error:function(a,b,c){throw Error(d.nodeErrorMessage(a,b,c));},functionDepthchecker:function(a,b){return function(){b.depthCounte++;if(64<b.depthCounter)throw Error("Exceeded maximum function depth");var c=a.apply(this,arguments);b.depthCounte--;return c}},
aCheck:function(a,b){if(k.isFunctionParameter(a))throw Error(d.nodeErrorMessage({type:b},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return a===k.voidOperation?null:a},Dictionary:q,Feature:g,dictionary:function(a){for(var b={},c=0;c<a.length;c+=2){if(k.isFunctionParameter(a[c+1]))throw Error("Illegal Argument");if(!1===k.isString(a[c]))throw Error("Illegal Argument");b[a[c].toString()]=a[c+1]===k.voidOperation?null:a[c+1]}a=new q(b);a.immutable=!1;return a},strCheck:function(a,b){if(!1===k.isString(a))throw Error("Illegal Argument");
return a},unary:function(a,b){if(k.isBoolean(a)){if("!"===b)return!a;if("-"===b)return-1*k.toNumber(a);if("+"===b)return 1*k.toNumber(a);throw Error(d.nodeErrorMessage({type:"UnaryExpression"},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===b)return-1*k.toNumber(a);if("+"===b)return 1*k.toNumber(a);throw Error(d.nodeErrorMessage({type:"UnaryExpression"},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(a){if(!1===k.isBoolean(a))throw Error(d.nodeErrorMessage("LogicalExpression","RUNTIME",
"ONLYORORAND"));return a},logical:function(a,b,c){if(k.isBoolean(a)&&k.isBoolean(b))switch(c){case "||":return a||b;case "\x26\x26":return a&&b;default:throw Error(d.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));}else throw Error(d.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));},binary:function(a,b,c){switch(c){case "\x3d\x3d":return k.equalityTest(a,b);case "\x3d":return k.equalityTest(a,b);case "!\x3d":return!k.equalityTest(a,b);case "\x3c":return k.greaterThanLessThan(a,
b,c);case "\x3e":return k.greaterThanLessThan(a,b,c);case "\x3c\x3d":return k.greaterThanLessThan(a,b,c);case "\x3e\x3d":return k.greaterThanLessThan(a,b,c);case "+":return k.isString(a)||k.isString(b)?k.toString(a)+k.toString(b):k.toNumber(a)+k.toNumber(b);case "-":return k.toNumber(a)-k.toNumber(b);case "*":return k.toNumber(a)*k.toNumber(b);case "/":return k.toNumber(a)/k.toNumber(b);case "%":return k.toNumber(a)%k.toNumber(b);default:throw Error(d.nodeErrorMessage({type:"BinaryExpression"},"RUNTIME",
"OPERATORNOTRECOGNISED"));}},assign:function(a,b,c){switch(b){case "\x3d":return a===k.voidOperation?null:a;case "/\x3d":return k.toNumber(c)/k.toNumber(a);case "*\x3d":return k.toNumber(c)*k.toNumber(a);case "-\x3d":return k.toNumber(c)-k.toNumber(a);case "+\x3d":return k.isString(c)||k.isString(a)?k.toString(c)+k.toString(a):k.toNumber(c)+k.toNumber(a);case "%\x3d":return k.toNumber(c)%k.toNumber(a);default:throw Error(d.nodeErrorMessage("AssignmentExpression","RUNTIME","OPERATORNOTRECOGNISED"));
}},update:function(a,b,c,d){var e=k.toNumber(a[b]);a[b]="++"===c?e+1:e-1;return!1===d?e:"++"===c?e+1:e-1},memberupdate:function(a,b,c,d){var e;if(k.isArray(a))if(k.isNumber(b)){0>b&&(b=a.length+b);if(0>b||b>=a.length)throw Error("Assignment outside of array bounds");e=k.toNumber(a[b]);a[b]="++"===c?e+1:e-1}else throw Error("Invalid Parameter");else if(a instanceof q){if(!1===k.isString(b))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(b))e=k.toNumber(a.field(b)),a.setField(b,
"++"===c?e+1:e-1);else throw Error("Invalid Parameter");}else if(a instanceof g){if(!1===k.isString(b))throw Error("Feature accessor must be a string");if(!0===a.hasField(b))e=k.toNumber(a.field(b)),a.setField(b,"++"===c?e+1:e-1);else throw Error("Invalid Parameter");}else{if(k.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===d?e:"++"===c?e+1:e-1},assignmember:function(a,b,c,d){if(k.isArray(a))if(k.isNumber(b)){0>b&&(b=a.length+b);if(0>b||b>a.length)throw Error("Assignment outside of array bounds");
if(b===a.length&&"\x3d"!==c)throw Error("Invalid Parameter");a[b]=this.assign(d,c,a[b])}else throw Error("Invalid Parameter");else if(a instanceof q){if(!1===k.isString(b))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(b))a.setField(b,this.assign(d,c,a.field(b)));else{if("\x3d"!==c)throw Error("Invalid Parameter");a.setField(b,this.assign(d,c,null))}}else if(a instanceof g){if(!1===k.isString(b))throw Error("Feature accessor must be a string");if(!0===a.hasField(b))a.setField(b,
this.assign(d,c,a.field(b)));else{if("\x3d"!==c)throw Error("Invalid Parameter");a.setField(b,this.assign(d,c,null))}}else{if(k.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(a,b){if(null===a)throw Error(d.nodeErrorMessage("MemberExpression","RUNTIME","NOTFOUND"));if(a instanceof q||a instanceof g){if(k.isString(b))return a.field(b)}else if(a instanceof t){if(k.isString(b))return W(a,b,"MemberExpression")}else if(k.isArray(a)){if(k.isNumber(b)&&
isFinite(b)&&Math.floor(b)===b){0>b&&(b=a.length+b);if(b>=a.length||0>b)throw Error(d.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return a[b]}}else if(k.isString(a)){if(k.isNumber(b)&&isFinite(b)&&Math.floor(b)===b){0>b&&(b=a.length+b);if(b>=a.length||0>b)throw Error(d.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return a[b]}}else if(k.isImmutableArray(a)&&k.isNumber(b)&&isFinite(b)&&Math.floor(b)===b){0>b&&(b=a.length()+b);if(b>=a.length()||0>b)throw Error(d.nodeErrorMessage("MemberExpression",
"RUNTIME","OUTOFBOUNDS"));return a.get(b)}throw Error(d.nodeErrorMessage("MemberExpression","RUNTIME","INVALIDTYPE"));},callfunc:function(a,b,c){return a instanceof k.NativeFunction?a.fn(c,b):a instanceof k.SizzleFunction?a.fn.apply(this,b):a.apply(this,b)}};f.compileScript=function(a,b){void 0===b&&(b=null);null===b&&(b={vars:{},customfunctions:{}});b={globalScope:N(b.vars,U,b.customfunctions),localScope:null,console:K,symbols:{symbolCounter:0}};a=A(b,a.body[0].body);""===a&&(a="lc.voidOperation;");
b={lc:k,lang:Q,postProcess:function(a){a instanceof k.ReturnResult&&(a=a.value);a instanceof k.ImplicitResult&&(a=a.value);a===k.voidOperation&&(a=null);if(a===k.breakResult)throw Error("Cannot return BREAK");if(a===k.continueResult)throw Error("Cannot return CONTINUE");if(k.isFunctionParameter(a))throw Error("Cannot return FUNCTION");return a},prepare:function(a,b){b||(b=new w({wkid:102100}));var c=a.vars,d=a.customfunctions,e=new da;c||(c={});d||(d={});var f=new q({newline:"\n",tab:"\t",singlequote:"'",
doublequote:'"',forwardslash:"/",backwardslash:"\\"});f.immutable=!1;e._SymbolsMap={textformatting:1,infinity:1,pi:1};e.textformatting=f;e.infinity=Number.POSITIVE_INFINITY;e.pi=Math.PI;for(var h in d)e[h]=d[h],e._SymbolsMap[h]=1;for(h in c)e._SymbolsMap[h]=1,e[h]=c[h]&&"esri.Graphic"===c[h].declaredClass?g.createFromGraphic(c[h]):c[h];return{spatialReference:b,globalScope:e,localScope:null,console:a.console?a.console:K,symbols:{symbolCounter:0},depthCounter:1,applicationCache:void 0===a.applicationCache?
null:a.applicationCache}}};return(new Function("context","spatialReference","var runtimeCtx\x3dthis.prepare(context, spatialReference);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+a+"\n return lastStatement; } \n return this.postProcess(mainBody());")).bind(b)}})},"esri/arcade/Dictionary":function(){define(["require","exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],
function(b,f,q,g,n){return function(){function b(g){this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=g instanceof b?g.attributes:void 0===g?{}:null===g?{}:g}b.prototype.field=function(b){var d=b.toLowerCase();b=this.attributes[b];if(void 0!==b)return b;for(var g in this.attributes)if(g.toLowerCase()===d)return this.attributes[g];throw Error("Field not Found");};b.prototype.setField=function(b,d){if(this.immutable)throw Error("Dictionary is Immutable");var g=b.toLowerCase();if(void 0===
this.attributes[b])for(var c in this.attributes)if(c.toLowerCase()===g){this.attributes[c]=d;return}this.attributes[b]=d};b.prototype.hasField=function(b){var d=b.toLowerCase();if(void 0!==this.attributes[b])return!0;for(var g in this.attributes)if(g.toLowerCase()===d)return!0;return!1};b.prototype.keys=function(){var b=[],d;for(d in this.attributes)b.push(d);return b=b.sort()};b.prototype.castToText=function(){var b="",d;for(d in this.attributes){""!==b&&(b+=",");var f=this.attributes[d];null==f?
b+=JSON.stringify(d)+":null":g.isBoolean(f)||g.isNumber(f)||g.isString(f)?b+=JSON.stringify(d)+":"+JSON.stringify(f):f instanceof n?b+=JSON.stringify(d)+":"+g.toStringExplicit(f):f instanceof q?b+=JSON.stringify(d)+":"+g.toStringExplicit(f):f instanceof Array?b+=JSON.stringify(d)+":"+g.toStringExplicit(f):f instanceof Date?b+=JSON.stringify(d)+":"+JSON.stringify(f):null!==f&&"object"===typeof f&&void 0!==f.castToText&&(b+=JSON.stringify(d)+":"+f.castToText())}return"{"+b+"}"};return b}()})},"esri/arcade/ImmutableArray":function(){define(["require",
"exports"],function(b,f){return function(){function b(b){void 0===b&&(b=[]);this._elements=b}b.prototype.length=function(){return this._elements.length};b.prototype.get=function(b){return this._elements[b]};b.prototype.toArray=function(){for(var b=[],f=0;f<this.length();f++)b.push(this.get(f));return b};return b}()})},"esri/arcade/languageUtils":function(){define("require exports dojo/number ../kernel ../moment ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z){function t(a,b,c){if(""===b||null===b||void 0===b||b===c||b===c)return a;do a=a.replace(b,c);while(-1!==a.indexOf(b));return a}function x(a){return a instanceof Z||a instanceof l||a instanceof O}function r(a){return"string"===typeof a||a instanceof String}function m(a){return"boolean"===typeof a}function e(a){return"number"===typeof a}function w(a){return a instanceof Array}function y(a){return a instanceof Date}function A(a,b){if(!1===isNaN(a)){if(void 0===
b||null===b||""===b)return a.toString();b=t(b,"\u2030","");b=t(b,"\u00a4","");return q.format(a,{pattern:b})}return a.toString()}function D(a,b){a=n(a);return void 0===b||null===b||""===b?a.format():a.format(B(b))}function B(a){return a.replace(/(LTS)|L|l/g,function(a){return"["+a+"]"})}function F(a,b,c){switch(c){case "\x3e":return a>b;case "\x3c":return a<b;case "\x3e\x3d":return a>=b;case "\x3c\x3d":return a<=b}return!1}function C(a,b){if(a===b||null===a&&b===f.voidOperation||null===b&&a===f.voidOperation)return!0;
if(y(a)&&y(b))return a.getTime()===b.getTime();if(a instanceof d||a instanceof h)return a.equalityTest(b);if(a instanceof u&&b instanceof u){var c=void 0,e=void 0;f.isVersion4?(c=a.cache._arcadeCacheId,e=b.cache._arcadeCacheId):(c=a.getCacheValue("_arcadeCacheId"),e=b.getCacheValue("_arcadeCacheId"));if(void 0!==c&&null!==c)return c===e}return void 0!==a&&void 0!==b&&null!==a&&null!==b&&"object"===typeof a&&"object"===typeof b&&(a._arcadeCacheId===b._arcadeCacheId&&void 0!==a._arcadeCacheId&&null!==
a._arcadeCacheId||a._underlyingGraphic===b._underlyingGraphic&&void 0!==a._underlyingGraphic&&null!==a._underlyingGraphic)?!0:!1}function G(b,c){if(r(b))return b;if(null===b)return"";if(e(b))return A(b,c);if(m(b))return b.toString();if(y(b))return D(b,c);if(b instanceof a)return JSON.stringify(b.toJSON());if(w(b)){c=[];for(var d=0;d<b.length;d++)c[d]=fa(b[d]);return"["+c.join(",")+"]"}if(b instanceof k){c=[];for(d=0;d<b.length();d++)c[d]=fa(b.get(d));return"["+c.join(",")+"]"}return null!==b&&"object"===
typeof b&&void 0!==b.castToText?b.castToText():x(b)?"object, Function":""}function W(b,d){if(r(b))return b;if(null===b)return"";if(e(b))return A(b,d);if(m(b))return b.toString();if(y(b))return D(b,d);if(b instanceof a)return b instanceof c?'{"xmin":'+b.xmin.toString()+',"ymin":'+b.ymin.toString()+","+(b.hasZ?'"zmin":'+b.zmin.toString()+",":"")+(b.hasM?'"mmin":'+b.mmin.toString()+",":"")+'"xmax":'+b.xmax.toString()+',"ymax":'+b.ymax.toString()+","+(b.hasZ?'"zmax":'+b.zmax.toString()+",":"")+(b.hasM?
'"mmax":'+b.mmax.toString()+",":"")+'"spatialReference":'+ba(b.spatialReference)+"}":ba(b.toJSON(),function(a,b){return a.key===b.key?0:"spatialReference"===a.key?1:"spatialReference"===b.key||a.key<b.key?-1:a.key>b.key?1:0});if(w(b)){d=[];for(var g=0;g<b.length;g++)d[g]=fa(b[g]);return"["+d.join(",")+"]"}if(b instanceof k){d=[];for(g=0;g<b.length();g++)d[g]=fa(b.get(g));return"["+d.join(",")+"]"}return null!==b&&"object"===typeof b&&void 0!==b.castToText?b.castToText():x(b)?"object, Function":""}
function fa(b){if(null!==b){if(m(b)||e(b)||r(b))return JSON.stringify(b);if(b instanceof a||b instanceof k||b instanceof Array)return W(b);if(b instanceof Date)return JSON.stringify(D(b,""));if(null!==b&&"object"===typeof b&&void 0!==b.castToText)return b.castToText()}return"null"}function V(a,b){return e(a)?a:null===a||""===a?0:y(a)?NaN:m(a)?a?1:0:w(a)||""===a||void 0===a?NaN:void 0!==b&&r(a)?(b=t(b,"\u2030",""),b=t(b,"\u00a4",""),q.parse(a,{pattern:b})):a===f.voidOperation?0:Number(a)}function H(a,
b){var c;b.fields.some(function(b){b.name===a&&(c=b.domain);return!!c});return c}function ba(a,b){b||(b={});"function"===typeof b&&(b={cmp:b});var c="boolean"===typeof b.cycles?b.cycles:!1,d=b.cmp&&function(a){return function(b){return function(c,d){return a({key:c,value:b[c]},{key:d,value:b[d]})}}}(b.cmp),e=[];return function Q(a){a&&a.toJSON&&"function"===typeof a.toJSON&&(a=a.toJSON());if(void 0!==a){if("number"===typeof a)return isFinite(a)?""+a:"null";if("object"!==typeof a)return JSON.stringify(a);
var b,g;if(Array.isArray(a)){g="[";for(b=0;b<a.length;b++)b&&(g+=","),g+=Q(a[b])||"null";return g+"]"}if(null===a)return"null";if(-1!==e.indexOf(a)){if(c)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var f=e.push(a)-1,h=Object.keys(a).sort(d&&d(a));g="";for(b=0;b<h.length;b++){var m=h[b],p=Q(a[m]);p&&(g&&(g+=","),g+=JSON.stringify(m)+":"+p)}e.splice(f,1);return"{"+g+"}"}}(a)}Object.defineProperty(f,"__esModule",{value:!0});b=function(){return function(a){this.value=
a}}();var J=function(){return function(a){this.value=a}}(),Z=function(){return function(a){this.fn=a}}(),O=function(){return function(a){this.fn=a}}();f.NativeFunction=Z;f.ImplicitResult=J;f.ReturnResult=b;f.SizzleFunction=O;f.isVersion4=0===g.version.indexOf("4.");f.voidOperation={type:"VOID"};f.breakResult={type:"BREAK"};f.continueResult={type:"CONTINUE"};f.multiReplace=t;f.isFunctionParameter=x;f.isSimpleType=function(a){return r(a)||e(a)||y(a)||m(a)||null===a||a===f.voidOperation||"number"===
typeof a?!0:!1};f.defaultUndefined=function(a,b){return void 0===a?b:a};f.isString=r;f.isBoolean=m;f.isNumber=e;f.isArray=w;f.isFeatureCursor=function(a){return a&&void 0!==a.isFeatureCursor};f.isImmutableArray=function(a){return a instanceof k};f.isDate=y;f.pcCheck=function(a,b,c){if(a.length<b||a.length>c)throw Error("Function called with wrong number of Parameters");};f.generateUUID=function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=
(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"===b?c:c&3|8).toString(16)})};f.formatNumber=A;f.formatDate=D;f.standardiseDateFormat=B;f.greaterThanLessThan=function(a,b,c){if(null===a){if(null===b||b===f.voidOperation)return F(null,null,c);if(e(b))return F(0,b,c);if(r(b)||m(b))return F(0,V(b),c);if(y(b))return F(0,b.getTime(),c)}if(a===f.voidOperation){if(null===b||b===f.voidOperation)return F(null,null,c);if(e(b))return F(0,b,c);if(r(b)||m(b))return F(0,V(b),c);if(y(b))return F(0,b.getTime(),
c)}else if(e(a)){if(e(b))return F(a,b,c);if(m(b))return F(a,V(b),c);if(null===b||b===f.voidOperation)return F(a,0,c);if(r(b))return F(a,V(b),c);if(y(b))return F(a,b.getTime(),c)}else if(r(a)){if(r(b))return F(G(a),G(b),c);if(y(b))return F(V(a),b.getTime(),c);if(e(b))return F(V(a),b,c);if(null===b||b===f.voidOperation)return F(V(a),0,c);if(m(b))return F(V(a),V(b),c)}else if(y(a)){if(y(b))return F(a,b,c);if(null===b||b===f.voidOperation)return F(a.getTime(),0,c);if(e(b))return F(a.getTime(),b,c);if(m(b)||
r(b))return F(a.getTime(),V(b),c)}else if(m(a)){if(m(b))return F(a,b,c);if(e(b))return F(V(a),V(b),c);if(y(b))return F(V(a),b.getTime(),c);if(null===b||b===f.voidOperation)return F(V(a),0,c);if(r(b))return F(V(a),V(b),c)}return!C(a,b)||"\x3c\x3d"!==c&&"\x3e\x3d"!==c?!1:!0};f.equalityTest=C;f.toString=G;f.toNumberArray=function(a){var b=[];if(!1===w(a))return null;if(a instanceof k){for(var c=0;c<a.length();c++)b[c]=V(a.get(c));return b}for(c=0;c<a.length;c++)b[c]=V(a[c]);return b};f.toStringExplicit=
W;f.toNumber=V;f.toDate=function(a,b){return y(a)?a:r(a)&&(a=n(a,[void 0===b||null===b||""===b?n.ISO_8601:b]),a.isValid())?a.toDate():null};f.toDateM=function(a,b){return y(a)?n(a):r(a)&&(a=n(a,[void 0===b||null===b||""===b?n.ISO_8601:b]),a.isValid())?a:null};f.toBoolean=function(a){if(m(a))return a;if(r(a)){if(a=a.toLowerCase(),"true"===a)return!0}else if(e(a))return 0===a||isNaN(a)?!1:!0;return!1};f.fixSpatialReference=function(a,b){if(null===a||void 0===a)return null;if(null===a.spatialReference||
void 0===a.spatialReference)a.spatialReference=b;return a};f.fixNullGeometry=function(a){return null===a?null:a instanceof u?"NaN"===a.x||null===a.x||isNaN(a.x)?null:a:a instanceof v?0===a.rings.length?null:a:a instanceof z?0===a.paths.length?null:a:a instanceof p?0===a.points.length?null:a:a instanceof c?"NaN"===a.xmin||null===a.xmin||isNaN(a.xmin)?null:a:null};f.getDomainValue=function(a,b){if(!a||!a.domain)return null;var c=null;b="string"===a.field.type||"esriFieldTypeString"===a.field.type?G(b):
V(b);for(var d=0;d<a.domain.codedValues.length;d++){var e=a.domain.codedValues[d];e.code===b&&(c=e)}return null===c?null:c.name};f.getDomainCode=function(a,b){if(!a||!a.domain)return null;var c=null;b=G(b);for(var d=0;d<a.domain.codedValues.length;d++){var e=a.domain.codedValues[d];e.name===b&&(c=e)}return null===c?null:c.code};f.getDomain=function(a,b,c,d){void 0===c&&(c=null);if(!b||!b.fields)return null;for(var e=null,g=0;g<b.fields.length;g++){var f=b.fields[g];f.name.toLowerCase()===a.toString().toLowerCase()&&
(e=f)}if(null===e)return null;var h,m;d||(d=c&&b.typeIdField&&c._field(b.typeIdField));null!=d&&b.types.some(function(a){return a.id===d?((h=a.domains&&a.domains[e.name])&&"inherited"===h.type&&(h=H(e.name,b),m=!0),!0):!1});m||h||(h=H(a,b));return{field:e,domain:h}};f.stableStringify=ba;f.autoCastFeatureToGeometry=function(a){if(null===a)return null;for(var b=[],c=0;c<a.length;c++){var d=a[c];d&&d.declaredClass&&"esri.arcade.Feature"===d.declaredClass?b.push(d.geometry()):b.push(d)}return b}})},"esri/moment":function(){define(["require",
"exports","./plugins/moment!"],function(b,f,q){return q})},"esri/plugins/moment":function(){define(["require","exports","dojo/_base/kernel","moment/moment"],function(b,f,q,g){Object.defineProperty(f,"__esModule",{value:!0});var n={ar:1,"ar-dz":1,"ar-kw":1,"ar-ly":1,"ar-ma":1,"ar-sa":1,"ar-tn":1,bs:1,ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-il":1,"en-nz":1,es:1,"es-do":1,"es-us":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,
ko:1,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1};f.load=function(b,f,d){b=q.locale;var h=b in n;if(!h){var c=b.split("-");1<c.length&&c[0]in n&&(b=c[0],h=!0)}h?f(["moment/locale/"+b],function(){d(g)}):d(g)}})},"moment/moment":function(){(function(b,f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f():"function"===typeof define&&define.amd?define(f):b.moment=f()})(this,function(){function b(){return Vb.apply(null,
arguments)}function f(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function q(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function g(a){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(a).length;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function n(a){return void 0===a}function l(a){return"number"===typeof a||"[object Number]"===Object.prototype.toString.call(a)}function k(a){return a instanceof Date||
"[object Date]"===Object.prototype.toString.call(a)}function d(a,b){var c=[],d;for(d=0;d<a.length;++d)c.push(b(a[d],d));return c}function h(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function c(a,b){for(var c in b)h(b,c)&&(a[c]=b[c]);h(b,"toString")&&(a.toString=b.toString);h(b,"valueOf")&&(a.valueOf=b.valueOf);return a}function a(a,b,c,d){return db(a,b,c,d,!0).utc()}function p(a){null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,
invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1});return a._pf}function u(a){if(null==a._isValid){var b=p(a),c=Wb.call(b.parsedDateParts,function(a){return null!=a}),c=!isNaN(a._d.getTime())&&0>b.overflow&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.weekdayMismatch&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);a._strict&&(c=c&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour);if(null!=
Object.isFrozen&&Object.isFrozen(a))return c;a._isValid=c}return a._isValid}function v(b){var d=a(NaN);null!=b?c(p(d),b):p(d).userInvalidated=!0;return d}function z(a,b){var c,d,e;n(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject);n(b._i)||(a._i=b._i);n(b._f)||(a._f=b._f);n(b._l)||(a._l=b._l);n(b._strict)||(a._strict=b._strict);n(b._tzm)||(a._tzm=b._tzm);n(b._isUTC)||(a._isUTC=b._isUTC);n(b._offset)||(a._offset=b._offset);n(b._pf)||(a._pf=p(b));n(b._locale)||(a._locale=b._locale);if(0<
Hb.length)for(c=0;c<Hb.length;c++)d=Hb[c],e=b[d],n(e)||(a[d]=e);return a}function t(a){z(this,a);this._d=new Date(null!=a._d?a._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Ib&&(Ib=!0,b.updateOffset(this),Ib=!1)}function x(a){return a instanceof t||null!=a&&null!=a._isAMomentObject}function r(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function m(a){a=+a;var b=0;0!==a&&isFinite(a)&&(b=r(a));return b}function e(a,b,c){var d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),
g=0,f;for(f=0;f<d;f++)(c&&a[f]!==b[f]||!c&&m(a[f])!==m(b[f]))&&g++;return g+e}function w(a){!1===b.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function y(a,d){var e=!0;return c(function(){null!=b.deprecationHandler&&b.deprecationHandler(null,a);if(e){for(var c=[],g,f=0;f<arguments.length;f++){g="";if("object"===typeof arguments[f]){g+="\n["+f+"] ";for(var h in arguments[0])g+=h+": "+arguments[0][h]+", ";g=g.slice(0,-2)}else g=arguments[f];
c.push(g)}w(a+"\nArguments: "+Array.prototype.slice.call(c).join("")+"\n"+Error().stack);e=!1}return d.apply(this,arguments)},d)}function A(a,c){null!=b.deprecationHandler&&b.deprecationHandler(a,c);Xb[a]||(w(c),Xb[a]=!0)}function D(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function B(a,b){var d=c({},a),e;for(e in b)h(b,e)&&(q(a[e])&&q(b[e])?(d[e]={},c(d[e],a[e]),c(d[e],b[e])):null!=b[e]?d[e]=b[e]:delete d[e]);for(e in a)h(a,e)&&!h(b,e)&&q(a[e])&&(d[e]=
c({},d[e]));return d}function F(a){null!=a&&this.set(a)}function C(a,b){var c=a.toLowerCase();ob[c]=ob[c+"s"]=ob[b]=a}function G(a){return"string"===typeof a?ob[a]||ob[a.toLowerCase()]:void 0}function W(a){var b={},c,d;for(d in a)h(a,d)&&(c=G(d))&&(b[c]=a[d]);return b}function fa(a){var b=[],c;for(c in a)b.push({unit:c,priority:Ea[c]});b.sort(function(a,b){return a.priority-b.priority});return b}function V(a,b,c){var d=""+Math.abs(a);return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,b-d.length)).toString().substr(1)+
d}function H(a,b,c,d){var e=d;"string"===typeof d&&(e=function(){return this[d]()});a&&(lb[a]=e);b&&(lb[b[0]]=function(){return V(e.apply(this,arguments),b[1],b[2])});c&&(lb[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function ba(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function J(a){var b=a.match(Yb),c,d;c=0;for(d=b.length;c<d;c++)b[c]=lb[b[c]]?lb[b[c]]:ba(b[c]);return function(c){var e="",g;for(g=0;g<d;g++)e+=D(b[g])?b[g].call(c,
a):b[g];return e}}function Z(a,b){if(!a.isValid())return a.localeData().invalidDate();b=O(b,a.localeData());Jb[b]=Jb[b]||J(b);return Jb[b](a)}function O(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(yb.lastIndex=0;0<=d&&yb.test(a);)a=a.replace(yb,c),yb.lastIndex=0,--d;return a}function N(a,b,c){Kb[a]=D(b)?b:function(a,d){return a&&c?c:b}}function K(a,b){return h(Kb,a)?Kb[a](b._strict,b._locale):new RegExp(M(a))}function M(a){return U(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,
function(a,b,c,d,e){return b||c||d||e}))}function U(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function T(a,b){var c,d=b;"string"===typeof a&&(a=[a]);l(b)&&(d=function(a,c){c[b]=m(a)});for(c=0;c<a.length;c++)Lb[a[c]]=d}function da(a,b){T(a,function(a,c,d,e){d._w=d._w||{};b(a,d._w,d,e)})}function Q(a){return 0===a%4&&0!==a%100||0===a%400}function P(a,c){return function(d){return null!=d?(aa(this,a,d),b.updateOffset(this,c),this):Y(this,a)}}function Y(a,b){return a.isValid()?a._d["get"+
(a._isUTC?"UTC":"")+b]():NaN}function aa(a,b,c){if(a.isValid()&&!isNaN(c))if("FullYear"===b&&Q(a.year())&&1===a.month()&&29===a.date())a._d["set"+(a._isUTC?"UTC":"")+b](c,a.month(),ga(c,a.month()));else a._d["set"+(a._isUTC?"UTC":"")+b](c)}function ga(a,b){if(isNaN(a)||isNaN(b))return NaN;var c=(b%12+12)%12;return 1===c?Q(a+(b-c)/12)?29:28:31-c%7%2}function ea(a,b){var c;if(!a.isValid())return a;if("string"===typeof b)if(/^\d+$/.test(b))b=m(b);else if(b=a.localeData().monthsParse(b),!l(b))return a;
c=Math.min(a.date(),ga(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a}function la(a){return null!=a?(ea(this,a),b.updateOffset(this,!0),this):Y(this,"Month")}function ma(){function b(a,b){return b.length-a.length}var c=[],d=[],e=[],g,f;for(g=0;12>g;g++)f=a([2E3,g]),c.push(this.monthsShort(f,"")),d.push(this.months(f,"")),e.push(this.months(f,"")),e.push(this.monthsShort(f,""));c.sort(b);d.sort(b);e.sort(b);for(g=0;12>g;g++)c[g]=U(c[g]),d[g]=U(d[g]);for(g=0;24>g;g++)e[g]=U(e[g]);
this._monthsShortRegex=this._monthsRegex=new RegExp("^("+e.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+d.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+c.join("|")+")","i")}function oa(a,b,c,d,e,g,f){b=new Date(a,b,c,d,e,g,f);100>a&&0<=a&&isFinite(b.getFullYear())&&b.setFullYear(a);return b}function sa(a){var b=new Date(Date.UTC.apply(null,arguments));100>a&&0<=a&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a);return b}function va(a,b,c){c=7+b-c;return-((7+sa(a,
0,c).getUTCDay()-b)%7)+c-1}function ha(a,b,c,d,e){c=(7+c-d)%7;d=va(a,d,e);d=1+7*(b-1)+c+d;0>=d?(b=a-1,a=(Q(b)?366:365)+d):d>(Q(a)?366:365)?(b=a+1,a=d-(Q(a)?366:365)):(b=a,a=d);return{year:b,dayOfYear:a}}function Da(a,b,c){var d=va(a.year(),b,c),d=Math.floor((a.dayOfYear()-d-1)/7)+1;1>d?(a=a.year()-1,b=d+za(a,b,c)):d>za(a.year(),b,c)?(b=d-za(a.year(),b,c),a=a.year()+1):(a=a.year(),b=d);return{week:b,year:a}}function za(a,b,c){var d=va(a,b,c);b=va(a+1,b,c);return((Q(a)?366:365)-d+b)/7}function bb(b,
c,d){var e,g;b=b.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],e=0;7>e;++e)g=a([2E3,1]).day(e),this._minWeekdaysParse[e]=this.weekdaysMin(g,"").toLocaleLowerCase(),this._shortWeekdaysParse[e]=this.weekdaysShort(g,"").toLocaleLowerCase(),this._weekdaysParse[e]=this.weekdays(g,"").toLocaleLowerCase();if(d)c="dddd"===c?ya.call(this._weekdaysParse,b):"ddd"===c?ya.call(this._shortWeekdaysParse,b):ya.call(this._minWeekdaysParse,
b);else if("dddd"===c){c=ya.call(this._weekdaysParse,b);if(-1!==c)return c;c=ya.call(this._shortWeekdaysParse,b);if(-1!==c)return c;c=ya.call(this._minWeekdaysParse,b)}else if("ddd"===c){c=ya.call(this._shortWeekdaysParse,b);if(-1!==c)return c;c=ya.call(this._weekdaysParse,b);if(-1!==c)return c;c=ya.call(this._minWeekdaysParse,b)}else{c=ya.call(this._minWeekdaysParse,b);if(-1!==c)return c;c=ya.call(this._weekdaysParse,b);if(-1!==c)return c;c=ya.call(this._shortWeekdaysParse,b)}return-1!==c?c:null}
function xa(){function b(a,b){return b.length-a.length}var c=[],d=[],e=[],g=[],f,h,m,p;for(f=0;7>f;f++)h=a([2E3,1]).day(f),m=this.weekdaysMin(h,""),p=this.weekdaysShort(h,""),h=this.weekdays(h,""),c.push(m),d.push(p),e.push(h),g.push(m),g.push(p),g.push(h);c.sort(b);d.sort(b);e.sort(b);g.sort(b);for(f=0;7>f;f++)d[f]=U(d[f]),e[f]=U(e[f]),g[f]=U(g[f]);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+g.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+e.join("|")+
")","i");this._weekdaysShortStrictRegex=new RegExp("^("+d.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+c.join("|")+")","i")}function Aa(){return this.hours()%12||12}function Ia(a,b){H(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function hb(a,b){return b._meridiemParse}function Ua(a){return a?a.toLowerCase().replace("_","-"):a}function Ka(a){var b=null;if(!Ba[a]&&"undefined"!==typeof module&&module&&module.exports)try{b=pb._abbr,require("./locale/"+
a),La(b)}catch(Wc){}return Ba[a]}function La(a,b){a&&((b=n(b)?Fa(a):Ha(a,b))?pb=b:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+a+" not found. Did you forget to load it?"));return pb._abbr}function Ha(a,b){if(null!==b){var c;c=Zb;b.abbr=a;if(null!=Ba[a])A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),
c=Ba[a]._config;else if(null!=b.parentLocale)if(null!=Ba[b.parentLocale])c=Ba[b.parentLocale]._config;else if(c=Ka(b.parentLocale),null!=c)c=c._config;else return qb[b.parentLocale]||(qb[b.parentLocale]=[]),qb[b.parentLocale].push({name:a,config:b}),null;Ba[a]=new F(B(c,b));qb[a]&&qb[a].forEach(function(a){Ha(a.name,a.config)});La(a);return Ba[a]}delete Ba[a];return null}function Fa(a){var b;a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr);if(!a)return pb;if(!f(a)){if(b=Ka(a))return b;a=[a]}a:{b=
0;for(var c,d,g,h;b<a.length;){h=Ua(a[b]).split("-");c=h.length;for(d=(d=Ua(a[b+1]))?d.split("-"):null;0<c;){if(g=Ka(h.slice(0,c).join("-"))){a=g;break a}if(d&&d.length>=c&&e(h,d,!0)>=c-1)break;c--}b++}a=pb}return a}function Xa(a){var b;(b=a._a)&&-2===p(a).overflow&&(b=0>b[Za]||11<b[Za]?Za:1>b[Va]||b[Va]>ga(b[Sa],b[Za])?Va:0>b[Ca]||24<b[Ca]||24===b[Ca]&&(0!==b[Ta]||0!==b[$a]||0!==b[ib])?Ca:0>b[Ta]||59<b[Ta]?Ta:0>b[$a]||59<b[$a]?$a:0>b[ib]||999<b[ib]?ib:-1,p(a)._overflowDayOfYear&&(b<Sa||b>Va)&&(b=
Va),p(a)._overflowWeeks&&-1===b&&(b=mc),p(a)._overflowWeekday&&-1===b&&(b=nc),p(a).overflow=b);return a}function Ja(a,b,c){return null!=a?a:null!=b?b:c}function Qa(a){var c,d=[],e;if(!a._d){e=new Date(b.now());e=a._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()];if(a._w&&null==a._a[Va]&&null==a._a[Za]){var g,f,h,m,k,r;g=a._w;if(null!=g.GG||null!=g.W||null!=g.E){if(k=1,r=4,f=Ja(g.GG,a._a[Sa],Da(I(),1,4).year),h=Ja(g.W,1),m=Ja(g.E,1),1>m||7<m)c=
!0}else if(k=a._locale._week.dow,r=a._locale._week.doy,h=Da(I(),k,r),f=Ja(g.gg,a._a[Sa],h.year),h=Ja(g.w,h.week),null!=g.d){if(m=g.d,0>m||6<m)c=!0}else if(null!=g.e){if(m=g.e+k,0>g.e||6<g.e)c=!0}else m=k;1>h||h>za(f,k,r)?p(a)._overflowWeeks=!0:null!=c?p(a)._overflowWeekday=!0:(c=ha(f,h,m,k,r),a._a[Sa]=c.year,a._dayOfYear=c.dayOfYear)}if(null!=a._dayOfYear){c=Ja(a._a[Sa],e[Sa]);if(a._dayOfYear>(Q(c)?366:365)||0===a._dayOfYear)p(a)._overflowDayOfYear=!0;c=sa(c,0,a._dayOfYear);a._a[Za]=c.getUTCMonth();
a._a[Va]=c.getUTCDate()}for(c=0;3>c&&null==a._a[c];++c)a._a[c]=d[c]=e[c];for(;7>c;c++)a._a[c]=d[c]=null==a._a[c]?2===c?1:0:a._a[c];24===a._a[Ca]&&0===a._a[Ta]&&0===a._a[$a]&&0===a._a[ib]&&(a._nextDay=!0,a._a[Ca]=0);a._d=(a._useUTC?sa:oa).apply(null,d);d=a._useUTC?a._d.getUTCDay():a._d.getDay();null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm);a._nextDay&&(a._a[Ca]=24);a._w&&"undefined"!==typeof a._w.d&&a._w.d!==d&&(p(a).weekdayMismatch=!0)}}function R(a){var b,c;b=a._i;var d=oc.exec(b)||
pc.exec(b),e,g,f,h;if(d){p(a).iso=!0;b=0;for(c=zb.length;b<c;b++)if(zb[b][1].exec(d[1])){g=zb[b][0];e=!1!==zb[b][2];break}if(null==g)a._isValid=!1;else{if(d[3]){b=0;for(c=Mb.length;b<c;b++)if(Mb[b][1].exec(d[3])){f=(d[2]||" ")+Mb[b][0];break}if(null==f){a._isValid=!1;return}}if(e||null==f){if(d[4])if(qc.exec(d[4]))h="Z";else{a._isValid=!1;return}a._f=g+(f||"")+(h||"");ja(a)}else a._isValid=!1}}else a._isValid=!1}function Ga(a){var b=rc.exec(a._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g,
" ").trim());if(b){var c=b[3],d=b[2],e=b[5],g=b[6],f=b[7],h=parseInt(b[4],10),c=[49>=h?2E3+h:999>=h?1900+h:h,$b.indexOf(c),parseInt(d,10),parseInt(e,10),parseInt(g,10)];f&&c.push(parseInt(f,10));a:{if(f=b[1])if(f=ac.indexOf(f),d=(new Date(c[0],c[1],c[2])).getDay(),f!==d){p(a).weekdayMismatch=!0;f=a._isValid=!1;break a}f=!0}f&&(a._a=c,(f=b[8])?b=sc[f]:b[9]?b=0:(b=parseInt(b[10],10),f=b%100,b=(b-f)/100*60+f),a._tzm=b,a._d=sa.apply(null,a._a),a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),p(a).rfc2822=
!0)}else a._isValid=!1}function wa(a){var c=tc.exec(a._i);null!==c?a._d=new Date(+c[1]):(R(a),!1===a._isValid&&(delete a._isValid,Ga(a),!1===a._isValid&&(delete a._isValid,b.createFromInputFallback(a))))}function ja(a){if(a._f===b.ISO_8601)R(a);else if(a._f===b.RFC_2822)Ga(a);else{a._a=[];p(a).empty=!0;var c=""+a._i,d,e,g,f,m,k=c.length,r=0;g=O(a._f,a._locale).match(Yb)||[];for(d=0;d<g.length;d++){f=g[d];if(e=(c.match(K(f,a))||[])[0])m=c.substr(0,c.indexOf(e)),0<m.length&&p(a).unusedInput.push(m),
c=c.slice(c.indexOf(e)+e.length),r+=e.length;if(lb[f]){if(e?p(a).empty=!1:p(a).unusedTokens.push(f),m=a,null!=e&&h(Lb,f))Lb[f](e,m._a,m,f)}else a._strict&&!e&&p(a).unusedTokens.push(f)}p(a).charsLeftOver=k-r;0<c.length&&p(a).unusedInput.push(c);12>=a._a[Ca]&&!0===p(a).bigHour&&0<a._a[Ca]&&(p(a).bigHour=void 0);p(a).parsedDateParts=a._a.slice(0);p(a).meridiem=a._meridiem;c=a._a;d=Ca;k=a._locale;g=a._a[Ca];r=a._meridiem;null!=r&&(null!=k.meridiemHour?g=k.meridiemHour(g,r):null!=k.isPM&&((k=k.isPM(r))&&
12>g&&(g+=12),k||12!==g||(g=0)));c[d]=g;Qa(a);Xa(a)}}function Pa(a){if(!a._d){var b=W(a._i);a._a=d([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)});Qa(a)}}function Ma(a){var b=a._i,d=a._f;a._locale=a._locale||Fa(a._l);if(null===b||void 0===d&&""===b)return v({nullInput:!0});"string"===typeof b&&(a._i=b=a._locale.preparse(b));if(x(b))return new t(Xa(b));if(k(b))a._d=b;else if(f(d)){var e,g,h;if(0===a._f.length)p(a).invalidFormat=!0,a._d=new Date(NaN);
else{for(b=0;b<a._f.length;b++)if(d=0,e=z({},a),null!=a._useUTC&&(e._useUTC=a._useUTC),e._f=a._f[b],ja(e),u(e)&&(d+=p(e).charsLeftOver,d+=10*p(e).unusedTokens.length,p(e).score=d,null==h||d<h))h=d,g=e;c(a,g||e)}}else d?ja(a):na(a);u(a)||(a._d=null);return a}function na(a){var c=a._i;n(c)?a._d=new Date(b.now()):k(c)?a._d=new Date(c.valueOf()):"string"===typeof c?wa(a):f(c)?(a._a=d(c.slice(0),function(a){return parseInt(a,10)}),Qa(a)):q(c)?Pa(a):l(c)?a._d=new Date(c):b.createFromInputFallback(a)}function db(a,
b,c,d,e){var h={};if(!0===c||!1===c)d=c,c=void 0;if(q(a)&&g(a)||f(a)&&0===a.length)a=void 0;h._isAMomentObject=!0;h._useUTC=h._isUTC=e;h._l=c;h._i=a;h._f=b;h._strict=d;a=new t(Xa(Ma(h)));a._nextDay&&(a.add(1,"d"),a._nextDay=void 0);return a}function I(a,b,c,d){return db(a,b,c,d,!1)}function pa(a,b){var c,d;1===b.length&&f(b[0])&&(b=b[0]);if(!b.length)return I();c=b[0];for(d=1;d<b.length;++d)if(!b[d].isValid()||b[d][a](c))c=b[d];return c}function E(a){for(var b in a)if(-1===ya.call(rb,b)||null!=a[b]&&
isNaN(a[b]))return!1;b=!1;for(var c=0;c<rb.length;++c)if(a[rb[c]]){if(b)return!1;parseFloat(a[rb[c]])!==m(a[rb[c]])&&(b=!0)}return!0}function ia(a){a=W(a);var b=a.year||0,c=a.quarter||0,d=a.month||0,e=a.week||0,g=a.day||0,f=a.hour||0,h=a.minute||0,m=a.second||0,p=a.millisecond||0;this._isValid=E(a);this._milliseconds=+p+1E3*m+6E4*h+36E5*f;this._days=+g+7*e;this._months=+d+3*c+12*b;this._data={};this._locale=Fa();this._bubble()}function ka(a){return a instanceof ia}function qa(a){return 0>a?-1*Math.round(-1*
a):Math.round(a)}function X(a,b){H(a,0,0,function(){var a=this.utcOffset(),c="+";0>a&&(a=-a,c="-");return c+V(~~(a/60),2)+b+V(~~a%60,2)})}function ca(a,b){a=(b||"").match(a);if(null===a)return null;a=((a[a.length-1]||[])+"").match(uc)||["-",0,0];b=+(60*a[1])+m(a[2]);return 0===b?0:"+"===a[0]?b:-b}function L(a,c){return c._isUTC?(c=c.clone(),a=(x(a)||k(a)?a.valueOf():I(a).valueOf())-c.valueOf(),c._d.setTime(c._d.valueOf()+a),b.updateOffset(c,!1),c):I(a).local()}function nb(){return this.isValid()?
this._isUTC&&0===this._offset:!1}function Na(a,b){var c=a,d=null;ka(a)?c={ms:a._milliseconds,d:a._days,M:a._months}:l(a)?(c={},b?c[b]=a:c.milliseconds=a):(d=vc.exec(a))?(c="-"===d[1]?-1:1,c={y:0,d:m(d[Va])*c,h:m(d[Ca])*c,m:m(d[Ta])*c,s:m(d[$a])*c,ms:m(qa(1E3*d[ib]))*c}):(d=wc.exec(a))?(c="-"===d[1]?-1:1,c={y:Ya(d[2],c),M:Ya(d[3],c),w:Ya(d[4],c),d:Ya(d[5],c),h:Ya(d[6],c),m:Ya(d[7],c),s:Ya(d[8],c)}):null==c?c={}:"object"===typeof c&&("from"in c||"to"in c)&&(d=I(c.from),c=I(c.to),d.isValid()&&c.isValid()?
(c=L(c,d),d.isBefore(c)?c=wb(d,c):(c=wb(c,d),c.milliseconds=-c.milliseconds,c.months=-c.months),d=c):d={milliseconds:0,months:0},c={},c.ms=d.milliseconds,c.M=d.months);c=new ia(c);ka(a)&&h(a,"_locale")&&(c._locale=a._locale);return c}function Ya(a,b){a=a&&parseFloat(a.replace(",","."));return(isNaN(a)?0:a)*b}function wb(a,b){var c={milliseconds:0,months:0};c.months=b.month()-a.month()+12*(b.year()-a.year());a.clone().add(c.months,"M").isAfter(b)&&--c.months;c.milliseconds=+b-+a.clone().add(c.months,
"M");return c}function Ra(a,b){return function(c,d){var e;null===d||isNaN(+d)||(A(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),e=c,c=d,d=e);c=Na("string"===typeof c?+c:c,d);xb(this,c,a);return this}}function xb(a,c,d,e){var g=c._milliseconds,f=qa(c._days);c=qa(c._months);a.isValid()&&(e=null==e?!0:e,c&&ea(a,Y(a,"Month")+c*d),f&&aa(a,"Date",Y(a,"Date")+f*d),g&&a._d.setTime(a._d.valueOf()+
g*d),e&&b.updateOffset(a,f||c))}function tb(a,b){var c=12*(b.year()-a.year())+(b.month()-a.month()),d=a.clone().add(c,"months");0>b-d?(a=a.clone().add(c-1,"months"),b=(b-d)/(d-a)):(a=a.clone().add(c+1,"months"),b=(b-d)/(a-d));return-(c+b)||0}function ub(a){if(void 0===a)return this._locale._abbr;a=Fa(a);null!=a&&(this._locale=a);return this}function mb(){return this._locale}function jb(a,b){H(0,[a,a.length],0,b)}function Qb(a,b,c,d,e){var g;if(null==a)return Da(this,d,e).year;g=za(a,d,e);b>g&&(b=
g);a=ha(a,b,c,d,e);a=sa(a.year,0,a.dayOfYear);this.year(a.getUTCFullYear());this.month(a.getUTCMonth());this.date(a.getUTCDate());return this}function kc(a,b){b[ib]=m(1E3*("0."+a))}function Rb(a){return a}function vb(b,c,d,e){var g=Fa();c=a().set(e,c);return g[d](c,b)}function Sb(a,b,c){l(a)&&(b=a,a=void 0);a=a||"";if(null!=b)return vb(a,b,c,"month");var d=[];for(b=0;12>b;b++)d[b]=vb(a,b,c,"month");return d}function Gb(a,b,c,d){"boolean"!==typeof a&&(c=b=a,a=!1);l(b)&&(c=b,b=void 0);b=b||"";var e=
Fa();a=a?e._week.dow:0;if(null!=c)return vb(b,(c+a)%7,d,"day");e=[];for(c=0;7>c;c++)e[c]=vb(b,(c+a)%7,d,"day");return e}function Tb(a,b,c,d){b=Na(b,c);a._milliseconds+=d*b._milliseconds;a._days+=d*b._days;a._months+=d*b._months;return a._bubble()}function Ub(a){return 0>a?Math.floor(a):Math.ceil(a)}function cb(a){return function(){return this.as(a)}}function gb(a){return function(){return this.isValid()?this._data[a]:NaN}}function lc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function kb(a){return(0<
a)-(0>a)||+a}function Ab(){if(!this.isValid())return this.localeData().invalidDate();var a=Nb(this._milliseconds)/1E3,b=Nb(this._days),c=Nb(this._months),d,e;d=r(a/60);e=r(d/60);a%=60;d%=60;var g=r(c/12),c=c%12,a=a?a.toFixed(3).replace(/\.?0+$/,""):"",f=this.asSeconds();if(!f)return"P0D";var h=0>f?"-":"",m=kb(this._months)!==kb(f)?"-":"",p=kb(this._days)!==kb(f)?"-":"",f=kb(this._milliseconds)!==kb(f)?"-":"";return h+"P"+(g?m+g+"Y":"")+(c?m+c+"M":"")+(b?p+b+"D":"")+(e||d||a?"T":"")+(e?f+e+"H":"")+
(d?f+d+"M":"")+(a?f+a+"S":"")}var Vb,Wb;Wb=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var Hb=b.momentProperties=[],Ib=!1,Xb={};b.suppressDeprecationWarnings=!1;b.deprecationHandler=null;var bc;bc=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)h(a,b)&&c.push(b);return c};var ob={},Ea={},Yb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
yb=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Jb={},lb={},cc=/\d/,Oa=/\d\d/,dc=/\d{3}/,Ob=/\d{4}/,Bb=/[+-]?\d{6}/,ua=/\d\d?/,ec=/\d\d\d\d?/,fc=/\d\d\d\d\d\d?/,Cb=/\d{1,3}/,Pb=/\d{1,4}/,Db=/[+-]?\d{1,6}/,xc=/\d+/,Eb=/[+-]?\d+/,yc=/Z|[+-]\d\d:?\d\d/gi,Fb=/Z|[+-]\d\d(?::?\d\d)?/gi,sb=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Kb={},Lb={},Sa=0,Za=1,Va=2,Ca=3,Ta=4,$a=5,ib=6,mc=7,nc=8;H("Y",0,
0,function(){var a=this.year();return 9999>=a?""+a:"+"+a});H(0,["YY",2],0,function(){return this.year()%100});H(0,["YYYY",4],0,"year");H(0,["YYYYY",5],0,"year");H(0,["YYYYYY",6,!0],0,"year");C("year","y");Ea.year=1;N("Y",Eb);N("YY",ua,Oa);N("YYYY",Pb,Ob);N("YYYYY",Db,Bb);N("YYYYYY",Db,Bb);T(["YYYYY","YYYYYY"],Sa);T("YYYY",function(a,c){c[Sa]=2===a.length?b.parseTwoDigitYear(a):m(a)});T("YY",function(a,c){c[Sa]=b.parseTwoDigitYear(a)});T("Y",function(a,b){b[Sa]=parseInt(a,10)});b.parseTwoDigitYear=
function(a){return m(a)+(68<m(a)?1900:2E3)};var gc=P("FullYear",!0),ya;ya=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};H("M",["MM",2],"Mo",function(){return this.month()+1});H("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});H("MMMM",0,0,function(a){return this.localeData().months(this,a)});C("month","M");Ea.month=8;N("M",ua);N("MM",ua,Oa);N("MMM",function(a,b){return b.monthsShortRegex(a)});N("MMMM",
function(a,b){return b.monthsRegex(a)});T(["M","MM"],function(a,b){b[Za]=m(a)-1});T(["MMM","MMMM"],function(a,b,c,d){d=c._locale.monthsParse(a,d,c._strict);null!=d?b[Za]=d:p(c).invalidMonth=a});var hc=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,$b="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");H("w",["ww",2],"wo","week");H("W",["WW",2],"Wo","isoWeek");C("week","w");C("isoWeek","W");Ea.week=5;Ea.isoWeek=5;N("w",ua);N("ww",ua,Oa);N("W",ua);N("WW",ua,Oa);da(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,
1)]=m(a)});H("d",0,"do","day");H("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)});H("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});H("dddd",0,0,function(a){return this.localeData().weekdays(this,a)});H("e",0,0,"weekday");H("E",0,0,"isoWeekday");C("day","d");C("weekday","e");C("isoWeekday","E");Ea.day=11;Ea.weekday=11;Ea.isoWeekday=11;N("d",ua);N("e",ua);N("E",ua);N("dd",function(a,b){return b.weekdaysMinRegex(a)});N("ddd",function(a,b){return b.weekdaysShortRegex(a)});
N("dddd",function(a,b){return b.weekdaysRegex(a)});da(["dd","ddd","dddd"],function(a,b,c,d){d=c._locale.weekdaysParse(a,d,c._strict);null!=d?b.d=d:p(c).invalidWeekday=a});da(["d","e","E"],function(a,b,c,d){b[d]=m(a)});var ac="Sun Mon Tue Wed Thu Fri Sat".split(" ");H("H",["HH",2],0,"hour");H("h",["hh",2],0,Aa);H("k",["kk",2],0,function(){return this.hours()||24});H("hmm",0,0,function(){return""+Aa.apply(this)+V(this.minutes(),2)});H("hmmss",0,0,function(){return""+Aa.apply(this)+V(this.minutes(),
2)+V(this.seconds(),2)});H("Hmm",0,0,function(){return""+this.hours()+V(this.minutes(),2)});H("Hmmss",0,0,function(){return""+this.hours()+V(this.minutes(),2)+V(this.seconds(),2)});Ia("a",!0);Ia("A",!1);C("hour","h");Ea.hour=13;N("a",hb);N("A",hb);N("H",ua);N("h",ua);N("k",ua);N("HH",ua,Oa);N("hh",ua,Oa);N("kk",ua,Oa);N("hmm",ec);N("hmmss",fc);N("Hmm",ec);N("Hmmss",fc);T(["H","HH"],Ca);T(["k","kk"],function(a,b,c){a=m(a);b[Ca]=24===a?0:a});T(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a);c._meridiem=
a});T(["h","hh"],function(a,b,c){b[Ca]=m(a);p(c).bigHour=!0});T("hmm",function(a,b,c){var d=a.length-2;b[Ca]=m(a.substr(0,d));b[Ta]=m(a.substr(d));p(c).bigHour=!0});T("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[Ca]=m(a.substr(0,d));b[Ta]=m(a.substr(d,2));b[$a]=m(a.substr(e));p(c).bigHour=!0});T("Hmm",function(a,b,c){c=a.length-2;b[Ca]=m(a.substr(0,c));b[Ta]=m(a.substr(c))});T("Hmmss",function(a,b,c){c=a.length-4;var d=a.length-2;b[Ca]=m(a.substr(0,c));b[Ta]=m(a.substr(c,2));b[$a]=m(a.substr(d))});
var zc=P("Hours",!0),Zb={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",
hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:$b,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:ac,meridiemParse:/[ap]\.?m?\.?/i},Ba={},qb={},pb,oc=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
pc=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,qc=/Z|[+-]\d\d(?::?\d\d)?/,zb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Mb=
[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],tc=/^\/?Date\((\-?\d+)/i,rc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,sc={UT:0,GMT:0,EDT:-240,
EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};b.createFromInputFallback=y("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});b.ISO_8601=function(){};
b.RFC_2822=function(){};var Ac=y("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=I.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:v()}),Bc=y("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=I.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:v()}),rb="year quarter month week day hour minute second millisecond".split(" ");
X("Z",":");X("ZZ","");N("Z",Fb);N("ZZ",Fb);T(["Z","ZZ"],function(a,b,c){c._useUTC=!0;c._tzm=ca(Fb,a)});var uc=/([\+\-]|\d\d)/gi;b.updateOffset=function(){};var vc=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,wc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Na.fn=ia.prototype;Na.invalid=function(){return Na(NaN)};var Cc=Ra(1,"add"),Dc=Ra(-1,"subtract");b.defaultFormat=
"YYYY-MM-DDTHH:mm:ssZ";b.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ic=y("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});H(0,["gg",2],0,function(){return this.weekYear()%100});H(0,["GG",2],0,function(){return this.isoWeekYear()%100});jb("gggg","weekYear");jb("ggggg","weekYear");jb("GGGG","isoWeekYear");jb("GGGGG","isoWeekYear");C("weekYear",
"gg");C("isoWeekYear","GG");Ea.weekYear=1;Ea.isoWeekYear=1;N("G",Eb);N("g",Eb);N("GG",ua,Oa);N("gg",ua,Oa);N("GGGG",Pb,Ob);N("gggg",Pb,Ob);N("GGGGG",Db,Bb);N("ggggg",Db,Bb);da(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=m(a)});da(["gg","GG"],function(a,c,d,e){c[e]=b.parseTwoDigitYear(a)});H("Q",0,"Qo","quarter");C("quarter","Q");Ea.quarter=7;N("Q",cc);T("Q",function(a,b){b[Za]=3*(m(a)-1)});H("D",["DD",2],"Do","date");C("date","D");Ea.date=9;N("D",ua);N("DD",ua,Oa);N("Do",function(a,
b){return a?b._dayOfMonthOrdinalParse||b._ordinalParse:b._dayOfMonthOrdinalParseLenient});T(["D","DD"],Va);T("Do",function(a,b){b[Va]=m(a.match(ua)[0])});var jc=P("Date",!0);H("DDD",["DDDD",3],"DDDo","dayOfYear");C("dayOfYear","DDD");Ea.dayOfYear=4;N("DDD",Cb);N("DDDD",dc);T(["DDD","DDDD"],function(a,b,c){c._dayOfYear=m(a)});H("m",["mm",2],0,"minute");C("minute","m");Ea.minute=14;N("m",ua);N("mm",ua,Oa);T(["m","mm"],Ta);var Ec=P("Minutes",!1);H("s",["ss",2],0,"second");C("second","s");Ea.second=15;
N("s",ua);N("ss",ua,Oa);T(["s","ss"],$a);var Fc=P("Seconds",!1);H("S",0,0,function(){return~~(this.millisecond()/100)});H(0,["SS",2],0,function(){return~~(this.millisecond()/10)});H(0,["SSS",3],0,"millisecond");H(0,["SSSS",4],0,function(){return 10*this.millisecond()});H(0,["SSSSS",5],0,function(){return 100*this.millisecond()});H(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});H(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});H(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});
H(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});C("millisecond","ms");Ea.millisecond=16;N("S",Cb,cc);N("SS",Cb,Oa);N("SSS",Cb,dc);var eb;for(eb="SSSS";9>=eb.length;eb+="S")N(eb,xc);for(eb="S";9>=eb.length;eb+="S")T(eb,kc);var Gc=P("Milliseconds",!1);H("z",0,0,"zoneAbbr");H("zz",0,0,"zoneName");var S=t.prototype;S.add=Cc;S.calendar=function(a,c){a=a||I();var d=L(a,this).startOf("day"),d=b.calendarFormat(this,d)||"sameElse";c=c&&(D(c[d])?c[d].call(this,a):c[d]);return this.format(c||
this.localeData().calendar(d,this,I(a)))};S.clone=function(){return new t(this)};S.diff=function(a,b,c){var d;if(!this.isValid())return NaN;a=L(a,this);if(!a.isValid())return NaN;d=6E4*(a.utcOffset()-this.utcOffset());b=G(b);switch(b){case "year":b=tb(this,a)/12;break;case "month":b=tb(this,a);break;case "quarter":b=tb(this,a)/3;break;case "second":b=(this-a)/1E3;break;case "minute":b=(this-a)/6E4;break;case "hour":b=(this-a)/36E5;break;case "day":b=(this-a-d)/864E5;break;case "week":b=(this-a-d)/
6048E5;break;default:b=this-a}return c?b:r(b)};S.endOf=function(a){a=G(a);if(void 0===a||"millisecond"===a)return this;"date"===a&&(a="day");return this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")};S.format=function(a){a||(a=this.isUtc()?b.defaultFormatUtc:b.defaultFormat);a=Z(this,a);return this.localeData().postformat(a)};S.from=function(a,b){return this.isValid()&&(x(a)&&a.isValid()||I(a).isValid())?Na({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};
S.fromNow=function(a){return this.from(I(),a)};S.to=function(a,b){return this.isValid()&&(x(a)&&a.isValid()||I(a).isValid())?Na({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};S.toNow=function(a){return this.to(I(),a)};S.get=function(a){a=G(a);return D(this[a])?this[a]():this};S.invalidAt=function(){return p(this).overflow};S.isAfter=function(a,b){a=x(a)?a:I(a);if(!this.isValid()||!a.isValid())return!1;b=G(n(b)?"millisecond":b);return"millisecond"===b?this.valueOf()>
a.valueOf():a.valueOf()<this.clone().startOf(b).valueOf()};S.isBefore=function(a,b){a=x(a)?a:I(a);if(!this.isValid()||!a.isValid())return!1;b=G(n(b)?"millisecond":b);return"millisecond"===b?this.valueOf()<a.valueOf():this.clone().endOf(b).valueOf()<a.valueOf()};S.isBetween=function(a,b,c,d){d=d||"()";return("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))};S.isSame=function(a,b){a=x(a)?a:I(a);if(!this.isValid()||!a.isValid())return!1;b=G(b||"millisecond");
if("millisecond"===b)return this.valueOf()===a.valueOf();a=a.valueOf();return this.clone().startOf(b).valueOf()<=a&&a<=this.clone().endOf(b).valueOf()};S.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)};S.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)};S.isValid=function(){return u(this)};S.lang=ic;S.locale=ub;S.localeData=mb;S.max=Bc;S.min=Ac;S.parsingFlags=function(){return c({},p(this))};S.set=function(a,b){if("object"===typeof a){a=W(a);b=fa(a);
for(var c=0;c<b.length;c++)this[b[c].unit](a[b[c].unit])}else if(a=G(a),D(this[a]))return this[a](b);return this};S.startOf=function(a){a=G(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":case "date":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===a&&this.weekday(0);"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this};
S.subtract=Dc;S.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};S.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};S.toDate=function(){return new Date(this.valueOf())};S.toISOString=function(a){if(!this.isValid())return null;var b=(a=!0!==a)?this.clone().utc():this;return 0>b.year()||9999<b.year()?
Z(b,a?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):D(Date.prototype.toISOString)?a?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",Z(b,"Z")):Z(b,a?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};S.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="";this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z");var a="["+a+'("]',c=0<=this.year()&&9999>=
this.year()?"YYYY":"YYYYYY";return this.format(a+c+"-MM-DD[T]HH:mm:ss.SSS"+(b+'[")]'))};S.toJSON=function(){return this.isValid()?this.toISOString():null};S.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};S.unix=function(){return Math.floor(this.valueOf()/1E3)};S.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};S.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};
S.year=gc;S.isLeapYear=function(){return Q(this.year())};S.weekYear=function(a){return Qb.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};S.isoWeekYear=function(a){return Qb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)};S.quarter=S.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)};S.month=la;S.daysInMonth=function(){return ga(this.year(),this.month())};S.week=S.weeks=function(a){var b=this.localeData().week(this);
return null==a?b:this.add(7*(a-b),"d")};S.isoWeek=S.isoWeeks=function(a){var b=Da(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")};S.weeksInYear=function(){var a=this.localeData()._week;return za(this.year(),a.dow,a.doy)};S.isoWeeksInYear=function(){return za(this.year(),1,4)};S.date=jc;S.day=S.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=a){var c=this.localeData();"string"===typeof a&&(isNaN(a)?(a=c.weekdaysParse(a),
a="number"===typeof a?a:null):a=parseInt(a,10));return this.add(a-b,"d")}return b};S.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")};S.isoWeekday=function(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=this.localeData();a="string"===typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a;return this.day(this.day()%7?a:a-7)}return this.day()||7};S.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-
this.clone().startOf("year"))/864E5)+1;return null==a?b:this.add(a-b,"d")};S.hour=S.hours=zc;S.minute=S.minutes=Ec;S.second=S.seconds=Fc;S.millisecond=S.milliseconds=Gc;S.utcOffset=function(a,c,d){var e=this._offset||0,g;if(!this.isValid())return null!=a?this:NaN;if(null!=a){if("string"===typeof a){if(a=ca(Fb,a),null===a)return this}else 16>Math.abs(a)&&!d&&(a*=60);!this._isUTC&&c&&(g=15*-Math.round(this._d.getTimezoneOffset()/15));this._offset=a;this._isUTC=!0;null!=g&&this.add(g,"m");e!==a&&(!c||
this._changeInProgress?xb(this,Na(a-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,b.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?e:15*-Math.round(this._d.getTimezoneOffset()/15)};S.utc=function(a){return this.utcOffset(0,a)};S.local=function(a){this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};S.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,
!0);else if("string"===typeof this._i){var a=ca(yc,this._i);null!=a?this.utcOffset(a):this.utcOffset(0,!0)}return this};S.hasAlignedHourOffset=function(a){if(!this.isValid())return!1;a=a?I(a).utcOffset():0;return 0===(this.utcOffset()-a)%60};S.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};S.isLocal=function(){return this.isValid()?!this._isUTC:!1};S.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};S.isUtc=
nb;S.isUTC=nb;S.zoneAbbr=function(){return this._isUTC?"UTC":""};S.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};S.dates=y("dates accessor is deprecated. Use date instead.",jc);S.months=y("months accessor is deprecated. Use month instead",la);S.years=y("years accessor is deprecated. Use year instead",gc);S.zone=y("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(a,b){return null!=a?("string"!==typeof a&&(a=
-a),this.utcOffset(a,b),this):-this.utcOffset()});S.isDSTShifted=y("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!n(this._isDSTShifted))return this._isDSTShifted;var b={};z(b,this);b=Ma(b);if(b._a){var c=b._isUTC?a(b._a):I(b._a);this._isDSTShifted=this.isValid()&&0<e(b._a,c.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var ta=F.prototype;ta.calendar=function(a,b,c){a=this._calendar[a]||this._calendar.sameElse;
return D(a)?a.call(b,c):a};ta.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});return this._longDateFormat[a]};ta.invalidDate=function(){return this._invalidDate};ta.ordinal=function(a){return this._ordinal.replace("%d",a)};ta.preparse=Rb;ta.postformat=Rb;ta.relativeTime=function(a,b,c,d){var e=this._relativeTime[c];return D(e)?e(a,b,c,d):e.replace(/%d/i,
a)};ta.pastFuture=function(a,b){a=this._relativeTime[0<a?"future":"past"];return D(a)?a(b):a.replace(/%s/i,b)};ta.set=function(a){var b,c;for(c in a)b=a[c],D(b)?this[c]=b:this["_"+c]=b;this._config=a;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};ta.months=function(a,b){return a?f(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||hc).test(b)?"format":"standalone"][a.month()]:f(this._months)?
this._months:this._months.standalone};ta.monthsShort=function(a,b){return a?f(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[hc.test(b)?"format":"standalone"][a.month()]:f(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};ta.monthsParse=function(b,c,d){var e,g;if(this._monthsParseExact){a:{b=b.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],e=0;12>e;++e)g=a([2E3,e]),this._shortMonthsParse[e]=
this.monthsShort(g,"").toLocaleLowerCase(),this._longMonthsParse[e]=this.months(g,"").toLocaleLowerCase();if(d)c="MMM"===c?ya.call(this._shortMonthsParse,b):ya.call(this._longMonthsParse,b);else if("MMM"===c){c=ya.call(this._shortMonthsParse,b);if(-1!==c)break a;c=ya.call(this._longMonthsParse,b)}else{c=ya.call(this._longMonthsParse,b);if(-1!==c)break a;c=ya.call(this._shortMonthsParse,b)}c=-1!==c?c:null}return c}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=
[]);for(e=0;12>e;e++)if(g=a([2E3,e]),d&&!this._longMonthsParse[e]&&(this._longMonthsParse[e]=new RegExp("^"+this.months(g,"").replace(".","")+"$","i"),this._shortMonthsParse[e]=new RegExp("^"+this.monthsShort(g,"").replace(".","")+"$","i")),d||this._monthsParse[e]||(g="^"+this.months(g,"")+"|^"+this.monthsShort(g,""),this._monthsParse[e]=new RegExp(g.replace(".",""),"i")),d&&"MMMM"===c&&this._longMonthsParse[e].test(b)||d&&"MMM"===c&&this._shortMonthsParse[e].test(b)||!d&&this._monthsParse[e].test(b))return e};
ta.monthsRegex=function(a){if(this._monthsParseExact)return h(this,"_monthsRegex")||ma.call(this),a?this._monthsStrictRegex:this._monthsRegex;h(this,"_monthsRegex")||(this._monthsRegex=sb);return this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex};ta.monthsShortRegex=function(a){if(this._monthsParseExact)return h(this,"_monthsRegex")||ma.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex;h(this,"_monthsShortRegex")||(this._monthsShortRegex=sb);return this._monthsShortStrictRegex&&
a?this._monthsShortStrictRegex:this._monthsShortRegex};ta.week=function(a){return Da(a,this._week.dow,this._week.doy).week};ta.firstDayOfYear=function(){return this._week.doy};ta.firstDayOfWeek=function(){return this._week.dow};ta.weekdays=function(a,b){return a?f(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]:f(this._weekdays)?this._weekdays:this._weekdays.standalone};ta.weekdaysMin=function(a){return a?this._weekdaysMin[a.day()]:
this._weekdaysMin};ta.weekdaysShort=function(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort};ta.weekdaysParse=function(b,c,d){var e,g;if(this._weekdaysParseExact)return bb.call(this,b,c,d);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(e=0;7>e;e++)if(g=a([2E3,1]).day(e),d&&!this._fullWeekdaysParse[e]&&(this._fullWeekdaysParse[e]=new RegExp("^"+this.weekdays(g,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[e]=
new RegExp("^"+this.weekdaysShort(g,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[e]=new RegExp("^"+this.weekdaysMin(g,"").replace(".",".?")+"$","i")),this._weekdaysParse[e]||(g="^"+this.weekdays(g,"")+"|^"+this.weekdaysShort(g,"")+"|^"+this.weekdaysMin(g,""),this._weekdaysParse[e]=new RegExp(g.replace(".",""),"i")),d&&"dddd"===c&&this._fullWeekdaysParse[e].test(b)||d&&"ddd"===c&&this._shortWeekdaysParse[e].test(b)||d&&"dd"===c&&this._minWeekdaysParse[e].test(b)||!d&&this._weekdaysParse[e].test(b))return e};
ta.weekdaysRegex=function(a){if(this._weekdaysParseExact)return h(this,"_weekdaysRegex")||xa.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex;h(this,"_weekdaysRegex")||(this._weekdaysRegex=sb);return this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex};ta.weekdaysShortRegex=function(a){if(this._weekdaysParseExact)return h(this,"_weekdaysRegex")||xa.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;h(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=
sb);return this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};ta.weekdaysMinRegex=function(a){if(this._weekdaysParseExact)return h(this,"_weekdaysRegex")||xa.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;h(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=sb);return this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};ta.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)};ta.meridiem=function(a,b,
c){return 11<a?c?"pm":"PM":c?"am":"AM"};La("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,b=1===m(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});b.lang=y("moment.lang is deprecated. Use moment.locale instead.",La);b.langData=y("moment.langData is deprecated. Use moment.localeData instead.",Fa);var ab=Math.abs,Hc=cb("ms"),Ic=cb("s"),Jc=cb("m"),Kc=cb("h"),Lc=cb("d"),Mc=cb("w"),Nc=cb("M"),Oc=cb("y"),Pc=gb("milliseconds"),Qc=gb("seconds"),Rc=gb("minutes"),
Sc=gb("hours"),Tc=gb("days"),Uc=gb("months"),Vc=gb("years"),fb=Math.round,Wa={ss:44,s:45,m:45,h:22,d:26,M:11},Nb=Math.abs,ra=ia.prototype;ra.isValid=function(){return this._isValid};ra.abs=function(){var a=this._data;this._milliseconds=ab(this._milliseconds);this._days=ab(this._days);this._months=ab(this._months);a.milliseconds=ab(a.milliseconds);a.seconds=ab(a.seconds);a.minutes=ab(a.minutes);a.hours=ab(a.hours);a.months=ab(a.months);a.years=ab(a.years);return this};ra.add=function(a,b){return Tb(this,
a,b,1)};ra.subtract=function(a,b){return Tb(this,a,b,-1)};ra.as=function(a){if(!this.isValid())return NaN;var b,c=this._milliseconds;a=G(a);if("month"===a||"year"===a)return b=this._days+c/864E5,b=this._months+4800*b/146097,"month"===a?b:b/12;b=this._days+Math.round(146097*this._months/4800);switch(a){case "week":return b/7+c/6048E5;case "day":return b+c/864E5;case "hour":return 24*b+c/36E5;case "minute":return 1440*b+c/6E4;case "second":return 86400*b+c/1E3;case "millisecond":return Math.floor(864E5*
b)+c;default:throw Error("Unknown unit "+a);}};ra.asMilliseconds=Hc;ra.asSeconds=Ic;ra.asMinutes=Jc;ra.asHours=Kc;ra.asDays=Lc;ra.asWeeks=Mc;ra.asMonths=Nc;ra.asYears=Oc;ra.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*m(this._months/12):NaN};ra._bubble=function(){var a=this._milliseconds,b=this._days,c=this._months,d=this._data;0<=a&&0<=b&&0<=c||0>=a&&0>=b&&0>=c||(a+=864E5*Ub(146097*c/4800+b),c=b=0);d.milliseconds=a%1E3;a=r(a/1E3);d.seconds=
a%60;a=r(a/60);d.minutes=a%60;a=r(a/60);d.hours=a%24;b+=r(a/24);a=r(4800*b/146097);c+=a;b-=Ub(146097*a/4800);a=r(c/12);d.days=b;d.months=c%12;d.years=a;return this};ra.clone=function(){return Na(this)};ra.get=function(a){a=G(a);return this.isValid()?this[a+"s"]():NaN};ra.milliseconds=Pc;ra.seconds=Qc;ra.minutes=Rc;ra.hours=Sc;ra.days=Tc;ra.weeks=function(){return r(this.days()/7)};ra.months=Uc;ra.years=Vc;ra.humanize=function(a){if(!this.isValid())return this.localeData().invalidDate();var b=this.localeData(),
c;c=!a;var d=Na(this).abs(),e=fb(d.as("s")),g=fb(d.as("m")),f=fb(d.as("h")),h=fb(d.as("d")),m=fb(d.as("M")),d=fb(d.as("y")),e=e<=Wa.ss&&["s",e]||e<Wa.s&&["ss",e]||1>=g&&["m"]||g<Wa.m&&["mm",g]||1>=f&&["h"]||f<Wa.h&&["hh",f]||1>=h&&["d"]||h<Wa.d&&["dd",h]||1>=m&&["M"]||m<Wa.M&&["MM",m]||1>=d&&["y"]||["yy",d];e[2]=c;e[3]=0<+this;e[4]=b;c=lc.apply(null,e);a&&(c=b.pastFuture(+this,c));return b.postformat(c)};ra.toISOString=Ab;ra.toString=Ab;ra.toJSON=Ab;ra.locale=ub;ra.localeData=mb;ra.toIsoString=y("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",
Ab);ra.lang=ic;H("X",0,0,"unix");H("x",0,0,"valueOf");N("x",Eb);N("X",/[+-]?\d+(\.\d{1,3})?/);T("X",function(a,b,c){c._d=new Date(1E3*parseFloat(a,10))});T("x",function(a,b,c){c._d=new Date(m(a))});b.version="2.22.1";Vb=I;b.fn=S;b.min=function(){var a=[].slice.call(arguments,0);return pa("isBefore",a)};b.max=function(){var a=[].slice.call(arguments,0);return pa("isAfter",a)};b.now=function(){return Date.now?Date.now():+new Date};b.utc=a;b.unix=function(a){return I(1E3*a)};b.months=function(a,b){return Sb(a,
b,"months")};b.isDate=k;b.locale=La;b.invalid=v;b.duration=Na;b.isMoment=x;b.weekdays=function(a,b,c){return Gb(a,b,c,"weekdays")};b.parseZone=function(){return I.apply(null,arguments).parseZone()};b.localeData=Fa;b.isDuration=ka;b.monthsShort=function(a,b){return Sb(a,b,"monthsShort")};b.weekdaysMin=function(a,b,c){return Gb(a,b,c,"weekdaysMin")};b.defineLocale=Ha;b.updateLocale=function(a,b){if(null!=b){var c,d=Zb;c=Ka(a);null!=c&&(d=c._config);b=B(d,b);b=new F(b);b.parentLocale=Ba[a];Ba[a]=b;La(a)}else null!=
Ba[a]&&(null!=Ba[a].parentLocale?Ba[a]=Ba[a].parentLocale:null!=Ba[a]&&delete Ba[a]);return Ba[a]};b.locales=function(){return bc(Ba)};b.weekdaysShort=function(a,b,c){return Gb(a,b,c,"weekdaysShort")};b.normalizeUnits=G;b.relativeTimeRounding=function(a){return void 0===a?fb:"function"===typeof a?(fb=a,!0):!1};b.relativeTimeThreshold=function(a,b){if(void 0===Wa[a])return!1;if(void 0===b)return Wa[a];Wa[a]=b;"s"===a&&(Wa.ss=b-1);return!0};b.calendarFormat=function(a,b){a=a.diff(b,"days",!0);return-6>
a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse"};b.prototype=S;b.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"};return b})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(b,f){return function(){return function(b,g){this.context=
this.definition=null;this.definition=b;this.context=g}}()})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","./ImmutablePointArray"],function(b,f,q,g,n){return function(b){function g(d,g,c,a,f){d=b.call(this,d)||this;d._lazyPath=[];d._hasZ=!1;d._hasM=!1;d._hasZ=c;d._hasM=a;d._spRef=g;d._cacheId=f;return d}q(g,b);g.prototype.get=function(b){if(void 0===this._lazyPath[b]){var d=this._elements[b];if(void 0===d)return;this._lazyPath[b]=
new n(d,this._spRef,this._hasZ,this._hasM,this._cacheId,b)}return this._lazyPath[b]};g.prototype.equalityTest=function(b){return b===this?!0:null===b||!1===b instanceof g?!1:b.getUniqueHash()===this.getUniqueHash()};g.prototype.getUniqueHash=function(){return this._cacheId.toString()};return g}(g)})},"esri/arcade/ImmutablePointArray":function(){define("require exports ../core/tsSupport/extendsHelper ../kernel ./ImmutableArray ../geometry/Point".split(" "),function(b,f,q,g,n,l){var k=0===g.version.indexOf("4.");
return function(b){function d(c,a,d,g,f,h){c=b.call(this,c)||this;c._lazyPt=[];c._hasZ=!1;c._hasM=!1;c._spRef=a;c._hasZ=d;c._hasM=g;c._cacheId=f;c._partId=h;return c}q(d,b);d.prototype.get=function(b){if(void 0===this._lazyPt[b]){var a=this._elements[b];if(void 0===a)return;var c=this._hasZ,d=this._hasM,g=null,g=c&&!d?new l(a[0],a[1],a[2],void 0,this._spRef):d&&c?new l(a[0],a[1],void 0,a[2],this._spRef):c&&d?new l(a[0],a[1],a[2],a[3],this._spRef):new l(a[0],a[1],this._spRef);k?g.cache._arcadeCacheId=
this._cacheId.toString()+"-"+this._partId.toString()+"-"+b.toString():g.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+b.toString());this._lazyPt[b]=g}return this._lazyPt[b]};d.prototype.equalityTest=function(b){return b===this?!0:null===b||!1===b instanceof d?!1:b.getUniqueHash()===this.getUniqueHash()};d.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return d}(n)})},"esri/arcade/Feature":function(){define("require exports ../core/tsSupport/assignHelper ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/support/jsonUtils".split(" "),
function(b,f,q,g,n,l,k,d,h){return function(){function b(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=null;this.immutable=this.immutable=this._datesfixed=!0}b.createFromGraphic=function(a){var c=new b;c._geometry=a.geometry;c.attributes=void 0===a.attributes?{}:null===a.attributes?{}:a.attributes;a._sourceLayer?(c._layer=a._sourceLayer,c._datesfixed=!1):a._layer?(c._layer=a._layer,c._datesfixed=!1):a.layer&&(c._layer=a.layer,c._datesfixed=!1);return c};b.createFromArcadeFeature=
function(a){var c=new b;c._datesfixed=a._datesfixed;c.attributes=a.attributes;c._geometry=a._geometry;a._layer&&(c._layer=a._layer);return c};b.createFromArcadeDictionary=function(a){var c=new b;c.attributes=a.field("attributes");null!==c.attributes?c.attributes instanceof g?(c.attributes=c.attributes.attributes,null===c.attributes&&(c.attributes={})):c.attributes={}:c.attributes={};c._geometry=a.field("geometry");null!==c._geometry&&(c._geometry instanceof g?c._geometry=b.parseGeometryFromDictionary(c._geometry):
c._geometry instanceof k||(c._geometry=null));return c};b.createFromGraphicLikeObject=function(a,c,d){void 0===d&&(d=null);var g=new b;null===c&&(c={});g.attributes=c;g._geometry=a;g._layer=d;g._layer&&(g._datesfixed=!1);return g};b.prototype.repurposeFromGraphicLikeObject=function(a,b,c){void 0===c&&(c=null);null===b&&(b={});this.attributes=b;this._geometry=a;this._datesfixed=(this._layer=c)?!1:!0};b.prototype.castToText=function(){var a="",b;for(b in this.attributes){""!==a&&(a+=",");var c=this.attributes[b];
null==c?a+=JSON.stringify(b)+":null":l.isBoolean(c)||l.isNumber(c)||l.isString(c)?a+=JSON.stringify(b)+":"+JSON.stringify(c):c instanceof k?a+=JSON.stringify(b)+":"+l.toStringExplicit(c):c instanceof n?a+=JSON.stringify(b)+":"+l.toStringExplicit(c):c instanceof Array?a+=JSON.stringify(b)+":"+l.toStringExplicit(c):c instanceof Date?a+=JSON.stringify(b)+":"+JSON.stringify(c):null!==c&&"object"===typeof c&&void 0!==c.castToText&&(a+=JSON.stringify(b)+":"+c.castToText())}return'{"geometry":'+(null===
this.geometry()?"null":l.toStringExplicit(this.geometry()))+',"attributes":{'+a+"}}"};b.prototype._fixDates=function(){for(var a=[],b=0;b<this._layer.fields.length;b++){var c=this._layer.fields[b];"date"!==c.type&&"esriFieldTypeDate"!==c.type||a.push(c.name)}0<a.length&&this._fixDateFields(a);this._datesfixed=!0};b.prototype._fixDateFields=function(a){this.attributes=q({},this.attributes);for(var b=0;b<a.length;b++){var c=this.attributes[a[b]];if(null!==c)if(void 0===c)for(var d in this.attributes){if(d.toLowerCase()===
a[b]){c=this.attributes[d];null===c||c instanceof Date||(this.attributes[d]=new Date(c));break}}else c instanceof Date||(this.attributes[a[b]]=new Date(c))}};b.prototype.geometry=function(){return null===this._geometry||this._geometry instanceof k?this._geometry:this._geometry=h.fromJson(this._geometry)};b.prototype.field=function(a){!1===this._datesfixed&&this._fixDates();var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];
if(this._hasFieldDefinition(b))return null;throw Error("Field not Found");};b.prototype._hasFieldDefinition=function(a){if(null===this._layer)return!1;for(var b=0;b<this._layer.fields.length;b++)if(this._layer.fields[b].name.toLowerCase()===a)return!0;return!1};b.prototype._field=function(a){!1===this._datesfixed&&this._fixDates();var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];return null};b.prototype.setField=
function(a,b){if(this.immutable)throw Error("Feature is Immutable");if(!1===l.isSimpleType(b))throw Error("Illegal Value Assignment to Feature");var c=a.toLowerCase();if(void 0===this.attributes[a])for(var d in this.attributes)if(d.toLowerCase()===c){this.attributes[d]=b;return}this.attributes[a]=b};b.prototype.hasField=function(a){var b=a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var c in this.attributes)if(c.toLowerCase()===b)return!0;return this._hasFieldDefinition(b)?!0:!1};b.prototype.keys=
function(){var a=[],b={},c;for(c in this.attributes)a.push(c),b[c.toLowerCase()]=1;if(null!==this._layer)for(c=0;c<this._layer.fields.length;c++){var d=this._layer.fields[c];1!==b[d.name.toLowerCase()]&&a.push(d.name)}return a=a.sort()};b.parseGeometryFromDictionary=function(a){a=b.convertDictionaryToJson(a,!0);void 0!==a.spatialreference&&(a.spatialReference=a.spatialreference,delete a.spatialreference);void 0!==a.rings&&(a.rings=this.fixPathArrays(a.rings,!0===a.hasZ,!0===a.hasM));void 0!==a.paths&&
(a.paths=this.fixPathArrays(a.paths,!0===a.hasZ,!0===a.hasM));void 0!==a.points&&(a.points=this.fixPointArrays(a.points,!0===a.hasZ,!0===a.hasM));return h.fromJSON(a)};b.fixPathArrays=function(a,b,c){var d=[];if(a instanceof Array)for(var g=0;g<a.length;g++)d.push(this.fixPointArrays(a[g],b,c));else if(a instanceof n)for(g=0;g<a.length();g++)d.push(this.fixPointArrays(a.get(g),b,c));return d};b.fixPointArrays=function(a,b,c){var g=[];if(a instanceof Array)for(var f=0;f<a.length;f++){var h=a[f];h instanceof
d?b&&c?g.push([h.x,h.y,h.z,h.m]):b?g.push([h.x,h.y,h.z]):c?g.push([h.x,h.y,h.m]):g.push([h.x,h.y]):g.push(h)}else if(a instanceof n)for(f=0;f<a.length();f++)h=a.get(f),h instanceof d?b&&c?g.push([h.x,h.y,h.z,h.m]):b?g.push([h.x,h.y,h.z]):c?g.push([h.x,h.y,h.m]):g.push([h.x,h.y]):g.push(h);return g};b.convertDictionaryToJson=function(a,c){void 0===c&&(c=!1);var d={},f;for(f in a.attributes){var h=a.attributes[f];h instanceof g&&(h=b.convertDictionaryToJson(h));c?d[f.toLowerCase()]=h:d[f]=h}return d};
b.parseAttributesFromDictionary=function(a){var b={},c;for(c in a.attributes){var d=a.attributes[c];if(l.isSimpleType(d))b[c]=d;else throw Error("Illegal Argument");}return b};b.fromJson=function(a){var c=null;null!==a.geometry&&void 0!==a.geometry&&(c=h.fromJSON(a.geometry));var d={};if(null!==a.attributes&&void 0!==a.attributes)for(var g in a.attributes){var f=a.attributes[g];if(l.isString(f)||l.isNumber(f)||l.isBoolean(f)||l.isDate(f))d[g]=f;else throw Error("Illegal Argument");}return b.createFromGraphicLikeObject(c,
d,null)};b.prototype.domainValueLookup=function(a,b,c){if(null===this._layer||!this._layer.fields)return null;c=l.getDomain(a,this._layer,this,c);if(void 0===b)try{b=this.field(a)}catch(v){return null}return l.getDomainValue(c,b)};b.prototype.domainCodeLookup=function(a,b,c){if(null===this._layer||!this._layer.fields)return null;a=l.getDomain(a,this._layer,this,c);return l.getDomainCode(a,b)};return b}()})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(b,f){function q(a,
b,c,d){return"0"!==a.min&&c.length<Number(a.min)||"*"!==a.max&&c.length>Number(a.max)?-2:1}function g(a,b,c){if(null!==c.localScope&&void 0!==c.localScope[a.toLowerCase()]){var d=c.localScope[a.toLowerCase()];if("FormulaFunction"===d.type||"any"===d.type)return void 0===d.signature&&(d.signature={min:"0",max:"*"}),q(d.signature,a,b,c)}return void 0!==c.globalScope[a.toLowerCase()]&&(d=c.globalScope[a.toLowerCase()],"FormulaFunction"===d.type||"any"===d.type)?(void 0===d.signature&&(d.signature={min:"0",
max:"*"}),q(d.signature,a,b,c)):-1}function n(a,b){void 0===b&&(b=!0);var c=u(a,"SYNTAX","UNREOGNISED");try{switch(a.type){case "VariableDeclarator":return null!==a.init&&"FunctionExpression"===a.init.type?u(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==a.id.type?u(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==a.init?n(a.init,!1):"";case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(c=n(a.declarations[d],b),""!==c)return c;return"";case "ForInStatement":c=n(a.left,b);
if(""!==c)break;if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return u(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return u(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return u(a,"SYNTAX","LEFTNOTVAR");c=n(a.right,b);if(""!==c)break;c=n(a.body,b);if(""!==c)break;return"";case "ForStatement":if(null!==a.test&&(c=n(a.test,b),""!==c))break;if(null!==a.init&&(c=n(a.init,b),""!==c))break;if(null!==a.update&&(c=n(a.update,b),""!==c))break;
if(null!==a.body&&(c=n(a.body,b),""!==c))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":c=n(a.test,b);if(""!==c)break;if(null!==a.consequent&&(c=n(a.consequent,!1),""!==c))break;if(null!==a.alternate&&(c=n(a.alternate,!1),""!==c))break;return"";case "BlockStatement":for(var g=[],d=0;d<a.body.length;d++)"EmptyStatement"!==a.body[d].type&&g.push(a.body[d]);a.body=g;for(d=0;d<a.body.length;d++)if(c=n(a.body[d],b),""!==
c)return c;return"";case "FunctionDeclaration":return!1===b?u(a,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==a.id.type?u(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):n(a.body,!1);case "ReturnStatement":return null!==a.argument?n(a.argument,b):"";case "UpdateExpression":return"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?u(a,"SYNTAX","ASSIGNMENTTOVARSONLY"):n(a.argument,b);case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return u(a,"SYNTAX",
"ASSIGNMENTTOVARSONLY");c=n(a.left,b);if(""!==c)break;switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return u(a,"SYNTAX","OPERATORNOTRECOGNISED")}return n(a.right,!1);case "ExpressionStatement":return n(a.expression,!1);case "Identifier":c="";break;case "MemberExpression":c=n(a.object,b);if(""!==c)break;return!0===a.computed?n(a.property,b):"";case "Literal":return"";case "ThisExpression":return u(a,"SYNTAX","NOTSUPPORTED");case "CallExpression":if("Identifier"!==
a.callee.type)return u(a,"SYNTAX","ONLYNODESSUPPORTED");c="";for(d=0;d<a.arguments.length;d++)if(c=n(a.arguments[d],b),""!==c)return c;return"";case "UnaryExpression":c=n(a.argument,b);break;case "BinaryExpression":c=n(a.left,b);if(""!==c)break;c=n(a.right,b);if(""!==c)break;switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return u(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":c=
n(a.left,b);if(""!==c)break;c=n(a.right);if(""!==c)break;switch(a.operator){case "\x26\x26":case "||":break;default:return u(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return u(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":c="";for(d=0;d<a.elements.length&&(c=n(a.elements[d],b),""===c);d++);break;case "Array":return u(a,"SYNTAX","NOTSUPPORTED");case "ObjectExpression":c="";for(d=0;d<a.properties.length&&(c="",null!==a.properties[d].key&&("Literal"!==a.properties[d].key.type&&
"Identifier"!==a.properties[d].key.type&&(c=u(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[d].key.type&&(g=a.properties[d].key.value,"string"===typeof g||g instanceof String||(c=u(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")))),""===c&&(c=n(a.properties[d],b)),""===c);d++);break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return u(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(c=n(a.key,b),""!==c))break;c=n(a.value,b)}return c}catch(A){throw A;
}}function l(b,d){var e=u(b,"SYNTAX","UNREOGNISED"),f=null,h="";try{switch(b.type){case "VariableDeclarator":if(null!==b.init&&"FunctionExpression"===b.init.type)return u(b,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");b.id.name.toLowerCase();var m=null===b.init?"":l(b.init,d);if(""!==m)return m;null===d.localScope?d.globalScope[b.id.name.toLowerCase()]={type:"any"}:d.localScope[b.id.name.toLowerCase()]={type:"any"};return"";case "FunctionDeclaration":f=c(b.id.name.toLowerCase(),b,d);h=a(b,d);if(""!==h)return h;
if(null!==d.localScope)return u(b,"SYNTAX","GLOBALFUNCTIONSONLY");f.isnative=!1;d.globalScope[b.id.name.toLowerCase()]={type:"FormulaFunction",signature:[f]};return"";case "VariableDeclaration":for(var e="",p=0;p<b.declarations.length&&(e=l(b.declarations[p],d),""===e);p++);break;case "IfStatement":e=l(b.test,d);if(""!==e)break;if("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)return u(b.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==b.consequent&&(e=l(b.consequent,
d),""!==e))break;if(null!==b.alternate&&(e=l(b.alternate,d),""!==e))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(p=0;p<b.body.length;p++)if(e=l(b.body[p],d),""!==e)return e;return"";case "ReturnStatement":return null!==b.argument?l(b.argument,d):"";case "ForInStatement":if("VariableDeclaration"===b.left.type){if(1<b.left.declarations.length)return u(b,"SYNTAX","ONLY1VAR");if(null!==b.left.declarations[0].init)return u(b,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==
b.left.type)return u(b,"SYNTAX","LEFTNOTVAR");e=l(b.left,d);if(""!==e)break;e=l(b.right,d);if(""!==e)break;e=l(b.body,d);if(""!==e)break;return"";case "ForStatement":if(null!==b.init&&(e=l(b.init,d),""!==e))break;if(null!==b.test&&(e=l(b.test,d),""!==e))break;if(null!==b.body&&(e=l(b.body,d),""!==e))break;if(null!==b.update&&(e=l(b.update,d),""!==e))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==b.argument.type&&"MemberExpression"!==
b.argument.type)return u(b,"SYNTAX","ASSIGNMENTTOVARSONLY");var k=!1;if("MemberExpression"===b.argument.type)return l(b.argument,d);null!==d.localScope&&void 0!==d.localScope[b.argument.name.toLowerCase()]&&(k=!0);void 0!==d.globalScope[b.argument.name.toLowerCase()]&&(k=!0);return!1===k?"Identifier "+b.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==b.left.type&&"MemberExpression"!==b.left.type)return u(b,"SYNTAX","ASSIGNMENTTOVARSONLY");var r=l(b.right,d);
if(""!==r)return r;k=!1;if("MemberExpression"===b.left.type)return r=l(b.left,d),""!==r?r:"";null!==d.localScope&&void 0!==d.localScope[b.left.name.toLowerCase()]&&(k=!0);void 0!==d.globalScope[b.left.name.toLowerCase()]&&(k=!0);return!1===k?"Identifier "+b.left.name+" has not been declared.":"";case "ExpressionStatement":return l(b.expression,d);case "Identifier":var n=b.name.toLowerCase();if(null!==d.localScope&&void 0!==d.localScope[n])return"";e=void 0!==d.globalScope[n]?"":u(b,"SYNTAX","VARIABLENOTFOUND");
break;case "MemberExpression":e=l(b.object,d);if(""!==e)break;return!0===b.computed?l(b.property,d):"";case "Literal":return"";case "ThisExpression":e=u(b,"SYNTAX","NOTSUPPORTED");break;case "CallExpression":if("Identifier"!==b.callee.type)return u(b,"SYNTAX","ONLYNODESSUPPORTED");e="";for(p=0;p<b.arguments.length;p++)if(e=l(b.arguments[p],d),""!==e)return e;var q=g(b.callee.name,b.arguments,d);-1===q&&(e=u(b,"SYNTAX","NOTFOUND"));-2===q&&(e=u(b,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":e=
l(b.argument,d);break;case "BinaryExpression":e=l(b.left,d);if(""!==e)break;e=l(b.right,d);if(""!==e)break;return"";case "LogicalExpression":e=l(b.left,d);if(""!==e)break;if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)return u(b.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");e=l(b.right,d);if(""!==e)break;return"AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type?u(b.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return u(b,
"SYNTAX","NOTSUPPORTED");case "ArrayExpression":e="";for(p=0;p<b.elements.length&&(e=l(b.elements[p],d),""===e);p++);break;case "ObjectExpression":e="";for(p=0;p<b.properties.length;p++){e="";if(null!==b.properties[p].key&&("Literal"!==b.properties[p].key.type&&"Identifier"!==b.properties[p].key.type&&(e=u(b,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===b.properties[p].key.type)){var t=b.properties[p].key.value;"string"===typeof t||t instanceof String||(e=u(b,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===
e&&(e=l(b.properties[p],d));if(""!==e)break}break;case "Property":if("Literal"!==b.key.type&&"Identifier"!==b.key.type)return u(b,"SYNTAX","ONLYLITERAL");if("Identifier"!==b.key.type&&(e=l(b.key,d),""!==e))break;e=l(b.value,d);break;case "Array":return u(b,"SYNTAX","NOTSUPPORTED")}return e}catch(fa){throw fa;}}function k(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==a.init?k(a.init,b):c;case "FunctionDeclaration":return k(a.body,b);case "VariableDeclaration":for(var d=0;d<
a.declarations.length;d++)if(k(a.declarations[d],b))return!0;return c;case "IfStatement":return k(a.test,b)||null!==a.consequent&&k(a.consequent,b)||null!==a.alternate&&k(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(d=0;d<a.body.length;d++)if(k(a.body[d],b))return!0;return c;case "ReturnStatement":return null!==a.argument?k(a.argument,b):c;case "UpdateExpression":return k(a.argument,b);case "AssignmentExpression":return(c=k(a.right,b))?c:k(a.left,b);case "ExpressionStatement":return k(a.expression,
b);case "ForInStatement":return(c=k(a.left,b))||(c=k(a.right,b))?c:c=k(a.body,b);case "ForStatement":if(null!==a.init&&(c=k(a.init,b))||null!==a.test&&(c=k(a.test,b))||null!==a.body&&(c=k(a.body,b)))return c;null!==a.update&&(c=k(a.update,b));return c;case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return b.toLowerCase()===a.name.toLowerCase();case "MemberExpression":if(c=k(a.object,b))return c;!0===a.computed&&(c=k(a.property,b));return c;
case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(d=0;d<a.arguments.length;d++)k(a.arguments[d],b)&&(c=!0);return c;case "ArrayExpression":for(d=0;d<a.elements.length;d++)k(a.elements[d],b)&&(c=!0);return c;case "UnaryExpression":return k(a.argument,b);case "BinaryExpression":return(c=k(a.left,b))?c:c=k(a.right,b);case "LogicalExpression":return(c=k(a.left,b))?c:c=k(a.right,b);case "ObjectExpression":for(d=0;d<a.properties.length;d++)k(a.properties[d],b)&&(c=!0);return c;
case "Property":return c=k(a.value,b);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(y){throw y;}}function d(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==a.init?d(a.init,b):c;case "FunctionDeclaration":return d(a.body,b);case "VariableDeclaration":for(var g=0;g<a.declarations.length;g++)if(d(a.declarations[g],b))return!0;return c;case "IfStatement":return d(a.test,b)||null!==a.consequent&&d(a.consequent,b)||null!==a.alternate&&d(a.alternate,
b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(g=0;g<a.body.length;g++)if(d(a.body[g],b))return!0;return c;case "ReturnStatement":return null!==a.argument?d(a.argument,b):c;case "UpdateExpression":return d(a.argument,b);case "AssignmentExpression":return d(a.left,b)?!0:d(a.right,b);case "ExpressionStatement":return d(a.expression,b);case "ForInStatement":return(c=d(a.left,b))||(c=d(a.right,b))?c:c=d(a.body,b);case "ForStatement":if(null!==a.init&&(c=d(a.init,b))||null!==a.test&&
(c=d(a.test,b))||null!==a.body&&(c=d(a.body,b)))return c;null!==a.update&&(c=d(a.update,b));return c;case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":if(c=d(a.object,b))return c;!0===a.computed&&(c=d(a.property,b));return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":if(a.callee.name.toLowerCase()===b.toLowerCase())return!0;for(g=0;g<a.arguments.length;g++)d(a.arguments[g],
b)&&(c=!0);return c;case "ArrayExpression":for(g=0;g<a.elements.length;g++)d(a.elements[g],b)&&(c=!0);return c;case "UnaryExpression":return d(a.argument,b);case "BinaryExpression":return(c=d(a.left,b))?c:c=d(a.right,b);case "LogicalExpression":return(c=d(a.left,b))?c:c=d(a.right,b);case "ConditionalExpression":return c;case "ObjectExpression":for(g=0;g<a.properties.length;g++)d(a.properties[g],b)&&(c=!0);return c;case "Property":return c=d(a.value,b);case "Array":return c;default:return c}}catch(y){throw y;
}}function h(a,b){var c=[],d;try{switch(a.type){case "VariableDeclarator":return null!==a.init?h(a.init,b):c;case "FunctionDeclaration":return h(a.body,b);case "VariableDeclaration":for(var g=0;g<a.declarations.length;g++)d=h(a.declarations[g],b),c=c.concat(d);return c;case "ForInStatement":return d=h(a.left,b),c=c.concat(d),d=h(a.right,b),c=c.concat(d),d=h(a.body,b),c=c.concat(d);case "ForStatement":return null!==a.init&&(d=h(a.init,b),c=c.concat(d)),null!==a.test&&(d=h(a.test,b),c=c.concat(d)),
null!==a.body&&(d=h(a.body,b),c=c.concat(d)),null!==a.update&&(d=h(a.update,b),c=c.concat(d)),c;case "IfStatement":return d=h(a.test,b),c=c.concat(d),null!==a.consequent&&(d=h(a.consequent,b),c=c.concat(d)),null!==a.alternate&&(d=h(a.alternate,b),c=c.concat(d)),c;case "EmptyStatement":return c;case "BlockStatement":for(g=0;g<a.body.length;g++)d=h(a.body[g],b),c=c.concat(d);return c;case "ReturnStatement":return null!==a.argument?h(a.argument,b):c;case "UpdateExpression":return h(a.argument,b);case "AssignmentExpression":return c=
h(a.left,b),c=c.concat(h(a.right,b));case "ExpressionStatement":return h(a.expression,b);case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":if("Identifier"!==a.object.type)return c;if(!1===a.computed)c.push(a.object.name.toLowerCase()+"."+a.property.name.toLowerCase());else try{"Literal"===a.property.type&&"string"===typeof a.property.value&&c.push(a.object.name.toLowerCase()+"."+a.property.value.toString().toLowerCase())}catch(A){}return c;
case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(g=0;g<a.arguments.length;g++)d=h(a.arguments[g],b),c=c.concat(d);return c;case "ArrayExpression":for(g=0;g<a.elements.length;g++)d=h(a.elements[g],b),c=c.concat(d);return c;case "UnaryExpression":return h(a.argument,b);case "ObjectExpression":for(g=0;g<a.properties.length;g++)d=h(a.properties[g],b),c=c.concat(d);return c;case "Property":return h(a.value,b);case "BinaryExpression":return d=h(a.left,b),c=c.concat(d),d=
h(a.right,b),c=c.concat(d);case "LogicalExpression":return d=h(a.left,b),c=c.concat(d),d=h(a.right,b),c=c.concat(d);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(A){throw A;}}function c(a,b,c){c=[];if(void 0!==b.params&&null!==b.params)for(var d=0;d<b.params.length;d++)c.push("any");return{name:a,return:"any",params:c}}function a(a,b){b={globalScope:b.globalScope,localScope:{}};for(var c=0;c<a.params.length;c++)b.localScope[a.params[c].name.toLowerCase()]={type:"any"};
return l(a.body,b)}function p(a,b,c,d){var e={};if(void 0===a||null===a)a={};if(void 0===c||null===c)c={};e.infinity={type:"any"};e.textformatting={type:"any"};e.pi={type:"any"};for(var g in b)if("simple"!==d||"simple"===d&&"a"===b[g].av)e[g]={type:"FormulaFunction",signature:{min:b[g].min,max:b[g].max}},"simple"!==d&&(void 0!==b[g].fmin&&(e[g].signature.min=b[g].fmin),void 0!==b[g].fmax&&(e[g].signature.max=b[g].fmax));for(b=0;b<c.length;b++)g=c[b],e[g.name]={type:"FormulaFunction",signature:g};
for(g in a)e[g]=a[g],e[g].type="any";return e}function u(a,b,c){var d="";switch(b){case "SYNTAX":d="Syntax Error: ";break;case "RUNTIME":d="Runtime Error: ";break;default:d="Syntax Error: "}try{switch(a.type){case "IfStatement":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=
" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":d+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":d+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(c){case "GLOBALFUNCTIONSONLY":d+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":d+=" Function Definition must have an identifier"}break;case "VariableDeclaration":d+=" Only 1 variable can be declared at a time";break;
case "VariableDeclarator":switch(c){case "FUNCTIONVARIABLEDECLARATOR":d+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":d+=" Variable Definition must have an identifier"}break;case "Identifier":d+=" Identifier Not Found. ";d+=a.name;break;case "ObjectExpression":switch(c){case "OBJECTPROPERTYMUSTBESTRING":d+=" Property name must be a string"}break;case "ForStatement":switch(c){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;
case "ForInStatement":switch(c){case "ONLY1VAR":d+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":d+=" Can only declare value for use with IN";break;case "LEFTNOVAR":d+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":d+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":d+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(c){case "PROPERTYNOTFOUND":d+="Cannot find member property. ";d+=
!1===a.computed?a.property.name:"";break;case "OUTOFBOUNDS":d+="Out of Bounds. ";d+=!1===a.computed?a.property.name:"";break;case "NOTFOUND":d+="Cannot call member method on null. ";d+=!1===a.computed?a.property.name:"";break;case "INVALIDTYPE":d+="Cannot call member property on object of this type. ",d+=!1===a.computed?a.property.name:""}break;case "Property":switch(c){case "ONLYLITERAL":d+="Property names must be literals or identifiers"}break;case "Literal":break;case "ThisExpression":d+="THIS construct is not supported.";
case "CallExpression":switch(c){case "WRONGSIGNATURE":d+="Function signature does not match: ";d+=a.callee.name;break;case "ONLYNODESUPPORTED":d+="Functions must be declared.";d+=a.callee.name;break;case "NOTAFUNCTION":d+="Not a Function: ";d+=a.callee.name;break;case "NOTFOUND":d+="Function Not Found: "+a.callee.name}break;case "UnaryExpression":switch(c){case "NOTSUPPORTEDUNARYOPERATOR":d+="Operator "+a.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";
break;case "NOTSUPPORTEDTYPE":d+="Unary operator "+a.operator+" cannot be used with this argument."}case "BinaryExpression":switch(c){case "OPERATORNOTRECOGNISED":d+="Binary Operator not recognised "+a.operator}break;case "LogicalExpression":switch(c){case "ONLYBOOLEAN":d+="Operator "+a.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":d+="Logical Expression "+a.operator+" being applied to parameters that are not boolean."}break;case "ConditionalExpression":d+=
"Conditional statements not supported.";break;case "ArrayExpression":switch(c){case "FUNCTIONCONTEXTILLEGAL":d+=" Cannot Put Function inside Array."}break;case "Array":d+="Expression contains unrecognised array structure.";break;default:d+="Expression contains unrecognised code structures."}}catch(y){throw y;}return d}function v(a,b,c){return{line:a.loc.start.line,character:a.loc.start.column,reason:u(a,b,c)}}function z(a,b,c,d,g){void 0===g&&(g=!0);b={globalScope:b.globalScope,localScope:{}};for(g=
0;g<a.params.length;g++)b.localScope[a.params[g].name.toLowerCase()]={type:"any"};t(a.body,b,c,d,!1)}function t(a,b,d,f,h){void 0===h&&(h=!0);if(null===a)throw Error("Unnexpexted Expression Syntax");var e=null;try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type){f.push(v(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==a.id.type?f.push(v(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(a.id.name.toLowerCase(),null===b.localScope?b.globalScope[a.id.name.toLowerCase()]=
{type:"any"}:b.localScope[a.id.name.toLowerCase()]={type:"any"});null===a.init?"":t(a.init,b,d,f,h);break;case "FunctionDeclaration":!1===h&&f.push(v(a,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==a.id.type&&f.push(v(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));e=c("",a,b);z(a,b,d,f,h);null!==b.localScope&&f.push(v(a,"SYNTAX","GLOBALFUNCTIONSONLY"));e.isnative=!1;"Identifier"===a.id.type&&(b.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[e]});break;case "VariableDeclaration":for(var p=
0;p<a.declarations.length;p++)t(a.declarations[p],b,d,f,h);break;case "IfStatement":null!==a.test&&(t(a.test,b,d,f,h),"AssignmentExpression"!==a.test.type&&"UpdateExpression"!==a.test.type||f.push(v(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==a.consequent&&t(a.consequent,b,d,f,h);null!==a.alternate&&t(a.alternate,b,d,f,h);break;case "EmptyStatement":break;case "BlockStatement":if(null!==a.body)for(p=0;p<a.body.length;p++)t(a.body[p],b,d,f,h);break;case "ReturnStatement":null!==
a.argument&&t(a.argument,b,d,f,h);break;case "ForInStatement":"VariableDeclaration"===a.left.type?(1<a.left.declarations.length&&f.push(v(a,"SYNTAX","ONLY1VAR")),null!==a.left.declarations[0].init&&f.push(v(a,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==a.left.type&&f.push(v(a,"SYNTAX","LEFTNOTVAR"));t(a.left,b,d,f,h);t(a.right,b,d,f,h);t(a.body,b,d,f,h);break;case "ForStatement":null!==a.init&&t(a.init,b,d,f,h);null!==a.test&&t(a.test,b,d,f,h);null!==a.body&&t(a.body,b,d,f,h);null!==a.update&&t(a.update,
b,d,f,h);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?f.push(v(a,"SYNTAX","ASSIGNMENTTOVARSONLY")):("Identifier"===a.argument.type&&(e=!1,!1===d&&(null!==b.localScope&&void 0!==b.localScope[a.argument.name.toLowerCase()]&&(e=!0),void 0!==b.globalScope[a.argument.name.toLowerCase()]&&(e=!0),!1===e&&f.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+
a.argument.name+" has not been declared."}))),"MemberExpression"===a.argument.type&&t(a.argument,b,d,f,h));break;case "AssignmentExpression":"Identifier"!==a.left.type&&"MemberExpression"!==a.left.type&&f.push(v(a,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:f.push(v(a,"SYNTAX","OPERATORNOTRECOGNISED"))}t(a.right,b,d,f,h);e=!1;"Identifier"===a.left.type&&(null!==b.localScope&&void 0!==b.localScope[a.left.name.toLowerCase()]&&
(e=!0),void 0!==b.globalScope[a.left.name.toLowerCase()]&&(e=!0),!1===d&&!1===e&&f.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."}));"MemberExpression"===a.left.type&&t(a.left,b,d,f,h);break;case "ExpressionStatement":t(a.expression,b,d,f,h);break;case "Identifier":var m=a.name.toLowerCase();if(null!==b.localScope&&void 0!==b.localScope[m])break;void 0===b.globalScope[m]&&!1===d&&f.push(v(a,"SYNTAX","VARIABLENOTFOUND"));
break;case "MemberExpression":t(a.object,b,d,f,h);!0===a.computed&&t(a.property,b,d,f,h);break;case "Literal":return"";case "ThisExpression":f.push(v(a,"SYNTAX","NOTSUPPORTED"));break;case "CallExpression":"Identifier"!==a.callee.type&&f.push(v(a,"SYNTAX","ONLYNODESSUPPORTED"));for(p=0;p<a.arguments.length;p++)t(a.arguments[p],b,d,f,h);var k=g(a.callee.name,a.arguments,b);!1===d&&-1===k&&f.push(v(a,"SYNTAX","NOTFOUND"));-2===k&&f.push(v(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":t(a.argument,
b,d,f,h);break;case "BinaryExpression":t(a.left,b,d,f,h);t(a.right,b,d,f,h);switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:f.push(v(a,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(a.operator){case "\x26\x26":case "||":break;default:f.push(v(a,"SYNTAX","OPERATORNOTRECOGNISED"))}t(a.left,b,d,f,h);"AssignmentExpression"!==a.left.type&&"UpdateExpression"!==a.left.type||
f.push(v(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));t(a.right,b,d,f,h);"AssignmentExpression"!==a.right.type&&"UpdateExpression"!==a.right.type||f.push(v(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":f.push(v(a,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(p=0;p<a.elements.length;p++)t(a.elements[p],b,d,f,h);break;case "Array":f.push(v(a,"SYNTAX","NOTSUPPORTED"));case "ObjectExpression":for(p=0;p<a.properties.length;p++)t(a.properties[p],
b,d,f,h);break;case "Property":"Literal"!==a.key.type&&"Identifier"!==a.key.type&&f.push(v(a,"SYNTAX","ONLYLITERAL"));"Literal"===a.key.type&&t(a.key,b,d,f,h);t(a.value,b,d,f,h);break;default:f.push(v(a,"SYNTAX","UNRECOGNISED"))}}catch(C){f.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Unnexpected Syntax"})}}function x(a,b){var c=[],d;try{switch(a.type){case "VariableDeclarator":return null!==a.init?x(a.init,b):c;case "FunctionDeclaration":return x(a.body,
b);case "VariableDeclaration":for(var g=0;g<a.declarations.length;g++)d=x(a.declarations[g],b),c=c.concat(d);return c;case "ForInStatement":return d=x(a.left,b),c=c.concat(d),d=x(a.right,b),c=c.concat(d),d=x(a.body,b),c=c.concat(d);case "ForStatement":return null!==a.init&&(d=x(a.init,b),c=c.concat(d)),null!==a.test&&(d=x(a.test,b),c=c.concat(d)),null!==a.body&&(d=x(a.body,b),c=c.concat(d)),null!==a.update&&(d=x(a.update,b),c=c.concat(d)),c;case "IfStatement":return d=x(a.test,b),c=c.concat(d),null!==
a.consequent&&(d=x(a.consequent,b),c=c.concat(d)),null!==a.alternate&&(d=x(a.alternate,b),c=c.concat(d)),c;case "EmptyStatement":return c;case "BlockStatement":for(g=0;g<a.body.length;g++)d=x(a.body[g],b),c=c.concat(d);return c;case "ReturnStatement":return null!==a.argument?x(a.argument,b):c;case "UpdateExpression":return x(a.argument,b);case "AssignmentExpression":return c=x(a.left,b),c=c.concat(x(a.right,b));case "ExpressionStatement":return x(a.expression,b);case "BreakStatement":return c;case "ContinueStatement":return c;
case "Compound":return c;case "Identifier":return c;case "MemberExpression":return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(g=0;g<a.arguments.length;g++)d=x(a.arguments[g],b),c=c.concat(d);c.push(a.callee.name.toLowerCase());return c;case "ArrayExpression":for(g=0;g<a.elements.length;g++)d=x(a.elements[g],b),c=c.concat(d);return c;case "UnaryExpression":return x(a.argument,b);case "ObjectExpression":for(g=0;g<a.properties.length;g++)d=x(a.properties[g],b),
c=c.concat(d);return c;case "Property":return x(a.value,b);case "BinaryExpression":return d=x(a.left,b),c=c.concat(d),d=x(a.right,b),c=c.concat(d);case "LogicalExpression":return d=x(a.left,b),c=c.concat(d),d=x(a.right,b),c=c.concat(d);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(A){throw A;}}Object.defineProperty(f,"__esModule",{value:!0});f.functionDecls={concatenate:{min:"0",max:"*",av:"a"},split:{min:"2",max:"4",av:"a"},guid:{min:"0",max:"1",av:"a"},today:{min:"0",
max:"0",av:"a"},now:{min:"0",max:"0",av:"a"},timestamp:{min:"0",max:"0",av:"a"},day:{min:"1",max:"1",av:"a"},month:{min:"1",max:"1",av:"a"},year:{min:"1",max:"1",av:"a"},hour:{min:"1",max:"1",av:"a"},second:{min:"1",max:"1",av:"a"},millisecond:{min:"1",max:"1",av:"a"},minute:{min:"1",max:"1",av:"a"},weekday:{min:"1",max:"1",av:"a"},toutc:{min:"1",max:"1",av:"a"},tolocal:{min:"1",max:"1",av:"a"},date:{min:"0",max:"7",av:"a"},datediff:{min:"2",max:"3",av:"a"},dateadd:{min:"2",max:"3",av:"a"},trim:{min:"1",
max:"1",av:"a"},text:{min:"1",max:"2",av:"a"},left:{min:"2",max:"2",av:"a"},right:{min:"2",max:"2",av:"a"},mid:{min:"2",max:"3",av:"a"},upper:{min:"1",max:"1",av:"a"},proper:{min:"1",max:"2",av:"a"},lower:{min:"1",max:"1",av:"a"},find:{min:"2",max:"3",av:"a"},iif:{min:"3",max:"3",av:"a"},decode:{min:"2",max:"*",av:"a"},when:{min:"2",max:"*",av:"a"},defaultvalue:{min:"2",max:"2",av:"a"},isempty:{min:"1",max:"1",av:"a"},domaincode:{min:"3",max:"4",av:"a"},domainname:{min:"2",max:"4",av:"a"},polygon:{min:"1",
max:"1",av:"a"},point:{min:"1",max:"1",av:"a"},polyline:{min:"1",max:"1",av:"a"},extent:{min:"1",max:"1",av:"a"},multipoint:{min:"1",max:"1",av:"a"},geometry:{min:"1",max:"1",av:"a"},count:{min:"0",max:"*",av:"a"},number:{min:"1",max:"2",av:"a"},acos:{min:"1",max:"1",av:"a"},asin:{min:"1",max:"1",av:"a"},atan:{min:"1",max:"1",av:"a"},atan2:{min:"2",max:"2",av:"a"},ceil:{min:"1",max:"2",av:"a"},floor:{min:"1",max:"2",av:"a"},round:{min:"1",max:"2",av:"a"},cos:{min:"1",max:"1",av:"a"},exp:{min:"1",
max:"1",av:"a"},log:{min:"1",max:"1",av:"a"},min:{min:"0",max:"*",av:"a"},constrain:{min:"3",max:"3",av:"a"},console:{min:"0",max:"*",av:"a"},max:{min:"0",max:"*",av:"a"},pow:{min:"2",max:"2",av:"a"},random:{min:"0",max:"0",av:"a"},sqrt:{min:"1",max:"1",av:"a"},sin:{min:"1",max:"1",av:"a"},tan:{min:"1",max:"1",av:"a"},abs:{min:"1",max:"1",av:"a"},isnan:{min:"1",max:"1",av:"a"},stdev:{min:"0",max:"*",av:"a"},average:{min:"0",max:"*",av:"a"},mean:{min:"0",max:"*",av:"a"},sum:{min:"0",max:"*",av:"a"},
variance:{min:"0",max:"*",av:"a"},distinct:{min:"0",max:"*",av:"a"},first:{min:"1",max:"1",av:"a"},top:{min:"2",max:"2",av:"a"},boolean:{min:"1",max:"1",av:"a"},dictionary:{min:"0",max:"*",av:"a"},typeof:{min:"1",max:"1",av:"a"},reverse:{min:"1",max:"1",av:"a"},replace:{min:"3",max:"4",av:"a"},sort:{min:"1",max:"2",av:"a"},feature:{min:"1",max:"*",av:"a"},haskey:{min:"2",max:"2",av:"a"},indexof:{min:"2",max:"2",av:"a"},disjoint:{min:"2",max:"2",av:"a"},intersects:{min:"2",max:"2",av:"a"},touches:{min:"2",
max:"2",av:"a"},crosses:{min:"2",max:"2",av:"a"},within:{min:"2",max:"2",av:"a"},contains:{min:"2",max:"2",av:"a"},overlaps:{min:"2",max:"2",av:"a"},equals:{min:"2",max:"2",av:"a"},relate:{min:"3",max:"3",av:"a"},intersection:{min:"2",max:"2",av:"a"},union:{min:"1",max:"2",av:"a"},difference:{min:"2",max:"2",av:"a"},symmetricdifference:{min:"2",max:"2",av:"a"},clip:{min:"2",max:"2",av:"a"},cut:{min:"2",max:"2",av:"a"},area:{min:"1",max:"2",av:"a"},areageodetic:{min:"1",max:"2",av:"a"},length:{min:"1",
max:"2",av:"a"},lengthgeodetic:{min:"1",max:"2",av:"a"},distance:{min:"2",max:"3",av:"a"},densify:{min:"2",max:"3",av:"a"},densifygeodetic:{min:"2",max:"3",av:"a"},generalize:{min:"2",max:"4",av:"a"},buffer:{min:"2",max:"3",av:"a"},buffergeodetic:{min:"2",max:"3",av:"a"},offset:{min:"2",max:"6",av:"a"},rotate:{min:"2",max:"3",av:"a"},issimple:{min:"1",max:"1",av:"a"},simplify:{min:"1",max:"1",av:"a"},centroid:{min:"1",max:"1",av:"a"},multiparttosinglepart:{min:"1",max:"1",av:"a"},setgeometry:{min:"2",
max:"2",av:"a"}};f.addFunctionDeclaration=function(a,b){var c=f.functionDecls[a.name.toLowerCase()];void 0===c?f.functionDecls[a.name.toLowerCase()]={min:a.min,max:a.max,av:b}:"a"===c.av&&"f"===b?(void 0!==c.fmin&&delete c.fmin,void 0!==c.fmax&&delete c.fmax,c.fmin=a.min,c.fmax=a.max):"f"===c.av&&"a"===b?(void 0===c.fmin&&(c.fmin=c.min),void 0===c.fmax&&(c.fmax=c.max),c.min=a.min,c.max=a.max,c.av="a"):"f"===b?(c.fmin=a.min,c.fmax=a.max):"a"===b&&(c.min=a.min,c.max=a.max)};f.checkFunctionSignature=
q;f.findFunction=g;f.validateLanguageNode=n;f.testValidityOfExpression=l;f.referencesMemberImpl=k;f.referencesMember=function(a,b){return!0===k(a.body[0].body,b.toLowerCase())?!0:!1};f.referencesFunctionImpl=d;f.referencesFunction=function(a,b){return!0===d(a.body[0].body,b)?!0:!1};f.findFieldLiteralsImpl=h;f.findFieldLiterals=function(a,b){return h(a.body[0].body,b)};f.extractFunctionDeclaration=c;f.validateFunction=a;f.constructGlobalScope=p;f.validateScript=function(a,b,c){void 0===c&&(c="full");
b={globalScope:p(b.vars,f.functionDecls,b.customFunctions,c),localScope:null};return l(a.body[0].body,b)};f.validateLanguage=function(a){return"BlockStatement"!==a.body[0].body.type?"Invalid formula content.":n(a.body[0].body)};f.nodeErrorMessage=u;f.makeError=v;f.extractAllIssuesInFunction=z;f.extractAllIssues=t;f.checkScript=function(a,b,c,d){void 0===d&&(d="full");var e=[];if("BlockStatement"!==a.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===b||void 0===b)b={vars:{},
customFunctions:[]};b={globalScope:p(b.vars,f.functionDecls,b.customFunctions,d),localScope:null};try{t(a.body[0].body,b,c,e)}catch(A){}return e};f.findFunctionCallsImpl=x;f.findFunctionCalls=function(a,b){return x(a.body[0].body,b)}})},"esri/arcade/functions/date":function(){define(["require","exports","../../moment","../languageUtils"],function(b,f,q,g){function n(b){return null===b?b:isNaN(b.getTime())?null:b}Object.defineProperty(f,"__esModule",{value:!0});f.registerFunctions=function(b,f){b.today=
function(b,h){return f(b,h,function(b,a,d){g.pcCheck(d,0,0);b=new Date;b.setHours(0,0,0,0);return b})};b.now=function(b,h){return f(b,h,function(b,a,d){g.pcCheck(d,0,0);return new Date})};b.timestamp=function(b,h){return f(b,h,function(b,a,d){g.pcCheck(d,0,0);b=new Date;return b=new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds())})};b.toutc=function(b,h){return f(b,h,function(b,a,d){g.pcCheck(d,1,1);b=g.toDate(d[0]);
return null===b?null:new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds())})};b.tolocal=function(b,h){return f(b,h,function(b,a,d){g.pcCheck(d,1,1);b=g.toDate(d[0]);return null===b?null:q.utc([b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds(),b.getMilliseconds()]).toDate()})};b.day=function(b,h){return f(b,h,function(b,a,d){g.pcCheck(d,1,1);b=g.toDate(d[0]);return null===b?NaN:b.getDate()})};
b.month=function(b,h){return f(b,h,function(b,a,d){g.pcCheck(d,1,1);b=g.toDate(d[0]);return null===b?NaN:b.getMonth()})};b.year=function(b,h){return f(b,h,function(b,a,d){g.pcCheck(d,1,1);b=g.toDate(d[0]);return null===b?NaN:b.getFullYear()})};b.hour=function(b,h){return f(b,h,function(b,a,d){g.pcCheck(d,1,1);b=g.toDate(d[0]);return null===b?NaN:b.getHours()})};b.second=function(b,h){return f(b,h,function(b,a,d){g.pcCheck(d,1,1);b=g.toDate(d[0]);return null===b?NaN:b.getSeconds()})};b.millisecond=
function(b,h){return f(b,h,function(b,a,d){g.pcCheck(d,1,1);b=g.toDate(d[0]);return null===b?NaN:b.getMilliseconds()})};b.minute=function(b,h){return f(b,h,function(b,a,d){g.pcCheck(d,1,1);b=g.toDate(d[0]);return null===b?NaN:b.getMinutes()})};b.weekday=function(b,h){return f(b,h,function(b,a,d){g.pcCheck(d,1,1);b=g.toDate(d[0]);return null===b?NaN:b.getDay()})};b.date=function(b,h){return f(b,h,function(b,a,d){g.pcCheck(d,0,7);if(3===d.length)return n(new Date(g.toNumber(d[0]),g.toNumber(d[1]),g.toNumber(d[2]),
0,0,0,0));if(4===d.length)return n(new Date(g.toNumber(d[0]),g.toNumber(d[1]),g.toNumber(d[2]),g.toNumber(d[3]),0,0,0));if(5===d.length)return n(new Date(g.toNumber(d[0]),g.toNumber(d[1]),g.toNumber(d[2]),g.toNumber(d[3]),g.toNumber(d[4]),0,0));if(6===d.length)return n(new Date(g.toNumber(d[0]),g.toNumber(d[1]),g.toNumber(d[2]),g.toNumber(d[3]),g.toNumber(d[4]),g.toNumber(d[5]),0));if(7===d.length)return n(new Date(g.toNumber(d[0]),g.toNumber(d[1]),g.toNumber(d[2]),g.toNumber(d[3]),g.toNumber(d[4]),
g.toNumber(d[5]),g.toNumber(d[6])));if(2===d.length){b=g.toString(d[1]);if(""===b)return null;b=g.standardiseDateFormat(b);d=q(g.toString(d[0]),b,!0);return!0===d.isValid()?d.toDate():null}if(1===d.length){if(g.isString(d[0])&&""===d[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;b=g.toNumber(d[0]);return!1===isNaN(b)?n(new Date(b)):g.toDate(d[0])}if(0===d.length)return new Date})};b.datediff=function(b,h){return f(b,h,function(b,a,d){g.pcCheck(d,2,3);b=g.toDateM(d[0]);a=g.toDateM(d[1]);
if(null===b||null===a)return NaN;switch(g.toString(d[2]).toLowerCase()){case "days":case "day":case "d":return b.diff(a,"days",!0);case "months":case "month":return b.diff(a,"months",!0);case "minutes":case "minute":case "m":return"M"===d[2]?b.diff(a,"months",!0):b.diff(a,"minutes",!0);case "seconds":case "second":case "s":return b.diff(a,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return b.diff(a);case "hours":case "hour":case "h":return b.diff(a,"hours",!0);case "years":case "year":case "y":return b.diff(a,
"years",!0);default:return b.diff(a)}})};b.dateadd=function(b,h){return f(b,h,function(b,a,d){g.pcCheck(d,2,3);b=g.toDateM(d[0]);if(null===b)return null;a="milliseconds";switch(g.toString(d[2]).toLowerCase()){case "days":case "day":case "d":a="days";break;case "months":case "month":a="months";break;case "minutes":case "minute":case "m":a="M"===d[2]?"months":"minutes";break;case "seconds":case "second":case "s":a="seconds";break;case "milliseconds":case "millisecond":case "ms":a="milliseconds";break;
case "hours":case "hour":case "h":a="hours";break;case "years":case "year":case "y":a="years"}b.add(g.toNumber(d[1]),a);return b.toDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),function(b,f,q,g,n,l,k,d,h,c,a,p){Object.defineProperty(f,"__esModule",
{value:!0});f.registerFunctions=function(b,f){b.polygon=function(a,b){return f(a,b,function(b,d,f){n.pcCheck(f,1,1);b=null;if(f[0]instanceof q){if(b=n.fixSpatialReference(g.parseGeometryFromDictionary(f[0]),a.spatialReference),!1===b instanceof c)throw Error("Illegal Parameter");}else b=f[0]instanceof c?p.fromJSON(f[0].toJSON()):n.fixSpatialReference(new c(JSON.parse(f[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return n.fixNullGeometry(b)})};b.polyline=function(b,c){return f(b,c,function(c,d,f){n.pcCheck(f,1,1);c=null;if(f[0]instanceof q){if(c=n.fixSpatialReference(g.parseGeometryFromDictionary(f[0]),b.spatialReference),!1===c instanceof a)throw Error("Illegal Parameter");}else c=f[0]instanceof a?p.fromJSON(f[0].toJSON()):n.fixSpatialReference(new a(JSON.parse(f[0])),b.spatialReference);if(null!==c&&!1===c.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return n.fixNullGeometry(c)})};b.point=function(a,b){return f(a,b,function(b,c,d){n.pcCheck(d,1,1);b=null;if(d[0]instanceof q){if(b=n.fixSpatialReference(g.parseGeometryFromDictionary(d[0]),a.spatialReference),!1===b instanceof h)throw Error("Illegal Parameter");}else b=d[0]instanceof h?p.fromJSON(d[0].toJSON()):n.fixSpatialReference(new h(JSON.parse(d[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return n.fixNullGeometry(b)})};b.multipoint=function(a,b){return f(a,b,function(b,c,f){n.pcCheck(f,1,1);b=null;if(f[0]instanceof q){if(b=n.fixSpatialReference(g.parseGeometryFromDictionary(f[0]),a.spatialReference),!1===b instanceof d)throw Error("Illegal Parameter");}else b=f[0]instanceof d?p.fromJSON(f[0].toJSON()):n.fixSpatialReference(new d(JSON.parse(f[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return n.fixNullGeometry(b)})};b.extent=function(b,k){return f(b,k,function(f,k,m){m=n.autoCastFeatureToGeometry(m);n.pcCheck(m,1,1);f=null;m[0]instanceof q?f=n.fixSpatialReference(g.parseGeometryFromDictionary(m[0]),b.spatialReference):m[0]instanceof h?(f={xmin:m[0].x,ymin:m[0].y,xmax:m[0].x,ymax:m[0].y,spatialReference:m[0].spatialReference.toJSON()},m[0].hasZ?(f.zmin=m[0].z,f.zmax=m[0].z):m[0].hasM&&(f.mmin=m[0].m,f.mmax=m[0].m),f=p.fromJSON(f)):f=m[0]instanceof c?p.fromJSON(m[0].extent.toJSON()):
m[0]instanceof a?p.fromJSON(m[0].extent.toJSON()):m[0]instanceof d?p.fromJSON(m[0].extent.toJSON()):m[0]instanceof l?p.fromJSON(m[0].toJSON()):n.fixSpatialReference(new l(JSON.parse(m[0])),b.spatialReference);if(null!==f&&!1===f.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return n.fixNullGeometry(f)})};b.geometry=function(a,b){return f(a,b,function(b,c,d){n.pcCheck(d,1,1);b=null;b=d[0]instanceof
g?n.fixSpatialReference(d[0].geometry(),a.spatialReference):d[0]instanceof q?n.fixSpatialReference(g.parseGeometryFromDictionary(d[0]),a.spatialReference):n.fixSpatialReference(p.fromJSON(JSON.parse(d[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return n.fixNullGeometry(b)})};b.setgeometry=function(a,b){return f(a,b,function(a,b,c){n.pcCheck(c,
2,2);if(c[0]instanceof g){if(!0===c[0].immutable)throw Error("Feature is Immutable");if(c[1]instanceof k||null===c[1])c[0]._geometry=c[1];else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return n.voidOperation})};b.feature=function(a,b){return f(a,b,function(b,c,d){if(0===d.length)throw Error("Missing Parameters");b=null;if(1===d.length)if(n.isString(d[0]))b=g.fromJson(JSON.parse(d[0]));else if(d[0]instanceof g)b=g.createFromArcadeFeature(d[0]);else if(d[0]instanceof k)b=
g.createFromGraphicLikeObject(d[0],null,null);else if(d[0]instanceof q)b=d[0].hasField("geometry")?d[0].field("geometry"):null,c=d[0].hasField("attributes")?d[0].field("attributes"):null,null!==b&&b instanceof q&&(b=g.parseGeometryFromDictionary(b)),null!==c&&(c=g.parseAttributesFromDictionary(c)),b=g.createFromGraphicLikeObject(b,c,null);else throw Error("Illegal Argument");else{if(2===d.length){c=b=null;if(null!==d[0])if(d[0]instanceof k)b=d[0];else if(b instanceof q)b=g.parseGeometryFromDictionary(d[0]);
else throw Error("Illegal Argument");if(null!==d[1])if(d[1]instanceof q)c=g.parseAttributesFromDictionary(d[1]);else throw Error("Illegal Argument");}else{b=null;c={};if(null!==d[0])if(d[0]instanceof k)b=d[0];else if(b instanceof q)b=g.parseGeometryFromDictionary(d[0]);else throw Error("Illegal Argument");for(var e=1;e<d.length;e+=2){var f=n.toString(d[e]),h=d[e+1];if(null===h||void 0===h||n.isString(h)||isNaN(h)||n.isDate(h)||n.isNumber(h)||n.isBoolean(h)){if(n.isFunctionParameter(h)||!1===n.isSimpleType(h))throw Error("Illegal Argument");
c[f]=h===n.voidOperation?null:h}else throw Error("Illegal Argument");}}b=g.createFromGraphicLikeObject(b,c,null)}b._geometry=n.fixSpatialReference(b.geometry(),a.spatialReference);b.immutable=!1;return b})};b.dictionary=function(a,b){return f(a,b,function(a,b,c){if(0===c.length)throw Error("Missing Parameters");if(0!==c.length%2)throw Error("Missing Parameters");a={};for(b=0;b<c.length;b+=2){var d=n.toString(c[b]),g=c[b+1];if(null===g||void 0===g||n.isString(g)||isNaN(g)||n.isDate(g)||n.isNumber(g)||
n.isBoolean(g)||n.isArray(g)||n.isImmutableArray(g)){if(n.isFunctionParameter(g))throw Error("Illegal Argument");a[d]=g===n.voidOperation?null:g}else throw Error("Illegal Argument");}c=new q(a);c.immutable=!1;return c})};b.haskey=function(a,b){return f(a,b,function(a,b,c){n.pcCheck(c,2,2);a=n.toString(c[1]);if(c[0]instanceof g||c[0]instanceof q)return c[0].hasField(a);throw Error("Illegal Argument");})};b.indexof=function(a,b){return f(a,b,function(a,b,c){n.pcCheck(c,2,2);a=c[1];if(n.isArray(c[0])){for(b=
0;b<c[0].length;b++)if(n.equalityTest(a,c[0][b]))return b;return-1}if(n.isImmutableArray(c[0])){var d=c[0].length();for(b=0;b<d;b++)if(n.equalityTest(a,c[0].get(b)))return b;return-1}throw Error("Illegal Argument");})}}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u){function v(a){return x?a.clone():u.fromJSON(a.toJSON())}function z(b){return 0===q.version.indexOf("4.")?a.fromExtent(b):new a({spatialReference:b.spatialReference,rings:[[[b.xmin,b.ymin],[b.xmin,b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]]]})}Object.defineProperty(f,"__esModule",{value:!0});var t=null,x=0===q.version.indexOf("4.");f.setGeometryEngine=function(a){t=a};f.registerFunctions=function(b,f){function e(a){n.pcCheck(a,2,2);if(!(a[0]instanceof
d&&a[1]instanceof d||a[0]instanceof d&&null===a[1]||a[1]instanceof d&&null===a[0]||null===a[0]&&null===a[1]))throw Error("Illegal Argument");}b.disjoint=function(a,b){return f(a,b,function(a,b,c){c=n.autoCastFeatureToGeometry(c);e(c);return null===c[0]||null===c[1]?!0:t.disjoint(c[0],c[1])})};b.intersects=function(a,b){return f(a,b,function(a,b,c){c=n.autoCastFeatureToGeometry(c);e(c);return null===c[0]||null===c[1]?!1:t.intersects(c[0],c[1])})};b.touches=function(a,b){return f(a,b,function(a,b,c){c=
n.autoCastFeatureToGeometry(c);e(c);return null===c[0]||null===c[1]?!1:t.touches(c[0],c[1])})};b.crosses=function(a,b){return f(a,b,function(a,b,c){c=n.autoCastFeatureToGeometry(c);e(c);return null===c[0]||null===c[1]?!1:t.crosses(c[0],c[1])})};b.within=function(a,b){return f(a,b,function(a,b,c){c=n.autoCastFeatureToGeometry(c);e(c);return null===c[0]||null===c[1]?!1:t.within(c[0],c[1])})};b.contains=function(a,b){return f(a,b,function(a,b,c){c=n.autoCastFeatureToGeometry(c);e(c);return null===c[0]||
null===c[1]?!1:t.contains(c[0],c[1])})};b.overlaps=function(a,b){return f(a,b,function(a,b,c){c=n.autoCastFeatureToGeometry(c);e(c);return null===c[0]||null===c[1]?!1:t.overlaps(c[0],c[1])})};b.equals=function(a,b){return f(a,b,function(a,b,c){n.pcCheck(c,2,2);return c[0]===c[1]?!0:c[0]instanceof d&&c[1]instanceof d?t.equals(c[0],c[1]):n.isDate(c[0])&&n.isDate(c[1])?c[0].getTime()===c[1].getTime():!1})};b.relate=function(a,b){return f(a,b,function(a,b,c){c=n.autoCastFeatureToGeometry(c);n.pcCheck(c,
3,3);if(c[0]instanceof d&&c[1]instanceof d)return t.relate(c[0],c[1],n.toString(c[2]));if(c[0]instanceof d&&null===c[1]||c[1]instanceof d&&null===c[0]||null===c[0]&&null===c[1])return!1;throw Error("Illegal Argument");})};b.intersection=function(a,b){return f(a,b,function(a,b,c){c=n.autoCastFeatureToGeometry(c);e(c);return null===c[0]||null===c[1]?null:t.intersect(c[0],c[1])})};b.union=function(a,b){return f(a,b,function(b,c,e){e=n.autoCastFeatureToGeometry(e);b=[];if(0===e.length)throw Error("Function called with wrong number of Parameters");
if(1===e.length)if(n.isArray(e[0]))for(e=n.autoCastFeatureToGeometry(e[0]),c=0;c<e.length;c++){if(null!==e[c])if(e[c]instanceof d)b.push(e[c]);else throw Error("Illegal Argument");}else if(n.isImmutableArray(e[0]))for(e=n.autoCastFeatureToGeometry(e[0].toArray()),c=0;c<e.length;c++){if(null!==e[c])if(e[c]instanceof d)b.push(e[c]);else throw Error("Illegal Argument");}else{if(e[0]instanceof d)return n.fixSpatialReference(v(e[0]),a.spatialReference);if(null===e[0])return null;throw Error("Illegal Argument");
}else for(c=0;c<e.length;c++)if(null!==e[c])if(e[c]instanceof d)b.push(e[c]);else throw Error("Illegal Argument");return 0===b.length?null:t.union(b)})};b.difference=function(a,b){return f(a,b,function(a,b,c){c=n.autoCastFeatureToGeometry(c);e(c);return null!==c[0]&&null===c[1]?v(c[0]):null===c[0]?null:t.difference(c[0],c[1])})};b.symmetricdifference=function(a,b){return f(a,b,function(a,b,c){c=n.autoCastFeatureToGeometry(c);e(c);return null===c[0]&&null===c[1]?null:null===c[0]?v(c[1]):null===c[1]?
v(c[0]):t.symmetricDifference(c[0],c[1])})};b.clip=function(a,b){return f(a,b,function(a,b,c){c=n.autoCastFeatureToGeometry(c);n.pcCheck(c,2,2);if(!(c[1]instanceof k)&&null!==c[1])throw Error("Illegal Argument");if(null===c[0])return null;if(!(c[0]instanceof d))throw Error("Illegal Argument");return null===c[1]?null:t.clip(c[0],c[1])})};b.cut=function(a,b){return f(a,b,function(a,b,c){c=n.autoCastFeatureToGeometry(c);n.pcCheck(c,2,2);if(!(c[1]instanceof p)&&null!==c[1])throw Error("Illegal Argument");
if(null===c[0])return[];if(!(c[0]instanceof d))throw Error("Illegal Argument");return null===c[1]?[v(c[0])]:t.cut(c[0],c[1])})};b.area=function(a,b){return f(a,b,function(a,b,c){c=n.autoCastFeatureToGeometry(c);n.pcCheck(c,1,2);if(null===c[0])return 0;if(!(c[0]instanceof d))throw Error("Illegal Argument");return t.planarArea(c[0],g.convertSquareUnitsToCode(n.defaultUndefined(c[1],-1)))})};b.areageodetic=function(a,b){return f(a,b,function(a,b,c){c=n.autoCastFeatureToGeometry(c);n.pcCheck(c,1,2);if(null===
c[0])return 0;if(!(c[0]instanceof d))throw Error("Illegal Argument");return t.geodesicArea(c[0],g.convertSquareUnitsToCode(n.defaultUndefined(c[1],-1)))})};b.length=function(a,b){return f(a,b,function(a,b,c){c=n.autoCastFeatureToGeometry(c);n.pcCheck(c,1,2);if(null===c[0])return 0;if(!(c[0]instanceof d))throw Error("Illegal Argument");return t.planarLength(c[0],g.convertLinearUnitsToCode(n.defaultUndefined(c[1],-1)))})};b.lengthgeodetic=function(a,b){return f(a,b,function(a,b,c){c=n.autoCastFeatureToGeometry(c);
n.pcCheck(c,1,2);if(null===c[0])return 0;if(!(c[0]instanceof d))throw Error("Illegal Argument");return t.geodesicLength(c[0],g.convertLinearUnitsToCode(n.defaultUndefined(c[1],-1)))})};b.distance=function(a,b){return f(a,b,function(a,b,c){c=n.autoCastFeatureToGeometry(c);n.pcCheck(c,2,3);if(!(c[0]instanceof d))throw Error("Illegal Argument");if(!(c[1]instanceof d))throw Error("Illegal Argument");return t.distance(c[0],c[1],g.convertLinearUnitsToCode(n.defaultUndefined(c[2],-1)))})};b.densify=function(b,
c){return f(b,c,function(b,c,e){e=n.autoCastFeatureToGeometry(e);n.pcCheck(e,2,3);if(null===e[0])return null;if(!(e[0]instanceof d))throw Error("Illegal Argument");b=n.toNumber(e[1]);if(isNaN(b))throw Error("Illegal Argument");if(0>=b)throw Error("Illegal Argument");return e[0]instanceof a||e[0]instanceof p?t.densify(e[0],b,g.convertLinearUnitsToCode(n.defaultUndefined(e[2],-1))):e[0]instanceof k?t.densify(z(e[0]),b,g.convertLinearUnitsToCode(n.defaultUndefined(e[2],-1))):e[0]})};b.densifygeodetic=
function(b,c){return f(b,c,function(b,c,e){e=n.autoCastFeatureToGeometry(e);n.pcCheck(e,2,3);if(null===e[0])return null;if(!(e[0]instanceof d))throw Error("Illegal Argument");b=n.toNumber(e[1]);if(isNaN(b))throw Error("Illegal Argument");if(0>=b)throw Error("Illegal Argument");return e[0]instanceof a||e[0]instanceof p?t.geodesicDensify(e[0],b,g.convertLinearUnitsToCode(n.defaultUndefined(e[2],-1))):e[0]instanceof k?t.geodesicDensify(z(e[0]),b,g.convertLinearUnitsToCode(n.defaultUndefined(e[2],-1))):
e[0]})};b.generalize=function(a,b){return f(a,b,function(a,b,c){c=n.autoCastFeatureToGeometry(c);n.pcCheck(c,2,4);if(null===c[0])return null;if(!(c[0]instanceof d))throw Error("Illegal Argument");a=n.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return t.generalize(c[0],a,n.toBoolean(n.defaultUndefined(c[2],!0)),g.convertLinearUnitsToCode(n.defaultUndefined(c[3],-1)))})};b.buffer=function(a,b){return f(a,b,function(a,b,c){c=n.autoCastFeatureToGeometry(c);n.pcCheck(c,2,3);if(null===c[0])return null;
if(!(c[0]instanceof d))throw Error("Illegal Argument");a=n.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===a?v(c[0]):t.buffer(c[0],a,g.convertLinearUnitsToCode(n.defaultUndefined(c[2],-1)))})};b.buffergeodetic=function(a,b){return f(a,b,function(a,b,c){c=n.autoCastFeatureToGeometry(c);n.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof d))throw Error("Illegal Argument");a=n.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===a?v(c[0]):t.geodesicBuffer(c[0],
a,g.convertLinearUnitsToCode(n.defaultUndefined(c[2],-1)))})};b.offset=function(b,c){return f(b,c,function(b,c,d){d=n.autoCastFeatureToGeometry(d);n.pcCheck(d,2,6);if(null===d[0])return null;if(!(d[0]instanceof a||d[0]instanceof p))throw Error("Illegal Argument");b=n.toNumber(d[1]);if(isNaN(b))throw Error("Illegal Argument");c=n.toNumber(n.defaultUndefined(d[4],10));if(isNaN(c))throw Error("Illegal Argument");var e=n.toNumber(n.defaultUndefined(d[5],0));if(isNaN(e))throw Error("Illegal Argument");
return t.offset(d[0],b,g.convertLinearUnitsToCode(n.defaultUndefined(d[2],-1)),n.toString(n.defaultUndefined(d[3],"round")).toLowerCase(),c,e)})};b.rotate=function(b,e){return f(b,e,function(b,e,g){g=n.autoCastFeatureToGeometry(g);n.pcCheck(g,2,3);b=g[0];if(null===b)return null;if(!(b instanceof d))throw Error("Illegal Argument");b instanceof k&&(b=a.fromExtent(b));e=n.toNumber(g[1]);if(isNaN(e))throw Error("Illegal Argument");g=n.defaultUndefined(g[2],null);if(null===g)return t.rotate(b,e);if(g instanceof
c)return t.rotate(b,e,g);throw Error("Illegal Argument");})};b.centroid=function(b,e){return f(b,e,function(e,g,f){f=n.autoCastFeatureToGeometry(f);n.pcCheck(f,1,1);if(null===f[0])return null;if(!(f[0]instanceof d))throw Error("Illegal Argument");return f[0]instanceof c?n.fixSpatialReference(v(f[0]),b.spatialReference):f[0]instanceof a?x?f[0].centroid:f[0].getCentroid():f[0]instanceof p?l.centroidPolyline(f[0]):f[0]instanceof h?l.centroidMultiPoint(f[0]):f[0]instanceof k?x?f[0].center:f[0].getExtent().getCenter():
null})};b.multiparttosinglepart=function(b,e){return f(b,e,function(e,g,f){f=n.autoCastFeatureToGeometry(f);n.pcCheck(f,1,1);g=[];if(null===f[0])return null;if(!(f[0]instanceof d))throw Error("Illegal Argument");if(f[0]instanceof c||f[0]instanceof k)return[n.fixSpatialReference(v(f[0]),b.spatialReference)];e=t.simplify(f[0]);if(e instanceof a){g=[];var m=[];for(f=0;f<e.rings.length;f++)if(e.isClockwise(e.rings[f])){var l=u.fromJSON({rings:[e.rings[f]],hasZ:x?e.hasZ:!1,hasM:x?e.hasM:!1,spatialReference:x?
e.spatialReference.toJSON():e.spatialReference.toJson()});g.push(l)}else m.push({ring:e.rings[f],pt:e.getPoint(f,0)});for(e=0;e<m.length;e++)for(f=0;f<g.length;f++)if(g[f].contains(m[e].pt)){g[f].addRing(m[e].ring);break}return g}if(e instanceof p){g=[];for(f=0;f<e.paths.length;f++)m=u.fromJSON({paths:[e.paths[f]],hasZ:x?e.hasZ:!1,hasM:x?e.hasM:!1,spatialReference:x?e.spatialReference.toJSON():e.spatialReference.toJson()}),g.push(m);return g}if(f[0]instanceof h){e=n.fixSpatialReference(v(f[0]),b.spatialReference);
for(f=0;f<e.points.length;f++)g.push(e.getPoint(f));return g}return null})};b.issimple=function(a,b){return f(a,b,function(a,b,c){c=n.autoCastFeatureToGeometry(c);n.pcCheck(c,1,1);if(null===c[0])return!0;if(c[0]instanceof d)return t.isSimple(c[0]);throw Error("Illegal Argument");})};b.simplify=function(a,b){return f(a,b,function(a,b,c){c=n.autoCastFeatureToGeometry(c);n.pcCheck(c,1,1);if(null===c[0])return null;if(c[0]instanceof d)return t.simplify(c[0]);throw Error("Illegal Argument");})}}})},"esri/arcade/kernel":function(){define(["require",
"exports","../geometry/Extent"],function(b,f,q){Object.defineProperty(f,"__esModule",{value:!0});f.errback=function(b){return function(g){b.reject(g)}};f.callback=function(b,f){return function(){try{b.apply(null,arguments)}catch(l){f.reject(l)}}};f.convertSquareUnitsToCode=function(b){if(void 0===b)return null;if("number"===typeof b)return b;switch(b.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square_meters":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 109413;
case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 109405}return null};
f.shapeExtent=function(b){if(null===b)return null;switch(b.type){case "polygon":case "multipoint":case "polyline":return b.extent;case "point":return new q({xmin:b.x,ymin:b.y,xmax:b.x,ymax:b.y,spatialReference:b.spatialReference});case "extent":return b}return null};f.convertLinearUnitsToCode=function(b){if(void 0===b)return null;if("number"===typeof b||"number"===typeof b)return b;switch(b.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 9002}return null};
f.sameGeomType=function(b,f){return b===f||"point"===b&&"esriGeometryPoint"===f||"polyline"===b&&"esriGeometryPolyline"===f||"polygon"===b&&"esriGeometryPolygon"===f||"extent"===b&&"esriGeometryEnvelope"===f||"multipoint"===b&&"esriGeometryMultipoint"===f||"point"===f&&"esriGeometryPoint"===b||"polyline"===f&&"esriGeometryPolyline"===b||"polygon"===f&&"esriGeometryPolygon"===b||"extent"===f&&"esriGeometryEnvelope"===b||"multipoint"===f&&"esriGeometryMultipoint"===b?!0:!1}})},"esri/arcade/functions/centroid":function(){define(["require",
"exports","../../kernel","../../geometry/Point"],function(b,f,q,g){function n(b,g,c){var a={x:0,y:0};g&&(a.z=0);c&&(a.m=0);for(var d=0,f=b[0],h=0;h<b.length;h++){var k=b[h],n;a:if(k.length!==f.length)n=!1;else{for(n=0;n<k.length;n++)if(k[n]!==f[n]){n=!1;break a}n=!0}if(!1===n){n=l(f,k,g);var q=k,r=g,m=c,e={x:(f[0]+q[0])/2,y:(f[1]+q[1])/2};r&&(e.z=(f[2]+q[2])/2);r&&m?e.m=(f[3]+q[3])/2:m&&(e.m=(f[2]+q[2])/2);f=e;f.x*=n;f.y*=n;a.x+=f.x;a.y+=f.y;g&&(f.z*=n,a.z+=f.z);c&&(f.m*=n,a.m+=f.m);d+=n;f=k}}0<d?
(a.x/=d,a.y/=d,g&&(a.z/=d),c&&(a.m/=d)):(a.x=b[0][0],a.y=b[0][1],g&&(a.z=b[0][2]),c&&g?a.m=b[0][3]:c&&(a.m=b[0][2]));return a}function l(b,g,c){var a=g[0]-b[0];b=g[1]-b[1];return c?(g=g[2]-g[2],Math.sqrt(a*a+b*b+g*g)):Math.sqrt(a*a+b*b)}Object.defineProperty(f,"__esModule",{value:!0});var k=0===q.version.indexOf("4.");f.centroidPolyline=function(b){for(var d={x:0,y:0,spatialReference:k?b.spatialReference.toJSON():b.spatialReference.toJson()},c={x:0,y:0,spatialReference:k?b.spatialReference.toJSON():
b.spatialReference.toJson()},a=0,f=0,q=0;q<b.paths.length;q++)if(0!==b.paths[q].length){var v;v=b.paths[q];var z=!0===b.hasZ;if(1>=v.length)v=0;else{for(var t=0,x=1;x<v.length;x++)t+=l(v[x-1],v[x],z);v=t}0===v?(z=n(b.paths[q],!0===b.hasZ,!0===b.hasM),d.x+=z.x,d.y+=z.y,!0===b.hasZ&&(d.z+=z.z),!0===b.hasM&&(d.m+=z.m),++a):(z=n(b.paths[q],!0===b.hasZ,!0===b.hasM),c.x+=z.x*v,c.y+=z.y*v,!0===b.hasZ&&(c.z+=z.z*v),!0===b.hasM&&(c.m+=z.m*v),f+=v)}return 0<f?(c.x/=f,c.y/=f,!0===b.hasZ&&(c.z/=f),!0===b.hasM&&
(c.m/=f),new g(c)):0<a?(d.x/=a,d.y/=a,!0===b.hasZ&&(c.z/=a),!0===b.hasM&&(d.m/=a),new g(d)):null};f.centroidMultiPoint=function(b){if(0===b.points.length)return null;for(var d=0,c=0,a=0,f=0,l=0;l<b.points.length;l++){var n=b.getPoint(l);!0===n.hasZ&&(a+=n.z);!0===n.hasM&&(f+=n.m);d+=n.x;c+=n.y;f+=n.m}d={x:d/b.points.length,y:c/b.points.length,spatialReference:null};d.spatialReference=k?b.spatialReference.toJSON():b.spatialReference.toJson();!0===b.hasZ&&(d.z=a/b.points.length);!0===b.hasM&&(d.m=f/
b.points.length);return new g(d)}})},"esri/arcade/functions/maths":function(){define(["require","exports","dojo/number","../languageUtils"],function(b,f,q,g){function n(b,g,d){if("undefined"===typeof d||0===+d)return Math[b](g);g=+g;d=+d;if(isNaN(g)||"number"!==typeof d||0!==d%1)return NaN;g=g.toString().split("e");g=Math[b](+(g[0]+"e"+(g[1]?+g[1]-d:-d)));g=g.toString().split("e");return+(g[0]+"e"+(g[1]?+g[1]+d:d))}Object.defineProperty(f,"__esModule",{value:!0});f.registerFunctions=function(b,f){function d(b,
c,a){b=g.toNumber(b);return isNaN(b)?b:isNaN(c)||isNaN(a)||c>a?NaN:b<c?c:b>a?a:b}b.number=function(b,c){return f(b,c,function(a,b,c){g.pcCheck(c,1,2);a=c[0];return g.isNumber(a)?a:null===a?0:g.isDate(a)||g.isBoolean(a)?Number(a):g.isArray(a)?NaN:""===a||void 0===a?Number(a):g.isString(a)?void 0!==c[1]?(c=g.multiReplace(c[1],"\u2030",""),c=g.multiReplace(c,"\u00a4",""),q.parse(a,{pattern:c})):Number(a.trim()):Number(a)})};b.abs=function(b,c){return f(b,c,function(a,b,c){g.pcCheck(c,1,1);return Math.abs(g.toNumber(c[0]))})};
b.acos=function(b,c){return f(b,c,function(a,b,c){g.pcCheck(c,1,1);return Math.acos(g.toNumber(c[0]))})};b.asin=function(b,c){return f(b,c,function(a,b,c){g.pcCheck(c,1,1);return Math.asin(g.toNumber(c[0]))})};b.atan=function(b,c){return f(b,c,function(a,b,c){g.pcCheck(c,1,1);return Math.atan(g.toNumber(c[0]))})};b.atan2=function(b,c){return f(b,c,function(a,b,c){g.pcCheck(c,2,2);return Math.atan2(g.toNumber(c[0]),g.toNumber(c[1]))})};b.ceil=function(b,c){return f(b,c,function(a,b,c){g.pcCheck(c,
1,2);return 2===c.length?(a=g.toNumber(c[1]),isNaN(a)&&(a=0),n("ceil",g.toNumber(c[0]),-1*a)):Math.ceil(g.toNumber(c[0]))})};b.round=function(b,c){return f(b,c,function(a,b,c){g.pcCheck(c,1,2);return 2===c.length?(a=g.toNumber(c[1]),isNaN(a)&&(a=0),n("round",g.toNumber(c[0]),-1*a)):Math.round(g.toNumber(c[0]))})};b.floor=function(b,c){return f(b,c,function(a,b,c){g.pcCheck(c,1,2);return 2===c.length?(a=g.toNumber(c[1]),isNaN(a)&&(a=0),n("floor",g.toNumber(c[0]),-1*a)):Math.floor(g.toNumber(c[0]))})};
b.cos=function(b,c){return f(b,c,function(a,b,c){g.pcCheck(c,1,1);return Math.cos(g.toNumber(c[0]))})};b.isnan=function(b,c){return f(b,c,function(a,b,c){g.pcCheck(c,1,1);return"number"===typeof c[0]&&isNaN(c[0])})};b.exp=function(b,c){return f(b,c,function(a,b,c){g.pcCheck(c,1,1);return Math.exp(g.toNumber(c[0]))})};b.log=function(b,c){return f(b,c,function(a,b,c){g.pcCheck(c,1,1);return Math.log(g.toNumber(c[0]))})};b.pow=function(b,c){return f(b,c,function(a,b,c){g.pcCheck(c,2,2);return Math.pow(g.toNumber(c[0]),
g.toNumber(c[1]))})};b.random=function(b,c){return f(b,c,function(a,b,c){g.pcCheck(c,0,0);return Math.random()})};b.sin=function(b,c){return f(b,c,function(a,b,c){g.pcCheck(c,1,1);return Math.sin(g.toNumber(c[0]))})};b.sqrt=function(b,c){return f(b,c,function(a,b,c){g.pcCheck(c,1,1);return Math.sqrt(g.toNumber(c[0]))})};b.tan=function(b,c){return f(b,c,function(a,b,c){g.pcCheck(c,1,1);return Math.tan(g.toNumber(c[0]))})};b.defaultvalue=function(b,c){return f(b,c,function(a,b,c){g.pcCheck(c,2,2);return null===
c[0]||""===c[0]||void 0===c[0]?c[1]:c[0]})};b.isempty=function(b,c){return f(b,c,function(a,b,c){g.pcCheck(c,1,1);return null===c[0]||""===c[0]||void 0===c[0]?!0:!1})};b["boolean"]=function(b,c){return f(b,c,function(a,b,c){g.pcCheck(c,1,1);return g.toBoolean(c[0])})};b.constrain=function(b,c){return f(b,c,function(a,b,c){g.pcCheck(c,3,3);a=g.toNumber(c[1]);b=g.toNumber(c[2]);if(g.isArray(c[0])){var f=[],h=0;for(c=c[0];h<c.length;h++)f.push(d(c[h],a,b));return f}if(g.isImmutableArray(c[0])){f=[];
for(h=0;h<c[0].length();h++)f.push(d(c[0].get(h),a,b));return f}return d(c[0],a,b)})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(b,f,q,g){function n(b,f,d,h){if(1===h.length){if(q.isArray(h[0]))return g.calculateStat(b,h[0],-1);if(q.isImmutableArray(h[0]))return g.calculateStat(b,h[0].toArray(),-1)}return g.calculateStat(b,h,-1)}Object.defineProperty(f,"__esModule",{value:!0});f.registerFunctions=function(b,g){b.stdev=function(b,
f){return g(b,f,function(b,a,d){return n("stdev",b,a,d)})};b.variance=function(b,f){return g(b,f,function(b,a,d){return n("variance",b,a,d)})};b.average=function(b,f){return g(b,f,function(b,a,d){return n("mean",b,a,d)})};b.mean=function(b,f){return g(b,f,function(b,a,d){return n("mean",b,a,d)})};b.sum=function(b,f){return g(b,f,function(b,a,d){return n("sum",b,a,d)})};b.min=function(b,f){return g(b,f,function(b,a,d){return n("min",b,a,d)})};b.max=function(b,f){return g(b,f,function(b,a,d){return n("max",
b,a,d)})};b.distinct=function(b,f){return g(b,f,function(b,a,d){return n("distinct",b,a,d)})};b.count=function(b,f){return g(b,f,function(b,a,d){q.pcCheck(d,1,1);if(q.isArray(d[0])||q.isString(d[0]))return d[0].length;if(q.isImmutableArray(d[0]))return d[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(b,f,q){function g(b){for(var g=0,d=0;d<b.length;d++)g+=b[d];return g/b.length}function n(b){for(var f=
g(b),d=0,h=0;h<b.length;h++)d+=Math.pow(f-b[h],2);return d/b.length}Object.defineProperty(f,"__esModule",{value:!0});f.decodeStatType=function(b){switch(b.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};f.calculateStat=function(b,f,d){void 0===d&&(d=1E3);switch(b.toLowerCase()){case "distinct":a:{b=
d;d=[];for(var h={},c=[],a=0;a<f.length;a++){if(void 0!==f[a]&&null!==f[a]&&f[a]!==q.voidOperation){var p=f[a];if(q.isNumber(p)||q.isString(p))void 0===h[p]&&(d.push(p),h[p]=1);else{for(var k=!1,l=0;l<c.length;l++)!0===q.equalityTest(c[l],p)&&(k=!0);!1===k&&(c.push(p),d.push(p))}}if(d.length>=b&&-1!==b){f=d;break a}}f=d}return f;case "avg":case "mean":return g(q.toNumberArray(f));case "min":return Math.min.apply(Math,q.toNumberArray(f));case "sum":f=q.toNumberArray(f);for(d=b=0;d<f.length;d++)b+=
f[d];return b;case "max":return Math.max.apply(Math,q.toNumberArray(f));case "stdev":case "stddev":return Math.sqrt(n(q.toNumberArray(f)));case "var":case "variance":return n(q.toNumberArray(f));case "count":return f.length}return 0}})},"esri/arcade/functions/string":function(){define(["require","exports","../Feature","../languageUtils"],function(b,f,q,g){Object.defineProperty(f,"__esModule",{value:!0});f.registerFunctions=function(b,f){b.trim=function(b,d){return f(b,d,function(b,c,a){g.pcCheck(a,
1,1);return g.toString(a[0]).trim()})};b.upper=function(b,d){return f(b,d,function(b,c,a){g.pcCheck(a,1,1);return g.toString(a[0]).toUpperCase()})};b.proper=function(b,d){return f(b,d,function(b,c,a){g.pcCheck(a,1,2);b=1;2===a.length&&"firstword"===g.toString(a[1]).toLowerCase()&&(b=2);c=/\s/;a=g.toString(a[0]);for(var d="",f=!0,h=0;h<a.length;h++){var k=a[h];c.test(k)?1===b&&(f=!0):k.toUpperCase()!==k.toLowerCase()&&(f?(k=k.toUpperCase(),f=!1):k=k.toLowerCase());d+=k}return d})};b.lower=function(b,
d){return f(b,d,function(b,c,a){g.pcCheck(a,1,1);return g.toString(a[0]).toLowerCase()})};b.guid=function(b,d){return f(b,d,function(b,c,a){g.pcCheck(a,0,1);if(0<a.length)switch(g.toString(a[0]).toLowerCase()){case "digits":return g.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return g.generateUUID();case "digits-hyphen-parentheses":return"("+g.generateUUID()+")"}return"{"+g.generateUUID()+"}"})};b.console=function(b,d){return f(b,d,function(d,
c,a){0!==a.length&&(1===a.length?b.console(g.toString(a[0])):b.console(g.toString(a)));return g.voidOperation})};b.mid=function(b,d){return f(b,d,function(b,c,a){g.pcCheck(a,2,3);b=g.toNumber(a[1]);if(isNaN(b))return"";0>b&&(b=0);if(2===a.length)return g.toString(a[0]).substr(b);c=g.toNumber(a[2]);if(isNaN(c))return"";0>c&&(c=0);return g.toString(a[0]).substr(b,c)})};b.find=function(b,d){return f(b,d,function(b,c,a){g.pcCheck(a,2,3);b=0;if(2<a.length){b=g.toNumber(g.defaultUndefined(a[2],0));if(isNaN(b))return-1;
0>b&&(b=0)}return g.toString(a[1]).indexOf(g.toString(a[0]),b)})};b.left=function(b,d){return f(b,d,function(b,c,a){g.pcCheck(a,2,2);b=g.toNumber(a[1]);if(isNaN(b))return"";0>b&&(b=0);return g.toString(a[0]).substr(0,b)})};b.right=function(b,d){return f(b,d,function(b,c,a){g.pcCheck(a,2,2);b=g.toNumber(a[1]);if(isNaN(b))return"";0>b&&(b=0);return g.toString(a[0]).substr(-1*b,b)})};b.split=function(b,d){return f(b,d,function(b,c,a){g.pcCheck(a,2,4);b=g.toNumber(g.defaultUndefined(a[2],-1));c=g.toBoolean(g.defaultUndefined(a[3],
!1));-1===b||null===b||!0===c?a=g.toString(a[0]).split(g.toString(a[1])):(isNaN(b)&&(b=-1),-1>b&&(b=-1),a=g.toString(a[0]).split(g.toString(a[1]),b));if(!1===c)return a;c=[];for(var d=0;d<a.length&&!(-1!==b&&c.length>=b);d++)""!==a[d]&&void 0!==a[d]&&c.push(a[d]);return c})};b.text=function(b,d){return f(b,d,function(b,c,a){g.pcCheck(a,1,2);return g.toStringExplicit(a[0],a[1])})};b.concatenate=function(b,d){return f(b,d,function(b,c,a){b=[];if(1>a.length)return"";if(g.isArray(a[0])){c=g.defaultUndefined(a[2],
"");for(var d=0;d<a[0].length;d++)b[d]=g.toStringExplicit(a[0][d],c);return 1<a.length?b.join(a[1]):b.join("")}if(g.isImmutableArray(a[0])){c=g.defaultUndefined(a[2],"");for(d=0;d<a[0].length();d++)b[d]=g.toStringExplicit(a[0].get(d),c);return 1<a.length?b.join(a[1]):b.join("")}for(d=0;d<a.length;d++)b[d]=g.toStringExplicit(a[d]);return b.join("")})};b.reverse=function(b,d){return f(b,d,function(b,c,a){g.pcCheck(a,1,1);if(g.isArray(a[0]))return b=a[0].slice(0),b.reverse(),b;if(g.isImmutableArray(a[0]))return b=
a[0].toArray().slice(0),b.reverse(),b;throw Error("Invalid Parameter");})};b.replace=function(b,d){return f(b,d,function(b,c,a){g.pcCheck(a,3,4);b=g.toString(a[0]);c=g.toString(a[1]);var d=g.toString(a[2]);return(4===a.length?g.toBoolean(a[3]):1)?g.multiReplace(b,c,d):b.replace(c,d)})};b.domainname=function(b,d){return f(b,d,function(b,c,a){g.pcCheck(a,2,4);if(a[0]instanceof q)return a[0].domainValueLookup(g.toString(a[1]),a[2],void 0===a[3]?void 0:g.toNumber(a[3]));throw Error("Invalid Parameter");
})};b.domaincode=function(b,d){return f(b,d,function(b,c,a){g.pcCheck(a,3,4);if(a[0]instanceof q)return a[0].domainCodeLookup(g.toString(a[1]),a[2],void 0===a[3]?void 0:g.toNumber(a[3]));throw Error("Invalid Parameter");})}}})},"esri/arcade/arcadeRuntime":function(){define("require exports ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z,t,x,r,m,e,w,y){function A(a,b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(B(a,b.arguments[d]));return c}function D(a,b,c){try{return c(a,b,A(a,b))}catch(ma){throw ma;}}function B(a,b){try{switch(b.type){case "EmptyStatement":return d.voidOperation;case "VariableDeclarator":var c=null===b.init?null:B(a,b.init);c===d.voidOperation&&(c=null);var e=b.id.name.toLowerCase();null!==a.localScope?a.localScope[e]={value:c,valueset:!0,node:b.init}:a.globalScope[e]=
{value:c,valueset:!0,node:b.init};return d.voidOperation;case "VariableDeclaration":for(var f=0;f<b.declarations.length;f++)B(a,b.declarations[f]);return d.voidOperation;case "BlockStatement":var p;a:{for(var m=d.voidOperation,f=0;f<b.body.length;f++)if(m=B(a,b.body[f]),m instanceof d.ReturnResult||m===d.breakResult||m===d.continueResult){p=m;break a}p=m}return p;case "FunctionDeclaration":var k=b.id.name.toLowerCase();a.globalScope[k]={valueset:!0,node:null,value:new n(b,a)};return d.voidOperation;
case "ReturnStatement":var l;if(null===b.argument)l=new d.ReturnResult(d.voidOperation);else{var r=B(a,b.argument);l=new d.ReturnResult(r)}return l;case "IfStatement":var t;if("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)throw Error(h.nodeErrorMessage(b.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var v=B(a,b.test);if(!0===v)t=B(a,b.consequent);else if(!1===v)t=null!==b.alternate?B(a,b.alternate):d.voidOperation;else throw Error(h.nodeErrorMessage(b,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));
return t;case "ExpressionStatement":var u;if("AssignmentExpression"===b.expression.type||"UpdateExpression"===b.expression.type)u=B(a,b.expression);else{var z=B(a,b.expression);u=z===d.voidOperation?d.voidOperation:new d.ImplicitResult(z)}return u;case "AssignmentExpression":var w;var x=B(a,b.right),f=null,y="";if("MemberExpression"===b.left.type){f=B(a,b.left.object);y=!0===b.left.computed?B(a,b.left.property):b.left.property.name;if(d.isArray(f))if(d.isNumber(y)){0>y&&(y=f.length+y);if(0>y||y>f.length)throw Error("Assignment outside of array bounds");
if(y===f.length&&"\x3d"!==b.operator)throw Error("Invalid Parameter");f[y]=C(x,b.operator,f[y],b)}else throw Error("Invalid Parameter");else if(f instanceof q){if(!1===d.isString(y))throw Error("Dictionary accessor must be a string");if(!0===f.hasField(y))f.setField(y,C(x,b.operator,f.field(y),b));else{if("\x3d"!==b.operator)throw Error("Invalid Parameter");f.setField(y,C(x,b.operator,null,b))}}else if(f instanceof g){if(!1===d.isString(y))throw Error("Feature accessor must be a string");if(!0===
f.hasField(y))f.setField(y,C(x,b.operator,f.field(y),b));else{if("\x3d"!==b.operator)throw Error("Invalid Parameter");f.setField(y,C(x,b.operator,null,b))}}else{if(d.isImmutableArray(f))throw Error("Array is Immutable");throw Error("Invalid Parameter");}w=d.voidOperation}else if(f=b.left.name.toLowerCase(),null!==a.localScope&&void 0!==a.localScope[f])a.localScope[f]={value:C(x,b.operator,a.localScope[f].value,b),valueset:!0,node:b.right},w=d.voidOperation;else if(void 0!==a.globalScope[f])a.globalScope[f]=
{value:C(x,b.operator,a.globalScope[f].value,b),valueset:!0,node:b.right},w=d.voidOperation;else throw Error("Variable not recognised");return w;case "UpdateExpression":var A;var G,f=null,y="";if("MemberExpression"===b.argument.type){f=B(a,b.argument.object);y=!0===b.argument.computed?B(a,b.argument.property):b.argument.property.name;if(d.isArray(f))if(d.isNumber(y)){0>y&&(y=f.length+y);if(0>y||y>=f.length)throw Error("Assignment outside of array bounds");G=d.toNumber(f[y]);f[y]="++"===b.operator?
G+1:G-1}else throw Error("Invalid Parameter");else if(f instanceof q){if(!1===d.isString(y))throw Error("Dictionary accessor must be a string");if(!0===f.hasField(y))G=d.toNumber(f.field(y)),f.setField(y,"++"===b.operator?G+1:G-1);else throw Error("Invalid Parameter");}else if(f instanceof g){if(!1===d.isString(y))throw Error("Feature accessor must be a string");if(!0===f.hasField(y))G=d.toNumber(f.field(y)),f.setField(y,"++"===b.operator?G+1:G-1);else throw Error("Invalid Parameter");}else{if(d.isImmutableArray(f))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}A=!1===b.prefix?G:"++"===b.operator?G+1:G-1}else if(f=b.argument.name.toLowerCase(),null!==a.localScope&&void 0!==a.localScope[f])G=d.toNumber(a.localScope[f].value),a.localScope[f]={value:"++"===b.operator?G+1:G-1,valueset:!0,node:b},A=!1===b.prefix?G:"++"===b.operator?G+1:G-1;else if(void 0!==a.globalScope[f])G=d.toNumber(a.globalScope[f].value),a.globalScope[f]={value:"++"===b.operator?G+1:G-1,valueset:!0,node:b},A=!1===b.prefix?G:"++"===b.operator?G+1:G-1;else throw Error("Variable not recognised");
return A;case "BreakStatement":return d.breakResult;case "ContinueStatement":return d.continueResult;case "ForStatement":null!==b.init&&B(a,b.init);y={testResult:!0,lastAction:d.voidOperation};do b:{w=a;x=b;A=y;if(null!==x.test){A.testResult=B(w,x.test);if(!1===A.testResult)break b;if(!0!==A.testResult)throw Error(h.nodeErrorMessage(x,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}A.lastAction=B(w,x.body);A.lastAction===d.breakResult?A.testResult=!1:A.lastAction instanceof d.ReturnResult?A.testResult=
!1:null!==x.update&&B(w,x.update)}while(!0===y.testResult);f=y.lastAction instanceof d.ReturnResult?y.lastAction:d.voidOperation;return f;case "ForInStatement":return F(a,b);case "Identifier":return ba(a,b);case "MemberExpression":return W(a,b);case "Literal":return b.value;case "ThisExpression":throw Error(h.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "CallExpression":return J(a,b);case "UnaryExpression":return fa(a,b);case "BinaryExpression":return V(a,b);case "LogicalExpression":return H(a,
b);case "ConditionalExpression":throw Error(h.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(f=[],y=0;y<b.elements.length;y++){var D=B(a,b.elements[y]);if(d.isFunctionParameter(D))throw Error(h.nodeErrorMessage(b,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));D===d.voidOperation?f.push(null):f.push(D)}}catch(Qa){throw Qa;}return f;case "ObjectExpression":f={};for(y=0;y<b.properties.length;y++){var ga=B(a,b.properties[y]);if(d.isFunctionParameter(ga.value))throw Error("Illegal Argument");
if(!1===d.isString(ga.key))throw Error("Illegal Argument");f[ga.key.toString()]=ga.value===d.voidOperation?null:ga.value}var ea=new q(f);ea.immutable=!1;return ea;case "Property":return{key:"Identifier"===b.key.type?b.key.name:B(a,b.key),value:B(a,b.value)};case "Array":throw Error(h.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));default:throw Error(h.nodeErrorMessage(b,"RUNTIME","UNREOGNISED"));}}catch(Qa){throw Qa;}}function F(a,b){var c=B(a,b.right);"VariableDeclaration"===b.left.type&&B(a,b.left);
var e=null,f="VariableDeclaration"===b.left.type?b.left.declarations[0].id.name:b.left.name;null!==a.localScope&&void 0!==a.localScope[f]&&(e=a.localScope[f]);null===e&&void 0!==a.globalScope[f]&&(e=a.globalScope[f]);if(null===e)throw Error(h.nodeErrorMessage(b,"RUNTIME","VARIABLENOTDECLARED"));if(d.isArray(c)||d.isString(c)){for(var c=c.length,p=0;p<c&&(e.value=p,f=B(a,b.body),f!==d.breakResult);p++)if(f instanceof d.ReturnResult)return f;return d.voidOperation}if(d.isImmutableArray(c)){for(p=0;p<
c.length()&&(e.value=p,f=B(a,b.body),f!==d.breakResult);p++)if(f instanceof d.ReturnResult)return f;return d.voidOperation}if(c instanceof q||c instanceof g)for(c=c.keys(),p=0;p<c.length&&(e.value=c[p],f=B(a,b.body),f!==d.breakResult);p++){if(f instanceof d.ReturnResult)return f}else return d.voidOperation}function C(a,b,c,e){switch(b){case "\x3d":return a===d.voidOperation?null:a;case "/\x3d":return d.toNumber(c)/d.toNumber(a);case "*\x3d":return d.toNumber(c)*d.toNumber(a);case "-\x3d":return d.toNumber(c)-
d.toNumber(a);case "+\x3d":return d.isString(c)||d.isString(a)?d.toString(c)+d.toString(a):d.toNumber(c)+d.toNumber(a);case "%\x3d":return d.toNumber(c)%d.toNumber(a);default:throw Error(h.nodeErrorMessage(e,"RUNTIME","OPERATORNOTRECOGNISED"));}}function G(a,b,c,e){b=b.toLowerCase();switch(b){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return b=a.spatialReference._arcadeCacheId,void 0===b&&(c=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&
(c=!1),c&&(Q++,b=a.spatialReference._arcadeCacheId=Q)),a=new q({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==b&&(a._arcadeCacheId="SPREF"+b.toString()),a}switch(a.type){case "extent":switch(b){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[b],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(b){case "rings":return b=d.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===
b&&(Q++,b=Q,d.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",b)),a=new l(a.rings,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polygon"}break;case "point":switch(b){case "x":case "y":case "z":case "m":return void 0!==a[b]?a[b]:null;case "type":return"Point"}break;case "polyline":switch(b){case "paths":return b=d.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===b&&(Q++,b=Q,d.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",
b)),a=new l(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polyline"}break;case "multipoint":switch(b){case "points":return b=d.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===b&&(Q++,b=Q,d.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",b)),a=new k(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,b,1);case "type":return"Multipoint"}}throw Error(h.nodeErrorMessage(e,"RUNTIME","PROPERTYNOTFOUND"));}function W(a,b){try{var c=
B(a,b.object);if(null===c)throw Error(h.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));if(!1===b.computed){if(c instanceof q||c instanceof g)return c.field(b.property.name);if(c instanceof x)return G(c,b.property.name,a,b);throw Error(h.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}var e=B(a,b.property);if(c instanceof q||c instanceof g){if(d.isString(e))return c.field(e)}else if(c instanceof x){if(d.isString(e))return G(c,e,a,b)}else if(d.isArray(c)){if(d.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>
e&&(e=c.length+e);if(e>=c.length||0>e)throw Error(h.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return c[e]}}else if(d.isString(c)){if(d.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=c.length+e);if(e>=c.length||0>e)throw Error(h.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return c[e]}}else if(d.isImmutableArray(c)&&d.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=c.length()+e);if(e>=c.length()||0>e)throw Error(h.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return c.get(e)}throw Error(h.nodeErrorMessage(b,
"RUNTIME","INVALIDTYPE"));}catch(oa){throw oa;}}function fa(a,b){try{var c=B(a,b.argument);if(d.isBoolean(c)){if("!"===b.operator)return!c;if("-"===b.operator)return-1*d.toNumber(c);if("+"===b.operator)return 1*d.toNumber(c);throw Error(h.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===b.operator)return-1*d.toNumber(c);if("+"===b.operator)return 1*d.toNumber(c);throw Error(h.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(ma){throw ma;}}function V(a,b){try{var c=
[B(a,b.left),B(a,b.right)],e=c[0],g=c[1];switch(b.operator){case "\x3d\x3d":return d.equalityTest(e,g);case "\x3d":return d.equalityTest(e,g);case "!\x3d":return!d.equalityTest(e,g);case "\x3c":return d.greaterThanLessThan(e,g,b.operator);case "\x3e":return d.greaterThanLessThan(e,g,b.operator);case "\x3c\x3d":return d.greaterThanLessThan(e,g,b.operator);case "\x3e\x3d":return d.greaterThanLessThan(e,g,b.operator);case "+":return d.isString(e)||d.isString(g)?d.toString(e)+d.toString(g):d.toNumber(e)+
d.toNumber(g);case "-":return d.toNumber(e)-d.toNumber(g);case "*":return d.toNumber(e)*d.toNumber(g);case "/":return d.toNumber(e)/d.toNumber(g);case "%":return d.toNumber(e)%d.toNumber(g);default:throw Error(h.nodeErrorMessage(b,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(sa){throw sa;}}function H(a,b){try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(h.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||
"UpdateExpression"===b.right.type)throw Error(h.nodeErrorMessage(b.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var c=B(a,b.left);if(d.isBoolean(c))switch(b.operator){case "||":if(!0===c)return c;var e=B(a,b.right);if(d.isBoolean(e))return e;throw Error(h.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===c)return c;e=B(a,b.right);if(d.isBoolean(e))return e;throw Error(h.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));default:throw Error(h.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));
}else throw Error(h.nodeErrorMessage(b,"RUNTIME","ONLYBOOLEAN"));}catch(oa){throw oa;}}function ba(a,b){var c;try{var d=b.name.toLowerCase();if(null!==a.localScope&&void 0!==a.localScope[d])return c=a.localScope[d],!0!==c.valueset&&(c.value=B(a,c.node),c.valueset=!0),c.value;if(void 0!==a.globalScope[d])return c=a.globalScope[d],!0!==c.valueset&&(c.value=B(a,c.node),c.valueset=!0),c.value;throw Error(h.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(oa){throw oa;}}function J(a,b){try{if("Identifier"!==
b.callee.type)throw Error(h.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==a.localScope&&void 0!==a.localScope[b.callee.name.toLowerCase()]){var c=a.localScope[b.callee.name.toLowerCase()];if(c.value instanceof d.NativeFunction)return c.value.fn(a,b);if(c.value instanceof n)return U(a,b,c.value.definition);throw Error(h.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}if(void 0!==a.globalScope[b.callee.name.toLowerCase()]){c=a.globalScope[b.callee.name.toLowerCase()];if(c.value instanceof
d.NativeFunction)return c.value.fn(a,b);if(c.value instanceof n)return U(a,b,c.value.definition);throw Error(h.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}throw Error(h.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));}catch(ma){throw ma;}}function Z(a){return null==a?"":d.isArray(a)||d.isImmutableArray(a)?"Array":d.isDate(a)?"Date":d.isString(a)?"String":d.isBoolean(a)?"Boolean":d.isNumber(a)?"Number":a instanceof q?"Dictionary":a instanceof g?"Feature":a instanceof m?"Point":a instanceof e?"Polygon":
a instanceof w?"Polyline":a instanceof r?"Multipoint":a instanceof t?"Extent":d.isFunctionParameter(a)?"Function":a===d.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function O(a,b,c,e){try{var g=B(a,b.arguments[c]);if(d.equalityTest(g,e))return B(a,b.arguments[c+1]);var f=b.arguments.length-c;return 1===f?B(a,b.arguments[c]):2===f?null:3===f?B(a,b.arguments[c+2]):O(a,b,c+2,e)}catch(va){throw va;}}function N(a,b,c,e){try{if(!0===e)return B(a,b.arguments[c+1]);if(3===
b.arguments.length-c)return B(a,b.arguments[c+2]);var g=B(a,b.arguments[c+2]);if(!1===d.isBoolean(g))throw Error("WHEN needs boolean test conditions");return N(a,b,c+2,g)}catch(sa){throw sa;}}function K(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var e=K(a.slice(0,d),b);a=K(a.slice(d,c),b);for(c=[];0<e.length||0<a.length;)0<e.length&&0<a.length?(d=b(e[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(e[0]),e=e.slice(1)):(c.push(a[0]),a=a.slice(1))):0<e.length?(c.push(e[0]),e=
e.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function M(a,b,c){try{var e=a.body;if(c.length!==a.params.length)throw Error("Invalid Parameter calls to function.");for(var g=0;g<c.length;g++)b.localScope[a.params[g].name.toLowerCase()]={value:c[g],valueset:!0,node:null};var f=B(b,e);if(f instanceof d.ReturnResult)return f.value;if(f===d.breakResult)throw Error("Cannot Break from a Function");if(f===d.continueResult)throw Error("Cannot Continue from a Function");return f instanceof d.ImplicitResult?
f.value:f}catch(va){throw va;}}function U(a,b,c){return D(a,b,function(b,d,e){b={spatialReference:a.spatialReference,applicationCache:void 0===a.applicationCache?null:a.applicationCache,globalScope:a.globalScope,depthCounter:a.depthCounter+1,console:a.console,localScope:{}};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return M(c,b,e)})}function T(a){return function(){var b={applicationCache:void 0===a.context.applicationCache?null:a.context.applicationCache,spatialReference:a.context.spatialReference,
console:a.context.console,localScope:{},depthCounter:a.context.depthCounter+1,globalScope:a.context.globalScope};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return M(a.definition,b,arguments)}}function da(a){console.log(a)}Object.defineProperty(f,"__esModule",{value:!0});var Q=0,P={};c.registerFunctions(P,D);z.registerFunctions(P,D);u.registerFunctions(P,D);a.registerFunctions(P,D);v.registerFunctions(P,D);p.registerFunctions(P,D);P["typeof"]=function(a,b){return D(a,b,function(a,
b,c){d.pcCheck(c,1,1);a=Z(c[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};P.iif=function(a,b){try{d.pcCheck(null===b.arguments?[]:b.arguments,3,3);var c=B(a,b.arguments[0]);if(!1===d.isBoolean(c))throw Error("IF Function must have a boolean test condition");return!0===c?B(a,b.arguments[1]):B(a,b.arguments[2])}catch(ma){throw ma;}};P.decode=function(a,b){try{if(2>b.arguments.length)throw Error("Missing Parameters");if(2===b.arguments.length)return B(a,b.arguments[1]);
if(0===(b.arguments.length-1)%2)throw Error("Must have a default value result.");var c=B(a,b.arguments[0]);return O(a,b,1,c)}catch(ma){throw ma;}};P.when=function(a,b){try{if(3>b.arguments.length)throw Error("Missing Parameters");if(0===b.arguments.length%2)throw Error("Must have a default value result.");var c=B(a,b.arguments[0]);if(!1===d.isBoolean(c))throw Error("WHEN needs boolean test conditions");return N(a,b,0,c)}catch(ma){throw ma;}};P.top=function(a,b){return D(a,b,function(a,b,c){d.pcCheck(c,
2,2);if(d.isArray(c[0]))return d.toNumber(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,d.toNumber(c[1]));if(d.isImmutableArray(c[0]))return d.toNumber(c[1])>=c[0].length()?c[0].slice(0):c[0].slice(0,d.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};P.first=function(a,b){return D(a,b,function(a,b,c){d.pcCheck(c,1,1);return d.isArray(c[0])?0===c[0].length?null:c[0][0]:d.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):null})};P.sort=function(a,b){return D(a,b,function(a,
b,c){d.pcCheck(c,1,2);a=c[0];d.isImmutableArray(a)&&(a=a.toArray());if(!1===d.isArray(a))throw Error("Illegal Argument");if(1<c.length){if(!1===d.isFunctionParameter(c[1]))throw Error("Illegal Argument");var e=T(c[1]);a=K(a,function(a,b){return e(a,b)})}else{if(0===a.length)return[];c={};for(b=0;b<a.length;b++){var g=Z(a[b]);""!==g&&(c[g]=!0)}if(!0===c.Array||!0===c.Dictionary||!0===c.Feature||!0===c.Point||!0===c.Polygon||!0===c.Polyline||!0===c.Multipoint||!0===c.Extent||!0===c.Function)return a.slice(0);
b=0;var g="",f;for(f in c)b++,g=f;a=1<b||"String"===g?K(a,function(a,b){if(null===a||void 0===a||a===d.voidOperation)return null===b||void 0===b||b===d.voidOperation?0:1;if(null===b||void 0===b||b===d.voidOperation)return-1;a=d.toString(a);b=d.toString(b);return a<b?-1:a===b?0:1}):"Number"===g?K(a,function(a,b){return a-b}):"Boolean"===g?K(a,function(a,b){return a===b?0:b?-1:1}):"Date"===g?K(a,function(a,b){return b-a}):a.slice(0)}return a})};for(var Y in P)P[Y]={value:new d.NativeFunction(P[Y]),
valueset:!0,node:null};var aa=function(){};aa.prototype=P;aa.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};aa.prototype.pi={value:Math.PI,valueset:!0,node:null};f.functionHelper={fixSpatialReference:d.fixSpatialReference,parseArguments:A,standardFunction:D};f.extend=function(a){for(var b={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:D,evaluateIdentifier:ba,arcadeCustomFunctionHandler:T},c=0;c<a.length;c++)a[c].registerFunctions(b);for(var e in b.functions)P[e]=
{value:new d.NativeFunction(b.functions[e]),valueset:!0,node:null},aa.prototype[e]=P[e];for(c=0;c<b.signatures.length;c++)h.addFunctionDeclaration(b.signatures[c],"f")};f.executeScript=function(a,b,c){c||(c=new y(102100));var e=b.vars,f=b.customfunctions,h=new aa;e||(e={});f||(f={});var p=new q({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});p.immutable=!1;h.textformatting={value:p,valueset:!0,node:null};for(var m in f)h[m]={value:new d.NativeFunction(f[m]),
native:!0,valueset:!0,node:null};for(m in e)h[m]=e[m]&&"esri.Graphic"===e[m].declaredClass?{value:g.createFromGraphic(e[m]),valueset:!0,node:null}:{value:e[m],valueset:!0,node:null};a=B({spatialReference:c,globalScope:h,localScope:null,console:b.console?b.console:da,depthCounter:1,applicationCache:void 0===b.applicationCache?null:b.applicationCache},a.body[0].body);a instanceof d.ReturnResult&&(a=a.value);a instanceof d.ImplicitResult&&(a=a.value);a===d.voidOperation&&(a=null);if(a===d.breakResult)throw Error("Cannot return BREAK");
if(a===d.continueResult)throw Error("Cannot return CONTINUE");if(a instanceof n)throw Error("Cannot return FUNCTION");if(a instanceof d.NativeFunction)throw Error("Cannot return FUNCTION");return a};f.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return h.findFieldLiterals(a,b)};f.validateScript=function(a,b){return h.validateScript(a,b,"simple")};f.referencesMember=function(a,b){return h.referencesMember(a,b)};f.referencesFunction=function(a,b){return h.referencesFunction(a,b)};f.findFunctionCalls=
function(a){return h.findFunctionCalls(a,!1)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/esprima"],function(b,f,q,g){Object.defineProperty(f,"__esModule",{value:!0});f.parseScript=function(b){b=g.parse("function _() { "+b+"\n}");if(null===b.body||void 0===b.body)throw Error("No formula provided.");if(0===b.body.length)throw Error("No formula provided.");if(0===b.body.length)throw Error("No formula provided.");if("BlockStatement"!==b.body[0].body.type)throw Error("Invalid formula content.");
var f=q.validateLanguage(b);if(""!==f)throw Error(f);return b};f.scriptCheck=function(b,f,k,d){var h=[];try{var c=g.parse("function _() { "+b+"\n}",{tolerant:!0,loc:!0}),a=c.errors;if(0<a.length)for(var p=0;p<a.length;p++)h.push({line:a[p].lineNumber,character:a[p].column,reason:a[p].description});var l=q.checkScript(c,f,k,d);for(f=0;f<l.length;f++)h.push(l[f])}catch(v){try{"Unexpected token }"===v.description?(v.index=("function _() { "+b+"\n}").length-1,h.push({line:v.lineNumber,character:v.column,
reason:"Unexpected end of script"})):h.push({line:v.lineNumber,character:v.column,reason:v.description})}catch(z){}}return h};f.extractFieldLiterals=function(b,g){void 0===g&&(g=!1);return q.findFieldLiterals(b,g)};f.validateScript=function(b,g,f){void 0===f&&(f="full");return q.validateScript(b,g,f)};f.referencesMember=function(b,g){return q.referencesMember(b,g)};f.referencesFunction=function(b,g){return q.referencesFunction(b,g)}})},"esri/arcade/lib/esprima":function(){(function(b,f){"function"===
typeof define&&define.amd?define(["exports"],f):"undefined"!==typeof exports?f(exports):f(b.esprima={})})(this,function(b){function f(a,b){if(!a)throw Error("ASSERT: "+b);}function q(a){return 48<=a&&57>=a}function g(a){return 0<="0123456789abcdefABCDEF".indexOf(a)}function n(a){return 0<="01234567".indexOf(a)}function l(a){return 10===a||13===a||8232===a||8233===a}function k(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||92===a||128<=a&&db.NonAsciiIdentifierStart.test(String.fromCharCode(a))}
function d(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||48<=a&&57>=a||92===a||128<=a&&db.NonAsciiIdentifierPart.test(String.fromCharCode(a))}function h(a){a=a.toLowerCase();switch(a.length){case 2:return"if"===a||"in"===a;case 3:return"var"===a||"for"===a;case 4:return"else"===a;case 5:return"break"===a;case 6:return"return"===a;case 8:return"function"===a.toLowerCase()||"continue"===a;default:return!1}}function c(a,b,c,d,e){f("number"===typeof c,"Comment must have valid position");ca.lastCommentStart>=
c||(ca.lastCommentStart=c,a={type:a,value:b},L.range&&(a.range=[c,d]),L.loc&&(a.loc=e),L.comments.push(a),L.attachComment&&(L.leadingComments.push(a),L.trailingComments.push(a)))}function a(a){var b,d,e;b=E-a;for(d={start:{line:ia,column:E-ka-a}};E<qa;)if(e=I.charCodeAt(E),++E,l(e)){L.comments&&(a=I.slice(b+a,E-1),d.end={line:ia,column:E-ka-1},c("Line",a,b,E-1,d));13===e&&10===I.charCodeAt(E)&&++E;++ia;ka=E;return}L.comments&&(a=I.slice(b+a,E),d.end={line:ia,column:E-ka},c("Line",a,b,E,d))}function p(){var b,
d;for(d=0===E;E<qa;)if(b=I.charCodeAt(E),32===b||9===b||11===b||12===b||160===b||5760<=b&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(b))++E;else if(l(b))++E,13===b&&10===I.charCodeAt(E)&&++E,++ia,ka=E,d=!0;else if(47===b)if(b=I.charCodeAt(E+1),47===b)++E,++E,a(2),d=!0;else if(42===b){++E;++E;a:{var e=b=void 0,g=void 0,g=void 0;L.comments&&(b=E-2,e={start:{line:ia,column:E-ka-2}});for(;E<qa;)if(g=I.charCodeAt(E),l(g))13===g&&10===I.charCodeAt(E+
1)&&++E,++ia,++E,ka=E,E>=qa&&J();else{if(42===g&&47===I.charCodeAt(E+1)){++E;++E;L.comments&&(g=I.slice(b+2,E-2),e.end={line:ia,column:E-ka},c("Block",g,b,E,e));break a}++E}J()}}else break;else if(d&&45===b)if(45===I.charCodeAt(E+1)&&62===I.charCodeAt(E+2))E+=3,a(3);else break;else if(60===b)if("!--"===I.slice(E+1,E+4))++E,++E,++E,++E,a(4);else break;else break}function u(a){var b,c,d=0;b="u"===a?4:2;for(a=0;a<b;++a)if(E<qa&&g(I[E]))c=I[E++],d=16*d+"0123456789abcdef".indexOf(c.toLowerCase());else return"";
return String.fromCharCode(d)}function v(){var a,b;a=I.charCodeAt(E++);b=String.fromCharCode(a);92===a&&(117!==I.charCodeAt(E)&&J(),++E,(a=u("u"))&&"\\"!==a&&k(a.charCodeAt(0))||J(),b=a);for(;E<qa;){a=I.charCodeAt(E);if(!d(a))break;++E;b+=String.fromCharCode(a);92===a&&(b=b.substr(0,b.length-1),117!==I.charCodeAt(E)&&J(),++E,(a=u("u"))&&"\\"!==a&&d(a.charCodeAt(0))||J(),b+=a)}return b}function z(){var a=E,b=I.charCodeAt(E),c,d=I[E];switch(b){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++E,
L.tokenize&&(40===b?L.openParenToken=L.tokens.length:123===b&&(L.openCurlyToken=L.tokens.length)),{type:R.Punctuator,value:String.fromCharCode(b),lineNumber:ia,lineStart:ka,start:a,end:E};default:if(c=I.charCodeAt(E+1),61===c)switch(b){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return E+=2,{type:R.Punctuator,value:String.fromCharCode(b)+String.fromCharCode(c),lineNumber:ia,lineStart:ka,start:a,end:E};case 33:case 61:return E+=2,61===I.charCodeAt(E)&&++E,{type:R.Punctuator,
value:I.slice(a,E),lineNumber:ia,lineStart:ka,start:a,end:E}}}b=I.substr(E,4);if("\x3e\x3e\x3e\x3d"===b)return E+=4,{type:R.Punctuator,value:b,lineNumber:ia,lineStart:ka,start:a,end:E};b=b.substr(0,3);if("\x3e\x3e\x3e"===b||"\x3c\x3c\x3d"===b||"\x3e\x3e\x3d"===b)return E+=3,{type:R.Punctuator,value:b,lineNumber:ia,lineStart:ka,start:a,end:E};b=b.substr(0,2);if(d===b[1]&&0<="+-\x3c\x3e\x26|".indexOf(d)||"\x3d\x3e"===b)return E+=2,{type:R.Punctuator,value:b,lineNumber:ia,lineStart:ka,start:a,end:E};
if(0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(d))return++E,{type:R.Punctuator,value:d,lineNumber:ia,lineStart:ka,start:a,end:E};J()}function t(){var a,b,c;c=I[E];f(q(c.charCodeAt(0))||"."===c,"Numeric literal must start with a decimal digit or a decimal point");b=E;a="";if("."!==c){a=I[E++];c=I[E];if("0"===a){if("x"===c||"X"===c){++E;for(a="";E<qa&&g(I[E]);)a+=I[E++];0===a.length&&J();k(I.charCodeAt(E))&&J();return{type:R.NumericLiteral,value:parseInt("0x"+a,16),lineNumber:ia,lineStart:ka,start:b,end:E}}if("b"===
c||"B"===c){++E;for(c="";E<qa;){a=I[E];if("0"!==a&&"1"!==a)break;c+=I[E++]}0===c.length&&J();E<qa&&(a=I.charCodeAt(E),(k(a)||q(a))&&J());return{type:R.NumericLiteral,value:parseInt(c,2),lineNumber:ia,lineStart:ka,start:b,end:E}}if("o"===c||"O"===c){n(c)?(c=!0,a="0"+I[E++]):(c=!1,++E,a="");for(;E<qa&&n(I[E]);)a+=I[E++];c||0!==a.length||J();(k(I.charCodeAt(E))||q(I.charCodeAt(E)))&&J();return{type:R.NumericLiteral,value:parseInt(a,8),octal:c,lineNumber:ia,lineStart:ka,start:b,end:E}}}for(;q(I.charCodeAt(E));)a+=
I[E++];c=I[E]}if("."===c){for(a+=I[E++];q(I.charCodeAt(E));)a+=I[E++];c=I[E]}if("e"===c||"E"===c){a+=I[E++];c=I[E];if("+"===c||"-"===c)a+=I[E++];if(q(I.charCodeAt(E)))for(;q(I.charCodeAt(E));)a+=I[E++];else J()}k(I.charCodeAt(E))&&J();return{type:R.NumericLiteral,value:parseFloat(a),lineNumber:ia,lineStart:ka,start:b,end:E}}function x(){X=null;p();V("Regular Expression language structures not supported")}function r(){p();x()}function m(){var a;a=L.tokens[L.tokens.length-1];if(!a)return r();if("Punctuator"===
a.type){if("]"===a.value)return z();if(")"===a.value)return a=L.tokens[L.openParenToken-1],!a||"Keyword"!==a.type||"if"!==a.value.toLowerCase()&&"while"!==a.value.toLowerCase()&&"for"!==a.value.toLowerCase()&&"with"!==a.value.toLowerCase()?z():r();if("}"===a.value){if(L.tokens[L.openCurlyToken-3]&&"Keyword"===L.tokens[L.openCurlyToken-3].type){if(a=L.tokens[L.openCurlyToken-4],!a)return z()}else if(L.tokens[L.openCurlyToken-4]&&"Keyword"===L.tokens[L.openCurlyToken-4].type){if(a=L.tokens[L.openCurlyToken-
5],!a)return r()}else return z();if(0<=wa.indexOf(a.value))return z()}return r()}return"Keyword"===a.type&&"this"!==a.value?r():z()}function e(){var a;p();if(E>=qa)return{type:R.EOF,lineNumber:ia,lineStart:ka,start:E,end:E};a=I.charCodeAt(E);if(k(a)){var b;a=E;if(92===I.charCodeAt(E))b=v();else a:{var c;for(b=E++;E<qa;){c=I.charCodeAt(E);if(92===c){E=b;b=v();break a}if(d(c))++E;else break}b=I.slice(b,E)}return{type:1===b.length?R.Identifier:h(b)?R.Keyword:"null"===b.toLowerCase()?R.NullLiteral:"true"===
b.toLowerCase()||"false"===b.toLowerCase()?R.BooleanLiteral:R.Identifier,value:b,lineNumber:ia,lineStart:ka,start:a,end:E}}if(40===a||41===a||59===a)return z();if(39===a||34===a){var e="",r,w,y;c=!1;var x,B;x=ia;B=ka;a=I[E];f("'"===a||'"'===a,"String literal must starts with a quote");b=E;for(++E;E<qa;)if(r=I[E++],r===a){a="";break}else if("\\"===r)if((r=I[E++])&&l(r.charCodeAt(0)))++ia,"\r"===r&&"\n"===I[E]&&++E,ka=E;else switch(r){case "u":case "x":if("{"===I[E]){++E;w=r=void 0;r=I[E];w=0;for("}"===
r&&J();E<qa;){r=I[E++];if(!g(r))break;w=16*w+"0123456789abcdef".indexOf(r.toLowerCase())}(1114111<w||"}"!==r)&&J();r=65535>=w?String.fromCharCode(w):String.fromCharCode((w-65536>>10)+55296,(w-65536&1023)+56320);e+=r}else y=E,(w=u(r))?e+=w:(E=y,e+=r);break;case "n":e+="\n";break;case "r":e+="\r";break;case "t":e+="\t";break;case "b":e+="\b";break;case "f":e+="\f";break;case "v":e+="\x0B";break;default:n(r)?(w="01234567".indexOf(r),0!==w&&(c=!0),E<qa&&n(I[E])&&(c=!0,w=8*w+"01234567".indexOf(I[E++]),
0<="0123".indexOf(r)&&E<qa&&n(I[E])&&(w=8*w+"01234567".indexOf(I[E++]))),e+=String.fromCharCode(w)):e+=r}else if(l(r.charCodeAt(0)))break;else e+=r;""!==a&&J();return{type:R.StringLiteral,value:e,octal:c,startLineNumber:x,startLineStart:B,lineNumber:ia,lineStart:ka,start:b,end:E}}return 46===a?q(I.charCodeAt(E+1))?t():z():q(a)?t():L.tokenize&&47===a?m():z()}function w(){var a,b,c;p();a={start:{line:ia,column:E-ka}};b=e();a.end={line:ia,column:E-ka};b.type!==R.EOF&&(c=I.slice(b.start,b.end),a={type:Ga[b.type],
value:c,range:[b.start,b.end],loc:a},b.regex&&(a.regex={pattern:b.regex.pattern,flags:b.regex.flags}),L.tokens.push(a));return b}function y(){var a;a=X;E=a.end;ia=a.lineNumber;ka=a.lineStart;X="undefined"!==typeof L.tokens?w():e();E=a.end;ia=a.lineNumber;ka=a.lineStart;return a}function A(){var a,b,c;a=E;b=ia;c=ka;X="undefined"!==typeof L.tokens?w():e();E=a;ia=b;ka=c}function D(){this.line=ia;this.column=E-ka}function B(){this.start=new D;this.end=null}function F(a){this.start=a.type===R.StringLiteral?
{line:a.startLineNumber,column:a.start-a.startLineStart}:{line:a.lineNumber,column:a.start-a.lineStart};this.end=null}function C(){E=X.start;X.type===R.StringLiteral?(ia=X.startLineNumber,ka=X.startLineStart):(ia=X.lineNumber,ka=X.lineStart);L.range&&(this.range=[E,0]);L.loc&&(this.loc=new B)}function G(a){L.range&&(this.range=[a.start,0]);L.loc&&(this.loc=new F(a))}function W(){var a,b,c,d;a=E;b=ia;c=ka;p();d=ia!==b;E=a;ia=b;ka=c;return d}function fa(a,b,c){var d=Error("Line "+a+": "+c);d.index=
b;d.lineNumber=a;d.column=b-ka+1;d.description=c;return d}function V(a){var b,c;b=Array.prototype.slice.call(arguments,1);c=a.replace(/%(\d)/g,function(a,c){f(c<b.length,"Message reference must be in range");return b[c]});throw fa(ia,E,c);}function H(a){var b,c;b=Array.prototype.slice.call(arguments,1);c=a.replace(/%(\d)/g,function(a,c){f(c<b.length,"Message reference must be in range");return b[c]});c=fa(ia,E,c);if(L.errors)L.errors.push(c);else throw c;}function ba(a,b){var c=na.UnexpectedToken;
a&&(c=b?b:a.type===R.EOF?na.UnexpectedEOS:a.type===R.Identifier?na.UnexpectedIdentifier:a.type===R.NumericLiteral?na.UnexpectedNumber:a.type===R.StringLiteral?na.UnexpectedString:na.UnexpectedToken);c=c.replace("%0",a?a.value:"ILLEGAL");return a&&"number"===typeof a.lineNumber?fa(a.lineNumber,a.start,c):fa(ia,E,c)}function J(a,b){throw ba(a,b);}function Z(a,b){a=ba(a,b);if(L.errors)L.errors.push(a);else throw a;}function O(a){var b=y();b.type===R.Punctuator&&b.value===a||J(b)}function N(){var a;L.errors?
(a=X,a.type===R.Punctuator&&","===a.value?y():a.type===R.Punctuator&&";"===a.value?(y(),Z(a)):Z(a,na.UnexpectedToken)):O(",")}function K(a){var b=y();b.type===R.Keyword&&b.value.toLowerCase()===a.toLowerCase()||J(b)}function M(a){return X.type===R.Punctuator&&X.value===a}function U(a){return X.type===R.Keyword&&X.value.toLowerCase()===a.toLowerCase()}function T(){var a;59===I.charCodeAt(E)||M(";")?y():(a=ia,p(),ia===a&&(X.type===R.EOF||M("}")||J(X)))}function da(a){return a.type===ja.Identifier||
a.type===ja.MemberExpression}function Q(a,b){var c,d=new C;b=pa;c=La();pa=b;return d.finishFunctionExpression(null,a,[],c)}function P(){var a,b;a=pa;pa=!0;b=Fa();b=Q(b.params);pa=a;return b}function Y(){var a,b=new C;a=y();return a.type===R.StringLiteral||a.type===R.NumericLiteral?(pa&&a.octal&&Z(a,na.StrictOctalLiteral),b.finishLiteral(a)):b.finishIdentifier(a.value)}function aa(){var a,b,c,d=new C;a=X;if(a.type===R.Identifier)return b=Y(),"get"!==a.value||M(":")||M("(")?"set"!==a.value||M(":")||
M("(")?M(":")?(y(),a=xa(),d.finishProperty("init",b,a,!1,!1)):M("(")?(a=P(),d.finishProperty("init",b,a,!0,!1)):d.finishProperty("init",b,b,!1,!0):(b=Y(),O("("),a=X,a.type!==R.Identifier?(O(")"),Z(a),a=Q([])):(c=[Ia()],O(")"),a=Q(c,a)),d.finishProperty("set",b,a,!1,!1)):(b=Y(),O("("),O(")"),a=Q([]),d.finishProperty("get",b,a,!1,!1));if(a.type===R.EOF||a.type===R.Punctuator)J(a);else{b=Y();if(M(":"))return y(),a=xa(),d.finishProperty("init",b,a,!1,!1);if(M("("))return a=P(),d.finishProperty("init",
b,a,!0,!1);J(y())}}function ga(a){var b=[],c,d,e={},g=String,f=new C;for(!0!==a&&O("{");!M("}");)a=aa(),c=a.key.type===ja.Identifier?a.key.name:g(a.key.value),d="init"===a.kind?Ma.Data:"get"===a.kind?Ma.Get:Ma.Set,c="$"+c,Object.prototype.hasOwnProperty.call(e,c)?(e[c]===Ma.Data?pa&&d===Ma.Data?H(na.StrictDuplicateProperty):d!==Ma.Data&&H(na.AccessorDataProperty):d===Ma.Data?H(na.AccessorDataProperty):e[c]&d&&H(na.AccessorGetSet),e[c]|=d):e[c]=d,b.push(a),M("}")||N();O("}");return f.finishObjectExpression(b)}
function ea(){var a,b,c,d;if(M("("))return O("("),M(")")?(y(),b=Pa.ArrowParameterPlaceHolder):(++ca.parenthesisCount,b=Aa(),O(")")),b;if(M("[")){b=[];var e=new C;for(O("[");!M("]");)M(",")?(y(),b.push(null)):(b.push(xa()),M("]")||O(","));y();return e.finishArrayExpression(b)}if(M("{"))return ga();a=X.type;d=new C;if(a===R.Identifier)c=d.finishIdentifier(y().value);else if(a===R.StringLiteral||a===R.NumericLiteral)pa&&X.octal&&Z(X,na.StrictOctalLiteral),c=d.finishLiteral(y());else if(a===R.Keyword){if(U("function")){d=
null;var g;c=[];var f=[],h,p=new C;K("function");M("(")||(d=Ia());g=Fa(b);c=g.params;f=g.defaults;a=g.stricted;b=g.firstRestricted;g.message&&(e=g.message);h=pa;g=La();pa&&b&&J(b,e);pa&&a&&Z(a,e);pa=h;return p.finishFunctionExpression(d,c,f,g)}U("this")?(y(),c=d.finishThisExpression()):J(y())}else a===R.BooleanLiteral?(b=y(),b.value="true"===b.value.toLowerCase(),c=d.finishLiteral(b)):a===R.NullLiteral?(b=y(),b.value=null,c=d.finishLiteral(b)):M("/")||M("/\x3d")?(c="undefined"!==typeof L.tokens?d.finishLiteral(r()):
d.finishLiteral(x()),A()):J(y());return c}function la(){var a=[];O("(");if(!M(")"))for(;E<qa;){a.push(xa());if(M(")"))break;N()}O(")");return a}function ma(){O(".");var a,b=new C;a=y();a.type===R.Identifier||a.type===R.Keyword||a.type===R.BooleanLiteral||a.type===R.NullLiteral||J(a);return b.finishIdentifier(a.value)}function oa(){var a;O("[");a=Aa();O("]");return a}function sa(){var a,b,c=new C;K("new");var d;f(ca.allowIn,"callee of new expression always allow in keyword.");d=X;for(a=U("new")?sa():
ea();;)if(M("["))b=oa(),a=(new G(d)).finishMemberExpression("[",a,b);else if(M("."))b=ma(),a=(new G(d)).finishMemberExpression(".",a,b);else break;b=M("(")?la():[];return c.finishNewExpression(a,b)}function va(){var a,b,c=X,d,e=ca.allowIn;b=X;ca.allowIn=!0;for(a=U("new")?sa():ea();;)if(M("."))d=ma(),a=(new G(b)).finishMemberExpression(".",a,d);else if(M("("))d=la(),a=(new G(b)).finishCallExpression(a,d);else if(M("["))d=oa(),a=(new G(b)).finishMemberExpression("[",a,d);else break;ca.allowIn=e;X.type!==
R.Punctuator||!M("++")&&!M("--")||W()||(da(a)||H(na.InvalidLHSInAssignment),b=y(),a=(new G(c)).finishPostfixExpression(b.value,a));return a}function ha(){var a,b,c;X.type!==R.Punctuator&&X.type!==R.Keyword?b=va():M("++")||M("--")?(c=X,a=y(),b=ha(),da(b)||H(na.InvalidLHSInAssignment),b=(new G(c)).finishUnaryExpression(a.value,b)):M("+")||M("-")||M("~")||M("!")?(c=X,a=y(),b=ha(),b=(new G(c)).finishUnaryExpression(a.value,b)):U("delete")||U("void")||U("typeof")?(c=X,a=y(),b=ha(),b=(new G(c)).finishUnaryExpression(a.value,
b),pa&&"delete"===b.operator&&b.argument.type===ja.Identifier&&H(na.StrictDelete)):b=va();return b}function Da(a,b){var c=0;if(a.type!==R.Punctuator&&a.type!==R.Keyword)return 0;switch(a.value){case "||":c=1;break;case "\x26\x26":c=2;break;case "|":c=3;break;case "^":c=4;break;case "\x26":c=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":c=6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":c=7;break;case "in":c=b?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":c=
8;break;case "+":case "-":c=9;break;case "*":case "/":case "%":c=11}return c}function za(){var a,b,c,d,e,g;a=X;b=ha();if(b===Pa.ArrowParameterPlaceHolder)return b;c=X;d=Da(c,ca.allowIn);if(0===d)return b;c.prec=d;y();a=[a,X];g=ha();for(e=[b,c,g];0<(d=Da(X,ca.allowIn));){for(;2<e.length&&d<=e[e.length-2].prec;)g=e.pop(),c=e.pop().value,b=e.pop(),a.pop(),b=(new G(a[a.length-1])).finishBinaryExpression(c,b,g),e.push(b);c=y();c.prec=d;e.push(c);a.push(X);b=ha();e.push(b)}d=e.length-1;b=e[d];for(a.pop();1<
d;)b=(new G(a.pop())).finishBinaryExpression(e[d-1].value,e[d-2],b),d-=2;return b}function bb(a){var b,c,d,e,g,f,h;e=[];g=[];f=0;h={paramSet:{}};b=0;for(c=a.length;b<c;b+=1)if(d=a[b],d.type===ja.Identifier)e.push(d),g.push(null),Ha(h,d,d.name);else if(d.type===ja.AssignmentExpression)e.push(d.left),g.push(d.right),++f,Ha(h,d.left,d.left.name);else return null;h.message===na.StrictParamDupe&&(a=pa?h.stricted:h.firstRestricted,J(a,h.message));0===f&&(g=[]);return{params:e,defaults:g,rest:null,stricted:h.stricted,
firstRestricted:h.firstRestricted,message:h.message}}function xa(){var a,b,c,d,e;a=ca.parenthesisCount;b=e=X;var g,f;f=X;c=za();c!==Pa.ArrowParameterPlaceHolder&&M("?")&&(y(),g=ca.allowIn,ca.allowIn=!0,b=xa(),ca.allowIn=g,O(":"),g=xa(),c=(new G(f)).finishConditionalExpression(c,b,g));if(c===Pa.ArrowParameterPlaceHolder||M("\x3d\x3e"))if(ca.parenthesisCount===a||ca.parenthesisCount===a+1)if(c.type===ja.Identifier?d=bb([c]):c.type===ja.AssignmentExpression?d=bb([c]):c.type===ja.SequenceExpression?d=
bb(c.expressions):c===Pa.ArrowParameterPlaceHolder&&(d=bb([])),d)return a=d,e=new G(e),O("\x3d\x3e"),d=pa,c=M("{")?La():xa(),pa&&a.firstRestricted&&J(a.firstRestricted,a.message),pa&&a.stricted&&Z(a.stricted,a.message),pa=d,e.finishArrowFunctionExpression(a.params,a.defaults,c,c.type!==ja.BlockStatement);X.type!==R.Punctuator?a=!1:(a=X.value,a="\x3d"===a||"*\x3d"===a||"/\x3d"===a||"%\x3d"===a||"+\x3d"===a||"-\x3d"===a||"\x3c\x3c\x3d"===a||"\x3e\x3e\x3d"===a||"\x3e\x3e\x3e\x3d"===a||"\x26\x3d"===a||
"^\x3d"===a||"|\x3d"===a);a&&(da(c)||H(na.InvalidLHSInAssignment),b=y(),a=xa(),c=(new G(e)).finishAssignmentExpression(b.value,c,a));return c}function Aa(){var a,b=X;a=xa();if(M(",")){for(a=[a];E<qa&&M(",");)y(),a.push(xa());a=(new G(b)).finishSequenceExpression(a)}return a}function Ia(){var a,b=new C;a=y();a.type!==R.Identifier&&J(a);return b.finishIdentifier(a.value)}function hb(a){var b=null,c,d=new C;c=Ia();"const"===a?(O("\x3d"),b=xa()):M("\x3d")&&(y(),b=xa());return d.finishVariableDeclarator(c,
b)}function Ua(a){var b=[];do{b.push(hb(a));if(!M(","))break;y()}while(E<qa);return b}function Ka(a){var b=X.type,c,d;b===R.EOF&&J(X);if(b===R.Punctuator&&"{"===X.value){if(a){O("{");var e=X;a=E;c=ia;d=ka;y();b=M(":");X=e;E=a;ia=c;ka=d;if((X.type===R.Identifier||X.type===R.StringLiteral)&&b)return ga(!0);a=new C;for(c=[];E<qa&&!M("}");){d=Ja();if("undefined"===typeof d)break;c.push(d)}O("}");return a.finishBlockStatement(c)}return ga()}a=new C;if(b===R.Punctuator)switch(X.value){case ";":return a=
new C,O(";"),a.finishEmptyStatement();case "(":return c=Aa(),T(),a.finishExpressionStatement(c)}else if(b===R.Keyword)switch(X.value.toLowerCase()){case "break":return c=null,K("break"),59===I.charCodeAt(E)?(y(),ca.inIteration||ca.inSwitch||V(na.IllegalBreak),a=a.finishBreakStatement(null)):W()?(ca.inIteration||ca.inSwitch||V(na.IllegalBreak),a=a.finishBreakStatement(null)):(X.type===R.Identifier&&(c=Ia(),d="$"+c.name,Object.prototype.hasOwnProperty.call(ca.labelSet,d)||V(na.UnknownLabel,c.name)),
T(),null!==c||ca.inIteration||ca.inSwitch||V(na.IllegalBreak),a=a.finishBreakStatement(c)),a;case "continue":return c=null,K("continue"),59===I.charCodeAt(E)?(y(),ca.inIteration||V(na.IllegalContinue),a=a.finishContinueStatement(null)):W()?(ca.inIteration||V(na.IllegalContinue),a=a.finishContinueStatement(null)):(X.type===R.Identifier&&(c=Ia(),d="$"+c.name,Object.prototype.hasOwnProperty.call(ca.labelSet,d)||V(na.UnknownLabel,c.name)),T(),null!==c||ca.inIteration||V(na.IllegalContinue),a=a.finishContinueStatement(c)),
a;case "for":var g,f,h;f=ca.allowIn;g=b=e=null;K("for");O("(");if(M(";"))y();else{if(U("var")){ca.allowIn=!1;var p=new C;g=y();h=Ua();g=p.finishVariableDeclaration(h,g.value);ca.allowIn=f;1===g.declarations.length&&U("in")&&(y(),c=g,d=Aa(),g=null)}else ca.allowIn=!1,g=Aa(),ca.allowIn=f,U("in")&&(da(g)||H(na.InvalidLHSInForIn),y(),c=g,d=Aa(),g=null);"undefined"===typeof c&&O(";")}"undefined"===typeof c&&(M(";")||(b=Aa()),O(";"),M(")")||(e=Aa()));O(")");h=ca.inIteration;ca.inIteration=!0;f=Ka(!0);ca.inIteration=
h;return"undefined"===typeof c?a.finishForStatement(g,b,e,f):a.finishForInStatement(c,d,f);case "function":return Xa(a);case "if":return K("if"),O("("),c=Aa(),O(")"),d=Ka(!0),U("else")?(y(),b=Ka(!0)):b=null,a.finishIfStatement(c,d,b);case "return":return c=null,K("return"),ca.inFunctionBody||H(na.IllegalReturn),32===I.charCodeAt(E)&&k(I.charCodeAt(E+1))?(c=Aa(),T(),a=a.finishReturnStatement(c)):W()?a=a.finishReturnStatement(null):(M(";")||M("}")||X.type===R.EOF||(c=Aa()),T(),a=a.finishReturnStatement(c)),
a;case "var":return K("var"),c=Ua(),T(),a.finishVariableDeclaration(c,"var")}c=Aa();if(c.type===ja.Identifier&&M(":"))return y(),b="$"+c.name,Object.prototype.hasOwnProperty.call(ca.labelSet,b)&&V(na.Redeclaration,"Label",c.name),ca.labelSet[b]=!0,d=Ka(!1),delete ca.labelSet[b],a.finishLabeledStatement(c,d);T();return a.finishExpressionStatement(c)}function La(){var a,b=[],c,d,e,g,f,h=new C;for(O("{");E<qa&&X.type===R.StringLiteral;){c=X;a=Ja();b.push(a);if(a.expression.type!==ja.Literal)break;a=
I.slice(c.start+1,c.end-1);"use strict"===a?(pa=!0,d&&Z(d,na.StrictOctalLiteral)):!d&&c.octal&&(d=c)}c=ca.labelSet;d=ca.inIteration;e=ca.inSwitch;g=ca.inFunctionBody;f=ca.parenthesizedCount;ca.labelSet={};ca.inIteration=!1;ca.inSwitch=!1;ca.inFunctionBody=!0;for(ca.parenthesizedCount=0;E<qa&&!M("}");){a=Ja();if("undefined"===typeof a)break;b.push(a)}O("}");ca.labelSet=c;ca.inIteration=d;ca.inSwitch=e;ca.inFunctionBody=g;ca.parenthesizedCount=f;return h.finishBlockStatement(b)}function Ha(a,b,c){c=
"$"+c;pa?Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.stricted=b,a.message=na.StrictParamDupe):!a.firstRestricted&&Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.firstRestricted=b,a.message=na.StrictParamDupe);a.paramSet[c]=!0}function Fa(a){a={params:[],defaultCount:0,defaults:[],firstRestricted:a};O("(");if(!M(")"))for(a.paramSet={};E<qa;){var b=a,c=void 0,d=void 0,e=void 0,c=X,d=Ia();Ha(b,c,c.value);M("\x3d")&&(y(),e=xa(),++b.defaultCount);b.params.push(d);b.defaults.push(e);
if(M(")"))break;O(",")}O(")");0===a.defaultCount&&(a.defaults=[]);return{params:a.params,defaults:a.defaults,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function Xa(){var a,b=[],c=[],d,e,g,f,h,p=new C;K("function");a=Ia();d=Fa(g);b=d.params;c=d.defaults;e=d.stricted;g=d.firstRestricted;d.message&&(f=d.message);h=pa;d=La();pa&&g&&J(g,f);pa&&e&&Z(e,f);pa=h;return p.finishFunctionDeclaration(a,b,c,d)}function Ja(){if(X.type===R.Keyword)return"function"===X.value.toLowerCase()?
Xa():Ka(!1);if(X.type!==R.EOF)return Ka(!1)}function Qa(){var a,b,c,d=[];for(a=0;a<L.tokens.length;++a)b=L.tokens[a],c={type:b.type,value:b.value},b.regex&&(c.regex={pattern:b.regex.pattern,flags:b.regex.flags}),L.range&&(c.range=b.range),L.loc&&(c.loc=b.loc),d.push(c);L.tokens=d}var R,Ga,wa,ja,Pa,Ma,na,db,I,pa,E,ia,ka,qa,X,ca,L;R={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};Ga={};Ga[R.BooleanLiteral]="Boolean";Ga[R.EOF]=
"\x3cend\x3e";Ga[R.Identifier]="Identifier";Ga[R.Keyword]="Keyword";Ga[R.NullLiteral]="Null";Ga[R.NumericLiteral]="Numeric";Ga[R.Punctuator]="Punctuator";Ga[R.StringLiteral]="String";Ga[R.RegularExpression]="RegularExpression";wa="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");
ja={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};Pa={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}};
Ma={Data:1,Get:2,Set:4};na={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",
MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",
AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};db={NonAsciiIdentifierStart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/,
NonAsciiIdentifierPart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/};
G.prototype=C.prototype={processComment:function(){var a,b,c,d=L.bottomRightStack,e,g,f=d[d.length-1];if(!(this.type===ja.Program&&0<this.body.length)){if(0<L.trailingComments.length){c=[];for(e=L.trailingComments.length-1;0<=e;--e)g=L.trailingComments[e],g.range[0]>=this.range[1]&&(c.unshift(g),L.trailingComments.splice(e,1));L.trailingComments=[]}else f&&f.trailingComments&&f.trailingComments[0].range[0]>=this.range[1]&&(c=f.trailingComments,delete f.trailingComments);if(f)for(;f&&f.range[0]>=this.range[0];)a=
f,f=d.pop();if(a)a.leadingComments&&a.leadingComments[a.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=a.leadingComments,a.leadingComments=void 0);else if(0<L.leadingComments.length)for(b=[],e=L.leadingComments.length-1;0<=e;--e)g=L.leadingComments[e],g.range[1]<=this.range[0]&&(b.unshift(g),L.leadingComments.splice(e,1));b&&0<b.length&&(this.leadingComments=b);c&&0<c.length&&(this.trailingComments=c);d.push(this)}},finish:function(){L.range&&(this.range[1]=E);L.loc&&(this.loc.end=
new D,L.source&&(this.loc.source=L.source));L.attachComment&&this.processComment()},finishArrayExpression:function(a){this.type=ja.ArrayExpression;this.elements=a;this.finish();return this},finishAssignmentExpression:function(a,b,c){this.type=ja.AssignmentExpression;this.operator=a;this.left=b;this.right=c;this.finish();return this},finishBinaryExpression:function(a,b,c){this.type="||"===a||"\x26\x26"===a?ja.LogicalExpression:ja.BinaryExpression;this.operator=a;this.left=b;this.right=c;this.finish();
return this},finishBlockStatement:function(a){this.type=ja.BlockStatement;this.body=a;this.finish();return this},finishBreakStatement:function(a){this.type=ja.BreakStatement;this.label=a;this.finish();return this},finishCallExpression:function(a,b){this.type=ja.CallExpression;this.callee=a;this.arguments=b;this.finish();return this},finishConditionalExpression:function(a,b,c){this.type=ja.ConditionalExpression;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishContinueStatement:function(a){this.type=
ja.ContinueStatement;this.label=a;this.finish();return this},finishEmptyStatement:function(){this.type=ja.EmptyStatement;this.finish();return this},finishExpressionStatement:function(a){this.type=ja.ExpressionStatement;this.expression=a;this.finish();return this},finishForStatement:function(a,b,c,d){this.type=ja.ForStatement;this.init=a;this.test=b;this.update=c;this.body=d;this.finish();return this},finishForInStatement:function(a,b,c){this.type=ja.ForInStatement;this.left=a;this.right=b;this.body=
c;this.each=!1;this.finish();return this},finishFunctionDeclaration:function(a,b,c,d){this.type=ja.FunctionDeclaration;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishFunctionExpression:function(a,b,c,d){this.type=ja.FunctionExpression;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishIdentifier:function(a){this.type=ja.Identifier;
this.name=a;this.finish();return this},finishIfStatement:function(a,b,c){this.type=ja.IfStatement;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishLiteral:function(a){this.type=ja.Literal;this.value=a.value;this.raw=I.slice(a.start,a.end);a.regex&&(this.regex=a.regex);this.finish();return this},finishMemberExpression:function(a,b,c){this.type=ja.MemberExpression;this.computed="["===a;this.object=b;this.property=c;this.finish();return this},finishObjectExpression:function(a){this.type=
ja.ObjectExpression;this.properties=a;this.finish();return this},finishPostfixExpression:function(a,b){this.type=ja.UpdateExpression;this.operator=a;this.argument=b;this.prefix=!1;this.finish();return this},finishProgram:function(a){this.type=ja.Program;this.body=a;this.finish();return this},finishProperty:function(a,b,c,d,e){this.type=ja.Property;this.key=b;this.value=c;this.kind=a;this.method=d;this.shorthand=e;this.finish();return this},finishReturnStatement:function(a){this.type=ja.ReturnStatement;
this.argument=a;this.finish();return this},finishUnaryExpression:function(a,b){this.type="++"===a||"--"===a?ja.UpdateExpression:ja.UnaryExpression;this.operator=a;this.argument=b;this.prefix=!0;this.finish();return this},finishVariableDeclaration:function(a,b){this.type=ja.VariableDeclaration;this.declarations=a;this.kind=b;this.finish();return this},finishVariableDeclarator:function(a,b){this.type=ja.VariableDeclarator;this.id=a;this.init=b;this.finish();return this}};b.version="2.0.0-dev";b.tokenize=
function(a,b){var c,d;c=String;"string"===typeof a||a instanceof String||(a=c(a));I=a;E=0;ia=0<I.length?1:0;ka=0;qa=I.length;X=null;ca={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};L={};b=b||{};b.tokens=!0;L.tokens=[];L.tokenize=!0;L.openParenToken=-1;L.openCurlyToken=-1;L.range="boolean"===typeof b.range&&b.range;L.loc="boolean"===typeof b.loc&&b.loc;"boolean"===typeof b.comment&&b.comment&&(L.comments=[]);"boolean"===typeof b.tolerant&&b.tolerant&&(L.errors=
[]);try{A();if(X.type===R.EOF)return L.tokens;for(y();X.type!==R.EOF;)try{y()}catch(Ra){if(L.errors){L.errors.push(Ra);break}else throw Ra;}Qa();d=L.tokens;"undefined"!==typeof L.comments&&(d.comments=L.comments);"undefined"!==typeof L.errors&&(d.errors=L.errors)}catch(Ra){throw Ra;}finally{L={}}return d};b.parse=function(a,b){var c,d;d=String;"string"===typeof a||a instanceof String||(a=d(a));I=a;E=0;ia=0<I.length?1:0;ka=0;qa=I.length;X=null;ca={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,
inIteration:!1,inSwitch:!1,lastCommentStart:-1};L={};"undefined"!==typeof b&&(L.range="boolean"===typeof b.range&&b.range,L.loc="boolean"===typeof b.loc&&b.loc,L.attachComment="boolean"===typeof b.attachComment&&b.attachComment,L.loc&&null!==b.source&&void 0!==b.source&&(L.source=d(b.source)),"boolean"===typeof b.tokens&&b.tokens&&(L.tokens=[]),"boolean"===typeof b.comment&&b.comment&&(L.comments=[]),"boolean"===typeof b.tolerant&&b.tolerant&&(L.errors=[]),L.attachComment&&(L.range=!0,L.comments=
[],L.bottomRightStack=[],L.trailingComments=[],L.leadingComments=[]));try{var e;p();A();e=new C;pa=!1;var g;a=[];for(var f,h,m;E<qa;){f=X;if(f.type!==R.StringLiteral)break;g=Ja();a.push(g);if(g.expression.type!==ja.Literal)break;h=I.slice(f.start+1,f.end-1);"use strict"===h?(pa=!0,m&&Z(m,na.StrictOctalLiteral)):!m&&f.octal&&(m=f)}for(;E<qa;){g=Ja();if("undefined"===typeof g)break;a.push(g)}c=e.finishProgram(a);"undefined"!==typeof L.comments&&(c.comments=L.comments);"undefined"!==typeof L.tokens&&
(Qa(),c.tokens=L.tokens);"undefined"!==typeof L.errors&&(c.errors=L.errors)}catch(jb){throw jb;}finally{L={}}return c};b.Syntax=function(){var a,b={};"function"===typeof Object.create&&(b=Object.create(null));for(a in ja)ja.hasOwnProperty(a)&&(b[a]=ja[a]);"function"===typeof Object.freeze&&Object.freeze(b);return b}()})},"esri/symbols/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/Warning ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol3D ../TextSymbol ../WebStyleSymbol ../callouts/LineCallout3D ./symbolConversion".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z,t,x,r,m){function e(a,b,c){b=a?y[a.type]||null:null;if(b)return b=new b,b.read(a,c),b;c&&c.messages&&a&&c.messages.push(new g("symbol:unsupported","Symbols of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:c}));return null}function w(a,b,c){if(!a)return null;if(!c||"web-scene"!==c.origin||a.isInstanceOf(z)||a.isInstanceOf(x))return a.write(b,c);var d=m.to3D(a);if(d.symbol)return d.symbol.write(b,c);c.messages&&c.messages.push(new q("symbol:unsupported",
"Symbols of type '"+a.declaredClass+"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView",{symbol:a,context:c,error:d.error}));return null}Object.defineProperty(f,"__esModule",{value:!0});var y={esriSMS:v,esriPMS:h,esriTS:t,esriSLS:u,esriSFS:p,esriPFS:d,PointSymbol3D:c,LineSymbol3D:l,PolygonSymbol3D:a,MeshSymbol3D:k,LabelSymbol3D:n,styleSymbolReference:x};f.read=e;f.writeTarget=function(a,b,c,d){(a=w(a,{},d))&&(b[c]=a)};f.write=w;f.fromJSON=function(a,
b){return e(a,null,b)};f.readCallout3D=function(a,b){if(!a||!a.type)return null;var c=null;switch(a.type){case "line":c=new r}c&&c.read(a,b);return c}})},"esri/symbols/LabelSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),function(b,f,q,g,n,l,k,d,h,c,a){var p=n.ofType({base:null,
key:"type",typeMap:{text:h}});return function(b){function d(a){a=b.call(this)||this;a.verticalOffset=null;a.callout=null;a.styleOrigin=null;a.symbolLayers=new p;a.type="label-3d";return a}q(d,b);f=d;d.prototype.supportsCallout=function(){return!0};d.prototype.hasVisibleCallout=function(){return c.hasVisibleCallout(this)};d.prototype.hasVisibleVerticalOffset=function(){return c.hasVisibleVerticalOffset(this)};d.prototype.clone=function(){return new f({styleOrigin:l.clone(this.styleOrigin),symbolLayers:l.clone(this.symbolLayers),
thumbnail:l.clone(this.thumbnail),callout:l.clone(this.callout),verticalOffset:l.clone(this.verticalOffset)})};g([k.property({type:a.default,json:{write:!0}})],d.prototype,"verticalOffset",void 0);g([k.property(c.calloutProperty)],d.prototype,"callout",void 0);g([k.property({json:{read:!1,write:!1}})],d.prototype,"styleOrigin",void 0);g([k.property({type:p})],d.prototype,"symbolLayers",void 0);g([k.property()],d.prototype,"type",void 0);return d=f=g([k.subclass("esri.symbols.LabelSymbol3D")],d);var f}(k.declared(d))})},
"esri/symbols/Symbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/collectionUtils ../core/Logger ../core/urlUtils ../core/Warning ../core/accessorSupport/decorators ../portal/Portal ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./PathSymbol3DLayer ./Symbol ./Symbol3DLayer ./TextSymbol3DLayer ./support/StyleOrigin ./support/Thumbnail".split(" "),function(b,
f,q,g,n,l,k,d,h,c,a,p,u,v,z,t,x,r,m,e,w,y){var A={icon:v,object:t,line:z,path:x,fill:u,extrude:p,text:e},D=n.ofType({base:m,key:"type",typeMap:A}),B=k.getLogger("esri.symbols.Symbol3D");return function(b){function e(a){a=b.call(this)||this;a.styleOrigin=null;a.thumbnail=null;a.type=null;var c=a.__accessor__&&a.__accessor__.metadatas&&a.__accessor__.metadatas.symbolLayers;a._set("symbolLayers",new (c&&c.type||n));return a}q(e,b);Object.defineProperty(e.prototype,"color",{get:function(){return null},
set:function(a){B.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"symbolLayers",{set:function(a){l.referenceSetter(a,this._get("symbolLayers"))},enumerable:!0,configurable:!0});e.prototype.readSymbolLayers=function(a,b,c){b=[];for(var d=0;d<a.length;d++){var e=a[d],g=m.typeJSONDictionary.read(e.type),f=A[g];f?(e=new f,e.read(a[d],c),b.push(e)):(B.warn("Unknown symbol layer type: "+
g),c&&c.messages&&c.messages.push(new h("symbol-layer:unsupported","Symbol layers of type '"+(g||"unknown")+"' are not supported",{definition:e,context:c})))}return b};e.prototype.readStyleOrigin=function(b,c,e){if(b.styleUrl&&b.name)return c=d.read(b.styleUrl,e),new w({styleUrl:c,name:b.name});if(b.styleName&&b.name)return new w({portal:e&&e.portal||a.getDefault(),styleName:b.styleName,name:b.name});e&&e.messages&&e.messages.push(new h("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",
{context:e,definition:b}))};e.prototype.writeStyleOrigin=function(a,b,c,e){a.styleUrl&&a.name?(c=d.write(a.styleUrl,e),d.isAbsolute(c)&&(c=d.normalize(c)),b.styleOrigin={styleUrl:c,name:a.name}):a.styleName&&a.name&&(a.portal&&e&&e.portal&&!d.hasSamePortal(a.portal.restUrl,e.portal.restUrl)?e&&e.messages&&e.messages.push(new h("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):b.styleOrigin=
{styleName:a.styleName,name:a.name})};e.prototype.normalizeCtorArgs=function(a){return a instanceof m||a&&A[a.type]?{symbolLayers:[a]}:Array.isArray(a)?{symbolLayers:a}:a};g([c.property({json:{read:!1,write:!1}})],e.prototype,"color",null);g([c.property({type:D,nonNullable:!0,json:{write:!0}}),c.cast(l.castForReferenceSetter)],e.prototype,"symbolLayers",null);g([c.reader("symbolLayers")],e.prototype,"readSymbolLayers",null);g([c.property({type:w})],e.prototype,"styleOrigin",void 0);g([c.reader("styleOrigin")],
e.prototype,"readStyleOrigin",null);g([c.writer("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],e.prototype,"writeStyleOrigin",null);g([c.property({type:y.default,json:{read:!1}})],e.prototype,"thumbnail",void 0);g([c.property({type:String,readOnly:!0,json:{read:!1}})],e.prototype,"type",void 0);return e=g([c.subclass("esri.symbols.Symbol3D")],e)}(c.declared(r))})},"esri/symbols/ExtrudeSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./edges/utils".split(" "),
function(b,f,q,g,n,l,k){return function(b){function d(a){a=b.call(this)||this;a.type="extrude";a.size=void 0;a.material=null;a.edges=null;return a}q(d,b);c=d;d.prototype.clone=function(){return new c({edges:this.edges&&this.edges.clone(),enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})};g([n.property()],d.prototype,"type",void 0);g([n.property({type:Number,json:{write:!0}})],d.prototype,"size",void 0);
g([n.property()],d.prototype,"material",void 0);g([n.property(k.symbol3dEdgesProperty)],d.prototype,"edges",void 0);return d=c=g([n.subclass("esri.symbols.ExtrudeSymbol3DLayer")],d);var c}(n.declared(l))})},"esri/symbols/Symbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/kebabDictionary ../core/accessorSupport/decorators ./support/ElevationInfo ./support/Symbol3DMaterial".split(" "),function(b,f,q,g,
n,l,k,d,h){var c=l({Icon:"icon",Object:"object",Line:"line",Path:"path",Fill:"fill",Extrude:"extrude",Text:"text"});b=function(a){function b(b){b=a.call(this)||this;b.enabled=!0;b.material=null;b.type=null;return b}q(b,a);b.prototype.writeEnabled=function(a,b,c){a||(b[c]=a)};g([k.property({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],b.prototype,"enabled",void 0);g([k.writer("enabled")],b.prototype,"writeEnabled",null);g([k.property({type:d,json:{read:!1,write:!1}})],b.prototype,
"elevationInfo",void 0);g([k.property({type:h.default,json:{write:!0}})],b.prototype,"material",void 0);g([k.property({type:String,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:c.write}}})],b.prototype,"type",void 0);return b=g([k.subclass("esri.symbols.Symbol3DLayer")],b)}(k.declared(n));(b||(b={})).typeJSONDictionary=c;return b})},"esri/symbols/support/ElevationInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../support/arcadeUtils".split(" "),
function(b,f,q,g,n,l,k,d){var h=l({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),c=l({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"}),a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}q(b,a);c=b;Object.defineProperty(b.prototype,"requiredFields",{get:function(){return d.extractFieldNames(this.expression)},enumerable:!0,configurable:!0});
b.prototype.clone=function(){return new c({expression:this.expression,title:this.title})};g([k.property({type:String,json:{write:!0}})],b.prototype,"expression",void 0);g([k.property({readOnly:!0,dependsOn:["expression"]})],b.prototype,"requiredFields",null);g([k.property({type:String,json:{write:!0}})],b.prototype,"title",void 0);return b=c=g([k.subclass("esri.layers.support.FeatureExpressionInfo")],b);var c}(k.declared(n));return function(b){function d(){return null!==b&&b.apply(this,arguments)||
this}q(d,b);f=d;d.prototype.readFeatureExpressionInfo=function(a,b){if(null!=a)return a;if(b.featureExpression&&0===b.featureExpression.value)return{expression:"0"}};d.prototype.writeFeatureExpressionInfo=function(a,b,c,d){b[c]=a.write(null,d);"0"===a.expression&&(b.featureExpression={value:0})};Object.defineProperty(d.prototype,"mode",{get:function(){var a=this._get("mode");return a?a:null!=this.offset||this.featureExpressionInfo?"relative-to-ground":"on-the-ground"},set:function(a){this._set("mode",
a)},enumerable:!0,configurable:!0});d.prototype.write=function(a,b){return this.offset||this.mode||this.featureExpressionInfo||this.unit?this.inherited(arguments):null};d.prototype.clone=function(){return new f({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})};g([k.property({type:a,json:{write:!0}})],d.prototype,"featureExpressionInfo",void 0);g([k.reader("featureExpressionInfo",["featureExpressionInfo",
"featureExpression"])],d.prototype,"readFeatureExpressionInfo",null);g([k.writer("featureExpressionInfo",{featureExpressionInfo:{type:a},"featureExpression.value":{type:Number}})],d.prototype,"writeFeatureExpressionInfo",null);g([k.property({type:String,dependsOn:["offset","featureExpressionInfo"],json:{read:h.read,write:{writer:h.write,isRequired:!0}}})],d.prototype,"mode",null);g([k.property({type:Number,json:{write:!0}})],d.prototype,"offset",void 0);g([k.property({type:String,json:{read:c.read,
write:c.write}})],d.prototype,"unit",void 0);return d=f=g([k.subclass("esri.layers.support.ElevationInfo")],d);var f}(k.declared(n))})},"esri/symbols/support/Symbol3DMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./materialUtils".split(" "),function(b,f,q,g,n,l,k){Object.defineProperty(f,"__esModule",{value:!0});b=function(b){function d(){return null!==b&&b.apply(this,
arguments)||this}q(d,b);c=d;d.prototype.clone=function(){return new c({color:this.color?this.color.clone():null})};g([l.property(k.colorAndTransparencyProperty)],d.prototype,"color",void 0);return d=c=g([l.subclass("esri.symbols.support.Symbol3DMaterial")],d);var c}(l.declared(n));f.Symbol3DMaterial=b;f.default=b})},"esri/symbols/support/materialUtils":function(){define("require exports ../../Color ../../core/screenUtils ../../core/accessorSupport/ensureType ../../webdoc/support/opacityUtils".split(" "),
function(b,f,q,g,n,l){function k(b,c){b=null!=c.transparency?l.transparencyToOpacity(c.transparency):1;if((c=c.color)&&Array.isArray(c))return new q([c[0]||0,c[1]||0,c[2]||0,b])}function d(b,c){c.color=b.toJSON().slice(0,3);b=l.opacityToTransparency(b.a);0!==b&&(c.transparency=b)}Object.defineProperty(f,"__esModule",{value:!0});f.readColorAndTransparency=k;f.writeColorAndTransparency=d;f.colorAndTransparencyProperty={type:q,json:{type:[n.Integer],read:{source:["color","transparency"],reader:k},write:{target:{color:{type:[n.Integer]},
transparency:{type:n.Integer}},writer:d}}};f.screenSizeProperty={type:Number,cast:g.toPt,json:{write:!0}}})},"esri/core/screenUtils":function(){define(["require","exports"],function(b,f){function q(b){return b?72*b/f.DPI:0}Object.defineProperty(f,"__esModule",{value:!0});var g=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;f.DPI=96;f.pt2px=function(b){return b?b/72*f.DPI:0};f.px2pt=q;f.toPt=function(b){if("string"===typeof b){if(g.test(b)){var f=b.match(g),k=Number(f[1]),f=f[3]&&f[3].toLowerCase();b="-"===b.charAt(0);
k="px"===f?q(k):k;return b?-k:k}console.warn("screenUtils.toPt: input not recognized!");return null}return b}})},"esri/symbols/edges/utils":function(){define(["require","exports","./Edges3D","./SketchEdges3D","./SolidEdges3D"],function(b,f,q,g,n){function l(b,d,f){if(!b)return b;switch(b.type){case "solid":return d=new n,d.read(b,f),d;case "sketch":return d=new g,d.read(b,f),d}}Object.defineProperty(f,"__esModule",{value:!0});f.read=l;f.symbol3dEdgesProperty={types:{key:"type",base:q,typeMap:{solid:n,
sketch:g}},json:{read:l,write:!0}}})},"esri/symbols/edges/Edges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper dojo/_base/lang ../../Color ../../core/JSONSupport ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),function(b,f,q,g,n,l,k,d,h,c,a,p){return function(b){function d(a){a=b.call(this)||this;a.color=new k([0,0,0,1]);a.extensionLength=
0;a.size=c.px2pt(1);return a}q(d,b);d.prototype.normalizeCtorArgs=function(a){a&&a.type&&(a=l.mixin({},a),delete a.type);return a};d.prototype.clone=function(){};d.prototype.cloneProperties=function(){return{color:h.clone(this.color),size:this.size,extensionLength:this.extensionLength}};g([a.property({type:String,readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],d.prototype,"type",void 0);g([a.property(p.colorAndTransparencyProperty)],d.prototype,"color",void 0);g([a.property(n({},p.screenSizeProperty,
{json:{write:{overridePolicy:function(a){return{enabled:!!a}}}}}))],d.prototype,"extensionLength",void 0);g([a.property(p.screenSizeProperty)],d.prototype,"size",void 0);return d=g([a.subclass("esri.symbols.edges.Edges3D")],d)}(a.declared(d))})},"esri/symbols/edges/SketchEdges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Edges3D".split(" "),function(b,f,q,g,n,l){return function(b){function d(c){c=
b.call(this)||this;c.type="sketch";return c}q(d,b);f=d;d.prototype.clone=function(){return new f(this.cloneProperties())};g([n.property({type:String})],d.prototype,"type",void 0);return d=f=g([n.subclass("esri.symbols.edges.SketchEdges3D")],d);var f}(n.declared(l))})},"esri/symbols/edges/SolidEdges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Edges3D".split(" "),function(b,f,q,g,n,l){return function(b){function d(c){c=
b.call(this)||this;c.type="solid";return c}q(d,b);f=d;d.prototype.clone=function(){return new f(this.cloneProperties())};g([n.property({type:String})],d.prototype,"type",void 0);return d=f=g([n.subclass("esri.symbols.support.SolidEdges3D")],d);var f}(n.declared(l))})},"esri/symbols/FillSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./edges/utils ./support/Symbol3DFillMaterial ./support/Symbol3DOutline".split(" "),
function(b,f,q,g,n,l,k,d,h){return function(b){function a(a){a=b.call(this)||this;a.type="fill";a.material=null;a.outline=null;a.edges=null;return a}q(a,b);c=a;a.prototype.clone=function(){return new c({edges:this.edges&&this.edges.clone(),enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone()})};g([n.property()],a.prototype,"type",void 0);g([n.property({type:d.default})],a.prototype,
"material",void 0);g([n.property({type:h.default,json:{write:!0}})],a.prototype,"outline",void 0);g([n.property(k.symbol3dEdgesProperty)],a.prototype,"edges",void 0);return a=c=g([n.subclass("esri.symbols.FillSymbol3DLayer")],a);var c}(n.declared(l))})},"esri/symbols/support/Symbol3DFillMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Symbol3DMaterial".split(" "),function(b,f,q,g,n,l){Object.defineProperty(f,
"__esModule",{value:!0});b=function(b){function d(){return null!==b&&b.apply(this,arguments)||this}q(d,b);f=d;d.prototype.clone=function(){return new f({color:this.color?this.color.clone():null,colorMixMode:this.colorMixMode})};g([n.property({type:String,json:{read:!0,write:!0}})],d.prototype,"colorMixMode",void 0);return d=f=g([n.subclass("esri.symbols.support.Symbol3DFillMaterial")],d);var f}(n.declared(l.default));f.Symbol3DFillMaterial=b;f.default=b})},"esri/symbols/support/Symbol3DOutline":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/screenUtils ../../core/accessorSupport/decorators ./materialUtils".split(" "),
function(b,f,q,g,n,l,k,d,h){Object.defineProperty(f,"__esModule",{value:!0});b=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.color=new n([0,0,0,1]);a.size=k.px2pt(1);return a}q(a,b);c=a;a.prototype.clone=function(){return new c({color:this.color?this.color.clone():null,size:this.size})};g([d.property(h.colorAndTransparencyProperty)],a.prototype,"color",void 0);g([d.property(h.screenSizeProperty)],a.prototype,"size",void 0);return a=c=g([d.subclass("esri.symbols.support.Symbol3DOutline")],
a);var c}(d.declared(l));f.Symbol3DOutline=b;f.default=b})},"esri/symbols/IconSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ../core/accessorSupport/decorators ./Symbol3DLayer ./support/IconSymbol3DLayerResource ./support/materialUtils ./support/Symbol3DOutline".split(" "),function(b,f,q,g,n,l,k,d,h,c){var a=n({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",
bottomLeft:"bottom-left",bottomRight:"bottom-right"},{ignoreUnknown:!0});return function(b){function f(a){a=b.call(this)||this;a.material=null;a.resource=null;a.type="icon";a.size=12;a.anchor=void 0;a.outline=void 0;return a}q(f,b);p=f;f.prototype.clone=function(){return new p({anchor:this.anchor,enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone(),resource:this.resource&&this.resource.clone(),
size:this.size})};g([l.property()],f.prototype,"material",void 0);g([l.property({type:d.default,json:{write:!0}})],f.prototype,"resource",void 0);g([l.property()],f.prototype,"type",void 0);g([l.property(h.screenSizeProperty)],f.prototype,"size",void 0);g([l.property({type:String,json:{read:a.read,write:a.write}})],f.prototype,"anchor",void 0);g([l.property({type:c.default,json:{write:!0}})],f.prototype,"outline",void 0);return f=p=g([l.subclass("esri.symbols.IconSymbol3DLayer")],f);var p}(l.declared(k))})},
"esri/symbols/support/IconSymbol3DLayerResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/urlUtils ../../core/accessorSupport/decorators".split(" "),function(b,f,q,g,n,l,k){Object.defineProperty(f,"__esModule",{value:!0});b=function(b){function d(){return null!==b&&b.apply(this,arguments)||this}q(d,b);c=d;d.prototype.readHref=function(a,b,c){return a?l.read(a,c):b.dataURI};d.prototype.writeHref=
function(a,b,c,d){a&&(l.isDataProtocol(a)?b.dataURI=a:(b.href=l.write(a,d),l.isAbsolute(b.href)&&(b.href=l.normalize(b.href))))};d.prototype.clone=function(){return new c({href:this.href,primitive:this.primitive})};g([k.property({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],d.prototype,"href",void 0);g([k.reader("href")],d.prototype,"readHref",null);g([k.writer("href",{href:{type:String},dataURI:{type:String}})],d.prototype,"writeHref",null);g([k.property({type:String,json:{write:!0}})],
d.prototype,"primitive",void 0);return d=c=g([k.subclass("esri.symbols.support.IconSymbol3DLayerResource")],d);var c}(k.declared(n));f.IconSymbol3DLayerResource=b;f.default=b})},"esri/symbols/LineSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/screenUtils ../core/accessorSupport/decorators ./Symbol3DLayer ./support/materialUtils".split(" "),function(b,f,q,g,n,l,k,d){return function(b){function c(a){a=b.call(this)||this;
a.material=null;a.type="line";a.size=n.px2pt(1);return a}q(c,b);a=c;c.prototype.clone=function(){return new a({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})};g([l.property()],c.prototype,"material",void 0);g([l.property()],c.prototype,"type",void 0);g([l.property(d.screenSizeProperty)],c.prototype,"size",void 0);return c=a=g([l.subclass("esri.symbols.LineSymbol3DLayer")],c);var a}(l.declared(k))})},
"esri/symbols/ObjectSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ../core/accessorSupport/decorators ./Symbol3DLayer ./support/ObjectSymbol3DLayerResource ./support/Symbol3DMaterial".split(" "),function(b,f,q,g,n,l,k,d,h){var c=n({center:"center",top:"top",bottom:"bottom",origin:"origin"},{ignoreUnknown:!0});return function(a){function b(b){b=a.call(this)||this;b.material=null;b.resource=null;b.type=
"object";b.width=void 0;b.height=void 0;b.depth=void 0;b.anchor=void 0;b.heading=void 0;b.tilt=void 0;b.roll=void 0;return b}q(b,a);f=b;b.prototype.clone=function(){return new f({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,depth:this.depth,enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),height:this.height,material:this.material&&this.material.clone(),resource:this.resource&&this.resource.clone(),width:this.width})};Object.defineProperty(b.prototype,
"isPrimitive",{get:function(){return!this.resource||"string"!==typeof this.resource.href},enumerable:!0,configurable:!0});g([l.property({type:h.default})],b.prototype,"material",void 0);g([l.property({type:d.default,json:{write:!0}})],b.prototype,"resource",void 0);g([l.property()],b.prototype,"type",void 0);g([l.property({type:Number,json:{write:!0}})],b.prototype,"width",void 0);g([l.property({type:Number,json:{write:!0}})],b.prototype,"height",void 0);g([l.property({type:Number,json:{write:!0}})],
b.prototype,"depth",void 0);g([l.property({type:String,json:{read:c.read,write:c.write}})],b.prototype,"anchor",void 0);g([l.property({type:Number,json:{write:!0}})],b.prototype,"heading",void 0);g([l.property({type:Number,json:{write:!0}})],b.prototype,"tilt",void 0);g([l.property({type:Number,json:{write:!0}})],b.prototype,"roll",void 0);g([l.property({readOnly:!0,dependsOn:["resource","resource.href"]})],b.prototype,"isPrimitive",null);return b=f=g([l.subclass("esri.symbols.ObjectSymbol3DLayer")],
b);var f}(l.declared(k))})},"esri/symbols/support/ObjectSymbol3DLayerResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/urlUtils ../../core/accessorSupport/decorators".split(" "),function(b,f,q,g,n,l,k,d){Object.defineProperty(f,"__esModule",{value:!0});var h=l({invertedCone:"inverted-cone"});b=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}
q(a,b);c=a;a.prototype.readHref=function(a,b,c){return k.read(a,c)};a.prototype.writeHref=function(a,b,c,d){a&&(b.href=k.write(a,d),k.isAbsolute(b.href)&&(b.href=k.normalize(b.href)))};a.prototype.readPrimitive=function(a){return h.fromJSON(a)};a.prototype.writePrimitive=function(a,b){b.primitive=h.toJSON(a)};a.prototype.clone=function(){return new c({href:this.href,primitive:this.primitive})};g([d.property({type:String,json:{write:!0}})],a.prototype,"href",void 0);g([d.reader("href")],a.prototype,
"readHref",null);g([d.writer("href")],a.prototype,"writeHref",null);g([d.property({type:String,json:{write:!0}})],a.prototype,"primitive",void 0);g([d.reader("primitive")],a.prototype,"readPrimitive",null);g([d.writer("primitive")],a.prototype,"writePrimitive",null);return a=c=g([d.subclass("esri.symbols.support.ObjectSymbol3DLayerResource")],a);var c}(d.declared(n));f.ObjectSymbol3DLayerResource=b;f.default=b})},"esri/symbols/PathSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer".split(" "),
function(b,f,q,g,n,l){return function(b){function d(c){c=b.call(this)||this;c.material=null;c.type="path";c.size=void 0;return c}q(d,b);f=d;d.prototype.readSize=function(b,a){return b||a.width||0};d.prototype.clone=function(){return new f({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})};g([n.property()],d.prototype,"material",void 0);g([n.property()],d.prototype,"type",void 0);g([n.property({type:Number,
json:{write:{enabled:!0,target:{size:{type:Number},width:{type:Number}}}}})],d.prototype,"size",void 0);g([n.reader("size",["size","width"])],d.prototype,"readSize",null);return d=f=g([n.subclass("esri.symbols.PathSymbol3DLayer")],d);var f}(n.declared(l))})},"esri/symbols/Symbol":function(){define(["../core/lang","../core/kebabDictionary","../core/JSONSupport","../Color"],function(b,f,q,g){var n=f({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",
esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"}),l=0;return q.createSubclass({declaredClass:"esri.symbols.Symbol",constructor:function(){this.id="sym"+l++},properties:{type:{type:String,value:null,json:{read:n.fromJSON,write:{ignoreOrigin:!0,writer:function(b,d){d.type=n.toJSON(this.type)}}}},color:{type:g,value:new g([0,0,0,1]),json:{read:function(g){return g&&b.isDefined(g[0])?
[g[0],g[1],g[2],g[3]/255]:g},write:{allowNull:!0}}}}})})},"esri/symbols/TextSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Symbol3DLayer ./support/materialUtils ./support/Symbol3DHalo".split(" "),function(b,f,q,g,n,l,k,d,h){return function(b){function a(a){a=b.call(this)||this;a.font=null;a.halo=null;a.material=null;a.size=void 0;a.text=void 0;a.type="text";return a}q(a,b);
c=a;a.prototype.writeFont=function(a,b){a&&(b.font=n.clone(a))};a.prototype.clone=function(){return new c({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),font:this.font&&n.clone(this.font),halo:this.halo&&n.clone(this.halo),material:this.material&&this.material.clone(),size:this.size,text:this.text})};g([l.property()],a.prototype,"font",void 0);g([l.writer("font",{"font.family":{type:String},"font.weight":{type:String},"font.style":{type:String},"font.decoration":{type:String},
"font.size":{type:Number}})],a.prototype,"writeFont",null);g([l.property({type:h.default,json:{write:!0}})],a.prototype,"halo",void 0);g([l.property()],a.prototype,"material",void 0);g([l.property(d.screenSizeProperty)],a.prototype,"size",void 0);g([l.property({type:String,json:{write:!0}})],a.prototype,"text",void 0);g([l.property()],a.prototype,"type",void 0);return a=c=g([l.subclass("esri.symbols.TextSymbol3DLayer")],a);var c}(l.declared(k))})},"esri/symbols/support/Symbol3DHalo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./materialUtils".split(" "),
function(b,f,q,g,n,l,k,d,h){Object.defineProperty(f,"__esModule",{value:!0});b=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.color=new n([0,0,0,1]);a.size=0;return a}q(a,b);c=a;a.prototype.clone=function(){return new c({color:k.clone(this.color),size:this.size})};g([d.property(h.colorAndTransparencyProperty)],a.prototype,"color",void 0);g([d.property(h.screenSizeProperty)],a.prototype,"size",void 0);return a=c=g([d.subclass("esri.symbols.support.Symbol3DHalo")],a);var c}(d.declared(l));
f.Symbol3DHalo=b;f.default=b})},"esri/symbols/support/StyleOrigin":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../portal/Portal".split(" "),function(b,f,q,g,n,l,k){return function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;a.portal=null;return a}q(d,b);c=d;d.prototype.clone=function(){return new c({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,
portal:this.portal})};g([l.property({type:String})],d.prototype,"name",void 0);g([l.property({type:String})],d.prototype,"styleUrl",void 0);g([l.property({type:String})],d.prototype,"styleName",void 0);g([l.property({type:k})],d.prototype,"portal",void 0);return d=c=g([l.subclass("esri.symbols.support.StyleOrigin")],d);var c}(l.declared(n))})},"esri/symbols/support/Thumbnail":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),
function(b,f,q,g,n,l){Object.defineProperty(f,"__esModule",{value:!0});b=function(b){function d(){return null!==b&&b.apply(this,arguments)||this}q(d,b);f=d;d.prototype.clone=function(){return new f({url:this.url})};g([l.property({type:String})],d.prototype,"url",void 0);return d=f=g([l.subclass("esri.symbols.support.Thumbnail")],d);var f}(l.declared(n));f.Thumbnail=b;f.default=b})},"esri/symbols/callouts/calloutUtils":function(){define(["require","exports","./Callout3D","./LineCallout3D"],function(b,
f,q,g){function n(b){if(!b)return!1;b=b.verticalOffset;return!b||0>=b.screenLength||0>=b.maxWorldLength?!1:!0}function l(b,d,f){if(!b)return b;switch(b.type){case "line":return d=new g,d.read(b,f),d}}Object.defineProperty(f,"__esModule",{value:!0});f.hasVisibleVerticalOffset=n;f.hasVisibleCallout=function(b){if(!b||!b.supportsCallout||!b.supportsCallout())return!1;var d=b.callout;return d&&d.visible?n(b)?!0:!1:!1};f.isCalloutSupport=function(b){return"point-3d"===b.type||"label-3d"===b.type};f.read=
l;f.calloutProperty={types:{key:"type",base:q,typeMap:{line:g}},json:{read:l,write:!0}}})},"esri/symbols/callouts/Callout3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/_base/lang ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(b,f,q,g,n,l,k){return function(b){function d(c){c=b.call(this)||this;c.visible=!0;return c}q(d,b);d.prototype.normalizeCtorArgs=function(b){b&&b.type&&(b=n.mixin({},
b),delete b.type);return b};d.prototype.clone=function(){};g([k.property({type:String,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],d.prototype,"type",void 0);g([k.property({readOnly:!0})],d.prototype,"visible",void 0);return d=g([k.subclass("esri.symbols.callouts.Callout3D")],d)}(k.declared(l))})},"esri/symbols/callouts/LineCallout3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators ./Callout3D ./LineCallout3DBorder ../support/materialUtils".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a){return function(b){function f(a){a=b.call(this)||this;a.type="line";a.color=new n([0,0,0,1]);a.size=k.px2pt(1);a.border=null;return a}q(f,b);h=f;Object.defineProperty(f.prototype,"visible",{get:function(){return 0<this.size&&0<this.color.a},enumerable:!0,configurable:!0});f.prototype.clone=function(){return new h({color:l.clone(this.color),size:this.size,border:l.clone(this.border)})};g([d.property({type:String})],f.prototype,"type",void 0);g([d.property(a.colorAndTransparencyProperty)],
f.prototype,"color",void 0);g([d.property(a.screenSizeProperty)],f.prototype,"size",void 0);g([d.property({type:c.default,json:{write:!0}})],f.prototype,"border",void 0);g([d.property({dependsOn:["size","color"],readOnly:!0})],f.prototype,"visible",null);return f=h=g([d.subclass("esri.symbols.callouts.LineCallout3D")],f);var h}(d.declared(h))})},"esri/symbols/callouts/LineCallout3DBorder":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),
function(b,f,q,g,n,l,k,d,h){Object.defineProperty(f,"__esModule",{value:!0});b=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.color=new n("white");return a}q(a,b);c=a;a.prototype.clone=function(){return new c({color:k.clone(this.color)})};g([d.property(h.colorAndTransparencyProperty)],a.prototype,"color",void 0);return a=c=g([d.subclass("esri.symbols.callouts.LineCallout3DBorder")],a);var c}(d.declared(l));f.LineCallout3DBorder=b;f.default=b})},"esri/symbols/support/Symbol3DVerticalOffset":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./materialUtils".split(" "),
function(b,f,q,g,n,l,k){Object.defineProperty(f,"__esModule",{value:!0});b=function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;a.screenLength=0;a.minWorldLength=0;return a}q(d,b);c=d;d.prototype.writeMinWorldLength=function(a,b,c){a&&(b[c]=a)};d.prototype.clone=function(){return new c({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})};g([l.property(k.screenSizeProperty)],d.prototype,"screenLength",void 0);g([l.property({type:Number,
json:{write:!0}})],d.prototype,"minWorldLength",void 0);g([l.writer("minWorldLength")],d.prototype,"writeMinWorldLength",null);g([l.property({type:Number,json:{write:!0}})],d.prototype,"maxWorldLength",void 0);return d=c=g([l.subclass("esri.symbols.support.Symbol3DVerticalOffset")],d);var c}(l.declared(n));f.Symbol3DVerticalOffset=b;f.default=b})},"esri/symbols/LineSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./LineSymbol3DLayer ./PathSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a){var p=n.ofType({base:null,key:"type",typeMap:{line:d,text:a,path:h}});return function(a){function b(b){b=a.call(this)||this;b.symbolLayers=new p;b.type="line-3d";return b}q(b,a);c=b;b.prototype.clone=function(){return new c({styleOrigin:l.clone(this.styleOrigin),symbolLayers:l.clone(this.symbolLayers),thumbnail:l.clone(this.thumbnail)})};g([k.property({type:p})],b.prototype,"symbolLayers",void 0);g([k.property()],b.prototype,"type",void 0);return b=c=g([k.subclass("esri.symbols.LineSymbol3D")],
b);var c}(k.declared(c))})},"esri/symbols/MeshSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./FillSymbol3DLayer ./Symbol3D".split(" "),function(b,f,q,g,n,l,k,d,h){var c=n.ofType({base:null,key:"type",typeMap:{fill:d}});return function(a){function b(b){b=a.call(this)||this;b.symbolLayers=new c;b.type="mesh-3d";return b}q(b,a);d=b;b.prototype.clone=function(){return new d({styleOrigin:l.clone(this.styleOrigin),
symbolLayers:l.clone(this.symbolLayers),thumbnail:l.clone(this.thumbnail)})};g([k.property({type:c})],b.prototype,"symbolLayers",void 0);g([k.property()],b.prototype,"type",void 0);return b=d=g([k.subclass("esri.symbols.MeshSymbol3D")],b);var d}(k.declared(h))})},"esri/symbols/PictureFillSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ./FillSymbol ./support/urlUtils".split(" "),function(b,f,q,g,n,l){var k={xscale:1,yscale:1,xoffset:0,yoffset:0,width:12,
height:12},d=b(n,{declaredClass:"esri.symbols.PictureFillSymbol",properties:{type:"picture-fill",url:l.urlPropertyDefinition,xscale:{value:1,json:{write:!0}},yscale:{value:1,json:{write:!0}},width:{value:12,cast:g.toPt,json:{write:!0}},height:{value:12,cast:g.toPt,json:{write:!0}},xoffset:{value:0,cast:g.toPt,json:{write:!0}},yoffset:{value:0,cast:g.toPt,json:{write:!0}},source:l.sourcePropertyDefinition},getDefaults:function(){return f.mixin(this.inherited(arguments),k)},normalizeCtorArgs:function(b,
c,a,d){if(b&&"string"!==typeof b&&null==b.imageData)return b;var f={};b&&(f.url=b);c&&(f.outline=c);null!=a&&(f.width=g.toPt(a));null!=d&&(f.height=g.toPt(d));return f},clone:function(){var b=new d({color:q.clone(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});b._set("source",q.clone(this.source));return b}});d.defaultProps=k;return d})},"esri/symbols/FillSymbol":function(){define(["./Symbol",
"./SimpleLineSymbol"],function(b,f){return b.createSubclass({declaredClass:"esri.symbols.FillSymbol",properties:{outline:{type:f,json:{read:{default:null},write:!0}},type:null}})})},"esri/symbols/SimpleLineSymbol":function(){define(["../core/declare","dojo/_base/lang","../core/lang","../core/screenUtils","./LineSymbol"],function(b,f,q,g,n){var l={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dash-dot",STYLE_DASHDOTDOT:"long-dash-dot-dot",STYLE_NULL:"none",STYLE_SHORTDASH:"short-dash",
STYLE_SHORTDOT:"short-dot",STYLE_SHORTDASHDOT:"short-dash-dot",STYLE_SHORTDASHDOTDOT:"short-dash-dot-dot",STYLE_LONGDASH:"long-dash",STYLE_LONGDASHDOT:"long-dash-dot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},k={color:[0,0,0,1],style:l.STYLE_SOLID,width:.75,cap:l.CAP_BUTT,join:l.JOIN_MITER,miterLimit:7.5},d=b(n,{declaredClass:"esri.symbols.SimpleLineSymbol",properties:{type:"simple-line",style:{value:l.STYLE_SOLID,json:{read:function(b,
c){return q.valueOf(this._jsonStyles,b)||void 0},write:function(b,c){c.style=this._jsonStyles[b]}}},cap:{value:l.CAP_BUTT,json:{read:!1,write:!1}},join:{value:l.JOIN_MITER,json:{read:!1,write:!1}},miterLimit:{value:7.5,cast:g.toPt,json:{read:!1,write:!1}}},_jsonStyles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot","dash-dot":"esriSLSDashDot","long-dash-dot-dot":"esriSLSDashDotDot",none:"esriSLSNull","inside-frame":"esriSLSInsideFrame","short-dash":"esriSLSShortDash","short-dot":"esriSLSShortDot",
"short-dash-dot":"esriSLSShortDashDot","short-dash-dot-dot":"esriSLSShortDashDotDot","long-dash":"esriSLSLongDash","long-dash-dot":"esriSLSLongDashDot"},getDefaults:function(){return f.mixin(this.inherited(arguments),k)},normalizeCtorArgs:function(b,c,a,d,f,k){if(b&&"string"!==typeof b)return b;var h={};null!=b&&(h.style=b);null!=c&&(h.color=c);null!=a&&(h.width=g.toPt(a));null!=d&&(h.cap=d);null!=f&&(h.join=f);null!=k&&(h.miterLimit=g.toPt(k));return h},clone:function(){return new d({color:q.clone(this.color),
style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit})}});f.mixin(d,l);d.defaultProps=k;return d})},"esri/symbols/LineSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],function(b,f,q){return b(q,{declaredClass:"esri.symbols.LineSymbol",properties:{color:{},type:"simple-line",width:{value:.75,cast:f.toPt,json:{write:!0}}}})})},"esri/symbols/support/urlUtils":function(){define(["require","exports","../../core/urlUtils"],function(b,f,q){function g(b,
g,c){return g.imageData?q.makeData({mediaType:g.contentType||"image/png",isBase64:!0,data:g.imageData}):n(g.url,c)}function n(b,g){return!g||"service"!==g.origin&&"portal-item"!==g.origin||!g.layer||"feature"!==g.layer.type&&"stream"!==g.layer.type||q.isAbsolute(b)||!g.layer.parsedUrl?q.read(b,g):q.join(g.layer.parsedUrl.path,"images",b)}function l(b,g,c,a){q.isDataProtocol(b)?(b=q.dataComponents(b),g.contentType=b.mediaType,g.imageData=b.data,c&&c.imageData===g.imageData&&c.url&&(g.url=k(c.url,a))):
g.url=k(b,a)}function k(b,g){return q.write(b,g)}Object.defineProperty(f,"__esModule",{value:!0});f.readImageDataOrUrl=g;f.read=n;f.writeImageDataAndUrl=l;f.write=k;f.urlPropertyDefinition={json:{read:{source:["imageData","url"],reader:g},write:{writer:function(b,g,c,a){l(b,g,this.source,a)}}}};f.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(b,g,c){b={};g.imageData&&(b.imageData=g.imageData);g.contentType&&(b.contentType=g.contentType);g.url&&(b.url=
n(g.url,c));return b}}}}})},"esri/symbols/PictureMarkerSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ./MarkerSymbol ./support/urlUtils".split(" "),function(b,f,q,g,n,l){var k={width:12,height:12,angle:0,xoffset:0,yoffset:0},d=b(n,{declaredClass:"esri.symbols.PictureMarkerSymbol",properties:{color:{json:{write:!1}},type:"picture-marker",url:l.urlPropertyDefinition,source:l.sourcePropertyDefinition,height:{json:{read:{source:["height","size"],reader:function(b,
c){return c.size||b}},write:!0},cast:g.toPt},width:{json:{read:{source:["width","size"],reader:function(b,c){return c.size||b}},write:!0},cast:g.toPt},size:{json:{write:!1}}},getDefaults:function(){return f.mixin(this.inherited(arguments),k)},normalizeCtorArgs:function(b,c,a){if(b&&"string"!==typeof b&&null==b.imageData)return b;var d={};b&&(d.url=b);null!=c&&(d.width=g.toPt(c));null!=a&&(d.height=g.toPt(a));return d},clone:function(){var b=new d({angle:this.angle,height:this.height,url:this.url,
width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});b._set("source",q.clone(this.source));return b}});d.defaultProps=k;return d})},"esri/symbols/MarkerSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],function(b,f,q){return b(q,{declaredClass:"esri.symbols.MarkerSymbol",properties:{angle:{value:0,json:{read:function(b){return b&&-1*b},write:function(b,f){f.angle=b&&-1*b}}},type:{},xoffset:{value:0,cast:f.toPt,json:{write:!0}},yoffset:{value:0,cast:f.toPt,json:{write:!0}},
size:{value:9,cast:function(b){return"auto"===b?b:f.toPt(b)},json:{write:!0}}}})})},"esri/symbols/PointSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Error ../core/lang ../core/accessorSupport/decorators ./IconSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),function(b,f,q,g,n,l,k,d,h,c,a,p,u,v){var z=n.ofType({base:null,
key:"type",typeMap:{icon:h,object:c,text:p}});return function(a){function b(b){b=a.call(this)||this;b.verticalOffset=null;b.callout=null;b.symbolLayers=new z;b.type="point-3d";return b}q(b,a);c=b;b.prototype.writeSymbolLayers=function(a,b,c,d){var e=a.filter(function(a){return"text"!==a.type});d&&d.messages&&e.length<a.length&&(a=a.find(function(a){return"text"===a.type}),d.messages.push(new l("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:a})));
b[c]=e.map(function(a){return a.write({},d)}).toArray()};b.prototype.supportsCallout=function(){if(1!==(this.symbolLayers?this.symbolLayers.length:0))return!1;switch(this.symbolLayers.getItemAt(0).type){case "icon":case "text":case "object":return!0}return!1};b.prototype.hasVisibleCallout=function(){return u.hasVisibleCallout(this)};b.prototype.hasVisibleVerticalOffset=function(){return u.hasVisibleVerticalOffset(this)};b.prototype.clone=function(){return new c({verticalOffset:k.clone(this.verticalOffset),
callout:k.clone(this.callout),styleOrigin:k.clone(this.styleOrigin),symbolLayers:k.clone(this.symbolLayers),thumbnail:k.clone(this.thumbnail)})};g([d.property({type:v.default,json:{write:!0}})],b.prototype,"verticalOffset",void 0);g([d.property(u.calloutProperty)],b.prototype,"callout",void 0);g([d.property({type:z})],b.prototype,"symbolLayers",void 0);g([d.writer("web-scene","symbolLayers")],b.prototype,"writeSymbolLayers",null);g([d.property()],b.prototype,"type",void 0);return b=c=g([d.subclass("esri.symbols.PointSymbol3D")],
b);var c}(d.declared(a))})},"esri/symbols/PolygonSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Error ../core/lang ../core/accessorSupport/decorators ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer".split(" "),function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z){var t=n.ofType({base:null,key:"type",typeMap:{extrude:h,fill:c,icon:a,
line:p,object:u,text:z}});return function(a){function b(b){b=a.call(this)||this;b.type="polygon-3d";return b}q(b,a);c=b;b.prototype.writeSymbolLayers=function(a,b,c,d){var e=a.filter(function(a){return"text"!==a.type});d&&d.messages&&e.length<a.length&&(a=a.find(function(a){return"text"===a.type}),d.messages.push(new l("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:a})));b[c]=e.map(function(a){return a.write({},d)}).toArray()};b.prototype.clone=
function(){return new c({styleOrigin:k.clone(this.styleOrigin),symbolLayers:k.clone(this.symbolLayers),thumbnail:k.clone(this.thumbnail)})};b.fromJSON=function(a){var b=new c;b.read(a);if(2===b.symbolLayers.length&&"fill"===b.symbolLayers.getItemAt(0).type&&"line"===b.symbolLayers.getItemAt(1).type){var d=b.symbolLayers.getItemAt(0),e=b.symbolLayers.getItemAt(1);!e.enabled||a.symbolLayers&&a.symbolLayers[1]&&!1===a.symbolLayers[1].enable||(d.outline={size:e.size,color:e.material.color});b.symbolLayers.removeAt(1)}return b};
g([d.property({type:t})],b.prototype,"symbolLayers",void 0);g([d.writer("web-scene","symbolLayers")],b.prototype,"writeSymbolLayers",null);g([d.property()],b.prototype,"type",void 0);return b=c=g([d.subclass("esri.symbols.PolygonSymbol3D")],b);var c}(d.declared(v))})},"esri/symbols/SimpleFillSymbol":function(){define(["../core/declare","dojo/_base/lang","../core/lang","./FillSymbol","./SimpleLineSymbol"],function(b,f,q,g,n){var l={style:"solid",outline:new n,color:[0,0,0,.25]},k=b(g,{declaredClass:"esri.symbols.SimpleFillSymbol",
properties:{color:{},type:"simple-fill",style:{value:"solid",type:String,json:{read:function(b){return q.valueOf(this._styles,b)||void 0},write:function(b,g){g.style=this._styles[b]}}}},_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical","forward-diagonal":"esriSFSForwardDiagonal","backward-diagonal":"esriSFSBackwardDiagonal",cross:"esriSFSCross","diagonal-cross":"esriSFSDiagonalCross"},getDefaults:function(){return f.mixin(this.inherited(arguments),
l)},normalizeCtorArgs:function(b,g,c){if(b&&"string"!==typeof b)return b;var a={};b&&(a.style=b);g&&(a.outline=g);c&&(a.color=c);return a},clone:function(){return new k({color:q.clone(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}});f.mixin(k,{STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forward-diagonal",STYLE_BACKWARD_DIAGONAL:"backward-diagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonal-cross"});
k.defaultProps=l;return k})},"esri/symbols/SimpleMarkerSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(b,f,q,g,n,l){var k={style:"circle",color:[255,255,255,.25],outline:new l,size:12,angle:0,xoffset:0,yoffset:0},d=b(n,{declaredClass:"esri.symbols.SimpleMarkerSymbol",properties:{color:{json:{write:function(b,c){b&&"x"!==this.style&&"cross"!==this.style&&(c.color=b.toJSON())}}},type:"simple-marker",size:{value:12},
style:{type:String,value:"circle",json:{read:function(b){return q.valueOf(this._styles,b)},write:function(b,c){c.style=this._styles[b]}}},path:{type:String,value:null,set:function(b){this.style="path";this._set("path",b)},json:{write:!0}},outline:{type:l,json:{write:!0}}},_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},getDefaults:function(){return f.mixin(this.inherited(arguments),k)},normalizeCtorArgs:function(b,
c,a,d){if(b&&"string"!==typeof b)return b;var f={};b&&(f.style=b);null!=c&&(f.size=g.toPt(c));a&&(f.outline=a);d&&(f.color=d);return f},clone:function(){return new d({angle:this.angle,color:q.clone(this.color),outline:this.outline&&this.outline.clone(),size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})},read:function c(a,b){return this.getInherited(c,arguments).call(this,f.mixin({outline:null},a),b)}});f.mixin(d,{STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",
STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"});d.defaultProps=k;return d})},"esri/symbols/TextSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ../Color ./Symbol ./Font".split(" "),function(b,f,q,g,n,l,k){var d={text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:{},angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},h=b(l,{declaredClass:"esri.symbols.TextSymbol",properties:{backgroundColor:{type:n,json:{write:!0}},borderLineColor:{type:n,
json:{write:!0}},borderLineSize:{type:Number,json:{write:!0}},color:{},font:{type:k,json:{write:!0}},horizontalAlignment:{value:"center",json:{write:!0}},kerning:{value:!0,json:{write:!0}},haloColor:{type:n,json:{write:!0}},haloSize:{type:Number,cast:g.toPt,json:{write:!0}},rightToLeft:{json:{write:!0}},rotated:{value:!1,json:{write:!0}},text:{type:String,json:{write:!0}},type:"text",verticalAlignment:{type:String,json:{write:!0}},xoffset:{value:0,type:Number,cast:g.toPt,json:{write:!0}},yoffset:{value:0,
type:Number,cast:g.toPt,json:{write:!0}},angle:{type:Number,value:0,json:{read:function(b){return b&&-1*b},write:function(b,a){a.angle=b&&-1*b}}},width:{json:{write:!0}}},getDefaults:function(){return f.mixin(this.inherited(arguments),d)},normalizeCtorArgs:function(b,a,d){if(b&&"string"!==typeof b)return b;var c={};b&&(c.text=b);a&&(c.font=a);d&&(c.color=d);return c},clone:function(){return new h({angle:this.angle,backgroundColor:q.clone(this.backgroundColor),borderLineColor:q.clone(this.borderLineColor),
borderLineSize:this.borderLineSize,color:q.clone(this.color),font:this.font&&this.font.clone(),haloColor:q.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}});f.mixin(h,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",
DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});h.defaultProps=d;return h})},"esri/symbols/Font":function(){define(["dojo/_base/lang","../core/JSONSupport","../core/lang","../core/screenUtils"],function(b,f,q,g){var n={style:"normal",weight:"normal",size:9,family:"serif",decoration:"none"},l=f.createSubclass({declaredClass:"esri.symbols.Font",properties:{decoration:{},family:{},size:{cast:g.toPt},style:{},weight:{}},getDefaults:function(){return n},normalizeCtorArgs:function(b,
d,f,c){if(b&&"string"!==typeof b)return b;var a={};null!=b&&(a.size=g.toPt(b));null!=d&&(a.style=d);null!=f&&(a.weight=f);c&&(a.family=c);return a},toJSON:function(){return q.fixJson({size:this.size,style:this.style,decoration:this.decoration,weight:this.weight,family:this.family})},clone:function(){return new l({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}});l.defaultProps=n;b.mixin(l,{STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",
WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});return l})},"esri/symbols/WebStyleSymbol":function(){define("require exports ../core/tsSupport/extendsHelper ../core/tsSupport/decorateHelper ../core/Logger ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../portal/Portal ./Symbol ./support/Thumbnail".split(" "),function(b,f,q,g,n,l,k,d,h,c,a){var p=n.getLogger("esri.symbols.WebStyleSymbol");return function(c){function f(a){a=c.call(this,
a)||this;a.styleName=null;a.portal=null;a.styleUrl=null;a.thumbnail=null;a.name=null;a.type="web-style";return a}q(f,c);n=f;f.prototype._readStyleUrl=function(a,b,c){return k.read(a,c)};f.prototype._writeStyleUrl=function(a,b,c,d){b.styleUrl=k.write(a,d);k.isAbsolute(b.styleUrl)&&(b.styleUrl=k.normalize(b.styleUrl))};f.prototype._writeType=function(a,b,c,d){b.type="styleSymbolReference"};f.prototype.read=function(a,b){this.portal=b?b.portal:void 0;this.inherited(arguments,[a,b]);return this};f.prototype.clone=
function(){return new n({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};f.prototype.fetchSymbol=function(){var a=this;return l.create(function(a){return b(["./support/styleUtils"],a)}).then(function(b){b=b.resolveWebStyleSymbol(a,{portal:a.portal});b.catch(function(a){p.error("#fetchSymbol()","Failed to create symbol from style",a)});return b})};g([d.property({json:{write:!1}})],f.prototype,"color",void 0);g([d.property({type:String,json:{write:!0}})],f.prototype,
"styleName",void 0);g([d.property({type:h,json:{write:!1}})],f.prototype,"portal",void 0);g([d.property({type:String,json:{write:!0}})],f.prototype,"styleUrl",void 0);g([d.reader("styleUrl")],f.prototype,"_readStyleUrl",null);g([d.writer("styleUrl")],f.prototype,"_writeStyleUrl",null);g([d.property({type:a.default,json:{read:!1}})],f.prototype,"thumbnail",void 0);g([d.property({type:String,json:{write:!0}})],f.prototype,"name",void 0);g([d.property({type:String,readOnly:!0,json:{read:!1}})],f.prototype,
"type",void 0);g([d.writer("type")],f.prototype,"_writeType",null);return f=n=g([d.subclass("esri.symbols.WebStyleSymbol")],f);var n}(d.declared(c))})},"esri/symbols/support/symbolConversion":function(){define("require exports dojo/_base/lang ../../Color ../../symbols ../../core/Error ../../core/lang ../FillSymbol3DLayer ../Font ../IconSymbol3DLayer ../LabelSymbol3D ../LineSymbol3D ../LineSymbol3DLayer ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../TextSymbol ../TextSymbol3DLayer ../WebStyleSymbol".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z,t,x,r,m,e,w,y){function A(a){var b=a.color?a.color.clone():new g([255,255,255]),d,e,f;a instanceof v?(a.color&&0===a.color.r&&0===a.color.g&&0===a.color.b&&(b=new g([255,255,255])),d={href:a.url},e=a.width<=a.height?a.height:a.width):(d=a.style,d in D?d=D[d]:(console.log(d+' cannot be mapped to Icon symbol. Fallback to "circle"'),d="circle"),d={primitive:d},e=a.size,a.outline&&a.outline.color&&0<a.outline.width&&(f={size:a.outline.width,color:a.outline.color.clone()}));
return new z(new c({size:e,resource:d,material:{color:b},outline:f}))}Object.defineProperty(f,"__esModule",{value:!0});var D={};D[m.STYLE_CIRCLE]="circle";D[m.STYLE_CROSS]="cross";D[m.STYLE_DIAMOND]="kite";D[m.STYLE_SQUARE]="square";D[m.STYLE_X]="x";f.to3D=function(b,c,g,f){void 0===c&&(c=!1);void 0===g&&(g=!1);void 0===f&&(f=!0);if(!b)return{symbol:null};if(n.isSymbol3D(b)||b instanceof y)f=b.clone();else if(b instanceof r)f=new p(new u({size:b.width||1,material:{color:b.color?b.color.clone():[255,
255,255]}}));else if(b instanceof m)f=A(b);else if(b instanceof v)f=A(b);else if(b instanceof x)f=new d({material:{color:b.color?b.color.clone():[255,255,255]}}),b.outline&&b.outline.color&&(f.outline={size:b.outline.width||0,color:b.outline.color}),f=new t(f);else if(b instanceof e){var B=q.clone(h.defaultProps);b.font&&q.mixin(B,b.font);var F;F=b.haloColor;var G=b.haloSize;F=F&&0<G?{color:k.clone(F),size:G}:null;f=new (f?a:z)(new w({size:B.size,font:{family:B.family,weight:B.weight,style:B.style},
halo:F,material:{color:b.color.clone()},text:b.text}))}else return{error:new l("symbol-conversion:unsupported-2d-symbol","2D symbol of type '"+(b.type||b.declaredClass)+"' is unsupported in 3D",{symbol:b})};c&&(f.id=b.id);if(g&&n.isSymbol3D(f))for(b=0;b<f.symbolLayers.length;++b)f.symbolLayers.getItemAt(b)._ignoreDrivers=!0;return{symbol:f}}})},"esri/symbols":function(){define("require exports ./symbols/ExtrudeSymbol3DLayer ./symbols/FillSymbol ./symbols/FillSymbol3DLayer ./symbols/Font ./symbols/IconSymbol3DLayer ./symbols/LabelSymbol3D ./symbols/LineSymbol3D ./symbols/LineSymbol3DLayer ./symbols/MarkerSymbol ./symbols/MeshSymbol3D ./symbols/ObjectSymbol3DLayer ./symbols/PathSymbol3DLayer ./symbols/PictureFillSymbol ./symbols/PictureMarkerSymbol ./symbols/PointSymbol3D ./symbols/PolygonSymbol3D ./symbols/SimpleFillSymbol ./symbols/SimpleLineSymbol ./symbols/SimpleMarkerSymbol ./symbols/Symbol ./symbols/Symbol3D ./symbols/Symbol3DLayer ./symbols/TextSymbol ./symbols/TextSymbol3DLayer ./symbols/WebStyleSymbol ./symbols/support/jsonUtils".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z,t,x,r,m,e,w,y,A,D,B,F,C,G){Object.defineProperty(f,"__esModule",{value:!0});f.ExtrudeSymbol3DLayer=q;f.BaseFillSymbol=g;f.FillSymbol3DLayer=n;f.Font=l;f.IconSymbol3DLayer=k;f.LabelSymbol3D=d;f.LineSymbol3D=h;f.LineSymbol3DLayer=c;f.BaseMarkerSymbol=a;f.MeshSymbol3D=p;f.ObjectSymbol3DLayer=u;f.PathSymbol3DLayer=v;f.PictureFillSymbol=z;f.PictureMarkerSymbol=t;f.PointSymbol3D=x;f.PolygonSymbol3D=r;f.SimpleFillSymbol=m;f.SimpleLineSymbol=e;f.SimpleMarkerSymbol=w;
f.BaseSymbol=y;f.BaseSymbol3D=A;f.BaseSymbol3DLayer=D;f.TextSymbol=B;f.TextSymbol3DLayer=F;f.WebStyleSymbol=C;f.fromJSON=G.fromJSON;f.isSymbol=function(a){return a instanceof f.BaseSymbol};f.isSymbol2D=function(a){if(!a)return!1;switch(a.type){case "picture-fill":case "picture-marker":case "simple-fill":case "simple-line":case "simple-marker":case "text":return!0;default:return!1}};f.isSymbol3D=function(a){if(!a)return!1;switch(a.type){case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return!0;
default:return!1}}})},"esri/symbols/support/typeUtils":function(){define("require exports ../../core/accessorSupport/ensureType ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol ../TextSymbol ../WebStyleSymbol".split(" "),function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z,t){Object.defineProperty(f,"__esModule",{value:!0});f.types={base:v,key:"type",typeMap:{"simple-fill":a,
"picture-fill":k,"picture-marker":d,"simple-line":p,"simple-marker":u,text:z,"label-3d":g,"line-3d":n,"mesh-3d":l,"point-3d":h,"polygon-3d":c,"web-style":t}};f.rendererTypes={base:v,key:"type",typeMap:{"simple-fill":a,"picture-fill":k,"picture-marker":d,"simple-line":p,"simple-marker":u,text:z,"line-3d":n,"mesh-3d":l,"point-3d":h,"polygon-3d":c,"web-style":t}};f.labelTypes={base:v,key:"type",typeMap:{text:z,"label-3d":g}};f.types3D={base:v,key:"type",typeMap:{"label-3d":g,"line-3d":n,"mesh-3d":l,
"point-3d":h,"polygon-3d":c,"web-style":t}};f.rendererTypes3D={base:v,key:"type",typeMap:{"line-3d":n,"mesh-3d":l,"point-3d":h,"polygon-3d":c,"web-style":t}};f.labelTypes3D={base:v,key:"type",typeMap:{"label-3d":g}};f.ensureType=q.ensureOneOfType(f.types)})},"esri/tasks/QueryTask":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/assignHelper ../geometry ../core/accessorSupport/decorators ./Task ./operations/query ./operations/queryRelatedRecords ./support/FeatureSet ./support/Query ./support/RelationshipQuery".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v){return function(b){function f(a){a=b.call(this,a)||this;a.gdbVersion=null;a.source=null;return a}q(f,b);f.prototype.execute=function(a,b){return this.executeJSON(a,b).then(function(a){return p.fromJSON(a)})};f.prototype.executeJSON=function(a,b){return c.executeQuery(this.parsedUrl,this._normalizeQuery(a),l({},this.requestOptions,b)).then(function(a){return a.data})};f.prototype.executeForCount=function(a,b){return c.executeQueryForCount(this.parsedUrl,this._normalizeQuery(a),
l({},this.requestOptions,b)).then(function(a){return a.data.count})};f.prototype.executeForExtent=function(a,b){return c.executeQueryForExtent(this.parsedUrl,this._normalizeQuery(a),l({},this.requestOptions,b)).then(function(a){return{count:a.data.count,extent:k.Extent.fromJSON(a.data.extent)}})};f.prototype.executeForIds=function(a,b){return c.executeQueryForIds(this.parsedUrl,this._normalizeQuery(a),l({},this.requestOptions,b)).then(function(a){return a.data.objectIds})};f.prototype.executeRelationshipQuery=
function(b,c){if(this.gdbVersion||this.source)b=b.clone().set({gdbVersion:this.gdbVersion||b.gdbVersion,source:this.source||b.source});return a.executeRelationshipQuery(this.parsedUrl,b,l({},this.requestOptions,c)).then(function(a){var b=a.data,c={};Object.keys(b).forEach(function(a){return c[a]=p.fromJSON(b[a])});return c})};f.prototype._normalizeQuery=function(a){return this.gdbVersion||this.source?a.clone().set({gdbVersion:this.gdbVersion||a.gdbVersion,source:this.source||a.source}):a};g([d.property()],
f.prototype,"gdbVersion",void 0);g([d.property()],f.prototype,"source",void 0);g([n(0,d.cast(u))],f.prototype,"execute",null);g([n(0,d.cast(u))],f.prototype,"executeJSON",null);g([n(0,d.cast(u))],f.prototype,"executeForCount",null);g([n(0,d.cast(u))],f.prototype,"executeForExtent",null);g([n(0,d.cast(u))],f.prototype,"executeForIds",null);g([n(0,d.cast(v))],f.prototype,"executeRelationshipQuery",null);return f=g([d.subclass("esri.tasks.QueryTask")],f)}(d.declared(h))})},"esri/tasks/Task":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/assignHelper ../core/Accessor ../core/urlUtils ../core/accessorSupport/decorators".split(" "),
function(b,f,q,g,n,l,k,d,h){return function(b){function a(a){a=b.call(this)||this;a.requestOptions=null;a.url=null;return a}q(a,b);a.prototype.normalizeCtorArgs=function(a,b){return"string"!==typeof a?a:l({url:a},b)};Object.defineProperty(a.prototype,"parsedUrl",{get:function(){return this._parseUrl(this.url)},enumerable:!0,configurable:!0});a.prototype._parseUrl=function(a){return a?d.urlToObject(a):null};a.prototype._encode=function(a,b,c){var d={},g;for(g in a)if("declaredClass"!==g){var f=a[g];
if(null!=f&&"function"!==typeof f)if(Array.isArray(f)){d[g]=[];for(var h=0;h<f.length;h++)d[g][h]=this._encode(f[h])}else"object"===typeof f?f.toJSON&&(f=f.toJSON(c&&c[g]),d[g]=b?f:JSON.stringify(f)):d[g]=f}return d};g([h.property({readOnly:!0,dependsOn:["url"]})],a.prototype,"parsedUrl",null);g([h.property()],a.prototype,"requestOptions",void 0);g([h.property({type:String})],a.prototype,"url",void 0);return a=g([h.subclass("esri.tasks.Task")],a)}(h.declared(k))})},"esri/tasks/operations/query":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ../../geometry/support/normalizeUtils ./pbfQueryUtils ./urlUtils".split(" "),
function(b,f,q,g,n,l,k,d,h){function c(a){var b=a.geometry;a=a.toJSON();b&&(a.geometry=JSON.stringify(b),a.geometryType=l.getJsonType(b),a.inSR=b.spatialReference.wkid||JSON.stringify(b.spatialReference));a.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=a.groupByFieldsForStatistics.join(","));a.objectIds&&(a.objectIds=a.objectIds.join(","));a.orderByFields&&(a.orderByFields=a.orderByFields.join(","));a.outFields&&(a.outFields=a.outFields.join(","));a.outSR?a.outSR=a.outSR.wkid||JSON.stringify(a.outSR):
b&&(a.returnGeometry||a.returnCentroid)&&(a.outSR=a.inSR);a.returnGeometry&&delete a.returnGeometry;a.outStatistics&&(a.outStatistics=JSON.stringify(a.outStatistics));a.pixelSize&&(a.pixelSize=JSON.stringify(a.pixelSize));a.quantizationParameters&&(a.quantizationParameters=JSON.stringify(a.quantizationParameters));a.source&&(a.layer=JSON.stringify({source:a.source}),delete a.source);a.timeExtent&&(b=a.timeExtent,a.time=[null!=b.startTime?b.startTime:"null",null!=b.endTime?b.endTime:"null"],delete a.timeExtent);
return a}function a(a,b,d,f,l){void 0===f&&(f={});var p="string"===typeof a?n.urlToObject(a):a;a=b.geometry?[b.geometry]:[];f.responseType="pbf"===d?"array-buffer":"json";return k.normalizeCentralMeridian(a).then(function(a){if(a=a&&a[0])b=b.clone(),b.geometry=a;a=h.mapParameters(q({},p.query,{f:d},l,c(b)));return g(p.path+"/query",q({},f,{query:a,callbackParamName:"callback"}))})}Object.defineProperty(f,"__esModule",{value:!0});f.queryToQueryStringParameters=c;f.executeQuery=function(b,c,d){return a(b,
c,"json",d)};f.executeQueryPBF=function(b,c,g){return a(b,c,"pbf",g).then(function(a){var b=d.parsePBFFeatureQuery(a.data);a.data=b;return a})};f.executeQueryForIds=function(b,c,d){return a(b,c,"json",d,{returnIdsOnly:!0})};f.executeQueryForCount=function(b,c,d){return a(b,c,"json",d,{returnIdsOnly:!0,returnCountOnly:!0})};f.executeQueryForExtent=function(b,c,d){return a(b,c,"json",d,{returnExtentOnly:!0,returnCountOnly:!0}).then(function(a){var b=a.data;if(!b.hasOwnProperty("extent")){if(b.features)throw Error("Layer does not support extent calculation.");
if(b.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");}return a})}})},"esri/geometry/support/normalizeUtils":function(){define("require exports ../../config ../../core/Error ../../core/Logger ../../core/promiseUtils ../Polygon ../Polyline ../SpatialReference ./spatialReferenceUtils ./webMercatorUtils ../../tasks/GeometryService".split(" "),function(b,f,q,g,n,l,k,d,h,c,a,p){function u(a){return"polygon"===a.type?a.rings:a.paths}function v(a,b){return Math.ceil((a-b)/
(2*b))}function z(a,b){for(var c=0,d=u(a);c<d.length;c++)for(var e=0,g=d[c];e<g.length;e++)g[e][0]+=b;return a}function t(a){for(var b=[],c=0,d=0,e=0;e<a.length;e++){for(var g=a[e],f=null,h=0;h<g.length;h++)f=g[h],b.push(f),0===h?d=c=f[0]:(c=Math.min(c,f[0]),d=Math.max(d,f[0]));f&&b.push([(c+d)/2,0])}return b}function x(a,b){if(!(a instanceof d||a instanceof k))throw y.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new g("straightLineDensify: the input geometry is neither polyline nor polygon");
for(var c=[],e=0,f=u(a);e<f.length;e++){var h=f[e],m=[];c.push(m);m.push([h[0][0],h[0][1]]);for(var p=0;p<h.length-1;p++){var l=h[p][0],n=h[p][1],q=h[p+1][0],r=h[p+1][1],t=Math.sqrt((q-l)*(q-l)+(r-n)*(r-n)),v=(r-n)/t,z=(q-l)/t,w=t/b;if(1<w){for(var x=1;x<=w-1;x++){var A=x*b;m.push([z*A+l,v*A+n])}t=(t+Math.floor(w-1)*b)/2;m.push([z*t+l,v*t+n])}m.push([q,r])}}return"polygon"===a.type?new k({rings:c,spatialReference:a.spatialReference}):new d({paths:c,spatialReference:a.spatialReference})}function r(b,
c,d){c&&(b=x(b,1E6),b=a.webMercatorToGeographic(b,!0));d&&(b=z(b,d));return b}function m(a,b,c){if(Array.isArray(a)){var d=a[0];if(d>b){var e=v(d,b);a[0]=d+-2*e*b}else d<c&&(e=v(d,c),a[0]=d+-2*e*c)}else d=a.x,d>b?(e=v(d,b),a=a.clone().offset(-2*e*b,0)):d<c&&(e=v(d,c),a=a.clone().offset(-2*e*c,0));return a}function e(a,b){for(var c=-1,d=function(d){var e=b.cutIndexes[d],g=b.geometries[d],f=u(g);d=function(a){var b=f[a];b.some(function(c){if(!(180>c[0])){for(var d=c=0;d<b.length;d++){var e=b[d][0];
c=e>c?e:c}c=Number(c.toFixed(9));c=-360*v(c,180);for(d=0;d<b.length;d++)e=g.getPoint(a,d),g.setPoint(a,d,e.clone().offset(c,0))}return!0})};for(var h=0;h<f.length;h++)d(h);if(e===c)if("polygon"===a[0].type)for(d=0,h=u(g);d<h.length;d++)a[e]=a[e].addRing(h[d]);else{if("polyline"===a[0].type)for(d=0,h=u(g);d<h.length;d++)a[e]=a[e].addPath(h[d])}else c=e,a[e]=g},e=0;e<b.cutIndexes.length;e++)d(e);return a}function w(b,g){if(!Array.isArray(b))return w([b],g);g||(D||(D=new p({url:q.geometryServiceUrl})),
g=D);for(var f,h,n,t,u,y,x,B=0,F=[],O=[],N=0;N<b.length;N++){var K=b[N];if(K)if(f||(f=K.spatialReference,h=c.getInfo(f),y=(n=f.isWebMercator)?102100:4326,t=A[y].maxX,u=A[y].minX,x=A[y].plus180Line,y=A[y].minus180Line),h)if("mesh"===K.type)O.push(K);else if("point"===K.type)O.push(m(K.clone(),t,u));else if("multipoint"===K.type)K=K.clone(),K.points=K.points.map(function(a){return m(a,t,u)}),O.push(K);else if("extent"===K.type){var M=K.clone(),K=M._normalize(!1,!1,h);O.push(K.rings?new k(K):K)}else if(K.extent){var M=
K.extent,U=2*v(M.xmin,u)*t,K=0===U?K.clone():z(K.clone(),U);M.offset(U,0);M.intersects(x)&&M.xmax!==t?(B=M.xmax>B?M.xmax:B,K=r(K,n),F.push(K),O.push("cut")):M.intersects(y)&&M.xmin!==u?(B=2*M.xmax*t>B?2*M.xmax*t:B,K=r(K,n,360),F.push(K),O.push("cut")):O.push(K)}else O.push(K.clone());else O.push(K);else O.push(K)}f=v(B,t);h=-90;x=f;for(B=new d;0<f;)N=-180+360*f,B.addPath([[N,h],[N,-1*h]]),h*=-1,f--;if(0<F.length&&0<x)return g.cut(F,B).then(function(a){return e(F,a)}).then(function(c){for(var d=[],
e=[],f=0;f<O.length;f++){var h=O[f];if("cut"!==h)e.push(h);else{var h=c.shift(),m=b[f];"polygon"===m.type&&m.rings&&1<m.rings.length&&h.rings.length>=m.rings.length?(d.push(h),e.push("simplify")):e.push(n?a.geographicToWebMercator(h):h)}}return d.length?g.simplify(d).then(function(b){for(var c=[],d=0;d<e.length;d++){var g=e[d];"simplify"!==g?c.push(g):c.push(n?a.geographicToWebMercator(b.shift()):b.shift())}return c}):e});f=[];for(h=0;h<O.length;h++)x=O[h],"cut"!==x?f.push(x):(x=F.shift(),f.push(!0===
n?a.geographicToWebMercator(x):x));return l.resolve(f)}Object.defineProperty(f,"__esModule",{value:!0});var y=n.getLogger("esri.geometry.support.normalizeUtils"),A={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new d({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:h.WebMercator}),minus180Line:new d({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:h.WebMercator})},
4326:{maxX:180,minX:-180,plus180Line:new d({paths:[[[180,-180],[180,180]]],spatialReference:h.WebMercator}),minus180Line:new d({paths:[[[-180,-180],[-180,180]]],spatialReference:h.WebMercator})}};f.straightLineDensify=x;var D;f.normalizeCentralMeridian=w;f.getDenormalizedExtent=function(a){if(!a)return null;var b=a.extent;if(!b)return null;var d=a.spatialReference&&c.getInfo(a.spatialReference);if(!d)return b;var d=d.valid,e=d[0],d=d[1],g=b.width,f=b.xmin,h=b.xmax,h=[h,f],f=h[0],h=h[1];if("extent"===
a.type||0===g||g<=d||g>2*d||f<e||h>d)return b;var m;switch(a.type){case "polygon":if(1<a.rings.length)m=t(a.rings);else return b;break;case "polyline":if(1<a.paths.length)m=t(a.paths);else return b;break;case "multipoint":m=a.points}a=b.clone();for(e=0;e<m.length;e++){var p=m[e][0];0>p?(p+=d,h=Math.max(p,h)):(p-=d,f=Math.min(p,f))}a.xmin=f;a.xmax=h;return a.width<g?(a.xmin-=d,a.xmax-=d,a):b}})},"esri/tasks/GeometryService":function(){define("../core/kebabDictionary ../core/accessorSupport/ensureType ../geometry/Extent ../geometry/Multipoint ../geometry/Polyline ../geometry/Polygon ../geometry/support/jsonUtils ../request ./Task ./support/ProjectParameters dojo/_base/lang".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a){var p=b({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"}),u=f.ensureType(c);b=h.createSubclass({declaredClass:"esri.tasks.GeometryService",areasAndLengths:function(b,c){b={query:a.mixin({},this.parsedUrl.query,{f:"json"},b.toJSON()),callbackParamName:"callback"};if(this.requestOptions||c)b=a.mixin({},this.requestOptions,c,b);return d(this.parsedUrl.path+"/areasAndLengths",b).then(function(a){return a.data})},autoComplete:function(b,
c,g){var f=b[0].spatialReference;b={query:a.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(f.toJSON()),polygons:JSON.stringify(this._encodeGeometries(b).geometries),polylines:JSON.stringify(this._encodeGeometries(c).geometries)}),callbackParamName:"callback"};if(this.requestOptions||g)b=a.mixin({},this.requestOptions,g,b);return d(this.parsedUrl.path+"/autoComplete",b).then(function(a){return(a.data.geometries||[]).map(function(a){return new l({spatialReference:f,rings:a.rings})})})},buffer:function(b,
c){var g=a.mixin({},this.parsedUrl.query,{f:"json"},b.toJSON()),f=b.outSpatialReference||b.geometries[0].spatialReference;b={query:g,callbackParamName:"callback"};if(this.requestOptions||c)b=a.mixin({},this.requestOptions,c,b);return d(this.parsedUrl.path+"/buffer",b).then(function(a){return(a.data.geometries||[]).map(function(a){return new l({spatialReference:f,rings:a.rings})})})},cut:function(b,c,g){var f=b[0].spatialReference,h=b.map(function(a){return a.toJSON()});b={query:a.mixin({},this.parsedUrl.query,
{f:"json",sr:JSON.stringify(f.toJSON()),target:JSON.stringify({geometryType:k.getJsonType(b[0]),geometries:h}),cutter:JSON.stringify(c.toJSON())}),callbackParamName:"callback"};if(this.requestOptions||g)b=a.mixin({},this.requestOptions,g,b);return d(this.parsedUrl.path+"/cut",b).then(function(a){a=a.data;return{cutIndexes:a.cutIndexes,geometries:(a.geometries||[]).map(function(a){return k.fromJSON(a).set("spatialReference",f)})}})},convexHull:function(b,c){var g=b[0].spatialReference;b={query:a.mixin({},
this.parsedUrl.query,{f:"json",sr:JSON.stringify(g.toJSON()),geometries:JSON.stringify(this._encodeGeometries(b))}),callbackParamName:"callback"};if(this.requestOptions||c)b=a.mixin({},this.requestOptions,c,b);return d(this.parsedUrl.path+"/convexHull",b).then(function(a){return k.fromJSON(a.data.geometry).set("spatialReference",g)})},densify:function(b,c){var g=a.mixin({},this.parsedUrl.query,{f:"json"},b.toJSON()),f=b.geometries[0].spatialReference;b={query:g,callbackParamName:"callback"};if(this.requestOptions||
c)b=a.mixin({},this.requestOptions,c,b);return d(this.parsedUrl.path+"/densify",b).then(function(a){return(a.data.geometries||[]).map(function(a){return k.fromJSON(a).set("spatialReference",f)})})},difference:function(b,c,g){var f=b[0].spatialReference;b={query:a.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(f.toJSON()),geometries:JSON.stringify(this._encodeGeometries(b)),geometry:JSON.stringify({geometryType:k.getJsonType(c),geometry:c.toJSON()})}),callbackParamName:"callback"};if(this.requestOptions||
g)b=a.mixin({},this.requestOptions,g,b);return d(this.parsedUrl.path+"/difference",b).then(function(a){return(a.data.geometries||[]).map(function(a){return k.fromJSON(a).set("spatialReference",f)})})},distance:function(b,c){b={query:a.mixin({},this.parsedUrl.query,{f:"json"},b.toJSON()),callbackParamName:"callback"};if(this.requestOptions||c)b=a.mixin({},this.requestOptions,c,b);return d(this.parsedUrl.path+"/distance",b).then(this._handleDistanceResponse)},fromGeoCoordinateString:function(b,c){var g=
{};a.isObject(b.sr)?g.sr=b.sr.wkid||JSON.stringify(b.sr.toJSON()):g.sr=b.sr;g.strings=JSON.stringify(b.strings);g.conversionType=p.toJSON(b.conversionType||"mgrs");g.conversionMode=b.conversionMode;b={query:a.mixin({},this.parsedUrl.query,{f:"json"},g),callbackParamName:"callback"};if(this.requestOptions||c)b=a.mixin({},this.requestOptions,c,b);return d(this.parsedUrl.path+"/fromGeoCoordinateString",b).then(this._handleFromGeoCoordinateResponse)},generalize:function(b,c){var g=a.mixin({},this.parsedUrl.query,
{f:"json"},b.toJSON()),f=b.geometries[0].spatialReference;b={query:g,callbackParamName:"callback"};if(this.requestOptions||c)b=a.mixin({},this.requestOptions,c,b);return d(this.parsedUrl.path+"/generalize",b).then(function(a){return(a.data.geometries||[]).map(function(a){return k.fromJSON(a).set("spatialReference",f)})})},intersect:function(b,c,g){var f=b[0].spatialReference;b={query:a.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(f.toJSON()),geometries:JSON.stringify(this._encodeGeometries(b)),
geometry:JSON.stringify({geometryType:k.getJsonType(c),geometry:c.toJSON()})}),callbackParamName:"callback"};if(this.requestOptions||g)b=a.mixin({},this.requestOptions,g,b);return d(this.parsedUrl.path+"/intersect",b).then(function(a){return(a.data.geometries||[]).map(function(a){return k.fromJSON(a).set("spatialReference",f)})})},lengths:function(b,c){b={query:a.mixin({},this.parsedUrl.query,{f:"json"},b.toJSON()),callbackParamName:"callback"};if(this.requestOptions||c)b=a.mixin({},this.requestOptions,
c,b);return d(this.parsedUrl.path+"/lengths",b).then(function(a){return a.data})},labelPoints:function(b,c){var g=b.map(function(a){return a.toJSON()}),f=b[0].spatialReference;b={query:a.mixin({},this.parsedUrl.query,{f:"json",sr:f.wkid?f.wkid:JSON.stringify(f.toJSON()),polygons:JSON.stringify(g)}),callbackParamName:"callback"};if(this.requestOptions||c)b=a.mixin({},this.requestOptions,c,b);return d(this.parsedUrl.path+"/labelPoints",b).then(function(a){return(a.data.labelPoints||[]).map(function(a){return k.fromJSON(a).set("spatialReference",
f)})})},offset:function(b,c){var g=a.mixin({},this.parsedUrl.query,{f:"json"},b.toJSON()),f=b.geometries[0].spatialReference;b={query:g,callbackParamName:"callback"};if(this.requestOptions||c)b=a.mixin({},this.requestOptions,c,b);return d(this.parsedUrl.path+"/offset",b).then(function(a){return(a.data.geometries||[]).map(function(a){return k.fromJSON(a).set("spatialReference",f)})})},project:function(b,c){b=u(b);var g=a.mixin({},b.toJSON(),this.parsedUrl.query,{f:"json"}),f=b.outSpatialReference,
h=k.getJsonType(b.geometries[0]),m=this._decodeGeometries;b={query:g,callbackParamName:"callback"};if(this.requestOptions||c)b=a.mixin({},this.requestOptions,c,b);return d(this.parsedUrl.path+"/project",b).then(function(a){return m(a.data,h,f)})},relation:function(b,c){b={query:a.mixin({},this.parsedUrl.query,{f:"json"},b.toJSON()),callbackParamName:"callback"};if(this.requestOptions||c)b=a.mixin({},this.requestOptions,c,b);return d(this.parsedUrl.path+"/relation",b).then(this._handleRelationResponse)},
reshape:function(b,c,g){var f=b.spatialReference;b={query:a.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(f.toJSON()),target:JSON.stringify({geometryType:k.getJsonType(b),geometry:b.toJSON()}),reshaper:JSON.stringify(c.toJSON())}),callbackParamName:"callback"};if(this.requestOptions||g)b=a.mixin({},this.requestOptions,g,b);return d(this.parsedUrl.path+"/reshape",b).then(function(a){return k.fromJSON(a.data.geometry).set("spatialReference",f)})},simplify:function(b,c){var g=b[0].spatialReference,
f=a.mixin({},this.parsedUrl.query,{f:"json",sr:g.wkid?g.wkid:JSON.stringify(g.toJSON()),geometries:JSON.stringify(this._encodeGeometries(b))}),h=k.getJsonType(b[0]),m=this._decodeGeometries;b={query:f,callbackParamName:"callback"};if(this.requestOptions||c)b=a.mixin({},this.requestOptions,c,b);return d(this.parsedUrl.path+"/simplify",b).then(function(a){return m(a.data,h,g)})},toGeoCoordinateString:function(b,c){var g={};a.isObject(b.sr)?g.sr=b.sr.wkid||JSON.stringify(b.sr.toJSON()):g.sr=b.sr;g.coordinates=
JSON.stringify(b.coordinates);g.conversionType=p.toJSON(b.conversionType||"mgrs");g.conversionMode=b.conversionMode;g.numOfDigits=b.numOfDigits;g.rounding=b.rounding;g.addSpaces=b.addSpaces;b={query:a.mixin({},this.parsedUrl.query,{f:"json"},g),callbackParamName:"callback"};if(this.requestOptions||c)b=a.mixin({},this.requestOptions,c,b);return d(this.parsedUrl.path+"/toGeoCoordinateString",b).then(this._handleToGeoCoordinateResponse)},trimExtend:function(b,c){var g=a.mixin({},this.parsedUrl.query,
{f:"json"},b.toJSON()),f=b.sr;b={query:g,callbackParamName:"callback"};if(this.requestOptions||c)b=a.mixin({},this.requestOptions,c,b);return d(this.parsedUrl.path+"/trimExtend",b).then(function(a){return(a.data.geometries||[]).map(function(a){return new n({spatialReference:f,paths:a.paths})})})},union:function(b,c){var g=b[0].spatialReference;b={query:a.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(g.toJSON()),geometries:JSON.stringify(this._encodeGeometries(b))}),callbackParamName:"callback"};
if(this.requestOptions||c)b=a.mixin({},this.requestOptions,c,b);return d(this.parsedUrl.path+"/union",b).then(function(a){return k.fromJSON(a.data.geometry).set("spatialReference",g)})},_handleRelationResponse:function(a){return a.data.relations},_handleDistanceResponse:function(a){return(a=a.data)&&a.distance},_handleToGeoCoordinateResponse:function(a){return a.data.strings},_handleFromGeoCoordinateResponse:function(a){return a.data.coordinates},_encodeGeometries:function(a){var b=[],c,d=a.length;
for(c=0;c<d;c++)b.push(a[c].toJSON());return{geometryType:k.getJsonType(a[0]),geometries:b}},_decodeGeometries:function(b,c,d){var g=k.getGeometryType(c);b=b.geometries;var f=[],h={spatialReference:d.toJSON()},e=a.mixin;b.forEach(function(a,b){f[b]=new g(e(a,h))});return f},_toProjectGeometry:function(a){var b=a.spatialReference.toJSON();return a instanceof q?new l({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:b}):new n({paths:[[].concat(a.points)],
spatialReference:b})},_fromProjectedGeometry:function(a,b,c){return"extent"===b?(a=a.rings[0],new q(a[0][0],a[0][1],a[2][0],a[2][1],c)):new g({points:a.paths[0],spatialReference:c.toJSON()})}});a.mixin(b,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,
UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,
UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,
UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",
UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});return b})},"esri/tasks/support/ProjectParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils".split(" "),function(b,f,q,g,n,l,k,d,h){var c=k.getLogger("esri.tasks.support.ProjectParameters");
return function(a){function b(b){b=a.call(this)||this;b.geometries=null;b.outSpatialReference=null;b.transformation=null;b.transformForward=null;return b}q(b,a);Object.defineProperty(b.prototype,"outSR",{get:function(){c.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");return this.outSpatialReference},set:function(a){c.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");this.outSpatialReference=a},enumerable:!0,configurable:!0});b.prototype.toJSON=
function(){var a=this.geometries.map(function(a){return a.toJSON()}),b=this.geometries[0],c={};c.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());c.inSR=b.spatialReference.wkid||JSON.stringify(b.spatialReference.toJSON());c.geometries=JSON.stringify({geometryType:h.getJsonType(b),geometries:a});this.transformation&&(c.transformation=this.transformation.wkid||JSON.stringify(this.transformation));l.isDefined(this.transformForward)&&(c.transformForward=this.transformForward);
return c};g([d.property()],b.prototype,"geometries",void 0);g([d.property({json:{read:{source:"outSR"}}})],b.prototype,"outSpatialReference",void 0);g([d.property({json:{read:!1}})],b.prototype,"outSR",null);g([d.property()],b.prototype,"transformation",void 0);g([d.property()],b.prototype,"transformForward",void 0);return b=g([d.subclass("esri.tasks.support.ProjectParameters")],b)}(d.declared(n))})},"esri/tasks/operations/pbfQueryUtils":function(){define(["require","exports","../../core/Error","../../core/Logger",
"../../core/pbf"],function(b,f,q,g,n){function l(a){if(a>=A.length){var b=new q("query:parsing-pbf","Error while parsing FeatureSet PBF payload. Unknown GeometryType");e.error(b)}return A[a]}function k(a){var b,c=b||(b={});c[c.STRING=1]="STRING";c[c.FLOAT=2]="FLOAT";c[c.DOUBLE=3]="DOUBLE";c[c.INT=4]="INT";c[c.UINT=5]="UINT";c[c.SINT=6]="SINT";for(c[c.BOOL=7]="BOOL";a.next();)switch(a.tag()){case b.STRING:return a.getString();case b.FLOAT:return a.getFloat();case b.DOUBLE:return a.getDouble();case b.INT:return a.getInt64();
case b.UINT:return a.getUInt64();case b.SINT:return a.getSInt64();case b.BOOL:return a.getBool();default:return a.skip(),null}return null}function d(a){var b,c=b||(b={});c[c.NAME=1]="NAME";c[c.TYPE=2]="TYPE";c[c.ALIAS=3]="ALIAS";c[c.SQL_TYPE=4]="SQL_TYPE";c[c.DOMAIN=5]="DOMAIN";c[c.DEFAULT_VALUE=6]="DEFAULT_VALUE";for(c={domain:null,defaultValue:null,sqlType:y[0],type:w[0]};a.next();)switch(a.tag()){case b.NAME:c.name=a.getString();break;case b.TYPE:c.type=w[a.getEnum()];break;case b.ALIAS:c.alias=
a.getString();break;case b.SQL_TYPE:c.sqlType=y[a.getEnum()];break;case b.DOMAIN:c.domain=a.getString();break;case b.DEFAULT_VALUE:c.defaultValue=a.getString();break;default:a.skip()}return c}function h(a,b){var c,d=c||(c={});d[d.ATTRIBUTES=1]="ATTRIBUTES";d[d.GEOMETRY=2]="GEOMETRY";d[d.CENTROID=4]="CENTROID";for(var d={attributes:{}},e=0;a.next();)switch(a.tag()){case c.ATTRIBUTES:var g=a.getMessage(),f=b[e++].name;d.attributes[f]=k(g);break;case c.GEOMETRY:var g=a.getMessage(),h=(f=void 0,f={});
h[h.TYPE=1]="TYPE";h[h.LENGTHS=2]="LENGTHS";h[h.COORDS=3]="COORDS";for(var h=[],m=void 0;g.next();)switch(g.tag()){case f.LENGTHS:for(var p=g.getUInt32(),p=g._pos+p;g._pos<p;)h.push(g.getUInt32());break;case f.COORDS:for(var m=g.getUInt32(),p=g._pos+m,m=Array(m),l=0;g._pos<p;)m[l++]=g.getSInt32();break;default:g.skip()}d.geometry={lengths:h,coords:m};break;case c.CENTROID:g=a.getMessage();h=(f=void 0,f={});h[h.TYPE=1]="TYPE";h[h.LENGTHS=2]="LENGTHS";h[h.COORDS=3]="COORDS";for(m=void 0;g.next();)switch(g.tag()){case f.COORDS:m=
g.getUInt32();h=g._pos+m;m=Array(m);for(p=0;g._pos<h;)m[p++]=g.getSInt32();break;default:g.skip()}d.centroid={coords:m};break;default:a.skip()}return d}function c(a,b){return{x:a[b+0],y:a[b+1]}}function a(a,b){return{x:a[b+0],y:a[b+1],z:a[b+2]}}function p(a,b){return{x:a[b+0],y:a[b+1],m:a[b+2]}}function u(a,b){return{x:a[b+0],y:a[b+1],z:a[b+2],m:a[b+3]}}function v(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],g=e.geometry,e=e.attributes,g=g?b(g.coords,0):void 0;c.push({attributes:e,geometry:g})}return c}
function z(a,b,d,e){for(var g=[],f=0;f<a.length;f++){var h=a[f],m=h.geometry,p=h.attributes,h=h.centroid,k=void 0,h=h?c(h.coords,0):void 0;if(m){for(var k=[],l=0;l<m.coords.length;l+=e){for(var n=[],q=0;q<e;q++)n.push(m.coords[l+q]);k.push(n)}k={points:k,hasM:d,hasZ:b}}g.push({attributes:p,centroid:h,geometry:k})}return g}function t(a,b){for(var d=[],e=0;e<a.length;e++){var g=a[e],f=g.geometry,h=g.attributes,m=g.centroid,g=void 0,m=m?c(m.coords,0):void 0;if(f)for(var p=[],k=0,g={paths:p},l=0,n=f.lengths;l<
n.length;l++){for(var q=n[l],r=[],t=0;t<q;t++){for(var u=[],v=0;v<b;v++)u.push(f.coords[k++]);r.push(u)}p.push(r)}d.push({attributes:h,centroid:m,geometry:g})}return d}function x(a,b){for(var d=[],e=0;e<a.length;e++){var g=a[e],f=g.geometry,h=g.attributes,m=g.centroid,g=void 0,m=m?c(m.coords,0):void 0;if(f)for(var p=[],k=0,g={rings:p},l=0,n=f.lengths;l<n.length;l++){for(var q=n[l],r=[],t=0;t<q;t++){for(var u=[],v=0;v<b;v++)u.push(f.coords[k++]);r.push(u)}p.push(r)}d.push({attributes:h,centroid:m,
geometry:g})}return d}function r(a){var b=a.hasM;return(a=a.hasZ)&&b?4:a||b?3:2}function m(b){var d=[];switch(b.geometryType){case "esriGeometryPoint":d=c;b.hasZ&&b.hasM?d=u:b.hasZ?d=a:b.hasM&&(d=p);d=v(b.features,d);break;case "esriGeometryMultipoint":d=r(b);d=z(b.features,b.hasZ,b.hasM,d);break;case "esriGeometryPolyline":d=r(b);d=t(b.features,d);break;case "esriGeometryPolygon":d=r(b);d=x(b.features,d);break;default:e.error("Unable to parse unknown geometry type ")}return{exceededTransferLimit:b.exceededTransferLimit,
features:d,fields:b.fields.map(function(a){return{name:a.name,type:a.type,alias:a.alias,sqlType:a.sqlType,domain:null,defaultValue:a.defaultValue}}),hasM:b.hasM,hasZ:b.hasZ,geometryType:b.geometryType,objectIdFieldName:b.objectIdFieldName,spatialReference:b.spatialReference,transform:b.transform}}Object.defineProperty(f,"__esModule",{value:!0});var e=g.getLogger("esri.tasks.operations.pbfQueryUtils"),w="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),
y="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),A=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],D=["upperLeft",
"lowerLeft"];f.parsePBFFeatureQuery=function(a){try{var b,c=b||(b={});c[c.QUERY_RESULT=2]="QUERY_RESULT";for(var g=new n(new Uint8Array(a),new DataView(a)),f;g.next();)switch(g.tag()){case b.QUERY_RESULT:var p=g.getMessage(),k=(a=void 0,a={});k[k.FEATURE_RESULT=1]="FEATURE_RESULT";for(c={};p.next();)switch(p.tag()){case a.FEATURE_RESULT:var r=p.getMessage(),t=void 0,u=t||(t={});u[u.OBJECT_ID_NAME=1]="OBJECT_ID_NAME";u[u.UNIQUE_ID_NAME=2]="UNIQUE_ID_NAME";u[u.GLOBAL_ID_NAME=3]="GLOBAL_ID_NAME";u[u.GEOHASH_NAME=
4]="GEOHASH_NAME";u[u.GEOMETRY_PROPERTIES=5]="GEOMETRY_PROPERTIES";u[u.SERVER_GENS=6]="SERVER_GENS";u[u.GEOMETRY_TYPE=7]="GEOMETRY_TYPE";u[u.SPATIAL_REFERENCE=8]="SPATIAL_REFERENCE";u[u.EXCEEDED_TRANSFER_LIMIT=9]="EXCEEDED_TRANSFER_LIMIT";u[u.HAS_Z=10]="HAS_Z";u[u.HAS_M=11]="HAS_M";u[u.TRANSFORM=12]="TRANSFORM";u[u.FIELDS=13]="FIELDS";u[u.FEATURES=15]="FEATURES";var v={fields:[],features:[]};for(v.geometryType=l(0);r.next();)switch(r.tag()){case t.OBJECT_ID_NAME:v.objectIdFieldName=r.getString();
break;case t.GLOBAL_ID_NAME:v.globalIdFieldName=r.getString();break;case t.GEOHASH_NAME:v.geohashFieldName=r.getString();break;case t.GEOMETRY_PROPERTIES:var w=r.getMessage(),z=void 0,y=z||(z={});y[y.AREA_FIELD_NAME=1]="AREA_FIELD_NAME";y[y.LENGTH_FIELD_NAME=2]="LENGTH_FIELD_NAME";y[y.UNITS=3]="UNITS";for(var x={};w.next();)switch(w.tag()){case z.AREA_FIELD_NAME:x.shapeAreaFieldName=w.getString();break;case z.LENGTH_FIELD_NAME:x.shapeLengthFieldName=w.getString();break;case z.UNITS:x.units=w.getString();
break;default:w.skip()}v.geometryProperties=x;break;case t.GEOMETRY_TYPE:v.geometryType=l(r.getEnum());break;case t.SPATIAL_REFERENCE:var A=r.getMessage(),B=(z=void 0,z={});B[B.WKID=1]="WKID";B[B.LASTEST_WKID=2]="LASTEST_WKID";B[B.VCS_WKID=3]="VCS_WKID";B[B.LATEST_VCS_WKID=4]="LATEST_VCS_WKID";B[B.WKT=5]="WKT";for(x={};A.next();)switch(A.tag()){case z.WKID:x.wkid=A.getUInt32();break;case z.WKT:x.wkt=A.getString();break;default:A.skip()}v.spatialReference=x;break;case t.HAS_Z:v.hasZ=r.getBool();break;
case t.HAS_M:v.hasM=r.getBool();break;case t.TRANSFORM:var da=r.getMessage(),Q=(z=void 0,z={});Q[Q.ORIGIN_POSTION=1]="ORIGIN_POSTION";Q[Q.SCALE=2]="SCALE";Q[Q.TRANSLATE=3]="TRANSLATE";for(var P=D[0],Y=x=void 0;da.next();)switch(da.tag()){case z.ORIGIN_POSTION:P=D[da.getEnum()];break;case z.SCALE:var aa=da.getMessage(),ga=void 0,ea=ga||(ga={});ea[ea.X=1]="X";ea[ea.Y=2]="Y";ea[ea.M=3]="M";ea[ea.Z=4]="Z";for(var la=[0,0];aa.next();)switch(aa.tag()){case ga.X:la[0]=aa.getDouble();break;case ga.Y:la[1]=
aa.getDouble();break;case ga.M:la.push(aa.getDouble());break;case ga.Z:la.push(aa.getDouble());break;default:aa.skip()}x=la;break;case z.TRANSLATE:var ma=da.getMessage(),oa=(ga=void 0,ga={});oa[oa.X=1]="X";oa[oa.Y=2]="Y";oa[oa.M=3]="M";oa[oa.Z=4]="Z";for(la=[0,0];ma.next();)switch(ma.tag()){case ga.X:la[0]=ma.getDouble();break;case ga.Y:la[1]=ma.getDouble();break;case ga.M:la.push(ma.getDouble());break;case ga.Z:la.push(ma.getDouble());break;default:ma.skip()}Y=la;break;default:da.skip()}v.transform=
{originPosition:P,scale:x,translate:Y};break;case t.EXCEEDED_TRANSFER_LIMIT:var sa=r.getBool();v.exceededTransferLimit=sa;break;case t.FIELDS:var va=r.getMessage();v.fields.push(d(va));break;case t.FEATURES:var ha=r.getMessage();v.features.push(h(ha,v.fields));break;default:r.skip()}c.featureResult=v;break;default:p.skip()}f=c;break;default:g.skip()}return m(f.featureResult)}catch(Da){return b=new q("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:Da}),e.error(b),{features:[]}}}})},
"esri/core/pbf":function(){define(["require","exports"],function(b,f){return function(){function b(b,f,l,k){this._tag=0;this._dataType=99;this._data=b;this._dataView=f;this._pos=l||0;this._end=k||b.byteLength}b.prototype.clone=function(){return new b(this._data,this._dataView,this._pos,this._end)};b.prototype.next=function(b){for(;;){if(this._pos===this._end)return!1;var g=this._decodeVarint();this._tag=g>>3;this._dataType=g&7;if(!b||b===this._tag)break;this.skip()}return!0};b.prototype.empty=function(){return this._pos>=
this._end};b.prototype.tag=function(){return this._tag};b.prototype.getInt32=function(){return this._decodeVarint()};b.prototype.getInt64=function(){return this._decodeVarint()};b.prototype.getUInt32=function(){var b=4294967295,b=(this._data[this._pos]&127)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&127)<<7)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&127)<<14)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&127)<<21)>>>
0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&15)<<28)>>>0;if(128>this._data[this._pos++])return b};b.prototype.getUInt64=function(){return this._decodeVarint()};b.prototype.getSInt32=function(){var b=this.getUInt32();return b>>>1^-(b&1)|0};b.prototype.getSInt64=function(){return this._decodeSVarint()};b.prototype.getBool=function(){var b=0!==this._data[this._pos];this._skip(1);return b};b.prototype.getEnum=function(){return this._decodeVarint()};b.prototype.getFixed64=function(){var b=
this._dataView,f=this._pos,b=b.getUint32(f,!0)+4294967296*b.getUint32(f+4,!0);this._skip(8);return b};b.prototype.getSFixed64=function(){var b=this._dataView,f=this._pos,b=b.getUint32(f,!0)+4294967296*b.getInt32(f+4,!0);this._skip(8);return b};b.prototype.getDouble=function(){var b=this._dataView.getFloat64(this._pos,!0);this._skip(8);return b};b.prototype.getFixed32=function(){var b=this._dataView.getUint32(this._pos,!0);this._skip(4);return b};b.prototype.getSFixed32=function(){var b=this._dataView.getInt32(this._pos,
!0);this._skip(4);return b};b.prototype.getFloat=function(){var b=this._dataView.getFloat32(this._pos,!0);this._skip(4);return b};b.prototype.getString=function(){var b=this._getLength(),f=this._pos,f=this._toString(this._data,f,f+b);this._skip(b);return f};b.prototype.getBytes=function(){var b=this._getLength(),f=this._pos,f=this._toBytes(this._data,f,f+b);this._skip(b);return f};b.prototype.getMessage=function(){var g=this._getLength(),f=this._pos,f=new b(this._data,this._dataView,f,f+g);this._skip(g);
return f};b.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};b.prototype._skip=function(b){if(this._pos+b>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=b};b.prototype._decodeVarint=function(){var b=this._data,f=this._pos,l=0,k;if(10<=this._end-f){if(k=b[f++],l|=k&127,0!==(k&128)&&(k=b[f++],l|=(k&
127)<<7,0!==(k&128)&&(k=b[f++],l|=(k&127)<<14,0!==(k&128)&&(k=b[f++],l|=(k&127)<<21,0!==(k&128)&&(k=b[f++],l+=268435456*(k&127),0!==(k&128)&&(k=b[f++],l+=34359738368*(k&127),0!==(k&128)&&(k=b[f++],l+=4398046511104*(k&127),0!==(k&128)&&(k=b[f++],l+=562949953421312*(k&127),0!==(k&128)&&(k=b[f++],l+=72057594037927936*(k&127),0!==(k&128)&&(k=b[f++],l+=0x7fffffffffffffff*(k&127),0!==(k&128)))))))))))throw Error("Varint too long!");}else{for(var d=1;f!==this._end;){k=b[f];if(0===(k&128))break;++f;l+=(k&
127)*d;d*=128}if(f===this._end)throw Error("Varint overrun!");++f;l+=k*d}this._pos=f;return l};b.prototype._decodeSVarint=function(){var b=this._decodeVarint();return b%2?-(b+1)/2:b/2};b.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};b.prototype._toString=function(b,f,l){var g="",d="";for(l=Math.min(this._end,l);f<l;++f){var h=b[f];h&128?d+="%"+h.toString(16):(g+=decodeURIComponent(d)+String.fromCharCode(h),d="")}d.length&&
(g+=decodeURIComponent(d));return g};b.prototype._toBytes=function(b,f,l){l=Math.min(this._end,l);return new Uint8Array(b.buffer,f,l-f)};return b}()})},"esri/tasks/operations/urlUtils":function(){define(["require","exports"],function(b,f){function q(b){var g={},f;for(f in b)if("declaredClass"!==f){var k=b[f];if(null!=k&&"function"!==typeof k)if(Array.isArray(k)){g[f]=[];for(var d=0;d<k.length;d++)g[f][d]=q(k[d])}else"object"===typeof k?k.toJSON&&(g[f]=JSON.stringify(k)):g[f]=k}return g}Object.defineProperty(f,
"__esModule",{value:!0});f.mapParameters=q})},"esri/tasks/operations/queryRelatedRecords":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../request","./urlUtils"],function(b,f,q,g,n){function l(b){b=b.toJSON();b.objectIds&&(b.objectIds=b.objectIds.join(","));b.outFields&&(b.outFields=b.outFields.join(","));b.outSpatialReference&&(b.outSR=b.outSR.wkid||JSON.stringify(b.outSR.toJSON()),delete b.outSpatialReference);b.source&&(b.layer=JSON.stringify({source:b.source}),
delete b.source);return b}Object.defineProperty(f,"__esModule",{value:!0});f.toQueryStringParameters=l;f.executeRelationshipQuery=function(b,d,f){d={query:n.mapParameters(q({},b.query,{f:"json"},l(d))),callbackParamName:"callback"};f&&(d=q({},f,d));return g(b.path+"/queryRelatedRecords",d).then(function(b){for(var a=b.data,c=a.geometryType,d=a.spatialReference,g={},f=0,a=a.relatedRecordGroups;f<a.length;f++){var h=a[f],k={fields:void 0,objectIdFieldName:void 0,geometryType:c,spatialReference:d,features:h.relatedRecords};
if(null!=h.objectId)g[h.objectId]=k;else for(var l in h)h.hasOwnProperty(l)&&"relatedRecords"!==l&&(g[h[l]]=k)}b.data=g;return b})}})},"esri/tasks/support/FeatureSet":function(){define("../../core/kebabDictionary ../../core/JSONSupport ../../core/lang ../../Graphic ../../layers/support/Field ../../geometry/SpatialReference ../../geometry/support/graphicsUtils ../../geometry/support/jsonUtils dojo/_base/lang".split(" "),function(b,f,q,g,n,l,k,d,h){b=b({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",
esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent"});return f.createSubclass({declaredClass:"esri.tasks.support.FeatureSet",getDefaults:function(){return h.mixin(this.inherited(arguments),{features:[]})},properties:{displayFieldName:null,exceededTransferLimit:null,features:{value:null,json:{read:function(b,a){var c=l.fromJSON(a.spatialReference);b=b.map(function(a){var b=g.fromJSON(a);a=a.geometry&&a.geometry.spatialReference;b.geometry&&!a&&(b.geometry.spatialReference=
c);return b});a.transform&&this._hydrate(a.transform,a.geometryType,b);return b}}},fields:{value:null,type:[n]},geometryType:{value:null,json:{read:b.fromJSON}},spatialReference:{type:l}},toJSON:function(b){var a={hasZ:this.hasZ,hasM:this.hasM};this.displayFieldName&&(a.displayFieldName=this.displayFieldName);this.fields&&(a.fields=this.fields.map(function(a){return a.toJSON()}));this.spatialReference?a.spatialReference=this.spatialReference.toJSON():this.features[0]&&this.features[0].geometry&&(a.spatialReference=
this.features[0].geometry.spatialReference.toJSON());this.features[0]&&(this.features[0].geometry&&(a.geometryType=d.getJsonType(this.features[0].geometry)),a.features=k._encodeGraphics(this.features,b));a.exceededTransferLimit=this.exceededTransferLimit;a.transform=this.transform;return q.fixJson(a)},quantize:function(b){var a=b.translate[0],c=b.translate[1],d=b.scale[0],g=b.scale[1],f=this.features,h=function(a,b,c){var d,e,g,f,h,m,p=[];d=0;for(e=a.length;d<e;d++)if(g=a[d],0<d){if(m=b(g[0]),g=c(g[1]),
m!==f||g!==h)p.push([m-f,g-h]),f=m,h=g}else f=b(g[0]),h=c(g[1]),p.push([f,h]);return 0<p.length?p:null},k=function(a,b,c){if("point"===a)return function(a){a.x=b(a.x);a.y=c(a.y);return a};if("polyline"===a||"polygon"===a)return function(a){var d,e,g,f,m;g=a.rings||a.paths;m=[];d=0;for(e=g.length;d<e;d++)f=g[d],(f=h(f,b,c))&&m.push(f);return 0<m.length?(a.rings?a.rings=m:a.paths=m,a):null};if("multipoint"===a)return function(a){var d;d=h(a.points,b,c);return 0<d.length?(a.points=d,a):null};if("extent"===
a)return function(a){return a}}(this.geometryType,function(b){return Math.round((b-a)/d)},function(a){return Math.round((c-a)/g)}),l,m;l=0;for(m=f.length;l<m;l++)k(f[l].geometry)||(f.splice(l,1),l--,m--);this.transform=b;return this},_hydrate:function(b,a,d){if(b){var c=b.translate[0],g=b.translate[1],f=b.scale[0],h=b.scale[1],p=function(a,b,c){if("esriGeometryPoint"===a)return function(a){a.x=b(a.x);a.y=c(a.y)};if("esriGeometryPolyline"===a||"esriGeometryPolygon"===a)return function(a){a=a.rings||
a.paths;var d,e,g,f,h,m,p,k;d=0;for(e=a.length;d<e;d++)for(h=a[d],g=0,f=h.length;g<f;g++)m=h[g],0<g?(p+=m[0],k+=m[1]):(p=m[0],k=m[1]),m[0]=b(p),m[1]=c(k)};if("esriGeometryEnvelope"===a)return function(a){a.xmin=b(a.xmin);a.ymin=c(a.ymin);a.xmax=b(a.xmax);a.ymax=c(a.ymax)};if("esriGeometryMultipoint"===a)return function(a){a=a.points;var d,e,g,f,h;d=0;for(e=a.length;d<e;d++)g=a[d],0<d?(f+=g[0],h+=g[1]):(f=g[0],h=g[1]),g[0]=b(f),g[1]=c(h)}}(a,function(a){return a*f+c},function(a){return g-a*h});b=0;
for(a=d.length;b<a;b++)d[b].geometry&&p(d[b].geometry)}}})})},"esri/layers/support/Field":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./domains ./fieldType".split(" "),function(b,f,q,g,n,l,k,d){return function(b){function c(a){a=b.call(this)||this;a.alias=null;a.domain=null;a.editable=!1;a.length=-1;a.name=null;a.nullable=!0;a.type=null;return a}q(c,b);a=c;c.prototype.readDomain=
function(a){var b=a&&a.type;return"range"===b?k.RangeDomain.fromJSON(a):"codedValue"===b?k.CodedValueDomain.fromJSON(a):null};c.prototype.clone=function(){return new a({alias:this.alias,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type})};g([l.property({type:String,json:{write:!0}})],c.prototype,"alias",void 0);g([l.property({types:k.types,json:{write:!0}})],c.prototype,"domain",void 0);g([l.reader("domain")],
c.prototype,"readDomain",null);g([l.property({type:Boolean,json:{write:!0}})],c.prototype,"editable",void 0);g([l.property({type:Number,json:{write:!0}})],c.prototype,"length",void 0);g([l.property({type:String,json:{write:!0}})],c.prototype,"name",void 0);g([l.property({type:Boolean,json:{write:!0}})],c.prototype,"nullable",void 0);g([l.property({type:String,json:{read:d.kebabDict.read,write:d.kebabDict.write}})],c.prototype,"type",void 0);return c=a=g([l.subclass("esri.layers.support.Field")],c);
var a}(l.declared(n))})},"esri/layers/support/domains":function(){define("require exports ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),function(b,f,q,g,n,l){Object.defineProperty(f,"__esModule",{value:!0});f.CodedValueDomain=q;f.DomainBase=g;f.InheritedDomain=n;f.RangeDomain=l;f.types={key:"type",base:f.DomainBase,typeMap:{range:f.RangeDomain,"coded-value":f.CodedValueDomain}}})},"esri/layers/support/CodedValueDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ./Domain".split(" "),
function(b,f,q,g,n,l,k){return function(b){function d(a){a=b.call(this,a)||this;a.codedValues=null;a.type="coded-value";return a}q(d,b);c=d;d.prototype.writeCodedValues=function(a,b){var c=null;a&&(c=a.map(function(a){return n.fixJson(n.clone(a))}));b.codedValues=c};d.prototype.getName=function(a){var b=null;if(this.codedValues){var c=String(a);this.codedValues.some(function(a){String(a.code)===c&&(b=a.name);return!!b})}return b};d.prototype.clone=function(){return new c({codedValues:n.clone(this.codedValues),
name:this.name})};g([l.property({json:{write:!0}})],d.prototype,"codedValues",void 0);g([l.writer("codedValues")],d.prototype,"writeCodedValues",null);g([l.property()],d.prototype,"type",void 0);return d=c=g([l.subclass("esri.layers.support.CodedValueDomain")],d);var c}(l.declared(k))})},"esri/layers/support/Domain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators".split(" "),
function(b,f,q,g,n,l,k){var d=l({inherited:"inherited",codedValue:"coded-value",range:"range"});return function(b){function c(a){a=b.call(this,a)||this;a.name=null;a.type=null;return a}q(c,b);g([k.property({json:{write:!0}})],c.prototype,"name",void 0);g([k.property({json:{read:d.read,write:d.write}})],c.prototype,"type",void 0);return c=g([k.subclass("esri.layers.support.Domain")],c)}(k.declared(n))})},"esri/layers/support/InheritedDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),
function(b,f,q,g,n,l){return function(b){function d(c){c=b.call(this,c)||this;c.type="inherited";return c}q(d,b);f=d;d.prototype.clone=function(){return new f};g([n.property()],d.prototype,"type",void 0);return d=f=g([n.subclass("esri.layers.support.InheritedDomain")],d);var f}(n.declared(l))})},"esri/layers/support/RangeDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),
function(b,f,q,g,n,l){return function(b){function d(c){c=b.call(this,c)||this;c.maxValue=null;c.minValue=null;c.type="range";return c}q(d,b);f=d;d.prototype.clone=function(){return new f({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};g([n.property({json:{read:{source:"range",reader:function(b,a){return a.range&&a.range[1]}},write:{target:"range",writer:function(b,a,d){a[d]=[this.minValue,b]}}}})],d.prototype,"maxValue",void 0);g([n.property({json:{read:{source:"range",reader:function(b,
a){return a.range&&a.range[0]}},write:{target:"range",writer:function(b,a,d){a[d]=[b,this.maxValue]}}}})],d.prototype,"minValue",void 0);g([n.property()],d.prototype,"type",void 0);return d=f=g([n.subclass("esri.layers.support.RangeDomain")],d);var f}(n.declared(l))})},"esri/layers/support/fieldType":function(){define(["require","exports","../../core/kebabDictionary"],function(b,f,q){Object.defineProperty(f,"__esModule",{value:!0});f.kebabDict=q({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",
esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})})},"esri/geometry/support/graphicsUtils":function(){define(["require","exports","../../core/Collection","../Extent"],function(b,f,q,g){Object.defineProperty(f,"__esModule",
{value:!0});f.graphicsExtent=function(b){if(!b||!b.length)return null;var f=q.isCollection(b)?b.getItemAt(0).geometry:b[0].geometry,k=f.extent,d=f;null===k&&(k=new g(d.x,d.y,d.x,d.y,f.spatialReference));for(var h=1;h<b.length;h++){var d=f=q.isCollection(b)?b.getItemAt(h).geometry:b[h].geometry,c=f.extent;null===c&&(c=new g(d.x,d.y,d.x,d.y,f.spatialReference));k=k.clone().union(c)}return 0>k.width&&0>k.height?null:k};f.getGeometries=function(b){return b.map(function(b){return b.geometry})};f._encodeGraphics=
function(b,g){var f=[];b.forEach(function(b,h){b=b.toJSON();var c={};if(b.geometry){var a=g&&g[h];c.geometry=a&&a.toJSON()||b.geometry}b.attributes&&(c.attributes=b.attributes);f[h]=c});return f}})},"esri/tasks/support/Query":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils ../../geometry/support/typeUtils ../../symbols/support/jsonUtils ../../symbols/support/typeUtils ./QuantizationParameters ./StatisticDefinition".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z,t){var x=d({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),r=d({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",
esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return function(b){function d(a){a=b.call(this,a)||this;a.datumTransformation=null;a.distance=void 0;a.gdbVersion=null;a.geometry=null;a.geometryPrecision=void 0;a.groupByFieldsForStatistics=null;a.historicMoment=null;a.maxAllowableOffset=void 0;a.maxRecordCountFactor=1;a.multipatchOption=null;a.num=void 0;a.objectIds=null;a.orderByFields=null;a.outFields=null;a.outSpatialReference=null;a.outStatistics=null;a.parameterValues=
null;a.pixelSize=null;a.quantizationParameters=null;a.rangeValues=null;a.relationParameter=null;a.resultType=null;a.returnDistinctValues=!1;a.returnGeometry=!1;a.returnCentroid=!1;a.returnExceededLimitFeatures=!0;a.returnM=!1;a.returnZ=!1;a.source=null;a.spatialRelationship="intersects";a.start=void 0;a.sqlFormat=null;a.text=null;a.timeExtent=null;a.units="meters";a.where=null;return a}q(d,b);f=d;d.prototype.castDatumTransformation=function(a){return"number"===typeof a||"object"===typeof a?a:null};
d.prototype.writeHistoricMoment=function(a,b,c){b.historicMoment=a&&a.getTime()};d.prototype.writeParameterValues=function(a,b,c){if(a){c={};for(var d in a){var e=a[d];Array.isArray(e)?c[d]=e.map(function(a){return a instanceof Date?a.getTime():a}):c[d]=e instanceof Date?e.getTime():e}b.parameterValues=c}};d.prototype.writeStart=function(a,b,c){b.resultOffset=this.start;b.resultRecordCount=this.num||10;b.where="1\x3d1"};d.prototype.writeWhere=function(a,b,c){b.where=a||"1\x3d1"};d.prototype.clone=
function(){return new f(h.clone({datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,historicMoment:this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,
outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnM:this.returnM,
returnZ:this.returnZ,source:this.source,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.text,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))};g([c.property({json:{write:!0}})],d.prototype,"datumTransformation",void 0);g([c.cast("datumTransformation")],d.prototype,"castDatumTransformation",null);g([c.property({type:Number,json:{write:!0}})],d.prototype,"distance",void 0);g([c.property({type:String,json:{write:!0}})],d.prototype,"gdbVersion",
void 0);g([c.property({types:p.types,json:{read:a.fromJSON,write:!0}})],d.prototype,"geometry",void 0);g([c.property({type:Number,json:{write:!0}})],d.prototype,"geometryPrecision",void 0);g([c.property({type:[String],json:{write:!0}})],d.prototype,"groupByFieldsForStatistics",void 0);g([c.property({type:Date})],d.prototype,"historicMoment",void 0);g([c.writer("historicMoment")],d.prototype,"writeHistoricMoment",null);g([c.property({type:Number,json:{write:!0}})],d.prototype,"maxAllowableOffset",
void 0);g([c.property({type:Number,cast:function(a){return 1>a?1:5<a?5:a},json:{write:{overridePolicy:function(a){return{enabled:1<a}}}}})],d.prototype,"maxRecordCountFactor",void 0);g([c.property({type:String,json:{write:!0}})],d.prototype,"multipatchOption",void 0);g([c.property({type:Number,json:{read:{source:"resultRecordCount"}}})],d.prototype,"num",void 0);g([c.property({type:[Number],json:{write:!0}})],d.prototype,"objectIds",void 0);g([c.property({type:[String],json:{write:!0}})],d.prototype,
"orderByFields",void 0);g([c.property({type:[String],json:{write:!0}})],d.prototype,"outFields",void 0);g([c.property({type:n.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],d.prototype,"outSpatialReference",void 0);g([c.property({type:[t],json:{write:!0}})],d.prototype,"outStatistics",void 0);g([c.property({json:{write:!0}})],d.prototype,"parameterValues",void 0);g([c.writer("parameterValues")],d.prototype,"writeParameterValues",null);g([c.property({types:v.types,json:{read:u.read,
write:!0}})],d.prototype,"pixelSize",void 0);g([c.property({type:z.default,json:{write:!0}})],d.prototype,"quantizationParameters",void 0);g([c.property({type:[Object],json:{write:!0}})],d.prototype,"rangeValues",void 0);g([c.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy:function(a){return{enabled:"relation"===this.spatialRelationship}}}}})],d.prototype,"relationParameter",void 0);g([c.property({type:String,json:{write:!0}})],d.prototype,"resultType",
void 0);g([c.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],d.prototype,"returnDistinctValues",void 0);g([c.property({type:Boolean,json:{write:!0}})],d.prototype,"returnGeometry",void 0);g([c.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],d.prototype,"returnCentroid",void 0);g([c.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:!a}}}}})],d.prototype,"returnExceededLimitFeatures",void 0);g([c.property({type:Boolean,
json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],d.prototype,"returnM",void 0);g([c.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],d.prototype,"returnZ",void 0);g([c.property({json:{write:!0}})],d.prototype,"source",void 0);g([c.property({type:String,json:{read:{source:"spatialRel",reader:x.read},write:{target:"spatialRel",writer:x.write}}})],d.prototype,"spatialRelationship",void 0);g([c.property({type:Number,json:{read:{source:"resultOffset"}}})],
d.prototype,"start",void 0);g([c.writer("start"),c.writer("num")],d.prototype,"writeStart",null);g([c.property({type:String,json:{write:!0}})],d.prototype,"sqlFormat",void 0);g([c.property({type:String,json:{write:!0}})],d.prototype,"text",void 0);g([c.property({type:l,json:{write:!0}})],d.prototype,"timeExtent",void 0);g([c.property({type:String,json:{read:r.read,write:{writer:r.write,overridePolicy:function(a){return{enabled:0<this.distance}}}}})],d.prototype,"units",void 0);g([c.property({type:String,
json:{write:{overridePolicy:function(a){return{enabled:null!=a||0<this.start}}}}})],d.prototype,"where",void 0);g([c.writer("where")],d.prototype,"writeWhere",null);return d=f=g([c.subclass("esri.tasks.support.Query")],d);var f}(c.declared(k))})},"esri/TimeExtent":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/accessorSupport/decorators".split(" "),function(b,f,q,g,n,l){var k={milliseconds:{getter:"getUTCMilliseconds",
setter:"setUTCMilliseconds",multiplier:1},seconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},minutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},hours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},days:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},weeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},months:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},years:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},decades:{getter:"getUTCFullYear",
setter:"setUTCFullYear",multiplier:10},centuries:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}};return function(b){function d(a,c){a=b.call(this)||this;a.endTime=null;a.startTime=null;return a}q(d,b);c=d;d.prototype.normalizeCtorArgs=function(a,b){return!a||a instanceof Date?{startTime:a,endTime:b}:a};d.prototype.readEndTime=function(a,b){return null!=b.endTime?new Date(b.endTime):null};d.prototype.writeEndTime=function(a,b,c){b.endTime=a?a.getTime():null};d.prototype.readStartTime=
function(a,b){return null!=b.startTime?new Date(b.startTime):null};d.prototype.writeStartTime=function(a,b,c){b.startTime=a?a.getTime():null};d.prototype.clone=function(){return new c({endTime:this.endTime,startTime:this.startTime})};d.prototype.intersection=function(a){if(!a)return null;var b=this.startTime?this.startTime.getTime():-Infinity,d=this.endTime?this.endTime.getTime():Infinity,g=a.startTime?a.startTime.getTime():-Infinity;a=a.endTime?a.endTime.getTime():Infinity;var f,h;g>=b&&g<=d?f=g:
b>=g&&b<=a&&(f=b);d>=g&&d<=a?h=d:a>=b&&a<=d&&(h=a);if(isNaN(f)||isNaN(h))return null;b=new c;b.startTime=-Infinity===f?null:new Date(f);b.endTime=Infinity===h?null:new Date(h);return b};d.prototype.offset=function(a,b){var d=new c,g=this.startTime,f=this.endTime;g&&(d.startTime=this._offsetDate(g,a,b));f&&(d.endTime=this._offsetDate(f,a,b));return d};d.prototype._offsetDate=function(a,b,c){a=new Date(a.getTime());b&&c&&(c=k[c],a[c.setter](a[c.getter]()+b*c.multiplier));return a};g([l.property({type:Date,
json:{write:{allowNull:!0}}})],d.prototype,"endTime",void 0);g([l.reader("endTime")],d.prototype,"readEndTime",null);g([l.writer("endTime")],d.prototype,"writeEndTime",null);g([l.property({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"startTime",void 0);g([l.reader("startTime")],d.prototype,"readStartTime",null);g([l.writer("startTime")],d.prototype,"writeStartTime",null);return d=c=g([l.subclass("esri.TimeExtent")],d);var c}(l.declared(n))})},"esri/tasks/support/QuantizationParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators".split(" "),
function(b,f,q,g,n,l,k,d,h){Object.defineProperty(f,"__esModule",{value:!0});var c=k({upperLeft:"upper-left",lowerLeft:"lower-left"});b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.extent=null;b.mode="view";b.originPosition="upper-left";return b}q(b,a);f=b;b.prototype.clone=function(){return new f(d.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};g([h.property({type:n.Extent,json:{write:!0}})],b.prototype,"extent",
void 0);g([h.property({type:String,json:{write:!0}})],b.prototype,"mode",void 0);g([h.property({type:String,json:{read:c.read,write:c.write}})],b.prototype,"originPosition",void 0);g([h.property({type:Number,json:{write:!0}})],b.prototype,"tolerance",void 0);return b=f=g([h.subclass("esri.tasks.support.QuantizationParameters")],b);var f}(h.declared(l));f.default=b})},"esri/tasks/support/StatisticDefinition":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(b,f,q,g,n,l){return function(b){function d(c){c=b.call(this)||this;c.maxPointCount=void 0;c.maxRecordCount=void 0;c.maxVertexCount=void 0;c.onStatisticField=null;c.outStatisticFieldName=null;c.statisticType=null;return c}q(d,b);f=d;d.prototype.clone=function(){return new f({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType})};
g([l.property({type:Number,json:{write:!0}})],d.prototype,"maxPointCount",void 0);g([l.property({type:Number,json:{write:!0}})],d.prototype,"maxRecordCount",void 0);g([l.property({type:Number,json:{write:!0}})],d.prototype,"maxVertexCount",void 0);g([l.property({type:String,json:{write:!0}})],d.prototype,"onStatisticField",void 0);g([l.property({type:String,json:{write:!0}})],d.prototype,"outStatisticFieldName",void 0);g([l.property({type:String,json:{write:!0}})],d.prototype,"statisticType",void 0);
return d=f=g([l.subclass("esri.tasks.support.StatisticDefinition")],d);var f}(l.declared(n))})},"esri/tasks/support/RelationshipQuery":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators".split(" "),function(b,f,q,g,n,l,k,d){return function(b){function c(a){a=b.call(this,a)||this;a.definitionExpression=null;a.gdbVersion=null;a.geometryPrecision=void 0;
a.historicMoment=null;a.maxAllowableOffset=void 0;a.objectIds=null;a.outFields=null;a.outSpatialReference=null;a.relationshipId=void 0;a.returnGeometry=!1;a.source=null;return a}q(c,b);a=c;c.prototype._writeHistoricMoment=function(a,b){b.historicMoment=a&&a.getTime()};c.prototype.clone=function(){return new a(k.clone({definitionExpression:this.definitionExpression,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&this.historicMoment.getTime(),
maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,source:this.source}))};g([d.property({type:String,json:{write:!0}})],c.prototype,"definitionExpression",void 0);g([d.property({type:String,json:{write:!0}})],c.prototype,"gdbVersion",void 0);g([d.property({type:Number,json:{write:!0}})],c.prototype,"geometryPrecision",void 0);g([d.property({type:Date})],
c.prototype,"historicMoment",void 0);g([d.writer("historicMoment")],c.prototype,"_writeHistoricMoment",null);g([d.property({type:Number,json:{write:!0}})],c.prototype,"maxAllowableOffset",void 0);g([d.property({type:[Number],json:{write:!0}})],c.prototype,"objectIds",void 0);g([d.property({type:[String],json:{write:!0}})],c.prototype,"outFields",void 0);g([d.property({type:n.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],c.prototype,"outSpatialReference",void 0);g([d.property({json:{write:!0}})],
c.prototype,"relationshipId",void 0);g([d.property({json:{write:!0}})],c.prototype,"returnGeometry",void 0);g([d.property({json:{write:!0}})],c.prototype,"source",void 0);return c=a=g([d.subclass("esri.tasks.support.RelationshipQuery")],c);var a}(d.declared(l))})},"esri/layers/graphics/controllers/OnDemandController2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Error ../../../core/Evented ../../../core/Handles ../../../core/Logger ../../../core/Promise ../../../core/promiseUtils ../../../core/accessorSupport/decorators ../../../geometry/support/aaBoundingRect ./support/TileSet ../../support/GraphicsManager ../../support/TileInfo ../../../views/2d/tiling/TileInfoView ../../../views/2d/tiling/TileKey ../../../views/2d/tiling/TileQueue ../../../views/2d/tiling/TileStrategy".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z,t,x,r,m,e){var w=h.getLogger("esri.views.2d.layers.MapImageLayerView2D"),y=function(){function a(){this.key=new r(0,0,0,0)}a.prototype.dispose=function(){};return a}();return function(b){function c(a){var c=b.call(this)||this;c._handles=new d;c._pendingQueries=new Map;c._tileRequests=new Map;c.layer=a.layer;c.layerView=a.layerView;c.graphics=a.graphics;c._tileInfo=t.create({spatialReference:c.layerView.view.spatialReference,size:512});c._tileInfoView=new x(c._tileInfo);
c._tileQueue=new m({tileInfoView:c._tileInfoView,process:function(a){return c._fetchTile(a)}});c._tileSet=new v({layer:c.layer,tileInfo:c._tileInfo});c._graphicsManager=new z({graphics:c.graphics,objectIdField:c.layer.objectIdField});c._tileStrategy=new e({cachePolicy:"purge",acquireTile:function(a){return c._acquireTile(a)},releaseTile:function(a){return c._releaseTile(a)},tileInfoView:c._tileInfoView});c._handles.add([c.layer.watch("outFields",function(a,b){a&&b?-1===b.indexOf("*")&&(a.sort(),b.sort(),
JSON.stringify(a)!==JSON.stringify(b)&&c.refresh()):c.refresh()}),c.layer.watch("definitionExpression, historicMoment",function(){return c.refresh()}),c.layer.on("edits",function(a){return c._editsHandler(a)})],"layer");return c}q(c,b);c.prototype.destroy=function(){var a=this;this._pendingQueries.forEach(function(a){a.isFulfilled()||a.cancel()});this._tileStrategy.tiles.forEach(function(b){return a._releaseTile(b)});this._handles.destroy();this._graphicsManager.destroy();this._tileStrategy.destroy();
this._tileQueue.clear();this._tileRequests.clear()};Object.defineProperty(c.prototype,"graphics",{set:function(a){var b=this,c=this._get("graphics");c!==a&&(this._handles.remove("graphics"),c&&c.forEach(function(a){a.layer=null;a.sourceLayer=null}),a&&(a.forEach(function(a){a.layer=b.layer;a.sourceLayer=b.layer}),this._handles.add([a.on("after-add",function(a){a.item.layer=b.layer;a.item.sourceLayer=b.layer}),a.on("after-remove",function(a){a.item.layer=null;a.item.sourceLayer=null})],"graphics")),
this._set("graphics",a))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"updating",{get:function(){return 0<this._tileQueue.length||this.get("_graphicsManager.updating")},enumerable:!0,configurable:!0});c.prototype.update=function(a){var b=this;this._tileQueue.pause();this._tileQueue.state=a.state;this._tileStrategy.update(a);var c=this.layer.objectIdField,d=new Map;a=this._tileStrategy.tiles.reduce(function(a,e){if(e.featureSet){var g=b._graphicsManager.findIntent(e.intentId);
e.featureSet.features.forEach(function(b){b&&b.attributes&&(d.set(b.attributes[c],g),a.push(b))})}return a},[]);this._graphicsManager.update(a,d);this._tileQueue.resume();this.notifyChange("updating")};c.prototype.refresh=function(){var a=this;this._tileQueue.reset();this._tileStrategy.tiles.forEach(function(b){var c=a._graphicsManager.createIntentToAdd();a.notifyChange("updating");var d=a._tileSet.fetch(b.key).then(function(d){b.intentId=c;b.featureSet=d;a._graphicsManager.add(b.featureSet.features,
b.intentId);return b});d.always(function(){a._graphicsManager.removeIntent(c);a.notifyChange("updating")});return d});this.notifyChange("updating")};c.prototype._acquireTile=function(a){var b=this,c=new y;c.key.set(a);a=this._tileQueue.push(c.key).then(function(a){c.attached=!0;c.featureSet=a.featureSet;c.intentId=a.intentId;b._graphicsManager.removeIntent(c.intentId);b.layerView.requestUpdate()});this._tileRequests.set(c,a);this.notifyChange("updating");return c};c.prototype._releaseTile=function(a){if(this._tileRequests.has(a)){var b=
this._tileRequests.get(a);b.isFulfilled()||b.cancel();this._tileRequests.delete(a);this.layerView.requestUpdate()}};c.prototype._fetchTile=function(b){var c=this,d=this._graphicsManager.createIntentToAdd();b=this._tileSet.fetch(b).then(function(a){for(var b=Date.now(),c=0,e=a.features;c<e.length;c++)e[c]._ts=b;return{featureSet:a,intentId:d}});b.catch(function(b){c._graphicsManager.removeIntent(d);if(b&&"cancel"===b.dojoType)return a.reject(b);b=new l("ondemandcontroller2d:tile-request-failed","Failed to query for features",
{error:b});w.error(b);return a.reject(b)});return b};c.prototype._editsHandler=function(a){var b=this,c=function(a){return a.objectId},d=a.deletedFeatures.map(c);this._graphicsManager.delete(d);a=a.addedFeatures.concat(a.updatedFeatures).map(c);if(a.length){c=this.layer.createQuery();c.objectIds=a;c.outSpatialReference=this._tileInfo.spatialReference;var e=this._graphicsManager.createIntentToAdd(a);a=this.layer.queryFeatures(c);this._pendingQueries.set(e,a);this.notifyChange("updating");a.then(function(a){return b._refetchHandler(a,
e)}).always(function(){b._graphicsManager.removeIntent(e);b._pendingQueries.delete(e);b.notifyChange("updating")})}};c.prototype._refetchHandler=function(a,b){var c=this,d=a.features;if(d){var e=this._tileInfo.spatialReference;a=function(a){var b=u.toExtent(a.key.extent,e);d.forEach(function(d){d.geometry&&b.intersects(d.geometry)&&c._addFeatureToTile(d,a)})};for(var g=0,f=this._tileStrategy.tiles;g<f.length;g++)a(f[g]);this._graphicsManager.add(d,b)}};c.prototype._addFeatureToTile=function(a,b){var c=
b.featureSet.features||[],d=this.layer.objectIdField,e=a.attributes&&a.attributes[d],g;c.some(function(a){(a.attributes&&a.attributes[d])===e&&(g=a);return!!g});g?(g.geometry=a.geometry,g.attributes=a.attributes):c.push(a);b.featureSet.features=c};g([p.property()],c.prototype,"graphics",null);g([p.property()],c.prototype,"layer",void 0);g([p.property()],c.prototype,"layerView",void 0);g([p.property()],c.prototype,"updating",null);return c=g([p.subclass("esri.layers.graphics.controllers.OnDemandController2D")],
c)}(p.declared(n,c,k))})},"esri/layers/graphics/controllers/support/TileSet":function(){define(["require","exports","../../../../geometry/support/aaBoundingRect","../../../../tasks/support/QuantizationParameters"],function(b,f,q,g){return function(){function b(b){this.layer=b.layer;this.tileInfo=b.tileInfo}b.prototype.fetch=function(b){return this._queryTile(b)};b.prototype._queryTile=function(b){return this.layer.queryFeatures(this._createQuery(b))};b.prototype._createQuery=function(b){this.tileInfo.updateTileInfo(b);
var g=this.tileInfo.spatialReference,d=this.layer.createQuery();d.geometry=q.toExtent(b.extent,g);d.outSpatialReference=g;this._setResolutionParams(d,b);return d};b.prototype._setResolutionParams=function(b,f){var d=this.layer,h=d.geometryType;if("polyline"===h||"polygon"===h)f=this.tileInfo.lodAt(f.level).resolution,"polyline"===h&&(b.maxAllowableOffset=f),d.get("capabilities.query.supportsQuantization")&&(b.quantizationParameters=new g.default({mode:"view",originPosition:"upper-left",tolerance:f,
extent:d.fullExtent}))};return b}()})},"esri/layers/support/GraphicsManager":function(){define(["../../core/Accessor"],function(b){var f=0;return b.createSubclass({constructor:function(){this._deletedGraphicsIndex=new Set;this._intentsIndex=new Map},destroy:function(){this.removeAll();this._intentsIndex=this._deletedGraphicsIndex=null},properties:{graphics:null,indexById:{value:null,dependsOn:["graphics","objectIdField"],get:function(){return this._createIndexById(this.graphics&&this.graphics.toArray(),
this.objectIdField)}},numGraphics:{value:0,dependsOn:["indexById"],get:function(){return this.indexById?this.indexById.size:0}},objectIdField:null,updating:{value:!1,dependsOn:["_intentsIndex"],get:function(){return!!(this._intentsIndex&&0<this._intentsIndex.size)}},_intentsIndex:{value:null}},_oldIndex:null,_deletedGraphicsIndex:null,beginPagedUpdate:function(){this._oldIndex=this.indexById;this.indexById=null;this.notifyChange("numGraphics")},addPage:function(b,g){this.add(b,g)},revertPagedUpdate:function(){var b=
this._removeLeftOnly(this.indexById,this._oldIndex);this.indexById=this._oldIndex;this._oldIndex=null;this.graphics.removeMany(b);this.notifyChange("numGraphics")},endPagedUpdate:function(){var b=this._removeLeftOnly(this._oldIndex,this.indexById);this._oldIndex=null;this.graphics.removeMany(b);this.notifyChange("numGraphics")},findGraphic:function(b){return(b=this.indexById&&this.indexById.get(b))&&b.graphic},removeAll:function(){this.indexById=this._oldIndex=null;this.graphics.removeAll();this.notifyChange("numGraphics")},
add:function(b,g){if(b&&b.length){for(var f=this.objectIdField,l=this.indexById=this.indexById||new Map,k=this._oldIndex,d=this._createIndexById(b,f),d=this._extractObjectIds(d),l=this._extractObjectIds(l),k=this._extractObjectIds(k),l=l.concat(k),h=[],c=l.length,k=0;k<c;k++){var a=l[k];-1<d.indexOf(a)&&h.push(a)}h.length&&this._remove(h,!1);g=this.findIntent(g);d=new Map;l=b.length;for(k=0;k<l;k++)(h=b[k])&&h.attributes&&d.set(h.attributes[f],g);b.length&&this._add(b,d)}},remove:function(b){this._remove(b,
!1)},delete:function(b){this._remove(b,!0)},isDeleted:function(b){return this._deletedGraphicsIndex.has(b)},createIntentToAdd:function(b){b&&this._intentsIndex.forEach(function(g,f){b.forEach(function(b){g.ignoredIds.add(b)})},this);var g=f++;this._intentsIndex.set(g,{ignoredIds:new Set});this.notifyChange("updating");return g},findIntent:function(b){return this._intentsIndex.get(b)},removeIntent:function(b){this._intentsIndex.delete(b);this.notifyChange("updating")},update:function(b,g){if(b&&b.length){var f=
this.objectIdField,l=this.indexById=this.indexById||new Map,k=this._oldIndex;b=this._createIndexById(b,f);for(var f=this._extractObjectIds(b),d=this._extractObjectIds(l),h=this._extractObjectIds(k),d=d.concat(h),h=[],c=d.length,a=0;a<c;a++){var p=d[a];if(-1===f.indexOf(p))h.push(p);else{var q=l.get(p)||k.get(p),q=q&&q.graphic&&q.graphic._ts,v=b.get(p);(v&&v.graphic&&v.graphic._ts)>q&&h.push(p)}}l=[];k=f.length;for(a=0;a<k;a++)p=f[a],(-1===d.indexOf(p)||-1<h.indexOf(p))&&l.push(p);h.length&&this._remove(h,
!1);l.length&&this._add(this._extractGraphics(l,b),g)}},_createIndexById:function(b,g){var f;if(b&&b.length&&g){var l,k,d;f=new Map;for(l=0;k=b[l];l++)d=k.attributes&&k.attributes[g],null!=d&&f.set(d,{graphic:k,refCount:1})}return f},_add:function(b,g){var f=this.objectIdField;b.forEach(function(b){var k=g.get(b.attributes&&b.attributes[f]);this._addToIndex(b,this.indexById,k)},this);this.graphics.addMany(b);this.notifyChange("numGraphics")},_addToIndex:function(b,g,f){var l=b.attributes&&b.attributes[this.objectIdField];
g&&null!=l&&(g.has(l)?f&&f.ignoredIds.has(l)||(f=g.get(l),g.set(l,{graphic:b,refCount:f.refCount+1})):this.isDeleted(l)||g.set(l,{graphic:b,refCount:1}))},_remove:function(b,g){b=b||[];b="object"===typeof b[0]?b.map(function(b){return b.attributes&&b.attributes[this.objectIdField]}.bind(this)):b;var f=this._extractGraphics(b,this._oldIndex),l=this._extractGraphics(b,this.indexById);b.forEach(function(b){g&&this._deletedGraphicsIndex.add(b);this._removeFromIndex(b,this._oldIndex,g);this._removeFromIndex(b,
this.indexById,g)}.bind(this));this.graphics.removeMany(f.concat(l));this.notifyChange("numGraphics")},_removeFromIndex:function(b,g,f){if(g&&g.has(b))if(f)g.delete(b);else{f=g.get(b);var l=f.refCount-1;0===l?g.delete(b):f.refCount=l}},_removeLeftOnly:function(b,g){var f=[];b&&b.forEach(function(l,k){var d=l.graphic;!d||g&&g.has(k)||(--l.refCount,0===l.refCount&&b.delete(k),f.push(d))});return f},_extractGraphics:function(b,g){return b&&g?b.map(function(b){return(b=g.get(b))&&b.graphic}):[]},_extractObjectIds:function(b){var g=
[];b&&b.forEach(function(b,f){g.push(f)});return g}})})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(b,f,q,g,n,l){var k=function(){function b(b,a,d,g,f,h,k,l){this.x=b;this.ymin=a;this.ymax=d;this.invM=g;this.leftAdjust=f;this.rightAdjust=h;this.leftBound=k;this.rightBound=l}b.create=function(c,a){c[1]>a[1]&&(l=[a,c],c=l[0],a=l[1]);l=c[0];c=c[1];var d=a[0];a=a[1];var g=d-l,f=a-c,f=0!==f?g/f:0,h=(Math.ceil(c)-
c)*f,k=(Math.floor(c)-c)*f;return new b(l,Math.floor(c),Math.ceil(a),f,0>g?h:k,0>g?k:h,0>g?d:l,0>g?l:d);var l};b.prototype.incrRow=function(){this.x+=this.invM};b.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};b.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return b}(),d=[[0,0],[0,0],[0,0],[0,0]];return function(){function b(b,a){var c=this;this.tileInfo=b;this.fullExtent=a;this.scales=[];this._lodInfos=null;this._infoByScale=
{};this._infoByLevel={};var d=b.lods.slice();d.sort(function(a,b){return b.scale-a.scale});var g=this._lodInfos=d.map(function(c){return q.create(b,c,a)});d.forEach(function(a,b){c._infoByLevel[a.level]=g[b];c._infoByScale[a.scale]=g[b];c.scales[b]=a.scale},this);this._wrap=b.isWrappable}b.prototype.getTileBounds=function(b,a){var c=this._infoByLevel[a.level];return c?c.getTileBounds(b,a):b};b.prototype.getTileCoords=function(b,a){var c=this._infoByLevel[a.level];return c?c.getTileCoords(b,a):b};
b.prototype.getTileCoverage=function(b,a){void 0===a&&(a=192);var c=this.getClosestInfoForScale(b.scale),f=g.pool.acquire(c),h=this._wrap,n;n=Infinity;var q=-Infinity,x,r,m=f.spans;d[0][0]=d[0][1]=d[1][1]=d[3][0]=-a;d[1][0]=d[2][0]=b.size[0]+a;d[2][1]=d[3][1]=b.size[1]+a;for(a=0;a<d.length;a++){var e=d[a];b.toMap(e,e);e[0]=c.getColumnForX(e[0]);e[1]=c.getRowForY(e[1])}b=[];e=3;for(a=0;4>a;a++){if(d[a][1]!==d[e][1]){var w=k.create(d[a],d[e]);n=Math.min(w.ymin,n);q=Math.max(w.ymax,q);void 0===b[w.ymin]&&
(b[w.ymin]=[]);b[w.ymin].push(w)}e=a}if(null==n||null==q||100<q-n)return null;for(e=[];n<q;){null!=b[n]&&(e=e.concat(b[n]));x=Infinity;r=-Infinity;for(a=e.length-1;0<=a;a--)w=e[a],x=Math.min(x,w.getLeftCol()),r=Math.max(r,w.getRightCol());x=Math.floor(x);r=Math.floor(r);if(n>=c.first[1]&&n<=c.last[1])if(h)if(c.size[0]<c.worldSize[0])for(w=Math.floor(r/c.worldSize[0]),a=Math.floor(x/c.worldSize[0]);a<=w;a++)m.push(new l(n,Math.max(c.getFirstColumnForWorld(a),x),Math.min(c.getLastColumnForWorld(a),
r)));else m.push(new l(n,x,r));else x>c.last[0]||r<c.first[0]||(x=Math.max(x,c.first[0]),r=Math.min(r,c.last[0]),m.push(new l(n,x,r)));n+=1;for(a=e.length-1;0<=a;a--)w=e[a],w.ymax>=n?w.incrRow():e.splice(a,1)}return f};b.prototype.getTileIdAtParent=function(b,a){a=n.pool.acquire(a);var c=this._infoByLevel[a.level];if(b.resolution<c.resolution)throw Error("Cannot calculate parent tile. destination LOD's resolution "+b.resolution+" is not a parent resolution of "+c.resolution);return b.resolution===
c.resolution?a.id:n.getId(b.level,Math.floor(a.row*c.resolution/b.resolution+.01),Math.floor(a.col*c.resolution/b.resolution+.01),a.world)};b.prototype.getTileParentId=function(b){b=n.pool.acquire(b);var a=this._lodInfos.indexOf(this._infoByLevel[b.level])-1;if(0>a)return n.pool.release(b),null;a=this.getTileIdAtParent(this._lodInfos[a],b);n.pool.release(b);return a};b.prototype.getTileResolution=function(b){return(b=this._infoByLevel[b.level])?b.resolution:-1};b.prototype.getTileScale=function(b){return(b=
this._infoByLevel[b.level])?b.scale:-1};b.prototype.intersects=function(b,a){var c=n.pool.acquire(a);a=this._infoByLevel[c.level];var d=b.lodInfo;if(d.resolution>a.resolution){var g=n.pool.acquire(this.getTileIdAtParent(d,c)),f=d.denormalizeCol(g.col,g.world);a=b.spans.some(function(a){return a.row===g.row&&a.colFrom<=f&&a.colTo>=f});n.pool.release(c);n.pool.release(g);return a}if(d.resolution<a.resolution){var h=b.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=
Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,-Infinity]);b=h[0];var k=h[1],l=h[2],h=h[3],m=a.denormalizeCol(c.col,c.world),e=d.getColumnForX(a.getXForColumn(m)),q=d.getRowForY(a.getYForRow(c.row)),m=d.getColumnForX(a.getXForColumn(m+1))-1;a=d.getRowForY(a.getYForRow(c.row+1))-1;n.pool.release(c);return!(e>h||m<l||q>k||a<b)}var y=d.denormalizeCol(c.col,c.world);a=b.spans.some(function(a){return a.row===c.row&&a.colFrom<=y&&a.colTo>=y});n.pool.release(c);
return a};b.prototype.getClosestInfoForScale=function(b){var a=this.scales;this._infoByScale[b]||(b=a.reduce(function(a,c,d,g){return Math.abs(c-b)<Math.abs(a-b)?c:a},a[0]));return this._infoByScale[b]};return b}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(b,f,q,g){function n(b,d,g){b[0]=d;b[1]=g;return b}var l=new g("0/0/0/0");return function(){function b(b,g,c,a,f,k,l,n,q,x,r,m){this.level=b;this.resolution=
g;this.scale=c;this.origin=a;this.first=f;this.last=k;this.size=l;this.norm=n;this.worldStart=q;this.worldEnd=x;this.worldSize=r;this.wrap=m}b.create=function(d,g,c){var a=q.getInfo(d.spatialReference),f=[d.origin.x,d.origin.y],h=[d.size[0]*g.resolution,d.size[1]*g.resolution],k=[-Infinity,-Infinity],l=[Infinity,Infinity],t=[Infinity,Infinity];c&&(n(k,Math.max(0,Math.floor((c.xmin-f[0])/h[0])),Math.max(0,Math.floor((f[1]-c.ymax)/h[1]))),n(l,Math.max(0,Math.floor((c.xmax-f[0])/h[0])),Math.max(0,Math.floor((f[1]-
c.ymin)/h[1]))),n(t,l[0]-k[0]+1,l[1]-k[1]+1));var x;d.isWrappable?(d=[Math.ceil(Math.round(2*a.origin[1]/g.resolution)/d.size[0]),t[1]],a=[Math.floor((a.origin[0]-f[0])/h[0]),k[1]],c=[d[0]+a[0]-1,l[1]],x=!0):(a=k,c=l,d=t,x=!1);return new b(g.level,g.resolution,g.scale,f,k,l,t,h,a,c,d,x)};b.prototype.normalizeCol=function(b){if(!this.wrap)return b;var d=this.worldSize[0];return 0>b?d-1-Math.abs((b+1)%d):b%d};b.prototype.denormalizeCol=function(b,g){return this.wrap?this.worldSize[0]*g+b:b};b.prototype.getWorldForColumn=
function(b){return this.wrap?Math.floor(b/this.worldSize[0]):0};b.prototype.getFirstColumnForWorld=function(b){return b*this.worldSize[0]+this.first[0]};b.prototype.getLastColumnForWorld=function(b){return b*this.worldSize[0]+this.first[0]+this.size[0]-1};b.prototype.getColumnForX=function(b){return(b-this.origin[0])/this.norm[0]};b.prototype.getXForColumn=function(b){return this.origin[0]+b*this.norm[0]};b.prototype.getRowForY=function(b){return(this.origin[1]-b)/this.norm[1]};b.prototype.getYForRow=
function(b){return this.origin[1]-b*this.norm[1]};b.prototype.getTileBounds=function(b,g){l.set(g);var c=this.denormalizeCol(l.col,l.world),a=l.row;g=this.getXForColumn(c);var d=this.getYForRow(a+1),c=this.getXForColumn(c+1),a=this.getYForRow(a);b[0]=g;b[1]=d;b[2]=c;b[3]=a;return b};b.prototype.getTileCoords=function(b,g){l.set(g);Array.isArray(b)?n(b,this.getXForColumn(this.denormalizeCol(l.col,l.world)),this.getYForRow(l.row)):(b.x=this.getXForColumn(this.denormalizeCol(l.col,l.world)),b.y=this.getYForRow(l.row));
return b};return b}()})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(b,f,q){return function(){function b(b,g,f,d){this.set(b,g,f,d)}b.from=function(g,f,k,d){return b.pool.acquire(g,f,k,d)};b.getId=function(b,g,f,d){return"object"===typeof b?b.level+"/"+b.row+"/"+b.col+"/"+b.world:b+"/"+g+"/"+f+"/"+d};Object.defineProperty(b.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});b.prototype.equals=function(b){return this.level===
b.level&&this.row===b.row&&this.col===b.col&&this.world===b.world};b.prototype.release=function(){this.world=this.col=this.row=this.level=0};b.prototype.set=function(b,g,f,d){null==b?this.world=this.col=this.row=this.level=0:"object"===typeof b?(this.level=b.level||0,this.row=b.row||0,this.col=b.col||0,this.world=b.world||0):"string"===typeof b?(b=b.split("/"),g=b[1],f=b[2],d=b[3],this.level=parseFloat(b[0]),this.row=parseFloat(g),this.col=parseFloat(f),this.world=parseFloat(d)):(this.level=+b,this.row=
+g,this.col=+f,this.world=+d||0);return this};b.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};b.pool=new q(b,!0,null,25,50);return b}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],function(b,f,q,g,n){return function(){function b(b){this.lodInfo=b;this.spans=q.acquire()}b.prototype.release=function(){for(var b=0,d=this.spans;b<d.length;b++)n.pool.release(d[b]);
q.release(this.spans)};b.prototype.forEach=function(b,d){var g=this.spans,c=this.lodInfo,a=c.level;if(0!==g.length)for(var f=0;f<g.length;f++)for(var k=g[f],l=k.row,n=k.colTo,k=k.colFrom;k<=n;k++)b.call(d,a,l,c.normalizeCol(k),c.getWorldForColumn(k))};b.pool=new g(b,!0);return b}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(b,f,q){return function(){function b(b,g,f){this.row=b;this.colFrom=g;this.colTo=f}b.pool=new q(b,!0);return b}()})},
"esri/views/2d/tiling/TileQueue":function(){define(["require","exports","../../../core/QueueProcessor"],function(b,f,q){function g(b,g){b.length=0;g.forEach(function(c){return b.push(c)});return b}var n=new Set,l=[],k=new Map;return function(){function b(b){var c=this;this.tileInfoView=null;this.tileInfoView=b.tileInfoView;this._queues=b.tileServers&&0<b.tileServers.length?b.tileServers.map(function(){return new q({concurrency:b.concurrency||6,process:b.process,peeker:function(a){return c._peek(a)}})}):
[new q({concurrency:b.concurrency||6,process:b.process,peeker:function(a){return c._peek(a)}})]}Object.defineProperty(b.prototype,"length",{get:function(){return this._queues.reduce(function(b,c){return b+c.length},0)},enumerable:!0,configurable:!0});b.prototype.clear=function(){for(var b=0,c=this._queues;b<c.length;b++)c[b].clear()};b.prototype.find=function(b,c){c=0;for(var a=this._queues;c<a.length;c++){var d=a[c].find(b);if(d)return d}};b.prototype.has=function(b){for(var c=0,a=this._queues;c<
a.length;c++)if(a[c].has(b))return!0;return!1};b.prototype.pause=function(){for(var b=0,c=this._queues;b<c.length;b++)c[b].pause()};b.prototype.push=function(b){return this._queues[b.row%this._queues.length].push(b)};b.prototype.reset=function(){for(var b=0,c=this._queues;b<c.length;b++)c[b].reset()};b.prototype.resume=function(){for(var b=0,c=this._queues;b<c.length;b++)c[b].resume()};b.prototype._peek=function(b){var c=this;if(!this.state)return b[0];var a=this.tileInfoView,d=Number.NEGATIVE_INFINITY,
f=Number.POSITIVE_INFINITY;b.forEach(function(a){var b=c.tileInfoView.getTileScale(a);k.has(b)||(k.set(b,[]),d=Math.max(b,d),f=Math.min(b,f));k.get(b).push(a);n.add(b)});var h=this.state.scale;k.has(h)||(g(l,n),l.sort(),h=l.reduce(function(a,b,c,d){return Math.abs(b-h)<Math.abs(a-h)?b:a},l[0]));h=Math.min(h,d);h=Math.max(h,f);b=k.get(h);var q=a.getClosestInfoForScale(h),t=q.getColumnForX(this.state.center[0]),x=q.getRowForY(this.state.center[1]);b.sort(function(a,b){var c=q.denormalizeCol(a.col,a.world),
d=q.denormalizeCol(b.col,b.world);return Math.sqrt((t-c)*(t-c)+(x-a.row)*(x-a.row))-Math.sqrt((t-d)*(t-d)+(x-b.row)*(x-b.row))});n.clear();k.clear();return b[0]};return b}()})},"esri/core/QueueProcessor":function(){define(["require","exports","dojo/Deferred","./Queue","./scheduling"],function(b,f,q,g,n){var l={};return function(){function b(b){this._apiPromises=new Map;this._processingItems=new Map;this._isPaused=!1;this._scheduledNextHandle=null;this.concurrency=1;this.ordered=!1;b.concurrency&&
(this.concurrency=b.concurrency);this.ordered=!!b.ordered;this._queue=new g(b.peeker?{peeker:b.peeker}:void 0);this.process=b.process}Object.defineProperty(b.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});b.prototype.clear=function(){this._queue.clear();var b=[];this._processingItems.forEach(function(d){return b.push(d.resultPromise)});this._processingItems.clear();b.forEach(function(b){return b.cancel()});b.length=0;this._apiPromises.forEach(function(d){return b.push(d)});
this._apiPromises.clear();b.forEach(function(b){return b.cancel()});this._cancelNext()};b.prototype.find=function(b,g){var c=this,a=void 0;this._apiPromises.forEach(function(d,f){b.call(g,f)&&(a=c._apiPromises.get(f).promise)});return a};b.prototype.has=function(b){return this._apiPromises.has(b)};b.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};b.prototype.push=function(b){var d=this;if(this._apiPromises.has(b))return this._apiPromises.get(b).promise;var c=new q(function(a){var c=
d._processingItems.get(b);c?c.resultPromise.cancel(a):(d._remove(b),d._scheduleNext())});this._add(b,c);this._scheduleNext();return c.promise};b.prototype.reset=function(){var b=[];this._processingItems.forEach(function(a){return b.push(a)});this._processingItems.clear();for(var g=0;g<b.length;g++){var c=b[g];c.resultPromise.isFulfilled()?this._processReset(c):c.resultPromise.cancel(l)}};b.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};b.prototype._scheduleNext=
function(){var b=this;this._isPaused||this._scheduledNextHandle||(this._scheduledNextHandle=n.schedule(function(){b._scheduledNextHandle=null;b._next()}))};b.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};b.prototype._processResult=function(b,g){this._remove(b.item);this._scheduleNext();b.dfd.resolve(g)};b.prototype._processError=function(b,g){g===l?this._processReset(b):(this._remove(b.item),this._scheduleNext(),
b.dfd.reject(g))};b.prototype._processReset=function(b){this._remove(b.item);this._add(b.item,b.dfd);this._scheduleNext()};b.prototype._processOrdered=function(b,g){var c=this,a=!1;if(!1===g.ok&&g.error===l)this._processReset(b);else{b.result=g;this._itemsToProcess||(this._itemsToProcess=[]);this._processingItems.forEach(function(b){a||(b.result?c._itemsToProcess.push(b):a=!0)});b=0;for(g=this._itemsToProcess;b<g.length;b++){var d=g[b];!1===d.result.ok?this._processError(d,d.result.error):this._processResult(d,
d.result.value)}this._itemsToProcess.length=0}};b.prototype._process=function(b){var d=this;if(null!=b){var c=this._apiPromises.get(b),a=this.process(b);if(a&&"function"===typeof a.then){var g={item:b,resultPromise:a,result:null,dfd:c};this._processingItems.set(b,g);this.ordered?a.then(function(a){return d._processOrdered(g,{ok:!0,value:a})},function(a){return d._processOrdered(g,{ok:!1,error:a})}):a.then(function(a){return d._processResult(g,a)},function(a){return d._processError(g,a)})}else c.resolve(a),
this._remove(b);this._scheduleNext()}};b.prototype._add=function(b,g){this._apiPromises.set(b,g);this._queue.push(b)};b.prototype._remove=function(b){this._queue.remove(b);this._apiPromises.delete(b);this._processingItems.delete(b)};b.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=null)};return b}()})},"esri/core/Queue":function(){define(["require","exports"],function(b,f){return function(){function b(b){this._items=[];this._itemSet=
new Set;this._peeker=function(b){return b[0]};this._length=0;b&&b.peeker&&(this._peeker=b.peeker)}Object.defineProperty(b.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});b.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};b.prototype.peek=function(){if(0!==this._length)return this._peeker(this._items)};b.prototype.push=function(b){this.contains(b)||this._add(b)};b.prototype.contains=function(b){return 0<this._length&&this._itemSet.has(b)};
b.prototype.pop=function(){if(0!==this._length){var b=this.peek();this._remove(b);return b}};b.prototype.remove=function(b){this.contains(b)&&this._remove(b)};b.prototype._add=function(b){this._items.push(b);this._itemSet.add(b);this._length++};b.prototype._remove=function(b){this._itemSet.delete(b);this._items.splice(this._items.indexOf(b),1);this._length--};return b}()})},"esri/views/2d/tiling/TileStrategy":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./TileKey"],
function(b,f,q,g){var n=new g(0,0,0,0),l=new Map,k=[],d=[];return function(){function b(b){this._previousResolution=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.tileIndex=new Map;this.tiles=[];this.acquireTile=b.acquireTile;this.releaseTile=b.releaseTile;this.tileInfoView=b.tileInfoView;b.cachePolicy&&(this.cachePolicy=b.cachePolicy)}b.prototype.destroy=function(){this.tileIndex.clear()};b.prototype.update=function(b){var a=this,c=this.tileIndex,g=this.tileInfoView.getTileCoverage(b.state);
if(g){var f=g.spans,h=g.lodInfo,q=h.level,x=b.state.resolution,r=!b.stationary&&x>this._previousResolution;this._previousResolution=x;c.forEach(function(a){return a.visible=!0});this.tiles.length=0;l.clear();var m=0,e=0;if(0<f.length)for(var w=0;w<f.length;w++){b=f[w];for(var y=b.row,A=b.colTo,D=b.colFrom;D<=A;D++)m++,b=n.set(q,y,h.normalizeCol(D),h.getWorldForColumn(D)).id,c.has(b)?(x=c.get(b),x.attached?(l.set(b,x),e++):x.attached||r||this._addParentTile(b,l)):(x=this.acquireTile(n),this.tileIndex.set(b,
x),r||this._addParentTile(b,l))}var B=e===m;d.length=0;k.length=0;c.forEach(function(b,c){n.set(c);if(!l.has(c)){var e=a.tileInfoView.intersects(g,n);!e||!r&&B?"purge"===a.cachePolicy?k.push(c):(n.level>q||!e)&&k.push(c):b.attached?d.push(c):n.level>q&&k.push(c)}});for(f=0;f<d.length;f++)b=d[f],(x=c.get(b))&&x.attached&&l.set(b,x);for(f=0;f<k.length;f++)b=k[f],x=c.get(b),this.releaseTile(x),c["delete"](b);l.forEach(function(b){return a.tiles.push(b)});c.forEach(function(a){l.has(a.key.id)||(a.visible=
!1)});d.length=0;k.length=0;l.clear()}};b.prototype.clear=function(){var b=this,a=this.tileIndex;a.forEach(function(a){b.releaseTile(a)});a.clear()};b.prototype._addParentTile=function(b,a){for(var c=null;;){b=this.tileInfoView.getTileParentId(b);if(!b)break;if(this.tileIndex.has(b)&&(c=this.tileIndex.get(b))&&c.attached){a.has(c.key.id)||a.set(c.key.id,c);break}}};return b}()})},"esri/layers/graphics/controllers/SnapshotController":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/assignHelper ../../../core/Accessor ../../../core/Error ../../../core/Evented ../../../core/Handles ../../../core/Logger ../../../core/Promise ../../../core/promiseUtils ../../../core/accessorSupport/decorators ../../../geometry/support/scaleUtils ../../support/GraphicsManager".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z){var t=c.getLogger("esri.layers.graphics.controllers.SnapshotController");return function(a){function b(b){b=a.call(this)||this;b.type="snapshot";b._gManager=null;b._handles=new h;b._source=null;b._started=!1;b._pendingQueries=new Map;b.extent=null;b.hasAllFeatures=!1;b.hasFeatures=!1;b.layer=null;b.layerView=null;b.maxPageSize=null;b.pageSize=null;b.paginationEnabled=!1;return b}q(b,a);b.prototype.initialize=function(){var a=this,b=this.layer.when(function(){return a._verifyCapabilities()}).then(function(){return a._init()});
this.addResolvingPromise(b)};b.prototype.destroy=function(){this.cancelQuery();this._gManager&&(this._gManager.destroy(),this._gManager=null);this._handles.destroy();this._pendingQueries=this._handles=null};Object.defineProperty(b.prototype,"updating",{get:function(){return!!(this._pendingQueries&&0<this._pendingQueries.size)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"graphics",{set:function(a){this._get("graphics")!==a&&(this._handles.remove("graphics"),a&&(this._collectionChanged({added:a.toArray()}),
this._handles.add(a.on("change",this._collectionChanged.bind(this)),"graphics")),this._set("graphics",a))},enumerable:!0,configurable:!0});b.prototype.cancelQuery=function(){var a=this;this._pendingQueries&&(this._pendingQueries.forEach(function(b,c){b.isFulfilled()||b.cancel(Error(a._cancelErrorMsg))}),this._pendingQueries.clear(),this.notifyChange("updating"))};b.prototype.refresh=function(){this.isResolved()&&this._started&&this._queryFeatures()};b.prototype.startup=function(){this._started||(this._started=
!0,this._resolutionParams=this._getResolutionParams(),this._queryFeatures())};b.prototype.update=function(){this.startup()};b.prototype._init=function(){var a=this.layer;this.paginationEnabled=!!a.get("capabilities.query.supportsPagination");this._source=a.source;var b=a.maxRecordCount||4E3;this.pageSize=null==this.maxPageSize?b:Math.min(b,this.maxPageSize);this._gManager=new z({graphics:this.graphics,objectIdField:a.objectIdField});this._setupStateWatchers()};b.prototype._getResolutionParams=function(){var a=
this.layer,b=a.get("capabilities.query.supportsQuantization"),c;if("polyline"===a.geometryType||"polygon"===a.geometryType){var d=v.getMetersPerUnit(this.layerView.view.spatialReference);null!=d&&(c=this._featureResolution.scale,d=this._featureResolution.value/d,c=a.maxScale?a.maxScale:a.minScale?Math.min(c,a.minScale):Math.min(c,v.getScale(this.layerView.view,a.fullExtent)),c*=d/this._featureResolution.scale)}return c?{maxAllowableOffset:b?null:c,quantizationParameters:b?{mode:"view",originPosition:"upperLeft",
tolerance:c,extent:a.fullExtent}:null}:null};b.prototype._setupStateWatchers=function(){var a=this;this._handles.add([this.watch("extent",this.refresh.bind(this)),this.layer.watch("outFields",function(b,c){b&&c?-1===c.indexOf("*")&&(b.sort(),c.sort(),JSON.stringify(b)!==JSON.stringify(c)&&a.refresh()):a.refresh()}),this.layer.watch("definitionExpression, historicMoment",this.refresh.bind(this)),this.layer.on("edits",this._editsHandler.bind(this))])};b.prototype._createQueryParams=function(){var a=
this.layerView,b=this.layer.createQuery();b.outSpatialReference=a.view.spatialReference;b.geometry=this.extent;b.set(this._resolutionParams);this.paginationEnabled&&(b.start=0,b.num=this.pageSize);return b};b.prototype._queryFeatures=function(){this.cancelQuery();this.hasAllFeatures=this.hasFeatures=!1;this._gManager.beginPagedUpdate();this.emit("query-start");this._executeQuery(this._createQueryParams())};b.prototype._executeQuery=function(a){var b=this,c=this._source.queryFeatures(a),d=this._gManager.createIntentToAdd();
this._querySetup(d,c);c.then(this._processFeatureSet.bind(this,a,d)).catch(function(a){return b._queryError(d,a)}).always(function(){return b._queryTeardown(d)})};b.prototype._processFeatureSet=function(a,b,c){var d=c.exceededTransferLimit,e=c.features,g=this._maxFeatures[this.layer.geometryType]||0,f=e?e.length:0,h=this._gManager.numGraphics+f,m=h>=g;m&&(t.warn('Feature limit exceeded on layer "',this.layer.title,'". Not all features are shown.'),(g=h-g)&&e.splice(f-g,g));a=d&&this.paginationEnabled&&
!m?this._queryNextPage(a):!1;e&&this._gManager.addPage(e,b);this.hasFeatures=!0;a||(this._gManager.endPagedUpdate(),this.hasAllFeatures=!d,this.emit("query-end",{success:!0}));return c};b.prototype._queryNextPage=function(a){a.start+=this.pageSize;this._executeQuery(a);return!0};b.prototype._queryError=function(a,b){b&&"cancel"===b.dojoType&&!this.hasFeatures?this._gManager.revertPagedUpdate():this._gManager.endPagedUpdate();this.emit("query-end",{success:!1});if(b&&"cancel"===b.dojoType)return p.reject(b);
a=new k("snapshotcontroller:tile-request-failed","Failed to query for features",{error:b});t.error(a);return p.reject(a)};b.prototype._querySetup=function(a,b){this._pendingQueries.set(a,b);this.notifyChange("updating")};b.prototype._queryTeardown=function(a){this._gManager.removeIntent(a);this._pendingQueries.delete(a);this.notifyChange("updating")};b.prototype._processRefetch=function(a,b){(b=b.features)&&this._gManager.add(b,a)};b.prototype._refetchError=function(a,b){};b.prototype._verifyCapabilities=
function(){if(!this.layer.get("capabilities.operations.supportsQuery"))throw new k("graphicscontroller:query-capability-required","Service requires query capabilities to be used as a feature layer",{layer:this.layer});};b.prototype._collectionChanged=function(a){var b=a.added;if(b)for(var c=0;c<b.length;c++)b[c].layer=this.layer,b[c].sourceLayer=this.layer;if(b=a.removed)for(c=0;c<b.length;c++)b[c].layer=null,b[c].sourceLayer=null};b.prototype._editsHandler=function(a){var b=function(a){return a.objectId},
c=a.deletedFeatures.map(b);this._gManager.delete(c);a=a.addedFeatures.concat(a.updatedFeatures).map(b);a.length&&(b=this._createQueryParams(),b.objectIds=a,b=this._source.queryFeatures(b),a=this._gManager.createIntentToAdd(a),this._querySetup(a,b),b.then(this._processRefetch.bind(this,a)).catch(this._refetchError.bind(this,a)).always(this._queryTeardown.bind(this,a)))};g([u.shared("SnapshotController: query cancelled")],b.prototype,"_cancelErrorMsg",void 0);g([u.property({readOnly:!0})],b.prototype,
"type",void 0);g([u.shared({value:.25,scale:945})],b.prototype,"_featureResolution",void 0);g([u.shared({point:16E3,multipoint:8E3,polyline:4E3,polygon:4E3,multipatch:4E3})],b.prototype,"_maxFeatures",void 0);g([u.property()],b.prototype,"_pendingQueries",void 0);g([u.property({dependsOn:["_pendingQueries"]})],b.prototype,"updating",null);g([u.property()],b.prototype,"graphics",null);g([u.property()],b.prototype,"extent",void 0);g([u.property()],b.prototype,"hasAllFeatures",void 0);g([u.property()],
b.prototype,"hasFeatures",void 0);g([u.property()],b.prototype,"layer",void 0);g([u.property()],b.prototype,"layerView",void 0);g([u.property()],b.prototype,"maxPageSize",void 0);g([u.property()],b.prototype,"pageSize",void 0);g([u.property()],b.prototype,"paginationEnabled",void 0);return b=g([u.subclass("esri.layers.graphics.controllers.SnapshotController")],b)}(u.declared(l,a,d))})},"esri/layers/graphics/sources/FeatureLayerSource":function(){define("dojo/io-query ../../support/layerSourceUtils ../../../core/Accessor ../../../core/Promise ../../../core/lang ../../../core/urlUtils ../../../core/Error ../../../request ../../../tasks/QueryTask".split(" "),
function(b,f,q,g,n,l,k,d,h){return q.createSubclass([g],{getDefaults:function(b){var a=this.inherited(arguments),c=b.layer;c&&(a=n.mixin(a,{url:c.url,layerId:c.layerId,gdbVersion:c.gdbVersion,dynamicDataSource:c.dynamicDataSource}));return a},initialize:function(){this.addResolvingPromise(this._fetchService())},properties:{dynamicDataSource:{},layer:{},layerId:{},gdbVersion:{dependsOn:["layer.gdbVersion"],get:function(){return this.layer.gdbVersion}},parsedUrl:{dependsOn:["url","layerId"],get:function(){var b=
this.url?l.urlToObject(this.url):null;if(null!=b)if(null!=this.layerId)b.path=l.join(b.path,this.layerId.toString());else if(null!=this.dynamicDataSource){var a={source:f.sourceToJSON(this.dynamicDataSource)};b.query={layer:JSON.stringify(a)}}return b}},queryTask:{dependsOn:["parsedUrl","gdbVersion"],get:function(){var c=this.parsedUrl.path+"?"+b.objectToQuery(this.parsedUrl.query);return new h({url:null!=this.dynamicDataSource?c:this.parsedUrl.path,gdbVersion:this.gdbVersion})}},url:{}},applyEdits:function(b){var a=
b.addFeatures.map(this._serializeFeature.bind(this)),c=b.updateFeatures.map(this._serializeFeature.bind(this));b=this._getFeatureIds(b.deleteFeatures);a={f:"json",adds:a.length?JSON.stringify(a):null,updates:c.length?JSON.stringify(c):null,deletes:b.length?b.join(","):null};return d(this.parsedUrl.path+"/applyEdits",{query:a,method:"post",responseType:"json",callbackParamName:"callback"}).then(this._createEditsResult.bind(this))},queryFeatures:function(b){return this.queryTask.execute(b)},queryFeaturesJSON:function(b){return this.queryTask.executeJSON(b)},
queryObjectIds:function(b){return this.queryTask.executeForIds(b)},queryFeatureCount:function(b){return this.queryTask.executeForCount(b)},queryExtent:function(b){return this.queryTask.executeForExtent(b)},_updateUrl:function(b){b&&(this.url=this.url.replace(/^http:/i,"https:"))},_fetchService:function(){return null==this.layerId&&null==this.dynamicDataSource?d(this.url,{query:{f:"json"},responseType:"json",callbackParamName:"callback"}).then(function(b){this._updateUrl(b.ssl);(b=b.data)&&b.layers&&
b.layers[0]&&(this.layerId=b.layers[0].id);return this._fetchServiceLayer()}.bind(this)):this._fetchServiceLayer()},_fetchServiceLayer:function(){return d(this.parsedUrl.path,{query:n.mixin({f:"json"},this.parsedUrl.query),responseType:"json",callbackParamName:"callback"}).then(function(b){this._updateUrl(b.ssl);this.layerDefinition=b.data}.bind(this))},_serializeFeature:function(b){var a=b.geometry;b=b.attributes;return{geometry:a&&a.toJSON(),attributes:b}},_getFeatureIds:function(b){var a=this.layer.objectIdField,
c=b[0],d=!(!c||null==c.objectId),g=!(!c||!c.attributes);return b.map(function(b){var c=null;d?c=b.objectId:g&&(c=b.attributes&&b.attributes[a]);return c},this)},_createEditsResult:function(b){var a={};b=b.data;a.addFeatureResults=b.addResults?b.addResults.map(this._createFeatureEditResult.bind(this)):[];a.updateFeatureResults=b.updateResults?b.updateResults.map(this._createFeatureEditResult.bind(this)):[];a.deleteFeatureResults=b.deleteResults?b.deleteResults.map(this._createFeatureEditResult.bind(this)):
[];return a},_createFeatureEditResult:function(b){var a=b.success?null:b.error||{};return{objectId:b.objectId,globalId:b.globalId,error:a?new k("feature-layer-source:edit-failure",a.description,{code:a.code}):null}}})})},"esri/layers/support/layerSourceUtils":function(){define(["require","exports","../../core/kebabDictionary","../../core/lang"],function(b,f,q,g){function n(a){return null!=a&&a.hasOwnProperty("mapLayerId")}function l(a){return null!=a&&a.hasOwnProperty("dataSource")}function k(a){if(!a)return a;
n(a)&&(a.type=f.MAPLAYER);if(l(a)&&(a.type=f.DATALAYER,!a.dataSource.type)){var b=a.dataSource;b.workspaceId?b.type=b.gdbVersion?"table":b.query||b.oidFields?"query-table":"raster":b.leftTableKey&&b.rightTableKey&&b.leftTableSource&&b.rightTableSource&&(b.type="join-table",b.leftTableSource=k(b.leftTableSource),b.rightTableSource=k(b.rightTableSource))}return a}function d(b){var h={};if(b.type===f.MAPLAYER)h.mapLayerId=b.mapLayerId,b.gdbVersion&&(h.gdbVersion=b.gdbVersion);else if(b.type===f.DATALAYER){b.fields&&
(h.fields=b.fields);var k;k=b.dataSource;var l;switch(k.type){case "table":l={dataSourceName:k.dataSourceName,workspaceId:k.workspaceId,gdbVersion:k.gdbVersion};break;case "query-table":l={geometryType:c.toJSON(k.geometryType),workspaceId:k.workspaceId,query:k.query,oidFields:k.oidFields,spatialReference:k.spatialReference};break;case "join-table":l={leftTableSource:d(k.leftTableSource),rightTableSource:d(k.rightTableSource),leftTableKey:k.leftTableKey,rightTableKey:k.rightTableKey,joinType:u.toJSON(k.joinType)};
break;case "raster":l={workspaceId:k.workspaceId,dataSourceName:k.dataSourceName}}l.type=p.toJSON(k.type);k=g.fixJson(l);h.dataSource=k}h.type=a.toJSON(b.type);return g.fixJson(h)}function h(b){var d={};if(a.fromJSON(b.type)===f.MAPLAYER)d.mapLayerId=b.mapLayerId,b.gdbVersion&&(d.gdbVersion=b.gdbVersion);else if(a.fromJSON(b.type)===f.DATALAYER){b.fields&&(d.fields=b.fields);var k;k=b.dataSource;var l;switch(k.type){case "table":l={dataSourceName:k.dataSourceName,workspaceId:k.workspaceId,gdbVersion:k.gdbVersion};
break;case "queryTable":l={geometryType:c.fromJSON(k.geometryType),workspaceId:k.workspaceId,query:k.query,oidFields:k.oidFields,spatialReference:k.spatialReference};break;case "joinTable":l={leftTableSource:h(k.leftTableSource),rightTableSource:h(k.rightTableSource),leftTableKey:k.leftTableKey,rightTableKey:k.rightTableKey,joinType:u.fromJSON(k.joinType)};break;case "raster":l={workspaceId:k.workspaceId,dataSourceName:k.dataSourceName}}l.type=p.fromJSON(k.type);k=g.fixJson(l);d.dataSource=k}d.type=
a.fromJSON(b.type);return g.fixJson(d)}Object.defineProperty(f,"__esModule",{value:!0});f.MAPLAYER="map-layer";f.DATALAYER="data-layer";var c=q({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),a=q({mapLayer:f.MAPLAYER,dataLayer:f.DATALAYER}),p=q({joinTable:"join-table",queryTable:"query-table"}),u=q({esriLeftOuterJoin:"left-outer-join",esriLeftInnerJoin:"left-inner-join"});f.isMapLayerSource=
n;f.isDataLayerSource=l;f.castSource=k;f.sourceToJSON=d;f.sourceFromJSON=h})},"esri/layers/graphics/sources/MemorySource":function(){define("../../../core/Collection ../../../core/Promise ../../../core/promiseUtils ../../../core/Error ../../../tasks/support/FeatureSet ../../../Graphic ../QueryEngine".split(" "),function(b,f,q,g,n,l,k){return b.ofType(l).createSubclass([f],{declaredClass:"esri.layers.graphics.sources.MemorySource",properties:{layer:{value:null},_queryEngine:{value:null,dependsOn:["layer.loaded"],
get:function(){return this.get("layer.loaded")?new k({features:this,objectIdField:this.layer.objectIdField}):null}}},queryFeatures:function(b){return this._queryEngine?this._queryEngine.queryFeatures(b).then(function(b){var c=new n;c.features=b;return c}):this._rejectQuery("Not ready to execute query")},queryObjectIds:function(b){return this._queryEngine?this._queryEngine.queryObjectIds(b):this._rejectQuery("Not ready to execute query")},queryFeatureCount:function(b){return this._queryEngine?this._queryEngine.queryFeatureCount(b):
this._rejectQuery("Not ready to execute query")},queryExtent:function(b){return this._queryEngine?this._queryEngine.queryExtent(b):this._rejectQuery("Not ready to execute query")},_rejectQuery:function(b){return q.reject(new g("MemorySource",b))}})})},"esri/layers/graphics/QueryEngine":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Error ../../core/promiseUtils ../../core/accessorSupport/decorators ../../geometry/Extent ../../geometry/support/aaBoundingRect ./dehydratedFeatures".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a){b=function(b){function f(a){a=b.call(this)||this;a.features=null;a.layer=null;a.objectIdField=null;return a}q(f,b);f.prototype.queryFeatures=function(b){var c=this;if(this.features)if(b)if(this._isSupportedQuery(b)){var d=this._createFilters(b);b=d.length?this._executeQuery(b,d):this._rejectQuery("Invalid query")}else b=this._rejectQuery("Unsupported query");else b=this._returnAllFeatures();else b=this._rejectQuery("Engine not initialized");return b.then(function(b){return b.map(function(b){return a.hydrateGraphic(b,
c.layer)})})};f.prototype.queryObjectIds=function(a){return this.objectIdField?this.queryFeatures(a).then(this._getObjectIds.bind(this)):this._rejectQuery("Unsupported query")};f.prototype.queryFeatureCount=function(a){return this.queryFeatures(a).then(function(a){return a.length})};f.prototype.queryExtent=function(a){var b=this;return this.queryFeatures(a).then(function(a){return{count:a.length,extent:b._getExtent(a)}})};f.prototype._returnAllFeatures=function(){return k.resolve(this.features.toArray())};
f.prototype._executeQuery=function(a,b){var c=this,d=[];this.features.forEach(function(e){b.every(function(b){return b.call(c,e,a)})&&d.push(e)});return k.resolve(d)};f.prototype._isSupportedQuery=function(a){var b=!0;if(null!=a.distance||null!=a.geometryPrecision||a.groupByFieldsForStatistics&&a.groupByFieldsForStatistics.length||null!=a.maxAllowableOffset||a.multipatchOption||null!=a.num||a.orderByFields&&a.orderByFields.length||a.outFields&&a.outFields.length||a.outSpatialReference||a.outStatistics&&
a.outStatistics.length||a.pixelSize||a.quantizationParameters||a.relationParameter||a.returnDistinctValues||null!=a.start||a.text||a.timeExtent||a.where||a.objectIds&&a.objectIds.length&&!this.objectIdField)b=!1;return b};f.prototype._createFilters=function(a){var b=[];a.objectIds&&a.objectIds.length&&b.push(this._createObjectIdFilter());a.geometry&&"extent"===a.geometry.type&&"intersects"===a.spatialRelationship&&b.push(this._createExtentFilter());return b};f.prototype._createExtentFilter=function(){return function(b,
d){b=b.geometry;if(!b)return!1;c.fromExtent(d.geometry,p);a.computeAABR(b,u);return c.intersects(p,u)}};f.prototype._createObjectIdFilter=function(){var a=this;return function(b,c){b=b.attributes;return-1<c.objectIds.indexOf(b&&b[a.objectIdField])}};f.prototype._rejectQuery=function(a){return k.reject(new l(this.declaredClass,a))};f.prototype._getObjectIds=function(a){var b=this.objectIdField,c=[];a.forEach(function(a){a=(a=a.attributes)&&a[b];null!=a&&c.push(a)});return c};f.prototype._getExtent=
function(b){if(0===b.length)return null;c.empty(p);for(var d=0;d<b.length;d++)a.computeAABR(b[d].geometry,u),c.expand(p,u,p);return new h({xmin:p[0],ymin:p[1],xmax:p[2],ymax:p[3],spatialreference:b[0].geometry.spatialReference})};g([d.property()],f.prototype,"features",void 0);g([d.property({constructOnly:!0})],f.prototype,"layer",void 0);g([d.property()],f.prototype,"objectIdField",void 0);return f=g([d.subclass("esri.layers.graphics.QueryEngine")],f)}(d.declared(n));var p=c.create(),u=c.create();
return b})},"esri/layers/graphics/dehydratedFeatures":function(){define("require exports ../../Graphic ../../geometry/SpatialReference ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect".split(" "),function(b,f,q,g,n,l){function k(a){switch(a){case "esriGeometryPoint":return"point";case "esriGeometryMultipoint":return"multipoint";case "esriGeometryPolyline":return"polyline";case "esriGeometryPolygon":return"polygon";case "esriGeometryEnvelope":return"extent"}}function d(a,
b,c){return{uid:q.generateUID(),attributes:a.attributes,geometry:h(a.geometry,b,c),visible:!0}}function h(a,b,c){switch(b){case "point":return{x:a.x,y:a.y,z:a.z,type:b,spatialReference:c};case "polyline":var d=a;return{paths:d.paths,hasZ:d.hasZ,hasM:d.hasM,type:b,spatialReference:c};case "polygon":return{rings:a.rings,hasZ:d.hasZ,hasM:d.hasM,type:b,spatialReference:c};case "multipoint":return{points:a.points,hasZ:d.hasZ,hasM:d.hasM,type:b,spatialReference:c};case "extent":return{xmin:a.xmin,ymin:a.ymin,
zmin:a.zmin,mmin:a.mmin,xmax:a.xmax,ymax:a.ymax,zmax:a.zmax,mmax:a.mmax,hasZ:a.hasZ,hasM:a.hasM,type:b,spatialReference:c}}}function c(a){return"point"===a.type?null!=a.z:"extent"===a.type?null!=a.zmin:a.hasZ}function a(a){return"declaredClass"in a}function p(a,b){n.empty(b);"mesh"===a.type&&(a=a.extent);switch(a.type){case "point":b[0]=b[3]=a.x;b[1]=b[4]=a.y;c(a)&&(b[2]=b[5]=a.z);break;case "polyline":for(var d=0;d<a.paths.length;d++)n.expandWithNestedArray(b,a.paths[d],c(a));break;case "polygon":for(d=
0;d<a.rings.length;d++)n.expandWithNestedArray(b,a.rings[d],c(a));break;case "multipoint":n.expandWithNestedArray(b,a.points,c(a));break;case "extent":b[0]=a.xmin,b[1]=a.ymin,b[3]=a.xmax,b[4]=a.ymax,null!=a.zmin&&(b[2]=a.zmin),null!=a.zmax&&(b[5]=a.zmax)}}function u(a,b){l.empty(b);"mesh"===a.type&&(a=a.extent);switch(a.type){case "point":b[0]=b[2]=a.x;b[1]=b[3]=a.y;break;case "polyline":for(var c=0;c<a.paths.length;c++)l.expandWithNestedArray(b,a.paths[c]);break;case "polygon":for(c=0;c<a.rings.length;c++)l.expandWithNestedArray(b,
a.rings[c]);break;case "multipoint":l.expandWithNestedArray(b,a.points);break;case "extent":b[0]=a.xmin,b[1]=a.ymin,b[2]=a.xmax,b[3]=a.ymax}}Object.defineProperty(f,"__esModule",{value:!0});f.isPoint=function(a){return"point"===a.type};f.mapJSONGeometryType=k;f.fromFeatureSetJSON=function(a){var b=k(a.geometryType),c=g.fromJSON(a.spatialReference);return a.features.map(function(a){return d(a,b,c)})};f.fromJSON=d;f.fromJSONGeometry=h;f.makeDehydratedPoint=function(a,b,c,d){return{x:a,y:b,z:c,spatialReference:d,
type:"point"}};f.hasZ=c;f.isHydratedGeometry=function(a){return"declaredClass"in a};f.isHydratedGraphic=a;f.hydrateGraphic=function(b,c){if(!b||a(b))return b;c=new q({layer:c,sourceLayer:c});c.read(b);return c};f.computeAABB=p;f.expandAABB=function(a,b){p(a,v);n.expand(b,v)};f.computeAABR=u;f.expandAABR=function(a,b){u(a,z);l.expand(b,z)};var v=n.create(),z=l.create()})},"esri/geometry/support/aaBoundingBox":function(){define(["require","exports","../Extent","./aaBoundingRect"],function(b,f,q,g){function n(a){void 0===
a&&(a=f.ZERO);return[a[0],a[1],a[2],a[3],a[4],a[5]]}function l(a){return a[0]>=a[3]?0:a[3]-a[0]}function k(a){return a[1]>=a[4]?0:a[4]-a[1]}function d(a){return a[2]>=a[5]?0:a[5]-a[2]}function h(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a}function c(a){return 6===a.length}Object.defineProperty(f,"__esModule",{value:!0});f.create=n;f.fromValues=function(a,b,c,d,f,g){return[a,b,c,d,f,g]};f.fromExtent=function(a,b){void 0===b&&(b=n());b[0]=a.xmin;b[1]=a.ymin;b[2]=a.zmin;
b[3]=a.xmax;b[4]=a.ymax;b[5]=a.zmax;return b};f.toExtent=function(a,b){return isFinite(a[2])||isFinite(a[5])?new q({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],zmin:a[2],zmax:a[5],spatialReference:b}):new q({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],spatialReference:b})};f.fromMinMax=function(a,b,c){void 0===c&&(c=n());c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=b[0];c[4]=b[1];c[5]=b[2];return c};f.expandPointInPlace=function(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[3]&&(a[3]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[4]&&(a[4]=
b[1]);b[2]<a[2]&&(a[2]=b[2]);b[2]>a[5]&&(a[5]=b[2])};f.expand=function(a,b,d){void 0===d&&(d=a);c(b)?(d[0]=Math.min(a[0],b[0]),d[1]=Math.min(a[1],b[1]),d[2]=Math.min(a[2],b[2]),d[3]=Math.max(a[3],b[3]),d[4]=Math.max(a[4],b[4]),d[5]=Math.max(a[5],b[5])):g.is(b)?(d[0]=Math.min(a[0],b[0]),d[1]=Math.min(a[1],b[1]),d[3]=Math.max(a[3],b[2]),d[4]=Math.max(a[4],b[3])):2===b.length?(d[0]=Math.min(a[0],b[0]),d[1]=Math.min(a[1],b[1]),d[3]=Math.max(a[3],b[0]),d[4]=Math.max(a[4],b[1])):3===b.length&&(d[0]=Math.min(a[0],
b[0]),d[1]=Math.min(a[1],b[1]),d[2]=Math.min(a[2],b[2]),d[3]=Math.max(a[3],b[0]),d[4]=Math.max(a[4],b[1]),d[5]=Math.max(a[5],b[2]));return d};f.expandWithBuffer=function(a,b,c,d,f){void 0===f&&(f=a);var g=a[0],h=a[1],k=a[2],m=a[3],e=a[4];a=a[5];for(var l=0;l<d;l++)g=Math.min(g,b[c+3*l]),h=Math.min(h,b[c+3*l+1]),k=Math.min(k,b[c+3*l+2]),m=Math.max(m,b[c+3*l]),e=Math.max(e,b[c+3*l+1]),a=Math.max(a,b[c+3*l+2]);f[0]=g;f[1]=h;f[2]=k;f[3]=m;f[4]=e;f[5]=a;return f};f.expandWithNestedArray=function(a,b,c,
d){void 0===d&&(d=a);var f=b.length,g=a[0],h=a[1],k=a[2],m=a[3],e=a[4];a=a[5];if(c)for(c=0;c<f;c++){var l=b[c],g=Math.min(g,l[0]),h=Math.min(h,l[1]),k=Math.min(k,l[2]),m=Math.max(m,l[0]),e=Math.max(e,l[1]);a=Math.max(a,l[2])}else for(c=0;c<f;c++)l=b[c],g=Math.min(g,l[0]),h=Math.min(h,l[1]),m=Math.max(m,l[0]),e=Math.max(e,l[1]);d[0]=g;d[1]=h;d[2]=k;d[3]=m;d[4]=e;d[5]=a;return d};f.allFinite=function(a){for(var b=0;6>b;b++)if(!isFinite(a[b]))return!1;return!0};f.width=l;f.depth=k;f.height=d;f.center=
function(a,b){void 0===b&&(b=[0,0,0]);b[0]=a[0]+l(a)/2;b[1]=a[1]+k(a)/2;b[2]=a[2]+d(a)/2;return b};f.size=function(a,b){void 0===b&&(b=[0,0,0]);b[0]=l(a);b[1]=k(a);b[2]=d(a);return b};f.maximumDimension=function(a){return Math.max(l(a),d(a),k(a))};f.containsPoint=function(a,b){return b[0]>=a[0]&&b[1]>=a[1]&&b[2]>=a[2]&&b[0]<=a[3]&&b[1]<=a[4]&&b[2]<=a[5]};f.containsPointWithMargin=function(a,b,c){return b[0]>=a[0]-c&&b[1]>=a[1]-c&&b[2]>=a[2]-c&&b[0]<=a[3]+c&&b[1]<=a[4]+c&&b[2]<=a[5]+c};f.contains=
function(a,b){return b[0]>=a[0]&&b[1]>=a[1]&&b[2]>=a[2]&&b[3]<=a[3]&&b[4]<=a[4]&&b[5]<=a[5]};f.intersects=function(a,b){return Math.max(b[0],a[0])<=Math.min(b[3],a[3])&&Math.max(b[1],a[1])<=Math.min(b[4],a[4])&&Math.max(b[2],a[2])<=Math.min(b[5],a[5])};f.offset=function(a,b,c,d,f){void 0===f&&(f=a);f[0]=a[0]+b;f[1]=a[1]+c;f[2]=a[2]+d;f[3]=a[3]+b;f[4]=a[4]+c;f[5]=a[5]+d;return f};f.setMin=function(a,b,c){void 0===c&&(c=a);c[0]=b[0];c[1]=b[1];c[2]=b[2];c!==a&&(c[3]=a[3],c[4]=a[4],c[5]=a[5]);return c};
f.setMax=function(a,b,c){void 0===c&&(c=a);c[3]=b[0];c[4]=b[1];c[5]=b[2];c!==a&&(c[0]=a[0],c[1]=a[1],c[2]=a[2]);return a};f.set=h;f.empty=function(a){return a?h(a,f.NEGATIVE_INFINITY):n(f.NEGATIVE_INFINITY)};f.toRect=function(a,b){b||(b=g.create());b[0]=a[0];b[1]=a[1];b[2]=a[3];b[3]=a[4];return b};f.fromRect=function(a,b){a[0]=b[0];a[1]=b[1];a[3]=b[2];a[4]=b[3];return a};f.is=c;f.isPoint=function(a){return 0===l(a)&&0===k(a)&&0===d(a)};f.equals=function(a,b,d){if(null==a||null==b)return a===b;if(!c(a)||
!c(b))return!1;if(d)for(var f=0;f<a.length;f++){if(!d(a[f],b[f]))return!1}else for(f=0;f<a.length;f++)if(a[f]!==b[f])return!1;return!0};f.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];f.NEGATIVE_INFINITY=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity];f.ZERO=[0,0,0,0,0,0]})},"esri/layers/TileLayer":function(){define("dojo/io-query ../request ../core/lang ../core/urlUtils ../core/promiseUtils ../geometry/SpatialReference ./TiledLayer ./mixins/ArcGISMapService ./mixins/ArcGISCachedService ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./support/arcgisLayers ./support/arcgisLayerUrl".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z){return k.createSubclass([d,h,u,c,a,p],{declaredClass:"esri.layers.TileLayer",_mapsWithAttribution:"Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),
_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_attributionServices:["services.arcgisonline.com/arcgis/rest/services","servicesdev.arcgisonline.com/arcgis/rest/services","servicesqa.arcgisonline.com/arcgis/rest/services"],normalizeCtorArgs:function(a,b){return"string"===typeof a?q.mixin({},{url:a},b):a},load:function(){this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service","Map Service"]}).always(this._fetchService.bind(this)));return this.when()},
properties:{operationalLayerType:{get:function(){if(this.capabilities)return-1!==this.capabilities.indexOf("Map")?"ArcGISTiledMapServiceLayer":"ArcGISTiledImageServiceLayer";var a=this.url||this.portalItem&&this.portalItem.url;return a&&/\/ImageServer(\/|\/?$)/i.test(a)?"ArcGISTiledImageServiceLayer":"ArcGISTiledMapServiceLayer"}},attributionDataUrl:{dependsOn:["parsedUrl"],get:function(){return this._getDefaultAttribution(this._getMapName(this.parsedUrl.path.toLowerCase()))}},popupTemplates:null,
tileServers:{dependsOn:["parsedUrl"],value:null,cast:function(a){return Array.isArray(a)?a.map(function(a){return g.urlToObject(a).path}):null},get:function(){return this._getDefaultTileServers(this.parsedUrl.path)}},url:{json:{origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writer:g.writeOperationalLayerUrl}}}}},type:{value:"tile",json:{read:!1}},spatialReference:{json:{read:{source:["spatialReference","tileInfo"],reader:function(a,b){return(a=a||b.tileInfo&&b.tileInfo.spatialReference)&&
l.fromJSON(a)}}}}},getTileUrl:function(a,c,d){var f=this.tileServers,e=this.parsedUrl.query?b.objectToQuery(this.parsedUrl.query):"";this.token&&(e=e+(e?"\x26":"")+"token\x3d"+encodeURIComponent(this.token));this.resampling&&!this.tilemapCache&&this.supportsBlankTile&&(e=e+(e?"\x26":"")+"blankTile\x3dfalse");this.refreshTimestamp&&(e=e+(e?"\x26":"")+"_ts\x3d"+this.refreshTimestamp);return(f&&f.length?f[c%f.length]:this.parsedUrl.path)+"/tile/"+a+"/"+c+"/"+d+(e?"?"+e:"")},_fetchService:function(){return n.resolve().then(function(){return this.resourceInfo||
f(this.parsedUrl.path,{query:q.mixin({f:"json"},this.parsedUrl.query),responseType:"json",callbackParamName:"callback"})}.bind(this)).then(function(a){a.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));this.read(a.data,{origin:"service",url:this.parsedUrl});if(10.1===this.version&&!z.isHostedAgolService(this.url))return v.fetchServerVersion(this.url).then(function(a){this.read({currentVersion:a})}.bind(this)).catch(function(){})}.bind(this))},_getMapName:function(a){return(a=a.match(/^(?:https?:)?\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i))&&
a[2]},_getDefaultAttribution:function(a){if(a){var b;a=a.toLowerCase();for(var c=0,d=this._mapsWithAttribution.length;c<d;c++)if(b=this._mapsWithAttribution[c],-1<b.toLowerCase().indexOf(a))return g.makeAbsolute("//static.arcgis.com/attribution/"+b)}},_getDefaultTileServers:function(a){var b=-1!==a.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i),c=-1!==a.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i);return b||c?[a,a.replace(b?/server\.arcgisonline/i:/services\.arcgisonline/i,b?"services.arcgisonline":
"server.arcgisonline")]:[]}})})},"esri/layers/mixins/RefreshableLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(b,f,q,g,n,l){return function(b){function d(){var d=null!==b&&b.apply(this,arguments)||this;d.refreshInterval=0;return d}q(d,b);d.prototype.refresh=function(){this.emit("refresh")};g([l.property({type:Number,cast:function(b){return.1<=b?b:
0>=b?0:.1},json:{write:!0}})],d.prototype,"refreshInterval",void 0);return d=g([l.subclass("esri.layers.mixins.RefreshableLayer")],d)}(l.declared(n))})},"esri/layers/mixins/ScaleRangeLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../core/accessorSupport/write".split(" "),function(b,f,q,g,n,l,k){return function(b){function d(){var c=null!==b&&b.apply(this,arguments)||
this;c.minScale=0;c.maxScale=0;return c}q(d,b);g([l.property({type:Number,json:{write:{overridePolicy:function(b,a,d){if(k.willPropertyWrite(this,"maxScale",{},d))return{ignoreOrigin:!0}}}}})],d.prototype,"minScale",void 0);g([l.property({type:Number,json:{write:{overridePolicy:function(b,a,d){if(k.willPropertyWrite(this,"minScale",{},d))return{ignoreOrigin:!0}}}}})],d.prototype,"maxScale",void 0);return d=g([l.subclass("esri.layers.mixins.ScaleRangeLayer")],d)}(l.declared(n))})},"esri/layers/support/arcgisLayers":function(){define("require exports dojo/when dojo/_base/lang ../../request ../../core/Error ../../core/promiseUtils ./arcgisLayerUrl ./arcgisLayerUrl ./lazyLayerLoader".split(" "),
function(b,f,q,g,n,l,k,d,h,c){function a(a,b){return a.sublayerIds.map(function(c){return new a.Constructor(g.mixin({},b,{layerId:c,sublayerTitleMode:"service-name"}))})}function p(a){var b=h.parse(a);if(!b)return k.reject(new l("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:a}));var d=b.serverType,e=b.sublayer,f={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"};switch(d){case "MapServer":d=null!=e?"FeatureLayer":v(a).then(function(a){return a?
"TileLayer":"MapImageLayer"});break;case "ImageServer":d=t(a).then(function(a){var b=a.tileInfo&&a.tileInfo.format;return a.tileInfo?b&&"LERC"===b.toUpperCase()&&a.cacheType&&"elevation"===a.cacheType.toLowerCase()?"ElevationLayer":"TileLayer":"ImageryLayer"});break;case "SceneServer":d=t(b.url.path).then(function(a){var b={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer"};return a&&Array.isArray(a.layers)&&0<a.layers.length&&(a=a.layers[0].layerType,
null!=b[a])?b[a]:"SceneLayer"});break;default:d=f[d]}var g={FeatureLayer:!0,SceneLayer:!0},p={parsedUrl:b,Constructor:null,sublayerIds:null},n;return q(d).then(function(b){n=b;if(g[b]&&null==e)return u(a).then(function(a){1!==a.length&&(p.sublayerIds=a)})}).then(function(){return(0,c.layerLookupMap[n])()}).then(function(a){p.Constructor=a;return p})}function u(a){return t(a).then(function(a){return a&&Array.isArray(a.layers)?a.layers.map(function(a){return a.id}).reverse():[]})}function v(a){return t(a).then(function(a){return a.tileInfo})}
function z(a,b){a=a.Constructor.prototype.declaredClass;return"esri.layers.FeatureLayer"===a||"esri.layers.StreamLayer"===a?g.mixin({returnZ:!0,outFields:["*"]},b):b}function t(a){return n(a,{responseType:"json",callbackParamName:"callback",query:{f:"json"}}).then(function(a){return a.data})}Object.defineProperty(f,"__esModule",{value:!0});f.fromUrl=function(c){return p(c.url).then(function(d){var f=z(d,g.mixin({},c.properties,{url:c.url}));return d.sublayerIds?k.create(function(a){return b(["../GroupLayer"],
a)}).then(function(b){var c=new b({title:d.parsedUrl.title});a(d,f).forEach(function(a){return c.add(a)});return k.resolve(c)}):k.resolve(new d.Constructor(f))})};f.fetchServerVersion=function(a){if(!d.test(a))return k.reject();a=a.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return n(a,{query:{f:"json"},responseType:"json",callbackParamName:"callback"}).then(function(a){return a.data&&a.data.currentVersion?a.data.currentVersion:k.reject()})}})},"esri/layers/support/lazyLayerLoader":function(){define(["require",
"exports","../../core/promiseUtils"],function(b,f,q){Object.defineProperty(f,"__esModule",{value:!0});f.layerLookupMap={CSVLayer:function(){return q.create(function(f){return b(["../CSVLayer"],f)})},ElevationLayer:function(){return q.create(function(f){return b(["../ElevationLayer"],f)})},FeatureLayer:function(){return q.create(function(f){return b(["../FeatureLayer"],f)})},GroupLayer:function(){return q.create(function(f){return b(["../GroupLayer"],f)})},GeoRSSLayer:function(){return q.create(function(f){return b(["../GeoRSSLayer"],
f)})},ImageryLayer:function(){return q.create(function(f){return b(["../ImageryLayer"],f)})},KMLLayer:function(){return q.create(function(f){return b(["../KMLLayer"],f)})},MapImageLayer:function(){return q.create(function(f){return b(["../MapImageLayer"],f)})},MapNotesLayer:function(){return q.create(function(f){return b(["../MapNotesLayer"],f)})},OpenStreetMapLayer:function(){return q.create(function(f){return b(["../OpenStreetMapLayer"],f)})},PointCloudLayer:function(){return q.create(function(f){return b(["../PointCloudLayer"],
f)})},SceneLayer:function(){return q.create(function(f){return b(["../SceneLayer"],f)})},IntegratedMeshLayer:function(){return q.create(function(f){return b(["../IntegratedMeshLayer"],f)})},StreamLayer:function(){return q.create(function(f){return b(["../StreamLayer"],f)})},TileLayer:function(){return q.create(function(f){return b(["../TileLayer"],f)})},UnknownLayer:function(){return q.create(function(f){return b(["../UnknownLayer"],f)})},UnsupportedLayer:function(){return q.create(function(f){return b(["../UnsupportedLayer"],
f)})},VectorTileLayer:function(){return q.create(function(f){return b(["../VectorTileLayer"],f)})},WebTileLayer:function(){return q.create(function(f){return b(["../WebTileLayer"],f)})},WMSLayer:function(){return q.create(function(f){return b(["../WMSLayer"],f)})},WMTSLayer:function(){return q.create(function(f){return b(["../WMTSLayer"],f)})},BingMapsLayer:function(){return q.create(function(f){return b(["../BingMapsLayer"],f)})}}})},"esri/layers/FeatureLayer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../Graphic ../PopupTemplate ../renderers ../request ../symbols ../core/Collection ../core/Error ../core/Handles ../core/kebabDictionary ../core/lang ../core/Logger ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/Extent ../geometry/HeightModelInfo ../geometry/SpatialReference ../geometry/support/normalizeUtils ./Layer ./graphics/sources/MemorySource ./mixins/ArcGISService ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./support/arcgisLayerUrl ./support/commonProperties ./support/FeatureProcessing ./support/FeatureReduction ./support/FeatureReductionSelection ./support/FeatureTemplate ./support/FeatureType ./support/Field ./support/fieldUtils ./support/LabelClass ./support/labelingInfo ./support/Relationship ../renderers/support/jsonUtils ../renderers/support/styleUtils ../renderers/support/typeUtils ../symbols/support/ElevationInfo ../symbols/support/jsonUtils ../tasks/support/FeatureSet ../tasks/support/Query".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z,t,x,r,m,e,w,y,A,D,B,F,C,G,W,fa,V,H,ba,J,Z,O,N,K,M,U,T,da,Q,P,Y,aa,ga,ea,la,ma,oa){function sa(a){return a&&null!=a.applyEdits}function va(a){return a&&a.isInstanceOf&&a.isInstanceOf(C)}function ha(a,b,c){return!(a&&a.hasOwnProperty(b)?!a[b]:!c)}var Da=z({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),za=x.getLogger("esri.layers.FeatureLayer");return function(f){function r(a){a=
f.call(this)||this;a._handles=new v;a.featureReduction=null;a.copyright=null;a.displayField=null;a.definitionExpression=null;a.dynamicDataSource=null;a.editFieldsInfo=null;a.elevationInfo=null;a.fields=null;a.fullExtent=null;a.gdbVersion=null;a.geometryType=null;a.hasM=!1;a.hasZ=!1;a.heightModelInfo=null;a.historicMoment=null;a.isTable=!1;a.labelsVisible=!1;a.labelingInfo=null;a.layerId=void 0;a.legendEnabled=!0;a.maxRecordCount=void 0;a.tileMaxRecordCount=void 0;a.minScale=0;a.maxScale=0;a.objectIdField=
null;a.operationalLayerType="ArcGISFeatureLayer";a.popupEnabled=!0;a.popupTemplate=null;a.relationships=null;a.returnM=!1;a.returnZ=!1;a.screenSizePerspectiveEnabled=!0;a.serviceDefinitionExpression=null;a.spatialReference=D.WGS84;a.templates=null;a.timeInfo=null;a.title=null;a.sublayerTitleMode="item-title";a.trackIdField=null;a.type="feature";a.typeIdField=null;a.types=null;a.userIsAdmin=!1;a.version=void 0;a.visible=!0;return a}g(r,f);r.prototype.normalizeCtorArgs=function(a,b){return"string"===
typeof a?q({url:a},b):a};r.prototype.load=function(){var a=this,b=this.source&&(Array.isArray(this.source)||va(this.source));if(this.portalItem&&b)this.addResolvingPromise(m.resolve());else return b=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]}).always(function(){if(a.url&&null==a.layerId&&/FeatureServer\/*$/i.test(a.url))return a._fetchFirstLayerId().then(function(b){null!=b&&(a.layerId=b)})}).then(function(){if(!a.url&&!a._hasMemorySource())throw new u("feature-layer:missing-url-or-source",
"Feature layer must be created with either a url or a source");return a.createGraphicsSource().then(a._initLayerProperties.bind(a))}),this.addResolvingPromise(b),this.when()};Object.defineProperty(r.prototype,"allRenderers",{get:function(){return this._getAllRenderers(this.renderer)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"capabilities",{get:function(){var a=this._get("capabilities");return a||!this.loaded||this.hasService?a:{data:{supportsAttachment:!1,supportsM:!1,supportsZ:!1},
operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!0,supportsDelete:!0,supportsEditing:!0,supportsQuery:!0,supportsResizeAttachments:!1,supportsUpdate:!0},query:{supportsStatistics:!1,supportsCentroid:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!0,supportsGeometryProperties:!1,supportsOrderBy:!1,supportsPagination:!1,supportsQuantization:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsQueryByOthers:!1,
supportsHistoricMoment:!1},queryRelated:{supportsPagination:!1,supportsCount:!1,supportsOrderBy:!1},editing:{supportsGeometryUpdate:!0,supportsGlobalId:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}},enumerable:!0,configurable:!0});r.prototype.readCapabilities=function(a,b){b=b.layerDefinition||b;return{data:this._readDataCapabilities(b),operations:this._readOperationsCapabilities(b.capabilities||
a,b),query:this._readQueryCapabilities(b),queryRelated:this._readQueryRelatedCapabilities(b),editing:this._readEditingCapabilities(b)}};Object.defineProperty(r.prototype,"hasAttachments",{get:function(){return this.hasService&&this._get("hasAttachments")||!1},enumerable:!0,configurable:!0});r.prototype.readIsTable=function(a,b){b=b&&b.layerDefinition||b;return"Table"===b.type};Object.defineProperty(r.prototype,"hasService",{get:function(){return!this._hasMemorySource()},enumerable:!0,configurable:!0});
r.prototype.readMinScale=function(a,b){return b.effectiveMinScale||a||0};r.prototype.readMaxScale=function(a,b){return b.effectiveMaxScale||a||0};r.prototype.readObjectIdFieldFromService=function(a,b){b=b.layerDefinition||b;if(b.objectIdField)return b.objectIdField;if(b.fields)for(a=0,b=b.fields;a<b.length;a++){var c=b[a];if("esriFieldTypeOID"===c.type)return c.name}};Object.defineProperty(r.prototype,"outFields",{get:function(){var a=this,b=this._userOutFields,c=this.requiredFields,b=b&&b.slice(0),
c=c&&c.slice(0);b?-1===b.indexOf("*")&&c.forEach(function(a){-1===b.indexOf(a)&&b.push(a)}):b=c;-1!==b.indexOf("*")?b=["*"]:this.loaded&&(b=b.filter(function(b){var c=!!a.getField(b,a.fields);b&&!c&&za.error("[outFields] Invalid field: ",b);return c},this),b=b.map(function(b){return a.getField(b,a.fields).name},this),b=b.filter(function(a,b,c){return c.indexOf(a)===b}));return b},set:function(a){var b=this,c=this.requiredFields&&this.requiredFields.slice(0);a?-1===a.indexOf("*")&&c.forEach(function(b){-1===
a.indexOf(b)&&a.push(b)}):a=c;this.loaded&&(a=a.filter(function(a){var c="*"===a||!!b.getField(a,b.fields);a&&!c&&za.error("[outFields] Invalid field: ",a);return c},this),a=a.map(function(a){return"*"===a?a:b.getField(a,b.fields).name},this));this._userOutFields=a},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"parsedUrl",{get:function(){var a=this.url?e.urlToObject(this.url):null;null!=this.layerId&&null!=a&&(a.path=e.join(a.path,this.layerId.toString()));return a},enumerable:!0,
configurable:!0});Object.defineProperty(r.prototype,"renderer",{set:function(a){var b=this._getAllRenderers(a);T.fixRendererFields(b,this.fields);this._set("renderer",a)},enumerable:!0,configurable:!0});r.prototype.readRenderer=function(b,c,d){c=c.layerDefinition||c;var e=c.drawingInfo&&c.drawingInfo.renderer||void 0,f,g;if(e)(f=Y.read(e,c,d)||void 0)||za.error("Failed to create renderer",{rendererDefinition:c.drawingInfo.renderer,layer:this,context:d});else if(c.defaultSymbol)la.read(c.defaultSymbol,
c,d),c.types&&c.types.length?(f=new h.UniqueValueRenderer({defaultSymbol:g,field:c.typeIdField}),c.types.forEach(function(a){e.addUniqueValueInfo(a.id,la.read(a.symbol,a,d))})):f=new h.SimpleRenderer({symbol:g});else if("Table"!==c.type){switch(c.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":g=new a.SimpleMarkerSymbol;break;case "esriGeometryPolyline":g=new a.SimpleLineSymbol;break;case "esriGeometryPolygon":g=new a.SimpleFillSymbol}f=g&&new h.SimpleRenderer({symbol:g})}return f};
r.prototype.writeRenderer=function(a,b,c,d){Y.writeTarget(a,b,c,d)};Object.defineProperty(r.prototype,"requiredFields",{get:function(){var a=this.timeInfo,b=[],c=[],a=[this.objectIdField,this.typeIdField,this.editFieldsInfo&&this.editFieldsInfo.creatorField,a&&a.startTimeField,a&&a.endTimeField,this.trackIdField];this.allRenderers.forEach(function(a){b=b.concat(a.requiredFields)});this.labelingInfo&&this.labelingInfo.length&&this.labelingInfo.forEach(function(a){c=c.concat(a.requiredFields)});var c=
c.map(function(a){return a.replace(/['"]+/g,"")}),a=a.concat(b),a=a.concat(c),d=this.elevationInfo&&this.elevationInfo.featureExpressionInfo;d&&(a=a.concat(d.requiredFields));this.popupTemplate&&(a=a.concat(this.popupTemplate.requiredFields));return a.filter(function(a,b,c){return!!a&&c.indexOf(a)===b&&"function"!==typeof a})},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"source",{set:function(a){var b=this._get("source");b!==a&&(va(b)&&this._resetMemorySource(b),va(a)&&this._initMemorySource(a),
this._set("source",a))},enumerable:!0,configurable:!0});r.prototype.castSource=function(a){return a?Array.isArray(a)||a&&a.isInstanceOf&&a.isInstanceOf(p)?new C({layer:this,items:a}):a:null};r.prototype.readSource=function(a,b){a=ma.fromJSON(b.featureSet);return new C({layer:this,items:a&&a.features||[]})};r.prototype.readTemplates=function(a,b){var c=b.editFieldsInfo;b=c&&c.creatorField;c=c&&c.editorField;a=a&&a.map(function(a){return K.fromJSON(a)});this._fixTemplates(a,b);this._fixTemplates(a,
c);return a};r.prototype.readTitle=function(a,b){a=b.layerDefinition&&b.layerDefinition.name||b.name;b=b.title||b.layerDefinition&&b.layerDefinition.title;if(a){b=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?ba.titleFromUrlAndName(this.url,a):a;if(a=a||this.url&&ba.parse(this.url).title)return"item-title-and-service-name"===this.sublayerTitleMode&&b&&(a=b+" - "+a),ba.cleanTitle(a)}else if("item-title"===this.sublayerTitleMode&&b)return b};r.prototype.readTitleFromWebMap=
function(a,b){return(a=b.layerDefinition&&b.layerDefinition.name)?a:b.title};r.prototype.readTypeIdField=function(a,b){b=b.layerDefinition||b;if(a=b.typeIdField)if(b=this.getField(a,b.fields))a=b.name;return a};r.prototype.readTypes=function(a,b){var c=this;b=b.layerDefinition||b;a=b.types;var d=(b=b.editFieldsInfo)&&b.creatorField,e=b&&b.editorField;return a&&a.map(function(a){a=M.fromJSON(a);c._fixTemplates(a.templates,d);c._fixTemplates(a.templates,e);return a})};Object.defineProperty(r.prototype,
"url",{set:function(a){a=ba.sanitizeUrlWithLayerId(this,a,za);this._set("url",a.url);null!=a.layerId&&this._set("layerId",a.layerId)},enumerable:!0,configurable:!0});r.prototype.writeUrl=function(a,b,c,d){ba.writeUrlWithLayerId(this,a,b)};r.prototype.readVersion=function(a,b){b=b.layerDefinition||b;return b.currentVersion?b.currentVersion:b.hasOwnProperty("capabilities")||b.hasOwnProperty("drawingInfo")||b.hasOwnProperty("hasAttachments")||b.hasOwnProperty("htmlPopupType")||b.hasOwnProperty("relationships")||
b.hasOwnProperty("timeInfo")||b.hasOwnProperty("typeIdField")||b.hasOwnProperty("types")?10:9.3};r.prototype.readVisible=function(a,b){if(b.layerDefinition&&null!=b.layerDefinition.defaultVisibility)return!!b.layerDefinition.defaultVisibility;if(null!=b.visibility)return!!b.visibility};r.prototype.applyEdits=function(a){var b=this;return this.load().then(function(){return sa(b.source)?b._processApplyEditsParams(a):m.reject(new u("FeatureLayer","Layer source does not support applyEdits capability"))}).then(function(a){if(sa(b.source))return b.source.applyEdits(a).then(function(a){var c=
function(a){return a.filter(function(a){return!a.error}).map(t.clone)},c={addedFeatures:c(a.addFeatureResults),updatedFeatures:c(a.updateFeatureResults),deletedFeatures:c(a.deleteFeatureResults)};(c.addedFeatures.length||c.updatedFeatures.length||c.deletedFeatures.length)&&b.emit("edits",c);return a})})};r.prototype.createGraphicsSource=function(){var a=this;return this._hasMemorySource()?(this.emit("graphics-source-create",{graphicsSource:this.source}),this.source.when()):m.create(function(a){return b(["./graphics/sources/FeatureLayerSource"],
a)}).then(function(b){return new b({layer:a})}).then(function(a){return a.when()}).then(function(b){a.emit("graphics-source-create",{graphicsSource:b});return b})};r.prototype.createGraphicsController=function(a){var c=this,d=a.layerView,e=p.ofType(k),f=this.source,g=va(f),h=q({},a.options,{layer:this,layerView:d,graphics:g?f:new e});return(g?m.create(function(a){return b(["./graphics/controllers/MemoryController"],a)}):"2d"===d.view.type?m.create(function(a){return b(["./graphics/controllers/AutoController2D"],
a)}):m.create(function(a){return b(["./graphics/controllers/SnapshotController"],a)})).then(function(a){return new a(h)}).then(function(a){c.emit("graphics-controller-create",{graphicsController:a});return a.when()})};r.prototype.createQuery=function(){var a=new oa,b=this.get("capabilities.data");a.gdbVersion=this.gdbVersion;a.historicMoment=this.historicMoment;a.returnGeometry=!0;a.returnZ=b&&b.supportsZ&&this.returnZ||null;a.returnM=b&&b.supportsM&&this.returnM||null;a.outFields=this.outFields;
a.where=this.definitionExpression||"1\x3d1";a.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null;return a};r.prototype.getFeatureType=function(a){var b=this.typeIdField;if(!b||!a)return null;var c=a.attributes?a.attributes[b]:void 0;if(null==c)return null;var d=null;this.types.some(function(a){var b=a.id;if(null==b)return!1;b.toString()===c.toString()&&(d=a);return!!d});return d};r.prototype.getFieldDomain=function(a,b){var c=this,d,e=!1;b=(b=b&&b.feature)&&b.attributes;var f=this.typeIdField&&
b&&b[this.typeIdField];null!=f&&this.types&&(e=this.types.some(function(b){return b.id==f?((d=b.domains&&b.domains[a])&&"inherited"===d.type&&(d=c._getLayerDomain(a)),!0):!1}));e||d||(d=this._getLayerDomain(a));return d};r.prototype.getField=function(a,b){var c=this.processing?this.fields.concat(this.processing.fields):this.fields;return T.getField(a,b||c)};r.prototype.graphicChanged=function(a){this.emit("graphic-update",a)};r.prototype.queryFeatureAttachments=function(a){var b=this;return this.load().then(function(){if(!a)return m.reject(new u("FeatureLayer",
"A feature is required to query attachments"));var d=b.layerId,f=b.objectIdField,g=b.token,h=b.url;if(!b.get("capabilities.data.supportsAttachment"))return m.reject(new u("FeatureLayer","this layer doesn't support attachments"));var k=a.attributes;if(!k)return m.reject(new u("FeatureLayer","'attributes' are required on a feature to query attachments"));k=k[f];if(!k)return m.reject(new u("FeatureLayer","feature is missing the identifying attribute "+f));var l=h+"/"+d+"/"+k+"/attachments";return c(l,
{query:{f:"json",token:g},callbackParamName:"callback",responseType:"json"}).then(function(a){return a.data.attachmentInfos.map(function(a){return q({},a,{url:e.addProxy(l+"/"+a.id+(g?"?token\x3d"+g:""))})})})})};r.prototype.queryFeatures=function(a){var b=this;return this.load().then(function(){return b.source.queryFeatures(a||b.createQuery())}).then(function(a){if(a&&a.features)for(var c=b.popupTemplate,d=0,e=a.features;d<e.length;d++){var f=e[d];f.popupTemplate=c;f.layer=b;f.sourceLayer=b}return a})};
r.prototype.queryFeaturesJSON=function(a){var b=this;return this.load().then(function(){if(!b.source.queryFeaturesJSON)return m.reject(new u("FeatureLayer","Layer source does not support queryFeaturesJSON capability"))}).then(function(){return b.source.queryFeaturesJSON(a||b.createQuery())})};r.prototype.queryObjectIds=function(a){var b=this;return this.load().then(function(){return b.source.queryObjectIds?b.source.queryObjectIds(a||b.createQuery()):m.reject(new u("FeatureLayer","Layer source does not support queryObjectIds capability"))})};
r.prototype.queryFeatureCount=function(a){var b=this;return this.load().then(function(){return b.source.queryFeatureCount?b.source.queryFeatureCount(a||b.createQuery()):m.reject(new u("FeatureLayer","Layer source does not support queryFeatureCount capability"))})};r.prototype.queryExtent=function(a){var b=this;return this.load().then(function(){return b.source.queryExtent?b.source.queryExtent(a||b.createQuery()):m.reject(new u("FeatureLayer","Layer source does not support queryExtent capability"))})};
r.prototype.read=function(a,b){switch(b&&b.origin){case "web-scene":this.inherited(arguments,[{returnZ:!0},b])}var c=a.featureCollection;if(c){var d=c.layers;d&&1===d.length&&(this.inherited(arguments,[d[0],b]),null!=c.showLegend&&this.inherited(arguments,[{showLegend:c.showLegend},b]))}this.inherited(arguments,[a,b]);return this};r.prototype.write=function(a,b){if(b&&"web-scene"===b.origin&&b.messages){if(!this.url)return b.messages.push(new u("layer:unsupported","Layers ("+this.title+", "+this.id+
") of type '"+this.declaredClass+"' require a url to a service to be written to web scenes",{layer:this})),null;if(this.isTable)return b.messages.push(new u("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' using a Table source cannot written to web scenes",{layer:this})),null}return this.inherited(arguments)};r.prototype.importLayerViewModule=function(a){switch(a.type){case "2d":return m.create(function(a){return b(["../views/2d/layers/FeatureLayerView2D"],
a)});case "3d":return m.create(function(a){return b(["../views/3d/layers/FeatureLayerView3D"],a)})}};r.prototype._getLayerDomain=function(a){if(!this.fields)return null;var b=null;this.fields.some(function(c){c.name===a&&(b=c.domain);return!!b});return b};r.prototype._fetchFirstLayerId=function(){return c(this.url,{query:{f:"json"},callbackParamName:"callback",responseType:"json"}).then(function(a){if((a=a.data)&&Array.isArray(a.layers)&&0<a.layers.length)return a.layers[0].id})};r.prototype._initLayerProperties=
function(a){var b=this;this.source||(this.source=a);a.url&&(this.url=a.url);a.layerDefinition&&this.read(a.layerDefinition,{origin:"service",url:this.parsedUrl});this._verifySource();this._verifyFields();this._addSymbolUrlTokens();T.fixRendererFields(this._getAllRenderers(this.renderer),this.fields);this.watch("token",function(){b._addSymbolUrlTokens()});return aa.loadStyleRenderer(this,{origin:"service"})};r.prototype._findUrlBasedSymbols=function(){var a=this.renderer;if(!a)return[];var b=[];a.symbol&&
b.push(a.symbol);a.defaultSymbol&&b.push(a.defaultSymbol);(a=a.classBreakInfos||a.uniqueValueInfos)&&a.forEach(function(a){a.symbol&&b.push(a.symbol)});return b.filter(function(a){return!!a.url})};r.prototype._addSymbolUrlTokens=function(){var a=this.token;!this._hasMemorySource()&&a&&this._findUrlBasedSymbols().forEach(function(b){var c=b.url;if(c&&-1!==c.search(/https?\:/i)&&!/[?&]token=/.test(c)){var d=-1===c.indexOf("?")?"?":"\x26";b.url=c+d+"token\x3d"+a}})};r.prototype._getAllRenderers=function(a){if(!a)return[];
var b=[];[a,a.trackRenderer,a.observationRenderer,a.latestObservationRenderer].forEach(function(a){a&&(b.push(a),a.rendererInfos&&a.rendererInfos.forEach(function(a){a.renderer&&b.push(a.renderer)}))});return b};r.prototype._verifyFields=function(){var a=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+a+")");this.isTable||this._hasMemorySource()||-1!==a.search(/\/FeatureServer\//i)||this.fields&&this.fields.some(function(a){return"geometry"===
a.type})||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+a+")")};r.prototype._fixTemplates=function(a,b){a&&a.forEach(function(a){(a=a.prototype&&a.prototype.attributes)&&b&&delete a[b]})};r.prototype._verifySource=function(){var a=this;if(this._hasMemorySource()){if(this.url)throw new u("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url");
var b=["geometryType","fields","objectIdField"];if(!b.every(function(b){return null!=a[b]}))throw new u("feature-layer:missing-property","FeatureLayer created as feature collection requires properties: "+b.join(),{requiredProperties:b});}else{if(this.isTable)throw new u("feature-layer:source-type-not-supported","The table feature service type is not yet supported",{sourceType:"Table"});if(!this.url)throw new u("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source");
}};r.prototype._initMemorySource=function(a){var b=this;a.forEach(function(a){a.layer=b;a.sourceLayer=b});this._handles.add([a.on("after-add",function(a){a.item.layer=b;a.item.sourceLayer=b}),a.on("after-remove",function(a){a.item.layer=null;a.item.sourceLayer=null})],"fl-source")};r.prototype._resetMemorySource=function(a){a.forEach(function(a){a.layer=null;a.sourceLayer=null});this._handles.remove("fl-source")};r.prototype._hasMemorySource=function(){return!(this.url||!this.source)};r.prototype._readDataCapabilities=
function(a){return{supportsAttachment:ha(a,"hasAttachments",!1),supportsM:ha(a,"hasM",!1),supportsZ:ha(a,"hasZ",!1)}};r.prototype._readOperationsCapabilities=function(a,b){a=a?a.toLowerCase().split(",").map(function(a){return a.trim()}):[];var c=-1!==a.indexOf("editing"),d=c&&-1!==a.indexOf("create"),e=c&&-1!==a.indexOf("delete"),f=c&&-1!==a.indexOf("update");!c||d||e||f||(d=e=f=!0);return{supportsCalculate:ha(b,"supportsCalculate",!1),supportsTruncate:ha(b,"supportsTruncate",!1),supportsValidateSql:ha(b,
"supportsValidateSql",!1),supportsAdd:d,supportsDelete:e,supportsEditing:c,supportsQuery:-1!==a.indexOf("query"),supportsResizeAttachments:ha(b,"supportsAttachmentsResizing",!1),supportsUpdate:f}};r.prototype._readQueryCapabilities=function(a){var b=a.advancedQueryCapabilities,c=a.ownershipBasedAccessControlForFeatures,d=a.archivingInfo;return{supportsStatistics:ha(b,"supportsStatistics",a.supportsStatistics),supportsCentroid:ha(b,"supportsReturningGeometryCentroid",!1),supportsDistance:ha(b,"supportsQueryWithDistance",
!1),supportsDistinct:ha(b,"supportsDistinct",a.supportsAdvancedQueries),supportsExtent:ha(b,"supportsReturningQueryExtent",!1),supportsGeometryProperties:ha(b,"supportsReturningGeometryProperties",!1),supportsOrderBy:ha(b,"supportsOrderBy",a.supportsAdvancedQueries),supportsPagination:ha(b,"supportsPagination",!1),supportsQuantization:ha(a,"supportsCoordinatesQuantization",!1),supportsResultType:ha(b,"supportsQueryWithResultType",!1),supportsSqlExpression:ha(b,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:ha(a,
"useStandardizedQueries",!1),supportsQueryByOthers:ha(c,"allowOthersToQuery",!0),supportsHistoricMoment:ha(d,"supportsQueryWithHistoricMoment",!1)}};r.prototype._readQueryRelatedCapabilities=function(a){a=a.advancedQueryCapabilities;var b=ha(a,"supportsAdvancedQueryRelated",!1);return{supportsPagination:ha(a,"supportsQueryRelatedPagination",!1),supportsCount:b,supportsOrderBy:b}};r.prototype._readEditingCapabilities=function(a){var b=a.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:ha(a,
"allowGeometryUpdates",!0),supportsGlobalId:ha(a,"supportsApplyEditsWithGlobalIds",!1),supportsRollbackOnFailure:ha(a,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:ha(a,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:ha(a,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:ha(b,"allowAnonymousToDelete",!0),supportsDeleteByOthers:ha(b,"allowOthersToDelete",!0),supportsUpdateByAnonymous:ha(b,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:ha(b,"allowOthersToUpdate",
!0)}};r.prototype._processApplyEditsParams=function(a){if(!a)return m.reject(new u("feature-layer:missing-parameters","'addFeatures', 'updateFeatures' or 'deleteFeatures' parameter is required"));a=q({},a);a.addFeatures=a.addFeatures||[];a.updateFeatures=a.updateFeatures||[];a.deleteFeatures=a.deleteFeatures||[];if(a.addFeatures.length||a.updateFeatures.length||a.deleteFeatures.length){var b=function(a){var b=new k;b.geometry=a.geometry;b.attributes=a.attributes;return b};a.addFeatures=a.addFeatures.map(b);
a.updateFeatures=a.updateFeatures.map(b);return this._normalizeGeometries(a)}return m.reject(new u("feature-layer:missing-parameters","'addFeatures', 'updateFeatures' or 'deleteFeatures' parameter is required"))};r.prototype._normalizeGeometries=function(a){var b=a.addFeatures,c=a.updateFeatures,d=b.concat(c).map(function(a){return a.geometry});return B.normalizeCentralMeridian(d).then(function(d){var e=b.length,f=c.length;d.slice(0,e).forEach(function(b,c){a.addFeatures[c].geometry=b});d.slice(e,
e+f).forEach(function(b,c){a.updateFeatures[c].geometry=b});return a})};n([w.property({types:{key:"type",base:O.default,typeMap:{selection:N.default}},json:{origins:{"web-scene":{read:{source:"layerDefinition.featureReduction"},write:{target:"layerDefinition.featureReduction"}}}}})],r.prototype,"featureReduction",void 0);n([w.property({readOnly:!0,dependsOn:["loaded","renderer","fields"]})],r.prototype,"allRenderers",null);n([w.property({readOnly:!0,dependsOn:["loaded"]})],r.prototype,"capabilities",
null);n([w.reader("capabilities","layerDefinition.capabilities layerDefinition.advancedQueryCapabilities layerDefinition.archivingInfo layerDefinition.supportsStatistics layerDefinition.supportsAdvancedQueries layerDefinition.hasAttachments layerDefinition.hasM layerDefinition.hasZ layerDefinition.supportsCalculate layerDefinition.supportsTruncate layerDefinition.supportsValidateSql layerDefinition.supportsCoordinatesQuantization layerDefinition.useStandardizedQueries layerDefinition.ownershipBasedAccessControlForFeatures layerDefinition.allowGeometryUpdates layerDefinition.supportsApplyEditsWithGlobalIds layerDefinition.supportsRollbackOnFailureParameter layerDefinition.allowUpdateWithoutMValues layerDefinition.supportsAttachmentsByUploadId".split(" ")),
w.reader("service","capabilities","advancedQueryCapabilities archivingInfo supportsStatistics supportsAdvancedQueries hasAttachments hasM hasZ supportsAttachmentsResizing supportsCalculate supportsTruncate supportsValidateSql supportsCoordinatesQuantization useStandardizedQueries ownershipBasedAccessControlForFeatures allowGeometryUpdates supportsApplyEditsWithGlobalIds supportsRollbackOnFailureParameter allowUpdateWithoutMValues supportsAttachmentsByUploadId capabilities".split(" "))],r.prototype,
"readCapabilities",null);n([w.property({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],r.prototype,"copyright",void 0);n([w.property({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],r.prototype,"displayField",void 0);n([w.property({type:String,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],
r.prototype,"definitionExpression",void 0);n([w.property({readOnly:!0,json:{read:la.read}})],r.prototype,"defaultSymbol",void 0);n([w.property()],r.prototype,"dynamicDataSource",void 0);n([w.property({readOnly:!0})],r.prototype,"editFieldsInfo",void 0);n([w.property({type:ea,json:{origins:{service:{read:{source:"elevationInfo"},write:{target:"elevationInfo",enabled:!1}}},read:{source:"layerDefinition.elevationInfo"},write:{target:"layerDefinition.elevationInfo"}}})],r.prototype,"elevationInfo",void 0);
n([w.property({type:[U],json:{origins:{service:{read:!0}},read:{source:"layerDefinition.fields"}}})],r.prototype,"fields",void 0);n([w.property({type:y,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],r.prototype,"fullExtent",void 0);n([w.property()],r.prototype,"gdbVersion",void 0);n([w.property({json:{origins:{service:{read:Da.read}},read:{source:"layerDefinition.geometryType",reader:Da.read}}})],r.prototype,"geometryType",void 0);n([w.property({readOnly:!0,
dependsOn:["loaded"],json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasAttachments"}}})],r.prototype,"hasAttachments",null);n([w.property({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],r.prototype,"hasM",void 0);n([w.property({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],r.prototype,"hasZ",void 0);n([w.property({readOnly:!0,type:A})],r.prototype,"heightModelInfo",void 0);n([w.property({type:Date})],
r.prototype,"historicMoment",void 0);n([w.property({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],r.prototype,"id",void 0);n([w.property({readOnly:!0})],r.prototype,"isTable",void 0);n([w.reader("service","isTable",["type"]),w.reader("isTable",["layerDefinition.type"])],r.prototype,"readIsTable",null);n([w.property({dependsOn:["loaded","url","source"],readOnly:!0})],r.prototype,"hasService",null);n([w.property(J.labelsVisible)],r.prototype,"labelsVisible",void 0);n([w.property({type:[da],
json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:Q.reader},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:Q.reader},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],r.prototype,"labelingInfo",void 0);n([w.property({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],r.prototype,"layerId",void 0);n([w.property({type:Boolean,json:{read:{source:"showLegend"},write:{target:"showLegend"}}})],
r.prototype,"legendEnabled",void 0);n([w.property({type:Number,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.maxRecordCount"}}})],r.prototype,"maxRecordCount",void 0);n([w.property({type:Number,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.tileMaxRecordCount"}}})],r.prototype,"tileMaxRecordCount",void 0);n([w.property({type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}})],
r.prototype,"minScale",void 0);n([w.reader("service","minScale",["minScale","effectiveMinScale"])],r.prototype,"readMinScale",null);n([w.property({type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}})],r.prototype,"maxScale",void 0);n([w.reader("service","maxScale",["maxScale","effectiveMaxScale"])],r.prototype,"readMaxScale",null);n([w.property({type:String})],r.prototype,"objectIdField",void 0);n([w.reader("objectIdField",
["layerDefinition.objectIdField","layerDefinition.fields"]),w.reader("service","objectIdField",["objectIdField","fields"])],r.prototype,"readObjectIdFieldFromService",null);n([w.property()],r.prototype,"operationalLayerType",void 0);n([w.property({dependsOn:["requiredFields"]})],r.prototype,"outFields",null);n([w.property({readOnly:!0,dependsOn:["layerId"]})],r.prototype,"parsedUrl",null);n([w.property(J.popupEnabled)],r.prototype,"popupEnabled",void 0);n([w.property({type:d,json:{read:{source:"popupInfo"},
write:{target:"popupInfo"}}})],r.prototype,"popupTemplate",void 0);n([w.property({type:Z})],r.prototype,"processing",void 0);n([w.property({type:[P],readOnly:!0})],r.prototype,"relationships",void 0);n([w.property({types:ga.types,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],r.prototype,"renderer",null);n([w.reader("service","renderer",["drawingInfo.renderer","defaultSymbol","type"]),w.reader("renderer",["layerDefinition.drawingInfo.renderer",
"layerDefinition.defaultSymbol","layerDefinition.type"])],r.prototype,"readRenderer",null);n([w.writer("renderer")],r.prototype,"writeRenderer",null);n([w.property({readOnly:!0,dependsOn:["allRenderers","labelingInfo","elevationInfo.featureExpressionInfo","popupTemplate.requiredFields"]})],r.prototype,"requiredFields",null);n([w.property({type:Boolean})],r.prototype,"returnM",void 0);n([w.property({type:Boolean})],r.prototype,"returnZ",void 0);n([w.property(J.screenSizePerspectiveEnabled)],r.prototype,
"screenSizePerspectiveEnabled",void 0);n([w.property()],r.prototype,"source",null);n([w.cast("source")],r.prototype,"castSource",null);n([w.reader("portal-item","source",["featureSet"]),w.reader("web-map","source",["featureSet"])],r.prototype,"readSource",null);n([w.property({readOnly:!0,json:{origins:{service:{read:{source:"definitionExpression"}}}}})],r.prototype,"serviceDefinitionExpression",void 0);n([w.property({type:D,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],
r.prototype,"spatialReference",void 0);n([w.property({type:[K]})],r.prototype,"templates",void 0);n([w.reader("templates",["editFieldsInfo","creatorField","editorField","templates"])],r.prototype,"readTemplates",null);n([w.property()],r.prototype,"timeInfo",void 0);n([w.property()],r.prototype,"title",void 0);n([w.reader("service","title",["name"]),w.reader("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],r.prototype,"readTitle",null);n([w.reader("web-map","title",
["layerDefinition.name","title"])],r.prototype,"readTitleFromWebMap",null);n([w.property({type:String})],r.prototype,"sublayerTitleMode",void 0);n([w.property({type:String,readOnly:!0,json:{read:{source:"timeInfo.trackIdField"}}})],r.prototype,"trackIdField",void 0);n([w.property({json:{read:!1}})],r.prototype,"type",void 0);n([w.property({type:String,readOnly:!0})],r.prototype,"typeIdField",void 0);n([w.reader("service","typeIdField"),w.reader("typeIdField",["layerDefinition.typeIdField"])],r.prototype,
"readTypeIdField",null);n([w.property({type:[M]})],r.prototype,"types",void 0);n([w.reader("service","types",["types"]),w.reader("types",["layerDefinition.types"])],r.prototype,"readTypes",null);n([w.property({type:String})],r.prototype,"url",null);n([w.writer("url")],r.prototype,"writeUrl",null);n([w.property({readOnly:!0})],r.prototype,"userIsAdmin",void 0);n([w.property({json:{origins:{"portal-item":{read:!1}}}})],r.prototype,"version",void 0);n([w.reader("service","version","currentVersion capabilities drawingInfo hasAttachments htmlPopupType relationships timeInfo typeIdField types".split(" ")),
w.reader("version","layerDefinition.currentVersion layerDefinition.capabilities layerDefinition.drawingInfo layerDefinition.hasAttachments layerDefinition.htmlPopupType layerDefinition.typeIdField layerDefinition.types".split(" "))],r.prototype,"readVersion",null);n([w.property({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],r.prototype,"visible",void 0);n([w.reader("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],r.prototype,
"readVisible",null);n([l(0,w.cast(oa))],r.prototype,"queryFeatures",null);n([l(0,w.cast(oa))],r.prototype,"queryFeaturesJSON",null);n([l(0,w.cast(oa))],r.prototype,"queryObjectIds",null);n([l(0,w.cast(oa))],r.prototype,"queryFeatureCount",null);n([l(0,w.cast(oa))],r.prototype,"queryExtent",null);return r=n([w.subclass("esri.layers.FeatureLayer")],r)}(w.declared(F,W,fa,H,V,G,r))})},"esri/renderers":function(){define("require exports ./renderers/ClassBreaksRenderer ./renderers/HeatmapRenderer ./renderers/Renderer ./renderers/SimpleRenderer ./renderers/UniqueValueRenderer ./renderers/support/jsonUtils".split(" "),
function(b,f,q,g,n,l,k,d){Object.defineProperty(f,"__esModule",{value:!0});f.ClassBreaksRenderer=q;f.HeatmapRenderer=g;f.BaseRenderer=n;f.SimpleRenderer=l;f.UniqueValueRenderer=k;f.isRenderer=function(b){return b instanceof f.BaseRenderer};f.fromJSON=d.fromJSON})},"esri/renderers/ClassBreaksRenderer":function(){define("../core/declare ../core/lang ../core/kebabDictionary ../core/Error ../core/Logger ../core/accessorSupport/ensureType dojo/_base/lang ../support/arcadeUtils ../symbols/Symbol ../symbols/PolygonSymbol3D ../symbols/support/jsonUtils ../symbols/support/typeUtils ./Renderer ./support/LegendOptions ./support/ClassBreakInfo".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z){var t=n.getLogger("esri.renderers.ClassBreaksRenderer");v=v.LegendOptions;z=z.ClassBreakInfo;var x=q({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),r=l.ensureType(z),m=b(u,{declaredClass:"esri.renderers.ClassBreaksRenderer",properties:{backgroundFillSymbol:{types:{base:h,key:"type",typeMap:{"simple-fill":p.types.typeMap["simple-fill"],"picture-fill":p.types.typeMap["picture-fill"],"polygon-3d":p.types.typeMap["polygon-3d"]}},
value:null,json:{origins:{"web-scene":{read:a.read,write:{target:{backgroundFillSymbol:{type:c}},writer:a.writeTarget}}},read:a.read,write:a.writeTarget}},classBreakInfos:{type:[z],json:{read:function(a,b,c){if(Array.isArray(a)){var d=b.minValue;return a.map(function(a){var b=new z;b.read(a,c);null==b.minValue&&(b.minValue=d);null==b.maxValue&&(b.maxValue=b.minValue);d=b.maxValue;return b})}},write:function(a,b,c,d){a=a.map(function(a){return a.write({},d)});this._areClassBreaksConsecutive()&&a.forEach(function(a){delete a.classMinValue});
b[c]=a}}},minValue:{type:Number,readOnly:!0,dependsOn:["classBreakInfos"],get:function(){return this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0},json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}},defaultLabel:{type:String,value:null,json:{write:!0}},defaultSymbol:{types:p.rendererTypes,value:null,json:{origins:{"web-scene":{read:a.read,write:{target:{defaultSymbol:{types:p.rendererTypes3D}},
writer:a.writeTarget}}},read:a.read,write:a.writeTarget}},valueExpression:{type:String,value:null,json:{write:!0}},valueExpressionTitle:{type:String,value:null,json:{write:!0}},compiledFunc:{dependsOn:["valueExpression"],get:function(){return d.createFunction(this.valueExpression)}},legendOptions:{type:v,value:null,json:{write:!0}},field:{value:null,cast:function(a){return null==a?a:"function"===typeof a?a:l.ensureString(a)},json:{type:String,write:function(a,b,c,d){"string"===typeof a?b[c]=a:d&&
d.messages?d.messages.push(new g("property:unsupported","ClassBreaksRenderer.field set to a function cannot be written to JSON")):t.error(".field: cannot write field to JSON since it's not a string value")}}},isMaxInclusive:!0,normalizationField:{type:String,value:null,json:{write:!0}},normalizationTotal:{type:Number,value:null,json:{write:!0}},normalizationType:{type:String,value:null,dependsOn:["normalizationField","normalizationTotal"],get:function(){var a=this._get("normalizationType"),b=!!this.normalizationField,
c=null!=this.normalizationTotal;if(b||c)a=b&&"field"||c&&"percent-of-total",b&&c&&console.warn("warning: both normalizationField and normalizationTotal are set!");else if("field"===a||"percent-of-total"===a)a=null;return a},json:{read:x.fromJSON,write:function(a,b){if(a=x.toJSON(a))b.normalizationType=a}}},requiredFields:{dependsOn:["field","normalizationField","valueExpression"]},type:{value:"class-breaks",json:{write:function(a,b){b.type="classBreaks"}}}},constructor:function(){this.classBreakInfos=
[]},addClassBreakInfo:function(a,b,c){a="number"===typeof a?new z({minValue:a,maxValue:b,symbol:c}):r(f.clone(a));this.classBreakInfos.push(a);1===this.classBreakInfos.length&&this.notifyChange("minValue")},removeClassBreakInfo:function(a,b){var c,d,e=this.classBreakInfos.length;for(d=0;d<e;d++)if(c=[this.classBreakInfos[d].minValue,this.classBreakInfos[d].maxValue],c[0]==a&&c[1]==b){this.classBreakInfos.splice(d,1);break}},getBreakIndex:function(a,b){var c=this.field,e=a.attributes,f=this.classBreakInfos.length,
g=this.isMaxInclusive;if(this.valueExpression)a=d.executeFunction(this.compiledFunc,d.createExecContext(a,d.getViewInfo(b)));else if(k.isFunction(c))a=c(a);else if(a=parseFloat(e[c]),b=this.normalizationType)if(c=parseFloat(this.normalizationTotal),e=parseFloat(e[this.normalizationField]),"log"===b)a=Math.log(a)*Math.LOG10E;else if("percent-of-total"===b&&!isNaN(c))a=a/c*100;else if("field"===b&&!isNaN(e)){if(isNaN(a)||isNaN(e))return-1;a/=e}if(null!=a&&!isNaN(a)&&"number"===typeof a)for(e=0;e<f;e++)if(b=
[this.classBreakInfos[e].minValue,this.classBreakInfos[e].maxValue],b[0]<=a&&(g?a<=b[1]:a<b[1]))return e;return-1},getClassBreakInfo:function(a,b){a=this.getBreakIndex(a,b);return-1!==a?this.classBreakInfos[a]:null},getSymbol:function(a,b){a=this.getBreakIndex(a,b);return-1<a?this.classBreakInfos[a].symbol:this.defaultSymbol},getSymbols:function(){var a=[];this.classBreakInfos.forEach(function(b){b.symbol&&a.push(b.symbol)});this.defaultSymbol&&a.push(this.defaultSymbol);return a},clone:function(){return new m({field:this.field,
backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:f.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:f.clone(this.visualVariables),
legendOptions:f.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})},collectRequiredFields:function(a){this.inherited(arguments);[this.field,this.normalizationField].forEach(function(b){b&&(a[b]=!0)});this.valueExpression&&d.extractFieldNames(this.valueExpression).forEach(function(b){a[b]=!0})},_areClassBreaksConsecutive:function(){for(var a=this.classBreakInfos,b=1;b<a.length;b++)if(a[b-1].maxValue!==a[b].minValue)return!1;return!0}});return m})},"esri/renderers/Renderer":function(){define("../core/declare ../core/Accessor ../core/JSONSupport ../core/kebabDictionary ../core/screenUtils ../core/lang ../core/Error ../support/arcadeUtils ../webdoc/support/opacityUtils dojo/_base/lang ../Color ./support/utils ./support/AuthoringInfo".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u){var v=g({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),z=g({widthAndDepth:"width-and-depth"}),t=g({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});g({classedSize:"classed-size",classedColor:"classed-color",univariateColorSize:"univariate-color-size"});
g({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"});g({percentTotal:"percent-of-total"});var x=Math.PI,r=h.opacityToTransparency,m=h.transparencyToOpacity;return b([f,q],{declaredClass:"esri.renderers.Renderer",properties:{authoringInfo:{type:u,value:null,json:{write:!0}},requiredFields:{dependsOn:["visualVariables"],get:function(){var a=Object.create(null);
this.collectRequiredFields(a);return Object.keys(a).sort()}},type:{type:String,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}},visualVariables:{json:{read:{source:["visualVariables","rotationType","rotationExpression"],reader:function(a,b){return this._readVariables(a,b)}},write:function(a,b,c,d){var e=[];a.forEach(function(a,b){"size"===a.type?e.push(this._writeSizeInfo(a,d,b)):"color"===a.type?e.push(this._writeColorInfo(a,d,b)):"opacity"===a.type?e.push(this._writeOpacityInfo(a,d,b)):"rotation"===
a.type&&e.push(this._writeRotationInfo(a,d,b))},this);b.visualVariables=e}}}},constructor:function(){this._cache={}},_rotationRE:/^\[([^\]]+)\]$/i,_viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,_visualVariablesSetter:function(a){var b=this._cache;this.visualVariables&&this.visualVariables.forEach(function(a,c){b.hasOwnProperty(c)&&(b[c]=null)},this);a&&a.some(function(a){return!!a.target})&&a.sort(function(a,b){return a.target===b.target?0:a.target?1:-1});a&&a.forEach(function(a,c){"color"===
a.type?b[c]=this._processColorInfo(a):"opacity"===a.type?b[c]=this._processOpacityInfo(a):"size"===a.type?b[c]=this._processSizeInfo(a):"rotation"===a.type&&(b[c]=this._processRotationInfo(a))},this);this._set("visualVariables",a)},getSymbol:function(a,b){},getVisualVariableValues:function(a,b){var d=this.visualVariables,e;d&&(e=d.map(function(d){var e,f=d.type,g=f+"Info";b=c.mixin({},b);b[g]=d;switch(f){case "size":e=this.getSize(a,b);break;case "color":e=this.getColor(a,b);break;case "opacity":e=
this.getOpacity(a,b);break;case "rotation":e=this.getRotationAngle(a,b)}return{variable:d,value:e}},this).filter(function(a){return null!=a.value},this));return e},hasVisualVariables:function(a,b){return a?!!this.getVisualVariablesForType(a,b):!!(this.getVisualVariablesForType("size",b)||this.getVisualVariablesForType("color",b)||this.getVisualVariablesForType("opacity",b)||this.getVisualVariablesForType("rotation",b))},getVisualVariablesForType:function(a,b){var c=this.visualVariables,d;c&&(d=c.filter(function(c){return c.type===
a&&("string"===typeof b?c.target===b:!1===b?!c.target:!0)}))&&0===d.length&&(d=void 0);return d},getSize:function(a,b){var c=this._getVarInfo(b&&b.sizeInfo,"size"),d=c.variable,c=this._cache[c.cacheKey],e=null;if(d)var f=d.minSize,e=d.maxSize,f="object"===typeof f&&f?this._getSize(a,f,c&&c.minSize,b):f,e="object"===typeof e&&e?this._getSize(a,e,c&&c.maxSize,b):e,e=this._getSize(a,d,c&&c.root,b,[f,e]);return e},getSizeRangeAtScale:function(a,b){var c;a=this._getVarInfo(a,"size");var d=this._cache[a.cacheKey],
e={scale:b};if((a=a.variable)&&b){b=a.minSize;var f=a.maxSize;a="object"===typeof b&&b?this._getSize({},b,d&&d.minSize,e):b;d="object"===typeof f&&f?this._getSize({},f,d&&d.maxSize,e):f;if(null!=a||null!=d)a>d&&(c=d,d=a,a=c),c={minSize:a,maxSize:d}}return c},getColor:function(a,b){var c=this._getVarInfo(b&&b.colorInfo,"color");return this._getColorComponent(a,c.variable,this._cache[c.cacheKey],b)},getOpacity:function(a,b){var c=this._getVarInfo(b&&b.opacityInfo,"opacity");return this._getColorComponent(a,
c.variable,this._cache[c.cacheKey],b,!0)},getRotationAngle:function(a,b){var e=this._getVarInfo(b&&b.rotationInfo,"rotation"),f=e.variable,g=this._cache[e.cacheKey],h=f.axis||"heading",e="heading"===h&&"arithmetic"===f.rotationType?90:0,h="heading"===h&&"arithmetic"===f.rotationType?-1:1,f=f.field,g=g&&g.compiledFunc,m=a.attributes,k=0;if(f||g)g?k=d.executeFunction(g,d.createExecContext(a,d.getViewInfo(b))):c.isFunction(f)?k=f.apply(this,arguments):m&&(k=m[f]||0),k="number"!==typeof k||isNaN(k)?null:
e+h*k;return k},collectRequiredFields:function(a){var b=[];this.visualVariables&&(b=b.concat(this.visualVariables));b.forEach(function(b){b&&(b.field&&(a[b.field]=!0),b.normalizationField&&(a[b.normalizationField]=!0),b.valueExpression&&d.extractFieldNames(b.valueExpression).forEach(function(b){a[b]=!0}))})},_getVarInfo:function(a,b){var c;a&&a.type===b&&this.visualVariables?(c=this.visualVariables.indexOf(a),a=this.visualVariables[c]):this.visualVariables&&(a=(a=this.getVisualVariablesForType(b))&&
a[0],c=this.visualVariables.indexOf(a));return{variable:a,cacheKey:c}},_readSizeInfo:function(a){a.axis&&(a.axis=z.fromJSON(a.axis));a.valueUnit&&(a.valueUnit=t.fromJSON(a.valueUnit));return a},_readColorInfo:function(b){b&&(b.colors&&b.colors.forEach(function(d,e){c.isArray(d)?b.colors[e]=a.fromJSON(d):b.colors[e]=new a(d)}),b.stops&&b.stops.forEach(function(d,e){d.color&&c.isArray(d.color)?b.stops[e].color=a.fromJSON(d.color):d.color&&(b.stops[e].color=new a(d.color))}));return b},_readOpacityInfo:function(a){var b;
a&&(b=c.mixin({},a),b.transparencyValues&&(b.opacityValues=b.transparencyValues.map(m),delete b.transparencyValues),b.stops&&(b.stops=b.stops.map(function(a){a=c.mixin({},a);a.opacity=m(a.transparency);delete a.transparency;return a})));return b},_readVariables:function(a,b){a&&(a=a.map(function(a){a=l.clone(a);a.type=v.fromJSON(a.type);"size"===a.type?a=this._readSizeInfo(a):"color"===a.type?a=this._readColorInfo(a):"opacity"===a.type&&(a=this._readOpacityInfo(a));return a},this));var c=b.rotationType;
if(b=b.rotationExpression)c={type:"rotation",rotationType:c},(b=b.match(this._rotationRE))&&b[1]&&(c.field=b[1],a||(a=[]),a.push(c));return a},_createCache:function(a){var b=a&&a.valueExpression,c=d.createSyntaxTree(b),c=d.createFunction(c),e=!(!a||!a.expression)||this._viewScaleRE.test(b);return{ipData:this._interpolateData(a),hasExpr:!!b,compiledFunc:c,isScaleDriven:e}},_processColorInfo:function(b){b&&(b.colors&&b.colors.forEach(function(c,d){c instanceof a||(b.colors[d]=new a(c))}),b.stops&&b.stops.forEach(function(c,
d){!c.color||c.color instanceof a||(b.stops[d].color=new a(c.color))}),this._sortStops(b.stops));return this._createCache(b)},_processOpacityInfo:function(a){this._sortStops(a&&a.stops);return this._createCache(a)},_processSizeInfo:function(a){a.stops&&Array.isArray(a.stops)?a.stops=this._processSizeInfoStops(a.stops):(a.minSize=a.minSize&&this._processSizeInfoSize(a.minSize),a.maxSize=a.maxSize&&this._processSizeInfoSize(a.maxSize));return{root:this._createCache(a),minSize:this._createCache(a.minSize),
maxSize:this._createCache(a.maxSize)}},_processSizeInfoSize:function(a){"object"===typeof a?a.stops=this._processSizeInfoStops(a.stops):a=n.toPt(a);return a},_processSizeInfoStops:function(a){a&&Array.isArray(a)&&(a.forEach(function(a){a.size=n.toPt(a.size)}),this._sortStops(a));return a},_sortStops:function(a){a&&Array.isArray(a)&&a.sort(function(a,b){return a.value-b.value})},_processRotationInfo:function(a){return this._createCache(a)},_getSize:function(a,b,f,g,h){var e=a.attributes,k=b.field,
m=b.stops,l=0,n=f&&f.hasExpr,q=f&&f.compiledFunc,r=f&&f.ipData,t=f&&f.isScaleDriven,u="number"===typeof a,v=u?a:null;if(k||t||n){var z=g&&g.scale,w=h?h[0]:b.minSize,y=h?h[1]:b.maxSize,A=b.minDataValue,D=b.maxDataValue,U=b.valueUnit||"unknown",T=b.valueRepresentation,l=b.scaleBy,da=b.normalizationField,Q=e?parseFloat(e[da]):void 0,P=g&&g.shape;t?v=null==z?this._getAverageValue(b):z:"number"!==typeof v&&(n?v=d.executeFunction(q,d.createExecContext(a,d.getViewInfo(g))):c.isFunction(k)?v=k.apply(this,
arguments):e&&(v=e[k]));if(null==v||da&&!u&&(isNaN(Q)||0===Q))return null;isNaN(Q)||u||(v/=Q);if(m)y=this._lookupData(v,r),v=y[0],w=y[1],v===w?l=m[v].size:(v=m[v].size,m=m[w].size,l=v+(m-v)*y[2]);else if(null!=w&&null!=y&&null!=A&&null!=D)v<=A?l=w:v>=D?l=y:(m=(v-A)/(D-A),"area"===l&&P?(w=(v="circle"===P)?x*Math.pow(w/2,2):w*w,m=w+m*((v?x*Math.pow(y/2,2):y*y)-w),l=v?2*Math.sqrt(m/x):Math.sqrt(m)):l=w+m*(y-w));else if("unknown"===U)null!=w&&null!=A?(w&&A?(m=v/A,l="circle"===P?2*Math.sqrt(m*Math.pow(w/
2,2)):"square"===P||"diamond"===P||"image"===P?Math.sqrt(m*Math.pow(w,2)):m*w):l=v+(w||A),l=l<w?w:l,null!=y&&l>y&&(l=y)):l=v;else{m=(g&&g.resolution?g.resolution:1)*p.meterIn[U];if("area"===T)l=Math.sqrt(v/x)/m,l*=2;else if(l=v/m,"radius"===T||"distance"===T)l*=2;null!=w&&l<w&&(l=w);null!=y&&l>y&&(l=y)}}else b&&(l=m&&m[0]&&m[0].size,null==l&&(l=b.minSize));return l=isNaN(l)?0:l},_getAverageValue:function(a){var b=a.stops,c;b?(c=b[0].value,a=b[b.length-1].value):(c=a.minDataValue||0,a=a.maxDataValue||
0);return(c+a)/2},_getColorComponent:function(a,b,f,g,h,m){var e=a.attributes,k=b&&b.field,l="number"===typeof a,p=l?a:null,n=f&&f.hasExpr,q=f&&f.compiledFunc,r=f&&f.ipData,u;if(k||n){var t=b.normalizationField,v=e?parseFloat(e[t]):void 0;"number"!==typeof p&&(n?p=d.executeFunction(q,d.createExecContext(a,d.getViewInfo(g))):c.isFunction(k)?p=k.apply(this,arguments):e&&(p=e[k]));null==p||t&&!l&&(isNaN(v)||0===v)||(isNaN(v)||l||(p/=v),u=h?this._getOpacity(p,b,r):this._getColor(p,b,r))}else b&&(e=b.stops,
h?(u=e&&e[0]&&e[0].opacity,null==u&&(u=b.opacityValues&&b.opacityValues[0])):u=e&&e[0]&&e[0].color||b.colors&&b.colors[0]);m&&(m.data=p,m.value=u);return m||u},_interpolateData:function(a){var b;if(a)if(a.colors||a.opacityValues){var c=(a.colors||a.opacityValues).length,d=a.minDataValue,e=(a.maxDataValue-d)/(c-1);b=[];for(a=0;a<c;a++)b[a]=d+a*e}else a.stops&&(b=a.stops.map(function(a){return a.value||0}));return b},_getOpacity:function(a,b,c){a=this._lookupData(a,c);var d;b=b||this.opacityInfo;a&&
(c=a[0],d=a[1],c===d?d=this._getOpacValue(b,c):(c=this._getOpacValue(b,c),b=this._getOpacValue(b,d),d=c+(b-c)*a[2]));return d},_getOpacValue:function(a,b){return a.opacityValues?a.opacityValues[b]:a.stops[b].opacity},_getColor:function(b,c,d){b=this._lookupData(b,d);var e;c=c||this.colorInfo;b&&(e=b[0],d=b[1],e=e===d?this._getColorObj(c,e):a.blendColors(this._getColorObj(c,e),this._getColorObj(c,d),b[2]),e=new a(e));return e},_getColorObj:function(a,b){return a.colors?a.colors[b]:a.stops[b].color},
_lookupData:function(a,b){var c;if(b){var d=0,e=b.length-1;b.some(function(b,c){if(a<b)return e=c,!0;d=c;return!1});c=[d,e,(a-b[d])/(b[e]-b[d])]}return c},_processForContext:function(a,b,c){if(b&&"web-scene"===b.origin){var d=null!=a.expression,e=null!=a.valueExpressionTitle&&"rotation"===a.type;b.messages&&(d&&b.messages.push(new k("property:unsupported",a.type+"VisualVariable.expression is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:c+
".expression",context:b})),e&&b.messages.push(new k("property:unsupported",a.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:c+".valueExpressionTitle",context:b})));d&&delete a.expression;e&&delete a.valueExpressionTitle}else"size"===a.type&&this._convertExpressionToArcade(a)},_writeRotationInfo:function(a,b,d){a&&(a=c.mixin({},a),this._processForContext(a,b,"visualVariables["+d+"]"),a.type=v.toJSON(a.type),
a=l.fixJson(a,!0));return a},_convertExpressionToArcade:function(a){a&&a.expression&&(a.valueExpression="$view.scale")},_writeSizeInfo:function(a,b,d){if(a){a=c.mixin({},a);this._processForContext(a,b,"string"===typeof d?d:"visualVariables["+d+"]");var e=a.minSize,f=a.maxSize;e&&(a.minSize="number"===typeof e?e:this._writeSizeInfo(e,b,"visualVariables["+d+"].minSize"));f&&(a.maxSize="number"===typeof f?f:this._writeSizeInfo(f,b,"visualVariables["+d+"].maxSize"));b=a.legendOptions;d=a.axis;a.type=
v.toJSON(a.type);d&&(a.axis=z.toJSON(d));b&&(a.legendOptions=c.mixin({},b),b=b.customValues)&&(a.legendOptions.customValues=b.slice(0));a.stops&&(a.stops=a.stops.map(function(a){a=c.mixin({},a);null===a.label&&delete a.label;return a}));a=l.fixJson(a,!0)}return a},_writeColorInfo:function(b,d,f){b&&(b=c.mixin({},b),this._processForContext(b,d,"visualVariables["+f+"]"),b.type=v.toJSON(b.type),b.colors&&(b.colors=b.colors.map(function(b){return a.toJSON(b)})),b.stops&&(b.stops=b.stops.map(function(b){b=
c.mixin({},b);b.color&&(b.color=a.toJSON(b.color));null==b.value&&(b.value=0);null===b.label&&delete b.label;return b})),b.legendOptions&&(b.legendOptions=c.mixin({},b.legendOptions)),b=l.fixJson(b,!0));return b},_writeOpacityInfo:function(a,b,d){var e;a&&(e=c.mixin({},a),this._processForContext(e,b,"visualVariables["+d+"]"),e.type=v.toJSON(e.type),e.opacityValues&&(e.transparencyValues=e.opacityValues.map(r),delete e.opacityValues),e.stops&&(e.stops=e.stops.map(function(a){a=c.mixin({},a);a.transparency=
r(a.opacity);delete a.opacity;null===a.label&&delete a.label;return a})),e.legendOptions&&(e.legendOptions=c.mixin({},e.legendOptions)),e=l.fixJson(e,!0));return e}})})},"esri/renderers/support/utils":function(){define(["dojo/_base/lang","dojo/date/locale","../../Color","../../core/numberUtils","dojo/i18n!dojo/cldr/nls/gregorian"],function(b,f,q,g,n){function l(a){return a&&a.map(function(a){return new q(a)})}function k(a,b,c){var d="";0===b?d=h.lt+" ":b===c&&(d=h.gt+" ");return d+a}var d={},h={lte:"\x3c\x3d",
gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},c={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},a={millisecond:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},second:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},minute:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},hour:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},day:{selector:"date",dateOptions:{formatLength:"long"}},month:{selector:"date",
dateOptions:{formatLength:"long"}},year:{selector:"date",dateOptions:{selector:"year"}}},p={formatLength:"short",fullYear:!0},u={formatLength:"short"};b.mixin(d,{meterIn:{inches:1/.0254,feet:1/.3048,"us-feet":3.28084,yards:1/.9144,miles:1/1609.344,"nautical-miles":1/1852,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,"decimal-degrees":180/20015077},timelineDateFormatOptions:{selector:"date",dateOptions:{formatLength:"short",fullYear:!0}},formatDate:function(a,c){var d=[];null==
a||a instanceof Date||(a=new Date(a));c=c||{};c=b.mixin({},c);var g=c.selector?c.selector.toLowerCase():null,h=!g||-1<g.indexOf("time"),g=!g||-1<g.indexOf("date");h&&(c.timeOptions=c.timeOptions||u,c.timeOptions&&(c.timeOptions=b.mixin({},c.timeOptions),c.timeOptions.selector=c.timeOptions.selector||"time",d.push(c.timeOptions)));g&&(c.dateOptions=c.dateOptions||p,c.dateOptions&&(c.dateOptions=b.mixin({},c.dateOptions),c.dateOptions.selector=c.dateOptions.selector||"date",d.push(c.dateOptions)));
d&&d.length?(d=d.map(function(b){return f.format(a,b)}),c=1==d.length?d[0]:n["dateTimeFormat-medium"].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return d[b]})):c=f.format(a);return c},createColorStops:function(a){var b=a.values,c=a.colors,f=a.labelIndexes,h=a.isDate,m=a.dateFormatOptions;a=[];return a=b.map(function(a,l){var e=null;if(!f||-1<f.indexOf(l)){var p;(p=h?d.formatDate(a,m):g.format(a))&&(e=k(p,l,b.length-1))}return{value:a,color:c[l],label:e}})},updateColorStops:function(a){var b=
a.stops,c=a.changes,f=a.isDate,h=a.dateFormatOptions,m=[],e,l=b.map(function(a){return a.value});c.forEach(function(a){m.push(a.index);l[a.index]=a.value});e=g.round(l,{indexes:m});b.forEach(function(a,c){a.value=l[c];if(null!=a.label){var m,p=null;(m=f?d.formatDate(e[c],h):g.format(e[c]))&&(p=k(m,c,b.length-1));a.label=p}})},createClassBreakLabel:function(a){var b=a.minValue,c=a.maxValue,d=a.isFirstBreak?"":h.gt+" ";a="percent-of-total"===a.normalizationType?h.pct:"";b=null==b?"":g.format(b);c=null==
c?"":g.format(c);return d+b+a+" "+h.ld+" "+c+a},setLabelsForClassBreaks:function(a){var b=a.classBreakInfos,c=a.classificationMethod,f=a.normalizationType,h=[];b&&b.length&&("standard-deviation"===c?console.log("setLabelsForClassBreaks: cannot set labels for class breaks generated using 'standard-deviation' method."):a.round?(h.push(b[0].minValue),b.forEach(function(a){h.push(a.maxValue)}),h=g.round(h),b.forEach(function(a,b){a.label=d.createClassBreakLabel({minValue:0===b?h[0]:h[b],maxValue:h[b+
1],isFirstBreak:0===b,normalizationType:f})})):b.forEach(function(a,b){a.label=d.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===b,normalizationType:f})}))},updateClassBreak:function(a){var b=a.classBreaks,c=a.normalizationType,f=a.change,g=f.index,f=f.value,h=-1,e=-1,k=b.length;"standard-deviation"===a.classificationMethod?console.log("updateClassBreak: cannot update labels for class breaks generated using 'standard-deviation' method."):(0===g?h=g:g===k?e=g-1:(e=g-
1,h=g),-1<h&&h<k&&(a=b[h],a.minValue=f,a.label=d.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===h,normalizationType:c})),-1<e&&e<k&&(a=b[e],a.maxValue=f,a.label=d.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===e,normalizationType:c})))},calculateDateFormatInterval:function(a){var b,d,f=a.length,g,h,e,k,l,p,n=Infinity,q;a=a.map(function(a){return new Date(a)});for(b=0;b<f-1;b++){g=a[b];e=[];l=Infinity;p="";for(d=b+1;d<f;d++)h=a[d],h=
g.getFullYear()!==h.getFullYear()&&"year"||g.getMonth()!==h.getMonth()&&"month"||g.getDate()!==h.getDate()&&"day"||g.getHours()!==h.getHours()&&"hour"||g.getMinutes()!==h.getMinutes()&&"minute"||g.getSeconds()!==h.getSeconds()&&"second"||"millisecond",k=c[h],k<l&&(l=k,p=h),e.push(h);l<n&&(n=l,q=p)}return q},createUniqueValueLabel:function(b){var c=b.value,f=b.fieldInfo,h=b.domain;b=b.dateFormatInterval;var k=String(c);(h=h&&h.codedValues?h.getName(c):null)?k=h:"number"===typeof c&&(k=f&&"date"===
f.type?d.formatDate(c,b&&a[b]):g.format(c));return k},cloneColorVariable:function(a){var c;a&&(c=b.mixin({},a),c.colors=l(c.colors),c.stops=c.stops&&c.stops.map(function(a){a=b.mixin({},a);a.color&&(a.color=new q(a.color));return a}),c.legendOptions&&(c.legendOptions=b.mixin({},c.legendOptions)));return c},cloneOpacityVariable:function(a){var c;if(a){c=b.mixin({},a);if(a=c.opacityValues)c.opacityValues=a.slice(0);if(a=c.stops)c.stops=a.map(function(a){return b.mixin({},a)});if(a=c.legendOptions)c.legendOptions=
b.mixin({},a)}return c},cloneSizeVariable:function(a){var c;a&&(c=b.mixin({},a),c.stops&&(c.stops=c.stops.map(function(a){return b.mixin({},a)})),(a=c.minSize)&&"object"===typeof a&&(c.minSize=d.cloneSizeVariable(a)),(a=c.maxSize)&&"object"===typeof a&&(c.maxSize=d.cloneSizeVariable(a)),a=c.legendOptions)&&(c.legendOptions=b.mixin({},a),a=a.customValues)&&(c.legendOptions.customValues=a.slice(0));return c}});return d})},"esri/core/numberUtils":function(){define(["dojo/number","dojo/i18n!dojo/cldr/nls/number"],
function(b,f){function q(b,f){return b-f}var g=/^-?(\d+)(\.(\d+))?$/i,n=new RegExp("\\"+f.decimal+"0+$","g"),l=/(\d)0*$/g,k={numDigits:function(b){var d=String(b),c=d.match(g);b={integer:0,fractional:0};c&&c[1]?(b.integer=c[1].split("").length,b.fractional=c[3]?c[3].split("").length:0):-1<d.toLowerCase().indexOf("e")&&(c=d.split("e"),d=c[0],c=c[1],d&&c&&(d=Number(d),c=Number(c),(b=0<c)||(c=Math.abs(c)),d=k.numDigits(d),b?(d.integer+=c,d.fractional=c>d.fractional?0:d.fractional-c):(d.fractional+=c,
d.integer=c>d.integer?1:d.integer-c),b=d));return b},percentChange:function(b,f,c,a){var d={previous:null,next:null},g;null!=c&&(g=b-c,d.previous=Math.floor(Math.abs(100*(f-c-g)/g)));null!=a&&(g=a-b,d.next=Math.floor(Math.abs(100*(a-f-g)/g)));return d},round:function(b,f){b=b.slice(0);var c,a,d,g,h,l,n,x,r=f&&null!=f.tolerance?f.tolerance:2,m=f&&f.indexes,e=f&&null!=f.strictBounds?f.strictBounds:!1;if(m)m.sort(q);else for(m=[],h=0;h<b.length;h++)m.push(h);for(h=0;h<m.length;h++)if(x=m[h],f=b[x],c=
0===x?null:b[x-1],a=x===b.length-1?null:b[x+1],d=k.numDigits(f),d=d.fractional){l=0;for(n=!1;l<=d&&!n;){g=f;n=l;var w=void 0,y=void 0,w=Number(g.toFixed(n));w<g?y=w+1/Math.pow(10,n):(y=w,w-=1/Math.pow(10,n));w=Number(w.toFixed(n));y=Number(y.toFixed(n));g=[w,y];g=e&&0===h?g[1]:g[0];n=r;var w=k.percentChange(f,g,c,a),A=y=void 0,y=void 0,y=null==w.previous||w.previous<=n,A=null==w.next||w.next<=n;n=y=y&&A||w.previous+w.next<=2*n;l++}n&&(b[x]=g)}return b},format:function(d,f){f=f||{places:20,round:-1};
(d=b.format(d,f))&&(d=d.replace(l,"$1").replace(n,""));return d}};return k})},"esri/renderers/support/AuthoringInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ./AuthoringInfoVisualVariable".split(" "),function(b,f,q,g,n,l,k,d){var h=l({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",
esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),c=l({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size"});return function(a){function b(b){b=a.call(this)||this;b.lengthUnit=null;b.visualVariables=null;return b}q(b,a);f=b;Object.defineProperty(b.prototype,"classificationMethod",{get:function(){if("class-breaks-size"===this.type||"class-breaks-color"===this.type){var a=this._get("classificationMethod");return a?
a:"manual"}return null},set:function(a){this._set("classificationMethod",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"fields",{get:function(){return"predominance"===this.type?this._get("fields"):null},set:function(a){this._set("fields",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"standardDeviationInterval",{get:function(){return"standard-deviation"===this.classificationMethod?this._get("standardDeviationInterval"):null},set:function(a){this._set("standardDeviationInterval",
a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"type",{get:function(){return this._get("type")},set:function(a){var b=a;"classed-size"===a?b="class-breaks-size":"classed-color"===a&&(b="class-breaks-color");this._set("type",b)},enumerable:!0,configurable:!0});b.prototype.clone=function(){return new f({classificationMethod:this.classificationMethod,fields:this.fields&&this.fields.slice(0),lengthUnit:this.lengthUnit,standardDeviationInterval:this.standardDeviationInterval,type:this.type,
visualVariables:this.visualVariables&&this.visualVariables.map(function(a){return a.clone()})})};g([k.property({type:String,value:null,dependsOn:["type"],json:{read:h.read,write:h.write}})],b.prototype,"classificationMethod",null);g([k.property({type:[String],value:null,dependsOn:["type"],json:{write:!0}})],b.prototype,"fields",null);g([k.property({type:String,json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],b.prototype,"lengthUnit",void 0);g([k.property({type:Number,value:null,
dependsOn:["classificationMethod"],json:{write:!0}})],b.prototype,"standardDeviationInterval",null);g([k.property({type:String,value:null,json:{read:c.read,write:c.write}})],b.prototype,"type",null);g([k.property({type:[d],json:{write:!0}})],b.prototype,"visualVariables",void 0);return b=f=g([k.subclass("esri.renderers.support.AuthoringInfo")],b);var f}(k.declared(n))})},"esri/renderers/support/AuthoringInfoVisualVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/decorators/cast".split(" "),
function(b,f,q,g,n,l,k,d){var h=l({percentTotal:"percent-of-total"}),c=l({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity"}),a={key:function(a){return"number"===typeof a?"number":"string"},typeMap:{number:Number,string:String},base:null};return function(b){function f(a){a=b.call(this)||this;a.endTime=null;a.field=null;a.maxSliderValue=null;a.minSliderValue=null;a.startTime=null;a.type=null;a.units=null;return a}q(f,b);l=f;f.prototype.castEndTime=function(a){return"string"===typeof a||
"number"===typeof a?a:null};f.prototype.castStartTime=function(a){return"string"===typeof a||"number"===typeof a?a:null};Object.defineProperty(f.prototype,"style",{get:function(){return"color"===this.type?this._get("style"):null},set:function(a){this._set("style",a)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"theme",{get:function(){return"color"===this.type?this._get("theme")||"high-to-low":null},set:function(a){this._set("theme",a)},enumerable:!0,configurable:!0});f.prototype.clone=
function(){return new l({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})};g([k.property({types:a,json:{write:!0}})],f.prototype,"endTime",void 0);g([d.cast("endTime")],f.prototype,"castEndTime",null);g([k.property({type:String,json:{write:!0}})],f.prototype,"field",void 0);g([k.property({type:Number,json:{write:!0}})],f.prototype,"maxSliderValue",
void 0);g([k.property({type:Number,json:{write:!0}})],f.prototype,"minSliderValue",void 0);g([k.property({types:a,json:{write:!0}})],f.prototype,"startTime",void 0);g([d.cast("startTime")],f.prototype,"castStartTime",null);g([k.property({type:String,value:null,dependsOn:["type"],json:{read:h.read,write:h.write}})],f.prototype,"style",null);g([k.property({type:String,value:null,dependsOn:["type"],json:{write:!0}})],f.prototype,"theme",null);g([k.property({type:String,json:{read:c.read,write:c.write}})],
f.prototype,"type",void 0);g([k.property({type:String,json:{write:!0}})],f.prototype,"units",void 0);return f=l=g([k.subclass("esri.renderers.support.AuthoringInfoVisualVariable")],f);var l}(k.declared(n))})},"esri/renderers/support/LegendOptions":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(b,f,q,g,n,l){Object.defineProperty(f,"__esModule",{value:!0});
b=function(b){function d(){var c=null!==b&&b.apply(this,arguments)||this;c.title=null;return c}q(d,b);f=d;d.prototype.clone=function(){return new f({title:this.title})};g([l.property({type:String,json:{write:!0}})],d.prototype,"title",void 0);return d=f=g([l.subclass("esri.renderers.support.LegendOptions")],d);var f}(l.declared(n));f.LegendOptions=b;f.default=b})},"esri/renderers/support/ClassBreakInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),
function(b,f,q,g,n,l,k,d){Object.defineProperty(f,"__esModule",{value:!0});b=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;a.description=null;a.label=null;a.minValue=null;a.maxValue=0;a.symbol=null;return a}q(c,b);a=c;c.prototype.clone=function(){return new a({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})};g([l.property({type:String,json:{write:!0}})],c.prototype,"description",void 0);
g([l.property({type:String,json:{write:!0}})],c.prototype,"label",void 0);g([l.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],c.prototype,"minValue",void 0);g([l.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],c.prototype,"maxValue",void 0);g([l.property({types:d.rendererTypes,json:{origins:{"web-scene":{read:k.read,write:{target:{symbol:{types:d.rendererTypes3D}},writer:k.writeTarget}}},read:k.read,write:k.writeTarget}})],
c.prototype,"symbol",void 0);return c=a=g([l.subclass("esri.renderers.support.ClassBreakInfo")],c);var a}(l.declared(n));f.ClassBreakInfo=b;f.default=b})},"esri/renderers/HeatmapRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/lang ../core/accessorSupport/decorators ./Renderer ./support/HeatmapColorStop".split(" "),function(b,f,q,g,n,l,k,d,h){return function(b){function a(a){a=b.call(this)||this;a.blurRadius=10;a.colorStops=
[new h.HeatmapColorStop({ratio:0,color:new n("rgba(255, 140, 0, 0)")}),new h.HeatmapColorStop({ratio:.75,color:new n("rgba(255, 140, 0, 1)")}),new h.HeatmapColorStop({ratio:.9,color:new n("rgba(255, 0,   0, 1)")})];a.field=null;a.fieldOffset=0;a.maxPixelIntensity=100;a.minPixelIntensity=0;a.type="heatmap";return a}q(a,b);c=a;a.prototype.clone=function(){return new c({blurRadius:this.blurRadius,colorStops:l.clone(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})};
g([k.property({type:Number,json:{write:!0}})],a.prototype,"blurRadius",void 0);g([k.property({type:[h.HeatmapColorStop],json:{write:!0}})],a.prototype,"colorStops",void 0);g([k.property({type:String,json:{write:!0}})],a.prototype,"field",void 0);g([k.property({type:Number,json:{write:{overridePolicy:function(a,b,c){return{enabled:null==c}}}}})],a.prototype,"fieldOffset",void 0);g([k.property({type:Number,json:{write:!0}})],a.prototype,"maxPixelIntensity",void 0);g([k.property({type:Number,json:{write:!0}})],
a.prototype,"minPixelIntensity",void 0);g([k.property({dependsOn:["field"],readOnly:!0})],a.prototype,"requiredFields",void 0);return a=c=g([k.subclass("esri.renderers.HeatmapRenderer")],a);var c}(k.declared(d))})},"esri/renderers/support/HeatmapColorStop":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(b,f,q,g,n,l,k){Object.defineProperty(f,
"__esModule",{value:!0});b=function(b){function d(a){a=b.call(this)||this;a.color=null;a.ratio=null;return a}q(d,b);c=d;d.prototype.clone=function(){return new c({color:this.color,ratio:this.ratio})};g([k.property({type:n,json:{write:!0}})],d.prototype,"color",void 0);g([k.property({type:Number,json:{write:!0}})],d.prototype,"ratio",void 0);return d=c=g([k.subclass("esri.renderers.support.HeatmapColorStop")],d);var c}(k.declared(l));f.HeatmapColorStop=b;f.default=b})},"esri/renderers/SimpleRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Renderer ../symbols/support/jsonUtils ../symbols/support/typeUtils".split(" "),
function(b,f,q,g,n,l,k,d,h){return function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.description=null;a.label=null;a.symbol=null;a.type="simple";return a}q(a,b);c=a;a.prototype.writeSymbolWebScene=function(a,b,c,f){d.writeTarget(a,b,c,f)};a.prototype.writeSymbol=function(a,b,c,f){d.writeTarget(a,b,c,f)};a.prototype.readSymbol=function(a,b,c){return d.read(a,b,c)};a.prototype.getSymbol=function(a,b){return this.symbol};a.prototype.getSymbols=function(){return this.symbol?[this.symbol]:
[]};a.prototype.clone=function(){return new c({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:n.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};g([l.property({type:String,json:{write:!0}})],a.prototype,"description",void 0);g([l.property({type:String,json:{write:!0}})],a.prototype,"label",void 0);g([l.property({types:h.rendererTypes})],a.prototype,"symbol",void 0);g([l.writer("web-scene","symbol",{symbol:{types:h.rendererTypes3D}})],
a.prototype,"writeSymbolWebScene",null);g([l.writer("symbol")],a.prototype,"writeSymbol",null);g([l.reader("symbol")],a.prototype,"readSymbol",null);return a=c=g([l.subclass("esri.renderers.SimpleRenderer")],a);var c}(l.declared(k))})},"esri/renderers/UniqueValueRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../symbols ../core/arrayUtils ../core/Error ../core/lang ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../portal/Portal ./Renderer ./support/diffUtils ./support/LegendOptions ./support/UniqueValueInfo ../support/arcadeUtils ../symbols/support/jsonUtils ../symbols/support/styleUtils ../symbols/support/typeUtils".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z,t,x,r,m,e,w,y){var A=c.getLogger("esri.renderers.UniqueValueRenderer"),D=u.ensureType(r.default);return function(b){function c(a){a=b.call(this)||this;a._valueInfoMap={};a._isDefaultSymbolDerived=!1;a.type="unique-value";a.backgroundFillSymbol=null;a.field=null;a.field2=null;a.field3=null;a.valueExpression=null;a.valueExpressionTitle=null;a.legendOptions=null;a.defaultLabel=null;a.fieldDelimiter=null;a.portal=null;a.styleOrigin=null;a.diff={uniqueValueInfos:function(a,
b){if(a||b){if(!a||!b)return{type:"complete",oldValue:a,newValue:b};for(var c=!1,d={type:"collection",added:[],removed:[],changed:[],unchanged:[]},e=function(e){var f=k.find(a,function(a){return a.value===b[e].value});f?t.diff(f,b[e])?d.changed.push({type:"complete",oldValue:f,newValue:b[e]}):d.unchanged.push({oldValue:f,newValue:b[e]}):d.added.push(b[e]);c=!0},f=0;f<b.length;f++)e(f);e=function(e){k.find(b,function(b){return b.value===a[e].value})||(d.removed.push(a[e]),c=!0)};for(f=0;f<a.length;f++)e(f);
return c?d:void 0}}};a._set("uniqueValueInfos",[]);return a}q(c,b);f=c;c.prototype.writeType=function(a,b,c,d){b.type="uniqueValue"};c.prototype.writeBackgroundFillSymbolWebScene=function(a,b,c,d){e.writeTarget(a,b,c,d)};c.prototype.castField=function(a){return null==a?a:"function"===typeof a?a:u.ensureString(a)};c.prototype.writeField=function(a,b,c,e){"string"===typeof a?b[c]=a:e&&e.messages?e.messages.push(new d("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):
A.error(".field: cannot write field to JSON since it's not a string value")};Object.defineProperty(c.prototype,"compiledFunc",{get:function(){return m.createFunction(this.valueExpression)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"defaultSymbol",{set:function(a){this._isDefaultSymbolDerived=!1;this._set("defaultSymbol",a)},enumerable:!0,configurable:!0});c.prototype.readDefaultSymbol=function(a,b,c){return e.read(a,b,c)};c.prototype.writeDefaultSymbolWebScene=function(a,b,
c,d){this._isDefaultSymbolDerived||e.writeTarget(a,b,c,d)};c.prototype.writeDefaultSymbol=function(a,b,c,d){this._isDefaultSymbolDerived||e.writeTarget(a,b,c,d)};c.prototype.readPortal=function(a,b,c){return c.portal||v.getDefault()};c.prototype.readStyleOrigin=function(b,c,d){if(c.styleName)return Object.freeze({styleName:c.styleName});if(c.styleUrl)return b=a.read(c.styleUrl,d),Object.freeze({styleUrl:b})};c.prototype.writeStyleOrigin=function(b,c,d,e){b.styleName?c.styleName=b.styleName:b.styleUrl&&
(c.styleUrl=a.write(b.styleUrl,e),a.isAbsolute(c.styleUrl)&&(c.styleUrl=a.normalize(c.styleUrl)))};Object.defineProperty(c.prototype,"uniqueValueInfos",{set:function(a){this.styleOrigin?A.error("#uniqueValueInfos\x3d","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",a),this._updateValueInfoMap())},enumerable:!0,configurable:!0});c.prototype.addUniqueValueInfo=function(a,b){this.styleOrigin?A.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):
(a="object"===typeof a?D(a):new r.default({value:a,symbol:b}),this.uniqueValueInfos.push(a),this._valueInfoMap[a.value]=a)};c.prototype.removeUniqueValueInfo=function(a){if(this.styleOrigin)A.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(var b=0;b<this.uniqueValueInfos.length;b++)if(this.uniqueValueInfos[b].value===a+""){delete this._valueInfoMap[a];this.uniqueValueInfos.splice(b,1);break}};c.prototype.getUniqueValueInfo=
function(a,b){var c=this.field,d=a.attributes,e;this.valueExpression?e=m.executeFunction(this.compiledFunc,m.createExecContext(a,m.getViewInfo(b))):"function"!==typeof c&&this.field2?(a=this.field2,b=this.field3,e=[],c&&e.push(d[c]),a&&e.push(d[a]),b&&e.push(d[b]),e=e.join(this.fieldDelimiter||"")):"function"===typeof c?e=c(a):c&&(e=d[c]);return this._valueInfoMap[e+""]};c.prototype.getSymbol=function(a,b){return(a=this.getUniqueValueInfo(a,b))&&a.symbol||this.defaultSymbol};c.prototype.getSymbols=
function(){for(var a=[],b=0,c=this.uniqueValueInfos;b<c.length;b++){var d=c[b];d.symbol&&a.push(d.symbol)}this.defaultSymbol&&a.push(this.defaultSymbol);return a};c.prototype.clone=function(){var a=new f({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:h.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:h.clone(this.visualVariables),legendOptions:h.clone(this.legendOptions),
authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:h.clone(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(a._isDefaultSymbolDerived=!0);a._set("portal",this.portal);var b=h.clone(this.uniqueValueInfos);this.styleOrigin&&(a._set("styleOrigin",Object.freeze(h.clone(this.styleOrigin))),Object.freeze(b));a._set("uniqueValueInfos",b);a._updateValueInfoMap();return a};c.prototype.collectRequiredFields=function(a){this.inherited(arguments);[this.field,this.field2,
this.field3].forEach(function(b){b&&"string"===typeof b&&(a[b]=!0)});this.valueExpression&&m.extractFieldNames(this.valueExpression).forEach(function(b){a[b]=!0})};c.prototype.populateFromStyle=function(){var a=this;return w.fetchStyle(this.styleOrigin,{portal:this.portal}).then(function(b){var c=[];a._valueInfoMap={};b&&b.data&&Array.isArray(b.data.items)&&b.data.items.forEach(function(d){var e=new l.WebStyleSymbol({styleUrl:b.styleUrl,styleName:b.styleName,portal:a.portal,name:d.name});a.defaultSymbol||
d.name!==b.data.defaultItem||(a.defaultSymbol=e,a._isDefaultSymbolDerived=!0);e=new r.default({value:d.name,symbol:e});c.push(e);a._valueInfoMap[d.name]=e});a._set("uniqueValueInfos",Object.freeze(c));!a.defaultSymbol&&a.uniqueValueInfos.length&&(a.defaultSymbol=a.uniqueValueInfos[0].symbol,a._isDefaultSymbolDerived=!0);return a})};c.prototype._updateValueInfoMap=function(){var a=this;this._valueInfoMap={};this.uniqueValueInfos.forEach(function(b){return a._valueInfoMap[b.value+""]=b})};c.fromPortalStyle=
function(a,b){var c=new f(b&&b.properties);c._set("styleOrigin",Object.freeze({styleName:a}));c._set("portal",b&&b.portal||v.getDefault());b=c.populateFromStyle();b.catch(function(b){A.error("#fromPortalStyle('"+a+"'[, ...])","Failed to create unique value renderer from style name",b)});return b};c.fromStyleUrl=function(a,b){b=new f(b&&b.properties);b._set("styleOrigin",Object.freeze({styleUrl:a}));b=b.populateFromStyle();b.catch(function(b){A.error("#fromStyleUrl('"+a+"'[, ...])","Failed to create unique value renderer from style URL",
b)});return b};g([p.property()],c.prototype,"type",void 0);g([p.writer("type")],c.prototype,"writeType",null);g([p.property({types:{base:l.BaseSymbol,key:"type",typeMap:{"simple-fill":y.rendererTypes.typeMap["simple-fill"],"picture-fill":y.rendererTypes.typeMap["picture-fill"],"polygon-3d":y.rendererTypes.typeMap["polygon-3d"]}},json:{read:e.read,write:e.writeTarget}})],c.prototype,"backgroundFillSymbol",void 0);g([p.writer("web-scene","backgroundFillSymbol",{backgroundFillSymbol:{type:l.PolygonSymbol3D}})],
c.prototype,"writeBackgroundFillSymbolWebScene",null);g([p.property({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],c.prototype,"field",void 0);g([p.cast("field")],c.prototype,"castField",null);g([p.writer("field")],c.prototype,"writeField",null);g([p.property({type:String,json:{write:!0}})],c.prototype,"field2",void 0);g([p.property({type:String,json:{write:!0}})],c.prototype,"field3",void 0);g([p.property({type:String,json:{write:!0}})],c.prototype,"valueExpression",void 0);
g([p.property({type:String,json:{write:!0}})],c.prototype,"valueExpressionTitle",void 0);g([p.property({dependsOn:["valueExpression"]})],c.prototype,"compiledFunc",null);g([p.property({type:x.default,json:{write:!0}})],c.prototype,"legendOptions",void 0);g([p.property({type:String,json:{write:!0}})],c.prototype,"defaultLabel",void 0);g([p.property({types:y.rendererTypes})],c.prototype,"defaultSymbol",null);g([p.reader("defaultSymbol")],c.prototype,"readDefaultSymbol",null);g([p.writer("web-scene",
"defaultSymbol",{defaultSymbol:{types:y.rendererTypes3D}})],c.prototype,"writeDefaultSymbolWebScene",null);g([p.writer("defaultSymbol")],c.prototype,"writeDefaultSymbol",null);g([p.property({type:String,json:{write:!0}})],c.prototype,"fieldDelimiter",void 0);g([p.property({type:v,readOnly:!0})],c.prototype,"portal",void 0);g([p.reader("portal",["styleName"])],c.prototype,"readPortal",null);g([p.property({readOnly:!0})],c.prototype,"styleOrigin",void 0);g([p.reader("styleOrigin",["styleName","styleUrl"])],
c.prototype,"readStyleOrigin",null);g([p.writer("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],c.prototype,"writeStyleOrigin",null);g([p.property({type:[r.default],json:{write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],c.prototype,"uniqueValueInfos",null);g([p.property({dependsOn:["field","field2","field3","valueExpression"],readOnly:!0})],c.prototype,"requiredFields",void 0);g([n(1,p.cast(y.ensureType))],c.prototype,"addUniqueValueInfo",null);
return c=f=g([p.subclass("esri.renderers.UniqueValueRenderer")],c);var f}(p.declared(z))})},"esri/core/arrayUtils":function(){define(["require","exports"],function(b,f){function q(b,f,c){for(var a=b.length,d=0;d<a;d++)if(f.call(c,b[d],d,b))return d;return-1}function g(b,f,c){void 0===c&&(c=b.length);for(var a=Math.max(0,k-5),d=-1,g=a;g<c;++g)if(b[g]===f){d=g;break}if(-1===d){for(g=0;g<a;++g)if(b[g]===f){d=g;break}if(-1===d)return}b[d]=b[c-1];b.pop();k=d;return f}function n(b,f){return-1===b.indexOf(f)}
function l(b,f,c){return!b.some(f.bind(null,c))}Object.defineProperty(f,"__esModule",{value:!0});f.findIndex=q;f.find=function(b,f,c){for(var a=b.length,d=0;d<a;d++){var g=b[d];if(f.call(c,g,d,b))return g}};f.equals=function(b,f,c){if(!b&&!f)return!0;if(!b||!f||b.length!==f.length)return!1;if(c)for(var a=0;a<b.length;a++){if(!c(b[a],f[a]))return!1}else for(a=0;a<b.length;a++)if(b[a]!==f[a])return!1;return!0};f.difference=function(b,f,c){var a;c?(a=f.filter(l.bind(null,b,c)),b=b.filter(l.bind(null,
f,c))):(a=f.filter(n.bind(null,b)),b=b.filter(n.bind(null,f)));return{added:a,removed:b}};f.intersect=function(b,f,c){return b&&f?c?b.filter(function(a){return-1<q(f,function(b){return c(a,b)})}):b.filter(function(a){return-1<f.indexOf(a)}):[]};f.constant=function(b,f){for(var c=Array(b),a=0;a<b;a++)c[a]=f;return c};f.range=function(b,f){void 0===f&&(f=b,b=0);for(var c=Array(f-b),a=b;a<f;a++)c[a-b]=a;return c};f.binaryIndexOf=function(b,f,c){for(var a=b.length,d=0,g=a-1;d<g;){var h=d+Math.floor((g-
d)/2);f>b[h]?d=h+1:g=h}g=b[d];return c?f>=b[a-1]?-1:g===f?d:d-1:g===f?d:-1};f.removeUnordered=g;f.removeUnorderedMany=function(b,f,c){void 0===c&&(c=b.length);var a=[];f.forEach(function(d){void 0!==g(b,d,c)&&(a.push(d),--c)});return a};var k=0;f.keysOfMap=function(b){var d=[];b.forEach(function(b,a){return d.push(a)});return d};f.keysOfSet=function(b){var d=[];b.forEach(function(b){return d.push(b)});return d}})},"esri/renderers/support/diffUtils":function(){define("require exports dojo/_base/lang ../../core/Accessor ../../core/Collection ../../core/accessorSupport/utils".split(" "),
function(b,f,q,g,n,l){function k(a){return a instanceof n?Object.keys(a.items):a instanceof g?l.getProperties(a).keys():a?Object.keys(a):[]}function d(a,b){return a instanceof n?a.items[b]:a[b]}function h(a,b){return Array.isArray(a)&&Array.isArray(b)?a.length!==b.length:!1}function c(a){return a?a.declaredClass:null}function a(b,f){var l=b.diff;if(l&&q.isFunction(l))return l(b,f);var n=k(b),u=k(f);if(0!==n.length||0!==u.length){if(!n.length||!u.length||h(b,f))return{type:"complete",oldValue:b,newValue:f};
var r=u.filter(function(a){return-1===n.indexOf(a)}),m=n.filter(function(a){return-1===u.indexOf(a)}),r=n.filter(function(a){return-1<u.indexOf(a)&&d(b,a)!==d(f,a)}).concat(r,m).sort();if((m=c(b))&&-1<p.indexOf(m)&&r.length)return{type:"complete",oldValue:b,newValue:f};var e,m=b instanceof g&&f instanceof g,v;for(v in r){var y=r[v],A=d(b,y),D=d(f,y),B=void 0;!m&&(q.isFunction(A)||q.isFunction(D))||A===D||null==A&&null==D||!(B=l&&l[y]&&q.isFunction(l[y])?l[y](A,D):"object"===typeof A&&"object"===typeof D&&
c(A)===c(D)?a(A,D):{type:"complete",oldValue:A,newValue:D})||(e=e||{type:"partial",diff:{}},e.diff[y]=B)}return e}}Object.defineProperty(f,"__esModule",{value:!0});var p=["esri.Color","esri.portal.Portal"];f.diff=function(b,d){if(!q.isFunction(b)&&!q.isFunction(d)&&(b||d))return!b||!d||"object"===typeof b&&"object"===typeof b&&c(b)!==c(d)?{type:"complete",oldValue:b,newValue:d}:a(b,d)}})},"esri/renderers/support/UniqueValueInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),
function(b,f,q,g,n,l,k,d){Object.defineProperty(f,"__esModule",{value:!0});b=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;a.description=null;a.label=null;a.symbol=null;a.value=null;return a}q(c,b);a=c;c.prototype.clone=function(){return new a({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})};g([l.property({type:String,json:{write:!0}})],c.prototype,"description",void 0);g([l.property({type:String,json:{write:!0}})],
c.prototype,"label",void 0);g([l.property({types:d.rendererTypes,json:{origins:{"web-scene":{read:k.read,write:{target:{symbol:{types:d.rendererTypes3D}},writer:k.writeTarget}}},read:k.read,write:k.writeTarget}})],c.prototype,"symbol",void 0);g([l.property({type:String,json:{write:!0}})],c.prototype,"value",void 0);return c=a=g([l.subclass("esri.renderers.support.UniqueValueInfo")],c);var a}(l.declared(n));f.UniqueValueInfo=b;f.default=b})},"esri/symbols/support/styleUtils":function(){define("require exports ../../request ../../symbols ../../core/Error ../../core/promiseUtils ../../core/urlUtils ../../portal/Portal ../../portal/PortalQueryParams ./jsonUtils ./StyleOrigin ./Thumbnail".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p){function u(a,b){return r(a).then(function(b){return{data:b.data,baseUrl:k.removeFile(a),styleUrl:a}})}function v(a,b){b=b.portal||d.getDefault();var c,e=b.url+" - "+(b.user&&b.user.username)+" - "+a;m[e]||(m[e]=z(a,b).then(function(a){c=a;return a.fetchData()}).then(function(b){return{data:b,baseUrl:c.itemUrl,styleName:a}}));return m[e]}function z(a,b){return b.load().then(function(){var c=new h({disableExtraQuery:!0,query:"owner:"+e+" AND type:"+w+' AND typekeywords:"'+
a+'"'});return b.queryItems(c)}).then(function(b){b=b.results;var c=null,d=a.toLowerCase();if(b&&Array.isArray(b))for(var f=0;f<b.length;f++){var g=b[f];if(g.typeKeywords.some(function(a){return a.toLowerCase()===d})&&g.type===w&&g.owner===e){c=g;break}}if(c)return c.load();throw new n("symbolstyleutils:style-not-found","The style '"+a+"' could not be found",{styleName:a});})}function t(a,b){return a.styleUrl?u(a.styleUrl,b):a.styleName?v(a.styleName,b):l.reject(new n("symbolstyleutils:style-url-and-name-missing",
"Either styleUrl or styleName is required to resolve a style"))}function x(b,d,e){for(var f=b.data,h={portal:e.portal,url:k.urlToObject(b.baseUrl),origin:"portal-item"},m=function(f){if(f.name!==d)return"continue";var m=k.read(f.webRef,h),l={portal:e.portal,url:k.urlToObject(k.removeFile(m)),origin:"portal-item"};return{value:r(m).then(function(m){if((m=c.fromJSON(m.data,l))&&m.isInstanceOf(g.BaseSymbol3D)){if(f.thumbnail)if(f.thumbnail.href){var n=k.read(f.thumbnail.href,h);m.thumbnail=new p.default({url:n})}else f.thumbnail.imageData&&
(m.thumbnail=new p.default({url:"data:image/png;base64,"+f.thumbnail.imageData}));b.styleUrl?m.styleOrigin=new a({portal:e.portal,styleUrl:b.styleUrl,name:d}):b.styleName&&(m.styleOrigin=new a({portal:e.portal,styleName:b.styleName,name:d}))}return m})}},q=0,f=f.items;q<f.length;q++){var t=m(f[q]);if("object"===typeof t)return t.value}return l.reject(new n("symbolstyleutils:symbol-name-not-found","The symbol name '"+d+"' could not be found",{symbolName:d}))}function r(a){return q(k.normalize(a),{responseType:"json",
query:{f:"json"}})}Object.defineProperty(f,"__esModule",{value:!0});var m={};f.fetchStyle=t;f.resolveWebStyleSymbol=function(a,b){return a.name?t(a,b).then(function(c){return x(c,a.name,b)}):l.reject(new n("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))};f.fetchSymbolFromStyle=x;f.styleNameFromItem=function(a){var b=0;for(a=a.typeKeywords;b<a.length;b++){var c=a[b];if(/^Esri.*Style$/.test(c)&&"Esri Style"!==c)return c}};var e="esri_en",w="Style"})},
"esri/renderers/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/object ../../core/Warning ../ClassBreaksRenderer ../HeatmapRenderer ../SimpleRenderer ../UniqueValueRenderer".split(" "),function(b,f,q,g,n,l,k,d,h){function c(a,b,c){if(!a)return null;if(a&&(a.styleName||a.styleUrl)&&"uniqueValue"!==a.type)return c&&c.messages&&c.messages.push(new n("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+a.type+"'",{definition:a,
context:c})),null;b=a?p[a.type]||null:null;if(b)return b=new b,b.read(a,c),b;c&&c.messages&&a&&c.messages.push(new n("renderer:unsupported","Renderers of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:c}));return null}function a(a,b,c){return a?c&&"web-scene"===c.origin&&"heatmap"===a.type?(c.messages&&c.messages.push(new q("renderer:unsupported","Renderer of type '"+a.declaredClass+"' are not supported in scenes.",{renderer:a,context:c})),null):a.write(b,c):null}Object.defineProperty(f,
"__esModule",{value:!0});var p={simple:d,uniqueValue:h,classBreaks:l,heatmap:k};f.read=c;f.writeTarget=function(b,c,d,f){(b=a(b,{},f))&&g.setDeepValue(d,b,c)};f.write=a;f.fromJSON=function(a,b){return c(a,null,b)}})},"esri/layers/support/FeatureProcessing":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/lang ../../core/accessorSupport/decorators ../../layers/support/Field".split(" "),function(b,f,q,g,n,
l,k,d){return function(b){function c(){return null!==b&&b.apply(this,arguments)||this}q(c,b);a=c;c.fromWorker=function(b){if(!b)return null;var c=new a;c.fields=b.fields&&b.fields.map(function(a){return d.fromJSON(a)});c.options=b.options;c.process=new (Function.bind.apply(Function,[void 0].concat(b.process.args,[b.process.body])));return c};c.prototype.clone=function(){return new a(l.clone({fields:this.fields,options:this.options,process:this.process}))};c.prototype.toWorker=function(){var a=this.process.toString();
return{fields:this.fields,options:this.options,process:{body:a.substring(a.indexOf("{")+1,a.lastIndexOf("}")),args:a.slice(a.indexOf("(")+1,a.indexOf(")")).match(/([^\s,]+)/g)}}};g([k.property({type:[d]})],c.prototype,"fields",void 0);g([k.property()],c.prototype,"options",void 0);g([k.property()],c.prototype,"process",void 0);return c=a=g([k.subclass("esri.layers.support.FeatureProcessing")],c);var a}(k.declared(n))})},"esri/layers/support/FeatureReduction":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(b,f,q,g,n,l){Object.defineProperty(f,"__esModule",{value:!0});b=function(b){function d(){var d=null!==b&&b.apply(this,arguments)||this;d.type=null;return d}q(d,b);g([l.property({type:String,readOnly:!0,json:{read:!1,write:!0}})],d.prototype,"type",void 0);return d=g([l.subclass("esri.layers.support.FeatureReduction")],d)}(l.declared(n));f.FeatureReduction=b;f.default=b})},"esri/layers/support/FeatureReductionSelection":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./FeatureReduction".split(" "),
function(b,f,q,g,n,l){Object.defineProperty(f,"__esModule",{value:!0});b=function(b){function d(){var d=null!==b&&b.apply(this,arguments)||this;d.type="selection";return d}q(d,b);g([n.property()],d.prototype,"type",void 0);return d=g([n.subclass("esri.layers.support.FeatureReductionSelection")],d)}(n.declared(l.default));f.FeatureReductionSelection=b;f.default=b})},"esri/layers/support/FeatureTemplate":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators".split(" "),
function(b,f,q,g,n,l,k,d){var h=l({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",
esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});return function(b){function a(a){a=b.call(this,a)||this;a.name=null;a.description=null;a.drawingTool=null;a.prototype=null;a.thumbnail=null;return a}q(a,b);a.prototype.writeDrawingTool=function(a,b){b.drawingTool=h.toJSON(a)};a.prototype.writePrototype=function(a,b){b.prototype=k.fixJson(k.clone(a),!0)};a.prototype.writeThumbnail=function(a,b){b.thumbnail=k.fixJson(k.clone(a))};g([d.property({json:{write:!0}})],a.prototype,
"name",void 0);g([d.property({json:{write:!0}})],a.prototype,"description",void 0);g([d.property({json:{read:h.fromJSON,write:!0}})],a.prototype,"drawingTool",void 0);g([d.writer("drawingTool")],a.prototype,"writeDrawingTool",null);g([d.property({json:{write:!0}})],a.prototype,"prototype",void 0);g([d.writer("prototype")],a.prototype,"writePrototype",null);g([d.property({json:{write:!0}})],a.prototype,"thumbnail",void 0);g([d.writer("thumbnail")],a.prototype,"writeThumbnail",null);return a=g([d.subclass("esri.layers.support.FeatureTemplate")],
a)}(d.declared(n))})},"esri/layers/support/FeatureType":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./domains ./FeatureTemplate".split(" "),function(b,f,q,g,n,l,k,d,h){return function(b){function a(a){a=b.call(this,a)||this;a.id=null;a.name=null;a.domains=null;a.templates=null;return a}q(a,b);a.prototype.readDomains=function(a){var b={},c;for(c in a)if(a.hasOwnProperty(c)){var f=
a[c];switch(f.type){case "range":b[c]=d.RangeDomain.fromJSON(f);break;case "codedValue":b[c]=d.CodedValueDomain.fromJSON(f);break;case "inherited":b[c]=d.InheritedDomain.fromJSON(f)}}return b};a.prototype.writeDomains=function(a,b){var c={},d;for(d in a)a.hasOwnProperty(d)&&(c[d]=a[d]&&a[d].toJSON());l.fixJson(c);b.domains=c};a.prototype.readTemplates=function(a){return a&&a.map(function(a){return new h(a)})};a.prototype.writeTemplates=function(a,b){b.templates=a&&a.map(function(a){return a.toJSON()})};
g([k.property({json:{write:!0}})],a.prototype,"id",void 0);g([k.property({json:{write:!0}})],a.prototype,"name",void 0);g([k.property({json:{write:!0}})],a.prototype,"domains",void 0);g([k.reader("domains")],a.prototype,"readDomains",null);g([k.writer("domains")],a.prototype,"writeDomains",null);g([k.property({json:{write:!0}})],a.prototype,"templates",void 0);g([k.reader("templates")],a.prototype,"readTemplates",null);g([k.writer("templates")],a.prototype,"writeTemplates",null);return a=g([k.subclass("esri.layers.support.FeatureType")],
a)}(k.declared(n))})},"esri/layers/support/LabelClass":function(){define("../../core/date ../../core/JSONSupport ../../core/lang ../../core/kebabDictionary dojo/_base/lang dojo/number ./LabelExpressionInfo ./labelUtils ./types ../../support/arcadeUtils ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),function(b,f,q,g,n,l,k,d,h,c,a,p){function u(a){a=(a=c.createSyntaxTree(a))&&a.body&&a.body[0]&&a.body[0].body&&a.body[0].body.body;if(!a||1!==a.length)return null;a="ExpressionStatement"===
a[0].type&&a[0].expression;if(!a||"MemberExpression"!==a.type)return null;var b=a.object;if(!b||"Identifier"!==b.type||"$feature"!==b.name)return null;a=a.property;if(!a)return null;switch(a.type){case "Literal":return a.value;case "Identifier":return a.name}return null}function v(a){return a?"service"===a.origin?!1:!a.layer||!h.isOfType(a.layer,"map-image"):!0}var z=g({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",
esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",
esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",
esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"}),t=f.createSubclass({declaredClass:"esri.layers.support.LabelClass",properties:{name:{type:String,value:null,json:{write:!0}},labelExpression:{type:String,value:null,json:{read:function(a,b,c,d){b=b.labelExpressionInfo;if(!b||!b.value&&!b.expression)return a},write:{allowNull:!0,writer:function(a,b,c,d){this.labelExpressionInfo&&v(d)&&(null!=this.labelExpressionInfo.value?a=this._templateStringToSql(this.labelExpressionInfo.value):null!=
this.labelExpressionInfo.expression&&(d=u(this.labelExpressionInfo.expression))&&(a="["+d+"]"));null!=a&&(b[c]=a)}}}},labelExpressionInfo:{value:null,type:k,json:{write:{overridePolicy:function(a,b,c){return v(c)?{allowNull:!0}:{enabled:!1}},writer:function(a,b,c,d){if(null==a&&null!=this.labelExpression&&v(d))a=new k({expression:this.getLabelExpressionArcade()});else if(!a)return;a=a.toJSON(d);a.expression&&(b[c]=a)}}}},labelPlacement:{type:String,value:null,json:{read:function(a,b){return z.fromJSON(a)},
write:function(a,b){if(a=z.toJSON(a))b.labelPlacement=a}}},maxScale:{type:Number,value:0,json:{write:function(a,b){if(a||this.minScale)b.maxScale=a}}},minScale:{type:Number,value:0,json:{write:function(a,b){if(a||this.maxScale)b.minScale=a}}},requiredFields:{readOnly:!0,dependsOn:["labelExpression","labelExpressionInfo","where"],get:function(){var a=Object.create(null);this._collectRequiredFields(a);return Object.keys(a)}},symbol:{value:null,types:p.labelTypes,json:{origins:{"web-scene":{read:a.read,
write:{target:{symbol:{types:p.labelTypes3D}},writer:a.writeTarget}}},read:a.read,write:a.writeTarget}},useCodedValues:{type:Boolean,value:null,json:{write:!0}},where:{type:String,value:null,json:{write:!0}}},getLabelExpression:function(){var a={expression:"",type:"none"};this.labelExpressionInfo?this.labelExpressionInfo.value?(a.expression=this.labelExpressionInfo.value,a.type="conventional"):this.labelExpressionInfo.expression&&(a.expression=this.labelExpressionInfo.expression,a.type="arcade"):
null!=this.labelExpression&&(a.expression=this._sqlToTemplateString(this.labelExpression),a.type="conventional");return a},getLabelExpressionArcade:function(){var a=this.getLabelExpression();if(!a)return null;switch(a.type){case "conventional":return d.convertTemplatedStringToArcade(a.expression);case "arcade":return a.expression}return null},getOptions:function(){var a={},b=this.labelExpressionInfo;if(b){var d=b.expression;d&&!b.value&&(a.hasArcadeExpression=!0,a.compiledArcadeFunc=c.createFunction(d))}return a},
getLabelExpressionSingleField:function(){var a=this.getLabelExpression();if(!a)return null;switch(a.type){case "conventional":return(a=a.expression.match(x))&&a[1].trim()||null;case "arcade":return u(a.expression)}return null},clone:function(){return new t({labelExpression:this.labelExpression,labelExpressionInfo:q.clone(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:this.symbol.clone(),where:this.where,useCodedValues:this.useCodedValues})},
_collectRequiredFields:function(a){this._collectLabelExpressionRequiredFields(this.getLabelExpression(),a);this._collectWhereRequiredFields(this.where,a)},_sqlToTemplateString:function(a){return a.replace(/\[/g,"{").replace(/\]/g,"}")},_templateStringToSql:function(a){return a.replace(/\{/g,"[").replace(/\}/g,"]")},_collectWhereRequiredFields:function(a,b){null!=a&&(a=a.split(" "),3===a.length&&(b[a[0]]=!0),7===a.length&&(b[a[0]]=!0,b[a[4]]=!0))},_collectLabelExpressionRequiredFields:function(a,b){"arcade"===
a.type?c.extractFieldNames(a.expression).forEach(function(a){b[a]=!0}):(a=a.expression.match(/{[^}]*}/g))&&a.forEach(function(a){b[a.slice(1,-1)]=!0})}});t.evaluateWhere=function(a,b){var c=function(a,b,c){switch(b){case "\x3d":return a==c?!0:!1;case "\x3c\x3e":return a!=c?!0:!1;case "\x3e":return a>c?!0:!1;case "\x3e\x3d":return a>=c?!0:!1;case "\x3c":return a<c?!0:!1;case "\x3c\x3d":return a<=c?!0:!1}return!1};try{if(null==a)return!0;var d=a.split(" ");if(3===d.length)return c(b[d[0]],d[1],d[2]);
if(7===d.length){var f=c(b[d[0]],d[1],d[2]),g=d[3],h=c(b[d[4]],d[5],d[6]);switch(g){case "AND":return f&&h;case "OR":return f||h}}return!1}catch(B){console.log("Error.: can't parse \x3d "+a)}};t.buildLabelText=function(a,b,d,f){var e="";if(f&&f.hasArcadeExpression)f.compiledArcadeFunc&&(a=c.createExecContext(b),a=c.executeFunction(f.compiledArcadeFunc,a),null!=a&&(e=a.toString()));else var g=b&&b.attributes||{},e=a.replace(/{[^}]*}/g,function(a){return t.formatField(a.slice(1,-1),a,g,d,f)});return e};
t.formatField=function(a,c,d,f,g){var e=a.toLowerCase();for(a=0;a<f.length;a++)if(f[a].name.toLowerCase()===e){c=d[f[a].name];var h=f[a].domain;if(h&&n.isObject(h)){if("codedValue"==h.type)for(d=0;d<h.codedValues.length;d++)h.codedValues[d].code==c&&(c=h.codedValues[d].name);else"range"==h.type&&h.minValue<=c&&c<=h.maxValue&&(c=h.name);break}h=f[a].type;"date"==h?(h=b.fromJSON(g&&g.dateFormat||"shortDate"),(h="DateFormat"+b.getFormat(h))&&(c=q.substitute({myKey:c},"{myKey:"+h+"}"))):("integer"==h||
"small-integer"==h||"long"==h||"double"==h)&&g&&g.numberFormat&&g.numberFormat.digitSeparator&&g.numberFormat.places&&(c=l.format(c,{places:g.numberFormat.places}))}return null==c?"":c};var x=/^\s*\{([^}]+)\}\s*$/i;return t})},"esri/layers/support/LabelExpressionInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./labelUtils".split(" "),function(b,f,q,g,n,l,k){return function(b){function d(){var a=
null!==b&&b.apply(this,arguments)||this;a.value=null;a.expression=null;return a}q(d,b);c=d;d.prototype.readExpression=function(a,b){return b.value?k.convertTemplatedStringToArcade(b.value):a};d.prototype.writeExpression=function(a,b,c){null!=this.value&&(a=k.convertTemplatedStringToArcade(this.value));b[c]=a};d.prototype.clone=function(){return new c({value:this.value,expression:this.expression})};g([l.property({json:{read:!1,write:!1}})],d.prototype,"value",void 0);g([l.property({json:{write:{allowNull:!0}}})],
d.prototype,"expression",void 0);g([l.reader("expression",["expression","value"])],d.prototype,"readExpression",null);g([l.writer("expression")],d.prototype,"writeExpression",null);return d=c=g([l.subclass("esri.layers.support.LabelExpressionInfo")],d);var c}(l.declared(n))})},"esri/layers/support/labelUtils":function(){define(["require","exports","dojo/_base/lang"],function(b,f,q){Object.defineProperty(f,"__esModule",{value:!0});var g=/__begin__/ig,n=/__end__/ig,l=/^__begin__/i,k=/__end__$/i;f.convertTemplatedStringToArcade=
function(b){b?(b=q.replace(b,function(b,c){return'__begin__$feature["'+c+'"]__end__'}),b=l.test(b)?b.replace(l,""):'"'+b,b=k.test(b)?b.replace(k,""):b+'"',b=b.replace(g,'" + ').replace(n,' + "')):b='""';return b}})},"esri/layers/support/labelingInfo":function(){define(["require","exports","./LabelClass"],function(b,f,q){Object.defineProperty(f,"__esModule",{value:!0});var g=/\[([^\[\]]+)\]/gi;f.reader=function(b,f,k){var d=this;return b?b.map(function(b){var c=new q;c.read(b,k);if(c.labelExpression){var a=
f.fields||f.layerDefinition&&f.layerDefinition.fields||d.fields;c.labelExpression=c.labelExpression.replace(g,function(b,c){a:if(a){b=c.toLowerCase();for(var d=0;d<a.length;d++){var f=a[d].name;if(f.toLowerCase()===b){c=f;break a}}}return"["+c+"]"})}return c}):null}})},"esri/layers/support/Relationship":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators".split(" "),
function(b,f,q,g,n,l,k){var d=l({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"});return function(b){function c(a){a=b.call(this,a)||this;a.cardinality=null;a.id=null;a.keyField=null;a.name=null;a.relatedTableId=null;return a}q(c,b);g([k.property({json:{read:d.read,write:d.write}})],c.prototype,"cardinality",void 0);g([k.property({json:{read:!0,write:!0}})],c.prototype,"id",void 0);g([k.property({json:{read:!0,write:!0}})],
c.prototype,"keyField",void 0);g([k.property({json:{read:!0,write:!0}})],c.prototype,"name",void 0);g([k.property({json:{read:!0,write:!0}})],c.prototype,"relatedTableId",void 0);return c=g([k.subclass("esri.layers.support.Relationship")],c)}(k.declared(n))})},"esri/renderers/support/styleUtils":function(){define(["require","exports","../../core/promiseUtils","../../core/Warning"],function(b,f,q,g){Object.defineProperty(f,"__esModule",{value:!0});f.loadStyleRenderer=function(b,f){var k=b&&b.getAtOrigin&&
b.getAtOrigin("renderer",f.origin);return k&&"unique-value"===k.type&&k.styleOrigin?k.populateFromStyle().catch(function(d){f&&f.messages&&f.messages.push(new g("renderer:style-reference","Failed to create unique value renderer from style reference: "+d.message,{error:d,context:f}));b.clear("renderer",f.origin)}).then(function(){return null}):q.resolve(null)}})},"esri/renderers/support/typeUtils":function(){define("require exports ../ClassBreaksRenderer ../Renderer ../SimpleRenderer ../UniqueValueRenderer".split(" "),
function(b,f,q,g,n,l){Object.defineProperty(f,"__esModule",{value:!0});f.types={key:"type",base:g,typeMap:{simple:n,"unique-value":l,"class-breaks":q}}})},"esri/plugins/popupManager":function(){define(["../views/PopupManager"],function(b){return{add:function(f,q){f.popupManager||(f.popupManager=new b(q),f.popupManager.view=f)},remove:function(b){var f=b.popupManager;f&&(f.destroy(),b.popupManager=null)}}})},"esri/views/PopupManager":function(){define("require ../core/promiseUtils dojo/on dojo/Deferred dojo/promise/all ../layers/support/layerUtils ../geometry/support/scaleUtils ../geometry/Extent ../tasks/support/Query ../layers/GroupLayer ../core/Accessor".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a){var p;return a.createSubclass({declaredClass:"esri.views.PopupManager",properties:{map:{dependsOn:["view.map"],readOnly:!0}},constructor:function(){this._featureLayersCache={}},destroy:function(){this._featureLayersCache={};this.view=null},_clickHandle:null,_featureLayersCache:null,enabled:!1,_enabledSetter:function(a){this._clickHandle&&(a?this._clickHandle.resume():this._clickHandle.pause());this._set("enabled",a)},_mapGetter:function(){return this.get("view.map")||
null},view:null,_viewSetter:function(a){this._clickHandle&&(this._clickHandle.remove(),this._clickHandle=null);a&&(this._clickHandle=q.pausable(a,"click",this._clickHandler.bind(this)),this.enabled||this._clickHandle.pause());this._set("view",a)},getMapLayer:function(a){var b;if(a&&(b=a.findLayerById())&&(a=b.id,this._featureLayersCache[a])){var c=a.lastIndexOf("_");-1<c&&(a=a.substring(0,c),b=this.map.findLayerById(a))}return b},_closePopup:function(){var a=this.get("view.popup");a&&(a.clear(),a.close())},
_showPopup:function(a,b,l){function n(a){return m.allLayerViews.find(function(b){return b.layer===a})}function p(a){if(null==a)return!1;var b=n(a);return null==b?!1:a.loaded&&!b.suspended&&(a.popupEnabled&&a.popupTemplate||"graphics"===a.type||"geo-rss"===a.type||"map-notes"===a.type||"kml"===a.type||b.getPopupData)}function q(a){return(a=n(a))&&a.hasDraped}var m=this.view;a=m.popup;var e=this,u=[],v="3d"===m.type;this.map.layers.toArray().forEach(function(a){a.isInstanceOf(c)?a.layers.toArray().forEach(function(a){!p(a)||
v&&!q(a)||u.push(a)}):!p(a)||v&&!q(a)||u.push(a)});0<m.graphics.length&&u.push(m.graphics);(l&&m.graphics.includes(l)?l.popupTemplate:!l||p(l.layer))||(l=null);if(u.length||l){var z=[],D=!!l,B=e._calculateClickTolerance(u);if(b){var F=1;"2d"===m.type&&(F=m.state.resolution);var C=m.basemapTerrain;C&&C.overlayManager&&(F=C.overlayManager.overlayPixelSizeInMapUnits(b));B*=F;C&&!C.spatialReference.equals(m.spatialReference)&&(B*=k.getMetersPerUnitForSR(C.spatialReference)/k.getMetersPerUnitForSR(m.spatialReference));
var C=b.clone().offset(-B,-B),B=b.clone().offset(B,B),G=new d(Math.min(C.x,B.x),Math.min(C.y,B.y),Math.max(C.x,B.x),Math.max(C.y,B.y),m.spatialReference),C=function(a){var c;if("imagery"===a.type){c=new h;c.geometry=b;var d=n(a),g={rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0};g.layerView=d;c=a.queryVisibleRasters(c,g).then(function(a){D=D||0<a.length;return a})}else if("csv"===a.type||"scene"===a.type||!e._featureLayersCache[a.id]&&"function"!==typeof a.queryFeatures){if("map-image"===
a.type||"wms"===a.type)return d=n(a),d.getPopupData(G);var g=[],k;"esri.core.Collection\x3cesri.Graphic\x3e"===a.declaredClass?(d=a,k=!0):"graphics"===a.type?(d=a.graphics,k=!0):(d=(d=n(a))&&d.loadedGraphics,k=!1);d&&(g=d.filter(function(a){return a&&(!k||a.popupTemplate)&&a.visible&&G.intersects(a.geometry)}).toArray());0<g.length&&(D=!0,c="scene"===a.type?e._fetchSceneAttributes(a,g):f.resolve(g))}else d=a.createQuery(),d.geometry=G,c=a.queryFeatures(d).then(function(b){b=b.features;if(l&&l.layer===
a&&a.objectIdField){var c=a.objectIdField,d=l.attributes[c];b=b.filter(function(a){return a.attributes[c]!==d})}if(!l&&"graphics3DGraphics"in n(a)){var e=[],f=n(a).graphics3DGraphics,g;for(g in f)e.push(f[g].graphic.attributes[a.objectIdField]);b=b.filter(function(b){return-1!==e.indexOf(b.attributes[a.objectIdField])})}D=D||0<b.length;return b});return c};if(v&&!l||!v)var z=u.map(C).filter(function(a){return!!a}),W=function(a){return a.reduce(function(a,b){return a.concat(b.items?W(b.items):b)},
[])},z=W(z);l&&(l.layer&&"scene"===l.layer.type?z.unshift(this._fetchSceneAttributes(l.layer,[l])):l.popupTemplate&&(C=new g,z.unshift(C.resolve([l]))));z.some(function(a){return!a.isFulfilled()})||D?z.length&&a.open({promises:z,location:b}):e._closePopup()}else e._closePopup()}else e._closePopup()},_fetchSceneAttributes:function(a,b){return this.view.whenLayerView(a).then(function(c){var d=this._getOutFields(a.popupTemplate),g=b.map(function(a){return c.whenGraphicAttributes(a,d).catch(function(){return a})});
return f.eachAlways(g)}.bind(this)).then(function(a){return a.map(function(a){return a.value})})},_getSubLayerFeatureLayers:function(a,c){var d=c||new g,f=[];c=a.length;var h=Math.floor(this.view.extent.width/this.view.width),k=this.view.scale,m=!1,e=this,u=0;a:for(;u<c;u++){var v=a[u],A=v.dynamicLayerInfos||v.layerInfos;if(A){var D=null;v._params&&(v._params.layers||v._params.dynamicLayers)&&(D=v.visibleLayers);for(var D=l._getVisibleLayers(A,D),B=l._getLayersForScale(k,A),F=A.length,C=0;C<F;C++){var G=
A[C],W=G.id,fa=v.popupTemplates[W];if(!G.subLayerIds&&fa&&fa.popupTemplate&&-1<D.indexOf(W)&&-1<B.indexOf(W)){if(!p){m=!0;break a}var V=v.id+"_"+W,H=this._featureLayersCache[V];H&&H.loadError||(H||((H=fa.layerUrl)||(H=G.source?this._getLayerUrl(v.url,"/dynamicLayer"):this._getLayerUrl(v.url,W)),H=new p(H,{id:V,drawMode:!1,mode:p.MODE_SELECTION,outFields:this._getOutFields(fa.popupTemplate),resourceInfo:fa.resourceInfo,source:G.source}),this._featureLayersCache[V]=H),H.setDefinitionExpression(v.layerDefinitions&&
v.layerDefinitions[W]),H.setGDBVersion(v.gdbVersion),H.popupTemplate=fa.popupTemplate,H.setMaxAllowableOffset(h),H.setUseMapTime(!!v.useMapTime),v.layerDrawingOptions&&v.layerDrawingOptions[W]&&v.layerDrawingOptions[W].renderer&&H.setRenderer(v.layerDrawingOptions[W].renderer),f.push(H))}}}}if(m){var ba=new g;b(["../layers/FeatureLayer"],function(a){p=a;ba.resolve()});ba.then(function(){e._getSubLayerFeatureLayers(a,d)})}else{var J=[];f.forEach(function(a){if(!a.loaded){var b=new g;q.once(a,"load, error",
function(){b.resolve()});J.push(b.promise)}});J.length?n(J).then(function(){f=f.filter(function(a){return!a.loadError&&a.isVisibleAtScale(k)});d.resolve(f)}):(f=f.filter(function(a){return a.isVisibleAtScale(k)}),d.resolve(f))}return d.promise},_getLayerUrl:function(a,b){var c=a.indexOf("?");return-1===c?a+"/"+b:a.substring(0,c)+"/"+b+a.substring(c)},_getOutFields:function(a){var b=["*"];if("esri.PopupTemplate"===a.declaredClass){var c=null==a.content||Array.isArray(a.content)&&a.content.every(function(a){return"attachments"===
a.type||"fields"===a.type&&null==a.fieldInfos||"text"===a.type&&-1===a.text.indexOf("{")});a.fieldInfos&&!a.expressionInfos&&c&&(b=[],a.fieldInfos.forEach(function(a){var c=a.fieldName&&a.fieldName.toLowerCase();c&&"shape"!==c&&0!==c.indexOf("relationships/")&&b.push(a.fieldName)}))}return b},_calculateClickTolerance:function(a){var b=6;a.forEach(function(a){if(a=a.renderer)"simple"===a.type?((a=a.symbol)&&a.xoffset&&(b=Math.max(b,Math.abs(a.xoffset))),a&&a.yoffset&&(b=Math.max(b,Math.abs(a.yoffset)))):
"unique-value"!==a.type&&"class-breaks"!==a.type||(a.uniqueValueInfos||a.classBreakInfos).forEach(function(a){(a=a.symbol)&&a.xoffset&&(b=Math.max(b,Math.abs(a.xoffset)));a&&a.yoffset&&(b=Math.max(b,Math.abs(a.yoffset)))})});return b},_clickHandler:function(a){function b(a){return d.allLayerViews.find(function(b){return b.layer===a})}var d=this.view,f=a.screenPoint,g=this;if(0===a.button&&d.popup&&d.ready){var h="3d"===d.type,k=d.map.allLayers.some(function(a){if(a.isInstanceOf(c))return!1;var d;
null==a?d=!1:(d=b(a),d=null==d?!1:a.loaded&&!d.suspended&&(a.popupEnabled&&a.popupTemplate||"graphics"===a.type||d.getPopupData));d&&!(d=!h)&&(d=(a=b(a))&&a.hasDraped);return d?!0:!1});null!=f?this.view.hitTest(f.x,f.y).then(function(b){k||0<b.results.length?0<b.results.length?(b=b.results[0],g._showPopup(a,b.mapPoint,b.graphic)):g._showPopup(a,a.mapPoint,null):g._closePopup()}):g._showPopup(a,a.mapPoint)}}})})},"esri/layers/support/layerUtils":function(){define([],function(){return{_serializeLayerDefinitions:function(b){var f=
[],q=!1,g=/[:;]/;if(b&&(b.forEach(function(b,k){f.push([k,b]);!q&&g.test(b)&&(q=!0)}),0<f.length)){var n;q?(n={},f.forEach(function(b){n[b[0]]=b[1]}),n=JSON.stringify(n)):(n=[],f.forEach(function(b){n.push(b[0]+":"+b[1])}),n=n.join(";"));return n}return null},_serializeTimeOptions:function(b,f){if(b){var q=[];b.forEach(function(b,n){b=b.toJSON();f&&-1!==f.indexOf(n)&&(b.useTime=!1);q.push('"'+n+'":'+JSON.stringify(b))});if(q.length)return"{"+q.join(",")+"}"}},_getVisibleLayers:function(b,f){var q=
[],g,n;if(!b)return q;if(f)for(q=f.concat(),n=0;n<b.length;n++)f=b[n],g=b.indexOf(f.id),f.subLayerIds&&-1<g&&(q.splice(g,1),q=q.concat(f.subLayerIds));else q=this._getDefaultVisibleLayers(b);return q},_getDefaultVisibleLayers:function(b){var f=[],q;if(!b)return f;for(q=0;q<b.length;q++)0<=b[q].parentLayerId&&-1===f.indexOf(b[q].parentLayerId)&&b.some(function(f){return f.id===b[q].parentLayerId})||b[q].defaultVisibility&&f.push(b[q].id);return f},_getLayersForScale:function(b,f){var q=[];if(0<b&&
f){var g;for(g=0;g<f.length;g++)if(!(0<=f[g].parentLayerId&&-1===q.indexOf(f[g].parentLayerId)&&f.some(function(b){return b.id===f[g].parentLayerId}))&&0<=f[g].id){var n=!0,l=f[g].maxScale,k=f[g].minScale;if(0<l||0<k)0<l&&0<k?n=l<=b&&b<=k:0<l?n=l<=b:0<k&&(n=b<=k);n&&q.push(f[g].id)}}return q}}})},"esri/layers/GroupLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/accessorSupport/decorators ../core/accessorSupport/utils ./Layer ./mixins/OperationalLayer ./mixins/PortalLayer ../support/LayersMixin".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p){return function(a){function c(b){b=a.call(this)||this;b._visibilityHandles={};b.fullExtent=void 0;b.operationalLayerType="GroupLayer";b.spatialReference=void 0;b.type="group";b._visibilityWatcher=b._visibilityWatcher.bind(b);return b}q(c,a);c.prototype.initialize=function(){this._enforceVisibility(this.visibilityMode,this.visible);this.watch("visible",this._visibleWatcher.bind(this),!0)};c.prototype._writeLayers=function(a,b,c,d){var f=[];if(!a)return f;a.forEach(function(a){a.write&&
(a=a.write(null,d))&&a.layerType&&f.push(a)});b.layers=f};Object.defineProperty(c.prototype,"visibilityMode",{set:function(a){var b=this._get("visibilityMode")!==a;this._set("visibilityMode",a);b&&this._enforceVisibility(a,this.visible)},enumerable:!0,configurable:!0});c.prototype.load=function(){this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]}));return this.when()};c.prototype.layerAdded=function(a){a.visible&&"exclusive"===this.visibilityMode?
this._turnOffOtherLayers(a):"inherited"===this.visibilityMode&&(a.visible=this.visible);this._visibilityHandles[a.uid]=a.watch("visible",this._visibilityWatcher,!0)};c.prototype.layerRemoved=function(a){var b=this._visibilityHandles[a.uid];b&&(b.remove(),delete this._visibilityHandles[a.uid]);this._enforceVisibility(this.visibilityMode,this.visible)};c.prototype.importLayerViewModule=function(a){switch(a.type){case "2d":return l.create(function(a){b(["../views/layers/GroupLayerView"],a)});case "3d":return l.create(function(a){b(["../views/layers/GroupLayerView"],
a)})}};c.prototype._turnOffOtherLayers=function(a){this.layers.forEach(function(b){b!==a&&(b.visible=!1)})};c.prototype._enforceVisibility=function(a,b){if(d.getProperties(this).initialized){var c=this.layers,f=c.find(function(a){return a.visible});switch(a){case "exclusive":c.length&&!f&&(f=c.getItemAt(0),f.visible=!0);this._turnOffOtherLayers(f);break;case "inherited":c.forEach(function(a){a.visible=b})}}};c.prototype._visibleWatcher=function(a){"inherited"===this.visibilityMode&&this.layers.forEach(function(b){b.visible=
a})};c.prototype._visibilityWatcher=function(a,b,c,d){switch(this.visibilityMode){case "exclusive":a?this._turnOffOtherLayers(d):this._isAnyLayerVisible()||(d.visible=!0);break;case "inherited":d.visible=this.visible}};c.prototype._isAnyLayerVisible=function(){return this.layers.some(function(a){return a.visible})};g([k.property()],c.prototype,"fullExtent",void 0);g([k.property({json:{read:!1,write:{ignoreOrigin:!0}}})],c.prototype,"layers",void 0);g([k.writer("layers")],c.prototype,"_writeLayers",
null);g([k.property()],c.prototype,"operationalLayerType",void 0);g([k.property({json:{write:!1}})],c.prototype,"portalItem",void 0);g([k.property()],c.prototype,"spatialReference",void 0);g([k.property({json:{read:!1},readOnly:!0,value:"group"})],c.prototype,"type",void 0);g([k.property({json:{read:!1,write:!1}})],c.prototype,"url",void 0);g([k.property({type:String,value:"independent",json:{write:!0}})],c.prototype,"visibilityMode",null);return c=g([k.subclass("esri.layers.GroupLayer")],c)}(k.declared(h,
p,n,c,a))})},"esri/portal/support/layersCreator":function(){define("require exports dojo/has ../../core/promiseUtils ../../layers/Layer ../../layers/support/lazyLayerLoader ../PortalItem ./mapNotesUtils ./portalLayers ../../renderers/support/styleUtils".split(" "),function(b,f,q,g,n,l,k,d,h,c){function a(a,b,d){var e,f={};b.itemId&&(f.portalItem={id:b.itemId,portal:d.context.portal});e=new a(f);e.read(b,d.context);return c.loadStyleRenderer(e,d.context).then(function(){return g.resolve(e)})}function p(b,
c){return u(b,c).then(function(d){return a(d,b,c)})}function u(a,b){var c=b.context,e=v(c),f=a.layerType||a.type;!f&&b&&b.defaultLayerType&&(f=b.defaultLayerType);b=(b=e[f])?l.layerLookupMap[b]:l.layerLookupMap.UnknownLayer;if("Feature Collection"===a.type){if(a.itemId)return(new k({id:a.itemId,portal:c&&c.portal})).load().then(h.selectLayerClassPath).then(function(a){return l.layerLookupMap[a.className||"UnknownLayer"]}).then(function(a){return a()})}else"ArcGISFeatureLayer"===f&&d.isMapNotesLayer(a)&&
(b=l.layerLookupMap.MapNotesLayer);a.wmtsInfo&&(b=l.layerLookupMap.WMTSLayer);return b()}function v(a){switch(a.origin){case "web-scene":switch(a.layerContainerType){case "basemap":a=m;break;case "ground":a=r;break;default:a=x}break;default:switch(a.layerContainerType){case "basemap":a=w;break;default:a=e}}return a}function z(a,b,c){return b&&b.filter?c.then(function(a){var c=b.filter(a);return void 0===c?g.resolve(a):c instanceof n?g.resolve(c):c}):c}function t(a,b,c){if(!b)return[];for(var d=[],
e=[],f=0;f<b.length;f++){var h=b[f],k=p(h,c);d.push(k);e.push(null);if("GroupLayer"===h.layerType&&h.layers&&Array.isArray(h.layers)&&0<h.layers.length){h=h.layers.map(function(a){return p(a,c)});d.push.apply(d,h);for(var m=0;m<h.length;m++)e.push(k)}}var l={};return d.map(function(b,d){var f=function(a,b){l[b.id]=d;var c=a.findIndex(function(a){if(!a.id)return!1;a=l[a.id];return void 0===a?!1:d<a});0>c&&(c=void 0);a.add(b,c)};return z(a,c,b).then(function(b){if(null===e[d])f(a,b);else return e[d].then(function(a){f(a.layers,
b);return g.resolve(b)});return g.resolve(b)})})}Object.defineProperty(f,"__esModule",{value:!0});var x={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",WebTiledLayer:"WebTileLayer",
CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"},r={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer"},m={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",DefaultTileLayer:"TileLayer"},e=
{ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",GeoRSS:"GeoRSSLayer",KML:"KMLLayer",WMS:"WMSLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",DefaultTileLayer:"TileLayer"},
w={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"};f.createLayer=p;f.processLayer=z;f.populateLayers=t;f.populateOperationalLayers=
function(a,b,c){return t(a,b,c)}})},"esri/portal/support/mapNotesUtils":function(){define(["require","exports"],function(b,f){Object.defineProperty(f,"__esModule",{value:!0});f.isMapNotesLayer=function(b){var f=["TITLE","DESCRIPTION","IMAGE_URL","IMAGE_LINK_URL"];if((b=b.layers||b.featureCollection&&b.featureCollection.layers)&&Array.isArray(b))return b=b[0],b.layerDefinition.fields&&b.layerDefinition.fields.forEach(function(b){b=f.indexOf(b.name);-1<b&&f.splice(b,1)}),f.length?!1:!0}})},"esri/portal/support/portalLayers":function(){define("require exports dojo/_base/lang ../../request ../../core/Collection ../../core/Error ../../core/promiseUtils ../../layers/support/lazyLayerLoader ../PortalItem ./mapNotesUtils".split(" "),
function(b,f,q,g,n,l,k,d,h,c){function a(a){switch(a.type){case "Map Service":return u(a);case "Feature Service":return v(a);case "Feature Collection":return t(a);case "Scene Service":return z(a);case "Image Service":return x(a);case "Stream Service":return{className:"StreamLayer"};case "Vector Tile Service":return{className:"VectorTileLayer"};case "KML":return{className:"KMLLayer"};case "WMTS":return{className:"WMTSLayer"};case "WMS":return{className:"WMSLayer"};default:return k.reject(new l("portal:unknown-item-type",
"Unknown item type '${type}'",{type:a.type}))}}function p(a){return(0,d.layerLookupMap[a.className])().then(function(b){return{constructor:b,properties:a.properties}})}function u(a){return r(a).then(function(a){return a?{className:"TileLayer"}:{className:"MapImageLayer"}})}function v(a){return m(a).then(function(a){if("object"===typeof a){var b={returnZ:!0,outFields:["*"]};null!=a.id&&(b.layerId=a.id);return{className:"FeatureLayer",properties:b}}return{className:"GroupLayer"}})}function z(a){return m(a).then(function(b){if("object"===
typeof b){var c={},d=void 0;null!=b.id?(c.layerId=b.id,d=a.url+"/layers/"+b.id):d=a.url;if(Array.isArray(a.typeKeywords)&&0<a.typeKeywords.length){b={IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",Point:"SceneLayer",PointCloud:"PointCloudLayer"};for(var f=0,g=Object.keys(b);f<g.length;f++){var h=g[f];if(-1!==a.typeKeywords.indexOf(h))return{className:b[h]}}}return e(d).then(function(a){var b="SceneLayer";null!=a&&"IntegratedMesh"===a.layerType?b="IntegratedMeshLayer":null!=a&&"PointCloud"===
a.layerType&&(b="PointCloudLayer");return{className:b,properties:c}})}return{className:"GroupLayer"}})}function t(a){return a.load().then(function(){return a.fetchData()}).then(function(a){if(a&&Array.isArray(a.layers)){if(c.isMapNotesLayer(a))return{className:"MapNotesLayer"};if(1===a.layers.length)return{className:"FeatureLayer"}}return{className:"GroupLayer"}})}function x(a){return r(a).then(function(b){var c=new n(a.typeKeywords);return b?c.find(function(a){return"elevation 3d layer"===a.toLowerCase()})?
{className:"ElevationLayer"}:{className:"TileLayer"}:{className:"ImageryLayer"}})}function r(a){return e(a.url).then(function(a){return a.tileInfo})}function m(a){return!a.url||a.url.match(/\/\d+$/)?k.resolve({}):a.load().then(function(){return a.fetchData()}).then(function(b){return b&&Array.isArray(b.layers)?1===b.layers.length?{id:b.layers[0].id}:!1:e(a.url).then(function(a){return a&&Array.isArray(a.layers)?1===a.layers.length?{id:a.layers[0].id}:!1:{}})})}function e(a){return g(a,{responseType:"json",
callbackParamName:"callback",query:{f:"json"}}).then(function(a){return a.data})}Object.defineProperty(f,"__esModule",{value:!0});f.fromItem=function(b){!b.portalItem||b.portalItem instanceof h||b.portalItem.constructor&&b.portalItem.constructor._meta||(b=q.mixin({},b,{portalItem:new h(b.portalItem)}));return b.portalItem.load().then(a).then(p).then(function(a){var c=q.mixin({portalItem:b.portalItem},a.properties);a=a.constructor;"esri.layers.FeatureLayer"===a.declaredClass&&(c.returnZ=!0,c.outFields=
["*"]);return k.resolve(new a(c))})};f.selectLayerClassPath=a})},"esri/views/layers/LayerView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Evented ../../core/Handles ../../core/Identifiable ../../core/Logger ../../core/Promise ../../core/promiseUtils ../../core/accessorSupport/decorators".split(" "),function(b,f,q,g,n,l,k,d,h,c,a,p){return function(b){function c(){var a=null!==b&&b.apply(this,arguments)||
this;a.handles=new k;a.layer=null;a.parent=null;a.view=null;return a}q(c,b);c.prototype.initialize=function(){var b=this;this.addResolvingPromise(this.layer);this.when().catch(function(c){if("layerview:create-error"!==c.name){var d=b.layer&&b.layer.id||"no id",f=b.layer&&b.layer.title||"no title";h.getLogger(b.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+f+"', id: '"+d+"')",c);return a.reject(c)}})};c.prototype.destroy=function(){this.layer=this.view=this.parent=
null};Object.defineProperty(c.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"updating",{get:function(){return!this.suspended&&this.isUpdating()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(a){void 0===a?this._clearOverride("visible"):this._override("visible",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"fullOpacity",{get:function(){var a=this.get("layer.opacity"),a=null!=a?a:1,b=this.get("parent.fullOpacity");return a*(null!=b?b:1)},enumerable:!0,configurable:!0});c.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1};c.prototype.isUpdating=function(){return!1};g([p.property()],c.prototype,"layer",void 0);g([p.property()],c.prototype,"parent",void 0);g([p.property({readOnly:!0,dependsOn:["view","visible","layer.loaded",
"parent.suspended"]})],c.prototype,"suspended",null);g([p.property({type:Boolean,dependsOn:["suspended"],readOnly:!0})],c.prototype,"updating",null);g([p.property()],c.prototype,"view",void 0);g([p.property({dependsOn:["layer.visible"]})],c.prototype,"visible",null);g([p.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],c.prototype,"fullOpacity",null);return c=g([p.subclass("esri.views.layers.LayerView")],c)}(p.declared(n,l,d,c))})},"esri/views/View":function(){define("dojo/_base/lang ../Graphic ../core/Accessor ../core/Collection ../core/CollectionFlattener ../core/Evented ../core/Handles ../core/Logger ../core/Promise ../core/watchUtils ../core/promiseUtils ../core/scheduling ../geometry/Extent ../geometry/HeightModelInfo ../geometry/SpatialReference ./LayerViewManager ./RefreshManager ./BasemapView ./GroundView ./input/GamepadManager ./support/DefaultsFromMap".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z,t,x,r,m,e,w){var y=d.getLogger("esri.views.View");return q.createSubclass([h,l],{declaredClass:"esri.views.View",properties:{allLayerViews:{readOnly:!0},basemapView:{},animation:{},resizing:{},interacting:{},graphics:{type:g.ofType(f)},groundView:{},defaultsFromMap:w,heightModelInfo:{readOnly:!0,type:v,dependsOn:["map.heightModelInfo","defaultsFromMap.heightModelInfo"]},initialExtent:{readOnly:!0,type:u,dependsOn:["defaultsFromMap.extent"]},initialExtentRequired:{},
layerViews:{type:g},map:{},ready:{readOnly:!0,dependsOn:"map spatialReference width height initialExtentRequired initialExtent defaultsFromMap.isSpatialReferenceDone map.loaded".split(" ")},size:{readOnly:!0,dependsOn:["width","height"],get:function(){return[this.width,this.height]}},spatialReference:{type:z,dependsOn:["defaultsFromMap.spatialReference","defaultsFromMap.vcsWkid","defaultsFromMap.latestVcsWkid"]},stationary:{dependsOn:["animation","interacting","resizing"]},type:{},updating:{},padding:{},
width:{},height:{},cursor:{},spatialReferenceWarningDelay:1E3,gamepad:{}},constructor:function(a){this._viewHandles=new k;this._viewHandles.add(this.watch("ready",function(a,b){this._currentSpatialReference=a?this.spatialReference:null;this.notifyChange("spatialReference");!a&&b&&this.layerViewManager.clear()}.bind(this)));this.allLayerViews=new n({root:this,rootCollectionNames:["basemapView.baseLayerViews","groundView.layerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:function(a){return a.layerViews}});
this.defaultsFromMap=new w({view:this})},getDefaults:function(){return b.mixin(this.inherited(arguments),{layerViews:[],graphics:[],padding:{left:0,top:0,right:0,bottom:0}})},initialize:function(){var b=this.validate().then(function(){this._isValid=!0;this.notifyChange("ready");var b=function(){return c.whenOnce(this,"ready").then(function(){return a.after(0)}.bind(this)).then(function(){if(!this.ready)return b()}.bind(this))}.bind(this);return b()}.bind(this));this.addResolvingPromise(b);this.basemapView=
new r({view:this});this.groundView=new m({view:this});this.layerViewManager=new t({view:this});this.refreshManager=new x({view:this});this.gamepad=new e.GamepadManager;this._resetInitialViewPropertiesFromContent();var d;c.init(this.defaultsFromMap,"isSpatialReferenceDone",function(b){var c=!!(this.map&&0<this.map.allLayers.length);b&&!this.spatialReference&&c||!d?b&&!this.spatialReference&&c&&!d&&(d=a.after(this.spatialReferenceWarningDelay),d.then(function(){y.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}).catch(function(){})):
(d.cancel(),d=null)}.bind(this))},destroy:function(){this.destroyed||(this.basemapView.destroy(),this.groundView.destroy(),this.destroyLayerViews(),this.refreshManager.destroy(),this.defaultsFromMap.destroy(),this.defaultsFromMap=null,this._viewHandles.destroy(),this.map=null)},destroyLayerViews:function(){this.layerViewManager.destroy()},_viewHandles:null,_isValid:!1,_readyCycleForced:!1,_userSpatialReference:null,_currentSpatialReference:null,animation:null,basemapView:null,groundView:null,graphics:null,
heightModelInfo:null,_heightModelInfoGetter:function(){return this.getDefaultHeightModelInfo()},interacting:!1,layerViews:null,map:null,_mapSetter:function(a){var b=this._get("map");a!==b&&(a&&a.load&&a.load(),this._forceReadyCycle(),this._resetInitialViewPropertiesFromContent(),this._set("map",a))},padding:null,_readyGetter:function(){return!!(this._isValid&&!this._readyCycleForced&&this.map&&0!==this.width&&0!==this.height&&this.spatialReference&&(!this.map.load||this.map.loaded)&&(this._currentSpatialReference||
!this.initialExtentRequired||this.initialExtent||this.defaultsFromMap&&this.defaultsFromMap.isSpatialReferenceDone)&&this.defaultsFromMap&&this.defaultsFromMap.isTileInfoDone&&this.isSpatialReferenceSupported(this.spatialReference))},spatialReference:null,_spatialReferenceGetter:function(){var a=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;a&&this.isHeightModelInfoRequired&&this.defaultsFromMap&&(a=a.clone(),a.vcsWkid=this.defaultsFromMap.vcsWkid,
a.latestVcsWkid=this.defaultsFromMap.latestVcsWkid);return a},_spatialReferenceSetter:function(a){this._userSpatialReference=a;this._set("spatialReference",a)},stationary:!0,_stationaryGetter:function(){return!this.animation&&!this.interacting&&!this.resizing},type:null,updating:!1,initialExtentRequired:!0,initialExtent:null,_initialExtentGetter:function(){return this.defaultsFromMap&&this.defaultsFromMap.extent},cursor:"default",renderContext:null,gamepad:null,whenLayerView:function(a){return this.layerViewManager.whenLayerView(a)},
getDefaultSpatialReference:function(){return this.get("defaultsFromMap.spatialReference")},getDefaultHeightModelInfo:function(){return this.get("map.supportsHeightModelInfo")&&this.get("map.heightModelInfo")||this.get("defaultsFromMap.heightModelInfo")||null},validate:function(){return a.resolve()},isSpatialReferenceSupported:function(){return!0},isTileInfoRequired:function(){return!1},_resetInitialViewPropertiesFromContent:function(){if(this.defaultsFromMap){var a=this.defaultsFromMap.start.bind(this.defaultsFromMap);
this.defaultsFromMap.reset();this._currentSpatialReference=null;this.notifyChange("spatialReference");this._viewHandles.remove("defaultsFromMap");this._viewHandles.add([c.watch(this,"spatialReference",a),c.watch(this,"initialExtentRequired",a),p.schedule(a)],"defaultsFromMap")}},_forceReadyCycle:function(){this.ready&&(this._readyCycleForced=!0,c.whenFalseOnce(this,"ready",function(){this._readyCycleForced=!1;this.notifyChange("ready")}.bind(this)),this.notifyChange("ready"))}})})},"esri/views/LayerViewManager":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Error ../core/Handles ../core/promiseUtils ../core/scheduling ../core/watchUtils ../core/accessorSupport/decorators ./LayerViewFactory".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p){return function(b){function f(){var a=b.call(this)||this;a._promisesMap=new Map;a._layerViewsMap=new Map;a._handles=new k;a.factory=new p;a.ready=!1;a.layersToLayerViews=function(){var a=new Map;a.set("view.map.basemap.baseLayers","view.basemapView.baseLayerViews");a.set("view.map.ground.layers","view.groundView.layerViews");a.set("view.map.layers","view.layerViews");a.set("view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews");return a}();a._doWork=
a._doWork.bind(a);a.refresh=a.refresh.bind(a);a._handles.add(c.init(a,"view.ready",function(b){return a.ready=b}));a._handles.add(a.watch(["view.map.basemap","view.map.ground","view.map.layers","ready"],a.refresh),"watcher");return a}q(f,b);f.prototype.destroy=function(){this._handles&&(this.clear(),this.view=null,this.factory.destroy(),this.factory=null,this._handles.destroy(),this._map=this._layerViewsMap=this._promisesMap=this._handles=null)};f.prototype.clear=function(){this.destroyed||(this._layerViewsMap.forEach(this._disposeLayerView,
this),this._promisesMap.forEach(function(a){return a.cancel()}),this._layerViewsMap.clear(),this._promisesMap.clear(),this._refreshCollections())};f.prototype.refresh=function(){var a=this._handles;a.remove("refresh");a.add(h.schedule(this._doWork),"refresh")};f.prototype.whenLayerView=function(a){this.refresh();this._doWork();return this._promisesMap.has(a)?this._promisesMap.get(a):d.reject(new l("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:a}))};f.prototype._doWork=
function(){var a=this,b=this._handles,c=this.get("view.map");this._map!==c&&(this.clear(),this._map=c);if(b.has("refresh")){b.remove("refresh");b.remove("collection-change");this.factory.paused=!this.ready;var d=this._map&&this._map.allLayers;d&&(d.forEach(this._createLayerView,this),this._refreshCollections(),this._promisesMap.forEach(function(b,c){d.includes(c)||a._disposeLayerView(a._layerViewsMap.get(c),c)}),b.add(d.on("change",this.refresh),"collection-change"))}};f.prototype._refreshCollections=
function(){var a=this;this.layersToLayerViews.forEach(function(b,c){a._populateLayerViewsOwners(a.get(c),a.get(b),a.view)})};f.prototype._populateLayerViewsOwners=function(a,b,c){var d=this;if(a&&b){var f=0;a.forEach(function(a){var e=d._layerViewsMap.get(a);e&&(e.layer=a,e.parent=c,b.getItemAt(f)!==e&&b.splice(f,0,e),a.layers&&d._populateLayerViewsOwners(a.layers,e.layerViews,e),f+=1)});f<b.length&&b.splice(f,b.length)}else b&&b.removeAll()};f.prototype._createLayerView=function(a){var b=this,c=
this.view,d=this.factory,f=this._layerViewsMap,e=this._promisesMap;f.has(a)?a.load():e.has(a)||(d=d.create(c,a).then(function(d){if(!b._map||!b._map.allLayers.some(function(b){return a===b}))throw new l("view:no-layerview-for-layer","The layer has been removed from the map",{layer:a});f.set(a,d);b._refreshCollections();a.emit("layerview-create",{view:c,layerView:d});c.emit("layerview-create",{layer:a,layerView:d});return d.when()}),e.set(a,d),d.always(this.refresh))};f.prototype._disposeLayerView=
function(a,b){if(this._promisesMap.has(b)&&(this._promisesMap.get(b).cancel(),this._promisesMap.delete(b),a)){b=a.layer;var c=a.view;this.factory.dispose(a);a.layer=a.parent=a.view=null;this._layerViewsMap.delete(b);b.emit("layerview-destroy",{view:c,layerView:a});c.emit("layerview-destroy",{layer:b,layerView:a})}};g([a.property()],f.prototype,"ready",void 0);g([a.property()],f.prototype,"view",void 0);return f=g([a.subclass("esri.views.LayerViewManager")],f)}(a.declared(n))})},"esri/views/LayerViewFactory":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/Deferred dojo/when ../core/Accessor ../core/Collection ../core/Error ../core/watchUtils ../core/accessorSupport/decorators".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a){return function(b){function f(){var a=null!==b&&b.apply(this,arguments)||this;a.creationRequests=new d;a.paused=!0;return a}q(f,b);f.prototype.initialize=function(){var a=this;c.whenFalse(this,"paused",function(){a.creationRequests.toArray().forEach(a._processRequest,a)},!0)};f.prototype.destroy=function(){this.creationRequests.drain(function(a){return a.deferred.cancel(void 0)})};Object.defineProperty(f.prototype,"working",{get:function(){return 0<this.creationRequests.length},
enumerable:!0,configurable:!0});f.prototype.create=function(a,b){var c=this.getLayerViewPromise(b);if(c)return c;var d=this.creationRequests,f={deferred:new n(function(){var a=new h("cancelled:layerview-create","layerview creation cancelled",{layer:b});d.remove(f);f.creationPromise&&f.creationPromise.cancel(a);return a}),view:a,layer:b,started:!1,creationPromise:null};d.push(f);this.paused||this._processRequest(f);return f.deferred.promise};f.prototype.dispose=function(a){a.layer.destroyLayerView(a)};
f.prototype.getLayerViewPromise=function(a){var b=this.creationRequests&&this.creationRequests.find(function(b){return b.layer===a});return b&&b.deferred.promise};f.prototype._processRequest=function(a){var b=this;if(!a.started){a.started=!0;var c=a.deferred,d=a.layer,f=a.view;d.load().then(function(b){if(!c.isCanceled())return a.creationPromise=b.createLayerView(f),a.creationPromise}).then(function(b){return c.isCanceled()?b:a.creationPromise=l(b.when())}).catch(function(a){c.isCanceled()||c.reject(new h("layerview:create-error",
"layerview creation failed",{layer:d,error:a}))}).then(function(d){b.creationRequests&&b.creationRequests.remove(a);c.isFulfilled()?d&&b.dispose(d):c.resolve(d);return d})}};g([a.property()],f.prototype,"creationRequests",void 0);g([a.property()],f.prototype,"paused",void 0);g([a.property()],f.prototype,"view",void 0);g([a.property({dependsOn:["paused","creationRequests.length"],readOnly:!0})],f.prototype,"working",null);return f=g([a.subclass("esri.views.LayerViewFactory")],f)}(a.declared(k))})},
"esri/views/RefreshManager":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Handles ../core/accessorSupport/decorators".split(" "),function(b,f,q,g,n,l,k){return function(b){function d(){var c=null!==b&&b.apply(this,arguments)||this;c._handles=new l;c._currentTick=0;return c}q(d,b);d.prototype.initialize=function(){var b=this;this.view.allLayerViews.on("after-changes",function(){b.notifyChange("tickInterval");b._handles.remove("layerViewsUpdating");
b._handles.add(b._getLayerViewHandles(),"layerViewsUpdating")});this.watch("tickInterval",function(){return b._restartTicking()});this.watch("view.ready",function(){return b._restartTicking()});this._restartTicking()};d.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null,this._intervalID&&clearInterval(this._intervalID),this._currentTick=0)};Object.defineProperty(d.prototype,"tickInterval",{get:function(){var b=this.view.allLayerViews.filter(function(a){return!!a.refresh});
return this._getCommonInterval(b)},enumerable:!0,configurable:!0});d.prototype._restartTicking=function(){var b=this;this._currentTick=0;this._intervalID&&clearInterval(this._intervalID);this.get("view.ready")&&this.tickInterval&&(this._intervalID=setInterval(function(){var a=Date.now();b._currentTick+=b.tickInterval;b.view.allLayerViews.forEach(function(c){if(c.refresh){var d=Math.round(6E4*c.refreshInterval),f=0===b._currentTick%d,g=6E3>a-c.refreshTimestamp;d&&f&&!g&&c.refresh(a)}})},this.tickInterval))};
d.prototype._getLayerViewHandles=function(){var b=this,a=[];this.view.allLayerViews.forEach(function(c){if(c.refresh){var d=c.watch("refreshInterval",function(){return b.notifyChange("tickInterval")});a.push(d);c.layer&&(d=c.layer.on("refresh",function(){var a=Date.now();6E3>a-c.refreshTimestamp||c.refresh(a)}),a.push(d))}});return a};d.prototype._getCommonInterval=function(b){var a=function(b,c){return isNaN(b)||isNaN(c)?0:0>=c?b:a(c,b%c)};return b.toArray().reduce(function(b,c){return a(Math.round(6E4*
c.refreshInterval),b)},0)};g([k.property()],d.prototype,"view",void 0);g([k.property({readOnly:!0})],d.prototype,"tickInterval",null);return d=g([k.subclass("esri.views.RefreshManager")],d)}(k.declared(n))})},"esri/views/BasemapView":function(){define(["../core/Accessor","../core/Collection","../core/watchUtils"],function(b,f,q){return b.createSubclass({declaredClass:"esri.views.BasemapView",properties:{view:{},baseLayerViews:{type:f},referenceLayerViews:{type:f}},constructor:function(){this._loadingHdl=
q.init(this,"view.map.basemap",this._loadBasemap)},getDefaults:function(){return{baseLayerViews:[],referenceLayerViews:[]}},destroy:function(){this.view=null;this._loadingHdl&&(this._loadingHdl.remove(),this._loadingHdl=null)},_suspendedGetter:function(){return this.view?this.view.suspended:!0},_loadBasemap:function(b){b&&b.load()}})})},"esri/views/GroundView":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Collection ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators ./support/GroundViewElevationSampler".split(" "),
function(b,f,q,g,n,l,k,d,h,c){return function(a){function b(b){b=a.call(this)||this;b.handles=new k;b.view=null;b.layerViews=new l;return b}q(b,a);b.prototype.initialize=function(){var a=this;this.handles.add(d.when(this,"view.map.ground",function(a){return a.load()}));this.handles.add(this.layerViews.on("after-changes",function(){return a.layerViewsAfterChangesHandler()}))};b.prototype.destroy=function(){this._set("view",null);this.handles&&(this.handles.destroy(),this.handles=null)};Object.defineProperty(b.prototype,
"elevationSampler",{get:function(){return this.view&&"2d"!==this.view.type&&this.view.ready&&this.view.basemapTerrain&&this.view.basemapTerrain.ready?new c({view:this.view}):null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"updating",{get:function(){return this.suspended?!1:this.layerViews.some(function(a){return a.updating})},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"suspended",{get:function(){return!this.view||this.view.suspended},enumerable:!0,configurable:!0});
b.prototype.layerViewsAfterChangesHandler=function(){var a=this;this.handles.remove("updating");this.handles.add(this.layerViews.map(function(b){return b.watch("updating",function(){return a.updateUpdating()},!0)}).toArray(),"updating");this.updateUpdating()};b.prototype.updateUpdating=function(){this.notifyChange("updating")};g([h.property({readOnly:!0,dependsOn:["view.ready","view.basemapTerrain.ready"]})],b.prototype,"elevationSampler",null);g([h.property({type:Boolean,dependsOn:["suspended"],
readOnly:!0})],b.prototype,"updating",null);g([h.property({constructOnly:!0})],b.prototype,"view",void 0);g([h.property({type:l,readOnly:!0})],b.prototype,"layerViews",void 0);g([h.property({readOnly:!0,dependsOn:["view.suspended"]})],b.prototype,"suspended",null);return b=g([h.subclass("esri.views.GroundView")],b)}(h.declared(n))})},"esri/views/support/GroundViewElevationSampler":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Evented ../../core/Logger ../../core/accessorSupport/decorators ../../geometry/support/webMercatorUtils ../../layers/support/ElevationSampler".split(" "),
function(b,f,q,g,n,l,k,d,h,c){var a=k.getLogger("esri.views.support.GroundViewElevationSampler");return function(b){function f(a){a=b.call(this,a)||this;a.demResolution={min:-1,max:-1};return a}q(f,b);f.prototype.initialize=function(){var a=this;this.view.basemapTerrain.on("elevation-change",function(){return a.emit("changed",{})})};f.prototype.elevationAt=function(b){var c=b.spatialReference,d=this.spatialReference;return h.canProject(c,d)?this.view.basemapTerrain.getElevation(b):(a.error("Cannot sample elevation at a location with spatial reference ("+
(c?c.wkid:"unknown")+") different from the view ("+d.wkid+")"),null)};f.prototype.queryElevation=function(a){return c.updateGeometryElevation(a.clone(),this)};g([d.property({readOnly:!0})],f.prototype,"demResolution",void 0);g([d.property({readOnly:!0,aliasOf:"view.basemapTerrain.extent"})],f.prototype,"extent",void 0);g([d.property({readOnly:!0,aliasOf:"view.basemapTerrain.spatialReference"})],f.prototype,"spatialReference",void 0);g([d.property({constructOnly:!0})],f.prototype,"view",void 0);return f=
g([d.subclass("esri.views.support.GroundViewElevationSampler")],f)}(d.declared(n,l))})},"esri/layers/support/ElevationSampler":function(){define("require exports ../../geometry ../../core/Logger ../../geometry/support/aaBoundingRect ../../geometry/support/scaleUtils ../../geometry/support/webMercatorUtils".split(" "),function(b,f,q,g,n,l,k){function d(a,b){var c=h(a,b.spatialReference);if(!c)return null;switch(a.type){case "point":a.z=b.elevationAt(c)||0;break;case "polyline":p.spatialReference=c.spatialReference;
for(var d=0;d<a.paths.length;d++)for(var f=a.paths[d],g=c.paths[d],e=0;e<f.length;e++){var k=f[e],l=g[e];p.x=l[0];p.y=l[1];k[2]=b.elevationAt(p)||0}a.hasZ=!0;break;case "multipoint":p.spatialReference=c.spatialReference;for(d=0;d<a.points.length;d++)f=a.points[d],g=c.points[d],p.x=g[0],p.y=g[1],f[2]=b.elevationAt(p)||0;a.hasZ=!0}return a}function h(a,b){var d=a.spatialReference;return d.equals(b)?a:k.canProject(d,b)?k.project(a,b):(c.error("Cannot project geometry spatial reference (wkid:"+d.wkid+
") to elevation sampler spatial reference (wkid:"+b.wkid+")"),null)}Object.defineProperty(f,"__esModule",{value:!0});var c=g.getLogger("esri.layers.support.ElevationSampler"),a=function(){function a(a,b){this.tile=a;this.extent=n.toExtent(a.tile.extent,b.spatialReference);var c=l.getMetersPerUnitForSR(b.spatialReference);a=b.lodAt(a.tile.level).resolution*c;this.demResolution={min:a,max:a}}Object.defineProperty(a.prototype,"spatialReference",{get:function(){return this.extent.spatialReference},enumerable:!0,
configurable:!0});a.prototype.contains=function(a){var b=h(a,this.spatialReference);a=b.x;b=b.y;return a>=this.extent.xmin&&a<this.extent.xmax&&b>=this.extent.ymin&&b<this.extent.ymax};a.prototype.elevationAt=function(a){return(a=h(a,this.spatialReference))?this.tile.sample(a.x,a.y):null};a.prototype.queryElevation=function(a){return d(a.clone(),this)};a.prototype.on=function(a,b){return u};return a}();f.TileElevationSampler=a;b=function(){function b(b,c){this.samplers=c?b.map(function(b){return new a(b,
c)}):b;if(b=this.samplers[0])for(this.extent=b.extent.clone(),b=b.demResolution,this.demResolution={min:b.min,max:b.max},b=1;b<this.samplers.length;b++){var d=this.samplers[b];this.extent.union(d.extent);this.demResolution.min=Math.min(this.demResolution.min,d.demResolution.min);this.demResolution.max=Math.max(this.demResolution.max,d.demResolution.max)}else this.extent=n.toExtent(n.create(),c.spatialReference),this.demResolution={min:0,max:0}}Object.defineProperty(b.prototype,"spatialReference",
{get:function(){return this.extent.spatialReference},enumerable:!0,configurable:!0});b.prototype.elevationAt=function(a){a=h(a,this.spatialReference);if(!a)return null;for(var b=0,c=this.samplers;b<c.length;b++){var d=c[b];if(d.contains(a))return d.elevationAt(a)}return null};b.prototype.queryElevation=function(a){return d(a.clone(),this)};b.prototype.on=function(a,b){return u};return b}();f.MultiTileElevationSampler=b;f.updateGeometryElevation=d;var p=new q.Point,u={remove:function(){}}})},"esri/views/input/GamepadManager":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),
function(b,f,q,g,n,l){Object.defineProperty(f,"__esModule",{value:!0});b=function(b){function d(){var d=b.call(this)||this;d._filteredGamepads=[];d._idleTimer=null;d._idleTransformation={translation:[0,0,0],heading:0,tilt:0};d.device=null;d.sensitivity=1;d.invertX=!1;d.invertY=!0;d.perspective="first-person";d.mode="hover";d.isIdle=!0;return d}q(d,b);d.prototype.destroy=function(){this._idleTransformation=this._filteredGamepads=null;this._idleTimer&&(clearInterval(this._idleTimer),this._idleTimer=
0)};Object.defineProperty(d.prototype,"enabled",{get:function(){return this._get("enabled")},set:function(b){var c=this;this._set("enabled",b);b?(this._set("isIdle",!1),this._idleTimer&&(clearInterval(this._idleTimer),this._idleTimer=0),this._idleTimer=setInterval(function(){c.updateTransformation(c._idleTransformation);0===c._idleTransformation.translation[0]&&0===c._idleTransformation.translation[1]&&0===c._idleTransformation.translation[2]&&0===c._idleTransformation.heading&&0===c._idleTransformation.tilt?
c._set("isIdle",!0):c._set("isIdle",!1)},100)):(this._set("isIdle",!0),this._idleTimer&&(clearInterval(this._idleTimer),this._idleTimer=0))},enumerable:!0,configurable:!0});d.prototype.updateTransformation=function(b){var c=this.getGamepads();if(!c||0===c.length)return b.translation=[0,0,0],b.heading=0,b.tilt=0,b;var a=null;if(!this.device||0>this.device)a=c[0];else{for(var d=0;d<c.length;d++)if(c[d].index===this.device){a=c[d];break}a||(a=c[0])}var c=this._quadratic(a.axes[0]),d=this._quadratic(a.axes[1]),
f=this._quadratic(a.axes[2]),g=this._quadratic(a.axes[3]),a=(a.buttons[4].pressed?-1:0)+(a.buttons[5].pressed?1:0);this.invertX&&(f=-f);this.invertY&&(g=-g);c*=this.sensitivity;d*=this.sensitivity;a*=this.sensitivity;b.translation=[c,d,a];b.heading=f;b.tilt=g;return b};d.prototype.getGamepads=function(){for(var b=navigator.getGamepads(),c=this._filteredGamepads.length=0;c<b.length;++c){var a=b[c];a&&a.connected&&"standard"===a.mapping&&this._filteredGamepads.push(a)}return this._filteredGamepads};
d.prototype._quadratic=function(b){if(.15>Math.abs(b))return 0;var c=b*b;0>b&&(c*=-1);return c};g([l.property({type:Boolean,value:!1})],d.prototype,"enabled",null);g([l.property({type:Number})],d.prototype,"device",void 0);g([l.property({type:Number}),l.cast(function(b){return Math.min(Math.max(b,.1),10)})],d.prototype,"sensitivity",void 0);g([l.property({type:Boolean})],d.prototype,"invertX",void 0);g([l.property({type:Boolean})],d.prototype,"invertY",void 0);g([l.property({type:String})],d.prototype,
"perspective",void 0);g([l.property({type:String})],d.prototype,"mode",void 0);g([l.property({readOnly:!0,type:Boolean})],d.prototype,"isIdle",void 0);return d=g([l.subclass("esri.views.input.GamepadManager")],d)}(l.declared(n));f.GamepadManager=b})},"esri/views/support/DefaultsFromMap":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/arrayUtils ../../core/Handles ../../core/Logger ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/heightModelInfoUtils ../../geometry/support/webMercatorUtils ../../portal/support/geometryServiceUtils".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u){function v(a){return a?JSON.stringify(a.toJSON()):"undefined"}function z(a){switch(a){case 0:return"Waiting";case 1:return"Found";case 2:return"Exhausted"}return"Unknown: "+a}var t=d.getLogger("esri.views.support.DefaultsFromMap");return function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;a._handles=new k;a._waitTask=null;a._isStarted=!1;a._spatialReferenceCandidates=null;a._extentCandidates=null;a.logDebugInformation=!1;a.isSpatialReferenceDone=
!1;a.isTileInfoDone=!1;a.isHeightModelInfoSearching=!1;a.spatialReference=null;a.extent=null;a.heightModelInfo=null;a.vcsWkid=null;a.latestVcsWkid=null;a.mapCollectionPaths=f.DefaultMapCollectionPaths.slice();a.tileInfo=null;return a}q(d,b);f=d;d.prototype.initialize=function(){var a=this;this.watch("mapCollectionPaths",function(){a._isStarted&&(a.reset(),a.start())})};d.prototype.destroy=function(){this._set("view",null);this._handles&&(this._handles.destroy(),this._handles=null,this._isStarted=
!1);this._cancelLoading()};d.prototype.reset=function(){this._handles.removeAll();this._isStarted=!1;this._set("isSpatialReferenceDone",!1);this._set("isTileInfoDone",!1);this._set("isHeightModelInfoSearching",!1);this._set("spatialReference",null);this._set("extent",null);this._set("heightModelInfo",null);this._set("vcsWkid",null);this._set("latestVcsWkid",null);this._set("tileInfo",null);this._extentCandidates=this._spatialReferenceCandidates=null};d.prototype.start=function(){this._handles.removeAll();
this._isStarted=!0;for(var a=this._updateLayerChange.bind(this),b=0,c=this.mapCollectionPaths;b<c.length;b++)this._handles.add(h.on(this.view,"map."+c[b],"change",a,a,a,!0))};d.prototype._ownerNameFromCollectionName=function(a){var b=a.lastIndexOf(".");return-1===b?"view":"view."+a.slice(0,b)};d.prototype._ensureLoadedOwnersFromCollectionName=function(a){a=this._ownerNameFromCollectionName(a).split(".");for(var b,c=0;c<a.length;c++){b=this.get(a.slice(0,c+1).join("."));if(!b)break;if(b.load&&!b.isFulfilled())return{owner:null,
loading:b.load()}}return{owner:b}};d.prototype._cancelLoading=function(){this._waitTask=null;this._extentProjectTask&&(this._extentProjectTask.cancel(),this._extentProjectTask=null)};d.prototype._updateWhen=function(a){var b=this,c=!0,d=!1,e=a.always(function(){c?d=!0:e===b._waitTask&&b._update()}),c=!1;d||(this._waitTask=e);return d};d.prototype._updateLayerChange=function(){this.isSpatialReferenceDone&&!this.spatialReference&&this._set("isSpatialReferenceDone",!1);this._update()};d.prototype._update=
function(){var b=this;this._cancelLoading();if(this.view){if(!this.isSpatialReferenceDone){this._debugLog("Starting search for spatial reference...");var c=this._processMapCollections(function(a){return b._processSpatialReferenceSource(a)});this._debugLog("Search ended with status '"+z(c)+"'");if(0!==c){var d=null,c=this._spatialReferenceCandidates;!c||1>c.length?(d=this.defaultSpatialReference,this._debugLog("No spatial reference found, locking to default ("+v(d)+")")):(this.defaultSpatialReference&&
1<c.length&&-1<l.findIndex(c,function(a){return a.equals(b.defaultSpatialReference)})&&(c=[this.defaultSpatialReference]),d=c[0],this._debugLog("Locking to "+v(d)));this._set("spatialReference",d);this._set("isSpatialReferenceDone",!0);d&&(c=this.logDebugInformation,this.logDebugInformation=!1,this._processMapCollections(function(a){return b._findExtent(a,d)}),this.extent||this._projectExtentCandidate(),this.logDebugInformation=c)}}null==this.heightModelInfo&&this.view.isHeightModelInfoRequired&&
(this._debugLog("Starting search for height model info..."),c=this._processMapCollections(function(a){return b._processHeightModelInfoSource(a)},function(b){return a.mayHaveHeightModelInfo(b)}),this._debugLog("Search ended with status "+z(c)),this._set("isHeightModelInfoSearching",0===c));null==this.tileInfo&&(c=!1,this.view.isTileInfoRequired()&&(c=this._deriveTileInfo()),c||this._set("isTileInfoDone",!0))}};d.prototype._processMapCollections=function(a,b){for(var c=0,d=this.mapCollectionPaths;c<
d.length;c++){var e="map."+d[c],f=this._ensureLoadedOwnersFromCollectionName(e);this._debugLog("Processing collection "+e+"...");if(f.loading&&!this._updateWhen(f.loading))return this._debugLog("Collection "+e+" owner is loading -\x3e wait"),0;f=f.owner;if(!f||f.isRejected&&f.isRejected())this._debugLog("Collection "+e+" owner is invalid or rejected -\x3e skip");else if(f=this.view.get(e)){if(e=this._processMapCollection(f,a,b),2!==e)return e}else this._debugLog("Collection "+e+" does not exist -\x3e skip")}return 2};
d.prototype._processMapCollection=function(a,b,c){for(var d=0;d<a.length;d++){var e=a.getItemAt(d);if(null==c||c(e)){if(e.load&&!e.isFulfilled()&&!this._updateWhen(e.load()))return this._debugLog("Source "+e.id+" is loading -\x3e wait"),0;if(!e.load||e.isResolved()){if(b(e))return 1;if(e.layers&&(e=this._processMapCollection(e.layers,b),2!==e))return e}}else this._debugLog("Source "+e.id+" is skipped due to predicate")}return 2};d.prototype._processSpatialReferenceSource=function(a){var b=this._getSupportedSpatialReferences(a);
if(0===b.length)return!1;this._spatialReferenceCandidates?(b=l.intersect(b,this._spatialReferenceCandidates,function(a,b){return a.equals(b)}),0<b.length?this._spatialReferenceCandidates=b:this._debugLog("Layer "+a.id+" is ignored because its supported spatial\n          references are not compatible with the previous candidates")):this._spatialReferenceCandidates=b;return 1===this._spatialReferenceCandidates.length};d.prototype._findExtent=function(a,b){var c=a.fullExtents||(a.fullExtent?[a.fullExtent]:
[]),d=l.find(c,function(a){return a.spatialReference.equals(b)});if(d)return this._set("extent",d),!0;0<this._getSupportedSpatialReferences(a).length&&(c=c.map(function(b){return{extent:b,layer:a}}),this._extentCandidates=(this._extentCandidates||[]).concat(c));return!1};d.prototype._projectExtentCandidate=function(){var a=this;if(this._extentCandidates&&this._extentCandidates.length){var b=this.spatialReference,c=l.find(this._extentCandidates,function(a){return p.canProject(a.extent.spatialReference,
b)});c?this._set("extent",p.project(c.extent,b)):(c=this._extentCandidates[0],this._extentProjectTask=u.projectGeometry(c.extent,b,c.layer.portalItem).then(function(b){a._set("extent",b)}))}};d.prototype._getSupportedSpatialReferences=function(a){var b=this,c=a.supportedSpatialReferences||(a.spatialReference?[a.spatialReference]:[]);if(0===c.length)return this._debugLog("Layer "+a.id+" is ignored because it does not have any spatial references"),[];c=c.filter(function(c){return b.view.isSpatialReferenceSupported(c,
a,function(a){return b._debugLog(a)})});0===c.length?this._debugLog("Layer "+a.id+" has spatial references but none of them are supported (or layer doesn't require locking)"):this._debugLog("Layer "+a.id+" has spatial references. Resulting candidate set: "+c.map(v).join(", "));return c};d.prototype._processHeightModelInfoSource=function(b){var c=a.deriveHeightModelInfoFromLayer(b);return c?(this._set("heightModelInfo",c),this._set("isHeightModelInfoSearching",!1),b.spatialReference&&(this._set("vcsWkid",
b.spatialReference.vcsWkid),this._set("latestVcsWkid",b.spatialReference.latestVcsWkid)),!0):!1};d.prototype._deriveTileInfo=function(){if(!this.isSpatialReferenceDone)return!0;var a=this.get("view.map");if(!a)return!0;var b=a.basemap,c=b&&b.get("baseLayers.0"),a=a.get("layers.0"),d=!1,f=null;b&&"failed"!==b.loadStatus?b.loaded?c&&"failed"!==c.loadStatus?c.loaded?f=c.tileInfo:(this._updateWhen(c.load()),d=!0):a&&"failed"!==a.loadStatus?a.loaded?f=a.tileInfo:(this._updateWhen(a.load()),d=!0):d=!0:
(this._updateWhen(b.load()),d=!0):a&&"failed"!==a.loadStatus&&(a.loaded?f=a.tileInfo:(this._updateWhen(a.load()),d=!0));f&&!f.spatialReference.equals(this.spatialReference)&&(f=null);d||this._set("tileInfo",f);return d};d.prototype._debugLog=function(a){this.logDebugInformation&&t.info(a)};d.DefaultMapCollectionPaths=["basemap.baseLayers","layers","ground.layers","basemap.referenceLayers"];g([c.property()],d.prototype,"logDebugInformation",void 0);g([c.property({readOnly:!0})],d.prototype,"isSpatialReferenceDone",
void 0);g([c.property({readOnly:!0})],d.prototype,"isTileInfoDone",void 0);g([c.property({readOnly:!0})],d.prototype,"isHeightModelInfoSearching",void 0);g([c.property({constructOnly:!0})],d.prototype,"view",void 0);g([c.property({readOnly:!0})],d.prototype,"spatialReference",void 0);g([c.property({readOnly:!0})],d.prototype,"extent",void 0);g([c.property({readOnly:!0})],d.prototype,"heightModelInfo",void 0);g([c.property({readOnly:!0})],d.prototype,"vcsWkid",void 0);g([c.property({readOnly:!0})],
d.prototype,"latestVcsWkid",void 0);g([c.property()],d.prototype,"mapCollectionPaths",void 0);g([c.property()],d.prototype,"defaultSpatialReference",void 0);g([c.property({readOnly:!0})],d.prototype,"tileInfo",void 0);return d=f=g([c.subclass("esri.views.support.DefaultsFromMap")],d);var f}(c.declared(n))})},"esri/geometry/support/heightModelInfoUtils":function(){define(["require","exports","../../core/Error","../HeightModelInfo","../../layers/support/arcgisLayerUrl"],function(b,f,q,g,n){function l(a,
b,c){if(k(a)&&k(b)){if(null==a||null==b)return 0;if(c||a.heightUnit===b.heightUnit){if(a.heightModel!==b.heightModel)return 2;switch(a.heightModel){case "gravity-related-height":return 0;case "ellipsoidal":return a.vertCRS===b.vertCRS?0:3;default:return 4}}else return 1}else return 4}function k(a){return null==a||null!=a.heightModel&&null!=a.heightUnit}function d(a){var b=a.url&&n.parse(a.url);return null==(a.spatialReference&&a.spatialReference.vcsWkid)&&b&&"ImageServer"===b.serverType||!a.heightModelInfo?
("hasZ"in a?!0===a.hasZ:h(a))?g.deriveUnitFromSR(c,a.spatialReference):null:a.heightModelInfo}function h(a){switch(a.type){case "elevation":case "integrated-mesh":case "point-cloud":case "scene":return!0}return!1}Object.defineProperty(f,"__esModule",{value:!0});f.validateWebSceneError=function(a,b){if(!a)return null;if(!k(a))return new q("webscene:unsupported-height-model-info","The vertical coordinate system of the scene is not supported",{heightModelInfo:a});var c=a.heightUnit;a=g.deriveUnitFromSR(a,
b).heightUnit;return c!==a?new q("webscene:incompatible-height-unit","The vertical units of the scene ("+c+") must match the horizontal units of the scene ("+a+")",{verticalUnit:c,horizontalUnit:a}):null};f.rejectLayerError=function(a,b,c){var f=d(a),k=l(f,b,c),n=null;if(f){var p=g.deriveUnitFromSR(f,a.spatialReference).heightUnit;c||p===f.heightUnit||(n=new q("layerview:unmatched-height-unit","The vertical units of the layer must match the horizontal units ("+p+")",{horizontalUnit:p}))}if(null==
a.heightModelInfo&&null==a.spatialReference&&("hasZ"in a?!0===a.hasZ:h(a))||4===k||n)return new q("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:f,error:n});n=null;switch(k){case 1:a=f.heightUnit||"unknown";c=b.heightUnit||"unknown";n=new q("layerview:incompatible-height-unit","The vertical units of the layer ("+a+") must match the vertical units of the scene ("+c+")",{layerUnit:a,sceneUnit:c});break;case 2:a=f.heightModel||
"unknown";c=b.heightModel||"unknown";n=new q("layerview:incompatible-height-model","The height model of the layer ("+a+") must match the height model of the scene ("+c+")",{layerHeightModel:a,sceneHeightModel:c});break;case 3:a=f.vertCRS||"unknown",c=b.vertCRS||"unknown",n=new q("layerview:incompatible-vertical-datum","The vertical datum of the layer ("+a+") must match the vertical datum of the scene ("+c+")",{layerDatum:a,sceneDatum:c})}return n?new q("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",
{layerHeightModelInfo:f,sceneHeightModelInfo:b,error:n}):null};f.deriveHeightModelInfoFromLayer=d;f.mayHaveHeightModelInfo=function(a){return null!=a.layers||h(a)||void 0!==a.hasZ||void 0!==a.heightModelInfo};var c=new g({heightModel:"gravity-related-height"})})},"esri/portal/support/geometryServiceUtils":function(){define("require exports ../../config ../../core/Error ../../core/promiseUtils ../Portal ../PortalItem ../../tasks/GeometryService ../../tasks/support/ProjectParameters".split(" "),function(b,
f,q,g,n,l,k,d,h){function c(a){void 0===a&&(a=null);if(q.geometryServiceUrl)return n.resolve(new d({url:q.geometryServiceUrl}));if(!a)return n.reject(new g("internal:geometry-service-url-not-configured"));var b;a.isInstanceOf(k)?b=a.portal||l.getDefault():a.isInstanceOf(l)&&(b=a);return b.load().then(function(a){if(a.helperServices&&a.helperServices.geometry&&a.helperServices.geometry.url)return n.resolve(new d({url:a.helperServices.geometry.url}));throw new g("internal:geometry-service-url-not-configured");
})}Object.defineProperty(f,"__esModule",{value:!0});f.create=c;f.projectGeometry=function(a,b,d){void 0===d&&(d=null);return c(d).then(function(c){var d=new h;d.geometries=[a];d.outSpatialReference=b;return c.project(d)}).then(function(a){return a&&Array.isArray(a)&&1===a.length?a[0]:n.reject()})}})},"esri/views/ViewAnimation":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/Deferred ../core/Accessor ../core/Error ../core/Promise ../core/promiseUtils ../core/scheduling ../core/accessorSupport/decorators".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a){b=function(b){function d(a){a=b.call(this)||this;a.state="running";a.target=null;return a}q(d,b);d.prototype.initialize=function(){this._dfd=new n;this.addResolvingPromise(this._dfd.promise)};Object.defineProperty(d.prototype,"done",{get:function(){return"finished"===this.state||"stopped"===this.state},enumerable:!0,configurable:!0});d.prototype.stop=function(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),c.schedule(this._dfd.reject.bind(this._dfd,
new k("ViewAnimation stopped"))))};d.prototype.finish=function(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),c.schedule(this._dfd.resolve))};d.prototype.update=function(a,b){b||(b=h.isThenable(a)?"waiting-for-target":"running");this._set("target",a);this._set("state",b)};g([a.property({readOnly:!0,dependsOn:["state"]})],d.prototype,"done",null);g([a.property({readOnly:!0,type:String})],d.prototype,"state",void 0);g([a.property()],d.prototype,"target",void 0);return d=
g([a.subclass("esri.views.ViewAnimation")],d)}(a.declared(l,d));(b||(b={})).State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"};return b})},"esri/widgets/Widget":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/dom dojo/_base/lang ../core/Accessor ../core/ArrayPool ../core/Collection ../core/Evented ../core/Handles ../core/Logger ../core/watchUtils ../core/accessorSupport/decorators maquette".split(" "),
function(b,f,q,g,n,l,k,d,h,c,a,p,u,v,z){var t=p.getLogger("esri.widgets.Widget"),x=0;return function(b){function c(c,d){c=b.call(this)||this;c._attached=!1;c.destroyed=!1;c.domNode=null;c.iconClass="esri-icon-checkbox-unchecked";c.visible=!0;c._internalHandles=new a;c.render=c.render.bind(c);return c}q(c,b);c.prototype.normalizeCtorArgs=function(a,b){a=l.mixin({},a);b&&(a.container=b);return a};c.prototype.initialize=function(){var a=this;this._internalHandles.add(this._renderableProps.map(function(b){return u.init(a,
b,function(a,c){var d=this;h.isCollection(c)&&this._internalHandles.remove(this.declaredClass+":"+b+"-collection-change-event-listener");h.isCollection(a)&&(a=a.on("change",function(){return d.scheduleRender()}),this._internalHandles.add(a,this.declaredClass+":"+b+"-collection-change-event-listener"));this.scheduleRender()})}));this._delegatedEventNames.length&&this._internalHandles.add(u.init(this,"viewModel",function(){a._get("viewModel")&&a._internalHandles.remove("delegated-events");a._delegatedEventNames.map(function(b){return a.viewModel.on(b,
function(c){a.emit(b,c)})})}),"delegated-events");this.postInitialize();this._internalHandles.add(u.whenOnce(this,"container",function(b){return a._attach(b)}))};c.prototype.postInitialize=function(){};c.prototype.destroy=function(){this.destroyed||(this.viewModel&&this.viewModel.destroy(),this._detach(this.container),this._internalHandles.destroy(),this._set("destroyed",!0))};c.prototype.startup=function(){t.warn("Widget.startup() is deprecated and no longer needed")};Object.defineProperty(c.prototype,
"container",{set:function(a){this._get("container")||this._set("container",a)},enumerable:!0,configurable:!0});c.prototype.castContainer=function(a){return n.byId(a)};Object.defineProperty(c.prototype,"id",{get:function(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+x++},set:function(a){a&&this._set("id",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"label",{get:function(){return this.declaredClass.split(".").pop()},enumerable:!0,configurable:!0});
c.prototype.scheduleRender=function(){this._projector.scheduleRender()};c.prototype.on=function(a,b){var c=this.inherited(arguments);this._internalHandles.add(c);return c};c.prototype.classes=function(a){for(var b=d.acquire(),c=0;c<arguments.length;c++){var e=arguments[c],f=typeof e;if("string"===f)b.push(e);else if(Array.isArray(e))b.push.apply(b,e);else if("object"===f)for(var g in e)e[g]&&b.push(g)}c=b.join(" ");d.release(b);return c};c.prototype.own=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments));
this._internalHandles.add(a)};c.prototype.renderNow=function(){this._projector.renderNow()};c.prototype._attach=function(a){a&&(this._projector.merge(a,this.render),this._attached=!0)};c.prototype._detach=function(a){a&&this._attached&&(this._projector.detach(this.render),a.parentNode&&a.parentNode.removeChild(a),this._attached=!1)};g([v.shared(z.createProjector())],c.prototype,"_projector",void 0);g([v.shared([])],c.prototype,"_renderableProps",void 0);g([v.shared([])],c.prototype,"_delegatedEventNames",
void 0);g([v.property({value:null})],c.prototype,"container",null);g([v.cast("container")],c.prototype,"castContainer",null);g([v.property({readOnly:!0})],c.prototype,"destroyed",void 0);g([v.property({aliasOf:"container"})],c.prototype,"domNode",void 0);g([v.property({readOnly:!0})],c.prototype,"iconClass",void 0);g([v.property({dependsOn:["container"]})],c.prototype,"id",null);g([v.property({readOnly:!0})],c.prototype,"label",null);g([v.property()],c.prototype,"viewModel",void 0);g([v.property()],
c.prototype,"visible",void 0);return c=g([v.subclass("esri.widgets.Widget")],c)}(v.declared(k,c))})},"maquette/dist/maquette.umd":function(){(function(b,f){"object"===typeof exports&&"undefined"!==typeof module?f(exports):"function"===typeof define&&define.amd?define(["exports"],f):f(b.maquette={})})(this,function(b){var f=[],q=function(a,b){var c={};Object.keys(a).forEach(function(b){c[b]=a[b]});b&&Object.keys(b).forEach(function(a){c[a]=b[a]});return c},g=function(a,b){return a.vnodeSelector!==
b.vnodeSelector?!1:a.properties&&b.properties?a.properties.key!==b.properties.key?!1:a.properties.bind===b.properties.bind:!a.properties&&!b.properties},n=function(a){if("string"!==typeof a)throw Error("Style values must be strings");},l=function(a,b,c,d){var e=a[b];if(""!==e.vnodeSelector){var f=e.properties;if(!(f&&(void 0===f.key?f.bind:f.key)))for(f=0;f<a.length;f++)if(f!==b&&g(a[f],e))throw Error(c.vnodeSelector+" had a "+e.vnodeSelector+" child "+("added"===d?d:"removed")+", but there is now more than one. You must add unique key properties to make them distinguishable.");
}},k=[],d=!1,h=function(a){(a.children||[]).forEach(h);a.properties&&a.properties.afterRemoved&&a.properties.afterRemoved.apply(a.properties.bind||a.properties,[a.domNode])},c=function(){d=!1;k.forEach(h);k.length=0},a=function(a){k.push(a);d||(d=!0,"undefined"!==typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(c,{timeout:16}):setTimeout(c,16))},p=function(b){var c=b.domNode;if(b.properties){var d=b.properties.exitAnimation;if(d){c.style.pointerEvents="none";d(c,function(){c.parentNode&&
(c.parentNode.removeChild(c),a(b))},b.properties);return}}c.parentNode&&(c.parentNode.removeChild(c),a(b))},u=function(a,b,c){if(b)for(var d=c.eventHandlerInterceptor,e=Object.keys(b),f=e.length,g=function(f){f=e[f];var g=b[f];if("className"===f)throw Error('Property "className" is not supported, use "class".');if("class"===f)g.split(/\s+/).forEach(function(b){return a.classList.add(b)});else if("classes"===f){var h=Object.keys(g),k=h.length;for(f=0;f<k;f++){var l=h[f];g[l]&&a.classList.add(l)}}else if("styles"===
f)for(h=Object.keys(g),k=h.length,f=0;f<k;f++){var l=h[f],m=g[l];m&&(n(m),c.styleApplyer(a,l,m))}else"key"!==f&&null!==g&&void 0!==g&&(h=typeof g,"function"===h?0===f.lastIndexOf("on",0)&&(d&&(g=d(f,g,a,b)),"oninput"===f&&function(){var a=g;g=function(b){a.apply(this,[b]);b.target["oninput-value"]=b.target.value}}(),a[f]=g):"string"===h&&"value"!==f&&"innerHTML"!==f?"http://www.w3.org/2000/svg"===c.namespace&&"href"===f?a.setAttributeNS("http://www.w3.org/1999/xlink",f,g):a.setAttribute(f,g):a[f]=
g)},h=0;h<f;h++)g(h)},v=function(a,b,c){var d=b.children;if(d)for(var e=0;e<d.length;e++)z(d[e],a,void 0,c);b.text&&(a.textContent=b.text);u(a,b.properties,c);b.properties&&b.properties.afterCreate&&b.properties.afterCreate.apply(b.properties.bind||b.properties,[a,c,b.vnodeSelector,b.properties,b.children])},z=function(a,b,c,d){var e,f=0,g=a.vnodeSelector,h=b.ownerDocument;if(""===g)e=a.domNode=h.createTextNode(a.text),void 0!==c?b.insertBefore(e,c):b.appendChild(e);else{for(var k=0;k<=g.length;++k){var l=
g.charAt(k);if(k===g.length||"."===l||"#"===l)l=g.charAt(f-1),f=g.slice(f,k),"."===l?e.classList.add(f):"#"===l?e.id=f:("svg"===f&&(d=q(d,{namespace:"http://www.w3.org/2000/svg"})),void 0!==d.namespace?e=a.domNode=h.createElementNS(d.namespace,f):(e=a.domNode=a.domNode||h.createElement(f),"input"===f&&a.properties&&void 0!==a.properties.type&&e.setAttribute("type",a.properties.type)),void 0!==c?b.insertBefore(e,c):e.parentNode!==b&&b.appendChild(e)),f=k+1}v(e,a,d)}},t,x=function(a,b,c){b&&b.split(" ").forEach(function(b){return a.classList.toggle(b,
c)})};t=function(a,b,c){var d=a.domNode;if(a===b)return!1;var e=!1;if(""===b.vnodeSelector){if(b.text!==a.text)return a=d.ownerDocument.createTextNode(b.text),d.parentNode.replaceChild(a,d),b.domNode=a,!0;b.domNode=d}else{0===b.vnodeSelector.lastIndexOf("svg",0)&&(c=q(c,{namespace:"http://www.w3.org/2000/svg"}));a.text!==b.text&&(e=!0,void 0===b.text?d.removeChild(d.firstChild):d.textContent=b.text);b.domNode=d;var h;h=a.children;var k=b.children,m=c;if(h===k)h=!1;else{h=h||f;for(var k=k||f,r=h.length,
u=k.length,v=0,w=0,y=!1;w<u;){var A=v<r?h[v]:void 0,B=k[w];if(void 0!==A&&g(A,B))y=t(A,B,m)||y,v++;else{b:{var A=h,C=B;if(""!==C.vnodeSelector)for(var F=v+1;F<A.length;F++)if(g(A[F],C)){A=F;break b}A=-1}if(0<=A){for(;v<A;v++)p(h[v]),l(h,v,b,"removed");y=t(h[A],B,m)||y;v=A+1}else z(B,d,v<r?h[v].domNode:void 0,m),B.properties&&(A=B.properties.enterAnimation)&&A(B.domNode,B.properties),l(k,w,b,"added")}w++}if(r>v)for(;v<r;v++)p(h[v]),l(h,v,b,"removed");h=y}e=h||e;h=a.properties;k=b.properties;m=c;if(k){r=
!1;u=Object.keys(k);w=u.length;for(y=0;y<w;y++)if(A=u[y],B=k[A],v=h[A],"class"===A)v!==B&&(x(d,v,!1),x(d,B,!0));else if("classes"===A)for(var C=d.classList,F=Object.keys(B),D=F.length,A=0;A<D;A++){var Q=F[A],P=!!B[Q];P!==!!v[Q]&&(r=!0,P?C.add(Q):C.remove(Q))}else if("styles"===A)for(C=Object.keys(B),F=C.length,A=0;A<F;A++)D=C[A],Q=B[D],Q!==v[D]&&(r=!0,Q?(n(Q),m.styleApplyer(d,D,Q)):m.styleApplyer(d,D,""));else B||"string"!==typeof v||(B=""),"value"===A?(C=d[A],C!==B&&(d["oninput-value"]?C===d["oninput-value"]:
B!==v)&&(d[A]=B,d["oninput-value"]=void 0),B!==v&&(r=!0)):B!==v&&(v=typeof B,"function"===v&&m.eventHandlerInterceptor||("string"===v&&"innerHTML"!==A?"http://www.w3.org/2000/svg"===m.namespace&&"href"===A?d.setAttributeNS("http://www.w3.org/1999/xlink",A,B):"role"===A&&""===B?d.removeAttribute(A):d.setAttribute(A,B):d[A]!==B&&(d[A]=B),r=!0));h=r}else h=void 0;e=h||e;b.properties&&b.properties.afterUpdate&&b.properties.afterUpdate.apply(b.properties.bind||b.properties,[d,c,b.vnodeSelector,b.properties,
b.children])}e&&b.properties&&b.properties.updateAnimation&&b.properties.updateAnimation(d,b.properties,a.properties);return!1};var r=function(a,b){return{getLastRender:function(){return a},update:function(c){if(a.vnodeSelector!==c.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");var d=a;a=c;t(d,c,b)},domNode:a.domNode}},m={namespace:void 0,performanceLogger:function(){},eventHandlerInterceptor:void 0,
styleApplyer:function(a,b,c){a.style[b]=c}},e={create:function(a,b){b=q(m,b);z(a,document.createElement("div"),void 0,b);return r(a,b)},append:function(a,b,c){c=q(m,c);z(b,a,void 0,c);return r(b,c)},insertBefore:function(a,b,c){c=q(m,c);z(b,a.parentNode,a,c);return r(b,c)},merge:function(a,b,c){c=q(m,c);b.domNode=a;v(a,b,c);return r(b,c)},replace:function(a,b,c){c=q(m,c);z(b,a.parentNode,a,c);a.parentNode.removeChild(a);return r(b,c)}},w=function(a,b,c){for(var d=0,e=b.length;d<e;d++){var f=b[d];
Array.isArray(f)?w(a,f,c):null!==f&&void 0!==f&&!1!==f&&("string"===typeof f&&(f={vnodeSelector:"",properties:void 0,children:void 0,text:f.toString(),domNode:null}),c.push(f))}},y;y=Array.prototype.find?function(a,b){return a.find(b)}:function(a,b){return a.filter(b)[0]};var A=function(a,b){var c=a;b.forEach(function(a){c=c&&c.children?y(c.children,function(b){return b.domNode===a}):void 0});return c},D=function(a,b,c){var d=function(d){c("domEvent",d);var e=b(),f;f=d.currentTarget;for(var g=e.domNode,
h=[];f!==g;)h.push(f),f=f.parentNode;f=h;f.reverse();e=A(e.getLastRender(),f);a.scheduleRender();var k;e&&(k=e.properties["on"+d.type].apply(e.properties.bind||this,arguments));c("domEventProcessed",d);return k};return function(a,b,c,e){return d}};b.dom=e;b.h=function(a,b,c){if(Array.isArray(b))c=b,b=void 0;else if(b&&("string"===typeof b||b.hasOwnProperty("vnodeSelector"))||c&&("string"===typeof c||c.hasOwnProperty("vnodeSelector")))throw Error("h called with invalid arguments");var d,e;void 0!==
c&&1===c.length&&"string"===typeof c[0]?d=c[0]:c&&(e=[],w(a,c,e),0===e.length&&(e=void 0));return{vnodeSelector:a,properties:b,children:e,text:""===d?void 0:d,domNode:null}};b.createProjector=function(a){var b,c=q(m,a),d=c.performanceLogger,f=!0,g,h=!1,k=[],l=[],n=function(a,e,f){var g;c.eventHandlerInterceptor=D(b,function(){return g},d);g=a(e,f(),c);k.push(g);l.push(f)},p=function(){g=void 0;if(f){f=!1;d("renderStart",void 0);for(var a=0;a<k.length;a++){var b=l[a]();d("rendered",void 0);k[a].update(b);
d("patched",void 0)}d("renderDone",void 0);f=!0}};return b={renderNow:p,scheduleRender:function(){g||h||(g=requestAnimationFrame(p))},stop:function(){g&&(cancelAnimationFrame(g),g=void 0);h=!0},resume:function(){h=!1;f=!0;b.scheduleRender()},append:function(a,b){n(e.append,a,b)},insertBefore:function(a,b){n(e.insertBefore,a,b)},merge:function(a,b){n(e.merge,a,b)},replace:function(a,b){n(e.replace,a,b)},detach:function(a){for(var b=0;b<l.length;b++)if(l[b]===a)return l.splice(b,1),k.splice(b,1)[0];
throw Error("renderFunction was not found");}}};b.createCache=function(){var a,b;return{invalidate:function(){a=b=void 0},result:function(c,d){if(a)for(var e=0;e<c.length;e++)a[e]!==c[e]&&(b=void 0);b||(b=d(),a=c);return b}}};b.createMapping=function(a,b,c){var d=[],e=[];return{results:e,map:function(f){for(var g=f.map(a),h=e.slice(),k=0,l=0;l<f.length;l++){var m=f[l],n=g[l];if(n===d[k])e[l]=h[k],c(m,h[k],l),k++;else{for(var p=!1,q=1;q<d.length+1;q++){var r=(k+q)%d.length;if(d[r]===n){e[l]=h[r];c(f[l],
h[r],l);k=r+1;p=!0;break}}p||(e[l]=b(m,l))}}e.length=f.length;d=g}}};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/widgets/support/widget":function(){define("require exports ./decorators ./jsxFactory ./widgetUtils ../Widget".split(" "),function(b,f,q,g,n,l){function k(b){for(var d in b)f.hasOwnProperty(d)||(f[d]=b[d])}Object.defineProperty(f,"__esModule",{value:!0});k(q);k(g);k(n);f.isWidget=function(b){return b&&b instanceof l};f.isWidgetBase=function(b){return b&&"function"===typeof b.postMixInProperties&&
"function"===typeof b.buildRendering&&"function"===typeof b.postCreate&&"function"===typeof b.startup}})},"esri/widgets/support/decorators":function(){define(["require","exports","./decorators/accessibleHandler","./decorators/renderable","./decorators/vmEvent"],function(b,f,q,g,n){function l(b){for(var d in b)f.hasOwnProperty(d)||(f[d]=b[d])}Object.defineProperty(f,"__esModule",{value:!0});l(q);l(g);l(n)})},"esri/widgets/support/decorators/accessibleHandler":function(){define(["require","exports",
"dojo/keys"],function(b,f,q){function g(b){return function(f){for(var g=[],d=1;d<arguments.length;d++)g[d-1]=arguments[d];d=f.type;if(f instanceof KeyboardEvent||"keyup"===d||"keydown"===d||"keypress"===d){if(f.keyCode===q.ENTER||f.keyCode===q.SPACE)f.preventDefault(),f.target.click()}else b.call.apply(b,[this,f].concat(g))}}Object.defineProperty(f,"__esModule",{value:!0});f.accessibleHandler=function(){return function(b,f){return{value:g(b[f])}}}})},"esri/widgets/support/decorators/renderable":function(){define(["require",
"exports","./propUtils"],function(b,f,q){Object.defineProperty(f,"__esModule",{value:!0});f.renderable=function(b){var f="string"===typeof b?q.splitProps(b):b;return function(b,g){b._renderableProps||(b._renderableProps=[]);b=b._renderableProps;f?b.push.apply(b,q.normalizePropNames(f,g)):b.push(g)}}})},"esri/widgets/support/decorators/propUtils":function(){define(["require","exports"],function(b,f){Object.defineProperty(f,"__esModule",{value:!0});f.splitProps=function(b){return b.split(",").map(function(b){return b.trim()})};
f.normalizePropNames=function(b,f){return b.map(function(b){b=0===b.indexOf(f)?b:f+"."+b;return b})}})},"esri/widgets/support/decorators/vmEvent":function(){define(["require","exports","./propUtils"],function(b,f,q){Object.defineProperty(f,"__esModule",{value:!0});f.vmEvent=function(b){return function(f){f._delegatedEventNames||(f._delegatedEventNames=[]);var g=Array.isArray(b)?b:q.splitProps(b);f._delegatedEventNames=f._delegatedEventNames.concat(g)}}})},"esri/widgets/support/jsxFactory":function(){define(["require",
"exports","maquette-jsx"],function(b,f,q){Object.defineProperty(f,"__esModule",{value:!0});f.tsx=function(b,f){for(var g=[],k=2;k<arguments.length;k++)g[k-2]=arguments[k];f&&""===f.class&&delete f.class;return q.jsx.apply(void 0,[b,f].concat(g))}})},"maquette-jsx/dist/maquette-jsx.umd":function(){(function(b,f){"object"===typeof exports&&"undefined"!==typeof module?f(exports):"function"===typeof define&&define.amd?define(["exports"],f):f(b.maquetteCssTransitions={})})(this,function(b){var f=function(b,
n){for(var g=0,k=b.length;g<k;g++){var d=b[g];Array.isArray(d)?f(d,n):null!==d&&void 0!==d&&!1!==d&&(d.hasOwnProperty("vnodeSelector")||(d={vnodeSelector:"",properties:void 0,children:void 0,text:d.toString(),domNode:null}),n.push(d))}},q=function(b,n){for(var g=[],k=2;k<arguments.length;k++)g[k-2]=arguments[k];if(1===g.length&&"string"===typeof g[0])return{vnodeSelector:b,properties:n||void 0,children:void 0,text:g[0],domNode:null};k=[];f(g,k);return{vnodeSelector:b,properties:n||void 0,children:k,
text:void 0,domNode:null}};b.jsx=q;b.enableGlobalJsx=function(){window.jsx=q};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/widgets/support/widgetUtils":function(){define(["require","exports","dojo/has","../../core/Logger","maquette-css-transitions"],function(b,f,q,g,n){Object.defineProperty(f,"__esModule",{value:!0});g.getLogger("esri.widgets.support.widgetUtils");f.join=function(){for(var b=[],f=0;f<arguments.length;f++)b[f]=arguments[f];return b.join(" ")};f.isRtl=function(){return"rtl"===
document.dir};f.storeNode=function(b){this[b.getAttribute("data-node-ref")]=b};f.cssTransition=function(b,f){return("enter"===b?n.createEnterCssTransition:n.createExitCssTransition)(f)}})},"maquette-css-transitions/dist/maquette-css-transitions.umd":function(){(function(b,f){"object"===typeof exports&&"undefined"!==typeof module?f(exports):"function"===typeof define&&define.amd?define(["exports"],f):f(b.maquetteCssTransitions={})})(this,function(b){var f,q,g=function(b){if("WebkitTransition"in b.style)f=
"webkitTransitionEnd",q="webkitAnimationEnd";else if("transition"in b.style)f="transitionend",q="animationend";else throw Error("Your browser is not supported!");};b.createEnterCssTransition=function(b,l){void 0===l&&(l=b+"-active");return function(k){f||g(k);var d=!1,h=function(c){d||(d=!0,k.removeEventListener(f,h),k.removeEventListener(q,h),k.classList.remove(b),k.classList.remove(l))};k.classList.add(b);k.addEventListener(f,h);k.addEventListener(q,h);requestAnimationFrame(function(){k.classList.add(l)})}};
b.createExitCssTransition=function(b,l){void 0===l&&(l=b+"-active");return function(k,d){f||g(k);var h=!1,c=function(a){h||(h=!0,k.removeEventListener(f,c),k.removeEventListener(q,c),d())};k.classList.add(b);k.addEventListener(f,c);k.addEventListener(q,c);requestAnimationFrame(function(){k.classList.add(l)})}};Object.defineProperty(b,"__esModule",{value:!0})})},"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\n\x3chtml\x3e\n\x3chead\x3e\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\n\n  \x3cscript\x3e\n    var dojoConfig \x3d {\n      async: true,\n      baseUrl: "../../../dojo/",\n      has: {\n        "csp-restrictions": true,\n        "dojo-preload-i18n-Api": false\n      }\n    };\n  \x3c/script\x3e\n  \x3c!--\n  This src is relative to this page and assumes dojo is a sibling to esri.\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\n  --\x3e\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\n\n  \x3cscript\x3e\n    function windowMessageHandler(event) {\n      window.removeEventListener("message", windowMessageHandler);\n\n      var port \x3d event.ports[0];\n\n      require([\n        "dojo/request/script"\n      ], function(script) {\n        port.postMessage("ready");\n\n        port.addEventListener("message", function(event) {\n          var data \x3d event.data;\n          script.get(data.url, data.options)\n              .then(function(response) {\n                port.postMessage({\n                  id: data.id,\n                  response: response\n                });\n              })\n              .catch(function(error) {\n                port.postMessage({\n                  id: data.id,\n                  isError: true,\n                  message: error.message\n                });\n              });\n        });\n        port.start();\n      });\n    }\n\n    window.addEventListener("message", windowMessageHandler);\n  \x3c/script\x3e\n\x3c/head\x3e\n\x3cbody\x3e\n\x3c/body\x3e\n\x3c/html\x3e\n',
"*now":function(b){b(['dojo/i18n!*preload*dojo/nls/dojo*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},"*noref":1}});require.boot&&require.apply(null,require.boot);